(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Vu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jg={exports:{}},jc={},Gg={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function YL(){if(V0)return Rt;V0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function _(G){return G===null||typeof G!="object"?null:(G=g&&G[g]||G["@@iterator"],typeof G=="function"?G:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function C(G,se,D){this.props=G,this.context=se,this.refs=b,this.updater=D||y}C.prototype.isReactComponent={},C.prototype.setState=function(G,se){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,se,"setState")},C.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function S(){}S.prototype=C.prototype;function T(G,se,D){this.props=G,this.context=se,this.refs=b,this.updater=D||y}var R=T.prototype=new S;R.constructor=T,w(R,C.prototype),R.isPureReactComponent=!0;var F=Array.isArray,k=Object.prototype.hasOwnProperty,z={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(G,se,D){var fe,ve={},te=null,Ne=null;if(se!=null)for(fe in se.ref!==void 0&&(Ne=se.ref),se.key!==void 0&&(te=""+se.key),se)k.call(se,fe)&&!N.hasOwnProperty(fe)&&(ve[fe]=se[fe]);var Pe=arguments.length-2;if(Pe===1)ve.children=D;else if(1<Pe){for(var ke=Array(Pe),ze=0;ze<Pe;ze++)ke[ze]=arguments[ze+2];ve.children=ke}if(G&&G.defaultProps)for(fe in Pe=G.defaultProps,Pe)ve[fe]===void 0&&(ve[fe]=Pe[fe]);return{$$typeof:n,type:G,key:te,ref:Ne,props:ve,_owner:z.current}}function W(G,se){return{$$typeof:n,type:G.type,key:se,ref:G.ref,props:G.props,_owner:G._owner}}function j(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function U(G){var se={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(D){return se[D]})}var K=/\/+/g;function Y(G,se){return typeof G=="object"&&G!==null&&G.key!=null?U(""+G.key):se.toString(36)}function Q(G,se,D,fe,ve){var te=typeof G;(te==="undefined"||te==="boolean")&&(G=null);var Ne=!1;if(G===null)Ne=!0;else switch(te){case"string":case"number":Ne=!0;break;case"object":switch(G.$$typeof){case n:case e:Ne=!0}}if(Ne)return Ne=G,ve=ve(Ne),G=fe===""?"."+Y(Ne,0):fe,F(ve)?(D="",G!=null&&(D=G.replace(K,"$&/")+"/"),Q(ve,se,D,"",function(ze){return ze})):ve!=null&&(j(ve)&&(ve=W(ve,D+(!ve.key||Ne&&Ne.key===ve.key?"":(""+ve.key).replace(K,"$&/")+"/")+G)),se.push(ve)),1;if(Ne=0,fe=fe===""?".":fe+":",F(G))for(var Pe=0;Pe<G.length;Pe++){te=G[Pe];var ke=fe+Y(te,Pe);Ne+=Q(te,se,D,ke,ve)}else if(ke=_(G),typeof ke=="function")for(G=ke.call(G),Pe=0;!(te=G.next()).done;)te=te.value,ke=fe+Y(te,Pe++),Ne+=Q(te,se,D,ke,ve);else if(te==="object")throw se=String(G),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return Ne}function ne(G,se,D){if(G==null)return G;var fe=[],ve=0;return Q(G,fe,"","",function(te){return se.call(D,te,ve++)}),fe}function oe(G){if(G._status===-1){var se=G._result;se=se(),se.then(function(D){(G._status===0||G._status===-1)&&(G._status=1,G._result=D)},function(D){(G._status===0||G._status===-1)&&(G._status=2,G._result=D)}),G._status===-1&&(G._status=0,G._result=se)}if(G._status===1)return G._result.default;throw G._result}var ae={current:null},ee={transition:null},pe={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:ee,ReactCurrentOwner:z};function O(){throw Error("act(...) is not supported in production builds of React.")}return Rt.Children={map:ne,forEach:function(G,se,D){ne(G,function(){se.apply(this,arguments)},D)},count:function(G){var se=0;return ne(G,function(){se++}),se},toArray:function(G){return ne(G,function(se){return se})||[]},only:function(G){if(!j(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Rt.Component=C,Rt.Fragment=t,Rt.Profiler=r,Rt.PureComponent=T,Rt.StrictMode=i,Rt.Suspense=h,Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Rt.act=O,Rt.cloneElement=function(G,se,D){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var fe=w({},G.props),ve=G.key,te=G.ref,Ne=G._owner;if(se!=null){if(se.ref!==void 0&&(te=se.ref,Ne=z.current),se.key!==void 0&&(ve=""+se.key),G.type&&G.type.defaultProps)var Pe=G.type.defaultProps;for(ke in se)k.call(se,ke)&&!N.hasOwnProperty(ke)&&(fe[ke]=se[ke]===void 0&&Pe!==void 0?Pe[ke]:se[ke])}var ke=arguments.length-2;if(ke===1)fe.children=D;else if(1<ke){Pe=Array(ke);for(var ze=0;ze<ke;ze++)Pe[ze]=arguments[ze+2];fe.children=Pe}return{$$typeof:n,type:G.type,key:ve,ref:te,props:fe,_owner:Ne}},Rt.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:s,_context:G},G.Consumer=G},Rt.createElement=I,Rt.createFactory=function(G){var se=I.bind(null,G);return se.type=G,se},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(G){return{$$typeof:u,render:G}},Rt.isValidElement=j,Rt.lazy=function(G){return{$$typeof:p,_payload:{_status:-1,_result:G},_init:oe}},Rt.memo=function(G,se){return{$$typeof:d,type:G,compare:se===void 0?null:se}},Rt.startTransition=function(G){var se=ee.transition;ee.transition={};try{G()}finally{ee.transition=se}},Rt.unstable_act=O,Rt.useCallback=function(G,se){return ae.current.useCallback(G,se)},Rt.useContext=function(G){return ae.current.useContext(G)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(G){return ae.current.useDeferredValue(G)},Rt.useEffect=function(G,se){return ae.current.useEffect(G,se)},Rt.useId=function(){return ae.current.useId()},Rt.useImperativeHandle=function(G,se,D){return ae.current.useImperativeHandle(G,se,D)},Rt.useInsertionEffect=function(G,se){return ae.current.useInsertionEffect(G,se)},Rt.useLayoutEffect=function(G,se){return ae.current.useLayoutEffect(G,se)},Rt.useMemo=function(G,se){return ae.current.useMemo(G,se)},Rt.useReducer=function(G,se,D){return ae.current.useReducer(G,se,D)},Rt.useRef=function(G){return ae.current.useRef(G)},Rt.useState=function(G){return ae.current.useState(G)},Rt.useSyncExternalStore=function(G,se,D){return ae.current.useSyncExternalStore(G,se,D)},Rt.useTransition=function(){return ae.current.useTransition()},Rt.version="18.3.1",Rt}var W0;function Qy(){return W0||(W0=1,Gg.exports=YL()),Gg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function KL(){if(j0)return jc;j0=1;var n=Qy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(u,h,d){var p,g={},_=null,y=null;d!==void 0&&(_=""+d),h.key!==void 0&&(_=""+h.key),h.ref!==void 0&&(y=h.ref);for(p in h)i.call(h,p)&&!s.hasOwnProperty(p)&&(g[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)g[p]===void 0&&(g[p]=h[p]);return{$$typeof:e,type:u,key:_,ref:y,props:g,_owner:r.current}}return jc.Fragment=t,jc.jsx=o,jc.jsxs=o,jc}var G0;function JL(){return G0||(G0=1,jg.exports=KL()),jg.exports}var V=JL(),me=Qy();const fi=Vu(me);var vf={},$g={exports:{}},zi={},Zg={exports:{}},qg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function QL(){return $0||($0=1,(function(n){function e(ee,pe){var O=ee.length;ee.push(pe);e:for(;0<O;){var G=O-1>>>1,se=ee[G];if(0<r(se,pe))ee[G]=pe,ee[O]=se,O=G;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var pe=ee[0],O=ee.pop();if(O!==pe){ee[0]=O;e:for(var G=0,se=ee.length,D=se>>>1;G<D;){var fe=2*(G+1)-1,ve=ee[fe],te=fe+1,Ne=ee[te];if(0>r(ve,O))te<se&&0>r(Ne,ve)?(ee[G]=Ne,ee[te]=O,G=te):(ee[G]=ve,ee[fe]=O,G=fe);else if(te<se&&0>r(Ne,O))ee[G]=Ne,ee[te]=O,G=te;else break e}}return pe}function r(ee,pe){var O=ee.sortIndex-pe.sortIndex;return O!==0?O:ee.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var h=[],d=[],p=1,g=null,_=3,y=!1,w=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ee){for(var pe=t(d);pe!==null;){if(pe.callback===null)i(d);else if(pe.startTime<=ee)i(d),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=t(d)}}function F(ee){if(b=!1,R(ee),!w)if(t(h)!==null)w=!0,oe(k);else{var pe=t(d);pe!==null&&ae(F,pe.startTime-ee)}}function k(ee,pe){w=!1,b&&(b=!1,S(I),I=-1),y=!0;var O=_;try{for(R(pe),g=t(h);g!==null&&(!(g.expirationTime>pe)||ee&&!U());){var G=g.callback;if(typeof G=="function"){g.callback=null,_=g.priorityLevel;var se=G(g.expirationTime<=pe);pe=n.unstable_now(),typeof se=="function"?g.callback=se:g===t(h)&&i(h),R(pe)}else i(h);g=t(h)}if(g!==null)var D=!0;else{var fe=t(d);fe!==null&&ae(F,fe.startTime-pe),D=!1}return D}finally{g=null,_=O,y=!1}}var z=!1,N=null,I=-1,W=5,j=-1;function U(){return!(n.unstable_now()-j<W)}function K(){if(N!==null){var ee=n.unstable_now();j=ee;var pe=!0;try{pe=N(!0,ee)}finally{pe?Y():(z=!1,N=null)}}else z=!1}var Y;if(typeof T=="function")Y=function(){T(K)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ne=Q.port2;Q.port1.onmessage=K,Y=function(){ne.postMessage(null)}}else Y=function(){C(K,0)};function oe(ee){N=ee,z||(z=!0,Y())}function ae(ee,pe){I=C(function(){ee(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){w||y||(w=!0,oe(k))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(ee){switch(_){case 1:case 2:case 3:var pe=3;break;default:pe=_}var O=_;_=pe;try{return ee()}finally{_=O}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,pe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var O=_;_=ee;try{return pe()}finally{_=O}},n.unstable_scheduleCallback=function(ee,pe,O){var G=n.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?G+O:G):O=G,ee){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=O+se,ee={id:p++,callback:pe,priorityLevel:ee,startTime:O,expirationTime:se,sortIndex:-1},O>G?(ee.sortIndex=O,e(d,ee),t(h)===null&&ee===t(d)&&(b?(S(I),I=-1):b=!0,ae(F,O-G))):(ee.sortIndex=se,e(h,ee),w||y||(w=!0,oe(k))),ee},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(ee){var pe=_;return function(){var O=_;_=pe;try{return ee.apply(this,arguments)}finally{_=O}}}})(qg)),qg}var Z0;function eC(){return Z0||(Z0=1,Zg.exports=QL()),Zg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function tC(){if(q0)return zi;q0=1;var n=Qy(),e=eC();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(r[a]=c,a=0;a<c.length;a++)i.add(c[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function _(a){return h.call(g,a)?!0:h.call(p,a)?!1:d.test(a)?g[a]=!0:(p[a]=!0,!1)}function y(a,c,m,x){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function w(a,c,m,x){if(c===null||typeof c>"u"||y(a,c,m,x))return!0;if(x)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(a,c,m,x,E,P,B){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=E,this.mustUseProperty=m,this.propertyName=a,this.type=c,this.sanitizeURL=P,this.removeEmptyString=B}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){C[a]=new b(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];C[c]=new b(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){C[a]=new b(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){C[a]=new b(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){C[a]=new b(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){C[a]=new b(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){C[a]=new b(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){C[a]=new b(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){C[a]=new b(a,5,!1,a.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function T(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(S,T);C[c]=new b(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(S,T);C[c]=new b(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(S,T);C[c]=new b(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){C[a]=new b(a,1,!1,a.toLowerCase(),null,!1,!1)}),C.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){C[a]=new b(a,1,!1,a.toLowerCase(),null,!0,!0)});function R(a,c,m,x){var E=C.hasOwnProperty(c)?C[c]:null;(E!==null?E.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(w(c,m,E,x)&&(m=null),x||E===null?_(c)&&(m===null?a.removeAttribute(c):a.setAttribute(c,""+m)):E.mustUseProperty?a[E.propertyName]=m===null?E.type===3?!1:"":m:(c=E.attributeName,x=E.attributeNamespace,m===null?a.removeAttribute(c):(E=E.type,m=E===3||E===4&&m===!0?"":""+m,x?a.setAttributeNS(x,c,m):a.setAttribute(c,m))))}var F=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),z=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),U=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),ee=Symbol.iterator;function pe(a){return a===null||typeof a!="object"?null:(a=ee&&a[ee]||a["@@iterator"],typeof a=="function"?a:null)}var O=Object.assign,G;function se(a){if(G===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);G=c&&c[1]||""}return`
`+G+a}var D=!1;function fe(a,c){if(!a||D)return"";D=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Ee){var x=Ee}Reflect.construct(a,[],c)}else{try{c.call()}catch(Ee){x=Ee}a.call(c.prototype)}else{try{throw Error()}catch(Ee){x=Ee}a()}}catch(Ee){if(Ee&&x&&typeof Ee.stack=="string"){for(var E=Ee.stack.split(`
`),P=x.stack.split(`
`),B=E.length-1,J=P.length-1;1<=B&&0<=J&&E[B]!==P[J];)J--;for(;1<=B&&0<=J;B--,J--)if(E[B]!==P[J]){if(B!==1||J!==1)do if(B--,J--,0>J||E[B]!==P[J]){var ue=`
`+E[B].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=B&&0<=J);break}}}finally{D=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?se(a):""}function ve(a){switch(a.tag){case 5:return se(a.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return a=fe(a.type,!1),a;case 11:return a=fe(a.type.render,!1),a;case 1:return a=fe(a.type,!0),a;default:return""}}function te(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case N:return"Fragment";case z:return"Portal";case W:return"Profiler";case I:return"StrictMode";case Y:return"Suspense";case Q:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case U:return(a.displayName||"Context")+".Consumer";case j:return(a._context.displayName||"Context")+".Provider";case K:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ne:return c=a.displayName||null,c!==null?c:te(a.type)||"Memo";case oe:c=a._payload,a=a._init;try{return te(a(c))}catch{}}return null}function Ne(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(c);case 8:return c===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Pe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ke(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ze(a){var c=ke(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),x=""+a[c];if(!a.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,P=m.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return E.call(this)},set:function(B){x=""+B,P.call(this,B)}}),Object.defineProperty(a,c,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(B){x=""+B},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function We(a){a._valueTracker||(a._valueTracker=ze(a))}function be(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var m=c.getValue(),x="";return a&&(x=ke(a)?a.checked?"true":"false":a.value),a=x,a!==m?(c.setValue(a),!0):!1}function Re(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function De(a,c){var m=c.checked;return O({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function je(a,c){var m=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;m=Pe(c.value!=null?c.value:m),a._wrapperState={initialChecked:x,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ie(a,c){c=c.checked,c!=null&&R(a,"checked",c,!1)}function X(a,c){Ie(a,c);var m=Pe(c.value),x=c.type;if(m!=null)x==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(x==="submit"||x==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?we(a,c.type,m):c.hasOwnProperty("defaultValue")&&we(a,c.type,Pe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function $(a,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,m||c===a.value||(a.value=c),a.defaultValue=c}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function we(a,c,m){(c!=="number"||Re(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var Ae=Array.isArray;function $e(a,c,m,x){if(a=a.options,c){c={};for(var E=0;E<m.length;E++)c["$"+m[E]]=!0;for(m=0;m<a.length;m++)E=c.hasOwnProperty("$"+a[m].value),a[m].selected!==E&&(a[m].selected=E),E&&x&&(a[m].defaultSelected=!0)}else{for(m=""+Pe(m),c=null,E=0;E<a.length;E++){if(a[E].value===m){a[E].selected=!0,x&&(a[E].defaultSelected=!0);return}c!==null||a[E].disabled||(c=a[E])}c!==null&&(c.selected=!0)}}function Ke(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return O({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function rt(a,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(t(92));if(Ae(m)){if(1<m.length)throw Error(t(93));m=m[0]}c=m}c==null&&(c=""),m=c}a._wrapperState={initialValue:Pe(m)}}function Je(a,c){var m=Pe(c.value),x=Pe(c.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),c.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),x!=null&&(a.defaultValue=""+x)}function st(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function he(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?he(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Le,Se=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,x,E){MSApp.execUnsafeLocalFunction(function(){return a(c,m,x,E)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Le=Le||document.createElement("div"),Le.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Le.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Fe(a,c){if(c){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=c;return}}a.textContent=c}var Xe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ut=["Webkit","ms","Moz","O"];Object.keys(Xe).forEach(function(a){ut.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Xe[c]=Xe[a]})});function At(a,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Xe.hasOwnProperty(a)&&Xe[a]?(""+c).trim():c+"px"}function Ot(a,c){a=a.style;for(var m in c)if(c.hasOwnProperty(m)){var x=m.indexOf("--")===0,E=At(m,c[m],x);m==="float"&&(m="cssFloat"),x?a.setProperty(m,E):a[m]=E}}var gn=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function le(a,c){if(c){if(gn[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function Be(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tt=null;function Ct(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Jt=null,bn=null,En=null;function $i(a){if(a=Hs(a)){if(typeof Jt!="function")throw Error(t(280));var c=a.stateNode;c&&(c=Rl(c),Jt(a.stateNode,a.type,c))}}function ns(a){bn?En?En.push(a):En=[a]:bn=a}function Xn(){if(bn){var a=bn,c=En;if(En=bn=null,$i(a),c)for(a=0;a<c.length;a++)$i(c[a])}}function ti(a,c){return a(c)}function vi(){}var Zi=!1;function ni(a,c,m){if(Zi)return a(c,m);Zi=!0;try{return ti(a,c,m)}finally{Zi=!1,(bn!==null||En!==null)&&(vi(),Xn())}}function xi(a,c){var m=a.stateNode;if(m===null)return null;var x=Rl(m);if(x===null)return null;m=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(a=a.type,x=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!x;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(t(231,c,typeof m));return m}var so=!1;if(u)try{var As={};Object.defineProperty(As,"passive",{get:function(){so=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{so=!1}function rc(a,c,m,x,E,P,B,J,ue){var Ee=Array.prototype.slice.call(arguments,3);try{c.apply(m,Ee)}catch(He){this.onError(He)}}var Z=!1,ce=null,ge=!1,Ce=null,Ve={onError:function(a){Z=!0,ce=a}};function St(a,c,m,x,E,P,B,J,ue){Z=!1,ce=null,rc.apply(Ve,arguments)}function dt(a,c,m,x,E,P,B,J,ue){if(St.apply(this,arguments),Z){if(Z){var Ee=ce;Z=!1,ce=null}else throw Error(t(198));ge||(ge=!0,Ce=Ee)}}function lt(a){var c=a,m=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(m=c.return),a=c.return;while(a)}return c.tag===3?m:null}function xt(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function zt(a){if(lt(a)!==a)throw Error(t(188))}function kt(a){var c=a.alternate;if(!c){if(c=lt(a),c===null)throw Error(t(188));return c!==a?null:a}for(var m=a,x=c;;){var E=m.return;if(E===null)break;var P=E.alternate;if(P===null){if(x=E.return,x!==null){m=x;continue}break}if(E.child===P.child){for(P=E.child;P;){if(P===m)return zt(E),a;if(P===x)return zt(E),c;P=P.sibling}throw Error(t(188))}if(m.return!==x.return)m=E,x=P;else{for(var B=!1,J=E.child;J;){if(J===m){B=!0,m=E,x=P;break}if(J===x){B=!0,x=E,m=P;break}J=J.sibling}if(!B){for(J=P.child;J;){if(J===m){B=!0,m=P,x=E;break}if(J===x){B=!0,x=P,m=E;break}J=J.sibling}if(!B)throw Error(t(189))}}if(m.alternate!==x)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?a:c}function It(a){return a=kt(a),a!==null?_t(a):null}function _t(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=_t(a);if(c!==null)return c;a=a.sibling}return null}var hr=e.unstable_scheduleCallback,tn=e.unstable_cancelCallback,dr=e.unstable_shouldYield,Bn=e.unstable_requestPaint,Vt=e.unstable_now,fr=e.unstable_getCurrentPriorityLevel,dn=e.unstable_ImmediatePriority,wi=e.unstable_UserBlockingPriority,fn=e.unstable_NormalPriority,sc=e.unstable_LowPriority,oo=e.unstable_IdlePriority,ua=null,qi=null;function ca(a){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(ua,a,void 0,(a.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:ao,un=Math.log,cl=Math.LN2;function ao(a){return a>>>=0,a===0?32:31-(un(a)/cl|0)|0}var Or=64,lo=4194304;function Mt(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function nn(a,c){var m=a.pendingLanes;if(m===0)return 0;var x=0,E=a.suspendedLanes,P=a.pingedLanes,B=m&268435455;if(B!==0){var J=B&~E;J!==0?x=Mt(J):(P&=B,P!==0&&(x=Mt(P)))}else B=m&~E,B!==0?x=Mt(B):P!==0&&(x=Mt(P));if(x===0)return 0;if(c!==0&&c!==x&&(c&E)===0&&(E=x&-x,P=c&-c,E>=P||E===16&&(P&4194240)!==0))return c;if((x&4)!==0&&(x|=m&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=x;0<c;)m=31-Et(c),E=1<<m,x|=a[m],c&=~E;return x}function oc(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hl(a,c){for(var m=a.suspendedLanes,x=a.pingedLanes,E=a.expirationTimes,P=a.pendingLanes;0<P;){var B=31-Et(P),J=1<<B,ue=E[B];ue===-1?((J&m)===0||(J&x)!==0)&&(E[B]=oc(J,c)):ue<=c&&(a.expiredLanes|=J),P&=~J}}function ii(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function hd(){var a=Or;return Or<<=1,(Or&4194240)===0&&(Or=64),a}function uo(a){for(var c=[],m=0;31>m;m++)c.push(a);return c}function Xi(a,c,m){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Et(c),a[c]=m}function Sn(a,c){var m=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var x=a.eventTimes;for(a=a.expirationTimes;0<m;){var E=31-Et(m),P=1<<E;c[E]=0,x[E]=-1,a[E]=-1,m&=~P}}function zr(a,c){var m=a.entangledLanes|=c;for(a=a.entanglements;m;){var x=31-Et(m),E=1<<x;E&c|a[x]&c&&(a[x]|=c),m&=~E}}var Ft=0;function co(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var dl,ks,fl,pl,ha,da=!1,ho=[],Yi=null,Fr=null,pr=null,fa=new Map,vt=new Map,Rn=[],Xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ac(a,c){switch(a){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":fa.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":vt.delete(c.pointerId)}}function Rs(a,c,m,x,E,P){return a===null||a.nativeEvent!==P?(a={blockedOn:c,domEventName:m,eventSystemFlags:x,nativeEvent:P,targetContainers:[E]},c!==null&&(c=Hs(c),c!==null&&ks(c)),a):(a.eventSystemFlags|=x,c=a.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),a)}function lc(a,c,m,x,E){switch(c){case"focusin":return Yi=Rs(Yi,a,c,m,x,E),!0;case"dragenter":return Fr=Rs(Fr,a,c,m,x,E),!0;case"mouseover":return pr=Rs(pr,a,c,m,x,E),!0;case"pointerover":var P=E.pointerId;return fa.set(P,Rs(fa.get(P)||null,a,c,m,x,E)),!0;case"gotpointercapture":return P=E.pointerId,vt.set(P,Rs(vt.get(P)||null,a,c,m,x,E)),!0}return!1}function ml(a){var c=Us(a.target);if(c!==null){var m=lt(c);if(m!==null){if(c=m.tag,c===13){if(c=xt(m),c!==null){a.blockedOn=c,ha(a.priority,function(){fl(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function mr(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var m=yl(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var x=new m.constructor(m.type,m);tt=x,m.target.dispatchEvent(x),tt=null}else return c=Hs(m),c!==null&&ks(c),a.blockedOn=m,!1;c.shift()}return!0}function gl(a,c,m){mr(a)&&m.delete(c)}function pa(){da=!1,Yi!==null&&mr(Yi)&&(Yi=null),Fr!==null&&mr(Fr)&&(Fr=null),pr!==null&&mr(pr)&&(pr=null),fa.forEach(gl),vt.forEach(gl)}function _n(a,c){a.blockedOn===c&&(a.blockedOn=null,da||(da=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pa)))}function Ki(a){function c(E){return _n(E,a)}if(0<ho.length){_n(ho[0],a);for(var m=1;m<ho.length;m++){var x=ho[m];x.blockedOn===a&&(x.blockedOn=null)}}for(Yi!==null&&_n(Yi,a),Fr!==null&&_n(Fr,a),pr!==null&&_n(pr,a),fa.forEach(c),vt.forEach(c),m=0;m<Rn.length;m++)x=Rn[m],x.blockedOn===a&&(x.blockedOn=null);for(;0<Rn.length&&(m=Rn[0],m.blockedOn===null);)ml(m),m.blockedOn===null&&Rn.shift()}var Is=F.ReactCurrentBatchConfig,ma=!0;function Em(a,c,m,x){var E=Ft,P=Is.transition;Is.transition=null;try{Ft=1,ga(a,c,m,x)}finally{Ft=E,Is.transition=P}}function dd(a,c,m,x){var E=Ft,P=Is.transition;Is.transition=null;try{Ft=4,ga(a,c,m,x)}finally{Ft=E,Is.transition=P}}function ga(a,c,m,x){if(ma){var E=yl(a,c,m,x);if(E===null)l(a,c,x,_l,m),ac(a,x);else if(lc(E,a,c,m,x))x.stopPropagation();else if(ac(a,x),c&4&&-1<Xt.indexOf(a)){for(;E!==null;){var P=Hs(E);if(P!==null&&dl(P),P=yl(a,c,m,x),P===null&&l(a,c,x,_l,m),P===E)break;E=P}E!==null&&x.stopPropagation()}else l(a,c,x,null,m)}}var _l=null;function yl(a,c,m,x){if(_l=null,a=Ct(x),a=Us(a),a!==null)if(c=lt(a),c===null)a=null;else if(m=c.tag,m===13){if(a=xt(c),a!==null)return a;a=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return _l=a,null}function Dt(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fr()){case dn:return 1;case wi:return 4;case fn:case sc:return 16;case oo:return 536870912;default:return 16}default:return 16}}var is=null,bi=null,rs=null;function uc(){if(rs)return rs;var a,c=bi,m=c.length,x,E="value"in is?is.value:is.textContent,P=E.length;for(a=0;a<m&&c[a]===E[a];a++);var B=m-a;for(x=1;x<=B&&c[m-x]===E[P-x];x++);return rs=E.slice(a,1<x?1-x:void 0)}function vl(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function fo(){return!0}function fd(){return!1}function ri(a){function c(m,x,E,P,B){this._reactName=m,this._targetInst=E,this.type=x,this.nativeEvent=P,this.target=B,this.currentTarget=null;for(var J in a)a.hasOwnProperty(J)&&(m=a[J],this[J]=m?m(P):P[J]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?fo:fd,this.isPropagationStopped=fd,this}return O(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),c}var po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cc=ri(po),Ds=O({},po,{view:0,detail:0}),Tm=ri(Ds),Ai,hc,mo,Ji=O({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Os,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==mo&&(mo&&a.type==="mousemove"?(Ai=a.screenX-mo.screenX,hc=a.screenY-mo.screenY):hc=Ai=0,mo=a),Ai)},movementY:function(a){return"movementY"in a?a.movementY:hc}}),dc=ri(Ji),pd=O({},Ji,{dataTransfer:0}),fc=ri(pd),Lm=O({},Ds,{relatedTarget:0}),xl=ri(Lm),md=O({},po,{animationName:0,elapsedTime:0,pseudoElement:0}),Cm=ri(md),Pm=O({},po,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),pc=ri(Pm),Am=O({},po,{data:0}),mc=ri(Am),gd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ns={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function km(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Ns[a])?!!c[a]:!1}function Os(){return km}var ki=O({},Ds,{key:function(a){if(a.key){var c=gd[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=vl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?wl[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Os,charCode:function(a){return a.type==="keypress"?vl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?vl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),_d=ri(ki),yd=O({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vd=ri(yd),gc=O({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Os}),_c=ri(gc),Rm=O({},po,{propertyName:0,elapsedTime:0,pseudoElement:0}),Im=ri(Rm),xd=O({},Ji,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Dm=ri(xd),Qi=[9,13,27,32],ss=u&&"CompositionEvent"in window,_a=null;u&&"documentMode"in document&&(_a=document.documentMode);var Br=u&&"TextEvent"in window&&!_a,wd=u&&(!ss||_a&&8<_a&&11>=_a),zs=" ",bd=!1;function go(a,c){switch(a){case"keyup":return Qi.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yc(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ur=!1;function Nm(a,c){switch(a){case"compositionend":return yc(c);case"keypress":return c.which!==32?null:(bd=!0,zs);case"textInput":return a=c.data,a===zs&&bd?null:a;default:return null}}function os(a,c){if(Ur)return a==="compositionend"||!ss&&go(a,c)?(a=uc(),rs=bi=is=null,Ur=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return wd&&c.locale!=="ko"?null:c.data;default:return null}}var bl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sd(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!bl[a.type]:c==="textarea"}function Sl(a,c,m,x){ns(x),c=v(c,"onChange"),0<c.length&&(m=new cc("onChange","change",null,m,x),a.push({event:m,listeners:c}))}var ya=null,Si=null;function Om(a){Lc(a,0)}function Hr(a){var c=Vs(a);if(be(c))return a}function zm(a,c){if(a==="change")return c}var gr=!1;if(u){var _o;if(u){var Ml="oninput"in document;if(!Ml){var El=document.createElement("div");El.setAttribute("oninput","return;"),Ml=typeof El.oninput=="function"}_o=Ml}else _o=!1;gr=_o&&(!document.documentMode||9<document.documentMode)}function va(){ya&&(ya.detachEvent("onpropertychange",Tl),Si=ya=null)}function Tl(a){if(a.propertyName==="value"&&Hr(Si)){var c=[];Sl(c,Si,a,Ct(a)),ni(Om,c)}}function Ll(a,c,m){a==="focusin"?(va(),ya=c,Si=m,ya.attachEvent("onpropertychange",Tl)):a==="focusout"&&va()}function yo(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Hr(Si)}function Cl(a,c){if(a==="click")return Hr(c)}function vc(a,c){if(a==="input"||a==="change")return Hr(c)}function Md(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var er=typeof Object.is=="function"?Object.is:Md;function as(a,c){if(er(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var m=Object.keys(a),x=Object.keys(c);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var E=m[x];if(!h.call(c,E)||!er(a[E],c[E]))return!1}return!0}function Ed(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function xc(a,c){var m=Ed(a);a=0;for(var x;m;){if(m.nodeType===3){if(x=a+m.textContent.length,a<=c&&x>=c)return{node:m,offset:c-a};a=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ed(m)}}function Td(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Td(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function wc(){for(var a=window,c=Re();c instanceof a.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)a=c.contentWindow;else break;c=Re(a.document)}return c}function bc(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function _r(a){var c=wc(),m=a.focusedElem,x=a.selectionRange;if(c!==m&&m&&m.ownerDocument&&Td(m.ownerDocument.documentElement,m)){if(x!==null&&bc(m)){if(c=x.start,a=x.end,a===void 0&&(a=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(a,m.value.length);else if(a=(c=m.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var E=m.textContent.length,P=Math.min(x.start,E);x=x.end===void 0?P:Math.min(x.end,E),!a.extend&&P>x&&(E=x,x=P,P=E),E=xc(m,P);var B=xc(m,x);E&&B&&(a.rangeCount!==1||a.anchorNode!==E.node||a.anchorOffset!==E.offset||a.focusNode!==B.node||a.focusOffset!==B.offset)&&(c=c.createRange(),c.setStart(E.node,E.offset),a.removeAllRanges(),P>x?(a.addRange(c),a.extend(B.node,B.offset)):(c.setEnd(B.node,B.offset),a.addRange(c)))}}for(c=[],a=m;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)a=c[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pl=u&&"documentMode"in document&&11>=document.documentMode,vo=null,xo=null,xa=null,Al=!1;function Ld(a,c,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Al||vo==null||vo!==Re(x)||(x=vo,"selectionStart"in x&&bc(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),xa&&as(xa,x)||(xa=x,x=v(xo,"onSelect"),0<x.length&&(c=new cc("onSelect","select",null,c,m),a.push({event:c,listeners:x}),c.target=vo)))}function ls(a,c){var m={};return m[a.toLowerCase()]=c.toLowerCase(),m["Webkit"+a]="webkit"+c,m["Moz"+a]="moz"+c,m}var wo={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionend:ls("Transition","TransitionEnd")},us={},Sc={};u&&(Sc=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function wa(a){if(us[a])return us[a];if(!wo[a])return a;var c=wo[a],m;for(m in c)if(c.hasOwnProperty(m)&&m in Sc)return us[a]=c[m];return a}var Cd=wa("animationend"),yr=wa("animationiteration"),Mc=wa("animationstart"),Ec=wa("transitionend"),bo=new Map,Pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(a,c){bo.set(a,c),s(c,[a])}for(var Fs=0;Fs<Pd.length;Fs++){var kl=Pd[Fs],Ad=kl.toLowerCase(),Fm=kl[0].toUpperCase()+kl.slice(1);tr(Ad,"on"+Fm)}tr(Cd,"onAnimationEnd"),tr(yr,"onAnimationIteration"),tr(Mc,"onAnimationStart"),tr("dblclick","onDoubleClick"),tr("focusin","onFocus"),tr("focusout","onBlur"),tr(Ec,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kd=new Set("cancel close invalid load scroll toggle".split(" ").concat(So));function Tc(a,c,m){var x=a.type||"unknown-event";a.currentTarget=m,dt(x,c,void 0,a),a.currentTarget=null}function Lc(a,c){c=(c&4)!==0;for(var m=0;m<a.length;m++){var x=a[m],E=x.event;x=x.listeners;e:{var P=void 0;if(c)for(var B=x.length-1;0<=B;B--){var J=x[B],ue=J.instance,Ee=J.currentTarget;if(J=J.listener,ue!==P&&E.isPropagationStopped())break e;Tc(E,J,Ee),P=ue}else for(B=0;B<x.length;B++){if(J=x[B],ue=J.instance,Ee=J.currentTarget,J=J.listener,ue!==P&&E.isPropagationStopped())break e;Tc(E,J,Ee),P=ue}}}if(ge)throw a=Ce,ge=!1,Ce=null,a}function Yt(a,c){var m=c[Lo];m===void 0&&(m=c[Lo]=new Set);var x=a+"__bubble";m.has(x)||(Rd(c,a,2,!1),m.add(x))}function Cc(a,c,m){var x=0;c&&(x|=4),Rd(m,a,x,c)}var ba="_reactListening"+Math.random().toString(36).slice(2);function Mo(a){if(!a[ba]){a[ba]=!0,i.forEach(function(m){m!=="selectionchange"&&(kd.has(m)||Cc(m,!1,a),Cc(m,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[ba]||(c[ba]=!0,Cc("selectionchange",!1,c))}}function Rd(a,c,m,x){switch(Dt(c)){case 1:var E=Em;break;case 4:E=dd;break;default:E=ga}m=E.bind(null,c,m,a),E=void 0,!so||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),x?E!==void 0?a.addEventListener(c,m,{capture:!0,passive:E}):a.addEventListener(c,m,!0):E!==void 0?a.addEventListener(c,m,{passive:E}):a.addEventListener(c,m,!1)}function l(a,c,m,x,E){var P=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var B=x.tag;if(B===3||B===4){var J=x.stateNode.containerInfo;if(J===E||J.nodeType===8&&J.parentNode===E)break;if(B===4)for(B=x.return;B!==null;){var ue=B.tag;if((ue===3||ue===4)&&(ue=B.stateNode.containerInfo,ue===E||ue.nodeType===8&&ue.parentNode===E))return;B=B.return}for(;J!==null;){if(B=Us(J),B===null)return;if(ue=B.tag,ue===5||ue===6){x=P=B;continue e}J=J.parentNode}}x=x.return}ni(function(){var Ee=P,He=Ct(m),Ge=[];e:{var Ue=bo.get(a);if(Ue!==void 0){var nt=cc,ot=a;switch(a){case"keypress":if(vl(m)===0)break e;case"keydown":case"keyup":nt=_d;break;case"focusin":ot="focus",nt=xl;break;case"focusout":ot="blur",nt=xl;break;case"beforeblur":case"afterblur":nt=xl;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=fc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=_c;break;case Cd:case yr:case Mc:nt=Cm;break;case Ec:nt=Im;break;case"scroll":nt=Tm;break;case"wheel":nt=Dm;break;case"copy":case"cut":case"paste":nt=pc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=vd}var at=(c&4)!==0,Tn=!at&&a==="scroll",ye=at?Ue!==null?Ue+"Capture":null:Ue;at=[];for(var de=Ee,xe;de!==null;){xe=de;var Ye=xe.stateNode;if(xe.tag===5&&Ye!==null&&(xe=Ye,ye!==null&&(Ye=xi(de,ye),Ye!=null&&at.push(f(de,Ye,xe)))),Tn)break;de=de.return}0<at.length&&(Ue=new nt(Ue,ot,null,m,He),Ge.push({event:Ue,listeners:at}))}}if((c&7)===0){e:{if(Ue=a==="mouseover"||a==="pointerover",nt=a==="mouseout"||a==="pointerout",Ue&&m!==tt&&(ot=m.relatedTarget||m.fromElement)&&(Us(ot)||ot[Gt]))break e;if((nt||Ue)&&(Ue=He.window===He?He:(Ue=He.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,nt?(ot=m.relatedTarget||m.toElement,nt=Ee,ot=ot?Us(ot):null,ot!==null&&(Tn=lt(ot),ot!==Tn||ot.tag!==5&&ot.tag!==6)&&(ot=null)):(nt=null,ot=Ee),nt!==ot)){if(at=dc,Ye="onMouseLeave",ye="onMouseEnter",de="mouse",(a==="pointerout"||a==="pointerover")&&(at=vd,Ye="onPointerLeave",ye="onPointerEnter",de="pointer"),Tn=nt==null?Ue:Vs(nt),xe=ot==null?Ue:Vs(ot),Ue=new at(Ye,de+"leave",nt,m,He),Ue.target=Tn,Ue.relatedTarget=xe,Ye=null,Us(He)===Ee&&(at=new at(ye,de+"enter",ot,m,He),at.target=xe,at.relatedTarget=Tn,Ye=at),Tn=Ye,nt&&ot)t:{for(at=nt,ye=ot,de=0,xe=at;xe;xe=M(xe))de++;for(xe=0,Ye=ye;Ye;Ye=M(Ye))xe++;for(;0<de-xe;)at=M(at),de--;for(;0<xe-de;)ye=M(ye),xe--;for(;de--;){if(at===ye||ye!==null&&at===ye.alternate)break t;at=M(at),ye=M(ye)}at=null}else at=null;nt!==null&&A(Ge,Ue,nt,at,!1),ot!==null&&Tn!==null&&A(Ge,Tn,ot,at,!0)}}e:{if(Ue=Ee?Vs(Ee):window,nt=Ue.nodeName&&Ue.nodeName.toLowerCase(),nt==="select"||nt==="input"&&Ue.type==="file")var ct=zm;else if(Sd(Ue))if(gr)ct=vc;else{ct=yo;var pt=Ll}else(nt=Ue.nodeName)&&nt.toLowerCase()==="input"&&(Ue.type==="checkbox"||Ue.type==="radio")&&(ct=Cl);if(ct&&(ct=ct(a,Ee))){Sl(Ge,ct,m,He);break e}pt&&pt(a,Ue,Ee),a==="focusout"&&(pt=Ue._wrapperState)&&pt.controlled&&Ue.type==="number"&&we(Ue,"number",Ue.value)}switch(pt=Ee?Vs(Ee):window,a){case"focusin":(Sd(pt)||pt.contentEditable==="true")&&(vo=pt,xo=Ee,xa=null);break;case"focusout":xa=xo=vo=null;break;case"mousedown":Al=!0;break;case"contextmenu":case"mouseup":case"dragend":Al=!1,Ld(Ge,m,He);break;case"selectionchange":if(Pl)break;case"keydown":case"keyup":Ld(Ge,m,He)}var mt;if(ss)e:{switch(a){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else Ur?go(a,m)&&(wt="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(wt="onCompositionStart");wt&&(wd&&m.locale!=="ko"&&(Ur||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&Ur&&(mt=uc()):(is=He,bi="value"in is?is.value:is.textContent,Ur=!0)),pt=v(Ee,wt),0<pt.length&&(wt=new mc(wt,a,null,m,He),Ge.push({event:wt,listeners:pt}),mt?wt.data=mt:(mt=yc(m),mt!==null&&(wt.data=mt)))),(mt=Br?Nm(a,m):os(a,m))&&(Ee=v(Ee,"onBeforeInput"),0<Ee.length&&(He=new mc("onBeforeInput","beforeinput",null,m,He),Ge.push({event:He,listeners:Ee}),He.data=mt))}Lc(Ge,c)})}function f(a,c,m){return{instance:a,listener:c,currentTarget:m}}function v(a,c){for(var m=c+"Capture",x=[];a!==null;){var E=a,P=E.stateNode;E.tag===5&&P!==null&&(E=P,P=xi(a,m),P!=null&&x.unshift(f(a,P,E)),P=xi(a,c),P!=null&&x.push(f(a,P,E))),a=a.return}return x}function M(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function A(a,c,m,x,E){for(var P=c._reactName,B=[];m!==null&&m!==x;){var J=m,ue=J.alternate,Ee=J.stateNode;if(ue!==null&&ue===x)break;J.tag===5&&Ee!==null&&(J=Ee,E?(ue=xi(m,P),ue!=null&&B.unshift(f(m,ue,J))):E||(ue=xi(m,P),ue!=null&&B.push(f(m,ue,J)))),m=m.return}B.length!==0&&a.push({event:c,listeners:B})}var H=/\r\n?/g,re=/\u0000|\uFFFD/g;function _e(a){return(typeof a=="string"?a:""+a).replace(H,`
`).replace(re,"")}function Me(a,c,m){if(c=_e(c),_e(a)!==c&&m)throw Error(t(425))}function Oe(){}var et=null,ft=null;function Tt(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var In=typeof setTimeout=="function"?setTimeout:void 0,Pn=typeof clearTimeout=="function"?clearTimeout:void 0,Mi=typeof Promise=="function"?Promise:void 0,si=typeof queueMicrotask=="function"?queueMicrotask:typeof Mi<"u"?function(a){return Mi.resolve(null).then(a).catch(Eo)}:In;function Eo(a){setTimeout(function(){throw a})}function Pc(a,c){var m=c,x=0;do{var E=m.nextSibling;if(a.removeChild(m),E&&E.nodeType===8)if(m=E.data,m==="/$"){if(x===0){a.removeChild(E),Ki(c);return}x--}else m!=="$"&&m!=="$?"&&m!=="$!"||x++;m=E}while(m);Ki(c)}function cs(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function Id(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return a;c--}else m==="/$"&&c++}a=a.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),vr="__reactFiber$"+Bs,To="__reactProps$"+Bs,Gt="__reactContainer$"+Bs,Lo="__reactEvents$"+Bs,Bm="__reactListeners$"+Bs,Um="__reactHandles$"+Bs;function Us(a){var c=a[vr];if(c)return c;for(var m=a.parentNode;m;){if(c=m[Gt]||m[vr]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(a=Id(a);a!==null;){if(m=a[vr])return m;a=Id(a)}return c}a=m,m=a.parentNode}return null}function Hs(a){return a=a[vr]||a[Gt],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Vs(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Rl(a){return a[To]||null}var Hm=[],Il=-1;function Co(a){return{current:a}}function cn(a){0>Il||(a.current=Hm[Il],Hm[Il]=null,Il--)}function rn(a,c){Il++,Hm[Il]=a.current,a.current=c}var Po={},oi=Co(Po),Ri=Co(!1),Sa=Po;function Dl(a,c){var m=a.type.contextTypes;if(!m)return Po;var x=a.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var E={},P;for(P in m)E[P]=c[P];return x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=E),E}function Ii(a){return a=a.childContextTypes,a!=null}function Dd(){cn(Ri),cn(oi)}function cx(a,c,m){if(oi.current!==Po)throw Error(t(168));rn(oi,c),rn(Ri,m)}function hx(a,c,m){var x=a.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return m;x=x.getChildContext();for(var E in x)if(!(E in c))throw Error(t(108,Ne(a)||"Unknown",E));return O({},m,x)}function Nd(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Po,Sa=oi.current,rn(oi,a),rn(Ri,Ri.current),!0}function dx(a,c,m){var x=a.stateNode;if(!x)throw Error(t(169));m?(a=hx(a,c,Sa),x.__reactInternalMemoizedMergedChildContext=a,cn(Ri),cn(oi),rn(oi,a)):cn(Ri),rn(Ri,m)}var Ws=null,Od=!1,Vm=!1;function fx(a){Ws===null?Ws=[a]:Ws.push(a)}function mL(a){Od=!0,fx(a)}function Ao(){if(!Vm&&Ws!==null){Vm=!0;var a=0,c=Ft;try{var m=Ws;for(Ft=1;a<m.length;a++){var x=m[a];do x=x(!0);while(x!==null)}Ws=null,Od=!1}catch(E){throw Ws!==null&&(Ws=Ws.slice(a+1)),hr(dn,Ao),E}finally{Ft=c,Vm=!1}}return null}var Nl=[],Ol=0,zd=null,Fd=0,xr=[],wr=0,Ma=null,js=1,Gs="";function Ea(a,c){Nl[Ol++]=Fd,Nl[Ol++]=zd,zd=a,Fd=c}function px(a,c,m){xr[wr++]=js,xr[wr++]=Gs,xr[wr++]=Ma,Ma=a;var x=js;a=Gs;var E=32-Et(x)-1;x&=~(1<<E),m+=1;var P=32-Et(c)+E;if(30<P){var B=E-E%5;P=(x&(1<<B)-1).toString(32),x>>=B,E-=B,js=1<<32-Et(c)+E|m<<E|x,Gs=P+a}else js=1<<P|m<<E|x,Gs=a}function Wm(a){a.return!==null&&(Ea(a,1),px(a,1,0))}function jm(a){for(;a===zd;)zd=Nl[--Ol],Nl[Ol]=null,Fd=Nl[--Ol],Nl[Ol]=null;for(;a===Ma;)Ma=xr[--wr],xr[wr]=null,Gs=xr[--wr],xr[wr]=null,js=xr[--wr],xr[wr]=null}var nr=null,ir=null,pn=!1,Vr=null;function mx(a,c){var m=Er(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=a,c=a.deletions,c===null?(a.deletions=[m],a.flags|=16):c.push(m)}function gx(a,c){switch(a.tag){case 5:var m=a.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,nr=a,ir=cs(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,nr=a,ir=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=Ma!==null?{id:js,overflow:Gs}:null,a.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=Er(18,null,null,0),m.stateNode=c,m.return=a,a.child=m,nr=a,ir=null,!0):!1;default:return!1}}function Gm(a){return(a.mode&1)!==0&&(a.flags&128)===0}function $m(a){if(pn){var c=ir;if(c){var m=c;if(!gx(a,c)){if(Gm(a))throw Error(t(418));c=cs(m.nextSibling);var x=nr;c&&gx(a,c)?mx(x,m):(a.flags=a.flags&-4097|2,pn=!1,nr=a)}}else{if(Gm(a))throw Error(t(418));a.flags=a.flags&-4097|2,pn=!1,nr=a}}}function _x(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;nr=a}function Bd(a){if(a!==nr)return!1;if(!pn)return _x(a),pn=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!Tt(a.type,a.memoizedProps)),c&&(c=ir)){if(Gm(a))throw yx(),Error(t(418));for(;c;)mx(a,c),c=cs(c.nextSibling)}if(_x(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(c===0){ir=cs(a.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}a=a.nextSibling}ir=null}}else ir=nr?cs(a.stateNode.nextSibling):null;return!0}function yx(){for(var a=ir;a;)a=cs(a.nextSibling)}function zl(){ir=nr=null,pn=!1}function Zm(a){Vr===null?Vr=[a]:Vr.push(a)}var gL=F.ReactCurrentBatchConfig;function Ac(a,c,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var x=m.stateNode}if(!x)throw Error(t(147,a));var E=x,P=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(B){var J=E.refs;B===null?delete J[P]:J[P]=B},c._stringRef=P,c)}if(typeof a!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,a))}return a}function Ud(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function vx(a){var c=a._init;return c(a._payload)}function xx(a){function c(ye,de){if(a){var xe=ye.deletions;xe===null?(ye.deletions=[de],ye.flags|=16):xe.push(de)}}function m(ye,de){if(!a)return null;for(;de!==null;)c(ye,de),de=de.sibling;return null}function x(ye,de){for(ye=new Map;de!==null;)de.key!==null?ye.set(de.key,de):ye.set(de.index,de),de=de.sibling;return ye}function E(ye,de){return ye=Fo(ye,de),ye.index=0,ye.sibling=null,ye}function P(ye,de,xe){return ye.index=xe,a?(xe=ye.alternate,xe!==null?(xe=xe.index,xe<de?(ye.flags|=2,de):xe):(ye.flags|=2,de)):(ye.flags|=1048576,de)}function B(ye){return a&&ye.alternate===null&&(ye.flags|=2),ye}function J(ye,de,xe,Ye){return de===null||de.tag!==6?(de=Fg(xe,ye.mode,Ye),de.return=ye,de):(de=E(de,xe),de.return=ye,de)}function ue(ye,de,xe,Ye){var ct=xe.type;return ct===N?He(ye,de,xe.props.children,Ye,xe.key):de!==null&&(de.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===oe&&vx(ct)===de.type)?(Ye=E(de,xe.props),Ye.ref=Ac(ye,de,xe),Ye.return=ye,Ye):(Ye=hf(xe.type,xe.key,xe.props,null,ye.mode,Ye),Ye.ref=Ac(ye,de,xe),Ye.return=ye,Ye)}function Ee(ye,de,xe,Ye){return de===null||de.tag!==4||de.stateNode.containerInfo!==xe.containerInfo||de.stateNode.implementation!==xe.implementation?(de=Bg(xe,ye.mode,Ye),de.return=ye,de):(de=E(de,xe.children||[]),de.return=ye,de)}function He(ye,de,xe,Ye,ct){return de===null||de.tag!==7?(de=Ia(xe,ye.mode,Ye,ct),de.return=ye,de):(de=E(de,xe),de.return=ye,de)}function Ge(ye,de,xe){if(typeof de=="string"&&de!==""||typeof de=="number")return de=Fg(""+de,ye.mode,xe),de.return=ye,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case k:return xe=hf(de.type,de.key,de.props,null,ye.mode,xe),xe.ref=Ac(ye,null,de),xe.return=ye,xe;case z:return de=Bg(de,ye.mode,xe),de.return=ye,de;case oe:var Ye=de._init;return Ge(ye,Ye(de._payload),xe)}if(Ae(de)||pe(de))return de=Ia(de,ye.mode,xe,null),de.return=ye,de;Ud(ye,de)}return null}function Ue(ye,de,xe,Ye){var ct=de!==null?de.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return ct!==null?null:J(ye,de,""+xe,Ye);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case k:return xe.key===ct?ue(ye,de,xe,Ye):null;case z:return xe.key===ct?Ee(ye,de,xe,Ye):null;case oe:return ct=xe._init,Ue(ye,de,ct(xe._payload),Ye)}if(Ae(xe)||pe(xe))return ct!==null?null:He(ye,de,xe,Ye,null);Ud(ye,xe)}return null}function nt(ye,de,xe,Ye,ct){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return ye=ye.get(xe)||null,J(de,ye,""+Ye,ct);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case k:return ye=ye.get(Ye.key===null?xe:Ye.key)||null,ue(de,ye,Ye,ct);case z:return ye=ye.get(Ye.key===null?xe:Ye.key)||null,Ee(de,ye,Ye,ct);case oe:var pt=Ye._init;return nt(ye,de,xe,pt(Ye._payload),ct)}if(Ae(Ye)||pe(Ye))return ye=ye.get(xe)||null,He(de,ye,Ye,ct,null);Ud(de,Ye)}return null}function ot(ye,de,xe,Ye){for(var ct=null,pt=null,mt=de,wt=de=0,Vn=null;mt!==null&&wt<xe.length;wt++){mt.index>wt?(Vn=mt,mt=null):Vn=mt.sibling;var Ht=Ue(ye,mt,xe[wt],Ye);if(Ht===null){mt===null&&(mt=Vn);break}a&&mt&&Ht.alternate===null&&c(ye,mt),de=P(Ht,de,wt),pt===null?ct=Ht:pt.sibling=Ht,pt=Ht,mt=Vn}if(wt===xe.length)return m(ye,mt),pn&&Ea(ye,wt),ct;if(mt===null){for(;wt<xe.length;wt++)mt=Ge(ye,xe[wt],Ye),mt!==null&&(de=P(mt,de,wt),pt===null?ct=mt:pt.sibling=mt,pt=mt);return pn&&Ea(ye,wt),ct}for(mt=x(ye,mt);wt<xe.length;wt++)Vn=nt(mt,ye,wt,xe[wt],Ye),Vn!==null&&(a&&Vn.alternate!==null&&mt.delete(Vn.key===null?wt:Vn.key),de=P(Vn,de,wt),pt===null?ct=Vn:pt.sibling=Vn,pt=Vn);return a&&mt.forEach(function(Bo){return c(ye,Bo)}),pn&&Ea(ye,wt),ct}function at(ye,de,xe,Ye){var ct=pe(xe);if(typeof ct!="function")throw Error(t(150));if(xe=ct.call(xe),xe==null)throw Error(t(151));for(var pt=ct=null,mt=de,wt=de=0,Vn=null,Ht=xe.next();mt!==null&&!Ht.done;wt++,Ht=xe.next()){mt.index>wt?(Vn=mt,mt=null):Vn=mt.sibling;var Bo=Ue(ye,mt,Ht.value,Ye);if(Bo===null){mt===null&&(mt=Vn);break}a&&mt&&Bo.alternate===null&&c(ye,mt),de=P(Bo,de,wt),pt===null?ct=Bo:pt.sibling=Bo,pt=Bo,mt=Vn}if(Ht.done)return m(ye,mt),pn&&Ea(ye,wt),ct;if(mt===null){for(;!Ht.done;wt++,Ht=xe.next())Ht=Ge(ye,Ht.value,Ye),Ht!==null&&(de=P(Ht,de,wt),pt===null?ct=Ht:pt.sibling=Ht,pt=Ht);return pn&&Ea(ye,wt),ct}for(mt=x(ye,mt);!Ht.done;wt++,Ht=xe.next())Ht=nt(mt,ye,wt,Ht.value,Ye),Ht!==null&&(a&&Ht.alternate!==null&&mt.delete(Ht.key===null?wt:Ht.key),de=P(Ht,de,wt),pt===null?ct=Ht:pt.sibling=Ht,pt=Ht);return a&&mt.forEach(function(XL){return c(ye,XL)}),pn&&Ea(ye,wt),ct}function Tn(ye,de,xe,Ye){if(typeof xe=="object"&&xe!==null&&xe.type===N&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case k:e:{for(var ct=xe.key,pt=de;pt!==null;){if(pt.key===ct){if(ct=xe.type,ct===N){if(pt.tag===7){m(ye,pt.sibling),de=E(pt,xe.props.children),de.return=ye,ye=de;break e}}else if(pt.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===oe&&vx(ct)===pt.type){m(ye,pt.sibling),de=E(pt,xe.props),de.ref=Ac(ye,pt,xe),de.return=ye,ye=de;break e}m(ye,pt);break}else c(ye,pt);pt=pt.sibling}xe.type===N?(de=Ia(xe.props.children,ye.mode,Ye,xe.key),de.return=ye,ye=de):(Ye=hf(xe.type,xe.key,xe.props,null,ye.mode,Ye),Ye.ref=Ac(ye,de,xe),Ye.return=ye,ye=Ye)}return B(ye);case z:e:{for(pt=xe.key;de!==null;){if(de.key===pt)if(de.tag===4&&de.stateNode.containerInfo===xe.containerInfo&&de.stateNode.implementation===xe.implementation){m(ye,de.sibling),de=E(de,xe.children||[]),de.return=ye,ye=de;break e}else{m(ye,de);break}else c(ye,de);de=de.sibling}de=Bg(xe,ye.mode,Ye),de.return=ye,ye=de}return B(ye);case oe:return pt=xe._init,Tn(ye,de,pt(xe._payload),Ye)}if(Ae(xe))return ot(ye,de,xe,Ye);if(pe(xe))return at(ye,de,xe,Ye);Ud(ye,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,de!==null&&de.tag===6?(m(ye,de.sibling),de=E(de,xe),de.return=ye,ye=de):(m(ye,de),de=Fg(xe,ye.mode,Ye),de.return=ye,ye=de),B(ye)):m(ye,de)}return Tn}var Fl=xx(!0),wx=xx(!1),Hd=Co(null),Vd=null,Bl=null,qm=null;function Xm(){qm=Bl=Vd=null}function Ym(a){var c=Hd.current;cn(Hd),a._currentValue=c}function Km(a,c,m){for(;a!==null;){var x=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),a===m)break;a=a.return}}function Ul(a,c){Vd=a,qm=Bl=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Di=!0),a.firstContext=null)}function br(a){var c=a._currentValue;if(qm!==a)if(a={context:a,memoizedValue:c,next:null},Bl===null){if(Vd===null)throw Error(t(308));Bl=a,Vd.dependencies={lanes:0,firstContext:a}}else Bl=Bl.next=a;return c}var Ta=null;function Jm(a){Ta===null?Ta=[a]:Ta.push(a)}function bx(a,c,m,x){var E=c.interleaved;return E===null?(m.next=m,Jm(c)):(m.next=E.next,E.next=m),c.interleaved=m,$s(a,x)}function $s(a,c){a.lanes|=c;var m=a.alternate;for(m!==null&&(m.lanes|=c),m=a,a=a.return;a!==null;)a.childLanes|=c,m=a.alternate,m!==null&&(m.childLanes|=c),m=a,a=a.return;return m.tag===3?m.stateNode:null}var ko=!1;function Qm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sx(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Zs(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function Ro(a,c,m){var x=a.updateQueue;if(x===null)return null;if(x=x.shared,(Ut&2)!==0){var E=x.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),x.pending=c,$s(a,m)}return E=x.interleaved,E===null?(c.next=c,Jm(x)):(c.next=E.next,E.next=c),x.interleaved=c,$s(a,m)}function Wd(a,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var x=c.lanes;x&=a.pendingLanes,m|=x,c.lanes=m,zr(a,m)}}function Mx(a,c){var m=a.updateQueue,x=a.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var E=null,P=null;if(m=m.firstBaseUpdate,m!==null){do{var B={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};P===null?E=P=B:P=P.next=B,m=m.next}while(m!==null);P===null?E=P=c:P=P.next=c}else E=P=c;m={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:P,shared:x.shared,effects:x.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=c:a.next=c,m.lastBaseUpdate=c}function jd(a,c,m,x){var E=a.updateQueue;ko=!1;var P=E.firstBaseUpdate,B=E.lastBaseUpdate,J=E.shared.pending;if(J!==null){E.shared.pending=null;var ue=J,Ee=ue.next;ue.next=null,B===null?P=Ee:B.next=Ee,B=ue;var He=a.alternate;He!==null&&(He=He.updateQueue,J=He.lastBaseUpdate,J!==B&&(J===null?He.firstBaseUpdate=Ee:J.next=Ee,He.lastBaseUpdate=ue))}if(P!==null){var Ge=E.baseState;B=0,He=Ee=ue=null,J=P;do{var Ue=J.lane,nt=J.eventTime;if((x&Ue)===Ue){He!==null&&(He=He.next={eventTime:nt,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var ot=a,at=J;switch(Ue=c,nt=m,at.tag){case 1:if(ot=at.payload,typeof ot=="function"){Ge=ot.call(nt,Ge,Ue);break e}Ge=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=at.payload,Ue=typeof ot=="function"?ot.call(nt,Ge,Ue):ot,Ue==null)break e;Ge=O({},Ge,Ue);break e;case 2:ko=!0}}J.callback!==null&&J.lane!==0&&(a.flags|=64,Ue=E.effects,Ue===null?E.effects=[J]:Ue.push(J))}else nt={eventTime:nt,lane:Ue,tag:J.tag,payload:J.payload,callback:J.callback,next:null},He===null?(Ee=He=nt,ue=Ge):He=He.next=nt,B|=Ue;if(J=J.next,J===null){if(J=E.shared.pending,J===null)break;Ue=J,J=Ue.next,Ue.next=null,E.lastBaseUpdate=Ue,E.shared.pending=null}}while(!0);if(He===null&&(ue=Ge),E.baseState=ue,E.firstBaseUpdate=Ee,E.lastBaseUpdate=He,c=E.shared.interleaved,c!==null){E=c;do B|=E.lane,E=E.next;while(E!==c)}else P===null&&(E.shared.lanes=0);Pa|=B,a.lanes=B,a.memoizedState=Ge}}function Ex(a,c,m){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var x=a[c],E=x.callback;if(E!==null){if(x.callback=null,x=m,typeof E!="function")throw Error(t(191,E));E.call(x)}}}var kc={},hs=Co(kc),Rc=Co(kc),Ic=Co(kc);function La(a){if(a===kc)throw Error(t(174));return a}function eg(a,c){switch(rn(Ic,c),rn(Rc,a),rn(hs,kc),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:q(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=q(c,a)}cn(hs),rn(hs,c)}function Hl(){cn(hs),cn(Rc),cn(Ic)}function Tx(a){La(Ic.current);var c=La(hs.current),m=q(c,a.type);c!==m&&(rn(Rc,a),rn(hs,m))}function tg(a){Rc.current===a&&(cn(hs),cn(Rc))}var yn=Co(0);function Gd(a){for(var c=a;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ng=[];function ig(){for(var a=0;a<ng.length;a++)ng[a]._workInProgressVersionPrimary=null;ng.length=0}var $d=F.ReactCurrentDispatcher,rg=F.ReactCurrentBatchConfig,Ca=0,vn=null,Dn=null,Un=null,Zd=!1,Dc=!1,Nc=0,_L=0;function ai(){throw Error(t(321))}function sg(a,c){if(c===null)return!1;for(var m=0;m<c.length&&m<a.length;m++)if(!er(a[m],c[m]))return!1;return!0}function og(a,c,m,x,E,P){if(Ca=P,vn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,$d.current=a===null||a.memoizedState===null?wL:bL,a=m(x,E),Dc){P=0;do{if(Dc=!1,Nc=0,25<=P)throw Error(t(301));P+=1,Un=Dn=null,c.updateQueue=null,$d.current=SL,a=m(x,E)}while(Dc)}if($d.current=Yd,c=Dn!==null&&Dn.next!==null,Ca=0,Un=Dn=vn=null,Zd=!1,c)throw Error(t(300));return a}function ag(){var a=Nc!==0;return Nc=0,a}function ds(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?vn.memoizedState=Un=a:Un=Un.next=a,Un}function Sr(){if(Dn===null){var a=vn.alternate;a=a!==null?a.memoizedState:null}else a=Dn.next;var c=Un===null?vn.memoizedState:Un.next;if(c!==null)Un=c,Dn=a;else{if(a===null)throw Error(t(310));Dn=a,a={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Un===null?vn.memoizedState=Un=a:Un=Un.next=a}return Un}function Oc(a,c){return typeof c=="function"?c(a):c}function lg(a){var c=Sr(),m=c.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=a;var x=Dn,E=x.baseQueue,P=m.pending;if(P!==null){if(E!==null){var B=E.next;E.next=P.next,P.next=B}x.baseQueue=E=P,m.pending=null}if(E!==null){P=E.next,x=x.baseState;var J=B=null,ue=null,Ee=P;do{var He=Ee.lane;if((Ca&He)===He)ue!==null&&(ue=ue.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),x=Ee.hasEagerState?Ee.eagerState:a(x,Ee.action);else{var Ge={lane:He,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};ue===null?(J=ue=Ge,B=x):ue=ue.next=Ge,vn.lanes|=He,Pa|=He}Ee=Ee.next}while(Ee!==null&&Ee!==P);ue===null?B=x:ue.next=J,er(x,c.memoizedState)||(Di=!0),c.memoizedState=x,c.baseState=B,c.baseQueue=ue,m.lastRenderedState=x}if(a=m.interleaved,a!==null){E=a;do P=E.lane,vn.lanes|=P,Pa|=P,E=E.next;while(E!==a)}else E===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function ug(a){var c=Sr(),m=c.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=a;var x=m.dispatch,E=m.pending,P=c.memoizedState;if(E!==null){m.pending=null;var B=E=E.next;do P=a(P,B.action),B=B.next;while(B!==E);er(P,c.memoizedState)||(Di=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),m.lastRenderedState=P}return[P,x]}function Lx(){}function Cx(a,c){var m=vn,x=Sr(),E=c(),P=!er(x.memoizedState,E);if(P&&(x.memoizedState=E,Di=!0),x=x.queue,cg(kx.bind(null,m,x,a),[a]),x.getSnapshot!==c||P||Un!==null&&Un.memoizedState.tag&1){if(m.flags|=2048,zc(9,Ax.bind(null,m,x,E,c),void 0,null),Hn===null)throw Error(t(349));(Ca&30)!==0||Px(m,c,E)}return E}function Px(a,c,m){a.flags|=16384,a={getSnapshot:c,value:m},c=vn.updateQueue,c===null?(c={lastEffect:null,stores:null},vn.updateQueue=c,c.stores=[a]):(m=c.stores,m===null?c.stores=[a]:m.push(a))}function Ax(a,c,m,x){c.value=m,c.getSnapshot=x,Rx(c)&&Ix(a)}function kx(a,c,m){return m(function(){Rx(c)&&Ix(a)})}function Rx(a){var c=a.getSnapshot;a=a.value;try{var m=c();return!er(a,m)}catch{return!0}}function Ix(a){var c=$s(a,1);c!==null&&$r(c,a,1,-1)}function Dx(a){var c=ds();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:a},c.queue=a,a=a.dispatch=xL.bind(null,vn,a),[c.memoizedState,a]}function zc(a,c,m,x){return a={tag:a,create:c,destroy:m,deps:x,next:null},c=vn.updateQueue,c===null?(c={lastEffect:null,stores:null},vn.updateQueue=c,c.lastEffect=a.next=a):(m=c.lastEffect,m===null?c.lastEffect=a.next=a:(x=m.next,m.next=a,a.next=x,c.lastEffect=a)),a}function Nx(){return Sr().memoizedState}function qd(a,c,m,x){var E=ds();vn.flags|=a,E.memoizedState=zc(1|c,m,void 0,x===void 0?null:x)}function Xd(a,c,m,x){var E=Sr();x=x===void 0?null:x;var P=void 0;if(Dn!==null){var B=Dn.memoizedState;if(P=B.destroy,x!==null&&sg(x,B.deps)){E.memoizedState=zc(c,m,P,x);return}}vn.flags|=a,E.memoizedState=zc(1|c,m,P,x)}function Ox(a,c){return qd(8390656,8,a,c)}function cg(a,c){return Xd(2048,8,a,c)}function zx(a,c){return Xd(4,2,a,c)}function Fx(a,c){return Xd(4,4,a,c)}function Bx(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Ux(a,c,m){return m=m!=null?m.concat([a]):null,Xd(4,4,Bx.bind(null,c,a),m)}function hg(){}function Hx(a,c){var m=Sr();c=c===void 0?null:c;var x=m.memoizedState;return x!==null&&c!==null&&sg(c,x[1])?x[0]:(m.memoizedState=[a,c],a)}function Vx(a,c){var m=Sr();c=c===void 0?null:c;var x=m.memoizedState;return x!==null&&c!==null&&sg(c,x[1])?x[0]:(a=a(),m.memoizedState=[a,c],a)}function Wx(a,c,m){return(Ca&21)===0?(a.baseState&&(a.baseState=!1,Di=!0),a.memoizedState=m):(er(m,c)||(m=hd(),vn.lanes|=m,Pa|=m,a.baseState=!0),c)}function yL(a,c){var m=Ft;Ft=m!==0&&4>m?m:4,a(!0);var x=rg.transition;rg.transition={};try{a(!1),c()}finally{Ft=m,rg.transition=x}}function jx(){return Sr().memoizedState}function vL(a,c,m){var x=Oo(a);if(m={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null},Gx(a))$x(c,m);else if(m=bx(a,c,m,x),m!==null){var E=Ti();$r(m,a,x,E),Zx(m,c,x)}}function xL(a,c,m){var x=Oo(a),E={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null};if(Gx(a))$x(c,E);else{var P=a.alternate;if(a.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var B=c.lastRenderedState,J=P(B,m);if(E.hasEagerState=!0,E.eagerState=J,er(J,B)){var ue=c.interleaved;ue===null?(E.next=E,Jm(c)):(E.next=ue.next,ue.next=E),c.interleaved=E;return}}catch{}finally{}m=bx(a,c,E,x),m!==null&&(E=Ti(),$r(m,a,x,E),Zx(m,c,x))}}function Gx(a){var c=a.alternate;return a===vn||c!==null&&c===vn}function $x(a,c){Dc=Zd=!0;var m=a.pending;m===null?c.next=c:(c.next=m.next,m.next=c),a.pending=c}function Zx(a,c,m){if((m&4194240)!==0){var x=c.lanes;x&=a.pendingLanes,m|=x,c.lanes=m,zr(a,m)}}var Yd={readContext:br,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},wL={readContext:br,useCallback:function(a,c){return ds().memoizedState=[a,c===void 0?null:c],a},useContext:br,useEffect:Ox,useImperativeHandle:function(a,c,m){return m=m!=null?m.concat([a]):null,qd(4194308,4,Bx.bind(null,c,a),m)},useLayoutEffect:function(a,c){return qd(4194308,4,a,c)},useInsertionEffect:function(a,c){return qd(4,2,a,c)},useMemo:function(a,c){var m=ds();return c=c===void 0?null:c,a=a(),m.memoizedState=[a,c],a},useReducer:function(a,c,m){var x=ds();return c=m!==void 0?m(c):c,x.memoizedState=x.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},x.queue=a,a=a.dispatch=vL.bind(null,vn,a),[x.memoizedState,a]},useRef:function(a){var c=ds();return a={current:a},c.memoizedState=a},useState:Dx,useDebugValue:hg,useDeferredValue:function(a){return ds().memoizedState=a},useTransition:function(){var a=Dx(!1),c=a[0];return a=yL.bind(null,a[1]),ds().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,m){var x=vn,E=ds();if(pn){if(m===void 0)throw Error(t(407));m=m()}else{if(m=c(),Hn===null)throw Error(t(349));(Ca&30)!==0||Px(x,c,m)}E.memoizedState=m;var P={value:m,getSnapshot:c};return E.queue=P,Ox(kx.bind(null,x,P,a),[a]),x.flags|=2048,zc(9,Ax.bind(null,x,P,m,c),void 0,null),m},useId:function(){var a=ds(),c=Hn.identifierPrefix;if(pn){var m=Gs,x=js;m=(x&~(1<<32-Et(x)-1)).toString(32)+m,c=":"+c+"R"+m,m=Nc++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=_L++,c=":"+c+"r"+m.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},bL={readContext:br,useCallback:Hx,useContext:br,useEffect:cg,useImperativeHandle:Ux,useInsertionEffect:zx,useLayoutEffect:Fx,useMemo:Vx,useReducer:lg,useRef:Nx,useState:function(){return lg(Oc)},useDebugValue:hg,useDeferredValue:function(a){var c=Sr();return Wx(c,Dn.memoizedState,a)},useTransition:function(){var a=lg(Oc)[0],c=Sr().memoizedState;return[a,c]},useMutableSource:Lx,useSyncExternalStore:Cx,useId:jx,unstable_isNewReconciler:!1},SL={readContext:br,useCallback:Hx,useContext:br,useEffect:cg,useImperativeHandle:Ux,useInsertionEffect:zx,useLayoutEffect:Fx,useMemo:Vx,useReducer:ug,useRef:Nx,useState:function(){return ug(Oc)},useDebugValue:hg,useDeferredValue:function(a){var c=Sr();return Dn===null?c.memoizedState=a:Wx(c,Dn.memoizedState,a)},useTransition:function(){var a=ug(Oc)[0],c=Sr().memoizedState;return[a,c]},useMutableSource:Lx,useSyncExternalStore:Cx,useId:jx,unstable_isNewReconciler:!1};function Wr(a,c){if(a&&a.defaultProps){c=O({},c),a=a.defaultProps;for(var m in a)c[m]===void 0&&(c[m]=a[m]);return c}return c}function dg(a,c,m,x){c=a.memoizedState,m=m(x,c),m=m==null?c:O({},c,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var Kd={isMounted:function(a){return(a=a._reactInternals)?lt(a)===a:!1},enqueueSetState:function(a,c,m){a=a._reactInternals;var x=Ti(),E=Oo(a),P=Zs(x,E);P.payload=c,m!=null&&(P.callback=m),c=Ro(a,P,E),c!==null&&($r(c,a,E,x),Wd(c,a,E))},enqueueReplaceState:function(a,c,m){a=a._reactInternals;var x=Ti(),E=Oo(a),P=Zs(x,E);P.tag=1,P.payload=c,m!=null&&(P.callback=m),c=Ro(a,P,E),c!==null&&($r(c,a,E,x),Wd(c,a,E))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var m=Ti(),x=Oo(a),E=Zs(m,x);E.tag=2,c!=null&&(E.callback=c),c=Ro(a,E,x),c!==null&&($r(c,a,x,m),Wd(c,a,x))}};function qx(a,c,m,x,E,P,B){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(x,P,B):c.prototype&&c.prototype.isPureReactComponent?!as(m,x)||!as(E,P):!0}function Xx(a,c,m){var x=!1,E=Po,P=c.contextType;return typeof P=="object"&&P!==null?P=br(P):(E=Ii(c)?Sa:oi.current,x=c.contextTypes,P=(x=x!=null)?Dl(a,E):Po),c=new c(m,P),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Kd,a.stateNode=c,c._reactInternals=a,x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=E,a.__reactInternalMemoizedMaskedChildContext=P),c}function Yx(a,c,m,x){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,x),c.state!==a&&Kd.enqueueReplaceState(c,c.state,null)}function fg(a,c,m,x){var E=a.stateNode;E.props=m,E.state=a.memoizedState,E.refs={},Qm(a);var P=c.contextType;typeof P=="object"&&P!==null?E.context=br(P):(P=Ii(c)?Sa:oi.current,E.context=Dl(a,P)),E.state=a.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(dg(a,c,P,m),E.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(c=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),c!==E.state&&Kd.enqueueReplaceState(E,E.state,null),jd(a,m,E,x),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308)}function Vl(a,c){try{var m="",x=c;do m+=ve(x),x=x.return;while(x);var E=m}catch(P){E=`
Error generating stack: `+P.message+`
`+P.stack}return{value:a,source:c,stack:E,digest:null}}function pg(a,c,m){return{value:a,source:null,stack:m??null,digest:c??null}}function mg(a,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var ML=typeof WeakMap=="function"?WeakMap:Map;function Kx(a,c,m){m=Zs(-1,m),m.tag=3,m.payload={element:null};var x=c.value;return m.callback=function(){sf||(sf=!0,Ag=x),mg(a,c)},m}function Jx(a,c,m){m=Zs(-1,m),m.tag=3;var x=a.type.getDerivedStateFromError;if(typeof x=="function"){var E=c.value;m.payload=function(){return x(E)},m.callback=function(){mg(a,c)}}var P=a.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(m.callback=function(){mg(a,c),typeof x!="function"&&(Do===null?Do=new Set([this]):Do.add(this));var B=c.stack;this.componentDidCatch(c.value,{componentStack:B!==null?B:""})}),m}function Qx(a,c,m){var x=a.pingCache;if(x===null){x=a.pingCache=new ML;var E=new Set;x.set(c,E)}else E=x.get(c),E===void 0&&(E=new Set,x.set(c,E));E.has(m)||(E.add(m),a=FL.bind(null,a,c,m),c.then(a,a))}function e0(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function t0(a,c,m,x,E){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=Zs(-1,1),c.tag=2,Ro(m,c,1))),m.lanes|=1),a):(a.flags|=65536,a.lanes=E,a)}var EL=F.ReactCurrentOwner,Di=!1;function Ei(a,c,m,x){c.child=a===null?wx(c,null,m,x):Fl(c,a.child,m,x)}function n0(a,c,m,x,E){m=m.render;var P=c.ref;return Ul(c,E),x=og(a,c,m,x,P,E),m=ag(),a!==null&&!Di?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~E,qs(a,c,E)):(pn&&m&&Wm(c),c.flags|=1,Ei(a,c,x,E),c.child)}function i0(a,c,m,x,E){if(a===null){var P=m.type;return typeof P=="function"&&!zg(P)&&P.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=P,r0(a,c,P,x,E)):(a=hf(m.type,null,x,c,c.mode,E),a.ref=c.ref,a.return=c,c.child=a)}if(P=a.child,(a.lanes&E)===0){var B=P.memoizedProps;if(m=m.compare,m=m!==null?m:as,m(B,x)&&a.ref===c.ref)return qs(a,c,E)}return c.flags|=1,a=Fo(P,x),a.ref=c.ref,a.return=c,c.child=a}function r0(a,c,m,x,E){if(a!==null){var P=a.memoizedProps;if(as(P,x)&&a.ref===c.ref)if(Di=!1,c.pendingProps=x=P,(a.lanes&E)!==0)(a.flags&131072)!==0&&(Di=!0);else return c.lanes=a.lanes,qs(a,c,E)}return gg(a,c,m,x,E)}function s0(a,c,m){var x=c.pendingProps,E=x.children,P=a!==null?a.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(jl,rr),rr|=m;else{if((m&1073741824)===0)return a=P!==null?P.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,rn(jl,rr),rr|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=P!==null?P.baseLanes:m,rn(jl,rr),rr|=x}else P!==null?(x=P.baseLanes|m,c.memoizedState=null):x=m,rn(jl,rr),rr|=x;return Ei(a,c,E,m),c.child}function o0(a,c){var m=c.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function gg(a,c,m,x,E){var P=Ii(m)?Sa:oi.current;return P=Dl(c,P),Ul(c,E),m=og(a,c,m,x,P,E),x=ag(),a!==null&&!Di?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~E,qs(a,c,E)):(pn&&x&&Wm(c),c.flags|=1,Ei(a,c,m,E),c.child)}function a0(a,c,m,x,E){if(Ii(m)){var P=!0;Nd(c)}else P=!1;if(Ul(c,E),c.stateNode===null)Qd(a,c),Xx(c,m,x),fg(c,m,x,E),x=!0;else if(a===null){var B=c.stateNode,J=c.memoizedProps;B.props=J;var ue=B.context,Ee=m.contextType;typeof Ee=="object"&&Ee!==null?Ee=br(Ee):(Ee=Ii(m)?Sa:oi.current,Ee=Dl(c,Ee));var He=m.getDerivedStateFromProps,Ge=typeof He=="function"||typeof B.getSnapshotBeforeUpdate=="function";Ge||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(J!==x||ue!==Ee)&&Yx(c,B,x,Ee),ko=!1;var Ue=c.memoizedState;B.state=Ue,jd(c,x,B,E),ue=c.memoizedState,J!==x||Ue!==ue||Ri.current||ko?(typeof He=="function"&&(dg(c,m,He,x),ue=c.memoizedState),(J=ko||qx(c,m,J,x,Ue,ue,Ee))?(Ge||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(c.flags|=4194308)):(typeof B.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=ue),B.props=x,B.state=ue,B.context=Ee,x=J):(typeof B.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{B=c.stateNode,Sx(a,c),J=c.memoizedProps,Ee=c.type===c.elementType?J:Wr(c.type,J),B.props=Ee,Ge=c.pendingProps,Ue=B.context,ue=m.contextType,typeof ue=="object"&&ue!==null?ue=br(ue):(ue=Ii(m)?Sa:oi.current,ue=Dl(c,ue));var nt=m.getDerivedStateFromProps;(He=typeof nt=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(J!==Ge||Ue!==ue)&&Yx(c,B,x,ue),ko=!1,Ue=c.memoizedState,B.state=Ue,jd(c,x,B,E);var ot=c.memoizedState;J!==Ge||Ue!==ot||Ri.current||ko?(typeof nt=="function"&&(dg(c,m,nt,x),ot=c.memoizedState),(Ee=ko||qx(c,m,Ee,x,Ue,ot,ue)||!1)?(He||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(x,ot,ue),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(x,ot,ue)),typeof B.componentDidUpdate=="function"&&(c.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof B.componentDidUpdate!="function"||J===a.memoizedProps&&Ue===a.memoizedState||(c.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||J===a.memoizedProps&&Ue===a.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=ot),B.props=x,B.state=ot,B.context=ue,x=Ee):(typeof B.componentDidUpdate!="function"||J===a.memoizedProps&&Ue===a.memoizedState||(c.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||J===a.memoizedProps&&Ue===a.memoizedState||(c.flags|=1024),x=!1)}return _g(a,c,m,x,P,E)}function _g(a,c,m,x,E,P){o0(a,c);var B=(c.flags&128)!==0;if(!x&&!B)return E&&dx(c,m,!1),qs(a,c,P);x=c.stateNode,EL.current=c;var J=B&&typeof m.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,a!==null&&B?(c.child=Fl(c,a.child,null,P),c.child=Fl(c,null,J,P)):Ei(a,c,J,P),c.memoizedState=x.state,E&&dx(c,m,!0),c.child}function l0(a){var c=a.stateNode;c.pendingContext?cx(a,c.pendingContext,c.pendingContext!==c.context):c.context&&cx(a,c.context,!1),eg(a,c.containerInfo)}function u0(a,c,m,x,E){return zl(),Zm(E),c.flags|=256,Ei(a,c,m,x),c.child}var yg={dehydrated:null,treeContext:null,retryLane:0};function vg(a){return{baseLanes:a,cachePool:null,transitions:null}}function c0(a,c,m){var x=c.pendingProps,E=yn.current,P=!1,B=(c.flags&128)!==0,J;if((J=B)||(J=a!==null&&a.memoizedState===null?!1:(E&2)!==0),J?(P=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(E|=1),rn(yn,E&1),a===null)return $m(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(B=x.children,a=x.fallback,P?(x=c.mode,P=c.child,B={mode:"hidden",children:B},(x&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=B):P=df(B,x,0,null),a=Ia(a,x,m,null),P.return=c,a.return=c,P.sibling=a,c.child=P,c.child.memoizedState=vg(m),c.memoizedState=yg,a):xg(c,B));if(E=a.memoizedState,E!==null&&(J=E.dehydrated,J!==null))return TL(a,c,B,x,J,E,m);if(P){P=x.fallback,B=c.mode,E=a.child,J=E.sibling;var ue={mode:"hidden",children:x.children};return(B&1)===0&&c.child!==E?(x=c.child,x.childLanes=0,x.pendingProps=ue,c.deletions=null):(x=Fo(E,ue),x.subtreeFlags=E.subtreeFlags&14680064),J!==null?P=Fo(J,P):(P=Ia(P,B,m,null),P.flags|=2),P.return=c,x.return=c,x.sibling=P,c.child=x,x=P,P=c.child,B=a.child.memoizedState,B=B===null?vg(m):{baseLanes:B.baseLanes|m,cachePool:null,transitions:B.transitions},P.memoizedState=B,P.childLanes=a.childLanes&~m,c.memoizedState=yg,x}return P=a.child,a=P.sibling,x=Fo(P,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=m),x.return=c,x.sibling=null,a!==null&&(m=c.deletions,m===null?(c.deletions=[a],c.flags|=16):m.push(a)),c.child=x,c.memoizedState=null,x}function xg(a,c){return c=df({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function Jd(a,c,m,x){return x!==null&&Zm(x),Fl(c,a.child,null,m),a=xg(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function TL(a,c,m,x,E,P,B){if(m)return c.flags&256?(c.flags&=-257,x=pg(Error(t(422))),Jd(a,c,B,x)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(P=x.fallback,E=c.mode,x=df({mode:"visible",children:x.children},E,0,null),P=Ia(P,E,B,null),P.flags|=2,x.return=c,P.return=c,x.sibling=P,c.child=x,(c.mode&1)!==0&&Fl(c,a.child,null,B),c.child.memoizedState=vg(B),c.memoizedState=yg,P);if((c.mode&1)===0)return Jd(a,c,B,null);if(E.data==="$!"){if(x=E.nextSibling&&E.nextSibling.dataset,x)var J=x.dgst;return x=J,P=Error(t(419)),x=pg(P,x,void 0),Jd(a,c,B,x)}if(J=(B&a.childLanes)!==0,Di||J){if(x=Hn,x!==null){switch(B&-B){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(x.suspendedLanes|B))!==0?0:E,E!==0&&E!==P.retryLane&&(P.retryLane=E,$s(a,E),$r(x,a,E,-1))}return Og(),x=pg(Error(t(421))),Jd(a,c,B,x)}return E.data==="$?"?(c.flags|=128,c.child=a.child,c=BL.bind(null,a),E._reactRetry=c,null):(a=P.treeContext,ir=cs(E.nextSibling),nr=c,pn=!0,Vr=null,a!==null&&(xr[wr++]=js,xr[wr++]=Gs,xr[wr++]=Ma,js=a.id,Gs=a.overflow,Ma=c),c=xg(c,x.children),c.flags|=4096,c)}function h0(a,c,m){a.lanes|=c;var x=a.alternate;x!==null&&(x.lanes|=c),Km(a.return,c,m)}function wg(a,c,m,x,E){var P=a.memoizedState;P===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:E}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=x,P.tail=m,P.tailMode=E)}function d0(a,c,m){var x=c.pendingProps,E=x.revealOrder,P=x.tail;if(Ei(a,c,x.children,m),x=yn.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&h0(a,m,c);else if(a.tag===19)h0(a,m,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}x&=1}if(rn(yn,x),(c.mode&1)===0)c.memoizedState=null;else switch(E){case"forwards":for(m=c.child,E=null;m!==null;)a=m.alternate,a!==null&&Gd(a)===null&&(E=m),m=m.sibling;m=E,m===null?(E=c.child,c.child=null):(E=m.sibling,m.sibling=null),wg(c,!1,E,m,P);break;case"backwards":for(m=null,E=c.child,c.child=null;E!==null;){if(a=E.alternate,a!==null&&Gd(a)===null){c.child=E;break}a=E.sibling,E.sibling=m,m=E,E=a}wg(c,!0,m,null,P);break;case"together":wg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Qd(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function qs(a,c,m){if(a!==null&&(c.dependencies=a.dependencies),Pa|=c.lanes,(m&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,m=Fo(a,a.pendingProps),c.child=m,m.return=c;a.sibling!==null;)a=a.sibling,m=m.sibling=Fo(a,a.pendingProps),m.return=c;m.sibling=null}return c.child}function LL(a,c,m){switch(c.tag){case 3:l0(c),zl();break;case 5:Tx(c);break;case 1:Ii(c.type)&&Nd(c);break;case 4:eg(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,E=c.memoizedProps.value;rn(Hd,x._currentValue),x._currentValue=E;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(rn(yn,yn.current&1),c.flags|=128,null):(m&c.child.childLanes)!==0?c0(a,c,m):(rn(yn,yn.current&1),a=qs(a,c,m),a!==null?a.sibling:null);rn(yn,yn.current&1);break;case 19:if(x=(m&c.childLanes)!==0,(a.flags&128)!==0){if(x)return d0(a,c,m);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),rn(yn,yn.current),x)break;return null;case 22:case 23:return c.lanes=0,s0(a,c,m)}return qs(a,c,m)}var f0,bg,p0,m0;f0=function(a,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},bg=function(){},p0=function(a,c,m,x){var E=a.memoizedProps;if(E!==x){a=c.stateNode,La(hs.current);var P=null;switch(m){case"input":E=De(a,E),x=De(a,x),P=[];break;case"select":E=O({},E,{value:void 0}),x=O({},x,{value:void 0}),P=[];break;case"textarea":E=Ke(a,E),x=Ke(a,x),P=[];break;default:typeof E.onClick!="function"&&typeof x.onClick=="function"&&(a.onclick=Oe)}le(m,x);var B;m=null;for(Ee in E)if(!x.hasOwnProperty(Ee)&&E.hasOwnProperty(Ee)&&E[Ee]!=null)if(Ee==="style"){var J=E[Ee];for(B in J)J.hasOwnProperty(B)&&(m||(m={}),m[B]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(r.hasOwnProperty(Ee)?P||(P=[]):(P=P||[]).push(Ee,null));for(Ee in x){var ue=x[Ee];if(J=E?.[Ee],x.hasOwnProperty(Ee)&&ue!==J&&(ue!=null||J!=null))if(Ee==="style")if(J){for(B in J)!J.hasOwnProperty(B)||ue&&ue.hasOwnProperty(B)||(m||(m={}),m[B]="");for(B in ue)ue.hasOwnProperty(B)&&J[B]!==ue[B]&&(m||(m={}),m[B]=ue[B])}else m||(P||(P=[]),P.push(Ee,m)),m=ue;else Ee==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,J=J?J.__html:void 0,ue!=null&&J!==ue&&(P=P||[]).push(Ee,ue)):Ee==="children"?typeof ue!="string"&&typeof ue!="number"||(P=P||[]).push(Ee,""+ue):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(r.hasOwnProperty(Ee)?(ue!=null&&Ee==="onScroll"&&Yt("scroll",a),P||J===ue||(P=[])):(P=P||[]).push(Ee,ue))}m&&(P=P||[]).push("style",m);var Ee=P;(c.updateQueue=Ee)&&(c.flags|=4)}},m0=function(a,c,m,x){m!==x&&(c.flags|=4)};function Fc(a,c){if(!pn)switch(a.tailMode){case"hidden":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:x.sibling=null}}function li(a){var c=a.alternate!==null&&a.alternate.child===a.child,m=0,x=0;if(c)for(var E=a.child;E!==null;)m|=E.lanes|E.childLanes,x|=E.subtreeFlags&14680064,x|=E.flags&14680064,E.return=a,E=E.sibling;else for(E=a.child;E!==null;)m|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=a,E=E.sibling;return a.subtreeFlags|=x,a.childLanes=m,c}function CL(a,c,m){var x=c.pendingProps;switch(jm(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return li(c),null;case 1:return Ii(c.type)&&Dd(),li(c),null;case 3:return x=c.stateNode,Hl(),cn(Ri),cn(oi),ig(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(a===null||a.child===null)&&(Bd(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Vr!==null&&(Ig(Vr),Vr=null))),bg(a,c),li(c),null;case 5:tg(c);var E=La(Ic.current);if(m=c.type,a!==null&&c.stateNode!=null)p0(a,c,m,x,E),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(t(166));return li(c),null}if(a=La(hs.current),Bd(c)){x=c.stateNode,m=c.type;var P=c.memoizedProps;switch(x[vr]=c,x[To]=P,a=(c.mode&1)!==0,m){case"dialog":Yt("cancel",x),Yt("close",x);break;case"iframe":case"object":case"embed":Yt("load",x);break;case"video":case"audio":for(E=0;E<So.length;E++)Yt(So[E],x);break;case"source":Yt("error",x);break;case"img":case"image":case"link":Yt("error",x),Yt("load",x);break;case"details":Yt("toggle",x);break;case"input":je(x,P),Yt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!P.multiple},Yt("invalid",x);break;case"textarea":rt(x,P),Yt("invalid",x)}le(m,P),E=null;for(var B in P)if(P.hasOwnProperty(B)){var J=P[B];B==="children"?typeof J=="string"?x.textContent!==J&&(P.suppressHydrationWarning!==!0&&Me(x.textContent,J,a),E=["children",J]):typeof J=="number"&&x.textContent!==""+J&&(P.suppressHydrationWarning!==!0&&Me(x.textContent,J,a),E=["children",""+J]):r.hasOwnProperty(B)&&J!=null&&B==="onScroll"&&Yt("scroll",x)}switch(m){case"input":We(x),$(x,P,!0);break;case"textarea":We(x),st(x);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(x.onclick=Oe)}x=E,c.updateQueue=x,x!==null&&(c.flags|=4)}else{B=E.nodeType===9?E:E.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=he(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=B.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof x.is=="string"?a=B.createElement(m,{is:x.is}):(a=B.createElement(m),m==="select"&&(B=a,x.multiple?B.multiple=!0:x.size&&(B.size=x.size))):a=B.createElementNS(a,m),a[vr]=c,a[To]=x,f0(a,c,!1,!1),c.stateNode=a;e:{switch(B=Be(m,x),m){case"dialog":Yt("cancel",a),Yt("close",a),E=x;break;case"iframe":case"object":case"embed":Yt("load",a),E=x;break;case"video":case"audio":for(E=0;E<So.length;E++)Yt(So[E],a);E=x;break;case"source":Yt("error",a),E=x;break;case"img":case"image":case"link":Yt("error",a),Yt("load",a),E=x;break;case"details":Yt("toggle",a),E=x;break;case"input":je(a,x),E=De(a,x),Yt("invalid",a);break;case"option":E=x;break;case"select":a._wrapperState={wasMultiple:!!x.multiple},E=O({},x,{value:void 0}),Yt("invalid",a);break;case"textarea":rt(a,x),E=Ke(a,x),Yt("invalid",a);break;default:E=x}le(m,E),J=E;for(P in J)if(J.hasOwnProperty(P)){var ue=J[P];P==="style"?Ot(a,ue):P==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,ue!=null&&Se(a,ue)):P==="children"?typeof ue=="string"?(m!=="textarea"||ue!=="")&&Fe(a,ue):typeof ue=="number"&&Fe(a,""+ue):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(r.hasOwnProperty(P)?ue!=null&&P==="onScroll"&&Yt("scroll",a):ue!=null&&R(a,P,ue,B))}switch(m){case"input":We(a),$(a,x,!1);break;case"textarea":We(a),st(a);break;case"option":x.value!=null&&a.setAttribute("value",""+Pe(x.value));break;case"select":a.multiple=!!x.multiple,P=x.value,P!=null?$e(a,!!x.multiple,P,!1):x.defaultValue!=null&&$e(a,!!x.multiple,x.defaultValue,!0);break;default:typeof E.onClick=="function"&&(a.onclick=Oe)}switch(m){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return li(c),null;case 6:if(a&&c.stateNode!=null)m0(a,c,a.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(t(166));if(m=La(Ic.current),La(hs.current),Bd(c)){if(x=c.stateNode,m=c.memoizedProps,x[vr]=c,(P=x.nodeValue!==m)&&(a=nr,a!==null))switch(a.tag){case 3:Me(x.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Me(x.nodeValue,m,(a.mode&1)!==0)}P&&(c.flags|=4)}else x=(m.nodeType===9?m:m.ownerDocument).createTextNode(x),x[vr]=c,c.stateNode=x}return li(c),null;case 13:if(cn(yn),x=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(pn&&ir!==null&&(c.mode&1)!==0&&(c.flags&128)===0)yx(),zl(),c.flags|=98560,P=!1;else if(P=Bd(c),x!==null&&x.dehydrated!==null){if(a===null){if(!P)throw Error(t(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[vr]=c}else zl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;li(c),P=!1}else Vr!==null&&(Ig(Vr),Vr=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=m,c):(x=x!==null,x!==(a!==null&&a.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(yn.current&1)!==0?Nn===0&&(Nn=3):Og())),c.updateQueue!==null&&(c.flags|=4),li(c),null);case 4:return Hl(),bg(a,c),a===null&&Mo(c.stateNode.containerInfo),li(c),null;case 10:return Ym(c.type._context),li(c),null;case 17:return Ii(c.type)&&Dd(),li(c),null;case 19:if(cn(yn),P=c.memoizedState,P===null)return li(c),null;if(x=(c.flags&128)!==0,B=P.rendering,B===null)if(x)Fc(P,!1);else{if(Nn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(B=Gd(a),B!==null){for(c.flags|=128,Fc(P,!1),x=B.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=m,m=c.child;m!==null;)P=m,a=x,P.flags&=14680066,B=P.alternate,B===null?(P.childLanes=0,P.lanes=a,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=B.childLanes,P.lanes=B.lanes,P.child=B.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=B.memoizedProps,P.memoizedState=B.memoizedState,P.updateQueue=B.updateQueue,P.type=B.type,a=B.dependencies,P.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return rn(yn,yn.current&1|2),c.child}a=a.sibling}P.tail!==null&&Vt()>Gl&&(c.flags|=128,x=!0,Fc(P,!1),c.lanes=4194304)}else{if(!x)if(a=Gd(B),a!==null){if(c.flags|=128,x=!0,m=a.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),Fc(P,!0),P.tail===null&&P.tailMode==="hidden"&&!B.alternate&&!pn)return li(c),null}else 2*Vt()-P.renderingStartTime>Gl&&m!==1073741824&&(c.flags|=128,x=!0,Fc(P,!1),c.lanes=4194304);P.isBackwards?(B.sibling=c.child,c.child=B):(m=P.last,m!==null?m.sibling=B:c.child=B,P.last=B)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=Vt(),c.sibling=null,m=yn.current,rn(yn,x?m&1|2:m&1),c):(li(c),null);case 22:case 23:return Ng(),x=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(rr&1073741824)!==0&&(li(c),c.subtreeFlags&6&&(c.flags|=8192)):li(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function PL(a,c){switch(jm(c),c.tag){case 1:return Ii(c.type)&&Dd(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Hl(),cn(Ri),cn(oi),ig(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return tg(c),null;case 13:if(cn(yn),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));zl()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return cn(yn),null;case 4:return Hl(),null;case 10:return Ym(c.type._context),null;case 22:case 23:return Ng(),null;case 24:return null;default:return null}}var ef=!1,ui=!1,AL=typeof WeakSet=="function"?WeakSet:Set,it=null;function Wl(a,c){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(x){Mn(a,c,x)}else m.current=null}function Sg(a,c,m){try{m()}catch(x){Mn(a,c,x)}}var g0=!1;function kL(a,c){if(et=ma,a=wc(),bc(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var E=x.anchorOffset,P=x.focusNode;x=x.focusOffset;try{m.nodeType,P.nodeType}catch{m=null;break e}var B=0,J=-1,ue=-1,Ee=0,He=0,Ge=a,Ue=null;t:for(;;){for(var nt;Ge!==m||E!==0&&Ge.nodeType!==3||(J=B+E),Ge!==P||x!==0&&Ge.nodeType!==3||(ue=B+x),Ge.nodeType===3&&(B+=Ge.nodeValue.length),(nt=Ge.firstChild)!==null;)Ue=Ge,Ge=nt;for(;;){if(Ge===a)break t;if(Ue===m&&++Ee===E&&(J=B),Ue===P&&++He===x&&(ue=B),(nt=Ge.nextSibling)!==null)break;Ge=Ue,Ue=Ge.parentNode}Ge=nt}m=J===-1||ue===-1?null:{start:J,end:ue}}else m=null}m=m||{start:0,end:0}}else m=null;for(ft={focusedElem:a,selectionRange:m},ma=!1,it=c;it!==null;)if(c=it,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,it=a;else for(;it!==null;){c=it;try{var ot=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(ot!==null){var at=ot.memoizedProps,Tn=ot.memoizedState,ye=c.stateNode,de=ye.getSnapshotBeforeUpdate(c.elementType===c.type?at:Wr(c.type,at),Tn);ye.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var xe=c.stateNode.containerInfo;xe.nodeType===1?xe.textContent="":xe.nodeType===9&&xe.documentElement&&xe.removeChild(xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ye){Mn(c,c.return,Ye)}if(a=c.sibling,a!==null){a.return=c.return,it=a;break}it=c.return}return ot=g0,g0=!1,ot}function Bc(a,c,m){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var E=x=x.next;do{if((E.tag&a)===a){var P=E.destroy;E.destroy=void 0,P!==void 0&&Sg(c,m,P)}E=E.next}while(E!==x)}}function tf(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&a)===a){var x=m.create;m.destroy=x()}m=m.next}while(m!==c)}}function Mg(a){var c=a.ref;if(c!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof c=="function"?c(a):c.current=a}}function _0(a){var c=a.alternate;c!==null&&(a.alternate=null,_0(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[vr],delete c[To],delete c[Lo],delete c[Bm],delete c[Um])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function y0(a){return a.tag===5||a.tag===3||a.tag===4}function v0(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||y0(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Eg(a,c,m){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(a,c):m.insertBefore(a,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(a,m)):(c=m,c.appendChild(a)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Oe));else if(x!==4&&(a=a.child,a!==null))for(Eg(a,c,m),a=a.sibling;a!==null;)Eg(a,c,m),a=a.sibling}function Tg(a,c,m){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?m.insertBefore(a,c):m.appendChild(a);else if(x!==4&&(a=a.child,a!==null))for(Tg(a,c,m),a=a.sibling;a!==null;)Tg(a,c,m),a=a.sibling}var Yn=null,jr=!1;function Io(a,c,m){for(m=m.child;m!==null;)x0(a,c,m),m=m.sibling}function x0(a,c,m){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(ua,m)}catch{}switch(m.tag){case 5:ui||Wl(m,c);case 6:var x=Yn,E=jr;Yn=null,Io(a,c,m),Yn=x,jr=E,Yn!==null&&(jr?(a=Yn,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):Yn.removeChild(m.stateNode));break;case 18:Yn!==null&&(jr?(a=Yn,m=m.stateNode,a.nodeType===8?Pc(a.parentNode,m):a.nodeType===1&&Pc(a,m),Ki(a)):Pc(Yn,m.stateNode));break;case 4:x=Yn,E=jr,Yn=m.stateNode.containerInfo,jr=!0,Io(a,c,m),Yn=x,jr=E;break;case 0:case 11:case 14:case 15:if(!ui&&(x=m.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){E=x=x.next;do{var P=E,B=P.destroy;P=P.tag,B!==void 0&&((P&2)!==0||(P&4)!==0)&&Sg(m,c,B),E=E.next}while(E!==x)}Io(a,c,m);break;case 1:if(!ui&&(Wl(m,c),x=m.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=m.memoizedProps,x.state=m.memoizedState,x.componentWillUnmount()}catch(J){Mn(m,c,J)}Io(a,c,m);break;case 21:Io(a,c,m);break;case 22:m.mode&1?(ui=(x=ui)||m.memoizedState!==null,Io(a,c,m),ui=x):Io(a,c,m);break;default:Io(a,c,m)}}function w0(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new AL),c.forEach(function(x){var E=UL.bind(null,a,x);m.has(x)||(m.add(x),x.then(E,E))})}}function Gr(a,c){var m=c.deletions;if(m!==null)for(var x=0;x<m.length;x++){var E=m[x];try{var P=a,B=c,J=B;e:for(;J!==null;){switch(J.tag){case 5:Yn=J.stateNode,jr=!1;break e;case 3:Yn=J.stateNode.containerInfo,jr=!0;break e;case 4:Yn=J.stateNode.containerInfo,jr=!0;break e}J=J.return}if(Yn===null)throw Error(t(160));x0(P,B,E),Yn=null,jr=!1;var ue=E.alternate;ue!==null&&(ue.return=null),E.return=null}catch(Ee){Mn(E,c,Ee)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)b0(c,a),c=c.sibling}function b0(a,c){var m=a.alternate,x=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Gr(c,a),fs(a),x&4){try{Bc(3,a,a.return),tf(3,a)}catch(at){Mn(a,a.return,at)}try{Bc(5,a,a.return)}catch(at){Mn(a,a.return,at)}}break;case 1:Gr(c,a),fs(a),x&512&&m!==null&&Wl(m,m.return);break;case 5:if(Gr(c,a),fs(a),x&512&&m!==null&&Wl(m,m.return),a.flags&32){var E=a.stateNode;try{Fe(E,"")}catch(at){Mn(a,a.return,at)}}if(x&4&&(E=a.stateNode,E!=null)){var P=a.memoizedProps,B=m!==null?m.memoizedProps:P,J=a.type,ue=a.updateQueue;if(a.updateQueue=null,ue!==null)try{J==="input"&&P.type==="radio"&&P.name!=null&&Ie(E,P),Be(J,B);var Ee=Be(J,P);for(B=0;B<ue.length;B+=2){var He=ue[B],Ge=ue[B+1];He==="style"?Ot(E,Ge):He==="dangerouslySetInnerHTML"?Se(E,Ge):He==="children"?Fe(E,Ge):R(E,He,Ge,Ee)}switch(J){case"input":X(E,P);break;case"textarea":Je(E,P);break;case"select":var Ue=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!P.multiple;var nt=P.value;nt!=null?$e(E,!!P.multiple,nt,!1):Ue!==!!P.multiple&&(P.defaultValue!=null?$e(E,!!P.multiple,P.defaultValue,!0):$e(E,!!P.multiple,P.multiple?[]:"",!1))}E[To]=P}catch(at){Mn(a,a.return,at)}}break;case 6:if(Gr(c,a),fs(a),x&4){if(a.stateNode===null)throw Error(t(162));E=a.stateNode,P=a.memoizedProps;try{E.nodeValue=P}catch(at){Mn(a,a.return,at)}}break;case 3:if(Gr(c,a),fs(a),x&4&&m!==null&&m.memoizedState.isDehydrated)try{Ki(c.containerInfo)}catch(at){Mn(a,a.return,at)}break;case 4:Gr(c,a),fs(a);break;case 13:Gr(c,a),fs(a),E=a.child,E.flags&8192&&(P=E.memoizedState!==null,E.stateNode.isHidden=P,!P||E.alternate!==null&&E.alternate.memoizedState!==null||(Pg=Vt())),x&4&&w0(a);break;case 22:if(He=m!==null&&m.memoizedState!==null,a.mode&1?(ui=(Ee=ui)||He,Gr(c,a),ui=Ee):Gr(c,a),fs(a),x&8192){if(Ee=a.memoizedState!==null,(a.stateNode.isHidden=Ee)&&!He&&(a.mode&1)!==0)for(it=a,He=a.child;He!==null;){for(Ge=it=He;it!==null;){switch(Ue=it,nt=Ue.child,Ue.tag){case 0:case 11:case 14:case 15:Bc(4,Ue,Ue.return);break;case 1:Wl(Ue,Ue.return);var ot=Ue.stateNode;if(typeof ot.componentWillUnmount=="function"){x=Ue,m=Ue.return;try{c=x,ot.props=c.memoizedProps,ot.state=c.memoizedState,ot.componentWillUnmount()}catch(at){Mn(x,m,at)}}break;case 5:Wl(Ue,Ue.return);break;case 22:if(Ue.memoizedState!==null){E0(Ge);continue}}nt!==null?(nt.return=Ue,it=nt):E0(Ge)}He=He.sibling}e:for(He=null,Ge=a;;){if(Ge.tag===5){if(He===null){He=Ge;try{E=Ge.stateNode,Ee?(P=E.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(J=Ge.stateNode,ue=Ge.memoizedProps.style,B=ue!=null&&ue.hasOwnProperty("display")?ue.display:null,J.style.display=At("display",B))}catch(at){Mn(a,a.return,at)}}}else if(Ge.tag===6){if(He===null)try{Ge.stateNode.nodeValue=Ee?"":Ge.memoizedProps}catch(at){Mn(a,a.return,at)}}else if((Ge.tag!==22&&Ge.tag!==23||Ge.memoizedState===null||Ge===a)&&Ge.child!==null){Ge.child.return=Ge,Ge=Ge.child;continue}if(Ge===a)break e;for(;Ge.sibling===null;){if(Ge.return===null||Ge.return===a)break e;He===Ge&&(He=null),Ge=Ge.return}He===Ge&&(He=null),Ge.sibling.return=Ge.return,Ge=Ge.sibling}}break;case 19:Gr(c,a),fs(a),x&4&&w0(a);break;case 21:break;default:Gr(c,a),fs(a)}}function fs(a){var c=a.flags;if(c&2){try{e:{for(var m=a.return;m!==null;){if(y0(m)){var x=m;break e}m=m.return}throw Error(t(160))}switch(x.tag){case 5:var E=x.stateNode;x.flags&32&&(Fe(E,""),x.flags&=-33);var P=v0(a);Tg(a,P,E);break;case 3:case 4:var B=x.stateNode.containerInfo,J=v0(a);Eg(a,J,B);break;default:throw Error(t(161))}}catch(ue){Mn(a,a.return,ue)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function RL(a,c,m){it=a,S0(a)}function S0(a,c,m){for(var x=(a.mode&1)!==0;it!==null;){var E=it,P=E.child;if(E.tag===22&&x){var B=E.memoizedState!==null||ef;if(!B){var J=E.alternate,ue=J!==null&&J.memoizedState!==null||ui;J=ef;var Ee=ui;if(ef=B,(ui=ue)&&!Ee)for(it=E;it!==null;)B=it,ue=B.child,B.tag===22&&B.memoizedState!==null?T0(E):ue!==null?(ue.return=B,it=ue):T0(E);for(;P!==null;)it=P,S0(P),P=P.sibling;it=E,ef=J,ui=Ee}M0(a)}else(E.subtreeFlags&8772)!==0&&P!==null?(P.return=E,it=P):M0(a)}}function M0(a){for(;it!==null;){var c=it;if((c.flags&8772)!==0){var m=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:ui||tf(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!ui)if(m===null)x.componentDidMount();else{var E=c.elementType===c.type?m.memoizedProps:Wr(c.type,m.memoizedProps);x.componentDidUpdate(E,m.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&Ex(c,P,x);break;case 3:var B=c.updateQueue;if(B!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}Ex(c,B,m)}break;case 5:var J=c.stateNode;if(m===null&&c.flags&4){m=J;var ue=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":ue.autoFocus&&m.focus();break;case"img":ue.src&&(m.src=ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Ee=c.alternate;if(Ee!==null){var He=Ee.memoizedState;if(He!==null){var Ge=He.dehydrated;Ge!==null&&Ki(Ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ui||c.flags&512&&Mg(c)}catch(Ue){Mn(c,c.return,Ue)}}if(c===a){it=null;break}if(m=c.sibling,m!==null){m.return=c.return,it=m;break}it=c.return}}function E0(a){for(;it!==null;){var c=it;if(c===a){it=null;break}var m=c.sibling;if(m!==null){m.return=c.return,it=m;break}it=c.return}}function T0(a){for(;it!==null;){var c=it;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{tf(4,c)}catch(ue){Mn(c,m,ue)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var E=c.return;try{x.componentDidMount()}catch(ue){Mn(c,E,ue)}}var P=c.return;try{Mg(c)}catch(ue){Mn(c,P,ue)}break;case 5:var B=c.return;try{Mg(c)}catch(ue){Mn(c,B,ue)}}}catch(ue){Mn(c,c.return,ue)}if(c===a){it=null;break}var J=c.sibling;if(J!==null){J.return=c.return,it=J;break}it=c.return}}var IL=Math.ceil,nf=F.ReactCurrentDispatcher,Lg=F.ReactCurrentOwner,Mr=F.ReactCurrentBatchConfig,Ut=0,Hn=null,An=null,Kn=0,rr=0,jl=Co(0),Nn=0,Uc=null,Pa=0,rf=0,Cg=0,Hc=null,Ni=null,Pg=0,Gl=1/0,Xs=null,sf=!1,Ag=null,Do=null,of=!1,No=null,af=0,Vc=0,kg=null,lf=-1,uf=0;function Ti(){return(Ut&6)!==0?Vt():lf!==-1?lf:lf=Vt()}function Oo(a){return(a.mode&1)===0?1:(Ut&2)!==0&&Kn!==0?Kn&-Kn:gL.transition!==null?(uf===0&&(uf=hd()),uf):(a=Ft,a!==0||(a=window.event,a=a===void 0?16:Dt(a.type)),a)}function $r(a,c,m,x){if(50<Vc)throw Vc=0,kg=null,Error(t(185));Xi(a,m,x),((Ut&2)===0||a!==Hn)&&(a===Hn&&((Ut&2)===0&&(rf|=m),Nn===4&&zo(a,Kn)),Oi(a,x),m===1&&Ut===0&&(c.mode&1)===0&&(Gl=Vt()+500,Od&&Ao()))}function Oi(a,c){var m=a.callbackNode;hl(a,c);var x=nn(a,a===Hn?Kn:0);if(x===0)m!==null&&tn(m),a.callbackNode=null,a.callbackPriority=0;else if(c=x&-x,a.callbackPriority!==c){if(m!=null&&tn(m),c===1)a.tag===0?mL(C0.bind(null,a)):fx(C0.bind(null,a)),si(function(){(Ut&6)===0&&Ao()}),m=null;else{switch(co(x)){case 1:m=dn;break;case 4:m=wi;break;case 16:m=fn;break;case 536870912:m=oo;break;default:m=fn}m=O0(m,L0.bind(null,a))}a.callbackPriority=c,a.callbackNode=m}}function L0(a,c){if(lf=-1,uf=0,(Ut&6)!==0)throw Error(t(327));var m=a.callbackNode;if($l()&&a.callbackNode!==m)return null;var x=nn(a,a===Hn?Kn:0);if(x===0)return null;if((x&30)!==0||(x&a.expiredLanes)!==0||c)c=cf(a,x);else{c=x;var E=Ut;Ut|=2;var P=A0();(Hn!==a||Kn!==c)&&(Xs=null,Gl=Vt()+500,ka(a,c));do try{OL();break}catch(J){P0(a,J)}while(!0);Xm(),nf.current=P,Ut=E,An!==null?c=0:(Hn=null,Kn=0,c=Nn)}if(c!==0){if(c===2&&(E=ii(a),E!==0&&(x=E,c=Rg(a,E))),c===1)throw m=Uc,ka(a,0),zo(a,x),Oi(a,Vt()),m;if(c===6)zo(a,x);else{if(E=a.current.alternate,(x&30)===0&&!DL(E)&&(c=cf(a,x),c===2&&(P=ii(a),P!==0&&(x=P,c=Rg(a,P))),c===1))throw m=Uc,ka(a,0),zo(a,x),Oi(a,Vt()),m;switch(a.finishedWork=E,a.finishedLanes=x,c){case 0:case 1:throw Error(t(345));case 2:Ra(a,Ni,Xs);break;case 3:if(zo(a,x),(x&130023424)===x&&(c=Pg+500-Vt(),10<c)){if(nn(a,0)!==0)break;if(E=a.suspendedLanes,(E&x)!==x){Ti(),a.pingedLanes|=a.suspendedLanes&E;break}a.timeoutHandle=In(Ra.bind(null,a,Ni,Xs),c);break}Ra(a,Ni,Xs);break;case 4:if(zo(a,x),(x&4194240)===x)break;for(c=a.eventTimes,E=-1;0<x;){var B=31-Et(x);P=1<<B,B=c[B],B>E&&(E=B),x&=~P}if(x=E,x=Vt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*IL(x/1960))-x,10<x){a.timeoutHandle=In(Ra.bind(null,a,Ni,Xs),x);break}Ra(a,Ni,Xs);break;case 5:Ra(a,Ni,Xs);break;default:throw Error(t(329))}}}return Oi(a,Vt()),a.callbackNode===m?L0.bind(null,a):null}function Rg(a,c){var m=Hc;return a.current.memoizedState.isDehydrated&&(ka(a,c).flags|=256),a=cf(a,c),a!==2&&(c=Ni,Ni=m,c!==null&&Ig(c)),a}function Ig(a){Ni===null?Ni=a:Ni.push.apply(Ni,a)}function DL(a){for(var c=a;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var x=0;x<m.length;x++){var E=m[x],P=E.getSnapshot;E=E.value;try{if(!er(P(),E))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function zo(a,c){for(c&=~Cg,c&=~rf,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var m=31-Et(c),x=1<<m;a[m]=-1,c&=~x}}function C0(a){if((Ut&6)!==0)throw Error(t(327));$l();var c=nn(a,0);if((c&1)===0)return Oi(a,Vt()),null;var m=cf(a,c);if(a.tag!==0&&m===2){var x=ii(a);x!==0&&(c=x,m=Rg(a,x))}if(m===1)throw m=Uc,ka(a,0),zo(a,c),Oi(a,Vt()),m;if(m===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Ra(a,Ni,Xs),Oi(a,Vt()),null}function Dg(a,c){var m=Ut;Ut|=1;try{return a(c)}finally{Ut=m,Ut===0&&(Gl=Vt()+500,Od&&Ao())}}function Aa(a){No!==null&&No.tag===0&&(Ut&6)===0&&$l();var c=Ut;Ut|=1;var m=Mr.transition,x=Ft;try{if(Mr.transition=null,Ft=1,a)return a()}finally{Ft=x,Mr.transition=m,Ut=c,(Ut&6)===0&&Ao()}}function Ng(){rr=jl.current,cn(jl)}function ka(a,c){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,Pn(m)),An!==null)for(m=An.return;m!==null;){var x=m;switch(jm(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Dd();break;case 3:Hl(),cn(Ri),cn(oi),ig();break;case 5:tg(x);break;case 4:Hl();break;case 13:cn(yn);break;case 19:cn(yn);break;case 10:Ym(x.type._context);break;case 22:case 23:Ng()}m=m.return}if(Hn=a,An=a=Fo(a.current,null),Kn=rr=c,Nn=0,Uc=null,Cg=rf=Pa=0,Ni=Hc=null,Ta!==null){for(c=0;c<Ta.length;c++)if(m=Ta[c],x=m.interleaved,x!==null){m.interleaved=null;var E=x.next,P=m.pending;if(P!==null){var B=P.next;P.next=E,x.next=B}m.pending=x}Ta=null}return a}function P0(a,c){do{var m=An;try{if(Xm(),$d.current=Yd,Zd){for(var x=vn.memoizedState;x!==null;){var E=x.queue;E!==null&&(E.pending=null),x=x.next}Zd=!1}if(Ca=0,Un=Dn=vn=null,Dc=!1,Nc=0,Lg.current=null,m===null||m.return===null){Nn=1,Uc=c,An=null;break}e:{var P=a,B=m.return,J=m,ue=c;if(c=Kn,J.flags|=32768,ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Ee=ue,He=J,Ge=He.tag;if((He.mode&1)===0&&(Ge===0||Ge===11||Ge===15)){var Ue=He.alternate;Ue?(He.updateQueue=Ue.updateQueue,He.memoizedState=Ue.memoizedState,He.lanes=Ue.lanes):(He.updateQueue=null,He.memoizedState=null)}var nt=e0(B);if(nt!==null){nt.flags&=-257,t0(nt,B,J,P,c),nt.mode&1&&Qx(P,Ee,c),c=nt,ue=Ee;var ot=c.updateQueue;if(ot===null){var at=new Set;at.add(ue),c.updateQueue=at}else ot.add(ue);break e}else{if((c&1)===0){Qx(P,Ee,c),Og();break e}ue=Error(t(426))}}else if(pn&&J.mode&1){var Tn=e0(B);if(Tn!==null){(Tn.flags&65536)===0&&(Tn.flags|=256),t0(Tn,B,J,P,c),Zm(Vl(ue,J));break e}}P=ue=Vl(ue,J),Nn!==4&&(Nn=2),Hc===null?Hc=[P]:Hc.push(P),P=B;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var ye=Kx(P,ue,c);Mx(P,ye);break e;case 1:J=ue;var de=P.type,xe=P.stateNode;if((P.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(Do===null||!Do.has(xe)))){P.flags|=65536,c&=-c,P.lanes|=c;var Ye=Jx(P,J,c);Mx(P,Ye);break e}}P=P.return}while(P!==null)}R0(m)}catch(ct){c=ct,An===m&&m!==null&&(An=m=m.return);continue}break}while(!0)}function A0(){var a=nf.current;return nf.current=Yd,a===null?Yd:a}function Og(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),Hn===null||(Pa&268435455)===0&&(rf&268435455)===0||zo(Hn,Kn)}function cf(a,c){var m=Ut;Ut|=2;var x=A0();(Hn!==a||Kn!==c)&&(Xs=null,ka(a,c));do try{NL();break}catch(E){P0(a,E)}while(!0);if(Xm(),Ut=m,nf.current=x,An!==null)throw Error(t(261));return Hn=null,Kn=0,Nn}function NL(){for(;An!==null;)k0(An)}function OL(){for(;An!==null&&!dr();)k0(An)}function k0(a){var c=N0(a.alternate,a,rr);a.memoizedProps=a.pendingProps,c===null?R0(a):An=c,Lg.current=null}function R0(a){var c=a;do{var m=c.alternate;if(a=c.return,(c.flags&32768)===0){if(m=CL(m,c,rr),m!==null){An=m;return}}else{if(m=PL(m,c),m!==null){m.flags&=32767,An=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Nn=6,An=null;return}}if(c=c.sibling,c!==null){An=c;return}An=c=a}while(c!==null);Nn===0&&(Nn=5)}function Ra(a,c,m){var x=Ft,E=Mr.transition;try{Mr.transition=null,Ft=1,zL(a,c,m,x)}finally{Mr.transition=E,Ft=x}return null}function zL(a,c,m,x){do $l();while(No!==null);if((Ut&6)!==0)throw Error(t(327));m=a.finishedWork;var E=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var P=m.lanes|m.childLanes;if(Sn(a,P),a===Hn&&(An=Hn=null,Kn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||of||(of=!0,O0(fn,function(){return $l(),null})),P=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||P){P=Mr.transition,Mr.transition=null;var B=Ft;Ft=1;var J=Ut;Ut|=4,Lg.current=null,kL(a,m),b0(m,a),_r(ft),ma=!!et,ft=et=null,a.current=m,RL(m),Bn(),Ut=J,Ft=B,Mr.transition=P}else a.current=m;if(of&&(of=!1,No=a,af=E),P=a.pendingLanes,P===0&&(Do=null),ca(m.stateNode),Oi(a,Vt()),c!==null)for(x=a.onRecoverableError,m=0;m<c.length;m++)E=c[m],x(E.value,{componentStack:E.stack,digest:E.digest});if(sf)throw sf=!1,a=Ag,Ag=null,a;return(af&1)!==0&&a.tag!==0&&$l(),P=a.pendingLanes,(P&1)!==0?a===kg?Vc++:(Vc=0,kg=a):Vc=0,Ao(),null}function $l(){if(No!==null){var a=co(af),c=Mr.transition,m=Ft;try{if(Mr.transition=null,Ft=16>a?16:a,No===null)var x=!1;else{if(a=No,No=null,af=0,(Ut&6)!==0)throw Error(t(331));var E=Ut;for(Ut|=4,it=a.current;it!==null;){var P=it,B=P.child;if((it.flags&16)!==0){var J=P.deletions;if(J!==null){for(var ue=0;ue<J.length;ue++){var Ee=J[ue];for(it=Ee;it!==null;){var He=it;switch(He.tag){case 0:case 11:case 15:Bc(8,He,P)}var Ge=He.child;if(Ge!==null)Ge.return=He,it=Ge;else for(;it!==null;){He=it;var Ue=He.sibling,nt=He.return;if(_0(He),He===Ee){it=null;break}if(Ue!==null){Ue.return=nt,it=Ue;break}it=nt}}}var ot=P.alternate;if(ot!==null){var at=ot.child;if(at!==null){ot.child=null;do{var Tn=at.sibling;at.sibling=null,at=Tn}while(at!==null)}}it=P}}if((P.subtreeFlags&2064)!==0&&B!==null)B.return=P,it=B;else e:for(;it!==null;){if(P=it,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Bc(9,P,P.return)}var ye=P.sibling;if(ye!==null){ye.return=P.return,it=ye;break e}it=P.return}}var de=a.current;for(it=de;it!==null;){B=it;var xe=B.child;if((B.subtreeFlags&2064)!==0&&xe!==null)xe.return=B,it=xe;else e:for(B=de;it!==null;){if(J=it,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:tf(9,J)}}catch(ct){Mn(J,J.return,ct)}if(J===B){it=null;break e}var Ye=J.sibling;if(Ye!==null){Ye.return=J.return,it=Ye;break e}it=J.return}}if(Ut=E,Ao(),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(ua,a)}catch{}x=!0}return x}finally{Ft=m,Mr.transition=c}}return!1}function I0(a,c,m){c=Vl(m,c),c=Kx(a,c,1),a=Ro(a,c,1),c=Ti(),a!==null&&(Xi(a,1,c),Oi(a,c))}function Mn(a,c,m){if(a.tag===3)I0(a,a,m);else for(;c!==null;){if(c.tag===3){I0(c,a,m);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Do===null||!Do.has(x))){a=Vl(m,a),a=Jx(c,a,1),c=Ro(c,a,1),a=Ti(),c!==null&&(Xi(c,1,a),Oi(c,a));break}}c=c.return}}function FL(a,c,m){var x=a.pingCache;x!==null&&x.delete(c),c=Ti(),a.pingedLanes|=a.suspendedLanes&m,Hn===a&&(Kn&m)===m&&(Nn===4||Nn===3&&(Kn&130023424)===Kn&&500>Vt()-Pg?ka(a,0):Cg|=m),Oi(a,c)}function D0(a,c){c===0&&((a.mode&1)===0?c=1:(c=lo,lo<<=1,(lo&130023424)===0&&(lo=4194304)));var m=Ti();a=$s(a,c),a!==null&&(Xi(a,c,m),Oi(a,m))}function BL(a){var c=a.memoizedState,m=0;c!==null&&(m=c.retryLane),D0(a,m)}function UL(a,c){var m=0;switch(a.tag){case 13:var x=a.stateNode,E=a.memoizedState;E!==null&&(m=E.retryLane);break;case 19:x=a.stateNode;break;default:throw Error(t(314))}x!==null&&x.delete(c),D0(a,m)}var N0;N0=function(a,c,m){if(a!==null)if(a.memoizedProps!==c.pendingProps||Ri.current)Di=!0;else{if((a.lanes&m)===0&&(c.flags&128)===0)return Di=!1,LL(a,c,m);Di=(a.flags&131072)!==0}else Di=!1,pn&&(c.flags&1048576)!==0&&px(c,Fd,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;Qd(a,c),a=c.pendingProps;var E=Dl(c,oi.current);Ul(c,m),E=og(null,c,x,a,E,m);var P=ag();return c.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ii(x)?(P=!0,Nd(c)):P=!1,c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Qm(c),E.updater=Kd,c.stateNode=E,E._reactInternals=c,fg(c,x,a,m),c=_g(null,c,x,!0,P,m)):(c.tag=0,pn&&P&&Wm(c),Ei(null,c,E,m),c=c.child),c;case 16:x=c.elementType;e:{switch(Qd(a,c),a=c.pendingProps,E=x._init,x=E(x._payload),c.type=x,E=c.tag=VL(x),a=Wr(x,a),E){case 0:c=gg(null,c,x,a,m);break e;case 1:c=a0(null,c,x,a,m);break e;case 11:c=n0(null,c,x,a,m);break e;case 14:c=i0(null,c,x,Wr(x.type,a),m);break e}throw Error(t(306,x,""))}return c;case 0:return x=c.type,E=c.pendingProps,E=c.elementType===x?E:Wr(x,E),gg(a,c,x,E,m);case 1:return x=c.type,E=c.pendingProps,E=c.elementType===x?E:Wr(x,E),a0(a,c,x,E,m);case 3:e:{if(l0(c),a===null)throw Error(t(387));x=c.pendingProps,P=c.memoizedState,E=P.element,Sx(a,c),jd(c,x,null,m);var B=c.memoizedState;if(x=B.element,P.isDehydrated)if(P={element:x,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){E=Vl(Error(t(423)),c),c=u0(a,c,x,m,E);break e}else if(x!==E){E=Vl(Error(t(424)),c),c=u0(a,c,x,m,E);break e}else for(ir=cs(c.stateNode.containerInfo.firstChild),nr=c,pn=!0,Vr=null,m=wx(c,null,x,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(zl(),x===E){c=qs(a,c,m);break e}Ei(a,c,x,m)}c=c.child}return c;case 5:return Tx(c),a===null&&$m(c),x=c.type,E=c.pendingProps,P=a!==null?a.memoizedProps:null,B=E.children,Tt(x,E)?B=null:P!==null&&Tt(x,P)&&(c.flags|=32),o0(a,c),Ei(a,c,B,m),c.child;case 6:return a===null&&$m(c),null;case 13:return c0(a,c,m);case 4:return eg(c,c.stateNode.containerInfo),x=c.pendingProps,a===null?c.child=Fl(c,null,x,m):Ei(a,c,x,m),c.child;case 11:return x=c.type,E=c.pendingProps,E=c.elementType===x?E:Wr(x,E),n0(a,c,x,E,m);case 7:return Ei(a,c,c.pendingProps,m),c.child;case 8:return Ei(a,c,c.pendingProps.children,m),c.child;case 12:return Ei(a,c,c.pendingProps.children,m),c.child;case 10:e:{if(x=c.type._context,E=c.pendingProps,P=c.memoizedProps,B=E.value,rn(Hd,x._currentValue),x._currentValue=B,P!==null)if(er(P.value,B)){if(P.children===E.children&&!Ri.current){c=qs(a,c,m);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var J=P.dependencies;if(J!==null){B=P.child;for(var ue=J.firstContext;ue!==null;){if(ue.context===x){if(P.tag===1){ue=Zs(-1,m&-m),ue.tag=2;var Ee=P.updateQueue;if(Ee!==null){Ee=Ee.shared;var He=Ee.pending;He===null?ue.next=ue:(ue.next=He.next,He.next=ue),Ee.pending=ue}}P.lanes|=m,ue=P.alternate,ue!==null&&(ue.lanes|=m),Km(P.return,m,c),J.lanes|=m;break}ue=ue.next}}else if(P.tag===10)B=P.type===c.type?null:P.child;else if(P.tag===18){if(B=P.return,B===null)throw Error(t(341));B.lanes|=m,J=B.alternate,J!==null&&(J.lanes|=m),Km(B,m,c),B=P.sibling}else B=P.child;if(B!==null)B.return=P;else for(B=P;B!==null;){if(B===c){B=null;break}if(P=B.sibling,P!==null){P.return=B.return,B=P;break}B=B.return}P=B}Ei(a,c,E.children,m),c=c.child}return c;case 9:return E=c.type,x=c.pendingProps.children,Ul(c,m),E=br(E),x=x(E),c.flags|=1,Ei(a,c,x,m),c.child;case 14:return x=c.type,E=Wr(x,c.pendingProps),E=Wr(x.type,E),i0(a,c,x,E,m);case 15:return r0(a,c,c.type,c.pendingProps,m);case 17:return x=c.type,E=c.pendingProps,E=c.elementType===x?E:Wr(x,E),Qd(a,c),c.tag=1,Ii(x)?(a=!0,Nd(c)):a=!1,Ul(c,m),Xx(c,x,E),fg(c,x,E,m),_g(null,c,x,!0,a,m);case 19:return d0(a,c,m);case 22:return s0(a,c,m)}throw Error(t(156,c.tag))};function O0(a,c){return hr(a,c)}function HL(a,c,m,x){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(a,c,m,x){return new HL(a,c,m,x)}function zg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function VL(a){if(typeof a=="function")return zg(a)?1:0;if(a!=null){if(a=a.$$typeof,a===K)return 11;if(a===ne)return 14}return 2}function Fo(a,c){var m=a.alternate;return m===null?(m=Er(a.tag,c,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=c,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&14680064,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,c=a.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function hf(a,c,m,x,E,P){var B=2;if(x=a,typeof a=="function")zg(a)&&(B=1);else if(typeof a=="string")B=5;else e:switch(a){case N:return Ia(m.children,E,P,c);case I:B=8,E|=8;break;case W:return a=Er(12,m,c,E|2),a.elementType=W,a.lanes=P,a;case Y:return a=Er(13,m,c,E),a.elementType=Y,a.lanes=P,a;case Q:return a=Er(19,m,c,E),a.elementType=Q,a.lanes=P,a;case ae:return df(m,E,P,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case j:B=10;break e;case U:B=9;break e;case K:B=11;break e;case ne:B=14;break e;case oe:B=16,x=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=Er(B,m,c,E),c.elementType=a,c.type=x,c.lanes=P,c}function Ia(a,c,m,x){return a=Er(7,a,x,c),a.lanes=m,a}function df(a,c,m,x){return a=Er(22,a,x,c),a.elementType=ae,a.lanes=m,a.stateNode={isHidden:!1},a}function Fg(a,c,m){return a=Er(6,a,null,c),a.lanes=m,a}function Bg(a,c,m){return c=Er(4,a.children!==null?a.children:[],a.key,c),c.lanes=m,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function WL(a,c,m,x,E){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uo(0),this.expirationTimes=uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uo(0),this.identifierPrefix=x,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function Ug(a,c,m,x,E,P,B,J,ue){return a=new WL(a,c,m,J,ue),c===1?(c=1,P===!0&&(c|=8)):c=0,P=Er(3,null,null,c),a.current=P,P.stateNode=a,P.memoizedState={element:x,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qm(P),a}function jL(a,c,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:x==null?null:""+x,children:a,containerInfo:c,implementation:m}}function z0(a){if(!a)return Po;a=a._reactInternals;e:{if(lt(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ii(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var m=a.type;if(Ii(m))return hx(a,m,c)}return c}function F0(a,c,m,x,E,P,B,J,ue){return a=Ug(m,x,!0,a,E,P,B,J,ue),a.context=z0(null),m=a.current,x=Ti(),E=Oo(m),P=Zs(x,E),P.callback=c??null,Ro(m,P,E),a.current.lanes=E,Xi(a,E,x),Oi(a,x),a}function ff(a,c,m,x){var E=c.current,P=Ti(),B=Oo(E);return m=z0(m),c.context===null?c.context=m:c.pendingContext=m,c=Zs(P,B),c.payload={element:a},x=x===void 0?null:x,x!==null&&(c.callback=x),a=Ro(E,c,B),a!==null&&($r(a,E,B,P),Wd(a,E,B)),B}function pf(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function B0(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<c?m:c}}function Hg(a,c){B0(a,c),(a=a.alternate)&&B0(a,c)}function GL(){return null}var U0=typeof reportError=="function"?reportError:function(a){console.error(a)};function Vg(a){this._internalRoot=a}mf.prototype.render=Vg.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));ff(a,c,null,null)},mf.prototype.unmount=Vg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Aa(function(){ff(null,a,null,null)}),c[Gt]=null}};function mf(a){this._internalRoot=a}mf.prototype.unstable_scheduleHydration=function(a){if(a){var c=pl();a={blockedOn:null,target:a,priority:c};for(var m=0;m<Rn.length&&c!==0&&c<Rn[m].priority;m++);Rn.splice(m,0,a),m===0&&ml(a)}};function Wg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function gf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function H0(){}function $L(a,c,m,x,E){if(E){if(typeof x=="function"){var P=x;x=function(){var Ee=pf(B);P.call(Ee)}}var B=F0(c,x,a,0,null,!1,!1,"",H0);return a._reactRootContainer=B,a[Gt]=B.current,Mo(a.nodeType===8?a.parentNode:a),Aa(),B}for(;E=a.lastChild;)a.removeChild(E);if(typeof x=="function"){var J=x;x=function(){var Ee=pf(ue);J.call(Ee)}}var ue=Ug(a,0,!1,null,null,!1,!1,"",H0);return a._reactRootContainer=ue,a[Gt]=ue.current,Mo(a.nodeType===8?a.parentNode:a),Aa(function(){ff(c,ue,m,x)}),ue}function _f(a,c,m,x,E){var P=m._reactRootContainer;if(P){var B=P;if(typeof E=="function"){var J=E;E=function(){var ue=pf(B);J.call(ue)}}ff(c,B,a,E)}else B=$L(m,c,a,E,x);return pf(B)}dl=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var m=Mt(c.pendingLanes);m!==0&&(zr(c,m|1),Oi(c,Vt()),(Ut&6)===0&&(Gl=Vt()+500,Ao()))}break;case 13:Aa(function(){var x=$s(a,1);if(x!==null){var E=Ti();$r(x,a,1,E)}}),Hg(a,1)}},ks=function(a){if(a.tag===13){var c=$s(a,134217728);if(c!==null){var m=Ti();$r(c,a,134217728,m)}Hg(a,134217728)}},fl=function(a){if(a.tag===13){var c=Oo(a),m=$s(a,c);if(m!==null){var x=Ti();$r(m,a,c,x)}Hg(a,c)}},pl=function(){return Ft},ha=function(a,c){var m=Ft;try{return Ft=a,c()}finally{Ft=m}},Jt=function(a,c,m){switch(c){case"input":if(X(a,m),c=m.name,m.type==="radio"&&c!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var x=m[c];if(x!==a&&x.form===a.form){var E=Rl(x);if(!E)throw Error(t(90));be(x),X(x,E)}}}break;case"textarea":Je(a,m);break;case"select":c=m.value,c!=null&&$e(a,!!m.multiple,c,!1)}},ti=Dg,vi=Aa;var ZL={usingClientEntryPoint:!1,Events:[Hs,Vs,Rl,ns,Xn,Dg]},Wc={findFiberByHostInstance:Us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qL={bundleType:Wc.bundleType,version:Wc.version,rendererPackageName:Wc.rendererPackageName,rendererConfig:Wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=It(a),a===null?null:a.stateNode},findFiberByHostInstance:Wc.findFiberByHostInstance||GL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{ua=yf.inject(qL),qi=yf}catch{}}return zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZL,zi.createPortal=function(a,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wg(c))throw Error(t(200));return jL(a,c,null,m)},zi.createRoot=function(a,c){if(!Wg(a))throw Error(t(299));var m=!1,x="",E=U0;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(E=c.onRecoverableError)),c=Ug(a,1,!1,null,null,m,!1,x,E),a[Gt]=c.current,Mo(a.nodeType===8?a.parentNode:a),new Vg(c)},zi.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=It(c),a=a===null?null:a.stateNode,a},zi.flushSync=function(a){return Aa(a)},zi.hydrate=function(a,c,m){if(!gf(c))throw Error(t(200));return _f(null,a,c,!0,m)},zi.hydrateRoot=function(a,c,m){if(!Wg(a))throw Error(t(405));var x=m!=null&&m.hydratedSources||null,E=!1,P="",B=U0;if(m!=null&&(m.unstable_strictMode===!0&&(E=!0),m.identifierPrefix!==void 0&&(P=m.identifierPrefix),m.onRecoverableError!==void 0&&(B=m.onRecoverableError)),c=F0(c,null,a,1,m??null,E,!1,P,B),a[Gt]=c.current,Mo(a),x)for(a=0;a<x.length;a++)m=x[a],E=m._getVersion,E=E(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,E]:c.mutableSourceEagerHydrationData.push(m,E);return new mf(c)},zi.render=function(a,c,m){if(!gf(c))throw Error(t(200));return _f(null,a,c,!1,m)},zi.unmountComponentAtNode=function(a){if(!gf(a))throw Error(t(40));return a._reactRootContainer?(Aa(function(){_f(null,null,a,!1,function(){a._reactRootContainer=null,a[Gt]=null})}),!0):!1},zi.unstable_batchedUpdates=Dg,zi.unstable_renderSubtreeIntoContainer=function(a,c,m,x){if(!gf(m))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return _f(a,c,m,!1,x)},zi.version="18.3.1-next-f1338f8080-20240426",zi}var X0;function z1(){if(X0)return $g.exports;X0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$g.exports=tC(),$g.exports}var Y0;function nC(){if(Y0)return vf;Y0=1;var n=z1();return vf.createRoot=n.createRoot,vf.hydrateRoot=n.hydrateRoot,vf}var iC=nC();const rC=Vu(iC),F1=typeof document<"u"?fi.useLayoutEffect:()=>{};var Xg;const sC=(Xg=fi.useInsertionEffect)!==null&&Xg!==void 0?Xg:F1;function oC(n){const e=me.useRef(null);return sC(()=>{e.current=n},[n]),me.useCallback((...t)=>{const i=e.current;return i?.(...t)},[])}const oa=n=>{var e;return(e=n?.ownerDocument)!==null&&e!==void 0?e:document},ja=n=>n&&"window"in n&&n.window===n?n:oa(n).defaultView||window;function aC(n){return n!==null&&typeof n=="object"&&"nodeType"in n&&typeof n.nodeType=="number"}function lC(n){return aC(n)&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in n}let uC=!1;function ev(){return uC}function B1(n,e){if(!ev())return e&&n?n.contains(e):!1;if(!n||!e)return!1;let t=e;for(;t!==null;){if(t===n)return!0;t.tagName==="SLOT"&&t.assignedSlot?t=t.assignedSlot.parentNode:lC(t)?t=t.host:t=t.parentNode}return!1}const ly=(n=document)=>{var e;if(!ev())return n.activeElement;let t=n.activeElement;for(;t&&"shadowRoot"in t&&(!((e=t.shadowRoot)===null||e===void 0)&&e.activeElement);)t=t.shadowRoot.activeElement;return t};function U1(n){return ev()&&n.target.shadowRoot&&n.composedPath?n.composedPath()[0]:n.target}function cC(n){var e;if(typeof window>"u"||window.navigator==null)return!1;let t=(e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands;return Array.isArray(t)&&t.some(i=>n.test(i.brand))||n.test(window.navigator.userAgent)}function hC(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function H1(n){let e=null;return()=>(e==null&&(e=n()),e)}const dC=H1(function(){return hC(/^Mac/i)}),fC=H1(function(){return cC(/Android/i)});function V1(){let n=me.useRef(new Map),e=me.useCallback((r,s,o,u)=>{let h=u?.once?(...d)=>{n.current.delete(o),o(...d)}:o;n.current.set(o,{type:s,eventTarget:r,fn:h,options:u}),r.addEventListener(s,h,u)},[]),t=me.useCallback((r,s,o,u)=>{var h;let d=((h=n.current.get(o))===null||h===void 0?void 0:h.fn)||o;r.removeEventListener(s,d,u),n.current.delete(o)},[]),i=me.useCallback(()=>{n.current.forEach((r,s)=>{t(r.eventTarget,r.type,s,r.options)})},[t]);return me.useEffect(()=>i,[i]),{addGlobalListener:e,removeGlobalListener:t,removeAllGlobalListeners:i}}function pC(n){return n.pointerType===""&&n.isTrusted?!0:fC()&&n.pointerType?n.type==="click"&&n.buttons===1:n.detail===0&&!n.pointerType}var mC=z1();function W1(n){let e=n;return e.nativeEvent=n,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function gC(n,e){Object.defineProperty(n,"target",{value:e}),Object.defineProperty(n,"currentTarget",{value:e})}function j1(n){let e=me.useRef({isFocused:!1,observer:null});F1(()=>{const i=e.current;return()=>{i.observer&&(i.observer.disconnect(),i.observer=null)}},[]);let t=oC(i=>{n?.(i)});return me.useCallback(i=>{if(i.target instanceof HTMLButtonElement||i.target instanceof HTMLInputElement||i.target instanceof HTMLTextAreaElement||i.target instanceof HTMLSelectElement){e.current.isFocused=!0;let r=i.target,s=o=>{if(e.current.isFocused=!1,r.disabled){let u=W1(o);t(u)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};r.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&r.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let u=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),e.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[t])}let _C=!1,Jh=null,uy=new Set,wh=new Map,Ja=!1,cy=!1;const yC={Tab:!0,Escape:!0};function tv(n,e){for(let t of uy)t(n,e)}function vC(n){return!(n.metaKey||!dC()&&n.altKey||n.ctrlKey||n.key==="Control"||n.key==="Shift"||n.key==="Meta")}function Tp(n){Ja=!0,vC(n)&&(Jh="keyboard",tv("keyboard",n))}function Eu(n){Jh="pointer",(n.type==="mousedown"||n.type==="pointerdown")&&(Ja=!0,tv("pointer",n))}function G1(n){pC(n)&&(Ja=!0,Jh="virtual")}function $1(n){n.target===window||n.target===document||_C||!n.isTrusted||(!Ja&&!cy&&(Jh="virtual",tv("virtual",n)),Ja=!1,cy=!1)}function Z1(){Ja=!1,cy=!0}function hy(n){if(typeof window>"u"||typeof document>"u"||wh.get(ja(n)))return;const e=ja(n),t=oa(n);let i=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Ja=!0,i.apply(this,arguments)},t.addEventListener("keydown",Tp,!0),t.addEventListener("keyup",Tp,!0),t.addEventListener("click",G1,!0),e.addEventListener("focus",$1,!0),e.addEventListener("blur",Z1,!1),typeof PointerEvent<"u"&&(t.addEventListener("pointerdown",Eu,!0),t.addEventListener("pointermove",Eu,!0),t.addEventListener("pointerup",Eu,!0)),e.addEventListener("beforeunload",()=>{q1(n)},{once:!0}),wh.set(e,{focus:i})}const q1=(n,e)=>{const t=ja(n),i=oa(n);e&&i.removeEventListener("DOMContentLoaded",e),wh.has(t)&&(t.HTMLElement.prototype.focus=wh.get(t).focus,i.removeEventListener("keydown",Tp,!0),i.removeEventListener("keyup",Tp,!0),i.removeEventListener("click",G1,!0),t.removeEventListener("focus",$1,!0),t.removeEventListener("blur",Z1,!1),typeof PointerEvent<"u"&&(i.removeEventListener("pointerdown",Eu,!0),i.removeEventListener("pointermove",Eu,!0),i.removeEventListener("pointerup",Eu,!0)),wh.delete(t))};function xC(n){const e=oa(n);let t;return e.readyState!=="loading"?hy(n):(t=()=>{hy(n)},e.addEventListener("DOMContentLoaded",t)),()=>q1(n,t)}typeof document<"u"&&xC();function X1(){return Jh!=="pointer"}const wC=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function bC(n,e,t){let i=oa(t?.target);const r=typeof window<"u"?ja(t?.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?ja(t?.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?ja(t?.target).HTMLElement:HTMLElement,u=typeof window<"u"?ja(t?.target).KeyboardEvent:KeyboardEvent;return n=n||i.activeElement instanceof r&&!wC.has(i.activeElement.type)||i.activeElement instanceof s||i.activeElement instanceof o&&i.activeElement.isContentEditable,!(n&&e==="keyboard"&&t instanceof u&&!yC[t.key])}function SC(n,e,t){hy(),me.useEffect(()=>{let i=(r,s)=>{bC(!!t?.isTextInput,r,s)&&n(X1())};return uy.add(i),()=>{uy.delete(i)}},e)}function MC(n){let{isDisabled:e,onFocus:t,onBlur:i,onFocusChange:r}=n;const s=me.useCallback(h=>{if(h.target===h.currentTarget)return i&&i(h),r&&r(!1),!0},[i,r]),o=j1(s),u=me.useCallback(h=>{const d=oa(h.target),p=d?ly(d):ly();h.target===h.currentTarget&&p===U1(h.nativeEvent)&&(t&&t(h),r&&r(!0),o(h))},[r,t,o]);return{focusProps:{onFocus:!e&&(t||r||i)?u:void 0,onBlur:!e&&(i||r)?s:void 0}}}function EC(n){let{isDisabled:e,onBlurWithin:t,onFocusWithin:i,onFocusWithinChange:r}=n,s=me.useRef({isFocusWithin:!1}),{addGlobalListener:o,removeAllGlobalListeners:u}=V1(),h=me.useCallback(g=>{g.currentTarget.contains(g.target)&&s.current.isFocusWithin&&!g.currentTarget.contains(g.relatedTarget)&&(s.current.isFocusWithin=!1,u(),t&&t(g),r&&r(!1))},[t,r,s,u]),d=j1(h),p=me.useCallback(g=>{if(!g.currentTarget.contains(g.target))return;const _=oa(g.target),y=ly(_);if(!s.current.isFocusWithin&&y===U1(g.nativeEvent)){i&&i(g),r&&r(!0),s.current.isFocusWithin=!0,d(g);let w=g.currentTarget;o(_,"focus",b=>{if(s.current.isFocusWithin&&!B1(w,b.target)){let C=new _.defaultView.FocusEvent("blur",{relatedTarget:b.target});gC(C,w);let S=W1(C);h(S)}},{capture:!0})}},[i,r,d,o,h]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:p,onBlur:h}}}let dy=!1,xf=0;function TC(){dy=!0,setTimeout(()=>{dy=!1},50)}function K0(n){n.pointerType==="touch"&&TC()}function LC(){if(!(typeof document>"u"))return xf===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",K0),xf++,()=>{xf--,!(xf>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",K0)}}function CC(n){let{onHoverStart:e,onHoverChange:t,onHoverEnd:i,isDisabled:r}=n,[s,o]=me.useState(!1),u=me.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;me.useEffect(LC,[]);let{addGlobalListener:h,removeAllGlobalListeners:d}=V1(),{hoverProps:p,triggerHoverEnd:g}=me.useMemo(()=>{let _=(b,C)=>{if(u.pointerType=C,r||C==="touch"||u.isHovered||!b.currentTarget.contains(b.target))return;u.isHovered=!0;let S=b.currentTarget;u.target=S,h(oa(b.target),"pointerover",T=>{u.isHovered&&u.target&&!B1(u.target,T.target)&&y(T,T.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:S,pointerType:C}),t&&t(!0),o(!0)},y=(b,C)=>{let S=u.target;u.pointerType="",u.target=null,!(C==="touch"||!u.isHovered||!S)&&(u.isHovered=!1,d(),i&&i({type:"hoverend",target:S,pointerType:C}),t&&t(!1),o(!1))},w={};return typeof PointerEvent<"u"&&(w.onPointerEnter=b=>{dy&&b.pointerType==="mouse"||_(b,b.pointerType)},w.onPointerLeave=b=>{!r&&b.currentTarget.contains(b.target)&&y(b,b.pointerType)}),{hoverProps:w,triggerHoverEnd:y}},[e,t,i,r,u,h,d]);return me.useEffect(()=>{r&&g({currentTarget:u.target},u.pointerType)},[r]),{hoverProps:p,isHovered:s}}function Y1(n={}){let{autoFocus:e=!1,isTextInput:t,within:i}=n,r=me.useRef({isFocused:!1,isFocusVisible:e||X1()}),[s,o]=me.useState(!1),[u,h]=me.useState(()=>r.current.isFocused&&r.current.isFocusVisible),d=me.useCallback(()=>h(r.current.isFocused&&r.current.isFocusVisible),[]),p=me.useCallback(y=>{r.current.isFocused=y,o(y),d()},[d]);SC(y=>{r.current.isFocusVisible=y,d()},[],{isTextInput:t});let{focusProps:g}=MC({isDisabled:i,onFocusChange:p}),{focusWithinProps:_}=EC({isDisabled:!i,onFocusWithinChange:p});return{isFocused:s,isFocusVisible:u,focusProps:i?_:g}}var PC=Object.defineProperty,AC=(n,e,t)=>e in n?PC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Yg=(n,e,t)=>(AC(n,typeof e!="symbol"?e+"":e,t),t);let kC=class{constructor(){Yg(this,"current",this.detect()),Yg(this,"handoffState","pending"),Yg(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},K1=new kC;function J1(n){var e,t;return K1.isServer?null:n?"ownerDocument"in n?n.ownerDocument:"current"in n?(t=(e=n.current)==null?void 0:e.ownerDocument)!=null?t:document:null:document}function Q1(n){typeof queueMicrotask=="function"?queueMicrotask(n):Promise.resolve().then(n).catch(e=>setTimeout(()=>{throw e}))}function eM(){let n=[],e={addEventListener(t,i,r,s){return t.addEventListener(i,r,s),e.add(()=>t.removeEventListener(i,r,s))},requestAnimationFrame(...t){let i=requestAnimationFrame(...t);return e.add(()=>cancelAnimationFrame(i))},nextFrame(...t){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...t))},setTimeout(...t){let i=setTimeout(...t);return e.add(()=>clearTimeout(i))},microTask(...t){let i={current:!0};return Q1(()=>{i.current&&t[0]()}),e.add(()=>{i.current=!1})},style(t,i,r){let s=t.style.getPropertyValue(i);return Object.assign(t.style,{[i]:r}),this.add(()=>{Object.assign(t.style,{[i]:s})})},group(t){let i=eM();return t(i),this.add(()=>i.dispose())},add(t){return n.includes(t)||n.push(t),()=>{let i=n.indexOf(t);if(i>=0)for(let r of n.splice(i,1))r()}},dispose(){for(let t of n.splice(0))t()}};return e}function RC(){let[n]=me.useState(eM);return me.useEffect(()=>()=>n.dispose(),[n]),n}let Iu=(n,e)=>{K1.isServer?me.useEffect(n,e):me.useLayoutEffect(n,e)};function hh(n){let e=me.useRef(n);return Iu(()=>{e.current=n},[n]),e}let Ss=function(n){let e=hh(n);return fi.useCallback((...t)=>e.current(...t),[e])};function IC(n){let e=n.width/2,t=n.height/2;return{top:n.clientY-t,right:n.clientX+e,bottom:n.clientY+t,left:n.clientX-e}}function DC(n,e){return!(!n||!e||n.right<e.left||n.left>e.right||n.bottom<e.top||n.top>e.bottom)}function NC({disabled:n=!1}={}){let e=me.useRef(null),[t,i]=me.useState(!1),r=RC(),s=Ss(()=>{e.current=null,i(!1),r.dispose()}),o=Ss(u=>{if(r.dispose(),e.current===null){e.current=u.currentTarget,i(!0);{let h=J1(u.currentTarget);r.addEventListener(h,"pointerup",s,!1),r.addEventListener(h,"pointermove",d=>{if(e.current){let p=IC(d);i(DC(p,e.current.getBoundingClientRect()))}},!1),r.addEventListener(h,"pointercancel",s,!1)}}});return{pressed:t,pressProps:n?{}:{onPointerDown:o,onPointerUp:s,onClick:s}}}function J0(...n){return Array.from(new Set(n.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function qa(n,e,...t){if(n in e){let r=e[n];return typeof r=="function"?r(...t):r}let i=new Error(`Tried to handle "${n}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,qa),i}var fy=(n=>(n[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n))(fy||{}),OC=(n=>(n[n.Unmount=0]="Unmount",n[n.Hidden=1]="Hidden",n))(OC||{});function Wu(){let n=FC();return me.useCallback(e=>zC({mergeRefs:n,...e}),[n])}function zC({ourProps:n,theirProps:e,slot:t,defaultTag:i,features:r,visible:s=!0,name:o,mergeRefs:u}){u=u??BC;let h=tM(e,n);if(s)return wf(h,t,i,o,u);let d=r??0;if(d&2){let{static:p=!1,...g}=h;if(p)return wf(g,t,i,o,u)}if(d&1){let{unmount:p=!0,...g}=h;return qa(p?0:1,{0(){return null},1(){return wf({...g,hidden:!0,style:{display:"none"}},t,i,o,u)}})}return wf(h,t,i,o,u)}function wf(n,e={},t,i,r){let{as:s=t,children:o,refName:u="ref",...h}=Kg(n,["unmount","static"]),d=n.ref!==void 0?{[u]:n.ref}:{},p=typeof o=="function"?o(e):o;"className"in h&&h.className&&typeof h.className=="function"&&(h.className=h.className(e)),h["aria-labelledby"]&&h["aria-labelledby"]===h.id&&(h["aria-labelledby"]=void 0);let g={};if(e){let _=!1,y=[];for(let[w,b]of Object.entries(e))typeof b=="boolean"&&(_=!0),b===!0&&y.push(w.replace(/([A-Z])/g,C=>`-${C.toLowerCase()}`));if(_){g["data-headlessui-state"]=y.join(" ");for(let w of y)g[`data-${w}`]=""}}if(s===me.Fragment&&(Object.keys(Zl(h)).length>0||Object.keys(Zl(g)).length>0))if(!me.isValidElement(p)||Array.isArray(p)&&p.length>1){if(Object.keys(Zl(h)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Zl(h)).concat(Object.keys(Zl(g))).map(_=>`  - ${_}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(_=>`  - ${_}`).join(`
`)].join(`
`))}else{let _=p.props,y=_?.className,w=typeof y=="function"?(...S)=>J0(y(...S),h.className):J0(y,h.className),b=w?{className:w}:{},C=tM(p.props,Zl(Kg(h,["ref"])));for(let S in g)S in C&&delete g[S];return me.cloneElement(p,Object.assign({},C,g,d,{ref:r(UC(p),d.ref)},b))}return me.createElement(s,Object.assign({},Kg(h,["ref"]),s!==me.Fragment&&d,s!==me.Fragment&&g),p)}function FC(){let n=me.useRef([]),e=me.useCallback(t=>{for(let i of n.current)i!=null&&(typeof i=="function"?i(t):i.current=t)},[]);return(...t)=>{if(!t.every(i=>i==null))return n.current=t,e}}function BC(...n){return n.every(e=>e==null)?void 0:e=>{for(let t of n)t!=null&&(typeof t=="function"?t(e):t.current=e)}}function tM(...n){if(n.length===0)return{};if(n.length===1)return n[0];let e={},t={};for(let i of n)for(let r in i)r.startsWith("on")&&typeof i[r]=="function"?(t[r]!=null||(t[r]=[]),t[r].push(i[r])):e[r]=i[r];if(e.disabled||e["aria-disabled"])for(let i in t)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(i)&&(t[i]=[r=>{var s;return(s=r?.preventDefault)==null?void 0:s.call(r)}]);for(let i in t)Object.assign(e,{[i](r,...s){let o=t[i];for(let u of o){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;u(r,...s)}}});return e}function nM(...n){if(n.length===0)return{};if(n.length===1)return n[0];let e={},t={};for(let i of n)for(let r in i)r.startsWith("on")&&typeof i[r]=="function"?(t[r]!=null||(t[r]=[]),t[r].push(i[r])):e[r]=i[r];for(let i in t)Object.assign(e,{[i](...r){let s=t[i];for(let o of s)o?.(...r)}});return e}function ju(n){var e;return Object.assign(me.forwardRef(n),{displayName:(e=n.displayName)!=null?e:n.name})}function Zl(n){let e=Object.assign({},n);for(let t in e)e[t]===void 0&&delete e[t];return e}function Kg(n,e=[]){let t=Object.assign({},n);for(let i of e)i in t&&delete t[i];return t}function UC(n){return fi.version.split(".")[0]>="19"?n.props.ref:n.ref}let HC="span";var iM=(n=>(n[n.None=1]="None",n[n.Focusable=2]="Focusable",n[n.Hidden=4]="Hidden",n))(iM||{});function VC(n,e){var t;let{features:i=1,...r}=n,s={ref:e,"aria-hidden":(i&2)===2?!0:(t=r["aria-hidden"])!=null?t:void 0,hidden:(i&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(i&4)===4&&(i&2)!==2&&{display:"none"}}};return Wu()({ourProps:s,theirProps:r,slot:{},defaultTag:HC,name:"Hidden"})}let rM=ju(VC),WC=Symbol();function Qh(...n){let e=me.useRef(n);me.useEffect(()=>{e.current=n},[n]);let t=Ss(i=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(i):r.current=i)});return n.every(i=>i==null||i?.[WC])?void 0:t}var Kr=(n=>(n.Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.Delete="Delete",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab",n))(Kr||{});let jC=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(n=>`${n}:not([tabindex='-1'])`).join(","),GC=["[data-autofocus]"].map(n=>`${n}:not([tabindex='-1'])`).join(",");var Jr=(n=>(n[n.First=1]="First",n[n.Previous=2]="Previous",n[n.Next=4]="Next",n[n.Last=8]="Last",n[n.WrapAround=16]="WrapAround",n[n.NoScroll=32]="NoScroll",n[n.AutoFocus=64]="AutoFocus",n))(Jr||{}),dh=(n=>(n[n.Error=0]="Error",n[n.Overflow=1]="Overflow",n[n.Success=2]="Success",n[n.Underflow=3]="Underflow",n))(dh||{}),$C=(n=>(n[n.Previous=-1]="Previous",n[n.Next=1]="Next",n))($C||{});function ZC(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(jC)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}function qC(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(GC)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}var XC=(n=>(n[n.Strict=0]="Strict",n[n.Loose=1]="Loose",n))(XC||{}),YC=(n=>(n[n.Keyboard=0]="Keyboard",n[n.Mouse=1]="Mouse",n))(YC||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",n=>{n.metaKey||n.altKey||n.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",n=>{n.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:n.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let KC=["textarea","input"].join(",");function JC(n){var e,t;return(t=(e=n?.matches)==null?void 0:e.call(n,KC))!=null?t:!1}function wu(n,e=t=>t){return n.slice().sort((t,i)=>{let r=e(t),s=e(i);if(r===null||s===null)return 0;let o=r.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ql(n,e,{sorted:t=!0,relativeTo:i=null,skipElements:r=[]}={}){let s=Array.isArray(n)?n.length>0?n[0].ownerDocument:document:n.ownerDocument,o=Array.isArray(n)?t?wu(n):n:e&64?qC(n):ZC(n);r.length>0&&o.length>1&&(o=o.filter(y=>!r.some(w=>w!=null&&"current"in w?w?.current===y:w===y))),i=i??s.activeElement;let u=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(i))-1;if(e&4)return Math.max(0,o.indexOf(i))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=e&32?{preventScroll:!0}:{},p=0,g=o.length,_;do{if(p>=g||p+g<=0)return 0;let y=h+p;if(e&16)y=(y+g)%g;else{if(y<0)return 3;if(y>=g)return 1}_=o[y],_?.focus(d),p+=u}while(_!==s.activeElement);return e&6&&JC(_)&&_.select(),2}function QC(n,e){return me.useMemo(()=>{var t;if(n.type)return n.type;let i=(t=n.as)!=null?t:"button";if(typeof i=="string"&&i.toLowerCase()==="button"||e?.tagName==="BUTTON"&&!e.hasAttribute("type"))return"button"},[n.type,n.as,e])}function eP(){let n=me.useRef(!1);return Iu(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function tP({onFocus:n}){let[e,t]=me.useState(!0),i=eP();return e?fi.createElement(rM,{as:"button",type:"button",features:iM.Focusable,onFocus:r=>{r.preventDefault();let s,o=50;function u(){if(o--<=0){s&&cancelAnimationFrame(s);return}if(n()){if(cancelAnimationFrame(s),!i.current)return;t(!1);return}s=requestAnimationFrame(u)}s=requestAnimationFrame(u)}}):null}const sM=me.createContext(null);function nP(){return{groups:new Map,get(n,e){var t;let i=this.groups.get(n);i||(i=new Map,this.groups.set(n,i));let r=(t=i.get(e))!=null?t:0;i.set(e,r+1);let s=Array.from(i.keys()).indexOf(e);function o(){let u=i.get(e);u>1?i.set(e,u-1):i.delete(e)}return[s,o]}}}function iP({children:n}){let e=me.useRef(nP());return me.createElement(sM.Provider,{value:e},n)}function oM(n){let e=me.useContext(sM);if(!e)throw new Error("You must wrap your component in a <StableCollection>");let t=me.useId(),[i,r]=e.current.get(n,t);return me.useEffect(()=>r,[]),i}var rP=(n=>(n[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n))(rP||{}),sP=(n=>(n[n.Less=-1]="Less",n[n.Equal=0]="Equal",n[n.Greater=1]="Greater",n))(sP||{}),oP=(n=>(n[n.SetSelectedIndex=0]="SetSelectedIndex",n[n.RegisterTab=1]="RegisterTab",n[n.UnregisterTab=2]="UnregisterTab",n[n.RegisterPanel=3]="RegisterPanel",n[n.UnregisterPanel=4]="UnregisterPanel",n))(oP||{});let aP={0(n,e){var t;let i=wu(n.tabs,p=>p.current),r=wu(n.panels,p=>p.current),s=i.filter(p=>{var g;return!((g=p.current)!=null&&g.hasAttribute("disabled"))}),o={...n,tabs:i,panels:r};if(e.index<0||e.index>i.length-1){let p=qa(Math.sign(e.index-n.selectedIndex),{[-1]:()=>1,0:()=>qa(Math.sign(e.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(s.length===0)return o;let g=qa(p,{0:()=>i.indexOf(s[0]),1:()=>i.indexOf(s[s.length-1])});return{...o,selectedIndex:g===-1?n.selectedIndex:g}}let u=i.slice(0,e.index),h=[...i.slice(e.index),...u].find(p=>s.includes(p));if(!h)return o;let d=(t=i.indexOf(h))!=null?t:n.selectedIndex;return d===-1&&(d=n.selectedIndex),{...o,selectedIndex:d}},1(n,e){if(n.tabs.includes(e.tab))return n;let t=n.tabs[n.selectedIndex],i=wu([...n.tabs,e.tab],s=>s.current),r=n.selectedIndex;return n.info.current.isControlled||(r=i.indexOf(t),r===-1&&(r=n.selectedIndex)),{...n,tabs:i,selectedIndex:r}},2(n,e){return{...n,tabs:n.tabs.filter(t=>t!==e.tab)}},3(n,e){return n.panels.includes(e.panel)?n:{...n,panels:wu([...n.panels,e.panel],t=>t.current)}},4(n,e){return{...n,panels:n.panels.filter(t=>t!==e.panel)}}},nv=me.createContext(null);nv.displayName="TabsDataContext";function Du(n){let e=me.useContext(nv);if(e===null){let t=new Error(`<${n} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Du),t}return e}let iv=me.createContext(null);iv.displayName="TabsActionsContext";function rv(n){let e=me.useContext(iv);if(e===null){let t=new Error(`<${n} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,rv),t}return e}function lP(n,e){return qa(e.type,aP,n,e)}let uP="div";function cP(n,e){let{defaultIndex:t=0,vertical:i=!1,manual:r=!1,onChange:s,selectedIndex:o=null,...u}=n;const h=i?"vertical":"horizontal",d=r?"manual":"auto";let p=o!==null,g=hh({isControlled:p}),_=Qh(e),[y,w]=me.useReducer(lP,{info:g,selectedIndex:o??t,tabs:[],panels:[]}),b=me.useMemo(()=>({selectedIndex:y.selectedIndex}),[y.selectedIndex]),C=hh(s||(()=>{})),S=hh(y.tabs),T=me.useMemo(()=>({orientation:h,activation:d,...y}),[h,d,y]),R=Ss(j=>(w({type:1,tab:j}),()=>w({type:2,tab:j}))),F=Ss(j=>(w({type:3,panel:j}),()=>w({type:4,panel:j}))),k=Ss(j=>{z.current!==j&&C.current(j),p||w({type:0,index:j})}),z=hh(p?n.selectedIndex:y.selectedIndex),N=me.useMemo(()=>({registerTab:R,registerPanel:F,change:k}),[]);Iu(()=>{w({type:0,index:o??t})},[o]),Iu(()=>{if(z.current===void 0||y.tabs.length<=0)return;let j=wu(y.tabs,U=>U.current);j.some((U,K)=>y.tabs[K]!==U)&&k(j.indexOf(y.tabs[z.current]))});let I={ref:_},W=Wu();return fi.createElement(iP,null,fi.createElement(iv.Provider,{value:N},fi.createElement(nv.Provider,{value:T},T.tabs.length<=0&&fi.createElement(tP,{onFocus:()=>{var j,U;for(let K of S.current)if(((j=K.current)==null?void 0:j.tabIndex)===0)return(U=K.current)==null||U.focus(),!0;return!1}}),W({ourProps:I,theirProps:u,slot:b,defaultTag:uP,name:"Tabs"}))))}let hP="div";function dP(n,e){let{orientation:t,selectedIndex:i}=Du("Tab.List"),r=Qh(e),s=me.useMemo(()=>({selectedIndex:i}),[i]),o=n,u={ref:r,role:"tablist","aria-orientation":t};return Wu()({ourProps:u,theirProps:o,slot:s,defaultTag:hP,name:"Tabs.List"})}let fP="button";function pP(n,e){var t,i;let r=me.useId(),{id:s=`headlessui-tabs-tab-${r}`,disabled:o=!1,autoFocus:u=!1,...h}=n,{orientation:d,activation:p,selectedIndex:g,tabs:_,panels:y}=Du("Tab"),w=rv("Tab"),b=Du("Tab"),[C,S]=me.useState(null),T=me.useRef(null),R=Qh(T,e,S);Iu(()=>w.registerTab(T),[w,T]);let F=oM("tabs"),k=_.indexOf(T);k===-1&&(k=F);let z=k===g,N=Ss(O=>{var G;let se=O();if(se===dh.Success&&p==="auto"){let D=(G=J1(T))==null?void 0:G.activeElement,fe=b.tabs.findIndex(ve=>ve.current===D);fe!==-1&&w.change(fe)}return se}),I=Ss(O=>{let G=_.map(se=>se.current).filter(Boolean);if(O.key===Kr.Space||O.key===Kr.Enter){O.preventDefault(),O.stopPropagation(),w.change(k);return}switch(O.key){case Kr.Home:case Kr.PageUp:return O.preventDefault(),O.stopPropagation(),N(()=>ql(G,Jr.First));case Kr.End:case Kr.PageDown:return O.preventDefault(),O.stopPropagation(),N(()=>ql(G,Jr.Last))}if(N(()=>qa(d,{vertical(){return O.key===Kr.ArrowUp?ql(G,Jr.Previous|Jr.WrapAround):O.key===Kr.ArrowDown?ql(G,Jr.Next|Jr.WrapAround):dh.Error},horizontal(){return O.key===Kr.ArrowLeft?ql(G,Jr.Previous|Jr.WrapAround):O.key===Kr.ArrowRight?ql(G,Jr.Next|Jr.WrapAround):dh.Error}}))===dh.Success)return O.preventDefault()}),W=me.useRef(!1),j=Ss(()=>{var O;W.current||(W.current=!0,(O=T.current)==null||O.focus({preventScroll:!0}),w.change(k),Q1(()=>{W.current=!1}))}),U=Ss(O=>{O.preventDefault()}),{isFocusVisible:K,focusProps:Y}=Y1({autoFocus:u}),{isHovered:Q,hoverProps:ne}=CC({isDisabled:o}),{pressed:oe,pressProps:ae}=NC({disabled:o}),ee=me.useMemo(()=>({selected:z,hover:Q,active:oe,focus:K,autofocus:u,disabled:o}),[z,Q,K,oe,u,o]),pe=nM({ref:R,onKeyDown:I,onMouseDown:U,onClick:j,id:s,role:"tab",type:QC(n,C),"aria-controls":(i=(t=y[k])==null?void 0:t.current)==null?void 0:i.id,"aria-selected":z,tabIndex:z?0:-1,disabled:o||void 0,autoFocus:u},Y,ne,ae);return Wu()({ourProps:pe,theirProps:h,slot:ee,defaultTag:fP,name:"Tabs.Tab"})}let mP="div";function gP(n,e){let{selectedIndex:t}=Du("Tab.Panels"),i=Qh(e),r=me.useMemo(()=>({selectedIndex:t}),[t]),s=n,o={ref:i};return Wu()({ourProps:o,theirProps:s,slot:r,defaultTag:mP,name:"Tabs.Panels"})}let _P="div",yP=fy.RenderStrategy|fy.Static;function vP(n,e){var t,i,r,s;let o=me.useId(),{id:u=`headlessui-tabs-panel-${o}`,tabIndex:h=0,...d}=n,{selectedIndex:p,tabs:g,panels:_}=Du("Tab.Panel"),y=rv("Tab.Panel"),w=me.useRef(null),b=Qh(w,e);Iu(()=>y.registerPanel(w),[y,w]);let C=oM("panels"),S=_.indexOf(w);S===-1&&(S=C);let T=S===p,{isFocusVisible:R,focusProps:F}=Y1(),k=me.useMemo(()=>({selected:T,focus:R}),[T,R]),z=nM({ref:b,id:u,role:"tabpanel","aria-labelledby":(i=(t=g[S])==null?void 0:t.current)==null?void 0:i.id,tabIndex:T?h:-1},F),N=Wu();return!T&&((r=d.unmount)==null||r)&&!((s=d.static)!=null&&s)?fi.createElement(rM,{"aria-hidden":"true",...z}):N({ourProps:z,theirProps:d,slot:k,defaultTag:_P,features:yP,visible:T,name:"Tabs.Panel"})}let xP=ju(pP),wP=ju(cP),bP=ju(dP),SP=ju(gP),MP=ju(vP),Da=Object.assign(xP,{Group:wP,List:bP,Panels:SP,Panel:MP});function aM(n,e){const t=me.useRef(e);me.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}const EP=1;function TP(n){return Object.freeze({__version:EP,map:n})}function sv(n,e){return Object.freeze({...n,...e})}const lM=me.createContext(null),uM=lM.Provider;function $p(){const n=me.useContext(lM);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function cM(n){function e(t,i){const{instance:r,context:s}=n(t).current;return me.useImperativeHandle(i,()=>r),t.children==null?null:fi.createElement(uM,{value:s},t.children)}return me.forwardRef(e)}function LP(n){function e(t,i){const[r,s]=me.useState(!1),{instance:o}=n(t,s).current;me.useImperativeHandle(i,()=>o),me.useEffect(function(){r&&o.update()},[o,r,t.children]);const u=o._contentNode;return u?mC.createPortal(t.children,u):null}return me.forwardRef(e)}function CP(n){function e(t,i){const{instance:r}=n(t).current;return me.useImperativeHandle(i,()=>r),null}return me.forwardRef(e)}function ov(n,e){const t=me.useRef();me.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function Zp(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function PP(n,e){return function(i,r){const s=$p(),o=n(Zp(i,s),s);return aM(s.map,i.attribution),ov(o.current,i.eventHandlers),e(o.current,s,i,r),o}}var fh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var AP=fh.exports,Q0;function kP(){return Q0||(Q0=1,(function(n,e){(function(t,i){i(e)})(AP,(function(t){var i="1.9.4";function r(l){var f,v,M,A;for(v=1,M=arguments.length;v<M;v++){A=arguments[v];for(f in A)l[f]=A[f]}return l}var s=Object.create||(function(){function l(){}return function(f){return l.prototype=f,new l}})();function o(l,f){var v=Array.prototype.slice;if(l.bind)return l.bind.apply(l,v.call(arguments,1));var M=v.call(arguments,2);return function(){return l.apply(f,M.length?M.concat(v.call(arguments)):arguments)}}var u=0;function h(l){return"_leaflet_id"in l||(l._leaflet_id=++u),l._leaflet_id}function d(l,f,v){var M,A,H,re;return re=function(){M=!1,A&&(H.apply(v,A),A=!1)},H=function(){M?A=arguments:(l.apply(v,arguments),setTimeout(re,f),M=!0)},H}function p(l,f,v){var M=f[1],A=f[0],H=M-A;return l===M&&v?l:((l-A)%H+H)%H+A}function g(){return!1}function _(l,f){if(f===!1)return l;var v=Math.pow(10,f===void 0?6:f);return Math.round(l*v)/v}function y(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function w(l){return y(l).split(/\s+/)}function b(l,f){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?s(l.options):{});for(var v in f)l.options[v]=f[v];return l.options}function C(l,f,v){var M=[];for(var A in l)M.push(encodeURIComponent(v?A.toUpperCase():A)+"="+encodeURIComponent(l[A]));return(!f||f.indexOf("?")===-1?"?":"&")+M.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function T(l,f){return l.replace(S,function(v,M){var A=f[M];if(A===void 0)throw new Error("No value provided for variable "+v);return typeof A=="function"&&(A=A(f)),A})}var R=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function F(l,f){for(var v=0;v<l.length;v++)if(l[v]===f)return v;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var N=0;function I(l){var f=+new Date,v=Math.max(0,16-(f-N));return N=f+v,window.setTimeout(l,v)}var W=window.requestAnimationFrame||z("RequestAnimationFrame")||I,j=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function U(l,f,v){if(v&&W===I)l.call(f);else return W.call(window,o(l,f))}function K(l){l&&j.call(window,l)}var Y={__proto__:null,extend:r,create:s,bind:o,get lastId(){return u},stamp:h,throttle:d,wrapNum:p,falseFn:g,formatNum:_,trim:y,splitWords:w,setOptions:b,getParamString:C,template:T,isArray:R,indexOf:F,emptyImageUrl:k,requestFn:W,cancelFn:j,requestAnimFrame:U,cancelAnimFrame:K};function Q(){}Q.extend=function(l){var f=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=f.__super__=this.prototype,M=s(v);M.constructor=f,f.prototype=M;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(f[A]=this[A]);return l.statics&&r(f,l.statics),l.includes&&(ne(l.includes),r.apply(null,[M].concat(l.includes))),r(M,l),delete M.statics,delete M.includes,M.options&&(M.options=v.options?s(v.options):{},r(M.options,l.options)),M._initHooks=[],M.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var H=0,re=M._initHooks.length;H<re;H++)M._initHooks[H].call(this)}},f},Q.include=function(l){var f=this.prototype.options;return r(this.prototype,l),l.options&&(this.prototype.options=f,this.mergeOptions(l.options)),this},Q.mergeOptions=function(l){return r(this.prototype.options,l),this},Q.addInitHook=function(l){var f=Array.prototype.slice.call(arguments,1),v=typeof l=="function"?l:function(){this[l].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function ne(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=R(l)?l:[l];for(var f=0;f<l.length;f++)l[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var oe={on:function(l,f,v){if(typeof l=="object")for(var M in l)this._on(M,l[M],f);else{l=w(l);for(var A=0,H=l.length;A<H;A++)this._on(l[A],f,v)}return this},off:function(l,f,v){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var M in l)this._off(M,l[M],f);else{l=w(l);for(var A=arguments.length===1,H=0,re=l.length;H<re;H++)A?this._off(l[H]):this._off(l[H],f,v)}return this},_on:function(l,f,v,M){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(l,f,v)===!1){v===this&&(v=void 0);var A={fn:f,ctx:v};M&&(A.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(A)}},_off:function(l,f,v){var M,A,H;if(this._events&&(M=this._events[l],!!M)){if(arguments.length===1){if(this._firingCount)for(A=0,H=M.length;A<H;A++)M[A].fn=g;delete this._events[l];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var re=this._listens(l,f,v);if(re!==!1){var _e=M[re];this._firingCount&&(_e.fn=g,this._events[l]=M=M.slice()),M.splice(re,1)}}},fire:function(l,f,v){if(!this.listens(l,v))return this;var M=r({},f,{type:l,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var A=this._events[l];if(A){this._firingCount=this._firingCount+1||1;for(var H=0,re=A.length;H<re;H++){var _e=A[H],Me=_e.fn;_e.once&&this.off(l,Me,_e.ctx),Me.call(_e.ctx||this,M)}this._firingCount--}}return v&&this._propagateEvent(M),this},listens:function(l,f,v,M){typeof l!="string"&&console.warn('"string" type argument expected');var A=f;typeof f!="function"&&(M=!!f,A=void 0,v=void 0);var H=this._events&&this._events[l];if(H&&H.length&&this._listens(l,A,v)!==!1)return!0;if(M){for(var re in this._eventParents)if(this._eventParents[re].listens(l,f,v,M))return!0}return!1},_listens:function(l,f,v){if(!this._events)return!1;var M=this._events[l]||[];if(!f)return!!M.length;v===this&&(v=void 0);for(var A=0,H=M.length;A<H;A++)if(M[A].fn===f&&M[A].ctx===v)return A;return!1},once:function(l,f,v){if(typeof l=="object")for(var M in l)this._on(M,l[M],f,!0);else{l=w(l);for(var A=0,H=l.length;A<H;A++)this._on(l[A],f,v,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[h(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[h(l)],this},_propagateEvent:function(l){for(var f in this._eventParents)this._eventParents[f].fire(l.type,r({layer:l.target,propagatedFrom:l.target},l),!0)}};oe.addEventListener=oe.on,oe.removeEventListener=oe.clearAllEventListeners=oe.off,oe.addOneTimeEventListener=oe.once,oe.fireEvent=oe.fire,oe.hasEventListeners=oe.listens;var ae=Q.extend(oe);function ee(l,f,v){this.x=v?Math.round(l):l,this.y=v?Math.round(f):f}var pe=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(l){return this.clone()._add(O(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(O(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new ee(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new ee(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(l){l=O(l);var f=l.x-this.x,v=l.y-this.y;return Math.sqrt(f*f+v*v)},equals:function(l){return l=O(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=O(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function O(l,f,v){return l instanceof ee?l:R(l)?new ee(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new ee(l.x,l.y):new ee(l,f,v)}function G(l,f){if(l)for(var v=f?[l,f]:l,M=0,A=v.length;M<A;M++)this.extend(v[M])}G.prototype={extend:function(l){var f,v;if(!l)return this;if(l instanceof ee||typeof l[0]=="number"||"x"in l)f=v=O(l);else if(l=se(l),f=l.min,v=l.max,!f||!v)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=v.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(l){return O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return O(this.min.x,this.max.y)},getTopRight:function(){return O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var f,v;return typeof l[0]=="number"||l instanceof ee?l=O(l):l=se(l),l instanceof G?(f=l.min,v=l.max):f=v=l,f.x>=this.min.x&&v.x<=this.max.x&&f.y>=this.min.y&&v.y<=this.max.y},intersects:function(l){l=se(l);var f=this.min,v=this.max,M=l.min,A=l.max,H=A.x>=f.x&&M.x<=v.x,re=A.y>=f.y&&M.y<=v.y;return H&&re},overlaps:function(l){l=se(l);var f=this.min,v=this.max,M=l.min,A=l.max,H=A.x>f.x&&M.x<v.x,re=A.y>f.y&&M.y<v.y;return H&&re},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var f=this.min,v=this.max,M=Math.abs(f.x-v.x)*l,A=Math.abs(f.y-v.y)*l;return se(O(f.x-M,f.y-A),O(v.x+M,v.y+A))},equals:function(l){return l?(l=se(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function se(l,f){return!l||l instanceof G?l:new G(l,f)}function D(l,f){if(l)for(var v=f?[l,f]:l,M=0,A=v.length;M<A;M++)this.extend(v[M])}D.prototype={extend:function(l){var f=this._southWest,v=this._northEast,M,A;if(l instanceof ve)M=l,A=l;else if(l instanceof D){if(M=l._southWest,A=l._northEast,!M||!A)return this}else return l?this.extend(te(l)||fe(l)):this;return!f&&!v?(this._southWest=new ve(M.lat,M.lng),this._northEast=new ve(A.lat,A.lng)):(f.lat=Math.min(M.lat,f.lat),f.lng=Math.min(M.lng,f.lng),v.lat=Math.max(A.lat,v.lat),v.lng=Math.max(A.lng,v.lng)),this},pad:function(l){var f=this._southWest,v=this._northEast,M=Math.abs(f.lat-v.lat)*l,A=Math.abs(f.lng-v.lng)*l;return new D(new ve(f.lat-M,f.lng-A),new ve(v.lat+M,v.lng+A))},getCenter:function(){return new ve((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ve(this.getNorth(),this.getWest())},getSouthEast:function(){return new ve(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof ve||"lat"in l?l=te(l):l=fe(l);var f=this._southWest,v=this._northEast,M,A;return l instanceof D?(M=l.getSouthWest(),A=l.getNorthEast()):M=A=l,M.lat>=f.lat&&A.lat<=v.lat&&M.lng>=f.lng&&A.lng<=v.lng},intersects:function(l){l=fe(l);var f=this._southWest,v=this._northEast,M=l.getSouthWest(),A=l.getNorthEast(),H=A.lat>=f.lat&&M.lat<=v.lat,re=A.lng>=f.lng&&M.lng<=v.lng;return H&&re},overlaps:function(l){l=fe(l);var f=this._southWest,v=this._northEast,M=l.getSouthWest(),A=l.getNorthEast(),H=A.lat>f.lat&&M.lat<v.lat,re=A.lng>f.lng&&M.lng<v.lng;return H&&re},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,f){return l?(l=fe(l),this._southWest.equals(l.getSouthWest(),f)&&this._northEast.equals(l.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(l,f){return l instanceof D?l:new D(l,f)}function ve(l,f,v){if(isNaN(l)||isNaN(f))throw new Error("Invalid LatLng object: ("+l+", "+f+")");this.lat=+l,this.lng=+f,v!==void 0&&(this.alt=+v)}ve.prototype={equals:function(l,f){if(!l)return!1;l=te(l);var v=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return v<=(f===void 0?1e-9:f)},toString:function(l){return"LatLng("+_(this.lat,l)+", "+_(this.lng,l)+")"},distanceTo:function(l){return Pe.distance(this,te(l))},wrap:function(){return Pe.wrapLatLng(this)},toBounds:function(l){var f=180*l/40075017,v=f/Math.cos(Math.PI/180*this.lat);return fe([this.lat-f,this.lng-v],[this.lat+f,this.lng+v])},clone:function(){return new ve(this.lat,this.lng,this.alt)}};function te(l,f,v){return l instanceof ve?l:R(l)&&typeof l[0]!="object"?l.length===3?new ve(l[0],l[1],l[2]):l.length===2?new ve(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new ve(l.lat,"lng"in l?l.lng:l.lon,l.alt):f===void 0?null:new ve(l,f,v)}var Ne={latLngToPoint:function(l,f){var v=this.projection.project(l),M=this.scale(f);return this.transformation._transform(v,M)},pointToLatLng:function(l,f){var v=this.scale(f),M=this.transformation.untransform(l,v);return this.projection.unproject(M)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var f=this.projection.bounds,v=this.scale(l),M=this.transformation.transform(f.min,v),A=this.transformation.transform(f.max,v);return new G(M,A)},infinite:!1,wrapLatLng:function(l){var f=this.wrapLng?p(l.lng,this.wrapLng,!0):l.lng,v=this.wrapLat?p(l.lat,this.wrapLat,!0):l.lat,M=l.alt;return new ve(v,f,M)},wrapLatLngBounds:function(l){var f=l.getCenter(),v=this.wrapLatLng(f),M=f.lat-v.lat,A=f.lng-v.lng;if(M===0&&A===0)return l;var H=l.getSouthWest(),re=l.getNorthEast(),_e=new ve(H.lat-M,H.lng-A),Me=new ve(re.lat-M,re.lng-A);return new D(_e,Me)}},Pe=r({},Ne,{wrapLng:[-180,180],R:6371e3,distance:function(l,f){var v=Math.PI/180,M=l.lat*v,A=f.lat*v,H=Math.sin((f.lat-l.lat)*v/2),re=Math.sin((f.lng-l.lng)*v/2),_e=H*H+Math.cos(M)*Math.cos(A)*re*re,Me=2*Math.atan2(Math.sqrt(_e),Math.sqrt(1-_e));return this.R*Me}}),ke=6378137,ze={R:ke,MAX_LATITUDE:85.0511287798,project:function(l){var f=Math.PI/180,v=this.MAX_LATITUDE,M=Math.max(Math.min(v,l.lat),-v),A=Math.sin(M*f);return new ee(this.R*l.lng*f,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(l){var f=180/Math.PI;return new ve((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*f,l.x*f/this.R)},bounds:(function(){var l=ke*Math.PI;return new G([-l,-l],[l,l])})()};function We(l,f,v,M){if(R(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=f,this._c=v,this._d=M}We.prototype={transform:function(l,f){return this._transform(l.clone(),f)},_transform:function(l,f){return f=f||1,l.x=f*(this._a*l.x+this._b),l.y=f*(this._c*l.y+this._d),l},untransform:function(l,f){return f=f||1,new ee((l.x/f-this._b)/this._a,(l.y/f-this._d)/this._c)}};function be(l,f,v,M){return new We(l,f,v,M)}var Re=r({},Pe,{code:"EPSG:3857",projection:ze,transformation:(function(){var l=.5/(Math.PI*ze.R);return be(l,.5,-l,.5)})()}),De=r({},Re,{code:"EPSG:900913"});function je(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Ie(l,f){var v="",M,A,H,re,_e,Me;for(M=0,H=l.length;M<H;M++){for(_e=l[M],A=0,re=_e.length;A<re;A++)Me=_e[A],v+=(A?"L":"M")+Me.x+" "+Me.y;v+=f?ce.svg?"z":"x":""}return v||"M0 0"}var X=document.documentElement.style,$="ActiveXObject"in window,we=$&&!document.addEventListener,Ae="msLaunchUri"in navigator&&!("documentMode"in document),$e=Z("webkit"),Ke=Z("android"),rt=Z("android 2")||Z("android 3"),Je=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=Ke&&Z("Google")&&Je<537&&!("AudioNode"in window),he=!!window.opera,q=!Ae&&Z("chrome"),Le=Z("gecko")&&!$e&&!he&&!$,Se=!q&&Z("safari"),Fe=Z("phantom"),Xe="OTransition"in X,ut=navigator.platform.indexOf("Win")===0,At=$&&"transition"in X,Ot="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,gn="MozPerspective"in X,le=!window.L_DISABLE_3D&&(At||Ot||gn)&&!Xe&&!Fe,Be=typeof orientation<"u"||Z("mobile"),tt=Be&&$e,Ct=Be&&Ot,Jt=!window.PointerEvent&&window.MSPointerEvent,bn=!!(window.PointerEvent||Jt),En="ontouchstart"in window||!!window.TouchEvent,$i=!window.L_NO_TOUCH&&(En||bn),ns=Be&&he,Xn=Be&&Le,ti=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,vi=(function(){var l=!1;try{var f=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",g,f),window.removeEventListener("testPassiveEventSupport",g,f)}catch{}return l})(),Zi=(function(){return!!document.createElement("canvas").getContext})(),ni=!!(document.createElementNS&&je("svg").createSVGRect),xi=!!ni&&(function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),so=!ni&&(function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var f=l.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}})(),As=navigator.platform.indexOf("Mac")===0,rc=navigator.platform.indexOf("Linux")===0;function Z(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var ce={ie:$,ielt9:we,edge:Ae,webkit:$e,android:Ke,android23:rt,androidStock:st,opera:he,chrome:q,gecko:Le,safari:Se,phantom:Fe,opera12:Xe,win:ut,ie3d:At,webkit3d:Ot,gecko3d:gn,any3d:le,mobile:Be,mobileWebkit:tt,mobileWebkit3d:Ct,msPointer:Jt,pointer:bn,touch:$i,touchNative:En,mobileOpera:ns,mobileGecko:Xn,retina:ti,passiveEvents:vi,canvas:Zi,svg:ni,vml:so,inlineSvg:xi,mac:As,linux:rc},ge=ce.msPointer?"MSPointerDown":"pointerdown",Ce=ce.msPointer?"MSPointerMove":"pointermove",Ve=ce.msPointer?"MSPointerUp":"pointerup",St=ce.msPointer?"MSPointerCancel":"pointercancel",dt={touchstart:ge,touchmove:Ce,touchend:Ve,touchcancel:St},lt={touchstart:Vt,touchmove:Bn,touchend:Bn,touchcancel:Bn},xt={},zt=!1;function kt(l,f,v){return f==="touchstart"&&dr(),lt[f]?(v=lt[f].bind(this,v),l.addEventListener(dt[f],v,!1),v):(console.warn("wrong event specified:",f),g)}function It(l,f,v){if(!dt[f]){console.warn("wrong event specified:",f);return}l.removeEventListener(dt[f],v,!1)}function _t(l){xt[l.pointerId]=l}function hr(l){xt[l.pointerId]&&(xt[l.pointerId]=l)}function tn(l){delete xt[l.pointerId]}function dr(){zt||(document.addEventListener(ge,_t,!0),document.addEventListener(Ce,hr,!0),document.addEventListener(Ve,tn,!0),document.addEventListener(St,tn,!0),zt=!0)}function Bn(l,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var v in xt)f.touches.push(xt[v]);f.changedTouches=[f],l(f)}}function Vt(l,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&_n(f),Bn(l,f)}function fr(l){var f={},v,M;for(M in l)v=l[M],f[M]=v&&v.bind?v.bind(l):v;return l=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var dn=200;function wi(l,f){l.addEventListener("dblclick",f);var v=0,M;function A(H){if(H.detail!==1){M=H.detail;return}if(!(H.pointerType==="mouse"||H.sourceCapabilities&&!H.sourceCapabilities.firesTouchEvents)){var re=Is(H);if(!(re.some(function(Me){return Me instanceof HTMLLabelElement&&Me.attributes.for})&&!re.some(function(Me){return Me instanceof HTMLInputElement||Me instanceof HTMLSelectElement}))){var _e=Date.now();_e-v<=dn?(M++,M===2&&f(fr(H))):M=1,v=_e}}}return l.addEventListener("click",A),{dblclick:f,simDblclick:A}}function fn(l,f){l.removeEventListener("dblclick",f.dblclick),l.removeEventListener("click",f.simDblclick)}var sc=uo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oo=uo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ua=oo==="webkitTransition"||oo==="OTransition"?oo+"End":"transitionend";function qi(l){return typeof l=="string"?document.getElementById(l):l}function ca(l,f){var v=l.style[f]||l.currentStyle&&l.currentStyle[f];if((!v||v==="auto")&&document.defaultView){var M=document.defaultView.getComputedStyle(l,null);v=M?M[f]:null}return v==="auto"?null:v}function Et(l,f,v){var M=document.createElement(l);return M.className=f||"",v&&v.appendChild(M),M}function un(l){var f=l.parentNode;f&&f.removeChild(l)}function cl(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function ao(l){var f=l.parentNode;f&&f.lastChild!==l&&f.appendChild(l)}function Or(l){var f=l.parentNode;f&&f.firstChild!==l&&f.insertBefore(l,f.firstChild)}function lo(l,f){if(l.classList!==void 0)return l.classList.contains(f);var v=hl(l);return v.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(v)}function Mt(l,f){if(l.classList!==void 0)for(var v=w(f),M=0,A=v.length;M<A;M++)l.classList.add(v[M]);else if(!lo(l,f)){var H=hl(l);oc(l,(H?H+" ":"")+f)}}function nn(l,f){l.classList!==void 0?l.classList.remove(f):oc(l,y((" "+hl(l)+" ").replace(" "+f+" "," ")))}function oc(l,f){l.className.baseVal===void 0?l.className=f:l.className.baseVal=f}function hl(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function ii(l,f){"opacity"in l.style?l.style.opacity=f:"filter"in l.style&&hd(l,f)}function hd(l,f){var v=!1,M="DXImageTransform.Microsoft.Alpha";try{v=l.filters.item(M)}catch{if(f===1)return}f=Math.round(f*100),v?(v.Enabled=f!==100,v.Opacity=f):l.style.filter+=" progid:"+M+"(opacity="+f+")"}function uo(l){for(var f=document.documentElement.style,v=0;v<l.length;v++)if(l[v]in f)return l[v];return!1}function Xi(l,f,v){var M=f||new ee(0,0);l.style[sc]=(ce.ie3d?"translate("+M.x+"px,"+M.y+"px)":"translate3d("+M.x+"px,"+M.y+"px,0)")+(v?" scale("+v+")":"")}function Sn(l,f){l._leaflet_pos=f,ce.any3d?Xi(l,f):(l.style.left=f.x+"px",l.style.top=f.y+"px")}function zr(l){return l._leaflet_pos||new ee(0,0)}var Ft,co,dl;if("onselectstart"in document)Ft=function(){vt(window,"selectstart",_n)},co=function(){Xt(window,"selectstart",_n)};else{var ks=uo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ft=function(){if(ks){var l=document.documentElement.style;dl=l[ks],l[ks]="none"}},co=function(){ks&&(document.documentElement.style[ks]=dl,dl=void 0)}}function fl(){vt(window,"dragstart",_n)}function pl(){Xt(window,"dragstart",_n)}var ha,da;function ho(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(Yi(),ha=l,da=l.style.outlineStyle,l.style.outlineStyle="none",vt(window,"keydown",Yi))}function Yi(){ha&&(ha.style.outlineStyle=da,ha=void 0,da=void 0,Xt(window,"keydown",Yi))}function Fr(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function pr(l){var f=l.getBoundingClientRect();return{x:f.width/l.offsetWidth||1,y:f.height/l.offsetHeight||1,boundingClientRect:f}}var fa={__proto__:null,TRANSFORM:sc,TRANSITION:oo,TRANSITION_END:ua,get:qi,getStyle:ca,create:Et,remove:un,empty:cl,toFront:ao,toBack:Or,hasClass:lo,addClass:Mt,removeClass:nn,setClass:oc,getClass:hl,setOpacity:ii,testProp:uo,setTransform:Xi,setPosition:Sn,getPosition:zr,get disableTextSelection(){return Ft},get enableTextSelection(){return co},disableImageDrag:fl,enableImageDrag:pl,preventOutline:ho,restoreOutline:Yi,getSizedParentNode:Fr,getScale:pr};function vt(l,f,v,M){if(f&&typeof f=="object")for(var A in f)lc(l,A,f[A],v);else{f=w(f);for(var H=0,re=f.length;H<re;H++)lc(l,f[H],v,M)}return this}var Rn="_leaflet_events";function Xt(l,f,v,M){if(arguments.length===1)ac(l),delete l[Rn];else if(f&&typeof f=="object")for(var A in f)ml(l,A,f[A],v);else if(f=w(f),arguments.length===2)ac(l,function(_e){return F(f,_e)!==-1});else for(var H=0,re=f.length;H<re;H++)ml(l,f[H],v,M);return this}function ac(l,f){for(var v in l[Rn]){var M=v.split(/\d/)[0];(!f||f(M))&&ml(l,M,null,null,v)}}var Rs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function lc(l,f,v,M){var A=f+h(v)+(M?"_"+h(M):"");if(l[Rn]&&l[Rn][A])return this;var H=function(_e){return v.call(M||l,_e||window.event)},re=H;!ce.touchNative&&ce.pointer&&f.indexOf("touch")===0?H=kt(l,f,H):ce.touch&&f==="dblclick"?H=wi(l,H):"addEventListener"in l?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?l.addEventListener(Rs[f]||f,H,ce.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(H=function(_e){_e=_e||window.event,ga(l,_e)&&re(_e)},l.addEventListener(Rs[f],H,!1)):l.addEventListener(f,re,!1):l.attachEvent("on"+f,H),l[Rn]=l[Rn]||{},l[Rn][A]=H}function ml(l,f,v,M,A){A=A||f+h(v)+(M?"_"+h(M):"");var H=l[Rn]&&l[Rn][A];if(!H)return this;!ce.touchNative&&ce.pointer&&f.indexOf("touch")===0?It(l,f,H):ce.touch&&f==="dblclick"?fn(l,H):"removeEventListener"in l?l.removeEventListener(Rs[f]||f,H,!1):l.detachEvent("on"+f,H),l[Rn][A]=null}function mr(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function gl(l){return lc(l,"wheel",mr),this}function pa(l){return vt(l,"mousedown touchstart dblclick contextmenu",mr),l._leaflet_disable_click=!0,this}function _n(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function Ki(l){return _n(l),mr(l),this}function Is(l){if(l.composedPath)return l.composedPath();for(var f=[],v=l.target;v;)f.push(v),v=v.parentNode;return f}function ma(l,f){if(!f)return new ee(l.clientX,l.clientY);var v=pr(f),M=v.boundingClientRect;return new ee((l.clientX-M.left)/v.x-f.clientLeft,(l.clientY-M.top)/v.y-f.clientTop)}var Em=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function dd(l){return ce.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/Em:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function ga(l,f){var v=f.relatedTarget;if(!v)return!0;try{for(;v&&v!==l;)v=v.parentNode}catch{return!1}return v!==l}var _l={__proto__:null,on:vt,off:Xt,stopPropagation:mr,disableScrollPropagation:gl,disableClickPropagation:pa,preventDefault:_n,stop:Ki,getPropagationPath:Is,getMousePosition:ma,getWheelDelta:dd,isExternalTarget:ga,addListener:vt,removeListener:Xt},yl=ae.extend({run:function(l,f,v,M){this.stop(),this._el=l,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(M||.5,.2),this._startPos=zr(l),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(l){var f=+new Date-this._startTime,v=this._duration*1e3;f<v?this._runFrame(this._easeOut(f/v),l):(this._runFrame(1),this._complete())},_runFrame:function(l,f){var v=this._startPos.add(this._offset.multiplyBy(l));f&&v._round(),Sn(this._el,v),this.fire("step")},_complete:function(){K(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Dt=ae.extend({options:{crs:Re,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,f){f=b(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(te(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=oo&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),vt(this._proxy,ua,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,f,v){if(f=f===void 0?this._zoom:this._limitZoom(f),l=this._limitCenter(te(l),f,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=r({animate:v.animate},v.zoom),v.pan=r({animate:v.animate,duration:v.duration},v.pan));var M=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,f,v.zoom):this._tryAnimatedPan(l,v.pan);if(M)return clearTimeout(this._sizeTimer),this}return this._resetView(l,f,v.pan&&v.pan.noMoveStart),this},setZoom:function(l,f){return this._loaded?this.setView(this.getCenter(),l,{zoom:f}):(this._zoom=l,this)},zoomIn:function(l,f){return l=l||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,f)},zoomOut:function(l,f){return l=l||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,f)},setZoomAround:function(l,f,v){var M=this.getZoomScale(f),A=this.getSize().divideBy(2),H=l instanceof ee?l:this.latLngToContainerPoint(l),re=H.subtract(A).multiplyBy(1-1/M),_e=this.containerPointToLatLng(A.add(re));return this.setView(_e,f,{zoom:v})},_getBoundsCenterZoom:function(l,f){f=f||{},l=l.getBounds?l.getBounds():fe(l);var v=O(f.paddingTopLeft||f.padding||[0,0]),M=O(f.paddingBottomRight||f.padding||[0,0]),A=this.getBoundsZoom(l,!1,v.add(M));if(A=typeof f.maxZoom=="number"?Math.min(f.maxZoom,A):A,A===1/0)return{center:l.getCenter(),zoom:A};var H=M.subtract(v).divideBy(2),re=this.project(l.getSouthWest(),A),_e=this.project(l.getNorthEast(),A),Me=this.unproject(re.add(_e).divideBy(2).add(H),A);return{center:Me,zoom:A}},fitBounds:function(l,f){if(l=fe(l),!l.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(l,f);return this.setView(v.center,v.zoom,f)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,f){return this.setView(l,this._zoom,{pan:f})},panBy:function(l,f){if(l=O(l).round(),f=f||{},!l.x&&!l.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new yl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){Mt(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,v,f.duration||.25,f.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,f,v){if(v=v||{},v.animate===!1||!ce.any3d)return this.setView(l,f,v);this._stop();var M=this.project(this.getCenter()),A=this.project(l),H=this.getSize(),re=this._zoom;l=te(l),f=f===void 0?re:f;var _e=Math.max(H.x,H.y),Me=_e*this.getZoomScale(re,f),Oe=A.distanceTo(M)||1,et=1.42,ft=et*et;function Tt(Gt){var Lo=Gt?-1:1,Bm=Gt?Me:_e,Um=Me*Me-_e*_e+Lo*ft*ft*Oe*Oe,Us=2*Bm*ft*Oe,Hs=Um/Us,Vs=Math.sqrt(Hs*Hs+1)-Hs,Rl=Vs<1e-9?-18:Math.log(Vs);return Rl}function In(Gt){return(Math.exp(Gt)-Math.exp(-Gt))/2}function Pn(Gt){return(Math.exp(Gt)+Math.exp(-Gt))/2}function Mi(Gt){return In(Gt)/Pn(Gt)}var si=Tt(0);function Eo(Gt){return _e*(Pn(si)/Pn(si+et*Gt))}function Pc(Gt){return _e*(Pn(si)*Mi(si+et*Gt)-In(si))/ft}function cs(Gt){return 1-Math.pow(1-Gt,1.5)}var Id=Date.now(),Bs=(Tt(1)-si)/et,vr=v.duration?1e3*v.duration:1e3*Bs*.8;function To(){var Gt=(Date.now()-Id)/vr,Lo=cs(Gt)*Bs;Gt<=1?(this._flyToFrame=U(To,this),this._move(this.unproject(M.add(A.subtract(M).multiplyBy(Pc(Lo)/Oe)),re),this.getScaleZoom(_e/Eo(Lo),re),{flyTo:!0})):this._move(l,f)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),To.call(this),this},flyToBounds:function(l,f){var v=this._getBoundsCenterZoom(l,f);return this.flyTo(v.center,v.zoom,f)},setMaxBounds:function(l){return l=fe(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var f=this.options.minZoom;return this.options.minZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var f=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,f){this._enforcingBounds=!0;var v=this.getCenter(),M=this._limitCenter(v,this._zoom,fe(l));return v.equals(M)||this.panTo(M,f),this._enforcingBounds=!1,this},panInside:function(l,f){f=f||{};var v=O(f.paddingTopLeft||f.padding||[0,0]),M=O(f.paddingBottomRight||f.padding||[0,0]),A=this.project(this.getCenter()),H=this.project(l),re=this.getPixelBounds(),_e=se([re.min.add(v),re.max.subtract(M)]),Me=_e.getSize();if(!_e.contains(H)){this._enforcingBounds=!0;var Oe=H.subtract(_e.getCenter()),et=_e.extend(H).getSize().subtract(Me);A.x+=Oe.x<0?-et.x:et.x,A.y+=Oe.y<0?-et.y:et.y,this.panTo(this.unproject(A),f),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=r({animate:!1,pan:!0},l===!0?{animate:!0}:l);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),M=f.divideBy(2).round(),A=v.divideBy(2).round(),H=M.subtract(A);return!H.x&&!H.y?this:(l.animate&&l.pan?this.panBy(H):(l.pan&&this._rawPanBy(H),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=r({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=o(this._handleGeolocationResponse,this),v=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,v,l):navigator.geolocation.getCurrentPosition(f,v,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var f=l.code,v=l.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var f=l.coords.latitude,v=l.coords.longitude,M=new ve(f,v),A=M.toBounds(l.coords.accuracy*2),H=this._locateOptions;if(H.setView){var re=this.getBoundsZoom(A);this.setView(M,H.maxZoom?Math.min(re,H.maxZoom):re)}var _e={latlng:M,bounds:A,timestamp:l.timestamp};for(var Me in l.coords)typeof l.coords[Me]=="number"&&(_e[Me]=l.coords[Me]);this.fire("locationfound",_e)}},addHandler:function(l,f){if(!f)return this;var v=this[l]=new f(this);return this._handlers.push(v),this.options[l]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),un(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(K(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)un(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,f){var v="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),M=Et("div",v,f||this._mapPane);return l&&(this._panes[l]=M),M},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),f=this.unproject(l.getBottomLeft()),v=this.unproject(l.getTopRight());return new D(f,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,f,v){l=fe(l),v=O(v||[0,0]);var M=this.getZoom()||0,A=this.getMinZoom(),H=this.getMaxZoom(),re=l.getNorthWest(),_e=l.getSouthEast(),Me=this.getSize().subtract(v),Oe=se(this.project(_e,M),this.project(re,M)).getSize(),et=ce.any3d?this.options.zoomSnap:1,ft=Me.x/Oe.x,Tt=Me.y/Oe.y,In=f?Math.max(ft,Tt):Math.min(ft,Tt);return M=this.getScaleZoom(In,M),et&&(M=Math.round(M/(et/100))*(et/100),M=f?Math.ceil(M/et)*et:Math.floor(M/et)*et),Math.max(A,Math.min(H,M))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,f){var v=this._getTopLeftPoint(l,f);return new G(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,f){var v=this.options.crs;return f=f===void 0?this._zoom:f,v.scale(l)/v.scale(f)},getScaleZoom:function(l,f){var v=this.options.crs;f=f===void 0?this._zoom:f;var M=v.zoom(l*v.scale(f));return isNaN(M)?1/0:M},project:function(l,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(te(l),f)},unproject:function(l,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng(O(l),f)},layerPointToLatLng:function(l){var f=O(l).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(l){var f=this.project(te(l))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(te(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(fe(l))},distance:function(l,f){return this.options.crs.distance(te(l),te(f))},containerPointToLayerPoint:function(l){return O(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return O(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var f=this.containerPointToLayerPoint(O(l));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(te(l)))},mouseEventToContainerPoint:function(l){return ma(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var f=this._container=qi(l);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");vt(f,"scroll",this._onScroll,this),this._containerId=h(f)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,Mt(l,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=ca(l,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Sn(this._mapPane,new ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Mt(l.markerPane,"leaflet-zoom-hide"),Mt(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,f,v){Sn(this._mapPane,new ee(0,0));var M=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var A=this._zoom!==f;this._moveStart(A,v)._move(l,f)._moveEnd(A),this.fire("viewreset"),M&&this.fire("load")},_moveStart:function(l,f){return l&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(l,f,v,M){f===void 0&&(f=this._zoom);var A=this._zoom!==f;return this._zoom=f,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),M?v&&v.pinch&&this.fire("zoom",v):((A||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return K(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){Sn(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[h(this._container)]=this;var f=l?Xt:vt;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){K(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,f){for(var v=[],M,A=f==="mouseout"||f==="mouseover",H=l.target||l.srcElement,re=!1;H;){if(M=this._targets[h(H)],M&&(f==="click"||f==="preclick")&&this._draggableMoved(M)){re=!0;break}if(M&&M.listens(f,!0)&&(A&&!ga(H,l)||(v.push(M),A))||H===this._container)break;H=H.parentNode}return!v.length&&!re&&!A&&this.listens(f,!0)&&(v=[this]),v},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var f=l.target||l.srcElement;if(!(!this._loaded||f._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(f))){var v=l.type;v==="mousedown"&&ho(f),this._fireDOMEvent(l,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,f,v){if(l.type==="click"){var M=r({},l);M.type="preclick",this._fireDOMEvent(M,M.type,v)}var A=this._findEventTargets(l,f);if(v){for(var H=[],re=0;re<v.length;re++)v[re].listens(f,!0)&&H.push(v[re]);A=H.concat(A)}if(A.length){f==="contextmenu"&&_n(l);var _e=A[0],Me={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Oe=_e.getLatLng&&(!_e._radius||_e._radius<=10);Me.containerPoint=Oe?this.latLngToContainerPoint(_e.getLatLng()):this.mouseEventToContainerPoint(l),Me.layerPoint=this.containerPointToLayerPoint(Me.containerPoint),Me.latlng=Oe?_e.getLatLng():this.layerPointToLatLng(Me.layerPoint)}for(re=0;re<A.length;re++)if(A[re].fire(f,Me,!0),Me.originalEvent._stopped||A[re].options.bubblingMouseEvents===!1&&F(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,f=this._handlers.length;l<f;l++)this._handlers[l].disable()},whenReady:function(l,f){return this._loaded?l.call(f||this,{target:this}):this.on("load",l,f),this},_getMapPanePos:function(){return zr(this._mapPane)||new ee(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,f){var v=l&&f!==void 0?this._getNewPixelOrigin(l,f):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,f){var v=this.getSize()._divideBy(2);return this.project(l,f)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,f,v){var M=this._getNewPixelOrigin(v,f);return this.project(l,f)._subtract(M)},_latLngBoundsToNewLayerBounds:function(l,f,v){var M=this._getNewPixelOrigin(v,f);return se([this.project(l.getSouthWest(),f)._subtract(M),this.project(l.getNorthWest(),f)._subtract(M),this.project(l.getSouthEast(),f)._subtract(M),this.project(l.getNorthEast(),f)._subtract(M)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,f,v){if(!v)return l;var M=this.project(l,f),A=this.getSize().divideBy(2),H=new G(M.subtract(A),M.add(A)),re=this._getBoundsOffset(H,v,f);return Math.abs(re.x)<=1&&Math.abs(re.y)<=1?l:this.unproject(M.add(re),f)},_limitOffset:function(l,f){if(!f)return l;var v=this.getPixelBounds(),M=new G(v.min.add(l),v.max.add(l));return l.add(this._getBoundsOffset(M,f))},_getBoundsOffset:function(l,f,v){var M=se(this.project(f.getNorthEast(),v),this.project(f.getSouthWest(),v)),A=M.min.subtract(l.min),H=M.max.subtract(l.max),re=this._rebound(A.x,-H.x),_e=this._rebound(A.y,-H.y);return new ee(re,_e)},_rebound:function(l,f){return l+f>0?Math.round(l-f)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(f))},_limitZoom:function(l){var f=this.getMinZoom(),v=this.getMaxZoom(),M=ce.any3d?this.options.zoomSnap:1;return M&&(l=Math.round(l/M)*M),Math.max(f,Math.min(v,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){nn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,f){var v=this._getCenterOffset(l)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,f),!0)},_createAnimProxy:function(){var l=this._proxy=Et("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(f){var v=sc,M=this._proxy.style[v];Xi(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),M===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){un(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),f=this.getZoom();Xi(this._proxy,this.project(l,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,f,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var M=this.getZoomScale(f),A=this._getCenterOffset(l)._divideBy(1-1/M);return v.animate!==!0&&!this.getSize().contains(A)?!1:(U(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(l,f,!0)},this),!0)},_animateZoom:function(l,f,v,M){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=f,Mt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:f,noUpdate:M}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&nn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function is(l,f){return new Dt(l,f)}var bi=Q.extend({options:{position:"topright"},initialize:function(l){b(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var f=this._map;return f&&f.removeControl(this),this.options.position=l,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var f=this._container=this.onAdd(l),v=this.getPosition(),M=l._controlCorners[v];return Mt(f,"leaflet-control"),v.indexOf("bottom")!==-1?M.insertBefore(f,M.firstChild):M.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(un(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),rs=function(l){return new bi(l)};Dt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},f="leaflet-",v=this._controlContainer=Et("div",f+"control-container",this._container);function M(A,H){var re=f+A+" "+f+H;l[A+H]=Et("div",re,v)}M("top","left"),M("top","right"),M("bottom","left"),M("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)un(this._controlCorners[l]);un(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var uc=bi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,f,v,M){return v<M?-1:M<v?1:0}},initialize:function(l,f,v){b(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var M in l)this._addLayer(l[M],M);for(M in f)this._addLayer(f[M],M,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return bi.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,f){return this._addLayer(l,f),this._map?this._update():this},addOverlay:function(l,f){return this._addLayer(l,f,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var f=this._getLayer(h(l));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){Mt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Mt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):nn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return nn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",f=this._container=Et("div",l),v=this.options.collapsed;f.setAttribute("aria-haspopup",!0),pa(f),gl(f);var M=this._section=Et("section",l+"-list");v&&(this._map.on("click",this.collapse,this),vt(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=Et("a",l+"-toggle",f);A.href="#",A.title="Layers",A.setAttribute("role","button"),vt(A,{keydown:function(H){H.keyCode===13&&this._expandSafely()},click:function(H){_n(H),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=Et("div",l+"-base",M),this._separator=Et("div",l+"-separator",M),this._overlaysList=Et("div",l+"-overlays",M),f.appendChild(M)},_getLayer:function(l){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&h(this._layers[f].layer)===l)return this._layers[f]},_addLayer:function(l,f,v){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:f,overlay:v}),this.options.sortLayers&&this._layers.sort(o(function(M,A){return this.options.sortFunction(M.layer,A.layer,M.name,A.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;cl(this._baseLayersList),cl(this._overlaysList),this._layerControlInputs=[];var l,f,v,M,A=0;for(v=0;v<this._layers.length;v++)M=this._layers[v],this._addItem(M),f=f||M.overlay,l=l||!M.overlay,A+=M.overlay?0:1;return this.options.hideSingleBase&&(l=l&&A>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=f&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var f=this._getLayer(h(l.target)),v=f.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;v&&this._map.fire(v,f)},_createRadioElement:function(l,f){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(f?' checked="checked"':"")+"/>",M=document.createElement("div");return M.innerHTML=v,M.firstChild},_addItem:function(l){var f=document.createElement("label"),v=this._map.hasLayer(l.layer),M;l.overlay?(M=document.createElement("input"),M.type="checkbox",M.className="leaflet-control-layers-selector",M.defaultChecked=v):M=this._createRadioElement("leaflet-base-layers_"+h(this),v),this._layerControlInputs.push(M),M.layerId=h(l.layer),vt(M,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+l.name;var H=document.createElement("span");f.appendChild(H),H.appendChild(M),H.appendChild(A);var re=l.overlay?this._overlaysList:this._baseLayersList;return re.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,f,v,M=[],A=[];this._handlingClick=!0;for(var H=l.length-1;H>=0;H--)f=l[H],v=this._getLayer(f.layerId).layer,f.checked?M.push(v):f.checked||A.push(v);for(H=0;H<A.length;H++)this._map.hasLayer(A[H])&&this._map.removeLayer(A[H]);for(H=0;H<M.length;H++)this._map.hasLayer(M[H])||this._map.addLayer(M[H]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,f,v,M=this._map.getZoom(),A=l.length-1;A>=0;A--)f=l[A],v=this._getLayer(f.layerId).layer,f.disabled=v.options.minZoom!==void 0&&M<v.options.minZoom||v.options.maxZoom!==void 0&&M>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,vt(l,"click",_n),this.expand();var f=this;setTimeout(function(){Xt(l,"click",_n),f._preventClick=!1})}}),vl=function(l,f,v){return new uc(l,f,v)},fo=bi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var f="leaflet-control-zoom",v=Et("div",f+" leaflet-bar"),M=this.options;return this._zoomInButton=this._createButton(M.zoomInText,M.zoomInTitle,f+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(M.zoomOutText,M.zoomOutTitle,f+"-out",v,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,f,v,M,A){var H=Et("a",v,M);return H.innerHTML=l,H.href="#",H.title=f,H.setAttribute("role","button"),H.setAttribute("aria-label",f),pa(H),vt(H,"click",Ki),vt(H,"click",A,this),vt(H,"click",this._refocusOnMap,this),H},_updateDisabled:function(){var l=this._map,f="leaflet-disabled";nn(this._zoomInButton,f),nn(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Mt(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Mt(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});Dt.mergeOptions({zoomControl:!0}),Dt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fo,this.addControl(this.zoomControl))});var fd=function(l){return new fo(l)},ri=bi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var f="leaflet-control-scale",v=Et("div",f),M=this.options;return this._addScales(M,f+"-line",v),l.on(M.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),v},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,f,v){l.metric&&(this._mScale=Et("div",f,v)),l.imperial&&(this._iScale=Et("div",f,v))},_update:function(){var l=this._map,f=l.getSize().y/2,v=l.distance(l.containerPointToLatLng([0,f]),l.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(v)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var f=this._getRoundNum(l),v=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,v,f/l)},_updateImperial:function(l){var f=l*3.2808399,v,M,A;f>5280?(v=f/5280,M=this._getRoundNum(v),this._updateScale(this._iScale,M+" mi",M/v)):(A=this._getRoundNum(f),this._updateScale(this._iScale,A+" ft",A/f))},_updateScale:function(l,f,v){l.style.width=Math.round(this.options.maxWidth*v)+"px",l.innerHTML=f},_getRoundNum:function(l){var f=Math.pow(10,(Math.floor(l)+"").length-1),v=l/f;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,f*v}}),po=function(l){return new ri(l)},cc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ds=bi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?cc+" ":"")+"Leaflet</a>"},initialize:function(l){b(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Et("div","leaflet-control-attribution"),pa(this._container);for(var f in l._layers)l._layers[f].getAttribution&&this.addAttribution(l._layers[f].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var f in this._attributions)this._attributions[f]&&l.push(f);var v=[];this.options.prefix&&v.push(this.options.prefix),l.length&&v.push(l.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});Dt.mergeOptions({attributionControl:!0}),Dt.addInitHook(function(){this.options.attributionControl&&new Ds().addTo(this)});var Tm=function(l){return new Ds(l)};bi.Layers=uc,bi.Zoom=fo,bi.Scale=ri,bi.Attribution=Ds,rs.layers=vl,rs.zoom=fd,rs.scale=po,rs.attribution=Tm;var Ai=Q.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ai.addTo=function(l,f){return l.addHandler(f,this),this};var hc={Events:oe},mo=ce.touch?"touchstart mousedown":"mousedown",Ji=ae.extend({options:{clickTolerance:3},initialize:function(l,f,v,M){b(this,M),this._element=l,this._dragStartTarget=f||l,this._preventOutline=v},enable:function(){this._enabled||(vt(this._dragStartTarget,mo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ji._dragging===this&&this.finishDrag(!0),Xt(this._dragStartTarget,mo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!lo(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Ji._dragging===this&&this.finishDrag();return}if(!(Ji._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Ji._dragging=this,this._preventOutline&&ho(this._element),fl(),Ft(),!this._moving)){this.fire("down");var f=l.touches?l.touches[0]:l,v=Fr(this._element);this._startPoint=new ee(f.clientX,f.clientY),this._startPos=zr(this._element),this._parentScale=pr(v);var M=l.type==="mousedown";vt(document,M?"mousemove":"touchmove",this._onMove,this),vt(document,M?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var f=l.touches&&l.touches.length===1?l.touches[0]:l,v=new ee(f.clientX,f.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,_n(l),this._moved||(this.fire("dragstart"),this._moved=!0,Mt(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Mt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),Sn(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){nn(document.body,"leaflet-dragging"),this._lastTarget&&(nn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xt(document,"mousemove touchmove",this._onMove,this),Xt(document,"mouseup touchend touchcancel",this._onUp,this),pl(),co();var f=this._moved&&this._moving;this._moving=!1,Ji._dragging=!1,f&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function dc(l,f,v){var M,A=[1,4,2,8],H,re,_e,Me,Oe,et,ft,Tt;for(H=0,et=l.length;H<et;H++)l[H]._code=Ns(l[H],f);for(_e=0;_e<4;_e++){for(ft=A[_e],M=[],H=0,et=l.length,re=et-1;H<et;re=H++)Me=l[H],Oe=l[re],Me._code&ft?Oe._code&ft||(Tt=wl(Oe,Me,ft,f,v),Tt._code=Ns(Tt,f),M.push(Tt)):(Oe._code&ft&&(Tt=wl(Oe,Me,ft,f,v),Tt._code=Ns(Tt,f),M.push(Tt)),M.push(Me));l=M}return l}function pd(l,f){var v,M,A,H,re,_e,Me,Oe,et;if(!l||l.length===0)throw new Error("latlngs not passed");ki(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ft=te([0,0]),Tt=fe(l),In=Tt.getNorthWest().distanceTo(Tt.getSouthWest())*Tt.getNorthEast().distanceTo(Tt.getNorthWest());In<1700&&(ft=fc(l));var Pn=l.length,Mi=[];for(v=0;v<Pn;v++){var si=te(l[v]);Mi.push(f.project(te([si.lat-ft.lat,si.lng-ft.lng])))}for(_e=Me=Oe=0,v=0,M=Pn-1;v<Pn;M=v++)A=Mi[v],H=Mi[M],re=A.y*H.x-H.y*A.x,Me+=(A.x+H.x)*re,Oe+=(A.y+H.y)*re,_e+=re*3;_e===0?et=Mi[0]:et=[Me/_e,Oe/_e];var Eo=f.unproject(O(et));return te([Eo.lat+ft.lat,Eo.lng+ft.lng])}function fc(l){for(var f=0,v=0,M=0,A=0;A<l.length;A++){var H=te(l[A]);f+=H.lat,v+=H.lng,M++}return te([f/M,v/M])}var Lm={__proto__:null,clipPolygon:dc,polygonCenter:pd,centroid:fc};function xl(l,f){if(!f||!l.length)return l.slice();var v=f*f;return l=Am(l,v),l=Pm(l,v),l}function md(l,f,v){return Math.sqrt(Os(l,f,v,!0))}function Cm(l,f,v){return Os(l,f,v)}function Pm(l,f){var v=l.length,M=typeof Uint8Array<"u"?Uint8Array:Array,A=new M(v);A[0]=A[v-1]=1,pc(l,A,f,0,v-1);var H,re=[];for(H=0;H<v;H++)A[H]&&re.push(l[H]);return re}function pc(l,f,v,M,A){var H=0,re,_e,Me;for(_e=M+1;_e<=A-1;_e++)Me=Os(l[_e],l[M],l[A],!0),Me>H&&(re=_e,H=Me);H>v&&(f[re]=1,pc(l,f,v,M,re),pc(l,f,v,re,A))}function Am(l,f){for(var v=[l[0]],M=1,A=0,H=l.length;M<H;M++)km(l[M],l[A])>f&&(v.push(l[M]),A=M);return A<H-1&&v.push(l[H-1]),v}var mc;function gd(l,f,v,M,A){var H=M?mc:Ns(l,v),re=Ns(f,v),_e,Me,Oe;for(mc=re;;){if(!(H|re))return[l,f];if(H&re)return!1;_e=H||re,Me=wl(l,f,_e,v,A),Oe=Ns(Me,v),_e===H?(l=Me,H=Oe):(f=Me,re=Oe)}}function wl(l,f,v,M,A){var H=f.x-l.x,re=f.y-l.y,_e=M.min,Me=M.max,Oe,et;return v&8?(Oe=l.x+H*(Me.y-l.y)/re,et=Me.y):v&4?(Oe=l.x+H*(_e.y-l.y)/re,et=_e.y):v&2?(Oe=Me.x,et=l.y+re*(Me.x-l.x)/H):v&1&&(Oe=_e.x,et=l.y+re*(_e.x-l.x)/H),new ee(Oe,et,A)}function Ns(l,f){var v=0;return l.x<f.min.x?v|=1:l.x>f.max.x&&(v|=2),l.y<f.min.y?v|=4:l.y>f.max.y&&(v|=8),v}function km(l,f){var v=f.x-l.x,M=f.y-l.y;return v*v+M*M}function Os(l,f,v,M){var A=f.x,H=f.y,re=v.x-A,_e=v.y-H,Me=re*re+_e*_e,Oe;return Me>0&&(Oe=((l.x-A)*re+(l.y-H)*_e)/Me,Oe>1?(A=v.x,H=v.y):Oe>0&&(A+=re*Oe,H+=_e*Oe)),re=l.x-A,_e=l.y-H,M?re*re+_e*_e:new ee(A,H)}function ki(l){return!R(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function _d(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ki(l)}function yd(l,f){var v,M,A,H,re,_e,Me,Oe;if(!l||l.length===0)throw new Error("latlngs not passed");ki(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var et=te([0,0]),ft=fe(l),Tt=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Tt<1700&&(et=fc(l));var In=l.length,Pn=[];for(v=0;v<In;v++){var Mi=te(l[v]);Pn.push(f.project(te([Mi.lat-et.lat,Mi.lng-et.lng])))}for(v=0,M=0;v<In-1;v++)M+=Pn[v].distanceTo(Pn[v+1])/2;if(M===0)Oe=Pn[0];else for(v=0,H=0;v<In-1;v++)if(re=Pn[v],_e=Pn[v+1],A=re.distanceTo(_e),H+=A,H>M){Me=(H-M)/A,Oe=[_e.x-Me*(_e.x-re.x),_e.y-Me*(_e.y-re.y)];break}var si=f.unproject(O(Oe));return te([si.lat+et.lat,si.lng+et.lng])}var vd={__proto__:null,simplify:xl,pointToSegmentDistance:md,closestPointOnSegment:Cm,clipSegment:gd,_getEdgeIntersection:wl,_getBitCode:Ns,_sqClosestPointOnSegment:Os,isFlat:ki,_flat:_d,polylineCenter:yd},gc={project:function(l){return new ee(l.lng,l.lat)},unproject:function(l){return new ve(l.y,l.x)},bounds:new G([-180,-90],[180,90])},_c={R:6378137,R_MINOR:6356752314245179e-9,bounds:new G([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var f=Math.PI/180,v=this.R,M=l.lat*f,A=this.R_MINOR/v,H=Math.sqrt(1-A*A),re=H*Math.sin(M),_e=Math.tan(Math.PI/4-M/2)/Math.pow((1-re)/(1+re),H/2);return M=-v*Math.log(Math.max(_e,1e-10)),new ee(l.lng*f*v,M)},unproject:function(l){for(var f=180/Math.PI,v=this.R,M=this.R_MINOR/v,A=Math.sqrt(1-M*M),H=Math.exp(-l.y/v),re=Math.PI/2-2*Math.atan(H),_e=0,Me=.1,Oe;_e<15&&Math.abs(Me)>1e-7;_e++)Oe=A*Math.sin(re),Oe=Math.pow((1-Oe)/(1+Oe),A/2),Me=Math.PI/2-2*Math.atan(H*Oe)-re,re+=Me;return new ve(re*f,l.x*f/v)}},Rm={__proto__:null,LonLat:gc,Mercator:_c,SphericalMercator:ze},Im=r({},Pe,{code:"EPSG:3395",projection:_c,transformation:(function(){var l=.5/(Math.PI*_c.R);return be(l,.5,-l,.5)})()}),xd=r({},Pe,{code:"EPSG:4326",projection:gc,transformation:be(1/180,1,-1/180,.5)}),Dm=r({},Ne,{projection:gc,transformation:be(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,f){var v=f.lng-l.lng,M=f.lat-l.lat;return Math.sqrt(v*v+M*M)},infinite:!0});Ne.Earth=Pe,Ne.EPSG3395=Im,Ne.EPSG3857=Re,Ne.EPSG900913=De,Ne.EPSG4326=xd,Ne.Simple=Dm;var Qi=ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[h(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[h(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var f=l.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var v=this.getEvents();f.on(v,this),this.once("remove",function(){f.off(v,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});Dt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var f=h(l);return this._layers[f]?this:(this._layers[f]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var f=h(l);return this._layers[f]?(this._loaded&&l.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return h(l)in this._layers},eachLayer:function(l,f){for(var v in this._layers)l.call(f,this._layers[v]);return this},_addLayers:function(l){l=l?R(l)?l:[l]:[];for(var f=0,v=l.length;f<v;f++)this.addLayer(l[f])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[h(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var f=h(l);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,f=-1/0,v=this._getZoomSpan();for(var M in this._zoomBoundLayers){var A=this._zoomBoundLayers[M].options;l=A.minZoom===void 0?l:Math.min(l,A.minZoom),f=A.maxZoom===void 0?f:Math.max(f,A.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=l===1/0?void 0:l,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ss=Qi.extend({initialize:function(l,f){b(this,f),this._layers={};var v,M;if(l)for(v=0,M=l.length;v<M;v++)this.addLayer(l[v])},addLayer:function(l){var f=this.getLayerId(l);return this._layers[f]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var f=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(l){var f=typeof l=="number"?l:this.getLayerId(l);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var f=Array.prototype.slice.call(arguments,1),v,M;for(v in this._layers)M=this._layers[v],M[l]&&M[l].apply(M,f);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,f){for(var v in this._layers)l.call(f,this._layers[v]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return h(l)}}),_a=function(l,f){return new ss(l,f)},Br=ss.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),ss.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),ss.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new D;for(var f in this._layers){var v=this._layers[f];l.extend(v.getBounds?v.getBounds():v.getLatLng())}return l}}),wd=function(l,f){return new Br(l,f)},zs=Q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){b(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,f){var v=this._getIconUrl(l);if(!v){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var M=this._createImg(v,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(M,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),M},_setIconStyles:function(l,f){var v=this.options,M=v[f+"Size"];typeof M=="number"&&(M=[M,M]);var A=O(M),H=O(f==="shadow"&&v.shadowAnchor||v.iconAnchor||A&&A.divideBy(2,!0));l.className="leaflet-marker-"+f+" "+(v.className||""),H&&(l.style.marginLeft=-H.x+"px",l.style.marginTop=-H.y+"px"),A&&(l.style.width=A.x+"px",l.style.height=A.y+"px")},_createImg:function(l,f){return f=f||document.createElement("img"),f.src=l,f},_getIconUrl:function(l){return ce.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function bd(l){return new zs(l)}var go=zs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof go.imagePath!="string"&&(go.imagePath=this._detectIconPath()),(this.options.imagePath||go.imagePath)+zs.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var f=function(v,M,A){var H=M.exec(v);return H&&H[A]};return l=f(l,/^url\((['"])?(.+)\1\)$/,2),l&&f(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Et("div","leaflet-default-icon-path",document.body),f=ca(l,"background-image")||ca(l,"backgroundImage");if(document.body.removeChild(l),f=this._stripUrl(f),f)return f;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),yc=Ai.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Ji(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Mt(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&nn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var f=this._marker,v=f._map,M=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,H=zr(f._icon),re=v.getPixelBounds(),_e=v.getPixelOrigin(),Me=se(re.min._subtract(_e).add(A),re.max._subtract(_e).subtract(A));if(!Me.contains(H)){var Oe=O((Math.max(Me.max.x,H.x)-Me.max.x)/(re.max.x-Me.max.x)-(Math.min(Me.min.x,H.x)-Me.min.x)/(re.min.x-Me.min.x),(Math.max(Me.max.y,H.y)-Me.max.y)/(re.max.y-Me.max.y)-(Math.min(Me.min.y,H.y)-Me.min.y)/(re.min.y-Me.min.y)).multiplyBy(M);v.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),Sn(f._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=U(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(K(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,l)))},_onDrag:function(l){var f=this._marker,v=f._shadow,M=zr(f._icon),A=f._map.layerPointToLatLng(M);v&&Sn(v,M),f._latlng=A,l.latlng=A,l.oldLatLng=this._oldLatLng,f.fire("move",l).fire("drag",l)},_onDragEnd:function(l){K(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Ur=Qi.extend({options:{icon:new go,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,f){b(this,f),this._latlng=te(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var f=this._latlng;return this._latlng=te(l),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=l.icon.createIcon(this._icon),M=!1;v!==this._icon&&(this._icon&&this._removeIcon(),M=!0,l.title&&(v.title=l.title),v.tagName==="IMG"&&(v.alt=l.alt||"")),Mt(v,f),l.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vt(v,"focus",this._panOnFocus,this);var A=l.icon.createShadow(this._shadow),H=!1;A!==this._shadow&&(this._removeShadow(),H=!0),A&&(Mt(A,f),A.alt=""),this._shadow=A,l.opacity<1&&this._updateOpacity(),M&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&H&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xt(this._icon,"focus",this._panOnFocus,this),un(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&un(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&Sn(this._icon,l),this._shadow&&Sn(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(Mt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),yc)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new yc(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&ii(this._icon,l),this._shadow&&ii(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var f=this.options.icon.options,v=f.iconSize?O(f.iconSize):O(0,0),M=f.iconAnchor?O(f.iconAnchor):O(0,0);l.panInside(this._latlng,{paddingTopLeft:M,paddingBottomRight:v.subtract(M)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Nm(l,f){return new Ur(l,f)}var os=Qi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return b(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),bl=os.extend({options:{fill:!0,radius:10},initialize:function(l,f){b(this,f),this._latlng=te(l),this._radius=this.options.radius},setLatLng:function(l){var f=this._latlng;return this._latlng=te(l),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var f=l&&l.radius||this._radius;return os.prototype.setStyle.call(this,l),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,f=this._radiusY||l,v=this._clickTolerance(),M=[l+v,f+v];this._pxBounds=new G(this._point.subtract(M),this._point.add(M))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Sd(l,f){return new bl(l,f)}var Sl=bl.extend({initialize:function(l,f,v){if(typeof f=="number"&&(f=r({},v,{radius:f})),b(this,f),this._latlng=te(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:os.prototype.setStyle,_project:function(){var l=this._latlng.lng,f=this._latlng.lat,v=this._map,M=v.options.crs;if(M.distance===Pe.distance){var A=Math.PI/180,H=this._mRadius/Pe.R/A,re=v.project([f+H,l]),_e=v.project([f-H,l]),Me=re.add(_e).divideBy(2),Oe=v.unproject(Me).lat,et=Math.acos((Math.cos(H*A)-Math.sin(f*A)*Math.sin(Oe*A))/(Math.cos(f*A)*Math.cos(Oe*A)))/A;(isNaN(et)||et===0)&&(et=H/Math.cos(Math.PI/180*f)),this._point=Me.subtract(v.getPixelOrigin()),this._radius=isNaN(et)?0:Me.x-v.project([Oe,l-et]).x,this._radiusY=Me.y-re.y}else{var ft=M.unproject(M.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(ft).x}this._updateBounds()}});function ya(l,f,v){return new Sl(l,f,v)}var Si=os.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,f){b(this,f),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var f=1/0,v=null,M=Os,A,H,re=0,_e=this._parts.length;re<_e;re++)for(var Me=this._parts[re],Oe=1,et=Me.length;Oe<et;Oe++){A=Me[Oe-1],H=Me[Oe];var ft=M(l,A,H,!0);ft<f&&(f=ft,v=M(l,A,H))}return v&&(v.distance=Math.sqrt(f)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yd(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,f){return f=f||this._defaultShape(),l=te(l),f.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new D,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return ki(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var f=[],v=ki(l),M=0,A=l.length;M<A;M++)v?(f[M]=te(l[M]),this._bounds.extend(f[M])):f[M]=this._convertLatLngs(l[M]);return f},_project:function(){var l=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),f=new ee(l,l);this._rawPxBounds&&(this._pxBounds=new G([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(l,f,v){var M=l[0]instanceof ve,A=l.length,H,re;if(M){for(re=[],H=0;H<A;H++)re[H]=this._map.latLngToLayerPoint(l[H]),v.extend(re[H]);f.push(re)}else for(H=0;H<A;H++)this._projectLatlngs(l[H],f,v)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,v,M,A,H,re,_e,Me;for(v=0,A=0,H=this._rings.length;v<H;v++)for(Me=this._rings[v],M=0,re=Me.length;M<re-1;M++)_e=gd(Me[M],Me[M+1],l,M,!0),_e&&(f[A]=f[A]||[],f[A].push(_e[0]),(_e[1]!==Me[M+1]||M===re-2)&&(f[A].push(_e[1]),A++))}},_simplifyPoints:function(){for(var l=this._parts,f=this.options.smoothFactor,v=0,M=l.length;v<M;v++)l[v]=xl(l[v],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,f){var v,M,A,H,re,_e,Me=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(v=0,H=this._parts.length;v<H;v++)for(_e=this._parts[v],M=0,re=_e.length,A=re-1;M<re;A=M++)if(!(!f&&M===0)&&md(l,_e[A],_e[M])<=Me)return!0;return!1}});function Om(l,f){return new Si(l,f)}Si._flat=_d;var Hr=Si.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var f=Si.prototype._convertLatLngs.call(this,l),v=f.length;return v>=2&&f[0]instanceof ve&&f[0].equals(f[v-1])&&f.pop(),f},_setLatLngs:function(l){Si.prototype._setLatLngs.call(this,l),ki(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ki(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,f=this.options.weight,v=new ee(f,f);if(l=new G(l.min.subtract(v),l.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var M=0,A=this._rings.length,H;M<A;M++)H=dc(this._rings[M],l,!0),H.length&&this._parts.push(H)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var f=!1,v,M,A,H,re,_e,Me,Oe;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(H=0,Me=this._parts.length;H<Me;H++)for(v=this._parts[H],re=0,Oe=v.length,_e=Oe-1;re<Oe;_e=re++)M=v[re],A=v[_e],M.y>l.y!=A.y>l.y&&l.x<(A.x-M.x)*(l.y-M.y)/(A.y-M.y)+M.x&&(f=!f);return f||Si.prototype._containsPoint.call(this,l,!0)}});function zm(l,f){return new Hr(l,f)}var gr=Br.extend({initialize:function(l,f){b(this,f),this._layers={},l&&this.addData(l)},addData:function(l){var f=R(l)?l:l.features,v,M,A;if(f){for(v=0,M=f.length;v<M;v++)A=f[v],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var H=this.options;if(H.filter&&!H.filter(l))return this;var re=_o(l,H);return re?(re.feature=Cl(l),re.defaultOptions=re.options,this.resetStyle(re),H.onEachFeature&&H.onEachFeature(l,re),this.addLayer(re)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=r({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(f){this._setLayerStyle(f,l)},this)},_setLayerStyle:function(l,f){l.setStyle&&(typeof f=="function"&&(f=f(l.feature)),l.setStyle(f))}});function _o(l,f){var v=l.type==="Feature"?l.geometry:l,M=v?v.coordinates:null,A=[],H=f&&f.pointToLayer,re=f&&f.coordsToLatLng||El,_e,Me,Oe,et;if(!M&&!v)return null;switch(v.type){case"Point":return _e=re(M),Ml(H,l,_e,f);case"MultiPoint":for(Oe=0,et=M.length;Oe<et;Oe++)_e=re(M[Oe]),A.push(Ml(H,l,_e,f));return new Br(A);case"LineString":case"MultiLineString":return Me=va(M,v.type==="LineString"?0:1,re),new Si(Me,f);case"Polygon":case"MultiPolygon":return Me=va(M,v.type==="Polygon"?1:2,re),new Hr(Me,f);case"GeometryCollection":for(Oe=0,et=v.geometries.length;Oe<et;Oe++){var ft=_o({geometry:v.geometries[Oe],type:"Feature",properties:l.properties},f);ft&&A.push(ft)}return new Br(A);case"FeatureCollection":for(Oe=0,et=v.features.length;Oe<et;Oe++){var Tt=_o(v.features[Oe],f);Tt&&A.push(Tt)}return new Br(A);default:throw new Error("Invalid GeoJSON object.")}}function Ml(l,f,v,M){return l?l(f,v):new Ur(v,M&&M.markersInheritOptions&&M)}function El(l){return new ve(l[1],l[0],l[2])}function va(l,f,v){for(var M=[],A=0,H=l.length,re;A<H;A++)re=f?va(l[A],f-1,v):(v||El)(l[A]),M.push(re);return M}function Tl(l,f){return l=te(l),l.alt!==void 0?[_(l.lng,f),_(l.lat,f),_(l.alt,f)]:[_(l.lng,f),_(l.lat,f)]}function Ll(l,f,v,M){for(var A=[],H=0,re=l.length;H<re;H++)A.push(f?Ll(l[H],ki(l[H])?0:f-1,v,M):Tl(l[H],M));return!f&&v&&A.length>0&&A.push(A[0].slice()),A}function yo(l,f){return l.feature?r({},l.feature,{geometry:f}):Cl(f)}function Cl(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var vc={toGeoJSON:function(l){return yo(this,{type:"Point",coordinates:Tl(this.getLatLng(),l)})}};Ur.include(vc),Sl.include(vc),bl.include(vc),Si.include({toGeoJSON:function(l){var f=!ki(this._latlngs),v=Ll(this._latlngs,f?1:0,!1,l);return yo(this,{type:(f?"Multi":"")+"LineString",coordinates:v})}}),Hr.include({toGeoJSON:function(l){var f=!ki(this._latlngs),v=f&&!ki(this._latlngs[0]),M=Ll(this._latlngs,v?2:f?1:0,!0,l);return f||(M=[M]),yo(this,{type:(v?"Multi":"")+"Polygon",coordinates:M})}}),ss.include({toMultiPoint:function(l){var f=[];return this.eachLayer(function(v){f.push(v.toGeoJSON(l).geometry.coordinates)}),yo(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(l){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(l);var v=f==="GeometryCollection",M=[];return this.eachLayer(function(A){if(A.toGeoJSON){var H=A.toGeoJSON(l);if(v)M.push(H.geometry);else{var re=Cl(H);re.type==="FeatureCollection"?M.push.apply(M,re.features):M.push(re)}}}),v?yo(this,{geometries:M,type:"GeometryCollection"}):{type:"FeatureCollection",features:M}}});function Md(l,f){return new gr(l,f)}var er=Md,as=Qi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,f,v){this._url=l,this._bounds=fe(f),b(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Mt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){un(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&ao(this._image),this},bringToBack:function(){return this._map&&Or(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=fe(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",f=this._image=l?this._url:Et("img");if(Mt(f,"leaflet-image-layer"),this._zoomAnimated&&Mt(f,"leaflet-zoom-animated"),this.options.className&&Mt(f,this.options.className),f.onselectstart=g,f.onmousemove=g,f.onload=o(this.fire,this,"load"),f.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(l){var f=this._map.getZoomScale(l.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Xi(this._image,v,f)},_reset:function(){var l=this._image,f=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=f.getSize();Sn(l,f.min),l.style.width=v.x+"px",l.style.height=v.y+"px"},_updateOpacity:function(){ii(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),Ed=function(l,f,v){return new as(l,f,v)},xc=as.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",f=this._image=l?this._url:Et("video");if(Mt(f,"leaflet-image-layer"),this._zoomAnimated&&Mt(f,"leaflet-zoom-animated"),this.options.className&&Mt(f,this.options.className),f.onselectstart=g,f.onmousemove=g,f.onloadeddata=o(this.fire,this,"load"),l){for(var v=f.getElementsByTagName("source"),M=[],A=0;A<v.length;A++)M.push(v[A].src);this._url=v.length>0?M:[f.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var H=0;H<this._url.length;H++){var re=Et("source");re.src=this._url[H],f.appendChild(re)}}});function Td(l,f,v){return new xc(l,f,v)}var wc=as.extend({_initImage:function(){var l=this._image=this._url;Mt(l,"leaflet-image-layer"),this._zoomAnimated&&Mt(l,"leaflet-zoom-animated"),this.options.className&&Mt(l,this.options.className),l.onselectstart=g,l.onmousemove=g}});function bc(l,f,v){return new wc(l,f,v)}var _r=Qi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,f){l&&(l instanceof ve||R(l))?(this._latlng=te(l),b(this,f)):(b(this,l),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&ii(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&ii(this._container,1),this.bringToFront(),this.options.interactive&&(Mt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(ii(this._container,0),this._removeTimeout=setTimeout(o(un,void 0,this._container),200)):un(this._container),this.options.interactive&&(nn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=te(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ao(this._container),this},bringToBack:function(){return this._map&&Or(this._container),this},_prepareOpen:function(l){var f=this._source;if(!f._map)return!1;if(f instanceof Br){f=null;var v=this._source._layers;for(var M in v)if(v[M]._map){f=v[M];break}if(!f)return!1;this._source=f}if(!l)if(f.getCenter)l=f.getCenter();else if(f.getLatLng)l=f.getLatLng();else if(f.getBounds)l=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")l.innerHTML=f;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),f=O(this.options.offset),v=this._getAnchor();this._zoomAnimated?Sn(this._container,l.add(v)):f=f.add(l).add(v);var M=this._containerBottom=-f.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=M+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});Dt.include({_initOverlay:function(l,f,v,M){var A=f;return A instanceof l||(A=new l(M).setContent(f)),v&&A.setLatLng(v),A}}),Qi.include({_initOverlay:function(l,f,v,M){var A=v;return A instanceof l?(b(A,M),A._source=this):(A=f&&!M?f:new l(M,this),A.setContent(v)),A}});var Pl=_r.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,_r.prototype.openOn.call(this,l)},onAdd:function(l){_r.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof os||this._source.on("preclick",mr))},onRemove:function(l){_r.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof os||this._source.off("preclick",mr))},getEvents:function(){var l=_r.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",f=this._container=Et("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=Et("div",l+"-content-wrapper",f);if(this._contentNode=Et("div",l+"-content",v),pa(f),gl(this._contentNode),vt(f,"contextmenu",mr),this._tipContainer=Et("div",l+"-tip-container",f),this._tip=Et("div",l+"-tip",this._tipContainer),this.options.closeButton){var M=this._closeButton=Et("a",l+"-close-button",f);M.setAttribute("role","button"),M.setAttribute("aria-label","Close popup"),M.href="#close",M.innerHTML='<span aria-hidden="true">&#215;</span>',vt(M,"click",function(A){_n(A),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,f=l.style;f.width="",f.whiteSpace="nowrap";var v=l.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),f.width=v+1+"px",f.whiteSpace="",f.height="";var M=l.offsetHeight,A=this.options.maxHeight,H="leaflet-popup-scrolled";A&&M>A?(f.height=A+"px",Mt(l,H)):nn(l,H),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),v=this._getAnchor();Sn(this._container,f.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,f=parseInt(ca(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+f,M=this._containerWidth,A=new ee(this._containerLeft,-v-this._containerBottom);A._add(zr(this._container));var H=l.layerPointToContainerPoint(A),re=O(this.options.autoPanPadding),_e=O(this.options.autoPanPaddingTopLeft||re),Me=O(this.options.autoPanPaddingBottomRight||re),Oe=l.getSize(),et=0,ft=0;H.x+M+Me.x>Oe.x&&(et=H.x+M-Oe.x+Me.x),H.x-et-_e.x<0&&(et=H.x-_e.x),H.y+v+Me.y>Oe.y&&(ft=H.y+v-Oe.y+Me.y),H.y-ft-_e.y<0&&(ft=H.y-_e.y),(et||ft)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([et,ft]))}},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),vo=function(l,f){return new Pl(l,f)};Dt.mergeOptions({closePopupOnClick:!0}),Dt.include({openPopup:function(l,f,v){return this._initOverlay(Pl,l,f,v).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Qi.include({bindPopup:function(l,f){return this._popup=this._initOverlay(Pl,this._popup,l,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Br||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){Ki(l);var f=l.layer||l.target;if(this._popup._source===f&&!(f instanceof os)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=f,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var xo=_r.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){_r.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){_r.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=_r.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",f=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Et("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var f,v,M=this._map,A=this._container,H=M.latLngToContainerPoint(M.getCenter()),re=M.layerPointToContainerPoint(l),_e=this.options.direction,Me=A.offsetWidth,Oe=A.offsetHeight,et=O(this.options.offset),ft=this._getAnchor();_e==="top"?(f=Me/2,v=Oe):_e==="bottom"?(f=Me/2,v=0):_e==="center"?(f=Me/2,v=Oe/2):_e==="right"?(f=0,v=Oe/2):_e==="left"?(f=Me,v=Oe/2):re.x<H.x?(_e="right",f=0,v=Oe/2):(_e="left",f=Me+(et.x+ft.x)*2,v=Oe/2),l=l.subtract(O(f,v,!0)).add(et).add(ft),nn(A,"leaflet-tooltip-right"),nn(A,"leaflet-tooltip-left"),nn(A,"leaflet-tooltip-top"),nn(A,"leaflet-tooltip-bottom"),Mt(A,"leaflet-tooltip-"+_e),Sn(A,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&ii(this._container,l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(f)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),xa=function(l,f){return new xo(l,f)};Dt.include({openTooltip:function(l,f,v){return this._initOverlay(xo,l,f,v).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Qi.include({bindTooltip:function(l,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(xo,this._tooltip,l,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var f=l?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[f](v),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Br||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var f=typeof l.getElement=="function"&&l.getElement();f&&(vt(f,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),vt(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var f=typeof l.getElement=="function"&&l.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var f=this;this._map.once("moveend",function(){f._openOnceFlag=!1,f._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var f=l.latlng,v,M;this._tooltip.options.sticky&&l.originalEvent&&(v=this._map.mouseEventToContainerPoint(l.originalEvent),M=this._map.containerPointToLayerPoint(v),f=this._map.layerPointToLatLng(M)),this._tooltip.setLatLng(f)}});var Al=zs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var f=l&&l.tagName==="DIV"?l:document.createElement("div"),v=this.options;if(v.html instanceof Element?(cl(f),f.appendChild(v.html)):f.innerHTML=v.html!==!1?v.html:"",v.bgPos){var M=O(v.bgPos);f.style.backgroundPosition=-M.x+"px "+-M.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function Ld(l){return new Al(l)}zs.Default=go;var ls=Qi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){b(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),un(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ao(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Or(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof ee?l:new ee(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var f=this.getPane().children,v=-l(-1/0,1/0),M=0,A=f.length,H;M<A;M++)H=f[M].style.zIndex,f[M]!==this._container&&H&&(v=l(v,+H));isFinite(v)&&(this.options.zIndex=v+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){ii(this._container,this.options.opacity);var l=+new Date,f=!1,v=!1;for(var M in this._tiles){var A=this._tiles[M];if(!(!A.current||!A.loaded)){var H=Math.min(1,(l-A.loaded)/200);ii(A.el,H),H<1?f=!0:(A.active?v=!0:this._onOpaqueTile(A),A.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),f&&(K(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Et("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,f=this.options.maxZoom;if(l!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===l?(this._levels[v].el.style.zIndex=f-Math.abs(l-v),this._onUpdateLevel(v)):(un(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var M=this._levels[l],A=this._map;return M||(M=this._levels[l]={},M.el=Et("div","leaflet-tile-container leaflet-zoom-animated",this._container),M.el.style.zIndex=f,M.origin=A.project(A.unproject(A.getPixelOrigin()),l).round(),M.zoom=l,this._setZoomTransform(M,A.getCenter(),A.getZoom()),g(M.el.offsetWidth),this._onCreateLevel(M)),this._level=M,M}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var l,f,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)f=this._tiles[l],f.retain=f.current;for(l in this._tiles)if(f=this._tiles[l],f.current&&!f.active){var M=f.coords;this._retainParent(M.x,M.y,M.z,M.z-5)||this._retainChildren(M.x,M.y,M.z,M.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var f in this._tiles)this._tiles[f].coords.z===l&&this._removeTile(f)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)un(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,f,v,M){var A=Math.floor(l/2),H=Math.floor(f/2),re=v-1,_e=new ee(+A,+H);_e.z=+re;var Me=this._tileCoordsToKey(_e),Oe=this._tiles[Me];return Oe&&Oe.active?(Oe.retain=!0,!0):(Oe&&Oe.loaded&&(Oe.retain=!0),re>M?this._retainParent(A,H,re,M):!1)},_retainChildren:function(l,f,v,M){for(var A=2*l;A<2*l+2;A++)for(var H=2*f;H<2*f+2;H++){var re=new ee(A,H);re.z=v+1;var _e=this._tileCoordsToKey(re),Me=this._tiles[_e];if(Me&&Me.active){Me.retain=!0;continue}else Me&&Me.loaded&&(Me.retain=!0);v+1<M&&this._retainChildren(A,H,v+1,M)}},_resetView:function(l){var f=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var f=this.options;return f.minNativeZoom!==void 0&&l<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<l?f.maxNativeZoom:l},_setView:function(l,f,v,M){var A=Math.round(f);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var H=this.options.updateWhenZooming&&A!==this._tileZoom;(!M||H)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(l),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(l,f)},_setZoomTransforms:function(l,f){for(var v in this._levels)this._setZoomTransform(this._levels[v],l,f)},_setZoomTransform:function(l,f,v){var M=this._map.getZoomScale(v,l.zoom),A=l.origin.multiplyBy(M).subtract(this._map._getNewPixelOrigin(f,v)).round();ce.any3d?Xi(l.el,A,M):Sn(l.el,A)},_resetGrid:function(){var l=this._map,f=l.options.crs,v=this._tileSize=this.getTileSize(),M=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,f.wrapLng[0]],M).x/v.x),Math.ceil(l.project([0,f.wrapLng[1]],M).x/v.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([f.wrapLat[0],0],M).y/v.x),Math.ceil(l.project([f.wrapLat[1],0],M).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var f=this._map,v=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),M=f.getZoomScale(v,this._tileZoom),A=f.project(l,this._tileZoom).floor(),H=f.getSize().divideBy(M*2);return new G(A.subtract(H),A.add(H))},_update:function(l){var f=this._map;if(f){var v=this._clampZoom(f.getZoom());if(l===void 0&&(l=f.getCenter()),this._tileZoom!==void 0){var M=this._getTiledPixelBounds(l),A=this._pxBoundsToTileRange(M),H=A.getCenter(),re=[],_e=this.options.keepBuffer,Me=new G(A.getBottomLeft().subtract([_e,-_e]),A.getTopRight().add([_e,-_e]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var et=this._tiles[Oe].coords;(et.z!==this._tileZoom||!Me.contains(new ee(et.x,et.y)))&&(this._tiles[Oe].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(l,v);return}for(var ft=A.min.y;ft<=A.max.y;ft++)for(var Tt=A.min.x;Tt<=A.max.x;Tt++){var In=new ee(Tt,ft);if(In.z=this._tileZoom,!!this._isValidTile(In)){var Pn=this._tiles[this._tileCoordsToKey(In)];Pn?Pn.current=!0:re.push(In)}}if(re.sort(function(si,Eo){return si.distanceTo(H)-Eo.distanceTo(H)}),re.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mi=document.createDocumentFragment();for(Tt=0;Tt<re.length;Tt++)this._addTile(re[Tt],Mi);this._level.el.appendChild(Mi)}}}},_isValidTile:function(l){var f=this._map.options.crs;if(!f.infinite){var v=this._globalTileRange;if(!f.wrapLng&&(l.x<v.min.x||l.x>v.max.x)||!f.wrapLat&&(l.y<v.min.y||l.y>v.max.y))return!1}if(!this.options.bounds)return!0;var M=this._tileCoordsToBounds(l);return fe(this.options.bounds).overlaps(M)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var f=this._map,v=this.getTileSize(),M=l.scaleBy(v),A=M.add(v),H=f.unproject(M,l.z),re=f.unproject(A,l.z);return[H,re]},_tileCoordsToBounds:function(l){var f=this._tileCoordsToNwSe(l),v=new D(f[0],f[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var f=l.split(":"),v=new ee(+f[0],+f[1]);return v.z=+f[2],v},_removeTile:function(l){var f=this._tiles[l];f&&(un(f.el),delete this._tiles[l],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Mt(l,"leaflet-tile");var f=this.getTileSize();l.style.width=f.x+"px",l.style.height=f.y+"px",l.onselectstart=g,l.onmousemove=g,ce.ielt9&&this.options.opacity<1&&ii(l,this.options.opacity)},_addTile:function(l,f){var v=this._getTilePos(l),M=this._tileCoordsToKey(l),A=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(A),this.createTile.length<2&&U(o(this._tileReady,this,l,null,A)),Sn(A,v),this._tiles[M]={el:A,coords:l,current:!0},f.appendChild(A),this.fire("tileloadstart",{tile:A,coords:l})},_tileReady:function(l,f,v){f&&this.fire("tileerror",{error:f,tile:v,coords:l});var M=this._tileCoordsToKey(l);v=this._tiles[M],v&&(v.loaded=+new Date,this._map._fadeAnimated?(ii(v.el,0),K(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),f||(Mt(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var f=new ee(this._wrapX?p(l.x,this._wrapX):l.x,this._wrapY?p(l.y,this._wrapY):l.y);return f.z=l.z,f},_pxBoundsToTileRange:function(l){var f=this.getTileSize();return new G(l.min.unscaleBy(f).floor(),l.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function wo(l){return new ls(l)}var us=ls.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,f){this._url=l,f=b(this,f),f.detectRetina&&ce.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,f){return this._url===l&&f===void 0&&(f=!0),this._url=l,f||this.redraw(),this},createTile:function(l,f){var v=document.createElement("img");return vt(v,"load",o(this._tileOnLoad,this,f,v)),vt(v,"error",o(this._tileOnError,this,f,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(l),v},getTileUrl:function(l){var f={r:ce.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-l.y;this.options.tms&&(f.y=v),f["-y"]=v}return T(this._url,r(f,this.options))},_tileOnLoad:function(l,f){ce.ielt9?setTimeout(o(l,this,null,f),0):l(null,f)},_tileOnError:function(l,f,v){var M=this.options.errorTileUrl;M&&f.getAttribute("src")!==M&&(f.src=M),l(v,f)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,f=this.options.maxZoom,v=this.options.zoomReverse,M=this.options.zoomOffset;return v&&(l=f-l),l+M},_getSubdomain:function(l){var f=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var l,f;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(f=this._tiles[l].el,f.onload=g,f.onerror=g,!f.complete)){f.src=k;var v=this._tiles[l].coords;un(f),delete this._tiles[l],this.fire("tileabort",{tile:f,coords:v})}},_removeTile:function(l){var f=this._tiles[l];if(f)return f.el.setAttribute("src",k),ls.prototype._removeTile.call(this,l)},_tileReady:function(l,f,v){if(!(!this._map||v&&v.getAttribute("src")===k))return ls.prototype._tileReady.call(this,l,f,v)}});function Sc(l,f){return new us(l,f)}var wa=us.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,f){this._url=l;var v=r({},this.defaultWmsParams);for(var M in f)M in this.options||(v[M]=f[M]);f=b(this,f);var A=f.detectRetina&&ce.retina?2:1,H=this.getTileSize();v.width=H.x*A,v.height=H.y*A,this.wmsParams=v},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,us.prototype.onAdd.call(this,l)},getTileUrl:function(l){var f=this._tileCoordsToNwSe(l),v=this._crs,M=se(v.project(f[0]),v.project(f[1])),A=M.min,H=M.max,re=(this._wmsVersion>=1.3&&this._crs===xd?[A.y,A.x,H.y,H.x]:[A.x,A.y,H.x,H.y]).join(","),_e=us.prototype.getTileUrl.call(this,l);return _e+C(this.wmsParams,_e,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+re},setParams:function(l,f){return r(this.wmsParams,l),f||this.redraw(),this}});function Cd(l,f){return new wa(l,f)}us.WMS=wa,Sc.wms=Cd;var yr=Qi.extend({options:{padding:.1},initialize:function(l){b(this,l),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Mt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,f){var v=this._map.getZoomScale(f,this._zoom),M=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,f),H=M.multiplyBy(-v).add(A).subtract(this._map._getNewPixelOrigin(l,f));ce.any3d?Xi(this._container,H,v):Sn(this._container,H)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,f=this._map.getSize(),v=this._map.containerPointToLayerPoint(f.multiplyBy(-l)).round();this._bounds=new G(v,v.add(f.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Mc=yr.extend({options:{tolerance:0},getEvents:function(){var l=yr.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){yr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");vt(l,"mousemove",this._onMouseMove,this),vt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),vt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){K(this._redrawRequest),delete this._ctx,un(this._container),Xt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var f in this._layers)l=this._layers[f],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yr.prototype._update.call(this);var l=this._bounds,f=this._container,v=l.getSize(),M=ce.retina?2:1;Sn(f,l.min),f.width=M*v.x,f.height=M*v.y,f.style.width=v.x+"px",f.style.height=v.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){yr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[h(l)]=l;var f=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var f=l._order,v=f.next,M=f.prev;v?v.prev=M:this._drawLast=M,M?M.next=v:this._drawFirst=v,delete l._order,delete this._layers[h(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var f=l.options.dashArray.split(/[, ]+/),v=[],M,A;for(A=0;A<f.length;A++){if(M=Number(f[A]),isNaN(M))return;v.push(M)}l.options._dashArray=v}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var f=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(l._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(l._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var f=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,f=this._redrawBounds;if(this._ctx.save(),f){var v=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var M=this._drawFirst;M;M=M.next)l=M.layer,(!f||l._pxBounds&&l._pxBounds.intersects(f))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,f){if(this._drawing){var v,M,A,H,re=l._parts,_e=re.length,Me=this._ctx;if(_e){for(Me.beginPath(),v=0;v<_e;v++){for(M=0,A=re[v].length;M<A;M++)H=re[v][M],Me[M?"lineTo":"moveTo"](H.x,H.y);f&&Me.closePath()}this._fillStroke(Me,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var f=l._point,v=this._ctx,M=Math.max(Math.round(l._radius),1),A=(Math.max(Math.round(l._radiusY),1)||M)/M;A!==1&&(v.save(),v.scale(1,A)),v.beginPath(),v.arc(f.x,f.y/A,M,0,Math.PI*2,!1),A!==1&&v.restore(),this._fillStroke(v,l)}},_fillStroke:function(l,f){var v=f.options;v.fill&&(l.globalAlpha=v.fillOpacity,l.fillStyle=v.fillColor||v.color,l.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(l.setLineDash&&l.setLineDash(f.options&&f.options._dashArray||[]),l.globalAlpha=v.opacity,l.lineWidth=v.weight,l.strokeStyle=v.color,l.lineCap=v.lineCap,l.lineJoin=v.lineJoin,l.stroke())},_onClick:function(l){for(var f=this._map.mouseEventToLayerPoint(l),v,M,A=this._drawFirst;A;A=A.next)v=A.layer,v.options.interactive&&v._containsPoint(f)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(M=v);this._fireEvent(M?[M]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,f)}},_handleMouseOut:function(l){var f=this._hoveredLayer;f&&(nn(this._container,"leaflet-interactive"),this._fireEvent([f],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,f){if(!this._mouseHoverThrottled){for(var v,M,A=this._drawFirst;A;A=A.next)v=A.layer,v.options.interactive&&v._containsPoint(f)&&(M=v);M!==this._hoveredLayer&&(this._handleMouseOut(l),M&&(Mt(this._container,"leaflet-interactive"),this._fireEvent([M],l,"mouseover"),this._hoveredLayer=M)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,f,v){this._map._fireDOMEvent(f,v||f.type,l)},_bringToFront:function(l){var f=l._order;if(f){var v=f.next,M=f.prev;if(v)v.prev=M;else return;M?M.next=v:v&&(this._drawFirst=v),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(l)}},_bringToBack:function(l){var f=l._order;if(f){var v=f.next,M=f.prev;if(M)M.next=v;else return;v?v.prev=M:M&&(this._drawLast=M),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(l)}}});function Ec(l){return ce.canvas?new Mc(l):null}var bo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Pd={_initContainer:function(){this._container=Et("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(yr.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var f=l._container=bo("shape");Mt(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",l._path=bo("path"),f.appendChild(l._path),this._updateStyle(l),this._layers[h(l)]=l},_addPath:function(l){var f=l._container;this._container.appendChild(f),l.options.interactive&&l.addInteractiveTarget(f)},_removePath:function(l){var f=l._container;un(f),l.removeInteractiveTarget(f),delete this._layers[h(l)]},_updateStyle:function(l){var f=l._stroke,v=l._fill,M=l.options,A=l._container;A.stroked=!!M.stroke,A.filled=!!M.fill,M.stroke?(f||(f=l._stroke=bo("stroke")),A.appendChild(f),f.weight=M.weight+"px",f.color=M.color,f.opacity=M.opacity,M.dashArray?f.dashStyle=R(M.dashArray)?M.dashArray.join(" "):M.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=M.lineCap.replace("butt","flat"),f.joinstyle=M.lineJoin):f&&(A.removeChild(f),l._stroke=null),M.fill?(v||(v=l._fill=bo("fill")),A.appendChild(v),v.color=M.fillColor||M.color,v.opacity=M.fillOpacity):v&&(A.removeChild(v),l._fill=null)},_updateCircle:function(l){var f=l._point.round(),v=Math.round(l._radius),M=Math.round(l._radiusY||v);this._setPath(l,l._empty()?"M0 0":"AL "+f.x+","+f.y+" "+v+","+M+" 0,"+65535*360)},_setPath:function(l,f){l._path.v=f},_bringToFront:function(l){ao(l._container)},_bringToBack:function(l){Or(l._container)}},tr=ce.vml?bo:je,Fs=yr.extend({_initContainer:function(){this._container=tr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=tr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){un(this._container),Xt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yr.prototype._update.call(this);var l=this._bounds,f=l.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,v.setAttribute("width",f.x),v.setAttribute("height",f.y)),Sn(v,l.min),v.setAttribute("viewBox",[l.min.x,l.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(l){var f=l._path=tr("path");l.options.className&&Mt(f,l.options.className),l.options.interactive&&Mt(f,"leaflet-interactive"),this._updateStyle(l),this._layers[h(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){un(l._path),l.removeInteractiveTarget(l._path),delete this._layers[h(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var f=l._path,v=l.options;f&&(v.stroke?(f.setAttribute("stroke",v.color),f.setAttribute("stroke-opacity",v.opacity),f.setAttribute("stroke-width",v.weight),f.setAttribute("stroke-linecap",v.lineCap),f.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?f.setAttribute("stroke-dasharray",v.dashArray):f.removeAttribute("stroke-dasharray"),v.dashOffset?f.setAttribute("stroke-dashoffset",v.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),v.fill?(f.setAttribute("fill",v.fillColor||v.color),f.setAttribute("fill-opacity",v.fillOpacity),f.setAttribute("fill-rule",v.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(l,f){this._setPath(l,Ie(l._parts,f))},_updateCircle:function(l){var f=l._point,v=Math.max(Math.round(l._radius),1),M=Math.max(Math.round(l._radiusY),1)||v,A="a"+v+","+M+" 0 1,0 ",H=l._empty()?"M0 0":"M"+(f.x-v)+","+f.y+A+v*2+",0 "+A+-v*2+",0 ";this._setPath(l,H)},_setPath:function(l,f){l._path.setAttribute("d",f)},_bringToFront:function(l){ao(l._path)},_bringToBack:function(l){Or(l._path)}});ce.vml&&Fs.include(Pd);function kl(l){return ce.svg||ce.vml?new Fs(l):null}Dt.include({getRenderer:function(l){var f=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var f=this._paneRenderers[l];return f===void 0&&(f=this._createRenderer({pane:l}),this._paneRenderers[l]=f),f},_createRenderer:function(l){return this.options.preferCanvas&&Ec(l)||kl(l)}});var Ad=Hr.extend({initialize:function(l,f){Hr.prototype.initialize.call(this,this._boundsToLatLngs(l),f)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=fe(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function Fm(l,f){return new Ad(l,f)}Fs.create=tr,Fs.pointsToPath=Ie,gr.geometryToLayer=_o,gr.coordsToLatLng=El,gr.coordsToLatLngs=va,gr.latLngToCoords=Tl,gr.latLngsToCoords=Ll,gr.getFeature=yo,gr.asFeature=Cl,Dt.mergeOptions({boxZoom:!0});var So=Ai.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){vt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){un(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ft(),fl(),this._startPoint=this._map.mouseEventToContainerPoint(l),vt(document,{contextmenu:Ki,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Et("div","leaflet-zoom-box",this._container),Mt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var f=new G(this._point,this._startPoint),v=f.getSize();Sn(this._box,f.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(un(this._box),nn(this._container,"leaflet-crosshair")),co(),pl(),Xt(document,{contextmenu:Ki,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var f=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Dt.addInitHook("addHandler","boxZoom",So),Dt.mergeOptions({doubleClickZoom:!0});var kd=Ai.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var f=this._map,v=f.getZoom(),M=f.options.zoomDelta,A=l.originalEvent.shiftKey?v-M:v+M;f.options.doubleClickZoom==="center"?f.setZoom(A):f.setZoomAround(l.containerPoint,A)}});Dt.addInitHook("addHandler","doubleClickZoom",kd),Dt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Tc=Ai.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Ji(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Mt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){nn(this._map._container,"leaflet-grab"),nn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=fe(this._map.options.maxBounds);this._offsetLimit=se(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var f=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(f),this._prunePositions(f)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,f){return l-(l-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;l.x<f.min.x&&(l.x=this._viscousLimit(l.x,f.min.x)),l.y<f.min.y&&(l.y=this._viscousLimit(l.y,f.min.y)),l.x>f.max.x&&(l.x=this._viscousLimit(l.x,f.max.x)),l.y>f.max.y&&(l.y=this._viscousLimit(l.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,f=Math.round(l/2),v=this._initialWorldOffset,M=this._draggable._newPos.x,A=(M-f+v)%l+f-v,H=(M+f+v)%l-f-v,re=Math.abs(A+v)<Math.abs(H+v)?A:H;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=re},_onDragEnd:function(l){var f=this._map,v=f.options,M=!v.inertia||l.noInertia||this._times.length<2;if(f.fire("dragend",l),M)f.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),H=(this._lastTime-this._times[0])/1e3,re=v.easeLinearity,_e=A.multiplyBy(re/H),Me=_e.distanceTo([0,0]),Oe=Math.min(v.inertiaMaxSpeed,Me),et=_e.multiplyBy(Oe/Me),ft=Oe/(v.inertiaDeceleration*re),Tt=et.multiplyBy(-ft/2).round();!Tt.x&&!Tt.y?f.fire("moveend"):(Tt=f._limitOffset(Tt,f.options.maxBounds),U(function(){f.panBy(Tt,{duration:ft,easeLinearity:re,noMoveStart:!0,animate:!0})}))}}});Dt.addInitHook("addHandler","dragging",Tc),Dt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Lc=Ai.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),vt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,f=document.documentElement,v=l.scrollTop||f.scrollTop,M=l.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(M,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var f=this._panKeys={},v=this.keyCodes,M,A;for(M=0,A=v.left.length;M<A;M++)f[v.left[M]]=[-1*l,0];for(M=0,A=v.right.length;M<A;M++)f[v.right[M]]=[l,0];for(M=0,A=v.down.length;M<A;M++)f[v.down[M]]=[0,l];for(M=0,A=v.up.length;M<A;M++)f[v.up[M]]=[0,-1*l]},_setZoomDelta:function(l){var f=this._zoomKeys={},v=this.keyCodes,M,A;for(M=0,A=v.zoomIn.length;M<A;M++)f[v.zoomIn[M]]=l;for(M=0,A=v.zoomOut.length;M<A;M++)f[v.zoomOut[M]]=-l},_addHooks:function(){vt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var f=l.keyCode,v=this._map,M;if(f in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(M=this._panKeys[f],l.shiftKey&&(M=O(M).multiplyBy(3)),v.options.maxBounds&&(M=v._limitOffset(O(M),v.options.maxBounds)),v.options.worldCopyJump){var A=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(M)));v.panTo(A)}else v.panBy(M)}else if(f in this._zoomKeys)v.setZoom(v.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;Ki(l)}}});Dt.addInitHook("addHandler","keyboard",Lc),Dt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Yt=Ai.extend({addHooks:function(){vt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var f=dd(l),v=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var M=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),M),Ki(l)},_performZoom:function(){var l=this._map,f=l.getZoom(),v=this._map.options.zoomSnap||0;l._stop();var M=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(M))))/Math.LN2,H=v?Math.ceil(A/v)*v:A,re=l._limitZoom(f+(this._delta>0?H:-H))-f;this._delta=0,this._startTime=null,re&&(l.options.scrollWheelZoom==="center"?l.setZoom(f+re):l.setZoomAround(this._lastMousePos,f+re))}});Dt.addInitHook("addHandler","scrollWheelZoom",Yt);var Cc=600;Dt.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var ba=Ai.extend({addHooks:function(){vt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var f=l.touches[0];this._startPos=this._newPos=new ee(f.clientX,f.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(vt(document,"touchend",_n),vt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),Cc),vt(document,"touchend touchcancel contextmenu",this._cancel,this),vt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Xt(document,"touchend",_n),Xt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Xt(document,"touchend touchcancel contextmenu",this._cancel,this),Xt(document,"touchmove",this._onMove,this)},_onMove:function(l){var f=l.touches[0];this._newPos=new ee(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,f){var v=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});v._simulated=!0,f.target.dispatchEvent(v)}});Dt.addInitHook("addHandler","tapHold",ba),Dt.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var Mo=Ai.extend({addHooks:function(){Mt(this._map._container,"leaflet-touch-zoom"),vt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){nn(this._map._container,"leaflet-touch-zoom"),Xt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var f=this._map;if(!(!l.touches||l.touches.length!==2||f._animatingZoom||this._zooming)){var v=f.mouseEventToContainerPoint(l.touches[0]),M=f.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(v.add(M)._divideBy(2))),this._startDist=v.distanceTo(M),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),vt(document,"touchmove",this._onTouchMove,this),vt(document,"touchend touchcancel",this._onTouchEnd,this),_n(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var f=this._map,v=f.mouseEventToContainerPoint(l.touches[0]),M=f.mouseEventToContainerPoint(l.touches[1]),A=v.distanceTo(M)/this._startDist;if(this._zoom=f.getScaleZoom(A,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&A<1||this._zoom>f.getMaxZoom()&&A>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var H=v._add(M)._divideBy(2)._subtract(this._centerPoint);if(A===1&&H.x===0&&H.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(H),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),K(this._animRequest);var re=o(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(re,this,!0),_n(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,K(this._animRequest),Xt(document,"touchmove",this._onTouchMove,this),Xt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Dt.addInitHook("addHandler","touchZoom",Mo),Dt.BoxZoom=So,Dt.DoubleClickZoom=kd,Dt.Drag=Tc,Dt.Keyboard=Lc,Dt.ScrollWheelZoom=Yt,Dt.TapHold=ba,Dt.TouchZoom=Mo,t.Bounds=G,t.Browser=ce,t.CRS=Ne,t.Canvas=Mc,t.Circle=Sl,t.CircleMarker=bl,t.Class=Q,t.Control=bi,t.DivIcon=Al,t.DivOverlay=_r,t.DomEvent=_l,t.DomUtil=fa,t.Draggable=Ji,t.Evented=ae,t.FeatureGroup=Br,t.GeoJSON=gr,t.GridLayer=ls,t.Handler=Ai,t.Icon=zs,t.ImageOverlay=as,t.LatLng=ve,t.LatLngBounds=D,t.Layer=Qi,t.LayerGroup=ss,t.LineUtil=vd,t.Map=Dt,t.Marker=Ur,t.Mixin=hc,t.Path=os,t.Point=ee,t.PolyUtil=Lm,t.Polygon=Hr,t.Polyline=Si,t.Popup=Pl,t.PosAnimation=yl,t.Projection=Rm,t.Rectangle=Ad,t.Renderer=yr,t.SVG=Fs,t.SVGOverlay=wc,t.TileLayer=us,t.Tooltip=xo,t.Transformation=We,t.Util=Y,t.VideoOverlay=xc,t.bind=o,t.bounds=se,t.canvas=Ec,t.circle=ya,t.circleMarker=Sd,t.control=rs,t.divIcon=Ld,t.extend=r,t.featureGroup=wd,t.geoJSON=Md,t.geoJson=er,t.gridLayer=wo,t.icon=bd,t.imageOverlay=Ed,t.latLng=te,t.latLngBounds=fe,t.layerGroup=_a,t.map=is,t.marker=Nm,t.point=O,t.polygon=zm,t.polyline=Om,t.popup=vo,t.rectangle=Fm,t.setOptions=b,t.stamp=h,t.svg=kl,t.svgOverlay=bc,t.tileLayer=Sc,t.tooltip=xa,t.transformation=be,t.version=i,t.videoOverlay=Td;var Rd=window.L;t.noConflict=function(){return window.L=Rd,this},window.L=t}))})(fh,fh.exports)),fh.exports}var il=kP();const hM=Vu(il);function ed(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function qp(n,e){return e==null?function(i,r){const s=me.useRef();return s.current||(s.current=n(i,r)),s}:function(i,r){const s=me.useRef();s.current||(s.current=n(i,r));const o=me.useRef(i),{instance:u}=s.current;return me.useEffect(function(){o.current!==i&&(e(u,i,o.current),o.current=i)},[u,i,r]),s}}function dM(n,e){me.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){e.layerContainer?.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function fM(n){return function(t){const i=$p(),r=n(Zp(t,i),i);return aM(i.map,t.attribution),ov(r.current,t.eventHandlers),dM(r.current,i),r}}function RP(n,e){const t=me.useRef();me.useEffect(function(){if(e.pathOptions!==t.current){const r=e.pathOptions??{};n.instance.setStyle(r),t.current=r}},[n,e])}function IP(n){return function(t){const i=$p(),r=n(Zp(t,i),i);return ov(r.current,t.eventHandlers),dM(r.current,i),RP(r.current,t),r}}function DP(n,e){const t=qp(n,e),i=fM(t);return cM(i)}function NP(n,e){const t=qp(n),i=PP(t,e);return LP(i)}function pM(n,e){const t=qp(n,e),i=IP(t);return cM(i)}function OP(n,e){const t=qp(n,e),i=fM(t);return CP(i)}function zP(n,e,t){const{opacity:i,zIndex:r}=e;i!=null&&i!==t.opacity&&n.setOpacity(i),r!=null&&r!==t.zIndex&&n.setZIndex(r)}function av(){return $p().map}function FP(n){const e=av();return me.useEffect(function(){return e.on(n),function(){e.off(n)}},[e,n]),e}function py(){return py=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},py.apply(this,arguments)}function BP({bounds:n,boundsOptions:e,center:t,children:i,className:r,id:s,placeholder:o,style:u,whenReady:h,zoom:d,...p},g){const[_]=me.useState({className:r,id:s,style:u}),[y,w]=me.useState(null);me.useImperativeHandle(g,()=>y?.map??null,[y]);const b=me.useCallback(S=>{if(S!==null&&y===null){const T=new il.Map(S,p);t!=null&&d!=null?T.setView(t,d):n!=null&&T.fitBounds(n,e),h!=null&&T.whenReady(h),w(TP(T))}},[]);me.useEffect(()=>()=>{y?.map.remove()},[y]);const C=y?fi.createElement(uM,{value:y},i):o??null;return fi.createElement("div",py({},_,{ref:b}),C)}const Xp=me.forwardRef(BP),Nu=DP(function({position:e,...t},i){const r=new il.Marker(e,t);return ed(r,sv(i,{overlayContainer:r}))},function(e,t,i){t.position!==i.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==i.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==i.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==i.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),mM=pM(function({positions:e,...t},i){const r=new il.Polygon(e,t);return ed(r,sv(i,{overlayContainer:r}))},function(e,t,i){t.positions!==i.positions&&e.setLatLngs(t.positions)}),Lp=pM(function({positions:e,...t},i){const r=new il.Polyline(e,t);return ed(r,sv(i,{overlayContainer:r}))},function(e,t,i){t.positions!==i.positions&&e.setLatLngs(t.positions)}),Oh=NP(function(e,t){const i=new il.Popup(e,t.overlayContainer);return ed(i,t)},function(e,t,{position:i},r){me.useEffect(function(){const{instance:o}=e;function u(d){d.popup===o&&(o.update(),r(!0))}function h(d){d.popup===o&&r(!1)}return t.map.on({popupopen:u,popupclose:h}),t.overlayContainer==null?(i!=null&&o.setLatLng(i),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){t.map.off({popupopen:u,popupclose:h}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(o)}},[e,t,r,i])}),Yp=OP(function({url:e,...t},i){const r=new il.TileLayer(e,Zp(t,i));return ed(r,i)},function(e,t,i){zP(e,t,i);const{url:r}=t;r!=null&&r!==i.url&&e.setUrl(r)});function UP({siteData:n,setSiteData:e,initialData:t={}}){const[i,r]=me.useState("single"),[s,o]=me.useState(""),[u,h]=me.useState([]),[d,p]=me.useState(!1);function g(b){return(b||"").split(`
`).map((C,S)=>C.trim()).filter(C=>C.length>0).map((C,S)=>{const T=C.split(/[\s,]+/);return i==="single"?{name:n.name||`Site-${S+1}`,lat:parseFloat(T[0])||0,lon:parseFloat(T[1])||0}:{name:T[0]||`Site-${S+1}`,lat:parseFloat(T[1])||0,lon:parseFloat(T[2])||0}})}function _(){const b=g(s),C={...n,sites:b};e(C),alert("Site parameters updated!")}const y=()=>{h(g(s)),p(!0)};function w({coords:b}){const C=av();if(b.length>0){const S=hM.latLngBounds(b.map(T=>[T.lat,T.lon]));C.fitBounds(S,{padding:[30,30]})}return null}return me.useEffect(()=>{t&&Object.keys(t).length>0&&e(t)},[t]),V.jsxs("div",{className:"p-4 space-y-4",children:[V.jsxs("div",{className:"flex items-center space-x-4",children:[V.jsxs("label",{className:"flex items-center space-x-2",children:[V.jsx("input",{type:"radio",checked:i==="single",onChange:()=>r("single")}),V.jsx("span",{children:"Single Site"})]}),V.jsxs("label",{className:"flex items-center space-x-2",children:[V.jsx("input",{type:"radio",checked:i==="multi",onChange:()=>r("multi")}),V.jsx("span",{children:"Multi Site"})]})]}),i==="single"&&V.jsxs(V.Fragment,{children:[V.jsxs("div",{children:[V.jsx("label",{className:"block font-semibold",children:"Site Name"}),V.jsx("input",{type:"text",className:"input",value:n.name||"",onChange:b=>e({...n,name:b.target.value})})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium mb-2",children:"Coordinate (Latitude, Longitude)"}),V.jsx("textarea",{rows:2,value:s,onChange:b=>o(b.target.value),placeholder:"-6.9 107.6",className:"w-full border px-3 py-2 rounded-lg font-mono text-sm"}),V.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",V.jsx("code",{children:"Lat Lon"})]})]})]}),i==="multi"&&V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium mb-2",children:"Input Sites (Name, Latitude, Longitude)"}),V.jsx("textarea",{rows:6,value:s,onChange:b=>o(b.target.value),placeholder:`SiteA -6.9 107.6
SiteB -7.0 108.1`,className:"w-full border px-3 py-2 rounded-lg font-mono text-sm"}),V.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",V.jsx("code",{children:"Name Lat Lon"}),", pisahkan dengan spasi/koma/tab."]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block font-semibold",children:"Rock/Soil Site"}),V.jsxs("select",{className:"input",value:n.siteType||"",onChange:b=>{const C={...n,siteType:b.target.value};e(C)},children:[V.jsx("option",{value:"",children:"Select"}),V.jsx("option",{value:"rock",children:"Rock Site"}),V.jsx("option",{value:"soil",children:"Soil Site"})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block font-semibold",children:"Wall"}),V.jsxs("select",{className:"input",value:n.wall||"",onChange:b=>e({...n,wall:b.target.value}),children:[V.jsx("option",{value:"",children:"Select"}),V.jsx("option",{value:"hanging",children:"Site on Hanging Wall"}),V.jsx("option",{value:"foot",children:"Site on Foot Wall"})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block font-semibold",children:"Vs30 (m/s)"}),V.jsx("input",{type:"number",className:"input",value:n.vs30||"",onChange:b=>e({...n,vs30:b.target.value})})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block font-semibold",children:"Depth of Basement Rock (D, km)"}),V.jsx("input",{type:"number",className:"input",value:n.depth||"",onChange:b=>e({...n,depth:b.target.value})})]}),V.jsxs("div",{className:"flex space-x-2",children:[V.jsx("button",{onClick:y,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"Preview on Map"}),V.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Update"})]}),d&&u.length>0&&V.jsx("div",{className:"mt-4 h-64 border rounded-lg overflow-hidden",children:V.jsxs(Xp,{center:[-6.9,107.6],zoom:6,className:"h-full w-full",children:[V.jsx(Yp,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),V.jsx(w,{coords:u}),u.map((b,C)=>V.jsx(Nu,{position:[b.lat,b.lon],children:V.jsxs(Oh,{children:[V.jsx("strong",{children:b.name}),V.jsx("br",{}),"Lat: ",b.lat,", Lon: ",b.lon]})},C))]})})]})}function HP({datasources:n,selectedSources:e,setSelectedSources:t,selectedGmpes:i,setSelectedGmpes:r,siteParameter:s}){const[o,u]=me.useState([]),[h,d]=me.useState(!0),[p,g]=me.useState(null),_="https://sha-api-production.up.railway.app/api/v1";me.useEffect(()=>{async function R(){try{const F=await fetch(`${_}/gmpe`);if(!F.ok)throw new Error(`Fetch status: ${F.status}`);const k=await F.json();u(Array.isArray(k)?k:k.data||[])}catch(F){console.error("❌ GMPE fetch error:",F),g(F.message||"Gagal fetch GMPE")}finally{d(!1)}}R()},[_]);const y=R=>t(F=>F.some(k=>k.id===R.id)?F.filter(k=>k.id!==R.id):[...F,R]),w=()=>t(R=>R.length===n.length?[]:n),b=R=>{r(F=>F.find(z=>z.gmpeId===R.id)?F.filter(z=>z.gmpeId!==R.id):[...F,{gmpeId:R.id,gmpeName:R.name,weight:0}])},C=(R,F)=>{r(k=>k.map(z=>z.gmpeId===R?{...z,weight:parseFloat(F)||0}:z))},S=o.filter(R=>!(s&&R.site_type?.toLowerCase()!==s.toLowerCase()||e.length>0&&!e.map(k=>k.mechanism?.toLowerCase()).includes(R.mechanism?.toLowerCase())));if(h)return V.jsx("div",{className:"p-4",children:"⏳ Memuat GMPE..."});if(p)return V.jsxs("div",{className:"p-4 text-red-500",children:["❌ ",p]});const T=i.reduce((R,F)=>R+(F.weight||0),0);return V.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[V.jsxs("div",{className:"border rounded-lg p-4 flex flex-col",children:[V.jsx("h2",{className:"font-semibold mb-2",children:"Available Datasources"}),V.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[V.jsx("input",{type:"checkbox",checked:e.length===n.length&&n.length>0,onChange:w}),V.jsx("span",{className:"font-medium",children:"Select All"})]}),V.jsx("div",{className:"flex-1 max-h-80 overflow-y-auto pr-2 space-y-1",children:n.length===0?V.jsx("p",{className:"text-gray-500",children:"No datasource available"}):n.map(R=>{const F=e.some(k=>k.id===R.id);return V.jsx("div",{onClick:()=>y(R),className:`cursor-pointer px-3 py-2 rounded border ${F?"bg-blue-100 border-blue-400":"hover:bg-gray-100 border-gray-300"}`,children:R.name||"Unnamed Source"},R.id)})})]}),V.jsxs("div",{className:"border rounded-lg p-4 flex flex-col",children:[V.jsx("h2",{className:"font-semibold mb-2",children:"Available GMPEs"}),s?S.length===0?V.jsxs("p",{className:"text-gray-500",children:["Tidak ada GMPE tersedia untuk site ",V.jsx("strong",{children:s})]}):V.jsx("div",{className:"flex-1 max-h-80 overflow-y-auto pr-2 space-y-1",children:S.map(R=>{const F=i.find(k=>k.gmpeId===R.id);return V.jsxs("div",{onClick:()=>b(R),className:`cursor-pointer px-3 py-2 rounded border flex items-center justify-between ${F?"bg-blue-100 border-blue-400":"hover:bg-gray-100 border-gray-300"}`,children:[V.jsxs("span",{children:[R.name," (",R.year||"-",", ",R.tectonic_region||R.region||"-",")"]}),F&&V.jsx("input",{type:"number",step:"0.01",value:F.weight,onChange:k=>C(R.id,k.target.value),onClick:k=>k.stopPropagation(),className:"w-20 border rounded px-2 py-1 text-right"})]},R.id)})}):V.jsx("div",{className:"text-gray-500 italic",children:"Pilih site parameter (Rock / Soil) terlebih dahulu"}),s&&V.jsxs("div",{className:`mt-2 text-sm ${Math.abs(T-1)>.001?"text-red-600 font-semibold":"text-gray-600"}`,children:["Total weight = ",V.jsx("strong",{children:T.toFixed(2)})," ",Math.abs(T-1)>.001?"(harus = 1.0)":"✅ Sudah valid"]})]})]})}function gM(n,e){return function(){return n.apply(e,arguments)}}const{toString:VP}=Object.prototype,{getPrototypeOf:lv}=Object,{iterator:Kp,toStringTag:_M}=Symbol,Jp=(n=>e=>{const t=VP.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ts=n=>(n=n.toLowerCase(),e=>Jp(e)===n),Qp=n=>e=>typeof e===n,{isArray:Gu}=Array,zh=Qp("undefined");function td(n){return n!==null&&!zh(n)&&n.constructor!==null&&!zh(n.constructor)&&Hi(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const yM=ts("ArrayBuffer");function WP(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&yM(n.buffer),e}const jP=Qp("string"),Hi=Qp("function"),vM=Qp("number"),nd=n=>n!==null&&typeof n=="object",GP=n=>n===!0||n===!1,yp=n=>{if(Jp(n)!=="object")return!1;const e=lv(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(_M in n)&&!(Kp in n)},$P=n=>{if(!nd(n)||td(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},ZP=ts("Date"),qP=ts("File"),XP=ts("Blob"),YP=ts("FileList"),KP=n=>nd(n)&&Hi(n.pipe),JP=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Hi(n.append)&&((e=Jp(n))==="formdata"||e==="object"&&Hi(n.toString)&&n.toString()==="[object FormData]"))},QP=ts("URLSearchParams"),[eA,tA,nA,iA]=["ReadableStream","Request","Response","Headers"].map(ts),rA=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function id(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),Gu(n))for(i=0,r=n.length;i<r;i++)e.call(null,n[i],i,n);else{if(td(n))return;const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let u;for(i=0;i<o;i++)u=s[i],e.call(null,n[u],u,n)}}function xM(n,e){if(td(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,r;for(;i-- >0;)if(r=t[i],e===r.toLowerCase())return r;return null}const Ga=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wM=n=>!zh(n)&&n!==Ga;function my(){const{caseless:n}=wM(this)&&this||{},e={},t=(i,r)=>{const s=n&&xM(e,r)||r;yp(e[s])&&yp(i)?e[s]=my(e[s],i):yp(i)?e[s]=my({},i):Gu(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&id(arguments[i],t);return e}const sA=(n,e,t,{allOwnKeys:i}={})=>(id(e,(r,s)=>{t&&Hi(r)?n[s]=gM(r,t):n[s]=r},{allOwnKeys:i}),n),oA=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),aA=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},lA=(n,e,t,i)=>{let r,s,o;const u={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)o=r[s],(!i||i(o,n,e))&&!u[o]&&(e[o]=n[o],u[o]=!0);n=t!==!1&&lv(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},uA=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},cA=n=>{if(!n)return null;if(Gu(n))return n;let e=n.length;if(!vM(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},hA=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&lv(Uint8Array)),dA=(n,e)=>{const i=(n&&n[Kp]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(n,s[0],s[1])}},fA=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},pA=ts("HTMLFormElement"),mA=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,r){return i.toUpperCase()+r}),ew=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),gA=ts("RegExp"),bM=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};id(t,(r,s)=>{let o;(o=e(r,s,n))!==!1&&(i[s]=o||r)}),Object.defineProperties(n,i)},_A=n=>{bM(n,(e,t)=>{if(Hi(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(Hi(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},yA=(n,e)=>{const t={},i=r=>{r.forEach(s=>{t[s]=!0})};return Gu(n)?i(n):i(String(n).split(e)),t},vA=()=>{},xA=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function wA(n){return!!(n&&Hi(n.append)&&n[_M]==="FormData"&&n[Kp])}const bA=n=>{const e=new Array(10),t=(i,r)=>{if(nd(i)){if(e.indexOf(i)>=0)return;if(td(i))return i;if(!("toJSON"in i)){e[r]=i;const s=Gu(i)?[]:{};return id(i,(o,u)=>{const h=t(o,r+1);!zh(h)&&(s[u]=h)}),e[r]=void 0,s}}return i};return t(n,0)},SA=ts("AsyncFunction"),MA=n=>n&&(nd(n)||Hi(n))&&Hi(n.then)&&Hi(n.catch),SM=((n,e)=>n?setImmediate:e?((t,i)=>(Ga.addEventListener("message",({source:r,data:s})=>{r===Ga&&s===t&&i.length&&i.shift()()},!1),r=>{i.push(r),Ga.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Hi(Ga.postMessage)),EA=typeof queueMicrotask<"u"?queueMicrotask.bind(Ga):typeof process<"u"&&process.nextTick||SM,TA=n=>n!=null&&Hi(n[Kp]),Te={isArray:Gu,isArrayBuffer:yM,isBuffer:td,isFormData:JP,isArrayBufferView:WP,isString:jP,isNumber:vM,isBoolean:GP,isObject:nd,isPlainObject:yp,isEmptyObject:$P,isReadableStream:eA,isRequest:tA,isResponse:nA,isHeaders:iA,isUndefined:zh,isDate:ZP,isFile:qP,isBlob:XP,isRegExp:gA,isFunction:Hi,isStream:KP,isURLSearchParams:QP,isTypedArray:hA,isFileList:YP,forEach:id,merge:my,extend:sA,trim:rA,stripBOM:oA,inherits:aA,toFlatObject:lA,kindOf:Jp,kindOfTest:ts,endsWith:uA,toArray:cA,forEachEntry:dA,matchAll:fA,isHTMLForm:pA,hasOwnProperty:ew,hasOwnProp:ew,reduceDescriptors:bM,freezeMethods:_A,toObjectSet:yA,toCamelCase:mA,noop:vA,toFiniteNumber:xA,findKey:xM,global:Ga,isContextDefined:wM,isSpecCompliantForm:wA,toJSONObject:bA,isAsyncFn:SA,isThenable:MA,setImmediate:SM,asap:EA,isIterable:TA};function Lt(n,e,t,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}Te.inherits(Lt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const MM=Lt.prototype,EM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{EM[n]={value:n}});Object.defineProperties(Lt,EM);Object.defineProperty(MM,"isAxiosError",{value:!0});Lt.from=(n,e,t,i,r,s)=>{const o=Object.create(MM);return Te.toFlatObject(n,o,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Lt.call(o,n.message,e,t,i,r),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const LA=null;function gy(n){return Te.isPlainObject(n)||Te.isArray(n)}function TM(n){return Te.endsWith(n,"[]")?n.slice(0,-2):n}function tw(n,e,t){return n?n.concat(e).map(function(r,s){return r=TM(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function CA(n){return Te.isArray(n)&&!n.some(gy)}const PA=Te.toFlatObject(Te,{},null,function(e){return/^is[A-Z]/.test(e)});function em(n,e,t){if(!Te.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Te.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,C){return!Te.isUndefined(C[b])});const i=t.metaTokens,r=t.visitor||p,s=t.dots,o=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(e);if(!Te.isFunction(r))throw new TypeError("visitor must be a function");function d(w){if(w===null)return"";if(Te.isDate(w))return w.toISOString();if(Te.isBoolean(w))return w.toString();if(!h&&Te.isBlob(w))throw new Lt("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(w)||Te.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function p(w,b,C){let S=w;if(w&&!C&&typeof w=="object"){if(Te.endsWith(b,"{}"))b=i?b:b.slice(0,-2),w=JSON.stringify(w);else if(Te.isArray(w)&&CA(w)||(Te.isFileList(w)||Te.endsWith(b,"[]"))&&(S=Te.toArray(w)))return b=TM(b),S.forEach(function(R,F){!(Te.isUndefined(R)||R===null)&&e.append(o===!0?tw([b],F,s):o===null?b:b+"[]",d(R))}),!1}return gy(w)?!0:(e.append(tw(C,b,s),d(w)),!1)}const g=[],_=Object.assign(PA,{defaultVisitor:p,convertValue:d,isVisitable:gy});function y(w,b){if(!Te.isUndefined(w)){if(g.indexOf(w)!==-1)throw Error("Circular reference detected in "+b.join("."));g.push(w),Te.forEach(w,function(S,T){(!(Te.isUndefined(S)||S===null)&&r.call(e,S,Te.isString(T)?T.trim():T,b,_))===!0&&y(S,b?b.concat(T):[T])}),g.pop()}}if(!Te.isObject(n))throw new TypeError("data must be an object");return y(n),e}function nw(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function uv(n,e){this._pairs=[],n&&em(n,this,e)}const LM=uv.prototype;LM.append=function(e,t){this._pairs.push([e,t])};LM.toString=function(e){const t=e?function(i){return e.call(this,i,nw)}:nw;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function AA(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function CM(n,e,t){if(!e)return n;const i=t&&t.encode||AA;Te.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let s;if(r?s=r(e,t):s=Te.isURLSearchParams(e)?e.toString():new uv(e,t).toString(i),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class iw{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Te.forEach(this.handlers,function(i){i!==null&&e(i)})}}const PM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kA=typeof URLSearchParams<"u"?URLSearchParams:uv,RA=typeof FormData<"u"?FormData:null,IA=typeof Blob<"u"?Blob:null,DA={isBrowser:!0,classes:{URLSearchParams:kA,FormData:RA,Blob:IA},protocols:["http","https","file","blob","url","data"]},cv=typeof window<"u"&&typeof document<"u",_y=typeof navigator=="object"&&navigator||void 0,NA=cv&&(!_y||["ReactNative","NativeScript","NS"].indexOf(_y.product)<0),OA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zA=cv&&window.location.href||"http://localhost",FA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cv,hasStandardBrowserEnv:NA,hasStandardBrowserWebWorkerEnv:OA,navigator:_y,origin:zA},Symbol.toStringTag,{value:"Module"})),di={...FA,...DA};function BA(n,e){return em(n,new di.classes.URLSearchParams,{visitor:function(t,i,r,s){return di.isNode&&Te.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function UA(n){return Te.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function HA(n){const e={},t=Object.keys(n);let i;const r=t.length;let s;for(i=0;i<r;i++)s=t[i],e[s]=n[s];return e}function AM(n){function e(t,i,r,s){let o=t[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),h=s>=t.length;return o=!o&&Te.isArray(r)?r.length:o,h?(Te.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!u):((!r[o]||!Te.isObject(r[o]))&&(r[o]=[]),e(t,i,r[o],s)&&Te.isArray(r[o])&&(r[o]=HA(r[o])),!u)}if(Te.isFormData(n)&&Te.isFunction(n.entries)){const t={};return Te.forEachEntry(n,(i,r)=>{e(UA(i),r,t,0)}),t}return null}function VA(n,e,t){if(Te.isString(n))try{return(e||JSON.parse)(n),Te.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const rd={transitional:PM,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,s=Te.isObject(e);if(s&&Te.isHTMLForm(e)&&(e=new FormData(e)),Te.isFormData(e))return r?JSON.stringify(AM(e)):e;if(Te.isArrayBuffer(e)||Te.isBuffer(e)||Te.isStream(e)||Te.isFile(e)||Te.isBlob(e)||Te.isReadableStream(e))return e;if(Te.isArrayBufferView(e))return e.buffer;if(Te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return BA(e,this.formSerializer).toString();if((u=Te.isFileList(e))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return em(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),VA(e)):e}],transformResponse:[function(e){const t=this.transitional||rd.transitional,i=t&&t.forcedJSONParsing,r=this.responseType==="json";if(Te.isResponse(e)||Te.isReadableStream(e))return e;if(e&&Te.isString(e)&&(i&&!this.responseType||r)){const o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(u){if(o)throw u.name==="SyntaxError"?Lt.from(u,Lt.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:di.classes.FormData,Blob:di.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],n=>{rd.headers[n]={}});const WA=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jA=n=>{const e={};let t,i,r;return n&&n.split(`
`).forEach(function(o){r=o.indexOf(":"),t=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!t||e[t]&&WA[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},rw=Symbol("internals");function Gc(n){return n&&String(n).trim().toLowerCase()}function vp(n){return n===!1||n==null?n:Te.isArray(n)?n.map(vp):String(n)}function GA(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const $A=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Jg(n,e,t,i,r){if(Te.isFunction(i))return i.call(this,e,t);if(r&&(e=t),!!Te.isString(e)){if(Te.isString(i))return e.indexOf(i)!==-1;if(Te.isRegExp(i))return i.test(e)}}function ZA(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function qA(n,e){const t=Te.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}let Vi=class{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function s(u,h,d){const p=Gc(h);if(!p)throw new Error("header name must be a non-empty string");const g=Te.findKey(r,p);(!g||r[g]===void 0||d===!0||d===void 0&&r[g]!==!1)&&(r[g||h]=vp(u))}const o=(u,h)=>Te.forEach(u,(d,p)=>s(d,p,h));if(Te.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Te.isString(e)&&(e=e.trim())&&!$A(e))o(jA(e),t);else if(Te.isObject(e)&&Te.isIterable(e)){let u={},h,d;for(const p of e){if(!Te.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[d=p[0]]=(h=u[d])?Te.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}o(u,t)}else e!=null&&s(t,e,i);return this}get(e,t){if(e=Gc(e),e){const i=Te.findKey(this,e);if(i){const r=this[i];if(!t)return r;if(t===!0)return GA(r);if(Te.isFunction(t))return t.call(this,r,i);if(Te.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gc(e),e){const i=Te.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Jg(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let r=!1;function s(o){if(o=Gc(o),o){const u=Te.findKey(i,o);u&&(!t||Jg(i,i[u],u,t))&&(delete i[u],r=!0)}}return Te.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const s=t[i];(!e||Jg(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,i={};return Te.forEach(this,(r,s)=>{const o=Te.findKey(i,s);if(o){t[o]=vp(r),delete t[s];return}const u=e?ZA(s):String(s).trim();u!==s&&delete t[s],t[u]=vp(r),i[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Te.forEach(this,(i,r)=>{i!=null&&i!==!1&&(t[r]=e&&Te.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[rw]=this[rw]={accessors:{}}).accessors,r=this.prototype;function s(o){const u=Gc(o);i[u]||(qA(r,o),i[u]=!0)}return Te.isArray(e)?e.forEach(s):s(e),this}};Vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(Vi.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});Te.freezeMethods(Vi);function Qg(n,e){const t=this||rd,i=e||t,r=Vi.from(i.headers);let s=i.data;return Te.forEach(n,function(u){s=u.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function kM(n){return!!(n&&n.__CANCEL__)}function $u(n,e,t){Lt.call(this,n??"canceled",Lt.ERR_CANCELED,e,t),this.name="CanceledError"}Te.inherits($u,Lt,{__CANCEL__:!0});function RM(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Lt("Request failed with status code "+t.status,[Lt.ERR_BAD_REQUEST,Lt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function XA(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function YA(n,e){n=n||10;const t=new Array(n),i=new Array(n);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(h){const d=Date.now(),p=i[s];o||(o=d),t[r]=h,i[r]=d;let g=s,_=0;for(;g!==r;)_+=t[g++],g=g%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),d-o<e)return;const y=p&&d-p;return y?Math.round(_*1e3/y):void 0}}function KA(n,e){let t=0,i=1e3/e,r,s;const o=(d,p=Date.now())=>{t=p,r=null,s&&(clearTimeout(s),s=null),n(...d)};return[(...d)=>{const p=Date.now(),g=p-t;g>=i?o(d,p):(r=d,s||(s=setTimeout(()=>{s=null,o(r)},i-g)))},()=>r&&o(r)]}const Cp=(n,e,t=3)=>{let i=0;const r=YA(50,250);return KA(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,h=o-i,d=r(h),p=o<=u;i=o;const g={loaded:o,total:u,progress:u?o/u:void 0,bytes:h,rate:d||void 0,estimated:d&&u&&p?(u-o)/d:void 0,event:s,lengthComputable:u!=null,[e?"download":"upload"]:!0};n(g)},t)},sw=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},ow=n=>(...e)=>Te.asap(()=>n(...e)),JA=di.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,di.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(di.origin),di.navigator&&/(msie|trident)/i.test(di.navigator.userAgent)):()=>!0,QA=di.hasStandardBrowserEnv?{write(n,e,t,i,r,s){const o=[n+"="+encodeURIComponent(e)];Te.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Te.isString(i)&&o.push("path="+i),Te.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ek(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function tk(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function IM(n,e,t){let i=!ek(e);return n&&(i||t==!1)?tk(n,e):e}const aw=n=>n instanceof Vi?{...n}:n;function Qa(n,e){e=e||{};const t={};function i(d,p,g,_){return Te.isPlainObject(d)&&Te.isPlainObject(p)?Te.merge.call({caseless:_},d,p):Te.isPlainObject(p)?Te.merge({},p):Te.isArray(p)?p.slice():p}function r(d,p,g,_){if(Te.isUndefined(p)){if(!Te.isUndefined(d))return i(void 0,d,g,_)}else return i(d,p,g,_)}function s(d,p){if(!Te.isUndefined(p))return i(void 0,p)}function o(d,p){if(Te.isUndefined(p)){if(!Te.isUndefined(d))return i(void 0,d)}else return i(void 0,p)}function u(d,p,g){if(g in e)return i(d,p);if(g in n)return i(void 0,d)}const h={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(d,p,g)=>r(aw(d),aw(p),g,!0)};return Te.forEach(Object.keys({...n,...e}),function(p){const g=h[p]||r,_=g(n[p],e[p],p);Te.isUndefined(_)&&g!==u||(t[p]=_)}),t}const DM=n=>{const e=Qa({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:u}=e;e.headers=o=Vi.from(o),e.url=CM(IM(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(Te.isFormData(t)){if(di.hasStandardBrowserEnv||di.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((h=o.getContentType())!==!1){const[d,...p]=h?h.split(";").map(g=>g.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...p].join("; "))}}if(di.hasStandardBrowserEnv&&(i&&Te.isFunction(i)&&(i=i(e)),i||i!==!1&&JA(e.url))){const d=r&&s&&QA.read(s);d&&o.set(r,d)}return e},nk=typeof XMLHttpRequest<"u",ik=nk&&function(n){return new Promise(function(t,i){const r=DM(n);let s=r.data;const o=Vi.from(r.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:d}=r,p,g,_,y,w;function b(){y&&y(),w&&w(),r.cancelToken&&r.cancelToken.unsubscribe(p),r.signal&&r.signal.removeEventListener("abort",p)}let C=new XMLHttpRequest;C.open(r.method.toUpperCase(),r.url,!0),C.timeout=r.timeout;function S(){if(!C)return;const R=Vi.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),k={data:!u||u==="text"||u==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:R,config:n,request:C};RM(function(N){t(N),b()},function(N){i(N),b()},k),C=null}"onloadend"in C?C.onloadend=S:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(S)},C.onabort=function(){C&&(i(new Lt("Request aborted",Lt.ECONNABORTED,n,C)),C=null)},C.onerror=function(){i(new Lt("Network Error",Lt.ERR_NETWORK,n,C)),C=null},C.ontimeout=function(){let F=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||PM;r.timeoutErrorMessage&&(F=r.timeoutErrorMessage),i(new Lt(F,k.clarifyTimeoutError?Lt.ETIMEDOUT:Lt.ECONNABORTED,n,C)),C=null},s===void 0&&o.setContentType(null),"setRequestHeader"in C&&Te.forEach(o.toJSON(),function(F,k){C.setRequestHeader(k,F)}),Te.isUndefined(r.withCredentials)||(C.withCredentials=!!r.withCredentials),u&&u!=="json"&&(C.responseType=r.responseType),d&&([_,w]=Cp(d,!0),C.addEventListener("progress",_)),h&&C.upload&&([g,y]=Cp(h),C.upload.addEventListener("progress",g),C.upload.addEventListener("loadend",y)),(r.cancelToken||r.signal)&&(p=R=>{C&&(i(!R||R.type?new $u(null,n,C):R),C.abort(),C=null)},r.cancelToken&&r.cancelToken.subscribe(p),r.signal&&(r.signal.aborted?p():r.signal.addEventListener("abort",p)));const T=XA(r.url);if(T&&di.protocols.indexOf(T)===-1){i(new Lt("Unsupported protocol "+T+":",Lt.ERR_BAD_REQUEST,n));return}C.send(s||null)})},rk=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,r;const s=function(d){if(!r){r=!0,u();const p=d instanceof Error?d:this.reason;i.abort(p instanceof Lt?p:new $u(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new Lt(`timeout ${e} of ms exceeded`,Lt.ETIMEDOUT))},e);const u=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),n=null)};n.forEach(d=>d.addEventListener("abort",s));const{signal:h}=i;return h.unsubscribe=()=>Te.asap(u),h}},sk=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,r;for(;i<t;)r=i+e,yield n.slice(i,r),i=r},ok=async function*(n,e){for await(const t of ak(n))yield*sk(t,e)},ak=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},lw=(n,e,t,i)=>{const r=ok(n,e);let s=0,o,u=h=>{o||(o=!0,i&&i(h))};return new ReadableStream({async pull(h){try{const{done:d,value:p}=await r.next();if(d){u(),h.close();return}let g=p.byteLength;if(t){let _=s+=g;t(_)}h.enqueue(new Uint8Array(p))}catch(d){throw u(d),d}},cancel(h){return u(h),r.return()}},{highWaterMark:2})},tm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",NM=tm&&typeof ReadableStream=="function",lk=tm&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),OM=(n,...e)=>{try{return!!n(...e)}catch{return!1}},uk=NM&&OM(()=>{let n=!1;const e=new Request(di.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),uw=64*1024,yy=NM&&OM(()=>Te.isReadableStream(new Response("").body)),Pp={stream:yy&&(n=>n.body)};tm&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Pp[e]&&(Pp[e]=Te.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new Lt(`Response type '${e}' is not supported`,Lt.ERR_NOT_SUPPORT,i)})})})(new Response);const ck=async n=>{if(n==null)return 0;if(Te.isBlob(n))return n.size;if(Te.isSpecCompliantForm(n))return(await new Request(di.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(n)||Te.isArrayBuffer(n))return n.byteLength;if(Te.isURLSearchParams(n)&&(n=n+""),Te.isString(n))return(await lk(n)).byteLength},hk=async(n,e)=>{const t=Te.toFiniteNumber(n.getContentLength());return t??ck(e)},dk=tm&&(async n=>{let{url:e,method:t,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:h,responseType:d,headers:p,withCredentials:g="same-origin",fetchOptions:_}=DM(n);d=d?(d+"").toLowerCase():"text";let y=rk([r,s&&s.toAbortSignal()],o),w;const b=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let C;try{if(h&&uk&&t!=="get"&&t!=="head"&&(C=await hk(p,i))!==0){let k=new Request(e,{method:"POST",body:i,duplex:"half"}),z;if(Te.isFormData(i)&&(z=k.headers.get("content-type"))&&p.setContentType(z),k.body){const[N,I]=sw(C,Cp(ow(h)));i=lw(k.body,uw,N,I)}}Te.isString(g)||(g=g?"include":"omit");const S="credentials"in Request.prototype;w=new Request(e,{..._,signal:y,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:i,duplex:"half",credentials:S?g:void 0});let T=await fetch(w,_);const R=yy&&(d==="stream"||d==="response");if(yy&&(u||R&&b)){const k={};["status","statusText","headers"].forEach(W=>{k[W]=T[W]});const z=Te.toFiniteNumber(T.headers.get("content-length")),[N,I]=u&&sw(z,Cp(ow(u),!0))||[];T=new Response(lw(T.body,uw,N,()=>{I&&I(),b&&b()}),k)}d=d||"text";let F=await Pp[Te.findKey(Pp,d)||"text"](T,n);return!R&&b&&b(),await new Promise((k,z)=>{RM(k,z,{data:F,headers:Vi.from(T.headers),status:T.status,statusText:T.statusText,config:n,request:w})})}catch(S){throw b&&b(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new Lt("Network Error",Lt.ERR_NETWORK,n,w),{cause:S.cause||S}):Lt.from(S,S&&S.code,n,w)}}),vy={http:LA,xhr:ik,fetch:dk};Te.forEach(vy,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const cw=n=>`- ${n}`,fk=n=>Te.isFunction(n)||n===null||n===!1,zM={getAdapter:n=>{n=Te.isArray(n)?n:[n];const{length:e}=n;let t,i;const r={};for(let s=0;s<e;s++){t=n[s];let o;if(i=t,!fk(t)&&(i=vy[(o=String(t)).toLowerCase()],i===void 0))throw new Lt(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(cw).join(`
`):" "+cw(s[0]):"as no adapter specified";throw new Lt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:vy};function e_(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new $u(null,n)}function hw(n){return e_(n),n.headers=Vi.from(n.headers),n.data=Qg.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),zM.getAdapter(n.adapter||rd.adapter)(n).then(function(i){return e_(n),i.data=Qg.call(n,n.transformResponse,i),i.headers=Vi.from(i.headers),i},function(i){return kM(i)||(e_(n),i&&i.response&&(i.response.data=Qg.call(n,n.transformResponse,i.response),i.response.headers=Vi.from(i.response.headers))),Promise.reject(i)})}const FM="1.11.0",nm={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{nm[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const dw={};nm.transitional=function(e,t,i){function r(s,o){return"[Axios v"+FM+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,u)=>{if(e===!1)throw new Lt(r(o," has been removed"+(t?" in "+t:"")),Lt.ERR_DEPRECATED);return t&&!dw[o]&&(dw[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,u):!0}};nm.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function pk(n,e,t){if(typeof n!="object")throw new Lt("options must be an object",Lt.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const u=n[s],h=u===void 0||o(u,s,n);if(h!==!0)throw new Lt("option "+s+" must be "+h,Lt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Lt("Unknown option "+s,Lt.ERR_BAD_OPTION)}}const xp={assertOptions:pk,validators:nm},ps=xp.validators;let Xa=class{constructor(e){this.defaults=e||{},this.interceptors={request:new iw,response:new iw}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Qa(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:s}=t;i!==void 0&&xp.assertOptions(i,{silentJSONParsing:ps.transitional(ps.boolean),forcedJSONParsing:ps.transitional(ps.boolean),clarifyTimeoutError:ps.transitional(ps.boolean)},!1),r!=null&&(Te.isFunction(r)?t.paramsSerializer={serialize:r}:xp.assertOptions(r,{encode:ps.function,serialize:ps.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),xp.assertOptions(t,{baseUrl:ps.spelling("baseURL"),withXsrfToken:ps.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Te.merge(s.common,s[t.method]);s&&Te.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),t.headers=Vi.concat(o,s);const u=[];let h=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(h=h&&b.synchronous,u.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let p,g=0,_;if(!h){const w=[hw.bind(this),void 0];for(w.unshift(...u),w.push(...d),_=w.length,p=Promise.resolve(t);g<_;)p=p.then(w[g++],w[g++]);return p}_=u.length;let y=t;for(g=0;g<_;){const w=u[g++],b=u[g++];try{y=w(y)}catch(C){b.call(this,C);break}}try{p=hw.call(this,y)}catch(w){return Promise.reject(w)}for(g=0,_=d.length;g<_;)p=p.then(d[g++],d[g++]);return p}getUri(e){e=Qa(this.defaults,e);const t=IM(e.baseURL,e.url,e.allowAbsoluteUrls);return CM(t,e.params,e.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(e){Xa.prototype[e]=function(t,i){return this.request(Qa(i||{},{method:e,url:t,data:(i||{}).data}))}});Te.forEach(["post","put","patch"],function(e){function t(i){return function(s,o,u){return this.request(Qa(u||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Xa.prototype[e]=t(),Xa.prototype[e+"Form"]=t(!0)});let mk=class BM{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(u=>{i.subscribe(u),s=u}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,u){i.reason||(i.reason=new $u(s,o,u),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new BM(function(r){e=r}),cancel:e}}};function gk(n){return function(t){return n.apply(null,t)}}function _k(n){return Te.isObject(n)&&n.isAxiosError===!0}const xy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xy).forEach(([n,e])=>{xy[e]=n});function UM(n){const e=new Xa(n),t=gM(Xa.prototype.request,e);return Te.extend(t,Xa.prototype,e,{allOwnKeys:!0}),Te.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return UM(Qa(n,r))},t}const wn=UM(rd);wn.Axios=Xa;wn.CanceledError=$u;wn.CancelToken=mk;wn.isCancel=kM;wn.VERSION=FM;wn.toFormData=em;wn.AxiosError=Lt;wn.Cancel=wn.CanceledError;wn.all=function(e){return Promise.all(e)};wn.spread=gk;wn.isAxiosError=_k;wn.mergeConfig=Qa;wn.AxiosHeaders=Vi;wn.formToJSON=n=>AM(Te.isHTMLForm(n)?new FormData(n):n);wn.getAdapter=zM.getAdapter;wn.HttpStatusCode=xy;wn.default=wn;const{Axios:UW,AxiosError:HW,CanceledError:VW,isCancel:WW,CancelToken:jW,VERSION:GW,all:$W,Cancel:ZW,isAxiosError:qW,spread:XW,toFormData:YW,AxiosHeaders:KW,HttpStatusCode:JW,formToJSON:QW,getAdapter:ej,mergeConfig:tj}=wn;function t_({title:n,children:e,footer:t,className:i=""}){return V.jsxs("div",{className:`p-4 sm:p-6 border rounded-xl shadow-sm 
                  bg-[var(--card)] text-[var(--text)] 
                  w-full max-w-full ${i}`,children:[n&&V.jsx("h2",{className:"font-semibold text-lg mb-4",children:n}),V.jsx("div",{className:"space-y-4",children:e}),t&&V.jsx("div",{className:"mt-4 flex flex-col sm:flex-row sm:justify-end gap-2",children:t})]})}const fw=n=>(n||[]).map(e=>Array.isArray(e)&&e.length===2?[e[1],e[0]]:typeof e=="object"&&e.lat!=null&&e.lon!=null?[e.lat,e.lon]:null).filter(Boolean);function yk({siteData:n,selectedSources:e,datasources:t,onRunResult:i}){const[r,s]=me.useState(!1),[o,u]=me.useState(null),h=e.flatMap(p=>[...fw(p.coords_up),...fw(p.coords_down)]);console.log("🔎 [AnalysisConclusionTab] selectedSources:",e),console.log("🔎 [AnalysisConclusionTab] allCoords:",h);async function d(){s(!0),u(null);try{const p={site:n,sources:e};console.log("📤 Sending payload to API:",p);const _=(await wn.post("https://sha-api-production.up.railway.app/api/v1/run-analysis",p)).data;console.log("✅ Analysis result received:",_),i&&i({result:_,siteData:n,selectedSources:e})}catch(p){console.error("❌ Error in handleRunAnalysis:",p),u(p.response?.data?.error||p.message||"Terjadi kesalahan")}finally{s(!1)}}return V.jsxs("div",{className:"p-2 sm:p-4 space-y-6",children:[V.jsx(t_,{title:"Site Configuration",children:Object.keys(n).length===0?V.jsx("p",{className:"text-gray-500",children:"No site parameters saved"}):V.jsx("div",{className:"space-y-3",children:Object.entries(n).map(([p,g])=>p==="sites"?V.jsxs("div",{children:[V.jsx("span",{className:"font-medium",children:"Sites:"}),g?.length>0?V.jsxs(V.Fragment,{children:[V.jsx("ul",{className:"list-disc pl-5 mt-1 text-sm sm:text-base overflow-x-auto",children:g.map((_,y)=>V.jsxs("li",{children:[_.name?V.jsx("strong",{children:_.name}):`Site-${y+1}`," → Lat: ",_.lat,", Lon: ",_.lon]},y))}),V.jsx("div",{className:"mt-3 h-[35vh] sm:h-[50vh] border rounded overflow-hidden"})]}):V.jsx("span",{className:"text-gray-500 ml-2",children:"None"})]},p):V.jsxs("div",{children:[V.jsxs("span",{className:"font-medium",children:[p,":"]})," ",String(g)||"-"]},p))})}),V.jsx(t_,{title:"Selected Datasources",children:e.length>0?V.jsxs(V.Fragment,{children:[V.jsx("ul",{className:"list-disc pl-5 mb-4 text-sm sm:text-base overflow-x-auto",children:e.map((p,g)=>V.jsx("li",{children:p.name},g))}),V.jsx("div",{className:"h-[35vh] sm:h-[55vh] w-full border rounded overflow-hidden"})]}):V.jsx("p",{className:"text-gray-500",children:"No sources selected"})}),V.jsx(t_,{footer:V.jsxs(V.Fragment,{children:[o&&V.jsx("p",{className:"text-red-500",children:o}),V.jsx("button",{onClick:d,disabled:r||!n||e.length===0,className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400",children:r?"Running...":"Run Analysis"})]})})]})}function vk({datasources:n,onRunResult:e}){const[t,i]=me.useState(0),[r,s]=me.useState({}),[o,u]=me.useState([]),[h,d]=me.useState([]),[p,g]=me.useState(!1),[_,y]=me.useState(null),w=["Site Parameter","Seismic Model","Analysis Conclusion"];async function b(){g(!0),y(null);const C={site:r,sources:o,gmpes:h};try{const{data:S}=await wn.post("https://sha-api-production.up.railway.app/api/v1/run-analysis",C);e?.({result:S,siteData:r,selectedSources:o,selectedGmpes:h,error:null})}catch(S){const T=S.response?.data?.error||S.message||"Terjadi kesalahan";console.error(T),y(T),e?.({result:null,siteData:r,selectedSources:o,selectedGmpes:h,error:T})}finally{g(!1)}}return V.jsx("div",{className:"w-full p-6",children:V.jsx(Da.Group,{selectedIndex:t,onChange:i,children:V.jsxs("div",{className:"tab-wrapper",children:[V.jsx(Da.List,{className:"tab-list",children:w.map(C=>V.jsx(Da,{className:"tab-item group",children:C},C))}),V.jsxs(Da.Panels,{className:"p-4 sm:p-6",children:[V.jsx(Da.Panel,{className:"tab-panel",children:V.jsx(UP,{siteData:r,setSiteData:s})}),V.jsx(Da.Panel,{className:"tab-panel",children:V.jsx(HP,{datasources:n,selectedSources:o,setSelectedSources:u,selectedGmpes:h,setSelectedGmpes:d,siteParameter:r?.siteType})}),V.jsx(Da.Panel,{className:"tab-panel",children:V.jsx(yk,{siteData:r,selectedSources:o,selectedGmpes:h,datasources:n,onRunResult:b,loading:p,error:_})})]})]})})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function sd(n){return n+.5|0}const Yo=(n,e,t)=>Math.max(Math.min(n,t),e);function ph(n){return Yo(sd(n*2.55),0,255)}function Ko(n){return Yo(sd(n*255),0,255)}function ro(n){return Yo(sd(n/2.55)/100,0,1)}function pw(n){return Yo(sd(n*100),0,100)}const Tr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wy=[..."0123456789ABCDEF"],xk=n=>wy[n&15],wk=n=>wy[(n&240)>>4]+wy[n&15],bf=n=>(n&240)>>4===(n&15),bk=n=>bf(n.r)&&bf(n.g)&&bf(n.b)&&bf(n.a);function Sk(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Tr[n[1]]*17,g:255&Tr[n[2]]*17,b:255&Tr[n[3]]*17,a:e===5?Tr[n[4]]*17:255}:(e===7||e===9)&&(t={r:Tr[n[1]]<<4|Tr[n[2]],g:Tr[n[3]]<<4|Tr[n[4]],b:Tr[n[5]]<<4|Tr[n[6]],a:e===9?Tr[n[7]]<<4|Tr[n[8]]:255})),t}const Mk=(n,e)=>n<255?e(n):"";function Ek(n){var e=bk(n)?xk:wk;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Mk(n.a,e):void 0}const Tk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function HM(n,e,t){const i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Lk(n,e,t){const i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function Ck(n,e,t){const i=HM(n,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function Pk(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function hv(n){const t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),u=(s+o)/2;let h,d,p;return s!==o&&(p=s-o,d=u>.5?p/(2-s-o):p/(s+o),h=Pk(t,i,r,p,s),h=h*60+.5),[h|0,d||0,u]}function dv(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Ko)}function fv(n,e,t){return dv(HM,n,e,t)}function Ak(n,e,t){return dv(Ck,n,e,t)}function kk(n,e,t){return dv(Lk,n,e,t)}function VM(n){return(n%360+360)%360}function Rk(n){const e=Tk.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?ph(+e[5]):Ko(+e[5]));const r=VM(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=Ak(r,s,o):e[1]==="hsv"?i=kk(r,s,o):i=fv(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function Ik(n,e){var t=hv(n);t[0]=VM(t[0]+e),t=fv(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Dk(n){if(!n)return;const e=hv(n),t=e[0],i=pw(e[1]),r=pw(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${ro(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}const mw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},gw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Nk(){const n={},e=Object.keys(gw),t=Object.keys(mw);let i,r,s,o,u;for(i=0;i<e.length;i++){for(o=u=e[i],r=0;r<t.length;r++)s=t[r],u=u.replace(s,mw[s]);s=parseInt(gw[o],16),n[u]=[s>>16&255,s>>8&255,s&255]}return n}let Sf;function Ok(n){Sf||(Sf=Nk(),Sf.transparent=[0,0,0,0]);const e=Sf[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const zk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Fk(n){const e=zk.exec(n);let t=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?ph(o):Yo(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?ph(i):Yo(i,0,255)),r=255&(e[4]?ph(r):Yo(r,0,255)),s=255&(e[6]?ph(s):Yo(s,0,255)),{r:i,g:r,b:s,a:t}}}function Bk(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ro(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const n_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Xl=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Uk(n,e,t){const i=Xl(ro(n.r)),r=Xl(ro(n.g)),s=Xl(ro(n.b));return{r:Ko(n_(i+t*(Xl(ro(e.r))-i))),g:Ko(n_(r+t*(Xl(ro(e.g))-r))),b:Ko(n_(s+t*(Xl(ro(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Mf(n,e,t){if(n){let i=hv(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=fv(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function WM(n,e){return n&&Object.assign(e||{},n)}function _w(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ko(n[3]))):(e=WM(n,{r:0,g:0,b:0,a:1}),e.a=Ko(e.a)),e}function Hk(n){return n.charAt(0)==="r"?Fk(n):Rk(n)}let jM=class by{constructor(e){if(e instanceof by)return e;const t=typeof e;let i;t==="object"?i=_w(e):t==="string"&&(i=Sk(e)||Ok(e)||Hk(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=WM(this._rgb);return e&&(e.a=ro(e.a)),e}set rgb(e){this._rgb=_w(e)}rgbString(){return this._valid?Bk(this._rgb):void 0}hexString(){return this._valid?Ek(this._rgb):void 0}hslString(){return this._valid?Dk(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let s;const o=t===s?.5:t,u=2*o-1,h=i.a-r.a,d=((u*h===-1?u:(u+h)/(1+u*h))+1)/2;s=1-d,i.r=255&d*i.r+s*r.r+.5,i.g=255&d*i.g+s*r.g+.5,i.b=255&d*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=Uk(this._rgb,e._rgb,t)),this}clone(){return new by(this.rgb)}alpha(e){return this._rgb.a=Ko(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=sd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Mf(this._rgb,2,e),this}darken(e){return Mf(this._rgb,2,-e),this}saturate(e){return Mf(this._rgb,1,e),this}desaturate(e){return Mf(this._rgb,1,-e),this}rotate(e){return Ik(this._rgb,e),this}};/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ys(){}const Vk=(()=>{let n=0;return()=>n++})();function an(n){return n==null}function Gn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function jt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Rr(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ms(n,e){return Rr(n)?n:e}function Bt(n,e){return typeof n>"u"?e:n}const Wk=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function hn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function qt(n,e,t,i){let r,s,o;if(Gn(n))for(s=n.length,r=0;r<s;r++)e.call(t,n[r],r);else if(jt(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function Ap(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function kp(n){if(Gn(n))return n.map(kp);if(jt(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let r=0;for(;r<i;++r)e[t[r]]=kp(n[t[r]]);return e}return n}function GM(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function jk(n,e,t,i){if(!GM(n))return;const r=e[n],s=t[n];jt(r)&&jt(s)?Fh(r,s,i):e[n]=kp(s)}function Fh(n,e,t){const i=Gn(e)?e:[e],r=i.length;if(!jt(n))return n;t=t||{};const s=t.merger||jk;let o;for(let u=0;u<r;++u){if(o=i[u],!jt(o))continue;const h=Object.keys(o);for(let d=0,p=h.length;d<p;++d)s(h[d],n,o,t)}return n}function bh(n,e){return Fh(n,e,{merger:Gk})}function Gk(n,e,t){if(!GM(n))return;const i=e[n],r=t[n];jt(i)&&jt(r)?bh(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=kp(r))}const yw={"":n=>n,x:n=>n.x,y:n=>n.y};function $k(n){const e=n.split("."),t=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Zk(n){const e=$k(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Rp(n,e){return(yw[e]||(yw[e]=Zk(e)))(n)}function pv(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Ip=n=>typeof n<"u",ia=n=>typeof n=="function",vw=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function qk(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Zn=Math.PI,Es=2*Zn,Xk=Es+Zn,Dp=Number.POSITIVE_INFINITY,Yk=Zn/180,Qr=Zn/2,Na=Zn/4,xw=Zn*2/3,$M=Math.log10,Ou=Math.sign;function Sh(n,e,t){return Math.abs(n-e)<t}function ww(n){const e=Math.round(n);n=Sh(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor($M(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Kk(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function Jk(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Bh(n){return!Jk(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Qk(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function e2(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function $a(n){return n*(Zn/180)}function t2(n){return n*(180/Zn)}function bw(n){if(!Rr(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function n2(n,e){const t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*Zn&&(s+=Es),{angle:s,distance:r}}function Sy(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function i2(n,e){return(n-e+Xk)%Es-Zn}function Xo(n){return(n%Es+Es)%Es}function ZM(n,e,t,i){const r=Xo(n),s=Xo(e),o=Xo(t),u=Xo(s-r),h=Xo(o-r),d=Xo(r-s),p=Xo(r-o);return r===s||r===o||i&&s===o||u>h&&d<p}function Pr(n,e,t){return Math.max(e,Math.min(t,n))}function r2(n){return Pr(n,-32768,32767)}function mh(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function mv(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}const Za=(n,e,t,i)=>mv(n,t,i?r=>{const s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),s2=(n,e,t)=>mv(n,t,i=>n[i][e]>=t);function o2(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}const qM=["push","pop","shift","splice","unshift"];function a2(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),qM.forEach(t=>{const i="_onData"+pv(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...s)}),o}})})}function Sw(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(qM.forEach(s=>{delete n[s]}),delete n._chartjs)}function l2(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const XM=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function YM(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,XM.call(window,()=>{i=!1,n.apply(e,t)}))}}function u2(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const gv=n=>n==="start"?"left":n==="end"?"right":"center",hi=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,c2=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function h2(n,e,t){const i=e.length;let r=0,s=i;if(n._sorted){const{iScale:o,vScale:u,_parsed:h}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,p=o.axis,{min:g,max:_,minDefined:y,maxDefined:w}=o.getUserBounds();if(y){if(r=Math.min(Za(h,p,g).lo,t?i:Za(e,p,o.getPixelForValue(g)).lo),d){const b=h.slice(0,r+1).reverse().findIndex(C=>!an(C[u.axis]));r-=Math.max(0,b)}r=Pr(r,0,i-1)}if(w){let b=Math.max(Za(h,o.axis,_,!0).hi+1,t?0:Za(e,p,o.getPixelForValue(_),!0).hi+1);if(d){const C=h.slice(b-1).findIndex(S=>!an(S[u.axis]));b+=Math.max(0,C)}s=Pr(b,r,i)-r}else s=i-r}return{start:r,count:s}}function d2(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}const Ef=n=>n===0||n===1,Mw=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Es/t)),Ew=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Es/t)+1,Mh={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Qr)+1,easeOutSine:n=>Math.sin(n*Qr),easeInOutSine:n=>-.5*(Math.cos(Zn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Ef(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Ef(n)?n:Mw(n,.075,.3),easeOutElastic:n=>Ef(n)?n:Ew(n,.075,.3),easeInOutElastic(n){return Ef(n)?n:n<.5?.5*Mw(n*2,.1125,.45):.5+.5*Ew(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Mh.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Mh.easeInBounce(n*2)*.5:Mh.easeOutBounce(n*2-1)*.5+.5};function _v(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Tw(n){return _v(n)?n:new jM(n)}function i_(n){return _v(n)?n:new jM(n).saturate(.5).darken(.1).hexString()}const f2=["x","y","borderWidth","radius","tension"],p2=["color","borderColor","backgroundColor"];function m2(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:p2},numbers:{type:"number",properties:f2}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function g2(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Lw=new Map;function _2(n,e){e=e||{};const t=n+JSON.stringify(e);let i=Lw.get(t);return i||(i=new Intl.NumberFormat(n,e),Lw.set(t,i)),i}function KM(n,e,t){return _2(e,t).format(n)}const y2={values(n){return Gn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),s=v2(n,t)}const o=$M(Math.abs(s)),u=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),h={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),KM(n,i,h)}};function v2(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var JM={formatters:y2};function x2(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:JM.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const el=Object.create(null),My=Object.create(null);function Eh(n,e){if(!e)return n;const t=e.split(".");for(let i=0,r=t.length;i<r;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function r_(n,e,t){return typeof e=="string"?Fh(Eh(n,e),t):Fh(Eh(n,""),e)}class w2{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>i_(r.backgroundColor),this.hoverBorderColor=(i,r)=>i_(r.borderColor),this.hoverColor=(i,r)=>i_(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return r_(this,e,t)}get(e){return Eh(this,e)}describe(e,t){return r_(My,e,t)}override(e,t){return r_(el,e,t)}route(e,t,i,r){const s=Eh(this,e),o=Eh(this,i),u="_"+t;Object.defineProperties(s,{[u]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[u],d=o[r];return jt(h)?Object.assign({},d,h):Bt(h,d)},set(h){this[u]=h}}})}apply(e){e.forEach(t=>t(this))}}var Cn=new w2({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[m2,g2,x2]);function b2(n){return!n||an(n.size)||an(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Cw(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function Oa(n,e,t){const i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function Pw(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Ey(n,e,t,i){QM(n,e,t,i,null)}function QM(n,e,t,i,r){let s,o,u,h,d,p,g,_;const y=e.pointStyle,w=e.rotation,b=e.radius;let C=(w||0)*Yk;if(y&&typeof y=="object"&&(s=y.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(C),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),y){default:r?n.ellipse(t,i,r/2,b,0,0,Es):n.arc(t,i,b,0,Es),n.closePath();break;case"triangle":p=r?r/2:b,n.moveTo(t+Math.sin(C)*p,i-Math.cos(C)*b),C+=xw,n.lineTo(t+Math.sin(C)*p,i-Math.cos(C)*b),C+=xw,n.lineTo(t+Math.sin(C)*p,i-Math.cos(C)*b),n.closePath();break;case"rectRounded":d=b*.516,h=b-d,o=Math.cos(C+Na)*h,g=Math.cos(C+Na)*(r?r/2-d:h),u=Math.sin(C+Na)*h,_=Math.sin(C+Na)*(r?r/2-d:h),n.arc(t-g,i-u,d,C-Zn,C-Qr),n.arc(t+_,i-o,d,C-Qr,C),n.arc(t+g,i+u,d,C,C+Qr),n.arc(t-_,i+o,d,C+Qr,C+Zn),n.closePath();break;case"rect":if(!w){h=Math.SQRT1_2*b,p=r?r/2:h,n.rect(t-p,i-h,2*p,2*h);break}C+=Na;case"rectRot":g=Math.cos(C)*(r?r/2:b),o=Math.cos(C)*b,u=Math.sin(C)*b,_=Math.sin(C)*(r?r/2:b),n.moveTo(t-g,i-u),n.lineTo(t+_,i-o),n.lineTo(t+g,i+u),n.lineTo(t-_,i+o),n.closePath();break;case"crossRot":C+=Na;case"cross":g=Math.cos(C)*(r?r/2:b),o=Math.cos(C)*b,u=Math.sin(C)*b,_=Math.sin(C)*(r?r/2:b),n.moveTo(t-g,i-u),n.lineTo(t+g,i+u),n.moveTo(t+_,i-o),n.lineTo(t-_,i+o);break;case"star":g=Math.cos(C)*(r?r/2:b),o=Math.cos(C)*b,u=Math.sin(C)*b,_=Math.sin(C)*(r?r/2:b),n.moveTo(t-g,i-u),n.lineTo(t+g,i+u),n.moveTo(t+_,i-o),n.lineTo(t-_,i+o),C+=Na,g=Math.cos(C)*(r?r/2:b),o=Math.cos(C)*b,u=Math.sin(C)*b,_=Math.sin(C)*(r?r/2:b),n.moveTo(t-g,i-u),n.lineTo(t+g,i+u),n.moveTo(t+_,i-o),n.lineTo(t-_,i+o);break;case"line":o=r?r/2:Math.cos(C)*b,u=Math.sin(C)*b,n.moveTo(t-o,i-u),n.lineTo(t+o,i+u);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(C)*(r?r/2:b),i+Math.sin(C)*b);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Uh(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function yv(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function vv(n){n.restore()}function S2(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function M2(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function E2(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),an(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function T2(n,e,t,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=e-s.actualBoundingBoxLeft,u=e+s.actualBoundingBoxRight,h=t-s.actualBoundingBoxAscent,d=t+s.actualBoundingBoxDescent,p=r.strikethrough?(h+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,p),n.lineTo(u,p),n.stroke()}}function L2(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Hh(n,e,t,i,r,s={}){const o=Gn(e)?e:[e],u=s.strokeWidth>0&&s.strokeColor!=="";let h,d;for(n.save(),n.font=r.string,E2(n,s),h=0;h<o.length;++h)d=o[h],s.backdrop&&L2(n,s.backdrop),u&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),an(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(d,t,i,s.maxWidth)),n.fillText(d,t,i,s.maxWidth),T2(n,t,i,d,s),i+=Number(r.lineHeight);n.restore()}function Ty(n,e){const{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*Zn,Zn,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Zn,Qr,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Qr,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-Qr,!0),n.lineTo(t+o.topLeft,i)}const C2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,P2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function A2(n,e){const t=(""+n).match(C2);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const k2=n=>+n||0;function eE(n,e){const t={},i=jt(e),r=i?Object.keys(e):e,s=jt(n)?i?o=>Bt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of r)t[o]=k2(s(o));return t}function R2(n){return eE(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Th(n){return eE(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ir(n){const e=R2(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function pi(n,e){n=n||{},e=e||Cn.font;let t=Bt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Bt(n.style,e.style);i&&!(""+i).match(P2)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Bt(n.family,e.family),lineHeight:A2(Bt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Bt(n.weight,e.weight),string:""};return r.string=b2(r),r}function Tf(n,e,t,i){let r,s,o;for(r=0,s=n.length;r<s;++r)if(o=n[r],o!==void 0&&o!==void 0)return o}function I2(n,e,t){const{min:i,max:r}=n,s=Wk(e,(r-i)/2),o=(u,h)=>t&&u===0?0:u+h;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function rl(n,e){return Object.assign(Object.create(n),e)}function xv(n,e=[""],t,i,r=()=>n[0]){const s=t||n;typeof i>"u"&&(i=rE("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:u=>xv([u,...n],e,s,i)};return new Proxy(o,{deleteProperty(u,h){return delete u[h],delete u._keys,delete n[0][h],!0},get(u,h){return nE(u,h,()=>H2(h,e,n,u))},getOwnPropertyDescriptor(u,h){return Reflect.getOwnPropertyDescriptor(u._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,h){return kw(u).includes(h)},ownKeys(u){return kw(u)},set(u,h,d){const p=u._storage||(u._storage=r());return u[h]=p[h]=d,delete u._keys,!0}})}function zu(n,e,t,i){const r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:tE(n,i),setContext:s=>zu(n,s,t,i),override:s=>zu(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,u){return nE(s,o,()=>N2(s,o,u))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,u){return n[o]=u,delete s[o],!0}})}function tE(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:ia(t)?t:()=>t,isIndexable:ia(i)?i:()=>i}}const D2=(n,e)=>n?n+pv(e):e,wv=(n,e)=>jt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function nE(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function N2(n,e,t){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let u=i[e];return ia(u)&&o.isScriptable(e)&&(u=O2(e,u,n,t)),Gn(u)&&u.length&&(u=z2(e,u,n,o.isIndexable)),wv(e,u)&&(u=zu(u,r,s&&s[e],o)),u}function O2(n,e,t,i){const{_proxy:r,_context:s,_subProxy:o,_stack:u}=t;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let h=e(s,o||i);return u.delete(n),wv(n,h)&&(h=bv(r._scopes,r,n,h)),h}function z2(n,e,t,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:u}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(jt(e[0])){const h=e,d=r._scopes.filter(p=>p!==h);e=[];for(const p of h){const g=bv(d,r,n,p);e.push(zu(g,s,o&&o[n],u))}}return e}function iE(n,e,t){return ia(n)?n(e,t):n}const F2=(n,e)=>n===!0?e:typeof n=="string"?Rp(e,n):void 0;function B2(n,e,t,i,r){for(const s of e){const o=F2(t,s);if(o){n.add(o);const u=iE(o._fallback,t,r);if(typeof u<"u"&&u!==t&&u!==i)return u}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function bv(n,e,t,i){const r=e._rootScopes,s=iE(e._fallback,t,i),o=[...n,...r],u=new Set;u.add(i);let h=Aw(u,o,t,s||t,i);return h===null||typeof s<"u"&&s!==t&&(h=Aw(u,o,s,h,i),h===null)?!1:xv(Array.from(u),[""],r,s,()=>U2(e,t,i))}function Aw(n,e,t,i,r){for(;t;)t=B2(n,e,t,i,r);return t}function U2(n,e,t){const i=n._getTarget();e in i||(i[e]={});const r=i[e];return Gn(r)&&jt(t)?t:r||{}}function H2(n,e,t,i){let r;for(const s of e)if(r=rE(D2(s,n),t),typeof r<"u")return wv(n,r)?bv(t,i,n,r):r}function rE(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function kw(n){let e=n._keys;return e||(e=n._keys=V2(n._scopes)),e}function V2(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const W2=Number.EPSILON||1e-14,Fu=(n,e)=>e<n.length&&!n[e].skip&&n[e],sE=n=>n==="x"?"y":"x";function j2(n,e,t,i){const r=n.skip?e:n,s=e,o=t.skip?e:t,u=Sy(s,r),h=Sy(o,s);let d=u/(u+h),p=h/(u+h);d=isNaN(d)?0:d,p=isNaN(p)?0:p;const g=i*d,_=i*p;return{previous:{x:s.x-g*(o.x-r.x),y:s.y-g*(o.y-r.y)},next:{x:s.x+_*(o.x-r.x),y:s.y+_*(o.y-r.y)}}}function G2(n,e,t){const i=n.length;let r,s,o,u,h,d=Fu(n,0);for(let p=0;p<i-1;++p)if(h=d,d=Fu(n,p+1),!(!h||!d)){if(Sh(e[p],0,W2)){t[p]=t[p+1]=0;continue}r=t[p]/e[p],s=t[p+1]/e[p],u=Math.pow(r,2)+Math.pow(s,2),!(u<=9)&&(o=3/Math.sqrt(u),t[p]=r*o*e[p],t[p+1]=s*o*e[p])}}function $2(n,e,t="x"){const i=sE(t),r=n.length;let s,o,u,h=Fu(n,0);for(let d=0;d<r;++d){if(o=u,u=h,h=Fu(n,d+1),!u)continue;const p=u[t],g=u[i];o&&(s=(p-o[t])/3,u[`cp1${t}`]=p-s,u[`cp1${i}`]=g-s*e[d]),h&&(s=(h[t]-p)/3,u[`cp2${t}`]=p+s,u[`cp2${i}`]=g+s*e[d])}}function Z2(n,e="x"){const t=sE(e),i=n.length,r=Array(i).fill(0),s=Array(i);let o,u,h,d=Fu(n,0);for(o=0;o<i;++o)if(u=h,h=d,d=Fu(n,o+1),!!h){if(d){const p=d[e]-h[e];r[o]=p!==0?(d[t]-h[t])/p:0}s[o]=u?d?Ou(r[o-1])!==Ou(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}G2(n,r,s),$2(n,s,e)}function Lf(n,e,t){return Math.max(Math.min(n,t),e)}function q2(n,e){let t,i,r,s,o,u=Uh(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=u,u=t<i-1&&Uh(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=Lf(r.cp1x,e.left,e.right),r.cp1y=Lf(r.cp1y,e.top,e.bottom)),u&&(r.cp2x=Lf(r.cp2x,e.left,e.right),r.cp2y=Lf(r.cp2y,e.top,e.bottom)))}function X2(n,e,t,i,r){let s,o,u,h;if(e.spanGaps&&(n=n.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")Z2(n,r);else{let d=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)u=n[s],h=j2(d,u,n[Math.min(s+1,o-(i?0:1))%o],e.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,d=u}e.capBezierPoints&&q2(n,t)}function Sv(){return typeof window<"u"&&typeof document<"u"}function Mv(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Np(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const im=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Y2(n,e){return im(n).getPropertyValue(e)}const K2=["top","right","bottom","left"];function Ya(n,e,t){const i={};t=t?"-"+t:"";for(let r=0;r<4;r++){const s=K2[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const J2=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Q2(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i;let o=!1,u,h;if(J2(r,s,n.target))u=r,h=s;else{const d=e.getBoundingClientRect();u=i.clientX-d.left,h=i.clientY-d.top,o=!0}return{x:u,y:h,box:o}}function Ua(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,r=im(t),s=r.boxSizing==="border-box",o=Ya(r,"padding"),u=Ya(r,"border","width"),{x:h,y:d,box:p}=Q2(n,t),g=o.left+(p&&u.left),_=o.top+(p&&u.top);let{width:y,height:w}=e;return s&&(y-=o.width+u.width,w-=o.height+u.height),{x:Math.round((h-g)/y*t.width/i),y:Math.round((d-_)/w*t.height/i)}}function eR(n,e,t){let i,r;if(e===void 0||t===void 0){const s=n&&Mv(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),u=im(s),h=Ya(u,"border","width"),d=Ya(u,"padding");e=o.width-d.width-h.width,t=o.height-d.height-h.height,i=Np(u.maxWidth,s,"clientWidth"),r=Np(u.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||Dp,maxHeight:r||Dp}}const Cf=n=>Math.round(n*10)/10;function tR(n,e,t,i){const r=im(n),s=Ya(r,"margin"),o=Np(r.maxWidth,n,"clientWidth")||Dp,u=Np(r.maxHeight,n,"clientHeight")||Dp,h=eR(n,e,t);let{width:d,height:p}=h;if(r.boxSizing==="content-box"){const _=Ya(r,"border","width"),y=Ya(r,"padding");d-=y.width+_.width,p-=y.height+_.height}return d=Math.max(0,d-s.width),p=Math.max(0,i?d/i:p-s.height),d=Cf(Math.min(d,o,h.maxWidth)),p=Cf(Math.min(p,u,h.maxHeight)),d&&!p&&(p=Cf(d/2)),(e!==void 0||t!==void 0)&&i&&h.height&&p>h.height&&(p=h.height,d=Cf(Math.floor(p*i))),{width:d,height:p}}function Rw(n,e,t){const i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const nR=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Sv()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function Iw(n,e){const t=Y2(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ha(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function iR(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function rR(n,e,t,i){const r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ha(n,r,t),u=Ha(r,s,t),h=Ha(s,e,t),d=Ha(o,u,t),p=Ha(u,h,t);return Ha(d,p,t)}const sR=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},oR=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Tu(n,e,t){return n?sR(e,t):oR()}function oE(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function aE(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function lE(n){return n==="angle"?{between:ZM,compare:i2,normalize:Xo}:{between:mh,compare:(e,t)=>e-t,normalize:e=>e}}function Dw({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function aR(n,e,t){const{property:i,start:r,end:s}=t,{between:o,normalize:u}=lE(i),h=e.length;let{start:d,end:p,loop:g}=n,_,y;if(g){for(d+=h,p+=h,_=0,y=h;_<y&&o(u(e[d%h][i]),r,s);++_)d--,p--;d%=h,p%=h}return p<d&&(p+=h),{start:d,end:p,loop:g,style:n.style}}function lR(n,e,t){if(!t)return[n];const{property:i,start:r,end:s}=t,o=e.length,{compare:u,between:h,normalize:d}=lE(i),{start:p,end:g,loop:_,style:y}=aR(n,e,t),w=[];let b=!1,C=null,S,T,R;const F=()=>h(r,R,S)&&u(r,R)!==0,k=()=>u(s,S)===0||h(s,R,S),z=()=>b||F(),N=()=>!b||k();for(let I=p,W=p;I<=g;++I)T=e[I%o],!T.skip&&(S=d(T[i]),S!==R&&(b=h(S,r,s),C===null&&z()&&(C=u(S,r)===0?I:W),C!==null&&N()&&(w.push(Dw({start:C,end:I,loop:_,count:o,style:y})),C=null),W=I,R=S));return C!==null&&w.push(Dw({start:C,end:g,loop:_,count:o,style:y})),w}function uR(n,e){const t=[],i=n.segments;for(let r=0;r<i.length;r++){const s=lR(i[r],n.points,e);s.length&&t.push(...s)}return t}function cR(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function hR(n,e,t,i){const r=n.length,s=[];let o=e,u=n[e],h;for(h=e+1;h<=t;++h){const d=n[h%r];d.skip||d.stop?u.skip||(i=!1,s.push({start:e%r,end:(h-1)%r,loop:i}),e=o=d.stop?h:null):(o=h,u.skip&&(e=h)),u=d}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function dR(n,e){const t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];const s=!!n._loop,{start:o,end:u}=cR(t,r,s,i);if(i===!0)return Nw(n,[{start:o,end:u,loop:s}],t,e);const h=u<o?u+r:u,d=!!n._fullLoop&&o===0&&u===r-1;return Nw(n,hR(t,o,h,d),t,e)}function Nw(n,e,t,i){return!i||!i.setContext||!t?e:fR(n,e,t,i)}function fR(n,e,t,i){const r=n._chart.getContext(),s=Ow(n.options),{_datasetIndex:o,options:{spanGaps:u}}=n,h=t.length,d=[];let p=s,g=e[0].start,_=g;function y(w,b,C,S){const T=u?-1:1;if(w!==b){for(w+=h;t[w%h].skip;)w-=T;for(;t[b%h].skip;)b+=T;w%h!==b%h&&(d.push({start:w%h,end:b%h,loop:C,style:S}),p=S,g=b%h)}}for(const w of e){g=u?g:w.start;let b=t[g%h],C;for(_=g+1;_<=w.end;_++){const S=t[_%h];C=Ow(i.setContext(rl(r,{type:"segment",p0:b,p1:S,p0DataIndex:(_-1)%h,p1DataIndex:_%h,datasetIndex:o}))),pR(C,p)&&y(g,_-1,w.loop,p),b=S,p=C}g<_-1&&y(g,_-1,w.loop,p)}return d}function Ow(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function pR(n,e){if(!e)return!1;const t=[],i=function(r,s){return _v(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Pf(n,e,t){return n.options.clip?n[t]:e[t]}function mR(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Pf(t,e,"left"),right:Pf(t,e,"right"),top:Pf(i,e,"top"),bottom:Pf(i,e,"bottom")}:e}function gR(n,e){const t=e._clip;if(t.disabled)return!1;const i=mR(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class _R{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const s=t.listeners[r],o=t.duration;s.forEach(u=>u({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=XM.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,u=!1,h;for(;o>=0;--o)h=s[o],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(e),u=!0):(s[o]=s[s.length-1],s.pop());u&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var no=new _R;const zw="transparent",yR={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=Tw(n||zw),r=i.valid&&Tw(e||zw);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class vR{constructor(e,t,i,r){const s=t[i];r=Tf([e.to,r,s,e.from]);const o=Tf([e.from,s,r]);this._active=!0,this._fn=e.fn||yR[e.type||typeof o],this._easing=Mh[e.easing]||Mh.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Tf([e.to,t,r,e.from]),this._from=Tf([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,u=this._to;let h;if(this._active=s!==u&&(o||t<i),!this._active){this._target[r]=u,this._notify(!0);return}if(t<0){this._target[r]=s;return}h=t/i%2,h=o&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[r]=this._fn(s,u,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}}class uE{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!jt(e))return;const t=Object.keys(Cn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!jt(s))return;const o={};for(const u of t)o[u]=s[u];(Gn(s.properties)&&s.properties||[r]).forEach(u=>{(u===r||!i.has(u))&&i.set(u,o)})})}_animateOptions(e,t){const i=t.options,r=wR(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&xR(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),u=Date.now();let h;for(h=o.length-1;h>=0;--h){const d=o[h];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,t));continue}const p=t[d];let g=s[d];const _=i.get(d);if(g)if(_&&g.active()){g.update(_,p,u);continue}else g.cancel();if(!_||!_.duration){e[d]=p;continue}s[d]=g=new vR(_,e,d,p),r.push(g)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return no.add(this._chart,i),!0}}function xR(n,e){const t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function wR(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Fw(n,e){const t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function bR(n,e,t){if(t===!1)return!1;const i=Fw(n,t),r=Fw(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function SR(n){let e,t,i,r;return jt(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function cE(n,e){const t=[],i=n._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function Bw(n,e,t,i={}){const r=n.keys,s=i.mode==="single";let o,u,h,d;if(e===null)return;let p=!1;for(o=0,u=r.length;o<u;++o){if(h=+r[o],h===t){if(p=!0,i.all)continue;break}d=n.values[h],Rr(d)&&(s||e===0||Ou(e)===Ou(d))&&(e+=d)}return!p&&!i.all?0:e}function MR(n,e){const{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),u=new Array(o.length);let h,d,p;for(h=0,d=o.length;h<d;++h)p=o[h],u[h]={[r]:p,[s]:n[p]};return u}function s_(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function ER(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function TR(n){const{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function LR(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function Uw(n,e,t,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function Hw(n,e){const{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:u}=i,h=s.axis,d=o.axis,p=ER(s,o,i),g=e.length;let _;for(let y=0;y<g;++y){const w=e[y],{[h]:b,[d]:C}=w,S=w._stacks||(w._stacks={});_=S[d]=LR(r,p,b),_[u]=C,_._top=Uw(_,o,!0,i.type),_._bottom=Uw(_,o,!1,i.type);const T=_._visualValues||(_._visualValues={});T[u]=C}}function o_(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function CR(n,e){return rl(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function PR(n,e,t){return rl(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function $c(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}const a_=n=>n==="reset"||n==="none",Vw=(n,e)=>e?n:Object.assign({},n),AR=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:cE(t,!0),values:null};class hE{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=s_(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&$c(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(g,_,y,w)=>g==="x"?_:g==="r"?w:y,s=t.xAxisID=Bt(i.xAxisID,o_(e,"x")),o=t.yAxisID=Bt(i.yAxisID,o_(e,"y")),u=t.rAxisID=Bt(i.rAxisID,o_(e,"r")),h=t.indexAxis,d=t.iAxisID=r(h,s,o,u),p=t.vAxisID=r(h,o,s,u);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(u),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Sw(this._data,this),e._stacked&&$c(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(jt(t)){const r=this._cachedMeta;this._data=MR(t,r)}else if(i!==t){if(i){Sw(i,this);const r=this._cachedMeta;$c(r),r._parsed=[]}t&&Object.isExtensible(t)&&a2(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=s_(t.vScale,t),t.stack!==i.stack&&(r=!0,$c(t),t.stack=i.stack),this._resyncElements(e),(r||s!==t._stacked)&&(Hw(this,t._parsed),t._stacked=s_(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,u=s.axis;let h=e===0&&t===r.length?!0:i._sorted,d=e>0&&i._parsed[e-1],p,g,_;if(this._parsing===!1)i._parsed=r,i._sorted=!0,_=r;else{Gn(r[e])?_=this.parseArrayData(i,r,e,t):jt(r[e])?_=this.parseObjectData(i,r,e,t):_=this.parsePrimitiveData(i,r,e,t);const y=()=>g[u]===null||d&&g[u]<d[u];for(p=0;p<t;++p)i._parsed[p+e]=g=_[p],h&&(y()&&(h=!1),d=g);i._sorted=h}o&&Hw(this,_)}parsePrimitiveData(e,t,i,r){const{iScale:s,vScale:o}=e,u=s.axis,h=o.axis,d=s.getLabels(),p=s===o,g=new Array(r);let _,y,w;for(_=0,y=r;_<y;++_)w=_+i,g[_]={[u]:p||s.parse(d[w],w),[h]:o.parse(t[w],w)};return g}parseArrayData(e,t,i,r){const{xScale:s,yScale:o}=e,u=new Array(r);let h,d,p,g;for(h=0,d=r;h<d;++h)p=h+i,g=t[p],u[h]={x:s.parse(g[0],p),y:o.parse(g[1],p)};return u}parseObjectData(e,t,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,d=new Array(r);let p,g,_,y;for(p=0,g=r;p<g;++p)_=p+i,y=t[_],d[p]={x:s.parse(Rp(y,u),_),y:o.parse(Rp(y,h),_)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,s=this._cachedMeta,o=t[e.axis],u={keys:cE(r,!0),values:t._stacks[e.axis]._visualValues};return Bw(u,o,s.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const s=i[t.axis];let o=s===null?NaN:s;const u=r&&i._stacks[t.axis];r&&u&&(r.values=u,o=Bw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,u=this._getOtherScale(e),h=AR(t,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:g}=TR(u);let _,y;function w(){y=r[_];const b=y[u.axis];return!Rr(y[e.axis])||p>b||g<b}for(_=0;_<o&&!(!w()&&(this.updateRangeFromParsed(d,e,y,h),s));++_);if(s){for(_=o-1;_>=0;--_)if(!w()){this.updateRangeFromParsed(d,e,y,h);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=t.length;r<s;++r)o=t[r][e.axis],Rr(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=SR(Bt(this.options.clip,bR(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],s=t.chartArea,o=[],u=this._drawStart||0,h=this._drawCount||r.length-u,d=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(e,s,u,h),p=u;p<u+h;++p){const g=r[p];g.hidden||(g.active&&d?o.push(g):g.draw(e,s))}for(p=0;p<o.length;++p)o[p].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=PR(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=CR(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r=t==="active",s=this._cachedDataOpts,o=e+"-"+t,u=s[o],h=this.enableOptionSharing&&Ip(i);if(u)return Vw(u,h);const d=this.chart.config,p=d.datasetElementScopeKeys(this._type,e),g=r?[`${e}Hover`,"hover",e,""]:[e,""],_=d.getOptionScopes(this.getDataset(),p),y=Object.keys(Cn.elements[e]),w=()=>this.getContext(i,r,t),b=d.resolveNamedOptions(_,y,w,g);return b.$shared&&(b.$shared=h,s[o]=Object.freeze(Vw(b,h))),b}_resolveAnimations(e,t,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,u=s[o];if(u)return u;let h;if(r.options.animation!==!1){const p=this.chart.config,g=p.datasetAnimationScopeKeys(this._type,t),_=p.getOptionScopes(this.getDataset(),g);h=p.createResolver(_,this.getContext(e,i,t))}const d=new uE(r,h&&h.animations);return h&&h._cacheable&&(s[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||a_(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:o}}updateElement(e,t,i,r){a_(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!a_(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[u,h,d]of this._syncList)this[u](h,d);this._syncList=[];const r=i.length,s=t.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t,i=!0){const r=this._cachedMeta,s=r.data,o=e+t;let u;const h=d=>{for(d.length+=t,u=d.length-1;u>=o;u--)d[u]=d[u-t]};for(h(s),u=e;u<o;++u)s[u]=new this.dataElementType;this._parsing&&h(r._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&$c(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class kR extends hE{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:u,count:h}=h2(t,r,o);this._drawStart=u,this._drawCount=h,d2(t)&&(u=0,h=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:d},e),this.updateElements(r,u,h,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:u,_stacked:h,_dataset:d}=this._cachedMeta,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(t,r),_=o.axis,y=u.axis,{spanGaps:w,segment:b}=this.options,C=Bh(w)?w:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||s||r==="none",T=t+i,R=e.length;let F=t>0&&this.getParsed(t-1);for(let k=0;k<R;++k){const z=e[k],N=S?z:{};if(k<t||k>=T){N.skip=!0;continue}const I=this.getParsed(k),W=an(I[y]),j=N[_]=o.getPixelForValue(I[_],k),U=N[y]=s||W?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,I,h):I[y],k);N.skip=isNaN(j)||isNaN(U)||W,N.stop=k>0&&Math.abs(I[_]-F[_])>C,b&&(N.parsed=I,N.raw=d.data[k]),g&&(N.options=p||this.resolveDataElementOptions(k,z.active?"active":r)),S||this.updateElement(z,k,N,r),F=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function za(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ev{static override(e){Object.assign(Ev.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return za()}parse(){return za()}format(){return za()}add(){return za()}diff(){return za()}startOf(){return za()}endOf(){return za()}}var RR={_date:Ev};function IR(n,e,t,i){const{controller:r,data:s,_sorted:o}=n,u=r._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&o&&s.length){const d=u._reversePixels?s2:Za;if(i){if(r._sharedOptions){const p=s[0],g=typeof p.getRange=="function"&&p.getRange(e);if(g){const _=d(s,e,t-g),y=d(s,e,t+g);return{lo:_.lo,hi:y.hi}}}}else{const p=d(s,e,t);if(h){const{vScale:g}=r._cachedMeta,{_parsed:_}=n,y=_.slice(0,p.lo+1).reverse().findIndex(b=>!an(b[g.axis]));p.lo-=Math.max(0,y);const w=_.slice(p.hi).findIndex(b=>!an(b[g.axis]));p.hi+=Math.max(0,w)}return p}}return{lo:0,hi:s.length-1}}function rm(n,e,t,i,r){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let u=0,h=s.length;u<h;++u){const{index:d,data:p}=s[u],{lo:g,hi:_}=IR(s[u],e,o,r);for(let y=g;y<=_;++y){const w=p[y];w.skip||i(w,d,y)}}}function DR(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function l_(n,e,t,i,r){const s=[];return!r&&!n.isPointInArea(e)||rm(n,t,e,function(u,h,d){!r&&!Uh(u,n.chartArea,0)||u.inRange(e.x,e.y,i)&&s.push({element:u,datasetIndex:h,index:d})},!0),s}function NR(n,e,t,i){let r=[];function s(o,u,h){const{startAngle:d,endAngle:p}=o.getProps(["startAngle","endAngle"],i),{angle:g}=n2(o,{x:e.x,y:e.y});ZM(g,d,p)&&r.push({element:o,datasetIndex:u,index:h})}return rm(n,t,e,s),r}function OR(n,e,t,i,r,s){let o=[];const u=DR(t);let h=Number.POSITIVE_INFINITY;function d(p,g,_){const y=p.inRange(e.x,e.y,r);if(i&&!y)return;const w=p.getCenterPoint(r);if(!(!!s||n.isPointInArea(w))&&!y)return;const C=u(e,w);C<h?(o=[{element:p,datasetIndex:g,index:_}],h=C):C===h&&o.push({element:p,datasetIndex:g,index:_})}return rm(n,t,e,d),o}function u_(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?NR(n,e,t,r):OR(n,e,t,i,r,s)}function Ww(n,e,t,i,r){const s=[],o=t==="x"?"inXRange":"inYRange";let u=!1;return rm(n,t,e,(h,d,p)=>{h[o]&&h[o](e[t],r)&&(s.push({element:h,datasetIndex:d,index:p}),u=u||h.inRange(e.x,e.y,r))}),i&&!u?[]:s}var zR={modes:{index(n,e,t,i){const r=Ua(e,n),s=t.axis||"x",o=t.includeInvisible||!1,u=t.intersect?l_(n,r,s,i,o):u_(n,r,s,!1,i,o),h=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const p=u[0].index,g=d.data[p];g&&!g.skip&&h.push({element:g,datasetIndex:d.index,index:p})}),h):[]},dataset(n,e,t,i){const r=Ua(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let u=t.intersect?l_(n,r,s,i,o):u_(n,r,s,!1,i,o);if(u.length>0){const h=u[0].datasetIndex,d=n.getDatasetMeta(h).data;u=[];for(let p=0;p<d.length;++p)u.push({element:d[p],datasetIndex:h,index:p})}return u},point(n,e,t,i){const r=Ua(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return l_(n,r,s,i,o)},nearest(n,e,t,i){const r=Ua(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return u_(n,r,s,t.intersect,i,o)},x(n,e,t,i){const r=Ua(e,n);return Ww(n,r,"x",t.intersect,i)},y(n,e,t,i){const r=Ua(e,n);return Ww(n,r,"y",t.intersect,i)}}};const dE=["left","top","right","bottom"];function Zc(n,e){return n.filter(t=>t.pos===e)}function jw(n,e){return n.filter(t=>dE.indexOf(t.pos)===-1&&t.box.axis===e)}function qc(n,e){return n.sort((t,i)=>{const r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function FR(n){const e=[];let t,i,r,s,o,u;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:u=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:u});return e}function BR(n){const e={};for(const t of n){const{stack:i,pos:r,stackWeight:s}=t;if(!i||!dE.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function UR(n,e){const t=BR(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,u;for(s=0,o=n.length;s<o;++s){u=n[s];const{fullSize:h}=u.box,d=t[u.stack],p=d&&u.stackWeight/d.weight;u.horizontal?(u.width=p?p*i:h&&e.availableWidth,u.height=r):(u.width=i,u.height=p?p*r:h&&e.availableHeight)}return t}function HR(n){const e=FR(n),t=qc(e.filter(d=>d.box.fullSize),!0),i=qc(Zc(e,"left"),!0),r=qc(Zc(e,"right")),s=qc(Zc(e,"top"),!0),o=qc(Zc(e,"bottom")),u=jw(e,"x"),h=jw(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(h).concat(o).concat(u),chartArea:Zc(e,"chartArea"),vertical:i.concat(r).concat(h),horizontal:s.concat(o).concat(u)}}function Gw(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function fE(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function VR(n,e,t,i){const{pos:r,box:s}=t,o=n.maxPadding;if(!jt(r)){t.size&&(n[r]-=t.size);const g=i[t.stack]||{size:0,count:1};g.size=Math.max(g.size,t.horizontal?s.height:s.width),t.size=g.size/g.count,n[r]+=t.size}s.getPadding&&fE(o,s.getPadding());const u=Math.max(0,e.outerWidth-Gw(o,n,"left","right")),h=Math.max(0,e.outerHeight-Gw(o,n,"top","bottom")),d=u!==n.w,p=h!==n.h;return n.w=u,n.h=h,t.horizontal?{same:d,other:p}:{same:p,other:d}}function WR(n){const e=n.maxPadding;function t(i){const r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function jR(n,e){const t=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function gh(n,e,t,i){const r=[];let s,o,u,h,d,p;for(s=0,o=n.length,d=0;s<o;++s){u=n[s],h=u.box,h.update(u.width||e.w,u.height||e.h,jR(u.horizontal,e));const{same:g,other:_}=VR(e,t,u,i);d|=g&&r.length,p=p||_,h.fullSize||r.push(u)}return d&&gh(r,e,t,i)||p}function Af(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function $w(n,e,t,i){const r=t.padding;let{x:s,y:o}=e;for(const u of n){const h=u.box,d=i[u.stack]||{placed:0,weight:1},p=u.stackWeight/d.weight||1;if(u.horizontal){const g=e.w*p,_=d.size||h.height;Ip(d.start)&&(o=d.start),h.fullSize?Af(h,r.left,o,t.outerWidth-r.right-r.left,_):Af(h,e.left+d.placed,o,g,_),d.start=o,d.placed+=g,o=h.bottom}else{const g=e.h*p,_=d.size||h.width;Ip(d.start)&&(s=d.start),h.fullSize?Af(h,s,r.top,_,t.outerHeight-r.bottom-r.top):Af(h,s,e.top+d.placed,_,g),d.start=s,d.placed+=g,s=h.right}}e.x=s,e.y=o}var Ar={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const r=Ir(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),u=HR(n.boxes),h=u.vertical,d=u.horizontal;qt(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const p=h.reduce((b,C)=>C.box.options&&C.box.options.display===!1?b:b+1,0)||1,g=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/p,hBoxMaxHeight:o/2}),_=Object.assign({},r);fE(_,Ir(i));const y=Object.assign({maxPadding:_,w:s,h:o,x:r.left,y:r.top},r),w=UR(h.concat(d),g);gh(u.fullSize,y,g,w),gh(h,y,g,w),gh(d,y,g,w)&&gh(h,y,g,w),WR(y),$w(u.leftAndTop,y,g,w),y.x+=y.w,y.y+=y.h,$w(u.rightAndBottom,y,g,w),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},qt(u.chartArea,b=>{const C=b.box;Object.assign(C,n.chartArea),C.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class pE{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class GR extends pE{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const wp="$chartjs",$R={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Zw=n=>n===null||n==="";function ZR(n,e){const t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[wp]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Zw(r)){const s=Iw(n,"width");s!==void 0&&(n.width=s)}if(Zw(i))if(n.style.height==="")n.height=n.width/(e||2);else{const s=Iw(n,"height");s!==void 0&&(n.height=s)}return n}const mE=nR?{passive:!0}:!1;function qR(n,e,t){n&&n.addEventListener(e,t,mE)}function XR(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,mE)}function YR(n,e){const t=$R[n.type]||n.type,{x:i,y:r}=Ua(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Op(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function KR(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const u of s)o=o||Op(u.addedNodes,i),o=o&&!Op(u.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function JR(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const u of s)o=o||Op(u.removedNodes,i),o=o&&!Op(u.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const Vh=new Map;let qw=0;function gE(){const n=window.devicePixelRatio;n!==qw&&(qw=n,Vh.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function QR(n,e){Vh.size||window.addEventListener("resize",gE),Vh.set(n,e)}function eI(n){Vh.delete(n),Vh.size||window.removeEventListener("resize",gE)}function tI(n,e,t){const i=n.canvas,r=i&&Mv(i);if(!r)return;const s=YM((u,h)=>{const d=r.clientWidth;t(u,h),d<r.clientWidth&&t()},window),o=new ResizeObserver(u=>{const h=u[0],d=h.contentRect.width,p=h.contentRect.height;d===0&&p===0||s(d,p)});return o.observe(r),QR(n,s),o}function c_(n,e,t){t&&t.disconnect(),e==="resize"&&eI(n)}function nI(n,e,t){const i=n.canvas,r=YM(s=>{n.ctx!==null&&t(YR(s,n))},n);return qR(i,e,r),r}class iI extends pE{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(ZR(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[wp])return!1;const i=t[wp].initial;["height","width"].forEach(s=>{const o=i[s];an(o)?t.removeAttribute(s):t.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[wp],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),o={attach:KR,detach:JR,resize:tI}[t]||nI;r[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:c_,detach:c_,resize:c_}[t]||XR)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return tR(e,t,i,r)}isAttached(e){const t=e&&Mv(e);return!!(t&&t.isConnected)}}function rI(n){return!Sv()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?GR:iI}let sl=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Bh(this.x)&&Bh(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function sI(n,e){const t=n.options.ticks,i=oI(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?lI(e):[],o=s.length,u=s[0],h=s[o-1],d=[];if(o>r)return uI(e,d,s,o/r),d;const p=aI(s,e,r);if(o>0){let g,_;const y=o>1?Math.round((h-u)/(o-1)):null;for(kf(e,d,p,an(y)?0:u-y,u),g=0,_=o-1;g<_;g++)kf(e,d,p,s[g],s[g+1]);return kf(e,d,p,h,an(y)?e.length:h+y),d}return kf(e,d,p),d}function oI(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function aI(n,e,t){const i=cI(n),r=e.length/t;if(!i)return Math.max(r,1);const s=Kk(i);for(let o=0,u=s.length-1;o<u;o++){const h=s[o];if(h>r)return h}return Math.max(r,1)}function lI(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function uI(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function kf(n,e,t,i,r){const s=Bt(i,0),o=Math.min(Bt(r,n.length),n.length);let u=0,h,d,p;for(t=Math.ceil(t),r&&(h=r-i,t=h/Math.floor(h/t)),p=s;p<0;)u++,p=Math.round(s+u*t);for(d=Math.max(s,0);d<o;d++)d===p&&(e.push(n[d]),u++,p=Math.round(s+u*t))}function cI(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const hI=n=>n==="left"?"right":n==="right"?"left":n,Xw=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Yw=(n,e)=>Math.min(e||n,n);function Kw(n,e){const t=[],i=n.length/e,r=n.length;let s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function dI(n,e,t){const i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,u=1e-6;let h=n.getPixelForTick(r),d;if(!(t&&(i===1?d=Math.max(h-s,o-h):e===0?d=(n.getPixelForTick(1)-h)/2:d=(h-n.getPixelForTick(r-1))/2,h+=r<e?d:-d,h<s-u||h>o+u)))return h}function fI(n,e){qt(n,t=>{const i=t.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function Xc(n){return n.drawTicks?n.tickLength:0}function Jw(n,e){if(!n.display)return 0;const t=pi(n.font,e),i=Ir(n.padding);return(Gn(n.text)?n.text.length:1)*t.lineHeight+i.height}function pI(n,e){return rl(n,{scale:e,type:"scale"})}function mI(n,e,t){return rl(n,{tick:t,index:e,type:"tick"})}function gI(n,e,t){let i=gv(n);return(t&&e!=="right"||!t&&e==="right")&&(i=hI(i)),i}function _I(n,e,t,i){const{top:r,left:s,bottom:o,right:u,chart:h}=n,{chartArea:d,scales:p}=h;let g=0,_,y,w;const b=o-r,C=u-s;if(n.isHorizontal()){if(y=hi(i,s,u),jt(t)){const S=Object.keys(t)[0],T=t[S];w=p[S].getPixelForValue(T)+b-e}else t==="center"?w=(d.bottom+d.top)/2+b-e:w=Xw(n,t,e);_=u-s}else{if(jt(t)){const S=Object.keys(t)[0],T=t[S];y=p[S].getPixelForValue(T)-C+e}else t==="center"?y=(d.left+d.right)/2-C+e:y=Xw(n,t,e);w=hi(i,o,r),g=t==="left"?-Qr:Qr}return{titleX:y,titleY:w,maxWidth:_,rotation:g}}class Zu extends sl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=ms(e,Number.POSITIVE_INFINITY),t=ms(t,Number.NEGATIVE_INFINITY),i=ms(i,Number.POSITIVE_INFINITY),r=ms(r,Number.NEGATIVE_INFINITY),{min:ms(e,i),max:ms(t,r),minDefined:Rr(e),maxDefined:Rr(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};const u=this.getMatchingVisibleMetas();for(let h=0,d=u.length;h<d;++h)o=u[h].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:ms(t,ms(i,t)),max:ms(i,ms(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){hn(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,u=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=I2(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?Kw(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=sI(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){hn(this.options.afterUpdate,[this])}beforeSetDimensions(){hn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){hn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),hn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){hn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=hn(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){hn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){hn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Yw(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let o=r,u,h,d;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const p=this._getLabelSizes(),g=p.widest.width,_=p.highest.height,y=Pr(this.chart.width-g,0,this.maxWidth);u=e.offset?this.maxWidth/i:y/(i-1),g+6>u&&(u=y/(i-(e.offset?.5:1)),h=this.maxHeight-Xc(e.grid)-t.padding-Jw(e.title,this.chart.options.font),d=Math.sqrt(g*g+_*_),o=t2(Math.min(Math.asin(Pr((p.highest.height+6)/u,-1,1)),Math.asin(Pr(h/d,-1,1))-Math.asin(Pr(_/d,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){hn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){hn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),u=this.isHorizontal();if(o){const h=Jw(r,t.options.font);if(u?(e.width=this.maxWidth,e.height=Xc(s)+h):(e.height=this.maxHeight,e.width=Xc(s)+h),i.display&&this.ticks.length){const{first:d,last:p,widest:g,highest:_}=this._getLabelSizes(),y=i.padding*2,w=$a(this.labelRotation),b=Math.cos(w),C=Math.sin(w);if(u){const S=i.mirror?0:C*g.width+b*_.height;e.height=Math.min(this.maxHeight,e.height+S+y)}else{const S=i.mirror?0:b*g.width+C*_.height;e.width=Math.min(this.maxWidth,e.width+S+y)}this._calculatePadding(d,p,C,b)}}this._handleMargins(),u?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:s,padding:o},position:u}=this.options,h=this.labelRotation!==0,d=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let _=0,y=0;h?d?(_=r*e.width,y=i*t.height):(_=i*e.height,y=r*t.width):s==="start"?y=t.width:s==="end"?_=e.width:s!=="inner"&&(_=e.width/2,y=t.width/2),this.paddingLeft=Math.max((_-p+o)*this.width/(this.width-p),0),this.paddingRight=Math.max((y-g+o)*this.width/(this.width-g),0)}else{let p=t.height/2,g=e.height/2;s==="start"?(p=0,g=e.height):s==="end"&&(p=t.height,g=0),this.paddingTop=p+o,this.paddingBottom=g+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){hn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)an(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Kw(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:s}=this,o=[],u=[],h=Math.floor(t/Yw(t,i));let d=0,p=0,g,_,y,w,b,C,S,T,R,F,k;for(g=0;g<t;g+=h){if(w=e[g].label,b=this._resolveTickFontOptions(g),r.font=C=b.string,S=s[C]=s[C]||{data:{},gc:[]},T=b.lineHeight,R=F=0,!an(w)&&!Gn(w))R=Cw(r,S.data,S.gc,R,w),F=T;else if(Gn(w))for(_=0,y=w.length;_<y;++_)k=w[_],!an(k)&&!Gn(k)&&(R=Cw(r,S.data,S.gc,R,k),F+=T);o.push(R),u.push(F),d=Math.max(R,d),p=Math.max(F,p)}fI(s,t);const z=o.indexOf(d),N=u.indexOf(p),I=W=>({width:o[W]||0,height:u[W]||0});return{first:I(0),last:I(t-1),widest:I(z),highest:I(N),widths:o,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return r2(this._alignToPixels?Oa(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=mI(this.getContext(),e,i))}return this.$context||(this.$context=pI(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=$a(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,u=s?s.widest.width+o:0,h=s?s.highest.height+o:0;return this.isHorizontal()?h*i>u*r?u/i:h/r:h*r<u*i?h/i:u/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:u}=r,h=s.offset,d=this.isHorizontal(),g=this.ticks.length+(h?1:0),_=Xc(s),y=[],w=u.setContext(this.getContext()),b=w.display?w.width:0,C=b/2,S=function(oe){return Oa(i,oe,b)};let T,R,F,k,z,N,I,W,j,U,K,Y;if(o==="top")T=S(this.bottom),N=this.bottom-_,W=T-C,U=S(e.top)+C,Y=e.bottom;else if(o==="bottom")T=S(this.top),U=e.top,Y=S(e.bottom)-C,N=T+C,W=this.top+_;else if(o==="left")T=S(this.right),z=this.right-_,I=T-C,j=S(e.left)+C,K=e.right;else if(o==="right")T=S(this.left),j=e.left,K=S(e.right)-C,z=T+C,I=this.left+_;else if(t==="x"){if(o==="center")T=S((e.top+e.bottom)/2+.5);else if(jt(o)){const oe=Object.keys(o)[0],ae=o[oe];T=S(this.chart.scales[oe].getPixelForValue(ae))}U=e.top,Y=e.bottom,N=T+C,W=N+_}else if(t==="y"){if(o==="center")T=S((e.left+e.right)/2);else if(jt(o)){const oe=Object.keys(o)[0],ae=o[oe];T=S(this.chart.scales[oe].getPixelForValue(ae))}z=T-C,I=z-_,j=e.left,K=e.right}const Q=Bt(r.ticks.maxTicksLimit,g),ne=Math.max(1,Math.ceil(g/Q));for(R=0;R<g;R+=ne){const oe=this.getContext(R),ae=s.setContext(oe),ee=u.setContext(oe),pe=ae.lineWidth,O=ae.color,G=ee.dash||[],se=ee.dashOffset,D=ae.tickWidth,fe=ae.tickColor,ve=ae.tickBorderDash||[],te=ae.tickBorderDashOffset;F=dI(this,R,h),F!==void 0&&(k=Oa(i,F,pe),d?z=I=j=K=k:N=W=U=Y=k,y.push({tx1:z,ty1:N,tx2:I,ty2:W,x1:j,y1:U,x2:K,y2:Y,width:pe,color:O,borderDash:G,borderDashOffset:se,tickWidth:D,tickColor:fe,tickBorderDash:ve,tickBorderDashOffset:te}))}return this._ticksLength=g,this._borderValue=T,y}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:d,padding:p,mirror:g}=s,_=Xc(i.grid),y=_+p,w=g?-p:y,b=-$a(this.labelRotation),C=[];let S,T,R,F,k,z,N,I,W,j,U,K,Y="middle";if(r==="top")z=this.bottom-w,N=this._getXAxisLabelAlignment();else if(r==="bottom")z=this.top+w,N=this._getXAxisLabelAlignment();else if(r==="left"){const ne=this._getYAxisLabelAlignment(_);N=ne.textAlign,k=ne.x}else if(r==="right"){const ne=this._getYAxisLabelAlignment(_);N=ne.textAlign,k=ne.x}else if(t==="x"){if(r==="center")z=(e.top+e.bottom)/2+y;else if(jt(r)){const ne=Object.keys(r)[0],oe=r[ne];z=this.chart.scales[ne].getPixelForValue(oe)+y}N=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")k=(e.left+e.right)/2-y;else if(jt(r)){const ne=Object.keys(r)[0],oe=r[ne];k=this.chart.scales[ne].getPixelForValue(oe)}N=this._getYAxisLabelAlignment(_).textAlign}t==="y"&&(h==="start"?Y="top":h==="end"&&(Y="bottom"));const Q=this._getLabelSizes();for(S=0,T=u.length;S<T;++S){R=u[S],F=R.label;const ne=s.setContext(this.getContext(S));I=this.getPixelForTick(S)+s.labelOffset,W=this._resolveTickFontOptions(S),j=W.lineHeight,U=Gn(F)?F.length:1;const oe=U/2,ae=ne.color,ee=ne.textStrokeColor,pe=ne.textStrokeWidth;let O=N;o?(k=I,N==="inner"&&(S===T-1?O=this.options.reverse?"left":"right":S===0?O=this.options.reverse?"right":"left":O="center"),r==="top"?d==="near"||b!==0?K=-U*j+j/2:d==="center"?K=-Q.highest.height/2-oe*j+j:K=-Q.highest.height+j/2:d==="near"||b!==0?K=j/2:d==="center"?K=Q.highest.height/2-oe*j:K=Q.highest.height-U*j,g&&(K*=-1),b!==0&&!ne.showLabelBackdrop&&(k+=j/2*Math.sin(b))):(z=I,K=(1-U)*j/2);let G;if(ne.showLabelBackdrop){const se=Ir(ne.backdropPadding),D=Q.heights[S],fe=Q.widths[S];let ve=K-se.top,te=0-se.left;switch(Y){case"middle":ve-=D/2;break;case"bottom":ve-=D;break}switch(N){case"center":te-=fe/2;break;case"right":te-=fe;break;case"inner":S===T-1?te-=fe:S>0&&(te-=fe/2);break}G={left:te,top:ve,width:fe+se.width,height:D+se.height,color:ne.backdropColor}}C.push({label:F,font:W,textOffset:K,options:{rotation:b,color:ae,strokeColor:ee,strokeWidth:pe,textAlign:O,textBaseline:Y,translation:[k,z],backdrop:G}})}return C}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-$a(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),u=e+s,h=o.widest.width;let d,p;return t==="left"?r?(p=this.right+s,i==="near"?d="left":i==="center"?(d="center",p+=h/2):(d="right",p+=h)):(p=this.right-u,i==="near"?d="right":i==="center"?(d="center",p-=h/2):(d="left",p=this.left)):t==="right"?r?(p=this.left+s,i==="near"?d="right":i==="center"?(d="center",p-=h/2):(d="left",p-=h)):(p=this.left+u,i==="near"?d="left":i==="center"?(d="center",p+=h/2):(d="right",p=this.right)):d="right",{textAlign:d,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const u=(h,d,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){const h=r[s];t.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const u=r.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let d,p,g,_;this.isHorizontal()?(d=Oa(e,this.left,o)-o/2,p=Oa(e,this.right,u)+u/2,g=_=h):(g=Oa(e,this.top,o)-o/2,_=Oa(e,this.bottom,u)+u/2,d=p=h),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(d,g),t.lineTo(p,_),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&yv(i,r);const s=this.getLabelItems(e);for(const o of s){const u=o.options,h=o.font,d=o.label,p=o.textOffset;Hh(i,d,0,p,h,u)}r&&vv(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const s=pi(i.font),o=Ir(i.padding),u=i.align;let h=s.lineHeight/2;t==="bottom"||t==="center"||jt(t)?(h+=o.bottom,Gn(i.text)&&(h+=s.lineHeight*(i.text.length-1))):h+=o.top;const{titleX:d,titleY:p,maxWidth:g,rotation:_}=_I(this,h,t,u);Hh(e,i.text,0,0,s,{color:i.color,maxWidth:g,rotation:_,textAlign:gI(u,t,r),textBaseline:"middle",translation:[d,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Bt(e.grid&&e.grid.z,-1),r=Bt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Zu.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=t.length;s<o;++s){const u=t[s];u[i]===this.id&&(!e||u.type===e)&&r.push(u)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return pi(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Rf{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;xI(t)&&(i=this.register(t));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,yI(e,o,i),this.override&&Cn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in Cn[r]&&(delete Cn[r][i],this.override&&delete el[i])}}function yI(n,e,t){const i=Fh(Object.create(null),[t?Cn.get(t):{},Cn.get(e),n.defaults]);Cn.set(e,i),n.defaultRoutes&&vI(e,n.defaultRoutes),n.descriptors&&Cn.describe(e,n.descriptors)}function vI(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),u=o.pop(),h=o.join(".");Cn.route(s,r,h,u)})}function xI(n){return"id"in n&&"defaults"in n}class wI{constructor(){this.controllers=new Rf(hE,"datasets",!0),this.elements=new Rf(sl,"elements"),this.plugins=new Rf(Object,"plugins"),this.scales=new Rf(Zu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):qt(r,o=>{const u=i||this._getRegistryForType(o);this._exec(e,u,o)})})}_exec(e,t,i){const r=pv(e);hn(i["before"+r],[],i),t[e](i),hn(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var _s=new wI;class bI{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(const s of e){const o=s.plugin,u=o[i],h=[t,r,s.options];if(hn(u,h,o)===!1&&r.cancelable)return!1}return!0}invalidate(){an(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=Bt(i.options&&i.options.plugins,{}),s=SI(i);return r===!1&&!t?[]:EI(e,s,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(u=>!o.some(h=>u.plugin.id===h.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function SI(n){const e={},t=[],i=Object.keys(_s.plugins.items);for(let s=0;s<i.length;s++)t.push(_s.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function MI(n,e){return!e&&n===!1?null:n===!0?{}:n}function EI(n,{plugins:e,localIds:t},i,r){const s=[],o=n.getContext();for(const u of e){const h=u.id,d=MI(i[h],r);d!==null&&s.push({plugin:u,options:TI(n.config,{plugin:u,local:t[h]},d,o)})}return s}function TI(n,{plugin:e,local:t},i,r){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ly(n,e){const t=Cn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function LI(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function CI(n,e){return n===e?"_index_":"_value_"}function Qw(n){if(n==="x"||n==="y"||n==="r")return n}function PI(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Cy(n,...e){if(Qw(n))return n;for(const t of e){const i=t.axis||PI(t.position)||n.length>1&&Qw(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function eb(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function AI(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return eb(n,"x",t[0])||eb(n,"y",t[0])}return{}}function kI(n,e){const t=el[n.type]||{scales:{}},i=e.scales||{},r=Ly(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const u=i[o];if(!jt(u))return console.error(`Invalid scale configuration for scale: ${o}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const h=Cy(o,u,AI(o,n),Cn.scales[u.type]),d=CI(h,r),p=t.scales||{};s[o]=bh(Object.create(null),[{axis:h},u,p[h],p[d]])}),n.data.datasets.forEach(o=>{const u=o.type||n.type,h=o.indexAxis||Ly(u,e),p=(el[u]||{}).scales||{};Object.keys(p).forEach(g=>{const _=LI(g,h),y=o[_+"AxisID"]||_;s[y]=s[y]||Object.create(null),bh(s[y],[{axis:_},i[y],p[g]])})}),Object.keys(s).forEach(o=>{const u=s[o];bh(u,[Cn.scales[u.type],Cn.scale])}),s}function _E(n){const e=n.options||(n.options={});e.plugins=Bt(e.plugins,{}),e.scales=kI(n,e)}function yE(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function RI(n){return n=n||{},n.data=yE(n.data),_E(n),n}const tb=new Map,vE=new Set;function If(n,e){let t=tb.get(n);return t||(t=e(),tb.set(n,t),vE.add(t)),t}const Yc=(n,e,t)=>{const i=Rp(e,t);i!==void 0&&n.add(i)};class II{constructor(e){this._config=RI(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=yE(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),_E(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return If(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return If(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return If(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return If(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),u=o.get(t);if(u)return u;const h=new Set;t.forEach(p=>{e&&(h.add(e),p.forEach(g=>Yc(h,e,g))),p.forEach(g=>Yc(h,r,g)),p.forEach(g=>Yc(h,el[s]||{},g)),p.forEach(g=>Yc(h,Cn,g)),p.forEach(g=>Yc(h,My,g))});const d=Array.from(h);return d.length===0&&d.push(Object.create(null)),vE.has(t)&&o.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,el[t]||{},Cn.datasets[t]||{},{type:t},Cn,My]}resolveNamedOptions(e,t,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:u}=nb(this._resolverCache,e,r);let h=o;if(NI(o,t)){s.$shared=!1,i=ia(i)?i():i;const d=this.createResolver(e,i,u);h=zu(o,i,d)}for(const d of t)s[d]=h[d];return s}createResolver(e,t,i=[""],r){const{resolver:s}=nb(this._resolverCache,e,i);return jt(t)?zu(s,t,void 0,r):s}}function nb(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const r=t.join();let s=i.get(r);return s||(s={resolver:xv(e,t),subPrefixes:t.filter(u=>!u.toLowerCase().includes("hover"))},i.set(r,s)),s}const DI=n=>jt(n)&&Object.getOwnPropertyNames(n).some(e=>ia(n[e]));function NI(n,e){const{isScriptable:t,isIndexable:i}=tE(n);for(const r of e){const s=t(r),o=i(r),u=(o||s)&&n[r];if(s&&(ia(u)||DI(u))||o&&Gn(u))return!0}return!1}var OI="4.5.0";const zI=["top","bottom","left","right","chartArea"];function ib(n,e){return n==="top"||n==="bottom"||zI.indexOf(n)===-1&&e==="x"}function rb(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function sb(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),hn(t&&t.onComplete,[n],e)}function FI(n){const e=n.chart,t=e.options.animation;hn(t&&t.onProgress,[n],e)}function xE(n){return Sv()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const bp={},ob=n=>{const e=xE(n);return Object.values(bp).filter(t=>t.canvas===e).pop()};function BI(n,e,t){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=e){const o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function UI(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}let sm=class{static defaults=Cn;static instances=bp;static overrides=el;static registry=_s;static version=OI;static getChart=ob;static register(...e){_s.add(...e),ab()}static unregister(...e){_s.remove(...e),ab()}constructor(e,t){const i=this.config=new II(t),r=xE(e),s=ob(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||rI(r)),this.platform.updateConfig(i);const u=this.platform.acquireContext(r,o.aspectRatio),h=u&&u.canvas,d=h&&h.height,p=h&&h.width;if(this.id=Vk(),this.ctx=u,this.canvas=h,this.width=p,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=u2(g=>this.update(g),o.resizeDelay||0),this._dataChanges=[],bp[this.id]=this,!u||!h){console.error("Failed to create chart: can't acquire context from the given item");return}no.listen(this,"complete",sb),no.listen(this,"progress",FI),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:s}=this;return an(e)?t&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return _s}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Rw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Pw(this.canvas,this.ctx),this}stop(){return no.stop(this),this}resize(e,t){no.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,s),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Rw(this,u,!0)&&(this.notifyPlugins("resize",{size:o}),hn(i.onResize,[this,o],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};qt(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((o,u)=>(o[u]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const u=t[o],h=Cy(o,u),d=h==="r",p=h==="x";return{options:u,dposition:d?"chartArea":p?"bottom":"left",dtype:d?"radialLinear":p?"category":"linear"}}))),qt(s,o=>{const u=o.options,h=u.id,d=Cy(h,u),p=Bt(u.type,o.dtype);(u.position===void 0||ib(u.position,d)!==ib(o.dposition))&&(u.position=o.dposition),r[h]=!0;let g=null;if(h in i&&i[h].type===p)g=i[h];else{const _=_s.getScale(p);g=new _({id:h,type:p,ctx:this.ctx,chart:this}),i[g.id]=g}g.init(u,e)}),qt(r,(o,u)=>{o||delete i[u]}),qt(i,o=>{Ar.configure(this,o,o.options),Ar.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(rb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const s=t[i];let o=this.getDatasetMeta(i);const u=s.type||this.config.type;if(o.type&&o.type!==u&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=u,o.indexAxis=s.indexAxis||Ly(u,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const h=_s.getController(u),{datasetElementType:d,dataElementType:p}=Cn.datasets[u];Object.assign(h,{dataElementType:_s.getElement(p),datasetElementType:d&&_s.getElement(d)}),o.controller=new h(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){qt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,p=this.data.datasets.length;d<p;d++){const{controller:g}=this.getDatasetMeta(d),_=!r&&s.indexOf(g)===-1;g.buildOrUpdateElements(_),o=Math.max(+g.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||qt(s,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(rb("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){qt(this.scales,e=>{Ar.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!vw(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of t){const o=i==="_removeElements"?-s:s;BI(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,u)=>u+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<t;s++)if(!vw(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ar.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],qt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,ia(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(no.has(this)?this.attached&&!no.running(this)&&no.start(this):(this.draw(),sb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,s;for(r=0,s=t.length;r<s;++r){const o=t[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=gR(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&yv(t,r),e.controller.draw(),r&&vv(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Uh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const s=zR.modes[t];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=rl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Ip(t)?(s.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(u=>u.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),no.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Pw(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete bp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},r=(s,o,u)=>{s.offsetX=o,s.offsetY=u,this._eventHandler(s)};qt(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(h,d)=>{t.addEventListener(this,h,d),e[h]=d},r=(h,d)=>{e[h]&&(t.removeEventListener(this,h,d),delete e[h])},s=(h,d)=>{this.canvas&&this.resize(h,d)};let o;const u=()=>{r("attach",u),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",u)},t.isAttached(this.canvas)?u():o()}unbindEvents(){qt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},qt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let s,o,u,h;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){o=e[u];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const u=this.getDatasetMeta(s);if(!u)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:u.data[o],index:o}});!Ap(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const r=this.options.hover,s=(h,d)=>h.filter(p=>!d.some(g=>p.datasetIndex===g.datasetIndex&&p.index===g.index)),o=s(t,e),u=i?e:s(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),u.length&&r.mode&&this.updateHoverStyle(u,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:s}=this,o=t,u=this._getActiveElements(e,r,i,o),h=qk(e),d=UI(e,this._lastEvent,i,h);i&&(this._lastEvent=null,hn(s.onHover,[e,u,this],this),h&&hn(s.onClick,[e,u,this],this));const p=!Ap(u,r);return(p||t)&&(this._active=u,this._updateHoverStyles(u,r,t)),this._lastEvent=d,p}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}};function ab(){return qt(sm.instances,n=>n._plugins.invalidate())}function wE(n,e,t=e){n.lineCap=Bt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Bt(t.borderDash,e.borderDash)),n.lineDashOffset=Bt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Bt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Bt(t.borderWidth,e.borderWidth),n.strokeStyle=Bt(t.borderColor,e.borderColor)}function HI(n,e,t){n.lineTo(t.x,t.y)}function VI(n){return n.stepped?S2:n.tension||n.cubicInterpolationMode==="monotone"?M2:HI}function bE(n,e,t={}){const i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:u}=e,h=Math.max(r,o),d=Math.min(s,u),p=r<o&&s<o||r>u&&s>u;return{count:i,start:h,loop:e.loop,ilen:d<h&&!p?i+d-h:d-h}}function WI(n,e,t,i){const{points:r,options:s}=e,{count:o,start:u,loop:h,ilen:d}=bE(r,t,i),p=VI(s);let{move:g=!0,reverse:_}=i||{},y,w,b;for(y=0;y<=d;++y)w=r[(u+(_?d-y:y))%o],!w.skip&&(g?(n.moveTo(w.x,w.y),g=!1):p(n,b,w,_,s.stepped),b=w);return h&&(w=r[(u+(_?d:0))%o],p(n,b,w,_,s.stepped)),!!h}function jI(n,e,t,i){const r=e.points,{count:s,start:o,ilen:u}=bE(r,t,i),{move:h=!0,reverse:d}=i||{};let p=0,g=0,_,y,w,b,C,S;const T=F=>(o+(d?u-F:F))%s,R=()=>{b!==C&&(n.lineTo(p,C),n.lineTo(p,b),n.lineTo(p,S))};for(h&&(y=r[T(0)],n.moveTo(y.x,y.y)),_=0;_<=u;++_){if(y=r[T(_)],y.skip)continue;const F=y.x,k=y.y,z=F|0;z===w?(k<b?b=k:k>C&&(C=k),p=(g*p+F)/++g):(R(),n.lineTo(F,k),w=z,g=0,b=C=k),S=k}R()}function Py(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?jI:WI}function GI(n){return n.stepped?iR:n.tension||n.cubicInterpolationMode==="monotone"?rR:Ha}function $I(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),wE(n,e.options),n.stroke(r)}function ZI(n,e,t,i){const{segments:r,options:s}=e,o=Py(e);for(const u of r)wE(n,s,u.style),n.beginPath(),o(n,e,u,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const qI=typeof Path2D=="function";function XI(n,e,t,i){qI&&!e.options.segment?$I(n,e,t,i):ZI(n,e,t,i)}class YI extends sl{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;X2(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=dR(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],s=this.points,o=uR(this,{property:t,start:r,end:r});if(!o.length)return;const u=[],h=GI(i);let d,p;for(d=0,p=o.length;d<p;++d){const{start:g,end:_}=o[d],y=s[g],w=s[_];if(y===w){u.push(y);continue}const b=Math.abs((r-y[t])/(w[t]-y[t])),C=h(y,w,b,i.stepped);C[t]=e[t],u.push(C)}return u.length===1?u[0]:u}pathSegment(e,t,i){return Py(this)(e,this,t,i)}path(e,t,i){const r=this.segments,s=Py(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const u of r)o&=s(e,this,u,{start:t,end:t+i-1});return!!o}draw(e,t,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),XI(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function lb(n,e,t,i){const r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}class KI extends sl{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(e-s,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return lb(this,e,"x",t)}inYRange(e,t){return lb(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!Uh(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Ey(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const ub=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},JI=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class cb extends sl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=hn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=pi(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=ub(i,s);let d,p;t.font=r.string,this.isHorizontal()?(d=this.maxWidth,p=this._fitRows(o,s,u,h)+10):(p=this.maxHeight,d=this._fitCols(o,r,u,h)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],d=this.lineWidths=[0],p=r+u;let g=e;s.textAlign="left",s.textBaseline="middle";let _=-1,y=-p;return this.legendItems.forEach((w,b)=>{const C=i+t/2+s.measureText(w.text).width;(b===0||d[d.length-1]+C+2*u>o)&&(g+=p,d[d.length-(b>0?0:1)]=0,y+=p,_++),h[b]={left:0,top:y,row:_,width:C,height:r},d[d.length-1]+=C+u}),g}_fitCols(e,t,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],d=this.columnSizes=[],p=o-e;let g=u,_=0,y=0,w=0,b=0;return this.legendItems.forEach((C,S)=>{const{itemWidth:T,itemHeight:R}=QI(i,t,s,C,r);S>0&&y+R+2*u>p&&(g+=_+u,d.push({width:_,height:y}),w+=_+u,b++,_=y=0),h[S]={left:w,top:y,col:b,width:T,height:R},_=Math.max(_,T),y+=R+u}),g+=_,d.push({width:_,height:y}),g}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Tu(s,this.left,this.width);if(this.isHorizontal()){let u=0,h=hi(i,this.left+r,this.right-this.lineWidths[u]);for(const d of t)u!==d.row&&(u=d.row,h=hi(i,this.left+r,this.right-this.lineWidths[u])),d.top+=this.top+e+r,d.left=o.leftForLtr(o.x(h),d.width),h+=d.width+r}else{let u=0,h=hi(i,this.top+e+r,this.bottom-this.columnSizes[u].height);for(const d of t)d.col!==u&&(u=d.col,h=hi(i,this.top+e+r,this.bottom-this.columnSizes[u].height)),d.top=h,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),h+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;yv(e,this),this._draw(),vv(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,u=Cn.color,h=Tu(e.rtl,this.left,this.width),d=pi(o.font),{padding:p}=o,g=d.size,_=g/2;let y;this.drawTitle(),r.textAlign=h.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:w,boxHeight:b,itemHeight:C}=ub(o,g),S=function(z,N,I){if(isNaN(w)||w<=0||isNaN(b)||b<0)return;r.save();const W=Bt(I.lineWidth,1);if(r.fillStyle=Bt(I.fillStyle,u),r.lineCap=Bt(I.lineCap,"butt"),r.lineDashOffset=Bt(I.lineDashOffset,0),r.lineJoin=Bt(I.lineJoin,"miter"),r.lineWidth=W,r.strokeStyle=Bt(I.strokeStyle,u),r.setLineDash(Bt(I.lineDash,[])),o.usePointStyle){const j={radius:b*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:W},U=h.xPlus(z,w/2),K=N+_;QM(r,j,U,K,o.pointStyleWidth&&w)}else{const j=N+Math.max((g-b)/2,0),U=h.leftForLtr(z,w),K=Th(I.borderRadius);r.beginPath(),Object.values(K).some(Y=>Y!==0)?Ty(r,{x:U,y:j,w,h:b,radius:K}):r.rect(U,j,w,b),r.fill(),W!==0&&r.stroke()}r.restore()},T=function(z,N,I){Hh(r,I.text,z,N+C/2,d,{strikethrough:I.hidden,textAlign:h.textAlign(I.textAlign)})},R=this.isHorizontal(),F=this._computeTitleHeight();R?y={x:hi(s,this.left+p,this.right-i[0]),y:this.top+p+F,line:0}:y={x:this.left+p,y:hi(s,this.top+F+p,this.bottom-t[0].height),line:0},oE(this.ctx,e.textDirection);const k=C+p;this.legendItems.forEach((z,N)=>{r.strokeStyle=z.fontColor,r.fillStyle=z.fontColor;const I=r.measureText(z.text).width,W=h.textAlign(z.textAlign||(z.textAlign=o.textAlign)),j=w+_+I;let U=y.x,K=y.y;h.setWidth(this.width),R?N>0&&U+j+p>this.right&&(K=y.y+=k,y.line++,U=y.x=hi(s,this.left+p,this.right-i[y.line])):N>0&&K+k>this.bottom&&(U=y.x=U+t[y.line].width+p,y.line++,K=y.y=hi(s,this.top+F+p,this.bottom-t[y.line].height));const Y=h.x(U);if(S(Y,K,z),U=c2(W,U+w+_,R?U+j:this.right,e.rtl),T(h.x(U),K,z),R)y.x+=j+p;else if(typeof z.text!="string"){const Q=d.lineHeight;y.y+=SE(z,Q)+p}else y.y+=k}),aE(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=pi(t.font),r=Ir(t.padding);if(!t.display)return;const s=Tu(e.rtl,this.left,this.width),o=this.ctx,u=t.position,h=i.size/2,d=r.top+h;let p,g=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),p=this.top+d,g=hi(e.align,g,this.right-_);else{const w=this.columnSizes.reduce((b,C)=>Math.max(b,C.height),0);p=d+hi(e.align,this.top,this.bottom-w-e.labels.padding-this._computeTitleHeight())}const y=hi(u,g,g+_);o.textAlign=s.textAlign(gv(u)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Hh(o,t.text,y,p,i)}_computeTitleHeight(){const e=this.options.title,t=pi(e.font),i=Ir(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(mh(e,this.left,this.right)&&mh(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],mh(e,r.left,r.left+r.width)&&mh(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!n3(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=JI(r,i);r&&!s&&hn(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&hn(t.onHover,[e,i,this],this)}else i&&hn(t.onClick,[e,i,this],this)}}function QI(n,e,t,i,r){const s=e3(i,n,e,t),o=t3(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function e3(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function t3(n,e,t){let i=n;return typeof e.text!="string"&&(i=SE(e,t)),i}function SE(n,e){const t=n.text?n.text.length:0;return e*t}function n3(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var i3={id:"legend",_element:cb,start(n,e,t){const i=n.legend=new cb({ctx:n.ctx,options:t,chart:n});Ar.configure(n,i,t),Ar.addBox(n,i)},stop(n){Ar.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;Ar.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const d=h.controller.getStyle(t?0:void 0),p=Ir(d.borderWidth);return{text:e[h.index].label,fillStyle:d.backgroundColor,fontColor:s,hidden:!h.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(u||d.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class ME extends sl{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=Gn(i.text)?i.text.length:1;this._padding=Ir(i.padding);const s=r*pi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:r,right:s,options:o}=this,u=o.align;let h=0,d,p,g;return this.isHorizontal()?(p=hi(u,i,s),g=t+e,d=s-i):(o.position==="left"?(p=i+e,g=hi(u,r,t),h=Zn*-.5):(p=s-e,g=hi(u,t,r),h=Zn*.5),d=r-t),{titleX:p,titleY:g,maxWidth:d,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=pi(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:u,maxWidth:h,rotation:d}=this._drawArgs(s);Hh(e,t.text,0,0,i,{color:t.color,maxWidth:h,rotation:d,textAlign:gv(t.align),textBaseline:"middle",translation:[o,u]})}}function r3(n,e){const t=new ME({ctx:n.ctx,options:e,chart:n});Ar.configure(n,t,e),Ar.addBox(n,t),n.titleBlock=t}var s3={id:"title",_element:ME,start(n,e,t){r3(n,t)},stop(n){const e=n.titleBlock;Ar.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;Ar.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _h={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){const u=n[e].element;if(u&&u.hasValue()){const h=u.tooltipPosition();i.add(h.x),r+=h.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((u,h)=>u+h)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,u;for(s=0,o=n.length;s<o;++s){const h=n[s].element;if(h&&h.hasValue()){const d=h.getCenterPoint(),p=Sy(e,d);p<r&&(r=p,u=h)}}if(u){const h=u.tooltipPosition();t=h.x,i=h.y}return{x:t,y:i}}};function gs(n,e){return e&&(Gn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function io(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function o3(n,e){const{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:u}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:u,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function hb(n,e){const t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:u}=e,h=pi(e.bodyFont),d=pi(e.titleFont),p=pi(e.footerFont),g=s.length,_=r.length,y=i.length,w=Ir(e.padding);let b=w.height,C=0,S=i.reduce((F,k)=>F+k.before.length+k.lines.length+k.after.length,0);if(S+=n.beforeBody.length+n.afterBody.length,g&&(b+=g*d.lineHeight+(g-1)*e.titleSpacing+e.titleMarginBottom),S){const F=e.displayColors?Math.max(u,h.lineHeight):h.lineHeight;b+=y*F+(S-y)*h.lineHeight+(S-1)*e.bodySpacing}_&&(b+=e.footerMarginTop+_*p.lineHeight+(_-1)*e.footerSpacing);let T=0;const R=function(F){C=Math.max(C,t.measureText(F).width+T)};return t.save(),t.font=d.string,qt(n.title,R),t.font=h.string,qt(n.beforeBody.concat(n.afterBody),R),T=e.displayColors?o+2+e.boxPadding:0,qt(i,F=>{qt(F.before,R),qt(F.lines,R),qt(F.after,R)}),T=0,t.font=p.string,qt(n.footer,R),t.restore(),C+=w.width,{width:C,height:b}}function a3(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function l3(n,e,t,i){const{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function u3(n,e,t,i){const{x:r,width:s}=t,{width:o,chartArea:{left:u,right:h}}=n;let d="center";return i==="center"?d=r<=(u+h)/2?"left":"right":r<=s/2?d="left":r>=o-s/2&&(d="right"),l3(d,n,e,t)&&(d="center"),d}function db(n,e,t){const i=t.yAlign||e.yAlign||a3(n,t);return{xAlign:t.xAlign||e.xAlign||u3(n,e,t,i),yAlign:i}}function c3(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function h3(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function fb(n,e,t,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:u,yAlign:h}=t,d=r+s,{topLeft:p,topRight:g,bottomLeft:_,bottomRight:y}=Th(o);let w=c3(e,u);const b=h3(e,h,d);return h==="center"?u==="left"?w+=d:u==="right"&&(w-=d):u==="left"?w-=Math.max(p,_)+r:u==="right"&&(w+=Math.max(g,y)+r),{x:Pr(w,0,i.width-e.width),y:Pr(b,0,i.height-e.height)}}function Df(n,e,t){const i=Ir(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function pb(n){return gs([],io(n))}function d3(n,e,t){return rl(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function mb(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const EE={beforeTitle:Ys,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Ys,beforeBody:Ys,beforeLabel:Ys,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return an(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ys,afterBody:Ys,beforeFooter:Ys,footer:Ys,afterFooter:Ys};function Fi(n,e,t,i){const r=n[e].call(t,i);return typeof r>"u"?EE[e].call(t,i):r}class gb extends sl{static positioners=_h;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,s=new uE(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=d3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,r=Fi(i,"beforeTitle",this,e),s=Fi(i,"title",this,e),o=Fi(i,"afterTitle",this,e);let u=[];return u=gs(u,io(r)),u=gs(u,io(s)),u=gs(u,io(o)),u}getBeforeBody(e,t){return pb(Fi(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return qt(e,s=>{const o={before:[],lines:[],after:[]},u=mb(i,s);gs(o.before,io(Fi(u,"beforeLabel",this,s))),gs(o.lines,Fi(u,"label",this,s)),gs(o.after,io(Fi(u,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,t){return pb(Fi(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=Fi(i,"beforeFooter",this,e),s=Fi(i,"footer",this,e),o=Fi(i,"afterFooter",this,e);let u=[];return u=gs(u,io(r)),u=gs(u,io(s)),u=gs(u,io(o)),u}_createItems(e){const t=this._active,i=this.chart.data,r=[],s=[],o=[];let u=[],h,d;for(h=0,d=t.length;h<d;++h)u.push(o3(this.chart,t[h]));return e.filter&&(u=u.filter((p,g,_)=>e.filter(p,g,_,i))),e.itemSort&&(u=u.sort((p,g)=>e.itemSort(p,g,i))),qt(u,p=>{const g=mb(e.callbacks,p);r.push(Fi(g,"labelColor",this,p)),s.push(Fi(g,"labelPointStyle",this,p)),o.push(Fi(g,"labelTextColor",this,p))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=u,u}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const u=_h[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const h=this._size=hb(this,i),d=Object.assign({},u,h),p=db(this.chart,i,d),g=fb(i,d,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,s={opacity:1,x:g.x,y:g.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const s=this.getCaretPosition(e,i,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:u}=i,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:g}=Th(u),{x:_,y}=e,{width:w,height:b}=t;let C,S,T,R,F,k;return s==="center"?(F=y+b/2,r==="left"?(C=_,S=C-o,R=F+o,k=F-o):(C=_+w,S=C+o,R=F-o,k=F+o),T=C):(r==="left"?S=_+Math.max(h,p)+o:r==="right"?S=_+w-Math.max(d,g)-o:S=this.caretX,s==="top"?(R=y,F=R-o,C=S-o,T=S+o):(R=y+b,F=R+o,C=S+o,T=S-o),k=R),{x1:C,x2:S,x3:T,y1:R,y2:F,y3:k}}drawTitle(e,t,i){const r=this.title,s=r.length;let o,u,h;if(s){const d=Tu(i.rtl,this.x,this.width);for(e.x=Df(this,i.titleAlign,i),t.textAlign=d.textAlign(i.titleAlign),t.textBaseline="middle",o=pi(i.titleFont),u=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,h=0;h<s;++h)t.fillText(r[h],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+u,h+1===s&&(e.y+=i.titleMarginBottom-u)}}_drawColorBox(e,t,i,r,s){const o=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:h,boxWidth:d}=s,p=pi(s.bodyFont),g=Df(this,"left",s),_=r.x(g),y=h<p.lineHeight?(p.lineHeight-h)/2:0,w=t.y+y;if(s.usePointStyle){const b={radius:Math.min(d,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},C=r.leftForLtr(_,d)+d/2,S=w+h/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Ey(e,b,C,S),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Ey(e,b,C,S)}else{e.lineWidth=jt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=r.leftForLtr(_,d),C=r.leftForLtr(r.xPlus(_,1),d-2),S=Th(o.borderRadius);Object.values(S).some(T=>T!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Ty(e,{x:b,y:w,w:d,h,radius:S}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Ty(e,{x:C,y:w+1,w:d-2,h:h-2,radius:S}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(b,w,d,h),e.strokeRect(b,w,d,h),e.fillStyle=o.backgroundColor,e.fillRect(C,w+1,d-2,h-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:u,boxHeight:h,boxWidth:d,boxPadding:p}=i,g=pi(i.bodyFont);let _=g.lineHeight,y=0;const w=Tu(i.rtl,this.x,this.width),b=function(I){t.fillText(I,w.x(e.x+y),e.y+_/2),e.y+=_+s},C=w.textAlign(o);let S,T,R,F,k,z,N;for(t.textAlign=o,t.textBaseline="middle",t.font=g.string,e.x=Df(this,C,i),t.fillStyle=i.bodyColor,qt(this.beforeBody,b),y=u&&C!=="right"?o==="center"?d/2+p:d+2+p:0,F=0,z=r.length;F<z;++F){for(S=r[F],T=this.labelTextColors[F],t.fillStyle=T,qt(S.before,b),R=S.lines,u&&R.length&&(this._drawColorBox(t,e,F,w,i),_=Math.max(g.lineHeight,h)),k=0,N=R.length;k<N;++k)b(R[k]),_=g.lineHeight;qt(S.after,b)}y=0,_=g.lineHeight,qt(this.afterBody,b),e.y-=s}drawFooter(e,t,i){const r=this.footer,s=r.length;let o,u;if(s){const h=Tu(i.rtl,this.x,this.width);for(e.x=Df(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=h.textAlign(i.footerAlign),t.textBaseline="middle",o=pi(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,u=0;u<s;++u)t.fillText(r[u],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:s,yAlign:o}=this,{x:u,y:h}=e,{width:d,height:p}=i,{topLeft:g,topRight:_,bottomLeft:y,bottomRight:w}=Th(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(u+g,h),o==="top"&&this.drawCaret(e,t,i,r),t.lineTo(u+d-_,h),t.quadraticCurveTo(u+d,h,u+d,h+_),o==="center"&&s==="right"&&this.drawCaret(e,t,i,r),t.lineTo(u+d,h+p-w),t.quadraticCurveTo(u+d,h+p,u+d-w,h+p),o==="bottom"&&this.drawCaret(e,t,i,r),t.lineTo(u+y,h+p),t.quadraticCurveTo(u,h+p,u,h+p-y),o==="center"&&s==="left"&&this.drawCaret(e,t,i,r),t.lineTo(u,h+g),t.quadraticCurveTo(u,h,u+g,h),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=_h[e.position].call(this,this._active,this._eventPosition);if(!o)return;const u=this._size=hb(this,e),h=Object.assign({},o,this._size),d=db(t,e,h),p=fb(e,h,d,t);(r._to!==p.x||s._to!==p.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=u.width,this.height=u.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ir(t.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&u&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,t),oE(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),aE(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:u,index:h})=>{const d=this.chart.getDatasetMeta(u);if(!d)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:d.data[h],index:h}}),s=!Ap(i,r),o=this._positionChanged(r,t);(s||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,i),u=this._positionChanged(o,e),h=t||!Ap(o,s)||u;return h&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:r,options:s}=this,o=_h[s.position].call(this,e,t);return o!==!1&&(i!==o.x||r!==o.y)}}var f3={id:"tooltip",_element:gb,positioners:_h,afterInit(n,e,t){t&&(n.tooltip=new gb({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:EE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const p3=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function m3(n,e,t,i){const r=n.indexOf(e);if(r===-1)return p3(n,e,t,i);const s=n.lastIndexOf(e);return r!==s?t:r}const g3=(n,e)=>n===null?null:Pr(Math.round(n),0,e);function _b(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class _3 extends Zu{static id="category";static defaults={ticks:{callback:_b}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:r,label:s}of t)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(an(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:m3(i,e,Bt(t,e),this._addedLabels),g3(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){return _b.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function y3(n,e){const t=[],{bounds:r,step:s,min:o,max:u,precision:h,count:d,maxTicks:p,maxDigits:g,includeBounds:_}=n,y=s||1,w=p-1,{min:b,max:C}=e,S=!an(o),T=!an(u),R=!an(d),F=(C-b)/(g+1);let k=ww((C-b)/w/y)*y,z,N,I,W;if(k<1e-14&&!S&&!T)return[{value:b},{value:C}];W=Math.ceil(C/k)-Math.floor(b/k),W>w&&(k=ww(W*k/w/y)*y),an(h)||(z=Math.pow(10,h),k=Math.ceil(k*z)/z),r==="ticks"?(N=Math.floor(b/k)*k,I=Math.ceil(C/k)*k):(N=b,I=C),S&&T&&s&&Qk((u-o)/s,k/1e3)?(W=Math.round(Math.min((u-o)/k,p)),k=(u-o)/W,N=o,I=u):R?(N=S?o:N,I=T?u:I,W=d-1,k=(I-N)/W):(W=(I-N)/k,Sh(W,Math.round(W),k/1e3)?W=Math.round(W):W=Math.ceil(W));const j=Math.max(bw(k),bw(N));z=Math.pow(10,an(h)?j:h),N=Math.round(N*z)/z,I=Math.round(I*z)/z;let U=0;for(S&&(_&&N!==o?(t.push({value:o}),N<o&&U++,Sh(Math.round((N+U*k)*z)/z,o,yb(o,F,n))&&U++):N<o&&U++);U<W;++U){const K=Math.round((N+U*k)*z)/z;if(T&&K>u)break;t.push({value:K})}return T&&_&&I!==u?t.length&&Sh(t[t.length-1].value,u,yb(u,F,n))?t[t.length-1].value=u:t.push({value:u}):(!T||I===u)&&t.push({value:I}),t}function yb(n,e,{horizontal:t,minRotation:i}){const r=$a(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class v3 extends Zu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return an(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=h=>r=t?r:h,u=h=>s=i?s:h;if(e){const h=Ou(r),d=Ou(s);h<0&&d<0?u(0):h>0&&d>0&&o(0)}if(r===s){let h=s===0?1:Math.abs(s*.05);u(s+h),e||o(r-h)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=y3(r,s);return e.bounds==="ticks"&&e2(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return KM(e,this.chart.options.locale,this.options.ticks.format)}}class x3 extends v3{static id="linear";static defaults={ticks:{callback:JM.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Rr(e)?e:0,this.max=Rr(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=$a(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const om={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ui=Object.keys(om);function vb(n,e){return n-e}function xb(n,e){if(an(e))return null;const t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Rr(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(Bh(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function wb(n,e,t,i){const r=Ui.length;for(let s=Ui.indexOf(n);s<r-1;++s){const o=om[Ui[s]],u=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(u*o.size))<=i)return Ui[s]}return Ui[r-1]}function w3(n,e,t,i,r){for(let s=Ui.length-1;s>=Ui.indexOf(t);s--){const o=Ui[s];if(om[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return Ui[t?Ui.indexOf(t):0]}function b3(n){for(let e=Ui.indexOf(n)+1,t=Ui.length;e<t;++e)if(om[Ui[e]].common)return Ui[e]}function bb(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:r}=mv(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function S3(n,e,t,i){const r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let u,h;for(u=s;u<=o;u=+r.add(u,1,i))h=t[u],h>=0&&(e[h].major=!0);return e}function Sb(n,e,t){const i=[],r={},s=e.length;let o,u;for(o=0;o<s;++o)u=e[o],r[u]=o,i.push({value:u,major:!1});return s===0||!t?i:S3(n,i,r,t)}class Mb extends Zu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),r=this._adapter=new RR._date(e.adapters.date);r.init(t),bh(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:xb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:u}=this.getUserBounds();function h(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!u&&!isNaN(d.max)&&(s=Math.max(s,d.max))}(!o||!u)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),r=Rr(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),s=Rr(s)&&!isNaN(s)?s:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,u=o2(r,s,o);return this._unit=t.unit||(i.autoSkip?wb(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):w3(this,u.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:b3(this._unit),this.initOffsets(r),e.reverse&&u.reverse(),Sb(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Pr(t,0,o),i=Pr(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||wb(s.minUnit,t,i,this._getLabelCapacity(t)),u=Bt(r.ticks.stepSize,1),h=o==="week"?s.isoWeekday:!1,d=Bh(h)||h===!0,p={};let g=t,_,y;if(d&&(g=+e.startOf(g,"isoWeek",h)),g=+e.startOf(g,d?"day":o),e.diff(i,t,o)>1e5*u)throw new Error(t+" and "+i+" are too far apart with stepSize of "+u+" "+o);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(_=g,y=0;_<i;_=+e.add(_,u,o),y++)bb(p,_,w);return(_===i||r.bounds==="ticks"||y===1)&&bb(p,_,w),Object.keys(p).sort(vb).map(b=>+b)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,s=this._unit,o=t||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,r){const s=this.options,o=s.ticks.callback;if(o)return hn(o,[e,t,i],this);const u=s.time.displayFormats,h=this._unit,d=this._majorUnit,p=h&&u[h],g=d&&u[d],_=i[t],y=d&&g&&_&&_.major;return this._adapter.format(e,r||(y?g:p))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=$a(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),o=Math.sin(r),u=this._resolveTickFontOptions(0).size;return{w:i*s+u*o,h:i*o+u*s}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Sb(this,[e],this._majorUnit),r),o=this._getLabelSize(s),u=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,i=r.length;t<i;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(xb(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return l2(e.sort(vb))}}function Nf(n,e,t){let i=0,r=n.length-1,s,o,u,h;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=Za(n,"pos",e)),{pos:s,time:u}=n[i],{pos:o,time:h}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=Za(n,"time",e)),{time:s,pos:u}=n[i],{time:o,pos:h}=n[r]);const d=o-s;return d?u+(h-u)*(e-s)/d:u}class rj extends Mb{static id="timeseries";static defaults=Mb.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Nf(t,this.min),this._tableRange=Nf(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],s=[];let o,u,h,d,p;for(o=0,u=e.length;o<u;++o)d=e[o],d>=t&&d<=i&&r.push(d);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,u=r.length;o<u;++o)p=r[o+1],h=r[o-1],d=r[o],Math.round((p+h)/2)!==d&&s.push({time:d,pos:o/(u-1)});return s}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Nf(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Nf(this._table,i*this._tableRange+this._minPos,!0)}}const TE="label";function Eb(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function M3(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function LE(n,e){n.labels=e}function CE(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:TE;const i=[];n.datasets=e.map(r=>{const s=n.datasets.find(o=>o[t]===r[t]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function E3(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TE;const t={labels:[],datasets:[]};return LE(t,n.labels),CE(t,n.datasets,e),t}function T3(n,e){const{height:t=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:u,options:h,plugins:d=[],fallbackContent:p,updateMode:g,..._}=n,y=me.useRef(null),w=me.useRef(null),b=()=>{y.current&&(w.current=new sm(y.current,{type:o,data:E3(u,s),options:h&&{...h},plugins:d}),Eb(e,w.current))},C=()=>{Eb(e,null),w.current&&(w.current.destroy(),w.current=null)};return me.useEffect(()=>{!r&&w.current&&h&&M3(w.current,h)},[r,h]),me.useEffect(()=>{!r&&w.current&&LE(w.current.config.data,u.labels)},[r,u.labels]),me.useEffect(()=>{!r&&w.current&&u.datasets&&CE(w.current.config.data,u.datasets,s)},[r,u.datasets]),me.useEffect(()=>{w.current&&(r?(C(),setTimeout(b)):w.current.update(g))},[r,h,u.labels,u.datasets,g]),me.useEffect(()=>{w.current&&(C(),setTimeout(b))},[o]),me.useEffect(()=>(b(),()=>C()),[]),fi.createElement("canvas",{ref:y,role:"img",height:t,width:i,..._},p)}const L3=me.forwardRef(T3);function C3(n,e){return sm.register(e),me.forwardRef((t,i)=>fi.createElement(L3,{...t,ref:i,type:n}))}const P3=C3("line",kR);sm.register(_3,x3,KI,YI,s3,f3,i3);function A3({curves:n}){if(!n)return V.jsx("p",{children:"Tidak ada data curve"});const t={datasets:n.map(r=>({label:`T = ${r.period}s`,data:r.points.map(s=>({x:s.im,y:s.prob})),borderColor:"rgba(59,130,246,1)",backgroundColor:"rgba(59,130,246,0.2)",fill:!1}))},i={responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{type:"linear",title:{display:!0,text:"IML (g)"}},y:{type:"linear",title:{display:!0,text:"Prob Exceed"}}}};return V.jsx(P3,{data:t,options:i})}function k3({curves:n}){return n?V.jsxs("table",{className:"w-full border",children:[V.jsx("thead",{children:V.jsxs("tr",{className:"bg-gray-100",children:[V.jsx("th",{className:"border p-2",children:"Period (s)"}),V.jsx("th",{className:"border p-2",children:"IML"}),V.jsx("th",{className:"border p-2",children:"Prob"})]})}),V.jsx("tbody",{children:n.map(e=>e.points.map((t,i)=>V.jsxs("tr",{children:[V.jsx("td",{className:"border p-2 text-center",children:e.period}),V.jsx("td",{className:"border p-2 text-center",children:t.im}),V.jsx("td",{className:"border p-2 text-center",children:t.prob})]},`${e.period}-${i}`)))})]}):V.jsx("p",{children:"Tidak ada data tabel"})}var Sp={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var R3=Sp.exports,Tb;function I3(){return Tb||(Tb=1,(function(n,e){((t,i)=>{n.exports=i()})(R3,function t(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r,s=!i.document&&!!i.postMessage,o=i.IS_PAPA_WORKER||!1,u={},h=0,d={};function p(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(W){var j=k(W);j.chunkSize=parseInt(j.chunkSize),W.step||W.chunk||(j.chunkSize=null),this._handle=new b(j),(this._handle.streamer=this)._config=j}).call(this,I),this.parseChunk=function(W,j){var U=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<U){let Y=this._config.newline;Y||(K=this._config.quoteChar||'"',Y=this._handle.guessLineEndings(W,K)),W=[...W.split(Y).slice(U)].join(Y)}this.isFirstChunk&&N(this._config.beforeFirstChunk)&&(K=this._config.beforeFirstChunk(W))!==void 0&&(W=K),this.isFirstChunk=!1,this._halted=!1;var U=this._partialLine+W,K=(this._partialLine="",this._handle.parse(U,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(W=K.meta.cursor,U=(this._finished||(this._partialLine=U.substring(W-this._baseIndex),this._baseIndex=W),K&&K.data&&(this._rowCount+=K.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)i.postMessage({results:K,workerId:d.WORKER_ID,finished:U});else if(N(this._config.chunk)&&!j){if(this._config.chunk(K,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=K=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(K.data),this._completeResults.errors=this._completeResults.errors.concat(K.errors),this._completeResults.meta=K.meta),this._completed||!U||!N(this._config.complete)||K&&K.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),U||K&&K.meta.paused||this._nextChunk(),K}this._halted=!0},this._sendError=function(W){N(this._config.error)?this._config.error(W):o&&this._config.error&&i.postMessage({workerId:d.WORKER_ID,error:W,finished:!1})}}function g(I){var W;(I=I||{}).chunkSize||(I.chunkSize=d.RemoteChunkSize),p.call(this,I),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(j){this._input=j,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(W=new XMLHttpRequest,this._config.withCredentials&&(W.withCredentials=this._config.withCredentials),s||(W.onload=z(this._chunkLoaded,this),W.onerror=z(this._chunkError,this)),W.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var j,U=this._config.downloadRequestHeaders;for(j in U)W.setRequestHeader(j,U[j])}var K;this._config.chunkSize&&(K=this._start+this._config.chunkSize-1,W.setRequestHeader("Range","bytes="+this._start+"-"+K));try{W.send(this._config.downloadRequestBody)}catch(Y){this._chunkError(Y.message)}s&&W.status===0&&this._chunkError()}},this._chunkLoaded=function(){W.readyState===4&&(W.status<200||400<=W.status?this._chunkError():(this._start+=this._config.chunkSize||W.responseText.length,this._finished=!this._config.chunkSize||this._start>=(j=>(j=j.getResponseHeader("Content-Range"))!==null?parseInt(j.substring(j.lastIndexOf("/")+1)):-1)(W),this.parseChunk(W.responseText)))},this._chunkError=function(j){j=W.statusText||j,this._sendError(new Error(j))}}function _(I){(I=I||{}).chunkSize||(I.chunkSize=d.LocalChunkSize),p.call(this,I);var W,j,U=typeof FileReader<"u";this.stream=function(K){this._input=K,j=K.slice||K.webkitSlice||K.mozSlice,U?((W=new FileReader).onload=z(this._chunkLoaded,this),W.onerror=z(this._chunkError,this)):W=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var K=this._input,Y=(this._config.chunkSize&&(Y=Math.min(this._start+this._config.chunkSize,this._input.size),K=j.call(K,this._start,Y)),W.readAsText(K,this._config.encoding));U||this._chunkLoaded({target:{result:Y}})},this._chunkLoaded=function(K){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(K.target.result)},this._chunkError=function(){this._sendError(W.error)}}function y(I){var W;p.call(this,I=I||{}),this.stream=function(j){return W=j,this._nextChunk()},this._nextChunk=function(){var j,U;if(!this._finished)return j=this._config.chunkSize,W=j?(U=W.substring(0,j),W.substring(j)):(U=W,""),this._finished=!W,this.parseChunk(U)}}function w(I){p.call(this,I=I||{});var W=[],j=!0,U=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(K){this._input=K,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){U&&W.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),W.length?this.parseChunk(W.shift()):j=!0},this._streamData=z(function(K){try{W.push(typeof K=="string"?K:K.toString(this._config.encoding)),j&&(j=!1,this._checkIsFinished(),this.parseChunk(W.shift()))}catch(Y){this._streamError(Y)}},this),this._streamError=z(function(K){this._streamCleanUp(),this._sendError(K)},this),this._streamEnd=z(function(){this._streamCleanUp(),U=!0,this._streamData("")},this),this._streamCleanUp=z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function b(I){var W,j,U,K,Y=Math.pow(2,53),Q=-Y,ne=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,oe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ae=this,ee=0,pe=0,O=!1,G=!1,se=[],D={data:[],errors:[],meta:{}};function fe(Pe){return I.skipEmptyLines==="greedy"?Pe.join("").trim()==="":Pe.length===1&&Pe[0].length===0}function ve(){if(D&&U&&(Ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),U=!1),I.skipEmptyLines&&(D.data=D.data.filter(function(be){return!fe(be)})),te()){let be=function(Re,De){N(I.transformHeader)&&(Re=I.transformHeader(Re,De)),se.push(Re)};var We=be;if(D)if(Array.isArray(D.data[0])){for(var Pe=0;te()&&Pe<D.data.length;Pe++)D.data[Pe].forEach(be);D.data.splice(0,1)}else D.data.forEach(be)}function ke(be,Re){for(var De=I.header?{}:[],je=0;je<be.length;je++){var Ie=je,X=be[je],X=(($,we)=>(Ae=>(I.dynamicTypingFunction&&I.dynamicTyping[Ae]===void 0&&(I.dynamicTyping[Ae]=I.dynamicTypingFunction(Ae)),(I.dynamicTyping[Ae]||I.dynamicTyping)===!0))($)?we==="true"||we==="TRUE"||we!=="false"&&we!=="FALSE"&&((Ae=>{if(ne.test(Ae)&&(Ae=parseFloat(Ae),Q<Ae&&Ae<Y))return 1})(we)?parseFloat(we):oe.test(we)?new Date(we):we===""?null:we):we)(Ie=I.header?je>=se.length?"__parsed_extra":se[je]:Ie,X=I.transform?I.transform(X,Ie):X);Ie==="__parsed_extra"?(De[Ie]=De[Ie]||[],De[Ie].push(X)):De[Ie]=X}return I.header&&(je>se.length?Ne("FieldMismatch","TooManyFields","Too many fields: expected "+se.length+" fields but parsed "+je,pe+Re):je<se.length&&Ne("FieldMismatch","TooFewFields","Too few fields: expected "+se.length+" fields but parsed "+je,pe+Re)),De}var ze;D&&(I.header||I.dynamicTyping||I.transform)&&(ze=1,!D.data.length||Array.isArray(D.data[0])?(D.data=D.data.map(ke),ze=D.data.length):D.data=ke(D.data,0),I.header&&D.meta&&(D.meta.fields=se),pe+=ze)}function te(){return I.header&&se.length===0}function Ne(Pe,ke,ze,We){Pe={type:Pe,code:ke,message:ze},We!==void 0&&(Pe.row=We),D.errors.push(Pe)}N(I.step)&&(K=I.step,I.step=function(Pe){D=Pe,te()?ve():(ve(),D.data.length!==0&&(ee+=Pe.data.length,I.preview&&ee>I.preview?j.abort():(D.data=D.data[0],K(D,ae))))}),this.parse=function(Pe,ke,ze){var We=I.quoteChar||'"',We=(I.newline||(I.newline=this.guessLineEndings(Pe,We)),U=!1,I.delimiter?N(I.delimiter)&&(I.delimiter=I.delimiter(Pe),D.meta.delimiter=I.delimiter):((We=((be,Re,De,je,Ie)=>{var X,$,we,Ae;Ie=Ie||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var $e=0;$e<Ie.length;$e++){for(var Ke,rt=Ie[$e],Je=0,st=0,he=0,q=(we=void 0,new S({comments:je,delimiter:rt,newline:Re,preview:10}).parse(be)),Le=0;Le<q.data.length;Le++)De&&fe(q.data[Le])?he++:(Ke=q.data[Le].length,st+=Ke,we===void 0?we=Ke:0<Ke&&(Je+=Math.abs(Ke-we),we=Ke));0<q.data.length&&(st/=q.data.length-he),($===void 0||Je<=$)&&(Ae===void 0||Ae<st)&&1.99<st&&($=Je,X=rt,Ae=st)}return{successful:!!(I.delimiter=X),bestDelimiter:X}})(Pe,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess)).successful?I.delimiter=We.bestDelimiter:(U=!0,I.delimiter=d.DefaultDelimiter),D.meta.delimiter=I.delimiter),k(I));return I.preview&&I.header&&We.preview++,W=Pe,j=new S(We),D=j.parse(W,ke,ze),ve(),O?{meta:{paused:!0}}:D||{meta:{paused:!1}}},this.paused=function(){return O},this.pause=function(){O=!0,j.abort(),W=N(I.chunk)?"":W.substring(j.getCharIndex())},this.resume=function(){ae.streamer._halted?(O=!1,ae.streamer.parseChunk(W,!0)):setTimeout(ae.resume,3)},this.aborted=function(){return G},this.abort=function(){G=!0,j.abort(),D.meta.aborted=!0,N(I.complete)&&I.complete(D),W=""},this.guessLineEndings=function(be,We){be=be.substring(0,1048576);var We=new RegExp(C(We)+"([^]*?)"+C(We),"gm"),ze=(be=be.replace(We,"")).split("\r"),We=be.split(`
`),be=1<We.length&&We[0].length<ze[0].length;if(ze.length===1||be)return`
`;for(var Re=0,De=0;De<ze.length;De++)ze[De][0]===`
`&&Re++;return Re>=ze.length/2?`\r
`:"\r"}}function C(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(I){var W=(I=I||{}).delimiter,j=I.newline,U=I.comments,K=I.step,Y=I.preview,Q=I.fastMode,ne=null,oe=!1,ae=I.quoteChar==null?'"':I.quoteChar,ee=ae;if(I.escapeChar!==void 0&&(ee=I.escapeChar),(typeof W!="string"||-1<d.BAD_DELIMITERS.indexOf(W))&&(W=","),U===W)throw new Error("Comment character same as delimiter");U===!0?U="#":(typeof U!="string"||-1<d.BAD_DELIMITERS.indexOf(U))&&(U=!1),j!==`
`&&j!=="\r"&&j!==`\r
`&&(j=`
`);var pe=0,O=!1;this.parse=function(G,se,D){if(typeof G!="string")throw new Error("Input must be a string");var fe=G.length,ve=W.length,te=j.length,Ne=U.length,Pe=N(K),ke=[],ze=[],We=[],be=pe=0;if(!G)return Je();if(Q||Q!==!1&&G.indexOf(ae)===-1){for(var Re=G.split(j),De=0;De<Re.length;De++){if(We=Re[De],pe+=We.length,De!==Re.length-1)pe+=j.length;else if(D)return Je();if(!U||We.substring(0,Ne)!==U){if(Pe){if(ke=[],Ae(We.split(W)),st(),O)return Je()}else Ae(We.split(W));if(Y&&Y<=De)return ke=ke.slice(0,Y),Je(!0)}}return Je()}for(var je=G.indexOf(W,pe),Ie=G.indexOf(j,pe),X=new RegExp(C(ee)+C(ae),"g"),$=G.indexOf(ae,pe);;)if(G[pe]===ae)for($=pe,pe++;;){if(($=G.indexOf(ae,$+1))===-1)return D||ze.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ke.length,index:pe}),Ke();if($===fe-1)return Ke(G.substring(pe,$).replace(X,ae));if(ae===ee&&G[$+1]===ee)$++;else if(ae===ee||$===0||G[$-1]!==ee){je!==-1&&je<$+1&&(je=G.indexOf(W,$+1));var we=$e((Ie=Ie!==-1&&Ie<$+1?G.indexOf(j,$+1):Ie)===-1?je:Math.min(je,Ie));if(G.substr($+1+we,ve)===W){We.push(G.substring(pe,$).replace(X,ae)),G[pe=$+1+we+ve]!==ae&&($=G.indexOf(ae,pe)),je=G.indexOf(W,pe),Ie=G.indexOf(j,pe);break}if(we=$e(Ie),G.substring($+1+we,$+1+we+te)===j){if(We.push(G.substring(pe,$).replace(X,ae)),rt($+1+we+te),je=G.indexOf(W,pe),$=G.indexOf(ae,pe),Pe&&(st(),O))return Je();if(Y&&ke.length>=Y)return Je(!0);break}ze.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ke.length,index:pe}),$++}}else if(U&&We.length===0&&G.substring(pe,pe+Ne)===U){if(Ie===-1)return Je();pe=Ie+te,Ie=G.indexOf(j,pe),je=G.indexOf(W,pe)}else if(je!==-1&&(je<Ie||Ie===-1))We.push(G.substring(pe,je)),pe=je+ve,je=G.indexOf(W,pe);else{if(Ie===-1)break;if(We.push(G.substring(pe,Ie)),rt(Ie+te),Pe&&(st(),O))return Je();if(Y&&ke.length>=Y)return Je(!0)}return Ke();function Ae(he){ke.push(he),be=pe}function $e(he){var q=0;return q=he!==-1&&(he=G.substring($+1,he))&&he.trim()===""?he.length:q}function Ke(he){return D||(he===void 0&&(he=G.substring(pe)),We.push(he),pe=fe,Ae(We),Pe&&st()),Je()}function rt(he){pe=he,Ae(We),We=[],Ie=G.indexOf(j,pe)}function Je(he){if(I.header&&!se&&ke.length&&!oe){var q=ke[0],Le=Object.create(null),Se=new Set(q);let Fe=!1;for(let Xe=0;Xe<q.length;Xe++){let ut=q[Xe];if(Le[ut=N(I.transformHeader)?I.transformHeader(ut,Xe):ut]){let At,Ot=Le[ut];for(;At=ut+"_"+Ot,Ot++,Se.has(At););Se.add(At),q[Xe]=At,Le[ut]++,Fe=!0,(ne=ne===null?{}:ne)[At]=ut}else Le[ut]=1,q[Xe]=ut;Se.add(ut)}Fe&&console.warn("Duplicate headers found and renamed."),oe=!0}return{data:ke,errors:ze,meta:{delimiter:W,linebreak:j,aborted:O,truncated:!!he,cursor:be+(se||0),renamedHeaders:ne}}}function st(){K(Je()),ke=[],ze=[]}},this.abort=function(){O=!0},this.getCharIndex=function(){return pe}}function T(I){var W=I.data,j=u[W.workerId],U=!1;if(W.error)j.userError(W.error,W.file);else if(W.results&&W.results.data){var K={abort:function(){U=!0,R(W.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:F,resume:F};if(N(j.userStep)){for(var Y=0;Y<W.results.data.length&&(j.userStep({data:W.results.data[Y],errors:W.results.errors,meta:W.results.meta},K),!U);Y++);delete W.results}else N(j.userChunk)&&(j.userChunk(W.results,K,W.file),delete W.results)}W.finished&&!U&&R(W.workerId,W.results)}function R(I,W){var j=u[I];N(j.userComplete)&&j.userComplete(W),j.terminate(),delete u[I]}function F(){throw new Error("Not implemented.")}function k(I){if(typeof I!="object"||I===null)return I;var W,j=Array.isArray(I)?[]:{};for(W in I)j[W]=k(I[W]);return j}function z(I,W){return function(){I.apply(W,arguments)}}function N(I){return typeof I=="function"}return d.parse=function(I,W){var j=(W=W||{}).dynamicTyping||!1;if(N(j)&&(W.dynamicTypingFunction=j,j={}),W.dynamicTyping=j,W.transform=!!N(W.transform)&&W.transform,!W.worker||!d.WORKERS_SUPPORTED)return j=null,d.NODE_STREAM_INPUT,typeof I=="string"?(I=(U=>U.charCodeAt(0)!==65279?U:U.slice(1))(I),j=new(W.download?g:y)(W)):I.readable===!0&&N(I.read)&&N(I.on)?j=new w(W):(i.File&&I instanceof File||I instanceof Object)&&(j=new _(W)),j.stream(I);(j=(()=>{var U;return!!d.WORKERS_SUPPORTED&&(U=(()=>{var K=i.URL||i.webkitURL||null,Y=t.toString();return d.BLOB_URL||(d.BLOB_URL=K.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Y,")();"],{type:"text/javascript"})))})(),(U=new i.Worker(U)).onmessage=T,U.id=h++,u[U.id]=U)})()).userStep=W.step,j.userChunk=W.chunk,j.userComplete=W.complete,j.userError=W.error,W.step=N(W.step),W.chunk=N(W.chunk),W.complete=N(W.complete),W.error=N(W.error),delete W.worker,j.postMessage({input:I,config:W,workerId:j.id})},d.unparse=function(I,W){var j=!1,U=!0,K=",",Y=`\r
`,Q='"',ne=Q+Q,oe=!1,ae=null,ee=!1,pe=((()=>{if(typeof W=="object"){if(typeof W.delimiter!="string"||d.BAD_DELIMITERS.filter(function(se){return W.delimiter.indexOf(se)!==-1}).length||(K=W.delimiter),typeof W.quotes!="boolean"&&typeof W.quotes!="function"&&!Array.isArray(W.quotes)||(j=W.quotes),typeof W.skipEmptyLines!="boolean"&&typeof W.skipEmptyLines!="string"||(oe=W.skipEmptyLines),typeof W.newline=="string"&&(Y=W.newline),typeof W.quoteChar=="string"&&(Q=W.quoteChar),typeof W.header=="boolean"&&(U=W.header),Array.isArray(W.columns)){if(W.columns.length===0)throw new Error("Option columns is empty");ae=W.columns}W.escapeChar!==void 0&&(ne=W.escapeChar+Q),W.escapeFormulae instanceof RegExp?ee=W.escapeFormulae:typeof W.escapeFormulae=="boolean"&&W.escapeFormulae&&(ee=/^[=+\-@\t\r].*$/)}})(),new RegExp(C(Q),"g"));if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return O(null,I,oe);if(typeof I[0]=="object")return O(ae||Object.keys(I[0]),I,oe)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||ae),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),O(I.fields||[],I.data||[],oe);throw new Error("Unable to serialize unrecognized input");function O(se,D,fe){var ve="",te=(typeof se=="string"&&(se=JSON.parse(se)),typeof D=="string"&&(D=JSON.parse(D)),Array.isArray(se)&&0<se.length),Ne=!Array.isArray(D[0]);if(te&&U){for(var Pe=0;Pe<se.length;Pe++)0<Pe&&(ve+=K),ve+=G(se[Pe],Pe);0<D.length&&(ve+=Y)}for(var ke=0;ke<D.length;ke++){var ze=(te?se:D[ke]).length,We=!1,be=te?Object.keys(D[ke]).length===0:D[ke].length===0;if(fe&&!te&&(We=fe==="greedy"?D[ke].join("").trim()==="":D[ke].length===1&&D[ke][0].length===0),fe==="greedy"&&te){for(var Re=[],De=0;De<ze;De++){var je=Ne?se[De]:De;Re.push(D[ke][je])}We=Re.join("").trim()===""}if(!We){for(var Ie=0;Ie<ze;Ie++){0<Ie&&!be&&(ve+=K);var X=te&&Ne?se[Ie]:Ie;ve+=G(D[ke][X],Ie)}ke<D.length-1&&(!fe||0<ze&&!be)&&(ve+=Y)}}return ve}function G(se,D){var fe,ve;return se==null?"":se.constructor===Date?JSON.stringify(se).slice(1,25):(ve=!1,ee&&typeof se=="string"&&ee.test(se)&&(se="'"+se,ve=!0),fe=se.toString().replace(pe,ne),(ve=ve||j===!0||typeof j=="function"&&j(se,D)||Array.isArray(j)&&j[D]||((te,Ne)=>{for(var Pe=0;Pe<Ne.length;Pe++)if(-1<te.indexOf(Ne[Pe]))return!0;return!1})(fe,d.BAD_DELIMITERS)||-1<fe.indexOf(K)||fe.charAt(0)===" "||fe.charAt(fe.length-1)===" ")?Q+fe+Q:fe)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!s&&!!i.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=S,d.ParserHandle=b,d.NetworkStreamer=g,d.FileStreamer=_,d.StringStreamer=y,d.ReadableStreamStreamer=w,i.jQuery&&((r=i.jQuery).fn.parse=function(I){var W=I.config||{},j=[];return this.each(function(Y){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Q=0;Q<this.files.length;Q++)j.push({file:this.files[Q],inputElem:this,instanceConfig:r.extend({},W)})}),U(),this;function U(){if(j.length===0)N(I.complete)&&I.complete();else{var Y,Q,ne,oe,ae=j[0];if(N(I.before)){var ee=I.before(ae.file,ae.inputElem);if(typeof ee=="object"){if(ee.action==="abort")return Y="AbortError",Q=ae.file,ne=ae.inputElem,oe=ee.reason,void(N(I.error)&&I.error({name:Y},Q,ne,oe));if(ee.action==="skip")return void K();typeof ee.config=="object"&&(ae.instanceConfig=r.extend(ae.instanceConfig,ee.config))}else if(ee==="skip")return void K()}var pe=ae.instanceConfig.complete;ae.instanceConfig.complete=function(O){N(pe)&&pe(O,ae.file,ae.inputElem),K()},d.parse(ae.file,ae.instanceConfig)}}function K(){j.splice(0,1),U()}}),o&&(i.onmessage=function(I){I=I.data,d.WORKER_ID===void 0&&I&&(d.WORKER_ID=I.workerId),typeof I.input=="string"?i.postMessage({workerId:d.WORKER_ID,results:d.parse(I.input,I.config),finished:!0}):(i.File&&I.input instanceof File||I.input instanceof Object)&&(I=d.parse(I.input,I.config))&&i.postMessage({workerId:d.WORKER_ID,results:I,finished:!0})}),(g.prototype=Object.create(p.prototype)).constructor=g,(_.prototype=Object.create(p.prototype)).constructor=_,(y.prototype=Object.create(y.prototype)).constructor=y,(w.prototype=Object.create(p.prototype)).constructor=w,d})})(Sp)),Sp.exports}var D3=I3();const Lb=Vu(D3);function N3(){const[n,e]=me.useState([{lat:-6.2,lng:106.8}]);function t(){return FP({click(s){e(o=>[...o,{lat:s.latlng.lat,lng:s.latlng.lng}])}}),null}function i(){const s=Lb.unparse(n),o=new Blob([s],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(o),h=document.createElement("a");h.href=u,h.setAttribute("download","sites.csv"),document.body.appendChild(h),h.click(),document.body.removeChild(h)}function r(s){const o=s.target.files[0];o&&Lb.parse(o,{header:!0,dynamicTyping:!0,complete:u=>{const h=u.data.filter(d=>d.Latitude&&d.Longitude).map(d=>({lat:d.Latitude,lng:d.Longitude}));h.length>0&&e(h)}})}return V.jsxs("div",{className:"space-y-4",children:[V.jsxs(Xp,{center:[-2,118],zoom:5,style:{height:"400px",width:"100%"},children:[V.jsx(Yp,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((s,o)=>V.jsx(Nu,{position:[s.lat,s.lng]},o)),V.jsx(t,{})]}),V.jsxs("div",{className:"flex gap-4",children:[V.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow",children:"Export CSV"}),V.jsxs("label",{className:"px-4 py-2 bg-green-600 text-white rounded-lg shadow cursor-pointer",children:["Import CSV",V.jsx("input",{type:"file",accept:".csv",onChange:r,hidden:!0})]})]})]})}function O3({result:n,mode:e,error:t}){const[i,r]=me.useState("chart");return t?V.jsxs("div",{className:"bg-red-100 text-red-600 p-4 rounded-lg",children:[V.jsx("strong",{children:"Error:"})," ",t]}):n?V.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[V.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Analysis Result"}),V.jsxs("div",{className:"flex mb-4 rounded-xl overflow-hidden border w-full",children:[V.jsx("button",{onClick:()=>r("chart"),className:`flex-1 px-3 py-2 text-sm font-medium ${i==="chart"?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:"Chart"}),V.jsx("button",{onClick:()=>r("table"),className:`flex-1 px-3 py-2 text-sm font-medium ${i==="table"?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:"Table"}),e==="multi"&&V.jsx("button",{onClick:()=>r("map"),className:`flex-1 px-3 py-2 text-sm font-medium ${i==="map"?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:"Map"})]}),i==="chart"&&V.jsx(A3,{curves:n.curves}),i==="table"&&V.jsx(k3,{curves:n.curves}),i==="map"&&e==="multi"&&V.jsx(N3,{})]}):V.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:V.jsx("p",{className:"text-gray-500",children:"Belum ada hasil analisis."})})}function z3({toast:n}){if(me.useEffect(()=>{if(!n)return;const t=setTimeout(()=>{},3e3);return()=>clearTimeout(t)},[n]),!n)return null;const e={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return V.jsx("div",{className:"fixed top-4 right-4 z-50",children:V.jsx("div",{className:`${e[n.type]||"bg-gray-500"} text-white px-4 py-2 rounded-lg shadow-lg`,children:n.message})})}/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const PE="132",Yl={ROTATE:0,DOLLY:1,PAN:2},Kl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},F3=0,Cb=1,B3=2,AE=1,U3=2,yh=3,Wh=0,On=1,tl=2,kE=1,Jo=0,Lh=1,Pb=2,Ab=3,kb=4,H3=5,xu=100,V3=101,W3=102,Rb=103,Ib=104,j3=200,G3=201,$3=202,Z3=203,RE=204,IE=205,q3=206,X3=207,Y3=208,K3=209,J3=210,Q3=0,eD=1,tD=2,Ay=3,nD=4,iD=5,rD=6,sD=7,am=0,oD=1,aD=2,Ka=0,lD=1,uD=2,cD=3,hD=4,dD=5,DE=300,lm=301,um=302,ky=303,Ry=304,cm=306,Tv=307,Iy=1e3,lr=1001,Dy=1002,$n=1003,Db=1004,Nb=1005,kr=1006,fD=1007,hm=1008,Bu=1009,pD=1010,mD=1011,zp=1012,gD=1013,Mp=1014,Wa=1015,Lu=1016,_D=1017,yD=1018,vD=1019,Ch=1020,xD=1021,Qo=1022,cr=1023,wD=1024,bD=1025,SD=cr,Cu=1026,jh=1027,MD=1028,ED=1029,TD=1030,LD=1031,CD=1032,PD=1033,Ob=33776,zb=33777,Fb=33778,Bb=33779,Ub=35840,Hb=35841,Vb=35842,Wb=35843,AD=36196,jb=37492,Gb=37496,kD=37808,RD=37809,ID=37810,DD=37811,ND=37812,OD=37813,zD=37814,FD=37815,BD=37816,UD=37817,HD=37818,VD=37819,WD=37820,jD=37821,GD=36492,$D=37840,ZD=37841,qD=37842,XD=37843,YD=37844,KD=37845,JD=37846,QD=37847,eN=37848,tN=37849,nN=37850,iN=37851,rN=37852,sN=37853,oN=2200,aN=2201,lN=2202,Fp=2300,Bp=2301,h_=2302,bu=2400,Su=2401,Up=2402,Lv=2500,NE=2501,uN=0,ji=3e3,dm=3001,Cv=3007,Pv=3002,cN=3003,OE=3004,zE=3005,FE=3006,hN=3200,dN=3201,qu=0,fN=1,d_=7680,pN=519,Gh=35044,Hp=35048,$b="300 es";let ol=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Jn=[];for(let n=0;n<256;n++)Jn[n]=(n<16?"0":"")+n.toString(16);let Of=1234567;const Ph=Math.PI/180,$h=180/Math.PI;function es(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Jn[n&255]+Jn[n>>8&255]+Jn[n>>16&255]+Jn[n>>24&255]+"-"+Jn[e&255]+Jn[e>>8&255]+"-"+Jn[e>>16&15|64]+Jn[e>>24&255]+"-"+Jn[t&63|128]+Jn[t>>8&255]+"-"+Jn[t>>16&255]+Jn[t>>24&255]+Jn[i&255]+Jn[i>>8&255]+Jn[i>>16&255]+Jn[i>>24&255]).toUpperCase()}function Li(n,e,t){return Math.max(e,Math.min(t,n))}function Av(n,e){return(n%e+e)%e}function mN(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function gN(n,e,t){return n!==e?(t-n)/(e-n):0}function Ah(n,e,t){return(1-t)*n+t*e}function _N(n,e,t,i){return Ah(n,e,1-Math.exp(-t*i))}function yN(n,e=1){return e-Math.abs(Av(n,e*2)-e)}function vN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function xN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function wN(n,e){return n+Math.floor(Math.random()*(e-n+1))}function bN(n,e){return n+Math.random()*(e-n)}function SN(n){return n*(.5-Math.random())}function MN(n){return n!==void 0&&(Of=n%2147483647),Of=Of*16807%2147483647,(Of-1)/2147483646}function EN(n){return n*Ph}function TN(n){return n*$h}function Ny(n){return(n&n-1)===0&&n!==0}function LN(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function BE(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function CN(n,e,t,i,r){const s=Math.cos,o=Math.sin,u=s(t/2),h=o(t/2),d=s((e+i)/2),p=o((e+i)/2),g=s((e-i)/2),_=o((e-i)/2),y=s((i-e)/2),w=o((i-e)/2);switch(r){case"XYX":n.set(u*p,h*g,h*_,u*d);break;case"YZY":n.set(h*_,u*p,h*g,u*d);break;case"ZXZ":n.set(h*g,h*_,u*p,u*d);break;case"XZX":n.set(u*p,h*w,h*y,u*d);break;case"YXY":n.set(h*y,u*p,h*w,u*d);break;case"ZYZ":n.set(h*w,h*y,u*p,u*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}var f_=Object.freeze({__proto__:null,DEG2RAD:Ph,RAD2DEG:$h,generateUUID:es,clamp:Li,euclideanModulo:Av,mapLinear:mN,inverseLerp:gN,lerp:Ah,damp:_N,pingpong:yN,smoothstep:vN,smootherstep:xN,randInt:wN,randFloat:bN,randFloatSpread:SN,seededRandom:MN,degToRad:EN,radToDeg:TN,isPowerOfTwo:Ny,ceilPowerOfTwo:LN,floorPowerOfTwo:BE,setQuaternionFromProperEuler:CN});class Ze{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Ze.prototype.isVector2=!0;class Qn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,u,h,d){const p=this.elements;return p[0]=e,p[1]=r,p[2]=u,p[3]=t,p[4]=s,p[5]=h,p[6]=i,p[7]=o,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],u=i[3],h=i[6],d=i[1],p=i[4],g=i[7],_=i[2],y=i[5],w=i[8],b=r[0],C=r[3],S=r[6],T=r[1],R=r[4],F=r[7],k=r[2],z=r[5],N=r[8];return s[0]=o*b+u*T+h*k,s[3]=o*C+u*R+h*z,s[6]=o*S+u*F+h*N,s[1]=d*b+p*T+g*k,s[4]=d*C+p*R+g*z,s[7]=d*S+p*F+g*N,s[2]=_*b+y*T+w*k,s[5]=_*C+y*R+w*z,s[8]=_*S+y*F+w*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],u=e[5],h=e[6],d=e[7],p=e[8];return t*o*p-t*u*d-i*s*p+i*u*h+r*s*d-r*o*h}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],u=e[5],h=e[6],d=e[7],p=e[8],g=p*o-u*d,_=u*h-p*s,y=d*s-o*h,w=t*g+i*_+r*y;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/w;return e[0]=g*b,e[1]=(r*d-p*i)*b,e[2]=(u*i-r*o)*b,e[3]=_*b,e[4]=(p*t-r*h)*b,e[5]=(r*s-u*t)*b,e[6]=y*b,e[7]=(i*h-d*t)*b,e[8]=(o*t-i*s)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,u){const h=Math.cos(s),d=Math.sin(s);return this.set(i*h,i*d,-i*(h*o+d*u)+o+e,-r*d,r*h,-r*(-d*o+h*u)+u+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],u=r[6],h=r[1],d=r[4],p=r[7];return r[0]=t*s+i*h,r[3]=t*o+i*d,r[6]=t*u+i*p,r[1]=-i*s+t*h,r[4]=-i*o+t*d,r[7]=-i*u+t*p,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Qn.prototype.isMatrix3=!0;let Jl;class Xu{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Jl===void 0&&(Jl=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Jl.width=e.width,Jl.height=e.height;const i=Jl.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Jl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let PN=0;class ei extends ol{constructor(e=ei.DEFAULT_IMAGE,t=ei.DEFAULT_MAPPING,i=lr,r=lr,s=kr,o=hm,u=cr,h=Bu,d=1,p=ji){super(),Object.defineProperty(this,"id",{value:PN++}),this.uuid=es(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Ze(0,0),this.repeat=new Ze(1,1),this.center=new Ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=p,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=es()),!t&&e.images[r.uuid]===void 0){let s;if(Array.isArray(r)){s=[];for(let o=0,u=r.length;o<u;o++)r[o].isDataTexture?s.push(p_(r[o].image)):s.push(p_(r[o]))}else s=p_(r);e.images[r.uuid]={uuid:r.uuid,url:s}}i.image=r.uuid}return t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==DE)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Iy:e.x=e.x-Math.floor(e.x);break;case lr:e.x=e.x<0?0:1;break;case Dy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Iy:e.y=e.y-Math.floor(e.y);break;case lr:e.y=e.y<0?0:1;break;case Dy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}ei.DEFAULT_IMAGE=void 0;ei.DEFAULT_MAPPING=DE;ei.prototype.isTexture=!0;function p_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Xu.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Qt{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const h=e.elements,d=h[0],p=h[4],g=h[8],_=h[1],y=h[5],w=h[9],b=h[2],C=h[6],S=h[10];if(Math.abs(p-_)<.01&&Math.abs(g-b)<.01&&Math.abs(w-C)<.01){if(Math.abs(p+_)<.1&&Math.abs(g+b)<.1&&Math.abs(w+C)<.1&&Math.abs(d+y+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(d+1)/2,F=(y+1)/2,k=(S+1)/2,z=(p+_)/4,N=(g+b)/4,I=(w+C)/4;return R>F&&R>k?R<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(R),r=z/i,s=N/i):F>k?F<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(F),i=z/r,s=I/r):k<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(k),i=N/s,r=I/s),this.set(i,r,s,t),this}let T=Math.sqrt((C-w)*(C-w)+(g-b)*(g-b)+(_-p)*(_-p));return Math.abs(T)<.001&&(T=1),this.x=(C-w)/T,this.y=(g-b)/T,this.z=(_-p)/T,this.w=Math.acos((d+y+S-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Qt.prototype.isVector4=!0;class Ts extends ol{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Qt(0,0,e,t),this.scissorTest=!1,this.viewport=new Qt(0,0,e,t),this.texture=new ei(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:kr,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Ts.prototype.isWebGLRenderTarget=!0;class AN extends Ts{constructor(e,t,i){super(e,t);const r=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=r.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}AN.prototype.isWebGLMultipleRenderTargets=!0;class UE extends Ts{constructor(e,t,i){super(e,t,i),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}UE.prototype.isWebGLMultisampleRenderTarget=!0;class mi{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,u){let h=i[r+0],d=i[r+1],p=i[r+2],g=i[r+3];const _=s[o+0],y=s[o+1],w=s[o+2],b=s[o+3];if(u===0){e[t+0]=h,e[t+1]=d,e[t+2]=p,e[t+3]=g;return}if(u===1){e[t+0]=_,e[t+1]=y,e[t+2]=w,e[t+3]=b;return}if(g!==b||h!==_||d!==y||p!==w){let C=1-u;const S=h*_+d*y+p*w+g*b,T=S>=0?1:-1,R=1-S*S;if(R>Number.EPSILON){const k=Math.sqrt(R),z=Math.atan2(k,S*T);C=Math.sin(C*z)/k,u=Math.sin(u*z)/k}const F=u*T;if(h=h*C+_*F,d=d*C+y*F,p=p*C+w*F,g=g*C+b*F,C===1-u){const k=1/Math.sqrt(h*h+d*d+p*p+g*g);h*=k,d*=k,p*=k,g*=k}}e[t]=h,e[t+1]=d,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,r,s,o){const u=i[r],h=i[r+1],d=i[r+2],p=i[r+3],g=s[o],_=s[o+1],y=s[o+2],w=s[o+3];return e[t]=u*w+p*g+h*y-d*_,e[t+1]=h*w+p*_+d*g-u*y,e[t+2]=d*w+p*y+u*_-h*g,e[t+3]=p*w-u*g-h*_-d*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,u=Math.cos,h=Math.sin,d=u(i/2),p=u(r/2),g=u(s/2),_=h(i/2),y=h(r/2),w=h(s/2);switch(o){case"XYZ":this._x=_*p*g+d*y*w,this._y=d*y*g-_*p*w,this._z=d*p*w+_*y*g,this._w=d*p*g-_*y*w;break;case"YXZ":this._x=_*p*g+d*y*w,this._y=d*y*g-_*p*w,this._z=d*p*w-_*y*g,this._w=d*p*g+_*y*w;break;case"ZXY":this._x=_*p*g-d*y*w,this._y=d*y*g+_*p*w,this._z=d*p*w+_*y*g,this._w=d*p*g-_*y*w;break;case"ZYX":this._x=_*p*g-d*y*w,this._y=d*y*g+_*p*w,this._z=d*p*w-_*y*g,this._w=d*p*g+_*y*w;break;case"YZX":this._x=_*p*g+d*y*w,this._y=d*y*g+_*p*w,this._z=d*p*w-_*y*g,this._w=d*p*g-_*y*w;break;case"XZY":this._x=_*p*g-d*y*w,this._y=d*y*g-_*p*w,this._z=d*p*w+_*y*g,this._w=d*p*g+_*y*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],u=t[5],h=t[9],d=t[2],p=t[6],g=t[10],_=i+u+g;if(_>0){const y=.5/Math.sqrt(_+1);this._w=.25/y,this._x=(p-h)*y,this._y=(s-d)*y,this._z=(o-r)*y}else if(i>u&&i>g){const y=2*Math.sqrt(1+i-u-g);this._w=(p-h)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+d)/y}else if(u>g){const y=2*Math.sqrt(1+u-i-g);this._w=(s-d)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(h+p)/y}else{const y=2*Math.sqrt(1+g-i-u);this._w=(o-r)/y,this._x=(s+d)/y,this._y=(h+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Li(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,u=t._x,h=t._y,d=t._z,p=t._w;return this._x=i*p+o*u+r*d-s*h,this._y=r*p+o*h+s*u-i*d,this._z=s*p+o*d+i*h-r*u,this._w=o*p-i*u-r*h-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let u=o*e._w+i*e._x+r*e._y+s*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const h=1-u*u;if(h<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*i+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(h),p=Math.atan2(d,u),g=Math.sin((1-t)*p)/d,_=Math.sin(t*p)/d;return this._w=o*g+this._w*_,this._x=i*g+this._x*_,this._y=r*g+this._y*_,this._z=s*g+this._z*_,this._onChangeCallback(),this}slerpQuaternions(e,t,i){this.copy(e).slerp(t,i)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}mi.prototype.isQuaternion=!0;class ie{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Zb.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Zb.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,u=e.z,h=e.w,d=h*t+o*r-u*i,p=h*i+u*t-s*r,g=h*r+s*i-o*t,_=-s*t-o*i-u*r;return this.x=d*h+_*-s+p*-u-g*-o,this.y=p*h+_*-o+g*-s-d*-u,this.z=g*h+_*-u+d*-o-p*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,u=t.y,h=t.z;return this.x=r*h-s*u,this.y=s*o-i*h,this.z=i*u-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return m_.copy(this).projectOnVector(e),this.sub(m_)}reflect(e){return this.sub(m_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Li(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}ie.prototype.isVector3=!0;const m_=new ie,Zb=new mi;class Nr{constructor(e=new ie(1/0,1/0,1/0),t=new ie(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,u=-1/0;for(let h=0,d=e.length;h<d;h+=3){const p=e[h],g=e[h+1],_=e[h+2];p<t&&(t=p),g<i&&(i=g),_<r&&(r=_),p>s&&(s=p),g>o&&(o=g),_>u&&(u=_)}return this.min.set(t,i,r),this.max.set(s,o,u),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,u=-1/0;for(let h=0,d=e.count;h<d;h++){const p=e.getX(h),g=e.getY(h),_=e.getZ(h);p<t&&(t=p),g<i&&(i=g),_<r&&(r=_),p>s&&(s=p),g>o&&(o=g),_>u&&(u=_)}return this.min.set(t,i,r),this.max.set(s,o,u),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Kc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),g_.copy(t.boundingBox),g_.applyMatrix4(e.matrixWorld),this.union(g_));const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Kc),Kc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jc),zf.subVectors(this.max,Jc),Ql.subVectors(e.a,Jc),eu.subVectors(e.b,Jc),tu.subVectors(e.c,Jc),Uo.subVectors(eu,Ql),Ho.subVectors(tu,eu),Fa.subVectors(Ql,tu);let t=[0,-Uo.z,Uo.y,0,-Ho.z,Ho.y,0,-Fa.z,Fa.y,Uo.z,0,-Uo.x,Ho.z,0,-Ho.x,Fa.z,0,-Fa.x,-Uo.y,Uo.x,0,-Ho.y,Ho.x,0,-Fa.y,Fa.x,0];return!__(t,Ql,eu,tu,zf)||(t=[1,0,0,0,1,0,0,0,1],!__(t,Ql,eu,tu,zf))?!1:(Ff.crossVectors(Uo,Ho),t=[Ff.x,Ff.y,Ff.z],__(t,Ql,eu,tu,zf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Kc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Kc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ks[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ks[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ks[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ks[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ks[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ks[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ks[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ks[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ks),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Nr.prototype.isBox3=!0;const Ks=[new ie,new ie,new ie,new ie,new ie,new ie,new ie,new ie],Kc=new ie,g_=new Nr,Ql=new ie,eu=new ie,tu=new ie,Uo=new ie,Ho=new ie,Fa=new ie,Jc=new ie,zf=new ie,Ff=new ie,Ba=new ie;function __(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ba.fromArray(n,s);const u=r.x*Math.abs(Ba.x)+r.y*Math.abs(Ba.y)+r.z*Math.abs(Ba.z),h=e.dot(Ba),d=t.dot(Ba),p=i.dot(Ba);if(Math.max(-Math.max(h,d,p),Math.min(h,d,p))>u)return!1}return!0}const kN=new Nr,qb=new ie,y_=new ie,v_=new ie;class Yu{constructor(e=new ie,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):kN.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){v_.subVectors(e,this.center);const t=v_.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(v_.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return y_.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(qb.copy(e.center).add(y_)),this.expandByPoint(qb.copy(e.center).sub(y_)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Js=new ie,x_=new ie,Bf=new ie,Vo=new ie,w_=new ie,Uf=new ie,b_=new ie;class al{constructor(e=new ie,t=new ie(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Js)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Js.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Js.copy(this.direction).multiplyScalar(t).add(this.origin),Js.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){x_.copy(e).add(t).multiplyScalar(.5),Bf.copy(t).sub(e).normalize(),Vo.copy(this.origin).sub(x_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Bf),u=Vo.dot(this.direction),h=-Vo.dot(Bf),d=Vo.lengthSq(),p=Math.abs(1-o*o);let g,_,y,w;if(p>0)if(g=o*h-u,_=o*u-h,w=s*p,g>=0)if(_>=-w)if(_<=w){const b=1/p;g*=b,_*=b,y=g*(g+o*_+2*u)+_*(o*g+_+2*h)+d}else _=s,g=Math.max(0,-(o*_+u)),y=-g*g+_*(_+2*h)+d;else _=-s,g=Math.max(0,-(o*_+u)),y=-g*g+_*(_+2*h)+d;else _<=-w?(g=Math.max(0,-(-o*s+u)),_=g>0?-s:Math.min(Math.max(-s,-h),s),y=-g*g+_*(_+2*h)+d):_<=w?(g=0,_=Math.min(Math.max(-s,-h),s),y=_*(_+2*h)+d):(g=Math.max(0,-(o*s+u)),_=g>0?s:Math.min(Math.max(-s,-h),s),y=-g*g+_*(_+2*h)+d);else _=o>0?-s:s,g=Math.max(0,-(o*_+u)),y=-g*g+_*(_+2*h)+d;return i&&i.copy(this.direction).multiplyScalar(g).add(this.origin),r&&r.copy(Bf).multiplyScalar(_).add(x_),y}intersectSphere(e,t){Js.subVectors(e.center,this.origin);const i=Js.dot(this.direction),r=Js.dot(Js)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),u=i-o,h=i+o;return u<0&&h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,u,h;const d=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,_=this.origin;return d>=0?(i=(e.min.x-_.x)*d,r=(e.max.x-_.x)*d):(i=(e.max.x-_.x)*d,r=(e.min.x-_.x)*d),p>=0?(s=(e.min.y-_.y)*p,o=(e.max.y-_.y)*p):(s=(e.max.y-_.y)*p,o=(e.min.y-_.y)*p),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),g>=0?(u=(e.min.z-_.z)*g,h=(e.max.z-_.z)*g):(u=(e.max.z-_.z)*g,h=(e.min.z-_.z)*g),i>h||u>r)||((u>i||i!==i)&&(i=u),(h<r||r!==r)&&(r=h),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Js)!==null}intersectTriangle(e,t,i,r,s){w_.subVectors(t,e),Uf.subVectors(i,e),b_.crossVectors(w_,Uf);let o=this.direction.dot(b_),u;if(o>0){if(r)return null;u=1}else if(o<0)u=-1,o=-o;else return null;Vo.subVectors(this.origin,e);const h=u*this.direction.dot(Uf.crossVectors(Vo,Uf));if(h<0)return null;const d=u*this.direction.dot(w_.cross(Vo));if(d<0||h+d>o)return null;const p=-u*Vo.dot(b_);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,u,h,d,p,g,_,y,w,b,C){const S=this.elements;return S[0]=e,S[4]=t,S[8]=i,S[12]=r,S[1]=s,S[5]=o,S[9]=u,S[13]=h,S[2]=d,S[6]=p,S[10]=g,S[14]=_,S[3]=y,S[7]=w,S[11]=b,S[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/nu.setFromMatrixColumn(e,0).length(),s=1/nu.setFromMatrixColumn(e,1).length(),o=1/nu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),u=Math.sin(i),h=Math.cos(r),d=Math.sin(r),p=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const _=o*p,y=o*g,w=u*p,b=u*g;t[0]=h*p,t[4]=-h*g,t[8]=d,t[1]=y+w*d,t[5]=_-b*d,t[9]=-u*h,t[2]=b-_*d,t[6]=w+y*d,t[10]=o*h}else if(e.order==="YXZ"){const _=h*p,y=h*g,w=d*p,b=d*g;t[0]=_+b*u,t[4]=w*u-y,t[8]=o*d,t[1]=o*g,t[5]=o*p,t[9]=-u,t[2]=y*u-w,t[6]=b+_*u,t[10]=o*h}else if(e.order==="ZXY"){const _=h*p,y=h*g,w=d*p,b=d*g;t[0]=_-b*u,t[4]=-o*g,t[8]=w+y*u,t[1]=y+w*u,t[5]=o*p,t[9]=b-_*u,t[2]=-o*d,t[6]=u,t[10]=o*h}else if(e.order==="ZYX"){const _=o*p,y=o*g,w=u*p,b=u*g;t[0]=h*p,t[4]=w*d-y,t[8]=_*d+b,t[1]=h*g,t[5]=b*d+_,t[9]=y*d-w,t[2]=-d,t[6]=u*h,t[10]=o*h}else if(e.order==="YZX"){const _=o*h,y=o*d,w=u*h,b=u*d;t[0]=h*p,t[4]=b-_*g,t[8]=w*g+y,t[1]=g,t[5]=o*p,t[9]=-u*p,t[2]=-d*p,t[6]=y*g+w,t[10]=_-b*g}else if(e.order==="XZY"){const _=o*h,y=o*d,w=u*h,b=u*d;t[0]=h*p,t[4]=-g,t[8]=d*p,t[1]=_*g+b,t[5]=o*p,t[9]=y*g-w,t[2]=w*g-y,t[6]=u*p,t[10]=b*g+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(RN,e,IN)}lookAt(e,t,i){const r=this.elements;return sr.subVectors(e,t),sr.lengthSq()===0&&(sr.z=1),sr.normalize(),Wo.crossVectors(i,sr),Wo.lengthSq()===0&&(Math.abs(i.z)===1?sr.x+=1e-4:sr.z+=1e-4,sr.normalize(),Wo.crossVectors(i,sr)),Wo.normalize(),Hf.crossVectors(sr,Wo),r[0]=Wo.x,r[4]=Hf.x,r[8]=sr.x,r[1]=Wo.y,r[5]=Hf.y,r[9]=sr.y,r[2]=Wo.z,r[6]=Hf.z,r[10]=sr.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],u=i[4],h=i[8],d=i[12],p=i[1],g=i[5],_=i[9],y=i[13],w=i[2],b=i[6],C=i[10],S=i[14],T=i[3],R=i[7],F=i[11],k=i[15],z=r[0],N=r[4],I=r[8],W=r[12],j=r[1],U=r[5],K=r[9],Y=r[13],Q=r[2],ne=r[6],oe=r[10],ae=r[14],ee=r[3],pe=r[7],O=r[11],G=r[15];return s[0]=o*z+u*j+h*Q+d*ee,s[4]=o*N+u*U+h*ne+d*pe,s[8]=o*I+u*K+h*oe+d*O,s[12]=o*W+u*Y+h*ae+d*G,s[1]=p*z+g*j+_*Q+y*ee,s[5]=p*N+g*U+_*ne+y*pe,s[9]=p*I+g*K+_*oe+y*O,s[13]=p*W+g*Y+_*ae+y*G,s[2]=w*z+b*j+C*Q+S*ee,s[6]=w*N+b*U+C*ne+S*pe,s[10]=w*I+b*K+C*oe+S*O,s[14]=w*W+b*Y+C*ae+S*G,s[3]=T*z+R*j+F*Q+k*ee,s[7]=T*N+R*U+F*ne+k*pe,s[11]=T*I+R*K+F*oe+k*O,s[15]=T*W+R*Y+F*ae+k*G,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],u=e[5],h=e[9],d=e[13],p=e[2],g=e[6],_=e[10],y=e[14],w=e[3],b=e[7],C=e[11],S=e[15];return w*(+s*h*g-r*d*g-s*u*_+i*d*_+r*u*y-i*h*y)+b*(+t*h*y-t*d*_+s*o*_-r*o*y+r*d*p-s*h*p)+C*(+t*d*g-t*u*y-s*o*g+i*o*y+s*u*p-i*d*p)+S*(-r*u*p-t*h*g+t*u*_+r*o*g-i*o*_+i*h*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],u=e[5],h=e[6],d=e[7],p=e[8],g=e[9],_=e[10],y=e[11],w=e[12],b=e[13],C=e[14],S=e[15],T=g*C*d-b*_*d+b*h*y-u*C*y-g*h*S+u*_*S,R=w*_*d-p*C*d-w*h*y+o*C*y+p*h*S-o*_*S,F=p*b*d-w*g*d+w*u*y-o*b*y-p*u*S+o*g*S,k=w*g*h-p*b*h-w*u*_+o*b*_+p*u*C-o*g*C,z=t*T+i*R+r*F+s*k;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/z;return e[0]=T*N,e[1]=(b*_*s-g*C*s-b*r*y+i*C*y+g*r*S-i*_*S)*N,e[2]=(u*C*s-b*h*s+b*r*d-i*C*d-u*r*S+i*h*S)*N,e[3]=(g*h*s-u*_*s-g*r*d+i*_*d+u*r*y-i*h*y)*N,e[4]=R*N,e[5]=(p*C*s-w*_*s+w*r*y-t*C*y-p*r*S+t*_*S)*N,e[6]=(w*h*s-o*C*s-w*r*d+t*C*d+o*r*S-t*h*S)*N,e[7]=(o*_*s-p*h*s+p*r*d-t*_*d-o*r*y+t*h*y)*N,e[8]=F*N,e[9]=(w*g*s-p*b*s-w*i*y+t*b*y+p*i*S-t*g*S)*N,e[10]=(o*b*s-w*u*s+w*i*d-t*b*d-o*i*S+t*u*S)*N,e[11]=(p*u*s-o*g*s-p*i*d+t*g*d+o*i*y-t*u*y)*N,e[12]=k*N,e[13]=(p*b*r-w*g*r+w*i*_-t*b*_-p*i*C+t*g*C)*N,e[14]=(w*u*r-o*b*r-w*i*h+t*b*h+o*i*C-t*u*C)*N,e[15]=(o*g*r-p*u*r+p*i*h-t*g*h-o*i*_+t*u*_)*N,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,u=e.y,h=e.z,d=s*o,p=s*u;return this.set(d*o+i,d*u-r*h,d*h+r*u,0,d*u+r*h,p*u+i,p*h-r*o,0,d*h-r*u,p*h+r*o,s*h*h+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,u=t._z,h=t._w,d=s+s,p=o+o,g=u+u,_=s*d,y=s*p,w=s*g,b=o*p,C=o*g,S=u*g,T=h*d,R=h*p,F=h*g,k=i.x,z=i.y,N=i.z;return r[0]=(1-(b+S))*k,r[1]=(y+F)*k,r[2]=(w-R)*k,r[3]=0,r[4]=(y-F)*z,r[5]=(1-(_+S))*z,r[6]=(C+T)*z,r[7]=0,r[8]=(w+R)*N,r[9]=(C-T)*N,r[10]=(1-(_+b))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=nu.set(r[0],r[1],r[2]).length();const o=nu.set(r[4],r[5],r[6]).length(),u=nu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Zr.copy(this);const d=1/s,p=1/o,g=1/u;return Zr.elements[0]*=d,Zr.elements[1]*=d,Zr.elements[2]*=d,Zr.elements[4]*=p,Zr.elements[5]*=p,Zr.elements[6]*=p,Zr.elements[8]*=g,Zr.elements[9]*=g,Zr.elements[10]*=g,t.setFromRotationMatrix(Zr),i.x=s,i.y=o,i.z=u,this}makePerspective(e,t,i,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const u=this.elements,h=2*s/(t-e),d=2*s/(i-r),p=(t+e)/(t-e),g=(i+r)/(i-r),_=-(o+s)/(o-s),y=-2*o*s/(o-s);return u[0]=h,u[4]=0,u[8]=p,u[12]=0,u[1]=0,u[5]=d,u[9]=g,u[13]=0,u[2]=0,u[6]=0,u[10]=_,u[14]=y,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,r,s,o){const u=this.elements,h=1/(t-e),d=1/(i-r),p=1/(o-s),g=(t+e)*h,_=(i+r)*d,y=(o+s)*p;return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-g,u[1]=0,u[5]=2*d,u[9]=0,u[13]=-_,u[2]=0,u[6]=0,u[10]=-2*p,u[14]=-y,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}yt.prototype.isMatrix4=!0;const nu=new ie,Zr=new yt,RN=new ie(0,0,0),IN=new ie(1,1,1),Wo=new ie,Hf=new ie,sr=new ie,Xb=new yt,Yb=new mi;class Ku{constructor(e=0,t=0,i=0,r=Ku.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],u=r[8],h=r[1],d=r[5],p=r[9],g=r[2],_=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(Li(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(_,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Li(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(u,y),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(Li(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-g,y),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(h,s));break;case"ZYX":this._y=Math.asin(-Li(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(_,y),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(Li(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(u,y));break;case"XZY":this._z=Math.asin(-Li(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(_,d),this._y=Math.atan2(u,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Xb.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Xb,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Yb.setFromEuler(this),this.setFromQuaternion(Yb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new ie(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ku.prototype.isEuler=!0;Ku.DefaultOrder="XYZ";Ku.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class DN{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let NN=0;const Kb=new ie,iu=new mi,Qs=new yt,Vf=new ie,Qc=new ie,ON=new ie,zN=new mi,Jb=new ie(1,0,0),Qb=new ie(0,1,0),eS=new ie(0,0,1),FN={type:"added"},tS={type:"removed"};class $t extends ol{constructor(){super(),Object.defineProperty(this,"id",{value:NN++}),this.uuid=es(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=$t.DefaultUp.clone();const e=new ie,t=new Ku,i=new mi,r=new ie(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new yt},normalMatrix:{value:new Qn}}),this.matrix=new yt,this.matrixWorld=new yt,this.matrixAutoUpdate=$t.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new DN,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return iu.setFromAxisAngle(e,t),this.quaternion.multiply(iu),this}rotateOnWorldAxis(e,t){return iu.setFromAxisAngle(e,t),this.quaternion.premultiply(iu),this}rotateX(e){return this.rotateOnAxis(Jb,e)}rotateY(e){return this.rotateOnAxis(Qb,e)}rotateZ(e){return this.rotateOnAxis(eS,e)}translateOnAxis(e,t){return Kb.copy(e).applyQuaternion(this.quaternion),this.position.add(Kb.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Jb,e)}translateY(e){return this.translateOnAxis(Qb,e)}translateZ(e){return this.translateOnAxis(eS,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Qs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Vf.copy(e):Vf.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Qc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qs.lookAt(Qc,Vf,this.up):Qs.lookAt(Vf,Qc,this.up),this.quaternion.setFromRotationMatrix(Qs),r&&(Qs.extractRotation(r.matrixWorld),iu.setFromRotationMatrix(Qs),this.quaternion.premultiply(iu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(FN)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(tS)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(tS)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Qs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Qs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Qs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qc,e,ON),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qc,zN,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let d=0,p=h.length;d<p;d++){const g=h[d];s(e.shapes,g)}else s(e.shapes,h)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,d=this.material.length;h<d;h++)u.push(s(e.materials,this.material[h]));r.material=u}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let u=0;u<this.children.length;u++)r.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];r.animations.push(s(e.animations,h))}}if(t){const u=o(e.geometries),h=o(e.materials),d=o(e.textures),p=o(e.images),g=o(e.shapes),_=o(e.skeletons),y=o(e.animations);u.length>0&&(i.geometries=u),h.length>0&&(i.materials=h),d.length>0&&(i.textures=d),p.length>0&&(i.images=p),g.length>0&&(i.shapes=g),_.length>0&&(i.skeletons=_),y.length>0&&(i.animations=y)}return i.object=r,i;function o(u){const h=[];for(const d in u){const p=u[d];delete p.metadata,h.push(p)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}$t.DefaultUp=new ie(0,1,0);$t.DefaultMatrixAutoUpdate=!0;$t.prototype.isObject3D=!0;const qr=new ie,eo=new ie,S_=new ie,to=new ie,ru=new ie,su=new ie,nS=new ie,M_=new ie,E_=new ie,T_=new ie;class zn{constructor(e=new ie,t=new ie,i=new ie){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),qr.subVectors(e,t),r.cross(qr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){qr.subVectors(r,t),eo.subVectors(i,t),S_.subVectors(e,t);const o=qr.dot(qr),u=qr.dot(eo),h=qr.dot(S_),d=eo.dot(eo),p=eo.dot(S_),g=o*d-u*u;if(g===0)return s.set(-2,-1,-1);const _=1/g,y=(d*h-u*p)*_,w=(o*p-u*h)*_;return s.set(1-y-w,w,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,to),to.x>=0&&to.y>=0&&to.x+to.y<=1}static getUV(e,t,i,r,s,o,u,h){return this.getBarycoord(e,t,i,r,to),h.set(0,0),h.addScaledVector(s,to.x),h.addScaledVector(o,to.y),h.addScaledVector(u,to.z),h}static isFrontFacing(e,t,i,r){return qr.subVectors(i,t),eo.subVectors(e,t),qr.cross(eo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qr.subVectors(this.c,this.b),eo.subVectors(this.a,this.b),qr.cross(eo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return zn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return zn.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return zn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,u;ru.subVectors(r,i),su.subVectors(s,i),M_.subVectors(e,i);const h=ru.dot(M_),d=su.dot(M_);if(h<=0&&d<=0)return t.copy(i);E_.subVectors(e,r);const p=ru.dot(E_),g=su.dot(E_);if(p>=0&&g<=p)return t.copy(r);const _=h*g-p*d;if(_<=0&&h>=0&&p<=0)return o=h/(h-p),t.copy(i).addScaledVector(ru,o);T_.subVectors(e,s);const y=ru.dot(T_),w=su.dot(T_);if(w>=0&&y<=w)return t.copy(s);const b=y*d-h*w;if(b<=0&&d>=0&&w<=0)return u=d/(d-w),t.copy(i).addScaledVector(su,u);const C=p*w-y*g;if(C<=0&&g-p>=0&&y-w>=0)return nS.subVectors(s,r),u=(g-p)/(g-p+(y-w)),t.copy(r).addScaledVector(nS,u);const S=1/(C+b+_);return o=b*S,u=_*S,t.copy(i).addScaledVector(ru,o).addScaledVector(su,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let BN=0;class _i extends ol{constructor(){super(),Object.defineProperty(this,"id",{value:BN++}),this.uuid=es(),this.name="",this.type="Material",this.fog=!0,this.blending=Lh,this.side=Wh,this.vertexColors=!1,this.opacity=1,this.format=cr,this.transparent=!1,this.blendSrc=RE,this.blendDst=IE,this.blendEquation=xu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ay,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=pN,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=d_,this.stencilZFail=d_,this.stencilZPass=d_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===kE;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheenTint&&this.sheenTint.isColor&&(i.sheenTint=this.sheenTint.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(i.specularTint=this.specularTint.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(i.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationTint!==void 0&&(i.attenuationTint=this.attenuationTint.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Lh&&(i.blending=this.blending),this.side!==Wh&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==cr&&(i.format=this.format),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const u in s){const h=s[u];delete h.metadata,o.push(h)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}_i.prototype.isMaterial=!0;const HE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xr={h:0,s:0,l:0},Wf={h:0,s:0,l:0};function L_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function C_(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function P_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}class ht{constructor(e,t,i){return t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,i){return this.r=e,this.g=t,this.b=i,this}setHSL(e,t,i){if(e=Av(e,1),t=Li(t,0,1),i=Li(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,s=2*i-r;this.r=L_(s,r,e+1/3),this.g=L_(s,r,e),this.b=L_(s,r,e-1/3)}return this}setStyle(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const u=parseFloat(r[1])/360,h=parseInt(r[2],10)/100,d=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(u,h,d)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=HE[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=C_(e.r),this.g=C_(e.g),this.b=C_(e.b),this}copyLinearToSRGB(e){return this.r=P_(e.r),this.g=P_(e.g),this.b=P_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,i=this.g,r=this.b,s=Math.max(t,i,r),o=Math.min(t,i,r);let u,h;const d=(o+s)/2;if(o===s)u=0,h=0;else{const p=s-o;switch(h=d<=.5?p/(s+o):p/(2-s-o),s){case t:u=(i-r)/p+(i<r?6:0);break;case i:u=(r-t)/p+2;break;case r:u=(t-i)/p+4;break}u/=6}return e.h=u,e.s=h,e.l=d,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,i){return this.getHSL(Xr),Xr.h+=e,Xr.s+=t,Xr.l+=i,this.setHSL(Xr.h,Xr.s,Xr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Xr),e.getHSL(Wf);const i=Ah(Xr.h,Wf.h,t),r=Ah(Xr.s,Wf.s,t),s=Ah(Xr.l,Wf.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}ht.NAMES=HE;ht.prototype.isColor=!0;ht.prototype.r=1;ht.prototype.g=1;ht.prototype.b=1;class kv extends _i{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}kv.prototype.isMeshBasicMaterial=!0;const sn=new ie,jf=new Ze;class Fn{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=Gh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ht),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Ze),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new ie),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Qt),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)jf.fromBufferAttribute(this,t),jf.applyMatrix3(e),this.setXY(t,jf.x,jf.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)sn.fromBufferAttribute(this,t),sn.applyMatrix3(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)sn.x=this.getX(t),sn.y=this.getY(t),sn.z=this.getZ(t),sn.applyMatrix4(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)sn.x=this.getX(t),sn.y=this.getY(t),sn.z=this.getZ(t),sn.applyNormalMatrix(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)sn.x=this.getX(t),sn.y=this.getY(t),sn.z=this.getZ(t),sn.transformDirection(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Gh&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}Fn.prototype.isBufferAttribute=!0;class VE extends Fn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class WE extends Fn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class UN extends Fn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}UN.prototype.isFloat16BufferAttribute=!0;class qn extends Fn{constructor(e,t,i){super(new Float32Array(e),t,i)}}function jE(n){if(n.length===0)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}let HN=0;const Lr=new yt,A_=new $t,ou=new ie,or=new Nr,eh=new Nr,Wn=new ie;class en extends ol{constructor(){super(),Object.defineProperty(this,"id",{value:HN++}),this.uuid=es(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(jE(e)>65535?WE:VE)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Qn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Lr.makeRotationFromQuaternion(e),this.applyMatrix4(Lr),this}rotateX(e){return Lr.makeRotationX(e),this.applyMatrix4(Lr),this}rotateY(e){return Lr.makeRotationY(e),this.applyMatrix4(Lr),this}rotateZ(e){return Lr.makeRotationZ(e),this.applyMatrix4(Lr),this}translate(e,t,i){return Lr.makeTranslation(e,t,i),this.applyMatrix4(Lr),this}scale(e,t,i){return Lr.makeScale(e,t,i),this.applyMatrix4(Lr),this}lookAt(e){return A_.lookAt(e),A_.updateMatrix(),this.applyMatrix4(A_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ou).negate(),this.translate(ou.x,ou.y,ou.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new qn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Nr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ie(-1/0,-1/0,-1/0),new ie(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];or.setFromBufferAttribute(s),this.morphTargetsRelative?(Wn.addVectors(this.boundingBox.min,or.min),this.boundingBox.expandByPoint(Wn),Wn.addVectors(this.boundingBox.max,or.max),this.boundingBox.expandByPoint(Wn)):(this.boundingBox.expandByPoint(or.min),this.boundingBox.expandByPoint(or.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Yu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ie,1/0);return}if(e){const i=this.boundingSphere.center;if(or.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const u=t[s];eh.setFromBufferAttribute(u),this.morphTargetsRelative?(Wn.addVectors(or.min,eh.min),or.expandByPoint(Wn),Wn.addVectors(or.max,eh.max),or.expandByPoint(Wn)):(or.expandByPoint(eh.min),or.expandByPoint(eh.max))}or.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Wn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Wn));if(t)for(let s=0,o=t.length;s<o;s++){const u=t[s],h=this.morphTargetsRelative;for(let d=0,p=u.count;d<p;d++)Wn.fromBufferAttribute(u,d),h&&(ou.fromBufferAttribute(e,d),Wn.add(ou)),r=Math.max(r,i.distanceToSquared(Wn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,u=r.length/3;t.tangent===void 0&&this.setAttribute("tangent",new Fn(new Float32Array(4*u),4));const h=t.tangent.array,d=[],p=[];for(let j=0;j<u;j++)d[j]=new ie,p[j]=new ie;const g=new ie,_=new ie,y=new ie,w=new Ze,b=new Ze,C=new Ze,S=new ie,T=new ie;function R(j,U,K){g.fromArray(r,j*3),_.fromArray(r,U*3),y.fromArray(r,K*3),w.fromArray(o,j*2),b.fromArray(o,U*2),C.fromArray(o,K*2),_.sub(g),y.sub(g),b.sub(w),C.sub(w);const Y=1/(b.x*C.y-C.x*b.y);isFinite(Y)&&(S.copy(_).multiplyScalar(C.y).addScaledVector(y,-b.y).multiplyScalar(Y),T.copy(y).multiplyScalar(b.x).addScaledVector(_,-C.x).multiplyScalar(Y),d[j].add(S),d[U].add(S),d[K].add(S),p[j].add(T),p[U].add(T),p[K].add(T))}let F=this.groups;F.length===0&&(F=[{start:0,count:i.length}]);for(let j=0,U=F.length;j<U;++j){const K=F[j],Y=K.start,Q=K.count;for(let ne=Y,oe=Y+Q;ne<oe;ne+=3)R(i[ne+0],i[ne+1],i[ne+2])}const k=new ie,z=new ie,N=new ie,I=new ie;function W(j){N.fromArray(s,j*3),I.copy(N);const U=d[j];k.copy(U),k.sub(N.multiplyScalar(N.dot(U))).normalize(),z.crossVectors(I,U);const Y=z.dot(p[j])<0?-1:1;h[j*4]=k.x,h[j*4+1]=k.y,h[j*4+2]=k.z,h[j*4+3]=Y}for(let j=0,U=F.length;j<U;++j){const K=F[j],Y=K.start,Q=K.count;for(let ne=Y,oe=Y+Q;ne<oe;ne+=3)W(i[ne+0]),W(i[ne+1]),W(i[ne+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Fn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let _=0,y=i.count;_<y;_++)i.setXYZ(_,0,0,0);const r=new ie,s=new ie,o=new ie,u=new ie,h=new ie,d=new ie,p=new ie,g=new ie;if(e)for(let _=0,y=e.count;_<y;_+=3){const w=e.getX(_+0),b=e.getX(_+1),C=e.getX(_+2);r.fromBufferAttribute(t,w),s.fromBufferAttribute(t,b),o.fromBufferAttribute(t,C),p.subVectors(o,s),g.subVectors(r,s),p.cross(g),u.fromBufferAttribute(i,w),h.fromBufferAttribute(i,b),d.fromBufferAttribute(i,C),u.add(p),h.add(p),d.add(p),i.setXYZ(w,u.x,u.y,u.z),i.setXYZ(b,h.x,h.y,h.z),i.setXYZ(C,d.x,d.y,d.z)}else for(let _=0,y=t.count;_<y;_+=3)r.fromBufferAttribute(t,_+0),s.fromBufferAttribute(t,_+1),o.fromBufferAttribute(t,_+2),p.subVectors(o,s),g.subVectors(r,s),p.cross(g),i.setXYZ(_+0,p.x,p.y,p.z),i.setXYZ(_+1,p.x,p.y,p.z),i.setXYZ(_+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(e.attributes[r]===void 0)continue;const o=i[r].array,u=e.attributes[r],h=u.array,d=u.itemSize*t,p=Math.min(h.length,o.length-d);for(let g=0,_=d;g<p;g++,_++)o[_]=h[g]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Wn.fromBufferAttribute(e,t),Wn.normalize(),e.setXYZ(t,Wn.x,Wn.y,Wn.z)}toNonIndexed(){function e(u,h){const d=u.array,p=u.itemSize,g=u.normalized,_=new d.constructor(h.length*p);let y=0,w=0;for(let b=0,C=h.length;b<C;b++){u.isInterleavedBufferAttribute?y=h[b]*u.data.stride+u.offset:y=h[b]*p;for(let S=0;S<p;S++)_[w++]=d[y++]}return new Fn(_,p,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new en,i=this.index.array,r=this.attributes;for(const u in r){const h=r[u],d=e(h,i);t.setAttribute(u,d)}const s=this.morphAttributes;for(const u in s){const h=[],d=s[u];for(let p=0,g=d.length;p<g;p++){const _=d[p],y=e(_,i);h.push(y)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let u=0,h=o.length;u<h;u++){const d=o[u];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const d in h)h[d]!==void 0&&(e[d]=h[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const h in i){const d=i[h];e.data.attributes[h]=d.toJSON(e.data)}const r={};let s=!1;for(const h in this.morphAttributes){const d=this.morphAttributes[h],p=[];for(let g=0,_=d.length;g<_;g++){const y=d[g];p.push(y.toJSON(e.data))}p.length>0&&(r[h]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new en().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const d in r){const p=r[d];this.setAttribute(d,p.clone(t))}const s=e.morphAttributes;for(const d in s){const p=[],g=s[d];for(let _=0,y=g.length;_<y;_++)p.push(g[_].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,p=o.length;d<p;d++){const g=o[d];this.addGroup(g.start,g.count,g.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}en.prototype.isBufferGeometry=!0;const iS=new yt,au=new al,k_=new Yu,jo=new ie,Go=new ie,$o=new ie,R_=new ie,I_=new ie,D_=new ie,Gf=new ie,$f=new ie,Zf=new ie,qf=new Ze,Xf=new Ze,Yf=new Ze,N_=new ie,Kf=new ie;class Ci extends $t{constructor(e=new en,t=new kv){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),k_.copy(i.boundingSphere),k_.applyMatrix4(s),e.ray.intersectsSphere(k_)===!1)||(iS.copy(s).invert(),au.copy(e.ray).applyMatrix4(iS),i.boundingBox!==null&&au.intersectsBox(i.boundingBox)===!1))return;let o;if(i.isBufferGeometry){const u=i.index,h=i.attributes.position,d=i.morphAttributes.position,p=i.morphTargetsRelative,g=i.attributes.uv,_=i.attributes.uv2,y=i.groups,w=i.drawRange;if(u!==null)if(Array.isArray(r))for(let b=0,C=y.length;b<C;b++){const S=y[b],T=r[S.materialIndex],R=Math.max(S.start,w.start),F=Math.min(S.start+S.count,w.start+w.count);for(let k=R,z=F;k<z;k+=3){const N=u.getX(k),I=u.getX(k+1),W=u.getX(k+2);o=Jf(this,T,e,au,h,d,p,g,_,N,I,W),o&&(o.faceIndex=Math.floor(k/3),o.face.materialIndex=S.materialIndex,t.push(o))}}else{const b=Math.max(0,w.start),C=Math.min(u.count,w.start+w.count);for(let S=b,T=C;S<T;S+=3){const R=u.getX(S),F=u.getX(S+1),k=u.getX(S+2);o=Jf(this,r,e,au,h,d,p,g,_,R,F,k),o&&(o.faceIndex=Math.floor(S/3),t.push(o))}}else if(h!==void 0)if(Array.isArray(r))for(let b=0,C=y.length;b<C;b++){const S=y[b],T=r[S.materialIndex],R=Math.max(S.start,w.start),F=Math.min(S.start+S.count,w.start+w.count);for(let k=R,z=F;k<z;k+=3){const N=k,I=k+1,W=k+2;o=Jf(this,T,e,au,h,d,p,g,_,N,I,W),o&&(o.faceIndex=Math.floor(k/3),o.face.materialIndex=S.materialIndex,t.push(o))}}else{const b=Math.max(0,w.start),C=Math.min(h.count,w.start+w.count);for(let S=b,T=C;S<T;S+=3){const R=S,F=S+1,k=S+2;o=Jf(this,r,e,au,h,d,p,g,_,R,F,k),o&&(o.faceIndex=Math.floor(S/3),t.push(o))}}}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Ci.prototype.isMesh=!0;function VN(n,e,t,i,r,s,o,u){let h;if(e.side===On?h=i.intersectTriangle(o,s,r,!0,u):h=i.intersectTriangle(r,s,o,e.side!==tl,u),h===null)return null;Kf.copy(u),Kf.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(Kf);return d<t.near||d>t.far?null:{distance:d,point:Kf.clone(),object:n}}function Jf(n,e,t,i,r,s,o,u,h,d,p,g){jo.fromBufferAttribute(r,d),Go.fromBufferAttribute(r,p),$o.fromBufferAttribute(r,g);const _=n.morphTargetInfluences;if(s&&_){Gf.set(0,0,0),$f.set(0,0,0),Zf.set(0,0,0);for(let w=0,b=s.length;w<b;w++){const C=_[w],S=s[w];C!==0&&(R_.fromBufferAttribute(S,d),I_.fromBufferAttribute(S,p),D_.fromBufferAttribute(S,g),o?(Gf.addScaledVector(R_,C),$f.addScaledVector(I_,C),Zf.addScaledVector(D_,C)):(Gf.addScaledVector(R_.sub(jo),C),$f.addScaledVector(I_.sub(Go),C),Zf.addScaledVector(D_.sub($o),C)))}jo.add(Gf),Go.add($f),$o.add(Zf)}n.isSkinnedMesh&&(n.boneTransform(d,jo),n.boneTransform(p,Go),n.boneTransform(g,$o));const y=VN(n,e,t,i,jo,Go,$o,N_);if(y){u&&(qf.fromBufferAttribute(u,d),Xf.fromBufferAttribute(u,p),Yf.fromBufferAttribute(u,g),y.uv=zn.getUV(N_,jo,Go,$o,qf,Xf,Yf,new Ze)),h&&(qf.fromBufferAttribute(h,d),Xf.fromBufferAttribute(h,p),Yf.fromBufferAttribute(h,g),y.uv2=zn.getUV(N_,jo,Go,$o,qf,Xf,Yf,new Ze));const w={a:d,b:p,c:g,normal:new ie,materialIndex:0};zn.getNormal(jo,Go,$o,w.normal),y.face=w}return y}class od extends en{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const u=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const h=[],d=[],p=[],g=[];let _=0,y=0;w("z","y","x",-1,-1,i,t,e,o,s,0),w("z","y","x",1,-1,i,t,-e,o,s,1),w("x","z","y",1,1,e,i,t,r,o,2),w("x","z","y",1,-1,e,i,-t,r,o,3),w("x","y","z",1,-1,e,t,i,r,s,4),w("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(h),this.setAttribute("position",new qn(d,3)),this.setAttribute("normal",new qn(p,3)),this.setAttribute("uv",new qn(g,2));function w(b,C,S,T,R,F,k,z,N,I,W){const j=F/N,U=k/I,K=F/2,Y=k/2,Q=z/2,ne=N+1,oe=I+1;let ae=0,ee=0;const pe=new ie;for(let O=0;O<oe;O++){const G=O*U-Y;for(let se=0;se<ne;se++){const D=se*j-K;pe[b]=D*T,pe[C]=G*R,pe[S]=Q,d.push(pe.x,pe.y,pe.z),pe[b]=0,pe[C]=0,pe[S]=z>0?1:-1,p.push(pe.x,pe.y,pe.z),g.push(se/N),g.push(1-O/I),ae+=1}}for(let O=0;O<I;O++)for(let G=0;G<N;G++){const se=_+G+ne*O,D=_+G+ne*(O+1),fe=_+(G+1)+ne*(O+1),ve=_+(G+1)+ne*O;h.push(se,D,ve),h.push(D,fe,ve),ee+=6}u.addGroup(y,ee,W),y+=ee,_+=ae}}static fromJSON(e){return new od(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Uu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ci(n){const e={};for(let t=0;t<n.length;t++){const i=Uu(n[t]);for(const r in i)e[r]=i[r]}return e}const WN={clone:Uu,merge:ci};var jN=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,GN=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class nl extends _i{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=jN,this.fragmentShader=GN,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Uu(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}nl.prototype.isShaderMaterial=!0;class Rv extends $t{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new yt,this.projectionMatrix=new yt,this.projectionMatrixInverse=new yt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Rv.prototype.isCamera=!0;class jn extends Rv{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=$h*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ph*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return $h*2*Math.atan(Math.tan(Ph*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ph*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const h=o.fullWidth,d=o.fullHeight;s+=o.offsetX*r/h,t-=o.offsetY*i/d,r*=o.width/h,i*=o.height/d}const u=this.filmOffset;u!==0&&(s+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}jn.prototype.isPerspectiveCamera=!0;const lu=90,uu=1;class Iv extends $t{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new jn(lu,uu,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ie(1,0,0)),this.add(r);const s=new jn(lu,uu,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ie(-1,0,0)),this.add(s);const o=new jn(lu,uu,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new ie(0,1,0)),this.add(o);const u=new jn(lu,uu,e,t);u.layers=this.layers,u.up.set(0,0,-1),u.lookAt(new ie(0,-1,0)),this.add(u);const h=new jn(lu,uu,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new ie(0,0,1)),this.add(h);const d=new jn(lu,uu,e,t);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new ie(0,0,-1)),this.add(d)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,u,h,d]=this.children,p=e.xr.enabled,g=e.getRenderTarget();e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,u),e.setRenderTarget(i,4),e.render(t,h),i.texture.generateMipmaps=_,e.setRenderTarget(i,5),e.render(t,d),e.setRenderTarget(g),e.xr.enabled=p}}class fm extends ei{constructor(e,t,i,r,s,o,u,h,d,p){e=e!==void 0?e:[],t=t!==void 0?t:lm,u=u!==void 0?u:Qo,super(e,t,i,r,s,o,u,h,d,p),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}fm.prototype.isCubeTexture=!0;class GE extends Ts{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),super(e,e,t),t=t||{},this.texture=new fm(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:kr,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=cr,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new od(5,5,5),s=new nl({name:"CubemapFromEquirect",uniforms:Uu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:On,blending:Jo});s.uniforms.tEquirect.value=t;const o=new Ci(r,s),u=t.minFilter;return t.minFilter===hm&&(t.minFilter=kr),new Iv(1,10,this).update(e,o),t.minFilter=u,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}GE.prototype.isWebGLCubeRenderTarget=!0;const O_=new ie,$N=new ie,ZN=new Qn;class xs{constructor(e=new ie(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=O_.subVectors(i,t).cross($N.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(O_),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||ZN.getNormalMatrix(e),r=this.coplanarPoint(O_).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}xs.prototype.isPlane=!0;const cu=new Yu,Qf=new ie;class pm{constructor(e=new xs,t=new xs,i=new xs,r=new xs,s=new xs,o=new xs){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(r),u[4].copy(s),u[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],u=i[3],h=i[4],d=i[5],p=i[6],g=i[7],_=i[8],y=i[9],w=i[10],b=i[11],C=i[12],S=i[13],T=i[14],R=i[15];return t[0].setComponents(u-r,g-h,b-_,R-C).normalize(),t[1].setComponents(u+r,g+h,b+_,R+C).normalize(),t[2].setComponents(u+s,g+d,b+y,R+S).normalize(),t[3].setComponents(u-s,g-d,b-y,R-S).normalize(),t[4].setComponents(u-o,g-p,b-w,R-T).normalize(),t[5].setComponents(u+o,g+p,b+w,R+T).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),cu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(cu)}intersectsSprite(e){return cu.center.set(0,0,0),cu.radius=.7071067811865476,cu.applyMatrix4(e.matrixWorld),this.intersectsSphere(cu)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Qf.x=r.normal.x>0?e.max.x:e.min.x,Qf.y=r.normal.y>0?e.max.y:e.min.y,Qf.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Qf)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function $E(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function qN(n,e){const t=e.isWebGL2,i=new WeakMap;function r(d,p){const g=d.array,_=d.usage,y=n.createBuffer();n.bindBuffer(p,y),n.bufferData(p,g,_),d.onUploadCallback();let w=5126;return g instanceof Float32Array?w=5126:g instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):g instanceof Uint16Array?d.isFloat16BufferAttribute?t?w=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):w=5123:g instanceof Int16Array?w=5122:g instanceof Uint32Array?w=5125:g instanceof Int32Array?w=5124:g instanceof Int8Array?w=5120:(g instanceof Uint8Array||g instanceof Uint8ClampedArray)&&(w=5121),{buffer:y,type:w,bytesPerElement:g.BYTES_PER_ELEMENT,version:d.version}}function s(d,p,g){const _=p.array,y=p.updateRange;n.bindBuffer(g,d),y.count===-1?n.bufferSubData(g,0,_):(t?n.bufferSubData(g,y.offset*_.BYTES_PER_ELEMENT,_,y.offset,y.count):n.bufferSubData(g,y.offset*_.BYTES_PER_ELEMENT,_.subarray(y.offset,y.offset+y.count)),y.count=-1)}function o(d){return d.isInterleavedBufferAttribute&&(d=d.data),i.get(d)}function u(d){d.isInterleavedBufferAttribute&&(d=d.data);const p=i.get(d);p&&(n.deleteBuffer(p.buffer),i.delete(d))}function h(d,p){if(d.isGLBufferAttribute){const _=i.get(d);(!_||_.version<d.version)&&i.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const g=i.get(d);g===void 0?i.set(d,r(d,p)):g.version<d.version&&(s(g.buffer,d,p),g.version=d.version)}return{get:o,remove:u,update:h}}class Dv extends en{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,u=Math.floor(i),h=Math.floor(r),d=u+1,p=h+1,g=e/u,_=t/h,y=[],w=[],b=[],C=[];for(let S=0;S<p;S++){const T=S*_-o;for(let R=0;R<d;R++){const F=R*g-s;w.push(F,-T,0),b.push(0,0,1),C.push(R/u),C.push(1-S/h)}}for(let S=0;S<h;S++)for(let T=0;T<u;T++){const R=T+d*S,F=T+d*(S+1),k=T+1+d*(S+1),z=T+1+d*S;y.push(R,F,z),y.push(F,k,z)}this.setIndex(y),this.setAttribute("position",new qn(w,3)),this.setAttribute("normal",new qn(b,3)),this.setAttribute("uv",new qn(C,2))}static fromJSON(e){return new Dv(e.width,e.height,e.widthSegments,e.heightSegments)}}var XN=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,YN=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,KN=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,JN=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,QN=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,eO=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,tO="vec3 transformed = vec3( position );",nO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,iO=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotVH = saturate( dot( geometry.viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float NoH ) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float NoV, float NoL ) {
	return saturate( 1.0 / ( 4.0 * ( NoL + NoV - NoL * NoV ) ) );
}
vec3 BRDF_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,rO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,sO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,oO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,aO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,lO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,uO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,cO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,hO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,dO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,fO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,pO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,mO=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,gO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_O=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,yO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,vO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,xO="gl_FragColor = linearToOutputTexel( gl_FragColor );",wO=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,bO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,SO=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,MO=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,EO=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,TO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,LO=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,CO=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,PO=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,AO=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kO=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,RO=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,IO=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,DO=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,NO=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,OO=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in GeometricContext geometry ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,zO=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,FO=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,BO=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,UO=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,HO=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularTintFactor = specularTint;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARTINTMAP
			specularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularTintFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenTint = sheenTint;
#endif`,VO=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenTint;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( material.roughness, directLight.direction, geometry, material.sheenTint );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,WO=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,jO=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,GO=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,$O=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,ZO=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qO=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,XO=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,YO=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,KO=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,JO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,QO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ez=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,tz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,nz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,iz=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,rz=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,sz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,oz=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,az=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uz=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,cz=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,hz=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,dz=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,fz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,pz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,mz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,gz=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_z=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,yz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,xz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,wz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bz=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Sz=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Mz=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Ez=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Tz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Lz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,Cz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Pz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Az=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,kz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Rz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Iz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Dz=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationTint, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = transmission.a;
#endif`,Nz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationTint;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Oz=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,zz=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Fz=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Bz=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Uz=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Hz=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Vz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Wz=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,jz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Gz=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,$z=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Zz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,qz=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Xz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Yz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Kz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Jz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Qz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,eF=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tF=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nF=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,iF=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rF=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sF=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oF=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,aF=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,lF=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,uF=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cF=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hF=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularTint;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARTINTMAP
		uniform sampler2D specularTintMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenTint;
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dF=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fF=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pF=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mF=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,gF=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,_F=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,yF=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vF=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,xF=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const Nt={alphamap_fragment:XN,alphamap_pars_fragment:YN,alphatest_fragment:KN,alphatest_pars_fragment:JN,aomap_fragment:QN,aomap_pars_fragment:eO,begin_vertex:tO,beginnormal_vertex:nO,bsdfs:iO,bumpmap_pars_fragment:rO,clipping_planes_fragment:sO,clipping_planes_pars_fragment:oO,clipping_planes_pars_vertex:aO,clipping_planes_vertex:lO,color_fragment:uO,color_pars_fragment:cO,color_pars_vertex:hO,color_vertex:dO,common:fO,cube_uv_reflection_fragment:pO,defaultnormal_vertex:mO,displacementmap_pars_vertex:gO,displacementmap_vertex:_O,emissivemap_fragment:yO,emissivemap_pars_fragment:vO,encodings_fragment:xO,encodings_pars_fragment:wO,envmap_fragment:bO,envmap_common_pars_fragment:SO,envmap_pars_fragment:MO,envmap_pars_vertex:EO,envmap_physical_pars_fragment:OO,envmap_vertex:TO,fog_vertex:LO,fog_pars_vertex:CO,fog_fragment:PO,fog_pars_fragment:AO,gradientmap_pars_fragment:kO,lightmap_fragment:RO,lightmap_pars_fragment:IO,lights_lambert_vertex:DO,lights_pars_begin:NO,lights_toon_fragment:zO,lights_toon_pars_fragment:FO,lights_phong_fragment:BO,lights_phong_pars_fragment:UO,lights_physical_fragment:HO,lights_physical_pars_fragment:VO,lights_fragment_begin:WO,lights_fragment_maps:jO,lights_fragment_end:GO,logdepthbuf_fragment:$O,logdepthbuf_pars_fragment:ZO,logdepthbuf_pars_vertex:qO,logdepthbuf_vertex:XO,map_fragment:YO,map_pars_fragment:KO,map_particle_fragment:JO,map_particle_pars_fragment:QO,metalnessmap_fragment:ez,metalnessmap_pars_fragment:tz,morphnormal_vertex:nz,morphtarget_pars_vertex:iz,morphtarget_vertex:rz,normal_fragment_begin:sz,normal_fragment_maps:oz,normal_pars_fragment:az,normal_pars_vertex:lz,normal_vertex:uz,normalmap_pars_fragment:cz,clearcoat_normal_fragment_begin:hz,clearcoat_normal_fragment_maps:dz,clearcoat_pars_fragment:fz,output_fragment:pz,packing:mz,premultiplied_alpha_fragment:gz,project_vertex:_z,dithering_fragment:yz,dithering_pars_fragment:vz,roughnessmap_fragment:xz,roughnessmap_pars_fragment:wz,shadowmap_pars_fragment:bz,shadowmap_pars_vertex:Sz,shadowmap_vertex:Mz,shadowmask_pars_fragment:Ez,skinbase_vertex:Tz,skinning_pars_vertex:Lz,skinning_vertex:Cz,skinnormal_vertex:Pz,specularmap_fragment:Az,specularmap_pars_fragment:kz,tonemapping_fragment:Rz,tonemapping_pars_fragment:Iz,transmission_fragment:Dz,transmission_pars_fragment:Nz,uv_pars_fragment:Oz,uv_pars_vertex:zz,uv_vertex:Fz,uv2_pars_fragment:Bz,uv2_pars_vertex:Uz,uv2_vertex:Hz,worldpos_vertex:Vz,background_frag:Wz,background_vert:jz,cube_frag:Gz,cube_vert:$z,depth_frag:Zz,depth_vert:qz,distanceRGBA_frag:Xz,distanceRGBA_vert:Yz,equirect_frag:Kz,equirect_vert:Jz,linedashed_frag:Qz,linedashed_vert:eF,meshbasic_frag:tF,meshbasic_vert:nF,meshlambert_frag:iF,meshlambert_vert:rF,meshmatcap_frag:sF,meshmatcap_vert:oF,meshnormal_frag:aF,meshnormal_vert:lF,meshphong_frag:uF,meshphong_vert:cF,meshphysical_frag:hF,meshphysical_vert:dF,meshtoon_frag:fF,meshtoon_vert:pF,points_frag:mF,points_vert:gF,shadow_frag:_F,shadow_vert:yF,sprite_frag:vF,sprite_vert:xF},Qe={common:{diffuse:{value:new ht(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Qn},uv2Transform:{value:new Qn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Qn}},sprite:{diffuse:{value:new ht(16777215)},opacity:{value:1},center:{value:new Ze(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Qn}}},ws={basic:{uniforms:ci([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.fog]),vertexShader:Nt.meshbasic_vert,fragmentShader:Nt.meshbasic_frag},lambert:{uniforms:ci([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.fog,Qe.lights,{emissive:{value:new ht(0)}}]),vertexShader:Nt.meshlambert_vert,fragmentShader:Nt.meshlambert_frag},phong:{uniforms:ci([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.fog,Qe.lights,{emissive:{value:new ht(0)},specular:{value:new ht(1118481)},shininess:{value:30}}]),vertexShader:Nt.meshphong_vert,fragmentShader:Nt.meshphong_frag},standard:{uniforms:ci([Qe.common,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.roughnessmap,Qe.metalnessmap,Qe.fog,Qe.lights,{emissive:{value:new ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag},toon:{uniforms:ci([Qe.common,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.gradientmap,Qe.fog,Qe.lights,{emissive:{value:new ht(0)}}]),vertexShader:Nt.meshtoon_vert,fragmentShader:Nt.meshtoon_frag},matcap:{uniforms:ci([Qe.common,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.fog,{matcap:{value:null}}]),vertexShader:Nt.meshmatcap_vert,fragmentShader:Nt.meshmatcap_frag},points:{uniforms:ci([Qe.points,Qe.fog]),vertexShader:Nt.points_vert,fragmentShader:Nt.points_frag},dashed:{uniforms:ci([Qe.common,Qe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nt.linedashed_vert,fragmentShader:Nt.linedashed_frag},depth:{uniforms:ci([Qe.common,Qe.displacementmap]),vertexShader:Nt.depth_vert,fragmentShader:Nt.depth_frag},normal:{uniforms:ci([Qe.common,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,{opacity:{value:1}}]),vertexShader:Nt.meshnormal_vert,fragmentShader:Nt.meshnormal_frag},sprite:{uniforms:ci([Qe.sprite,Qe.fog]),vertexShader:Nt.sprite_vert,fragmentShader:Nt.sprite_frag},background:{uniforms:{uvTransform:{value:new Qn},t2D:{value:null}},vertexShader:Nt.background_vert,fragmentShader:Nt.background_frag},cube:{uniforms:ci([Qe.envmap,{opacity:{value:1}}]),vertexShader:Nt.cube_vert,fragmentShader:Nt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nt.equirect_vert,fragmentShader:Nt.equirect_frag},distanceRGBA:{uniforms:ci([Qe.common,Qe.displacementmap,{referencePosition:{value:new ie},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nt.distanceRGBA_vert,fragmentShader:Nt.distanceRGBA_frag},shadow:{uniforms:ci([Qe.lights,Qe.fog,{color:{value:new ht(0)},opacity:{value:1}}]),vertexShader:Nt.shadow_vert,fragmentShader:Nt.shadow_frag}};ws.physical={uniforms:ci([ws.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ze(1,1)},clearcoatNormalMap:{value:null},sheenTint:{value:new ht(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new ht(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new ht(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag};function wF(n,e,t,i,r){const s=new ht(0);let o=0,u,h,d=null,p=0,g=null;function _(w,b){let C=!1,S=b.isScene===!0?b.background:null;S&&S.isTexture&&(S=e.get(S));const T=n.xr,R=T.getSession&&T.getSession();R&&R.environmentBlendMode==="additive"&&(S=null),S===null?y(s,o):S&&S.isColor&&(y(S,1),C=!0),(n.autoClear||C)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===cm)?(h===void 0&&(h=new Ci(new od(1,1,1),new nl({name:"BackgroundCubeMaterial",uniforms:Uu(ws.cube.uniforms),vertexShader:ws.cube.vertexShader,fragmentShader:ws.cube.fragmentShader,side:On,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(F,k,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=S,h.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,(d!==S||p!==S.version||g!==n.toneMapping)&&(h.material.needsUpdate=!0,d=S,p=S.version,g=n.toneMapping),w.unshift(h,h.geometry,h.material,0,0,null)):S&&S.isTexture&&(u===void 0&&(u=new Ci(new Dv(2,2),new nl({name:"BackgroundMaterial",uniforms:Uu(ws.background.uniforms),vertexShader:ws.background.vertexShader,fragmentShader:ws.background.fragmentShader,side:Wh,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=S,S.matrixAutoUpdate===!0&&S.updateMatrix(),u.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||p!==S.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,d=S,p=S.version,g=n.toneMapping),w.unshift(u,u.geometry,u.material,0,0,null))}function y(w,b){t.buffers.color.setClear(w.r,w.g,w.b,b,r)}return{getClearColor:function(){return s},setClearColor:function(w,b=1){s.set(w),o=b,y(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(w){o=w,y(s,o)},render:_}}function bF(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,u={},h=b(null);let d=h;function p(Y,Q,ne,oe,ae){let ee=!1;if(o){const pe=w(oe,ne,Q);d!==pe&&(d=pe,_(d.object)),ee=C(oe,ae),ee&&S(oe,ae)}else{const pe=Q.wireframe===!0;(d.geometry!==oe.id||d.program!==ne.id||d.wireframe!==pe)&&(d.geometry=oe.id,d.program=ne.id,d.wireframe=pe,ee=!0)}Y.isInstancedMesh===!0&&(ee=!0),ae!==null&&t.update(ae,34963),ee&&(N(Y,Q,ne,oe),ae!==null&&n.bindBuffer(34963,t.get(ae).buffer))}function g(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function _(Y){return i.isWebGL2?n.bindVertexArray(Y):s.bindVertexArrayOES(Y)}function y(Y){return i.isWebGL2?n.deleteVertexArray(Y):s.deleteVertexArrayOES(Y)}function w(Y,Q,ne){const oe=ne.wireframe===!0;let ae=u[Y.id];ae===void 0&&(ae={},u[Y.id]=ae);let ee=ae[Q.id];ee===void 0&&(ee={},ae[Q.id]=ee);let pe=ee[oe];return pe===void 0&&(pe=b(g()),ee[oe]=pe),pe}function b(Y){const Q=[],ne=[],oe=[];for(let ae=0;ae<r;ae++)Q[ae]=0,ne[ae]=0,oe[ae]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Q,enabledAttributes:ne,attributeDivisors:oe,object:Y,attributes:{},index:null}}function C(Y,Q){const ne=d.attributes,oe=Y.attributes;let ae=0;for(const ee in oe){const pe=ne[ee],O=oe[ee];if(pe===void 0||pe.attribute!==O||pe.data!==O.data)return!0;ae++}return d.attributesNum!==ae||d.index!==Q}function S(Y,Q){const ne={},oe=Y.attributes;let ae=0;for(const ee in oe){const pe=oe[ee],O={};O.attribute=pe,pe.data&&(O.data=pe.data),ne[ee]=O,ae++}d.attributes=ne,d.attributesNum=ae,d.index=Q}function T(){const Y=d.newAttributes;for(let Q=0,ne=Y.length;Q<ne;Q++)Y[Q]=0}function R(Y){F(Y,0)}function F(Y,Q){const ne=d.newAttributes,oe=d.enabledAttributes,ae=d.attributeDivisors;ne[Y]=1,oe[Y]===0&&(n.enableVertexAttribArray(Y),oe[Y]=1),ae[Y]!==Q&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Y,Q),ae[Y]=Q)}function k(){const Y=d.newAttributes,Q=d.enabledAttributes;for(let ne=0,oe=Q.length;ne<oe;ne++)Q[ne]!==Y[ne]&&(n.disableVertexAttribArray(ne),Q[ne]=0)}function z(Y,Q,ne,oe,ae,ee){i.isWebGL2===!0&&(ne===5124||ne===5125)?n.vertexAttribIPointer(Y,Q,ne,ae,ee):n.vertexAttribPointer(Y,Q,ne,oe,ae,ee)}function N(Y,Q,ne,oe){if(i.isWebGL2===!1&&(Y.isInstancedMesh||oe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;T();const ae=oe.attributes,ee=ne.getAttributes(),pe=Q.defaultAttributeValues;for(const O in ee){const G=ee[O];if(G.location>=0){let se=ae[O];if(se===void 0&&(O==="instanceMatrix"&&Y.instanceMatrix&&(se=Y.instanceMatrix),O==="instanceColor"&&Y.instanceColor&&(se=Y.instanceColor)),se!==void 0){const D=se.normalized,fe=se.itemSize,ve=t.get(se);if(ve===void 0)continue;const te=ve.buffer,Ne=ve.type,Pe=ve.bytesPerElement;if(se.isInterleavedBufferAttribute){const ke=se.data,ze=ke.stride,We=se.offset;if(ke&&ke.isInstancedInterleavedBuffer){for(let be=0;be<G.locationSize;be++)F(G.location+be,ke.meshPerAttribute);Y.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=ke.meshPerAttribute*ke.count)}else for(let be=0;be<G.locationSize;be++)R(G.location+be);n.bindBuffer(34962,te);for(let be=0;be<G.locationSize;be++)z(G.location+be,fe/G.locationSize,Ne,D,ze*Pe,(We+fe/G.locationSize*be)*Pe)}else{if(se.isInstancedBufferAttribute){for(let ke=0;ke<G.locationSize;ke++)F(G.location+ke,se.meshPerAttribute);Y.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let ke=0;ke<G.locationSize;ke++)R(G.location+ke);n.bindBuffer(34962,te);for(let ke=0;ke<G.locationSize;ke++)z(G.location+ke,fe/G.locationSize,Ne,D,fe*Pe,fe/G.locationSize*ke*Pe)}}else if(pe!==void 0){const D=pe[O];if(D!==void 0)switch(D.length){case 2:n.vertexAttrib2fv(G.location,D);break;case 3:n.vertexAttrib3fv(G.location,D);break;case 4:n.vertexAttrib4fv(G.location,D);break;default:n.vertexAttrib1fv(G.location,D)}}}}k()}function I(){U();for(const Y in u){const Q=u[Y];for(const ne in Q){const oe=Q[ne];for(const ae in oe)y(oe[ae].object),delete oe[ae];delete Q[ne]}delete u[Y]}}function W(Y){if(u[Y.id]===void 0)return;const Q=u[Y.id];for(const ne in Q){const oe=Q[ne];for(const ae in oe)y(oe[ae].object),delete oe[ae];delete Q[ne]}delete u[Y.id]}function j(Y){for(const Q in u){const ne=u[Q];if(ne[Y.id]===void 0)continue;const oe=ne[Y.id];for(const ae in oe)y(oe[ae].object),delete oe[ae];delete ne[Y.id]}}function U(){K(),d!==h&&(d=h,_(d.object))}function K(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:p,reset:U,resetDefaultState:K,dispose:I,releaseStatesOfGeometry:W,releaseStatesOfProgram:j,initAttributes:T,enableAttribute:R,disableUnusedAttributes:k}}function SF(n,e,t,i){const r=i.isWebGL2;let s;function o(d){s=d}function u(d,p){n.drawArrays(s,d,p),t.update(p,s,1)}function h(d,p,g){if(g===0)return;let _,y;if(r)_=n,y="drawArraysInstanced";else if(_=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",_===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[y](s,d,p,g),t.update(p,s,g)}this.setMode=o,this.render=u,this.renderInstances=h}function MF(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(N){if(N==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let u=t.precision!==void 0?t.precision:"highp";const h=s(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const d=o||e.has("WEBGL_draw_buffers"),p=t.logarithmicDepthBuffer===!0,g=n.getParameter(34930),_=n.getParameter(35660),y=n.getParameter(3379),w=n.getParameter(34076),b=n.getParameter(34921),C=n.getParameter(36347),S=n.getParameter(36348),T=n.getParameter(36349),R=_>0,F=o||e.has("OES_texture_float"),k=R&&F,z=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:d,getMaxAnisotropy:r,getMaxPrecision:s,precision:u,logarithmicDepthBuffer:p,maxTextures:g,maxVertexTextures:_,maxTextureSize:y,maxCubemapSize:w,maxAttributes:b,maxVertexUniforms:C,maxVaryings:S,maxFragmentUniforms:T,vertexTextures:R,floatFragmentTextures:F,floatVertexTextures:k,maxSamples:z}}function EF(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new xs,u=new Qn,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(g,_,y){const w=g.length!==0||_||i!==0||r;return r=_,t=p(g,y,0),i=g.length,w},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1,d()},this.setState=function(g,_,y){const w=g.clippingPlanes,b=g.clipIntersection,C=g.clipShadows,S=n.get(g);if(!r||w===null||w.length===0||s&&!C)s?p(null):d();else{const T=s?0:i,R=T*4;let F=S.clippingState||null;h.value=F,F=p(w,_,R,y);for(let k=0;k!==R;++k)F[k]=t[k];S.clippingState=F,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=T}};function d(){h.value!==t&&(h.value=t,h.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(g,_,y,w){const b=g!==null?g.length:0;let C=null;if(b!==0){if(C=h.value,w!==!0||C===null){const S=y+b*4,T=_.matrixWorldInverse;u.getNormalMatrix(T),(C===null||C.length<S)&&(C=new Float32Array(S));for(let R=0,F=y;R!==b;++R,F+=4)o.copy(g[R]).applyMatrix4(T,u),o.normal.toArray(C,F),C[F+3]=o.constant}h.value=C,h.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,C}}function TF(n){let e=new WeakMap;function t(o,u){return u===ky?o.mapping=lm:u===Ry&&(o.mapping=um),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const u=o.mapping;if(u===ky||u===Ry)if(e.has(o)){const h=e.get(o).texture;return t(h,o.mapping)}else{const h=o.image;if(h&&h.height>0){const d=n.getRenderTarget(),p=new GE(h.height/2);return p.fromEquirectangularTexture(n,o),e.set(o,p),n.setRenderTarget(d),o.addEventListener("dispose",r),t(p.texture,o.mapping)}else return null}}return o}function r(o){const u=o.target;u.removeEventListener("dispose",r);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Pu extends Rv{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,u=r+t,h=r-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,u-=p*this.view.offsetY,h=u-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,u,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}Pu.prototype.isOrthographicCamera=!0;class mm extends nl{constructor(e){super(e),this.type="RawShaderMaterial"}}mm.prototype.isRawShaderMaterial=!0;const Au=4,ea=8,ys=Math.pow(2,ea),ZE=[.125,.215,.35,.446,.526,.582],qE=ea-Au+1+ZE.length,hu=20,Ms={[ji]:0,[dm]:1,[Pv]:2,[OE]:3,[zE]:4,[FE]:5,[Cv]:6},z_=new Pu,{_lodPlanes:th,_sizeLods:rS,_sigmas:ep}=PF(),sS=new ht;let F_=null;const Va=(1+Math.sqrt(5))/2,du=1/Va,oS=[new ie(1,1,1),new ie(-1,1,1),new ie(1,1,-1),new ie(-1,1,-1),new ie(0,Va,du),new ie(0,Va,-du),new ie(du,0,Va),new ie(-du,0,Va),new ie(Va,du,0),new ie(-Va,du,0)];class LF{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=AF(hu),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){F_=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=uS(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=lS(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<th.length;e++)th[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(F_),e.scissorTest=!1,tp(e,0,0,e.width,e.height)}_fromTexture(e){F_=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:$n,minFilter:$n,generateMipmaps:!1,type:Bu,format:SD,encoding:CF(e)?e.encoding:Pv,depthBuffer:!1},i=aS(t);return i.depthBuffer=!e,this._pingPongRenderTarget=aS(t),i}_compileMaterial(e){const t=new Ci(th[0],e);this._renderer.compile(t,z_)}_sceneToCubeUV(e,t,i,r){const u=new jn(90,1,t,i),h=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,g=p.autoClear,_=p.outputEncoding,y=p.toneMapping;p.getClearColor(sS),p.toneMapping=Ka,p.outputEncoding=ji,p.autoClear=!1;const w=new kv({name:"PMREM.Background",side:On,depthWrite:!1,depthTest:!1}),b=new Ci(new od,w);let C=!1;const S=e.background;S?S.isColor&&(w.color.copy(S),e.background=null,C=!0):(w.color.copy(sS),C=!0);for(let T=0;T<6;T++){const R=T%3;R==0?(u.up.set(0,h[T],0),u.lookAt(d[T],0,0)):R==1?(u.up.set(0,0,h[T]),u.lookAt(0,d[T],0)):(u.up.set(0,h[T],0),u.lookAt(0,0,d[T])),tp(r,R*ys,T>2?ys:0,ys,ys),p.setRenderTarget(r),C&&p.render(b,u),p.render(e,u)}b.geometry.dispose(),b.material.dispose(),p.toneMapping=y,p.outputEncoding=_,p.autoClear=g,e.background=S}_textureToCubeUV(e,t){const i=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=uS()):this._equirectShader==null&&(this._equirectShader=lS());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,s=new Ci(th[0],r),o=r.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=Ms[e.encoding],o.outputEncoding.value=Ms[t.texture.encoding],tp(t,0,0,3*ys,2*ys),i.setRenderTarget(t),i.render(s,z_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<qE;r++){const s=Math.sqrt(ep[r]*ep[r]-ep[r-1]*ep[r-1]),o=oS[(r-1)%oS.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,u){const h=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,g=new Ci(th[r],d),_=d.uniforms,y=rS[i]-1,w=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*hu-1),b=s/w,C=isFinite(s)?1+Math.floor(p*b):hu;C>hu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${hu}`);const S=[];let T=0;for(let z=0;z<hu;++z){const N=z/b,I=Math.exp(-N*N/2);S.push(I),z==0?T+=I:z<C&&(T+=2*I)}for(let z=0;z<S.length;z++)S[z]=S[z]/T;_.envMap.value=e.texture,_.samples.value=C,_.weights.value=S,_.latitudinal.value=o==="latitudinal",u&&(_.poleAxis.value=u),_.dTheta.value=w,_.mipInt.value=ea-i,_.inputEncoding.value=Ms[e.texture.encoding],_.outputEncoding.value=Ms[e.texture.encoding];const R=rS[r],F=3*Math.max(0,ys-2*R),k=(r===0?0:2*ys)+2*R*(r>ea-Au?r-ea+Au:0);tp(t,F,k,3*R,2*R),h.setRenderTarget(t),h.render(g,z_)}}function CF(n){return n===void 0||n.type!==Bu?!1:n.encoding===ji||n.encoding===dm||n.encoding===Cv}function PF(){const n=[],e=[],t=[];let i=ea;for(let r=0;r<qE;r++){const s=Math.pow(2,i);e.push(s);let o=1/s;r>ea-Au?o=ZE[r-ea+Au-1]:r==0&&(o=0),t.push(o);const u=1/(s-1),h=-u/2,d=1+u/2,p=[h,h,d,h,d,d,h,h,d,d,h,d],g=6,_=6,y=3,w=2,b=1,C=new Float32Array(y*_*g),S=new Float32Array(w*_*g),T=new Float32Array(b*_*g);for(let F=0;F<g;F++){const k=F%3*2/3-1,z=F>2?0:-1,N=[k,z,0,k+2/3,z,0,k+2/3,z+1,0,k,z,0,k+2/3,z+1,0,k,z+1,0];C.set(N,y*_*F),S.set(p,w*_*F);const I=[F,F,F,F,F,F];T.set(I,b*_*F)}const R=new en;R.setAttribute("position",new Fn(C,y)),R.setAttribute("uv",new Fn(S,w)),R.setAttribute("faceIndex",new Fn(T,b)),n.push(R),i>Au&&i--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function aS(n){const e=new Ts(3*ys,3*ys,n);return e.texture.mapping=cm,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function tp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function AF(n){const e=new Float32Array(n),t=new ie(0,1,0);return new mm({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:Ms[ji]},outputEncoding:{value:Ms[ji]}},vertexShader:Nv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${Ov()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Jo,depthTest:!1,depthWrite:!1})}function lS(){const n=new Ze(1,1);return new mm({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:Ms[ji]},outputEncoding:{value:Ms[ji]}},vertexShader:Nv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${Ov()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Jo,depthTest:!1,depthWrite:!1})}function uS(){return new mm({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Ms[ji]},outputEncoding:{value:Ms[ji]}},vertexShader:Nv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${Ov()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Jo,depthTest:!1,depthWrite:!1})}function Nv(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ov(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function kF(n){let e=new WeakMap,t=null;function i(u){if(u&&u.isTexture&&u.isRenderTargetTexture===!1){const h=u.mapping,d=h===ky||h===Ry,p=h===lm||h===um;if(d||p){if(e.has(u))return e.get(u).texture;{const g=u.image;if(d&&g&&g.height>0||p&&g&&r(g)){const _=n.getRenderTarget();t===null&&(t=new LF(n));const y=d?t.fromEquirectangular(u):t.fromCubemap(u);return e.set(u,y),n.setRenderTarget(_),u.addEventListener("dispose",s),y.texture}else return null}}}return u}function r(u){let h=0;const d=6;for(let p=0;p<d;p++)u[p]!==void 0&&h++;return h===d}function s(u){const h=u.target;h.removeEventListener("dispose",s);const d=e.get(h);d!==void 0&&(e.delete(h),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function RF(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function IF(n,e,t,i){const r={},s=new WeakMap;function o(g){const _=g.target;_.index!==null&&e.remove(_.index);for(const w in _.attributes)e.remove(_.attributes[w]);_.removeEventListener("dispose",o),delete r[_.id];const y=s.get(_);y&&(e.remove(y),s.delete(_)),i.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function u(g,_){return r[_.id]===!0||(_.addEventListener("dispose",o),r[_.id]=!0,t.memory.geometries++),_}function h(g){const _=g.attributes;for(const w in _)e.update(_[w],34962);const y=g.morphAttributes;for(const w in y){const b=y[w];for(let C=0,S=b.length;C<S;C++)e.update(b[C],34962)}}function d(g){const _=[],y=g.index,w=g.attributes.position;let b=0;if(y!==null){const T=y.array;b=y.version;for(let R=0,F=T.length;R<F;R+=3){const k=T[R+0],z=T[R+1],N=T[R+2];_.push(k,z,z,N,N,k)}}else{const T=w.array;b=w.version;for(let R=0,F=T.length/3-1;R<F;R+=3){const k=R+0,z=R+1,N=R+2;_.push(k,z,z,N,N,k)}}const C=new(jE(_)>65535?WE:VE)(_,1);C.version=b;const S=s.get(g);S&&e.remove(S),s.set(g,C)}function p(g){const _=s.get(g);if(_){const y=g.index;y!==null&&_.version<y.version&&d(g)}else d(g);return s.get(g)}return{get:u,update:h,getWireframeAttribute:p}}function DF(n,e,t,i){const r=i.isWebGL2;let s;function o(_){s=_}let u,h;function d(_){u=_.type,h=_.bytesPerElement}function p(_,y){n.drawElements(s,y,u,_*h),t.update(y,s,1)}function g(_,y,w){if(w===0)return;let b,C;if(r)b=n,C="drawElementsInstanced";else if(b=e.get("ANGLE_instanced_arrays"),C="drawElementsInstancedANGLE",b===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[C](s,y,u,_*h,w),t.update(y,s,w)}this.setMode=o,this.setIndex=d,this.render=p,this.renderInstances=g}function NF(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,u){switch(t.calls++,o){case 4:t.triangles+=u*(s/3);break;case 1:t.lines+=u*(s/2);break;case 3:t.lines+=u*(s-1);break;case 2:t.lines+=u*s;break;case 0:t.points+=u*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function OF(n,e){return n[0]-e[0]}function zF(n,e){return Math.abs(e[1])-Math.abs(n[1])}function FF(n){const e={},t=new Float32Array(8),i=[];for(let s=0;s<8;s++)i[s]=[s,0];function r(s,o,u,h){const d=s.morphTargetInfluences,p=d===void 0?0:d.length;let g=e[o.id];if(g===void 0||g.length!==p){g=[];for(let C=0;C<p;C++)g[C]=[C,0];e[o.id]=g}for(let C=0;C<p;C++){const S=g[C];S[0]=C,S[1]=d[C]}g.sort(zF);for(let C=0;C<8;C++)C<p&&g[C][1]?(i[C][0]=g[C][0],i[C][1]=g[C][1]):(i[C][0]=Number.MAX_SAFE_INTEGER,i[C][1]=0);i.sort(OF);const _=o.morphAttributes.position,y=o.morphAttributes.normal;let w=0;for(let C=0;C<8;C++){const S=i[C],T=S[0],R=S[1];T!==Number.MAX_SAFE_INTEGER&&R?(_&&o.getAttribute("morphTarget"+C)!==_[T]&&o.setAttribute("morphTarget"+C,_[T]),y&&o.getAttribute("morphNormal"+C)!==y[T]&&o.setAttribute("morphNormal"+C,y[T]),t[C]=R,w+=R):(_&&o.hasAttribute("morphTarget"+C)===!0&&o.deleteAttribute("morphTarget"+C),y&&o.hasAttribute("morphNormal"+C)===!0&&o.deleteAttribute("morphNormal"+C),t[C]=0)}const b=o.morphTargetsRelative?1:1-w;h.getUniforms().setValue(n,"morphTargetBaseInfluence",b),h.getUniforms().setValue(n,"morphTargetInfluences",t)}return{update:r}}function BF(n,e,t,i){let r=new WeakMap;function s(h){const d=i.render.frame,p=h.geometry,g=e.get(h,p);return r.get(g)!==d&&(e.update(g),r.set(g,d)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),t.update(h.instanceMatrix,34962),h.instanceColor!==null&&t.update(h.instanceColor,34962)),g}function o(){r=new WeakMap}function u(h){const d=h.target;d.removeEventListener("dispose",u),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}class XE extends ei{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=$n,this.minFilter=$n,this.wrapR=lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}XE.prototype.isDataTexture2DArray=!0;class YE extends ei{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=$n,this.minFilter=$n,this.wrapR=lr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}YE.prototype.isDataTexture3D=!0;const KE=new ei,UF=new XE,HF=new YE,JE=new fm,cS=[],hS=[],dS=new Float32Array(16),fS=new Float32Array(9),pS=new Float32Array(4);function Ju(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=cS[r];if(s===void 0&&(s=new Float32Array(r),cS[r]=s),e!==0){i.toArray(s,0);for(let o=1,u=0;o!==e;++o)u+=t,n[o].toArray(s,u)}return s}function Pi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function gi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function QE(n,e){let t=hS[e];t===void 0&&(t=new Int32Array(e),hS[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function VF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function WF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2fv(this.addr,e),gi(t,e)}}function jF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Pi(t,e))return;n.uniform3fv(this.addr,e),gi(t,e)}}function GF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4fv(this.addr,e),gi(t,e)}}function $F(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),gi(t,e)}else{if(Pi(t,i))return;pS.set(i),n.uniformMatrix2fv(this.addr,!1,pS),gi(t,i)}}function ZF(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),gi(t,e)}else{if(Pi(t,i))return;fS.set(i),n.uniformMatrix3fv(this.addr,!1,fS),gi(t,i)}}function qF(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),gi(t,e)}else{if(Pi(t,i))return;dS.set(i),n.uniformMatrix4fv(this.addr,!1,dS),gi(t,i)}}function XF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function YF(n,e){const t=this.cache;Pi(t,e)||(n.uniform2iv(this.addr,e),gi(t,e))}function KF(n,e){const t=this.cache;Pi(t,e)||(n.uniform3iv(this.addr,e),gi(t,e))}function JF(n,e){const t=this.cache;Pi(t,e)||(n.uniform4iv(this.addr,e),gi(t,e))}function QF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function eB(n,e){const t=this.cache;Pi(t,e)||(n.uniform2uiv(this.addr,e),gi(t,e))}function tB(n,e){const t=this.cache;Pi(t,e)||(n.uniform3uiv(this.addr,e),gi(t,e))}function nB(n,e){const t=this.cache;Pi(t,e)||(n.uniform4uiv(this.addr,e),gi(t,e))}function iB(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||KE,r)}function rB(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||HF,r)}function sB(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||JE,r)}function oB(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||UF,r)}function aB(n){switch(n){case 5126:return VF;case 35664:return WF;case 35665:return jF;case 35666:return GF;case 35674:return $F;case 35675:return ZF;case 35676:return qF;case 5124:case 35670:return XF;case 35667:case 35671:return YF;case 35668:case 35672:return KF;case 35669:case 35673:return JF;case 5125:return QF;case 36294:return eB;case 36295:return tB;case 36296:return nB;case 35678:case 36198:case 36298:case 36306:case 35682:return iB;case 35679:case 36299:case 36307:return rB;case 35680:case 36300:case 36308:case 36293:return sB;case 36289:case 36303:case 36311:case 36292:return oB}}function lB(n,e){n.uniform1fv(this.addr,e)}function uB(n,e){const t=Ju(e,this.size,2);n.uniform2fv(this.addr,t)}function cB(n,e){const t=Ju(e,this.size,3);n.uniform3fv(this.addr,t)}function hB(n,e){const t=Ju(e,this.size,4);n.uniform4fv(this.addr,t)}function dB(n,e){const t=Ju(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function fB(n,e){const t=Ju(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function pB(n,e){const t=Ju(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function mB(n,e){n.uniform1iv(this.addr,e)}function gB(n,e){n.uniform2iv(this.addr,e)}function _B(n,e){n.uniform3iv(this.addr,e)}function yB(n,e){n.uniform4iv(this.addr,e)}function vB(n,e){n.uniform1uiv(this.addr,e)}function xB(n,e){n.uniform2uiv(this.addr,e)}function wB(n,e){n.uniform3uiv(this.addr,e)}function bB(n,e){n.uniform4uiv(this.addr,e)}function SB(n,e,t){const i=e.length,r=QE(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTexture2D(e[s]||KE,r[s])}function MB(n,e,t){const i=e.length,r=QE(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTextureCube(e[s]||JE,r[s])}function EB(n){switch(n){case 5126:return lB;case 35664:return uB;case 35665:return cB;case 35666:return hB;case 35674:return dB;case 35675:return fB;case 35676:return pB;case 5124:case 35670:return mB;case 35667:case 35671:return gB;case 35668:case 35672:return _B;case 35669:case 35673:return yB;case 5125:return vB;case 36294:return xB;case 36295:return wB;case 36296:return bB;case 35678:case 36198:case 36298:case 36306:case 35682:return SB;case 35680:case 36300:case 36308:case 36293:return MB}}function TB(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=aB(e.type)}function eT(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=EB(e.type)}eT.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),gi(e,n)};function tT(n){this.id=n,this.seq=[],this.map={}}tT.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const B_=/(\w+)(\])?(\[|\.)?/g;function mS(n,e){n.seq.push(e),n.map[e.id]=e}function LB(n,e,t){const i=n.name,r=i.length;for(B_.lastIndex=0;;){const s=B_.exec(i),o=B_.lastIndex;let u=s[1];const h=s[2]==="]",d=s[3];if(h&&(u=u|0),d===void 0||d==="["&&o+2===r){mS(t,d===void 0?new TB(u,n,e):new eT(u,n,e));break}else{let g=t.map[u];g===void 0&&(g=new tT(u),mS(t,g)),t=g}}}function ta(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i),s=n.getUniformLocation(e,r.name);LB(r,s,this)}}ta.prototype.setValue=function(n,e,t,i){const r=this.map[e];r!==void 0&&r.setValue(n,t,i)};ta.prototype.setOptional=function(n,e,t){const i=e[t];i!==void 0&&this.setValue(n,t,i)};ta.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],u=t[o.id];u.needsUpdate!==!1&&o.setValue(n,u.value,i)}};ta.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};function gS(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let CB=0;function PB(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function nT(n){switch(n){case ji:return["Linear","( value )"];case dm:return["sRGB","( value )"];case Pv:return["RGBE","( value )"];case OE:return["RGBM","( value, 7.0 )"];case zE:return["RGBM","( value, 16.0 )"];case FE:return["RGBD","( value, 256.0 )"];case Cv:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case cN:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function _S(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();return i&&r===""?"":t.toUpperCase()+`

`+r+`

`+PB(n.getShaderSource(e))}function fu(n,e){const t=nT(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function AB(n,e){const t=nT(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function kB(n,e){let t;switch(e){case lD:t="Linear";break;case uD:t="Reinhard";break;case cD:t="OptimizedCineon";break;case hD:t="ACESFilmic";break;case dD:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function RB(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(vh).join(`
`)}function IB(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function DB(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let u=1;s.type===35674&&(u=2),s.type===35675&&(u=3),s.type===35676&&(u=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:u}}return t}function vh(n){return n!==""}function yS(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vS(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const NB=/^[ \t]*#include +<([\w\d./]+)>/gm;function Oy(n){return n.replace(NB,OB)}function OB(n,e){const t=Nt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Oy(t)}const zB=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,FB=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xS(n){return n.replace(FB,iT).replace(zB,BB)}function BB(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),iT(n,e,t,i)}function iT(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function wS(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function UB(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===AE?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===U3?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===yh&&(e="SHADOWMAP_TYPE_VSM"),e}function HB(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case lm:case um:e="ENVMAP_TYPE_CUBE";break;case cm:case Tv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function VB(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case um:case Tv:e="ENVMAP_MODE_REFRACTION";break}return e}function WB(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case am:e="ENVMAP_BLENDING_MULTIPLY";break;case oD:e="ENVMAP_BLENDING_MIX";break;case aD:e="ENVMAP_BLENDING_ADD";break}return e}function jB(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,u=t.fragmentShader;const h=UB(t),d=HB(t),p=VB(t),g=WB(t),_=n.gammaFactor>0?n.gammaFactor:1,y=t.isWebGL2?"":RB(t),w=IB(s),b=r.createProgram();let C,S,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(C=[w].filter(vh).join(`
`),C.length>0&&(C+=`
`),S=[y,w].filter(vh).join(`
`),S.length>0&&(S+=`
`)):(C=[wS(t),"#define SHADER_NAME "+t.shaderName,w,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularTintMap?"#define USE_SPECULARTINTMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(vh).join(`
`),S=[y,wS(t),"#define SHADER_NAME "+t.shaderName,w,"#define GAMMA_FACTOR "+_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularTintMap?"#define USE_SPECULARTINTMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheenTint?"#define USE_SHEEN":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ka?"#define TONE_MAPPING":"",t.toneMapping!==Ka?Nt.tonemapping_pars_fragment:"",t.toneMapping!==Ka?kB("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===Qo?"#define OPAQUE":"",Nt.encodings_pars_fragment,t.map?fu("mapTexelToLinear",t.mapEncoding):"",t.matcap?fu("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?fu("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?fu("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularTintMap?fu("specularTintMapTexelToLinear",t.specularTintMapEncoding):"",t.lightMap?fu("lightMapTexelToLinear",t.lightMapEncoding):"",AB("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(vh).join(`
`)),o=Oy(o),o=yS(o,t),o=vS(o,t),u=Oy(u),u=yS(u,t),u=vS(u,t),o=xS(o),u=xS(u),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,C=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+C,S=["#define varying in",t.glslVersion===$b?"":"out highp vec4 pc_fragColor;",t.glslVersion===$b?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const R=T+C+o,F=T+S+u,k=gS(r,35633,R),z=gS(r,35632,F);if(r.attachShader(b,k),r.attachShader(b,z),t.index0AttributeName!==void 0?r.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b),n.debug.checkShaderErrors){const W=r.getProgramInfoLog(b).trim(),j=r.getShaderInfoLog(k).trim(),U=r.getShaderInfoLog(z).trim();let K=!0,Y=!0;if(r.getProgramParameter(b,35714)===!1){K=!1;const Q=_S(r,k,"vertex"),ne=_S(r,z,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,35715)+`

Program Info Log: `+W+`
`+Q+`
`+ne)}else W!==""?console.warn("THREE.WebGLProgram: Program Info Log:",W):(j===""||U==="")&&(Y=!1);Y&&(this.diagnostics={runnable:K,programLog:W,vertexShader:{log:j,prefix:C},fragmentShader:{log:U,prefix:S}})}r.deleteShader(k),r.deleteShader(z);let N;this.getUniforms=function(){return N===void 0&&(N=new ta(r,b)),N};let I;return this.getAttributes=function(){return I===void 0&&(I=DB(r,b)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.name=t.shaderName,this.id=CB++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=k,this.fragmentShader=z,this}function GB(n,e,t,i,r,s,o){const u=[],h=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.floatVertexTextures,g=r.maxVertexUniforms,_=r.vertexTextures;let y=r.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},b=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheenTint","transmission","transmissionMap","thicknessMap"];function C(N){const W=N.skeleton.bones;if(p)return 1024;{const U=Math.floor((g-20)/4),K=Math.min(U,W.length);return K<W.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+W.length+" bones. This GPU supports "+K+"."),0):K}}function S(N){let I;return N&&N.isTexture?I=N.encoding:N&&N.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),I=N.texture.encoding):I=ji,I}function T(N,I,W,j,U){const K=j.fog,Y=N.isMeshStandardMaterial?j.environment:null,Q=(N.isMeshStandardMaterial?t:e).get(N.envMap||Y),ne=w[N.type],oe=U.isSkinnedMesh?C(U):0;N.precision!==null&&(y=r.getMaxPrecision(N.precision),y!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",y,"instead."));let ae,ee;if(ne){const D=ws[ne];ae=D.vertexShader,ee=D.fragmentShader}else ae=N.vertexShader,ee=N.fragmentShader;const pe=n.getRenderTarget(),O=N.alphaTest>0,G=N.clearcoat>0;return{isWebGL2:h,shaderID:ne,shaderName:N.type,vertexShader:ae,fragmentShader:ee,defines:N.defines,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:y,instancing:U.isInstancedMesh===!0,instancingColor:U.isInstancedMesh===!0&&U.instanceColor!==null,supportsVertexTextures:_,outputEncoding:pe!==null?S(pe.texture):n.outputEncoding,map:!!N.map,mapEncoding:S(N.map),matcap:!!N.matcap,matcapEncoding:S(N.matcap),envMap:!!Q,envMapMode:Q&&Q.mapping,envMapEncoding:S(Q),envMapCubeUV:!!Q&&(Q.mapping===cm||Q.mapping===Tv),lightMap:!!N.lightMap,lightMapEncoding:S(N.lightMap),aoMap:!!N.aoMap,emissiveMap:!!N.emissiveMap,emissiveMapEncoding:S(N.emissiveMap),bumpMap:!!N.bumpMap,normalMap:!!N.normalMap,objectSpaceNormalMap:N.normalMapType===fN,tangentSpaceNormalMap:N.normalMapType===qu,clearcoat:G,clearcoatMap:G&&!!N.clearcoatMap,clearcoatRoughnessMap:G&&!!N.clearcoatRoughnessMap,clearcoatNormalMap:G&&!!N.clearcoatNormalMap,displacementMap:!!N.displacementMap,roughnessMap:!!N.roughnessMap,metalnessMap:!!N.metalnessMap,specularMap:!!N.specularMap,specularIntensityMap:!!N.specularIntensityMap,specularTintMap:!!N.specularTintMap,specularTintMapEncoding:S(N.specularTintMap),alphaMap:!!N.alphaMap,alphaTest:O,gradientMap:!!N.gradientMap,sheenTint:!!N.sheenTint&&(N.sheenTint.r>0||N.sheenTint.g>0||N.sheenTint.b>0),transmission:N.transmission>0,transmissionMap:!!N.transmissionMap,thicknessMap:!!N.thicknessMap,combine:N.combine,vertexTangents:!!N.normalMap&&!!U.geometry&&!!U.geometry.attributes.tangent,vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!U.geometry&&!!U.geometry.attributes.color&&U.geometry.attributes.color.itemSize===4,vertexUvs:!!N.map||!!N.bumpMap||!!N.normalMap||!!N.specularMap||!!N.alphaMap||!!N.emissiveMap||!!N.roughnessMap||!!N.metalnessMap||!!N.clearcoatMap||!!N.clearcoatRoughnessMap||!!N.clearcoatNormalMap||!!N.displacementMap||!!N.transmissionMap||!!N.thicknessMap||!!N.specularIntensityMap||!!N.specularTintMap,uvsVertexOnly:!(N.map||N.bumpMap||N.normalMap||N.specularMap||N.alphaMap||N.emissiveMap||N.roughnessMap||N.metalnessMap||N.clearcoatNormalMap||N.transmission>0||N.transmissionMap||N.thicknessMap||N.specularIntensityMap||N.specularTintMap)&&!!N.displacementMap,fog:!!K,useFog:N.fog,fogExp2:K&&K.isFogExp2,flatShading:!!N.flatShading,sizeAttenuation:N.sizeAttenuation,logarithmicDepthBuffer:d,skinning:U.isSkinnedMesh===!0&&oe>0,maxBones:oe,useVertexTexture:p,morphTargets:!!U.geometry&&!!U.geometry.morphAttributes.position,morphNormals:!!U.geometry&&!!U.geometry.morphAttributes.normal,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:N.format,dithering:N.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:N.toneMapped?n.toneMapping:Ka,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===tl,flipSided:N.side===On,depthPacking:N.depthPacking!==void 0?N.depthPacking:!1,index0AttributeName:N.index0AttributeName,extensionDerivatives:N.extensions&&N.extensions.derivatives,extensionFragDepth:N.extensions&&N.extensions.fragDepth,extensionDrawBuffers:N.extensions&&N.extensions.drawBuffers,extensionShaderTextureLOD:N.extensions&&N.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:N.customProgramCacheKey()}}function R(N){const I=[];if(N.shaderID?I.push(N.shaderID):(I.push(N.fragmentShader),I.push(N.vertexShader)),N.defines!==void 0)for(const W in N.defines)I.push(W),I.push(N.defines[W]);if(N.isRawShaderMaterial===!1){for(let W=0;W<b.length;W++)I.push(N[b[W]]);I.push(n.outputEncoding),I.push(n.gammaFactor)}return I.push(N.customProgramCacheKey),I.join()}function F(N){const I=w[N.type];let W;if(I){const j=ws[I];W=WN.clone(j.uniforms)}else W=N.uniforms;return W}function k(N,I){let W;for(let j=0,U=u.length;j<U;j++){const K=u[j];if(K.cacheKey===I){W=K,++W.usedTimes;break}}return W===void 0&&(W=new jB(n,I,N,s),u.push(W)),W}function z(N){if(--N.usedTimes===0){const I=u.indexOf(N);u[I]=u[u.length-1],u.pop(),N.destroy()}}return{getParameters:T,getProgramCacheKey:R,getUniforms:F,acquireProgram:k,releaseProgram:z,programs:u}}function $B(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,u){n.get(s)[o]=u}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function ZB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function bS(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function SS(n){const e=[];let t=0;const i=[],r=[],s=[],o={id:-1};function u(){t=0,i.length=0,r.length=0,s.length=0}function h(y,w,b,C,S,T){let R=e[t];const F=n.get(b);return R===void 0?(R={id:y.id,object:y,geometry:w,material:b,program:F.program||o,groupOrder:C,renderOrder:y.renderOrder,z:S,group:T},e[t]=R):(R.id=y.id,R.object=y,R.geometry=w,R.material=b,R.program=F.program||o,R.groupOrder=C,R.renderOrder=y.renderOrder,R.z=S,R.group=T),t++,R}function d(y,w,b,C,S,T){const R=h(y,w,b,C,S,T);b.transmission>0?r.push(R):b.transparent===!0?s.push(R):i.push(R)}function p(y,w,b,C,S,T){const R=h(y,w,b,C,S,T);b.transmission>0?r.unshift(R):b.transparent===!0?s.unshift(R):i.unshift(R)}function g(y,w){i.length>1&&i.sort(y||ZB),r.length>1&&r.sort(w||bS),s.length>1&&s.sort(w||bS)}function _(){for(let y=t,w=e.length;y<w;y++){const b=e[y];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.program=null,b.group=null}}return{opaque:i,transmissive:r,transparent:s,init:u,push:d,unshift:p,finish:_,sort:g}}function qB(n){let e=new WeakMap;function t(r,s){let o;return e.has(r)===!1?(o=new SS(n),e.set(r,[o])):s>=e.get(r).length?(o=new SS(n),e.get(r).push(o)):o=e.get(r)[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}function XB(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ie,color:new ht};break;case"SpotLight":t={position:new ie,direction:new ie,color:new ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ie,color:new ht,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ie,skyColor:new ht,groundColor:new ht};break;case"RectAreaLight":t={color:new ht,position:new ie,halfWidth:new ie,halfHeight:new ie};break}return n[e.id]=t,t}}}function YB(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let KB=0;function JB(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function QB(n,e){const t=new XB,i=YB(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let p=0;p<9;p++)r.probe.push(new ie);const s=new ie,o=new yt,u=new yt;function h(p,g){let _=0,y=0,w=0;for(let W=0;W<9;W++)r.probe[W].set(0,0,0);let b=0,C=0,S=0,T=0,R=0,F=0,k=0,z=0;p.sort(JB);const N=g!==!0?Math.PI:1;for(let W=0,j=p.length;W<j;W++){const U=p[W],K=U.color,Y=U.intensity,Q=U.distance,ne=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)_+=K.r*Y*N,y+=K.g*Y*N,w+=K.b*Y*N;else if(U.isLightProbe)for(let oe=0;oe<9;oe++)r.probe[oe].addScaledVector(U.sh.coefficients[oe],Y);else if(U.isDirectionalLight){const oe=t.get(U);if(oe.color.copy(U.color).multiplyScalar(U.intensity*N),U.castShadow){const ae=U.shadow,ee=i.get(U);ee.shadowBias=ae.bias,ee.shadowNormalBias=ae.normalBias,ee.shadowRadius=ae.radius,ee.shadowMapSize=ae.mapSize,r.directionalShadow[b]=ee,r.directionalShadowMap[b]=ne,r.directionalShadowMatrix[b]=U.shadow.matrix,F++}r.directional[b]=oe,b++}else if(U.isSpotLight){const oe=t.get(U);if(oe.position.setFromMatrixPosition(U.matrixWorld),oe.color.copy(K).multiplyScalar(Y*N),oe.distance=Q,oe.coneCos=Math.cos(U.angle),oe.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),oe.decay=U.decay,U.castShadow){const ae=U.shadow,ee=i.get(U);ee.shadowBias=ae.bias,ee.shadowNormalBias=ae.normalBias,ee.shadowRadius=ae.radius,ee.shadowMapSize=ae.mapSize,r.spotShadow[S]=ee,r.spotShadowMap[S]=ne,r.spotShadowMatrix[S]=U.shadow.matrix,z++}r.spot[S]=oe,S++}else if(U.isRectAreaLight){const oe=t.get(U);oe.color.copy(K).multiplyScalar(Y),oe.halfWidth.set(U.width*.5,0,0),oe.halfHeight.set(0,U.height*.5,0),r.rectArea[T]=oe,T++}else if(U.isPointLight){const oe=t.get(U);if(oe.color.copy(U.color).multiplyScalar(U.intensity*N),oe.distance=U.distance,oe.decay=U.decay,U.castShadow){const ae=U.shadow,ee=i.get(U);ee.shadowBias=ae.bias,ee.shadowNormalBias=ae.normalBias,ee.shadowRadius=ae.radius,ee.shadowMapSize=ae.mapSize,ee.shadowCameraNear=ae.camera.near,ee.shadowCameraFar=ae.camera.far,r.pointShadow[C]=ee,r.pointShadowMap[C]=ne,r.pointShadowMatrix[C]=U.shadow.matrix,k++}r.point[C]=oe,C++}else if(U.isHemisphereLight){const oe=t.get(U);oe.skyColor.copy(U.color).multiplyScalar(Y*N),oe.groundColor.copy(U.groundColor).multiplyScalar(Y*N),r.hemi[R]=oe,R++}}T>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Qe.LTC_FLOAT_1,r.rectAreaLTC2=Qe.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Qe.LTC_HALF_1,r.rectAreaLTC2=Qe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=_,r.ambient[1]=y,r.ambient[2]=w;const I=r.hash;(I.directionalLength!==b||I.pointLength!==C||I.spotLength!==S||I.rectAreaLength!==T||I.hemiLength!==R||I.numDirectionalShadows!==F||I.numPointShadows!==k||I.numSpotShadows!==z)&&(r.directional.length=b,r.spot.length=S,r.rectArea.length=T,r.point.length=C,r.hemi.length=R,r.directionalShadow.length=F,r.directionalShadowMap.length=F,r.pointShadow.length=k,r.pointShadowMap.length=k,r.spotShadow.length=z,r.spotShadowMap.length=z,r.directionalShadowMatrix.length=F,r.pointShadowMatrix.length=k,r.spotShadowMatrix.length=z,I.directionalLength=b,I.pointLength=C,I.spotLength=S,I.rectAreaLength=T,I.hemiLength=R,I.numDirectionalShadows=F,I.numPointShadows=k,I.numSpotShadows=z,r.version=KB++)}function d(p,g){let _=0,y=0,w=0,b=0,C=0;const S=g.matrixWorldInverse;for(let T=0,R=p.length;T<R;T++){const F=p[T];if(F.isDirectionalLight){const k=r.directional[_];k.direction.setFromMatrixPosition(F.matrixWorld),s.setFromMatrixPosition(F.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(S),_++}else if(F.isSpotLight){const k=r.spot[w];k.position.setFromMatrixPosition(F.matrixWorld),k.position.applyMatrix4(S),k.direction.setFromMatrixPosition(F.matrixWorld),s.setFromMatrixPosition(F.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(S),w++}else if(F.isRectAreaLight){const k=r.rectArea[b];k.position.setFromMatrixPosition(F.matrixWorld),k.position.applyMatrix4(S),u.identity(),o.copy(F.matrixWorld),o.premultiply(S),u.extractRotation(o),k.halfWidth.set(F.width*.5,0,0),k.halfHeight.set(0,F.height*.5,0),k.halfWidth.applyMatrix4(u),k.halfHeight.applyMatrix4(u),b++}else if(F.isPointLight){const k=r.point[y];k.position.setFromMatrixPosition(F.matrixWorld),k.position.applyMatrix4(S),y++}else if(F.isHemisphereLight){const k=r.hemi[C];k.direction.setFromMatrixPosition(F.matrixWorld),k.direction.transformDirection(S),k.direction.normalize(),C++}}}return{setup:h,setupView:d,state:r}}function MS(n,e){const t=new QB(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(g){i.push(g)}function u(g){r.push(g)}function h(g){t.setup(i,g)}function d(g){t.setupView(i,g)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:h,setupLightsView:d,pushLight:o,pushShadow:u}}function e4(n,e){let t=new WeakMap;function i(s,o=0){let u;return t.has(s)===!1?(u=new MS(n,e),t.set(s,[u])):o>=t.get(s).length?(u=new MS(n,e),t.get(s).push(u)):u=t.get(s)[o],u}function r(){t=new WeakMap}return{get:i,dispose:r}}class rT extends _i{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=hN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}rT.prototype.isMeshDepthMaterial=!0;class sT extends _i{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ie,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}sT.prototype.isMeshDistanceMaterial=!0;var t4=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
uniform float samples;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,n4=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function oT(n,e,t){let i=new pm;const r=new Ze,s=new Ze,o=new Qt,u=new rT({depthPacking:dN}),h=new sT,d={},p=t.maxTextureSize,g={0:On,1:Wh,2:tl},_=new nl({uniforms:{shadow_pass:{value:null},resolution:{value:new Ze},radius:{value:4},samples:{value:8}},vertexShader:n4,fragmentShader:t4}),y=_.clone();y.defines.HORIZONTAL_PASS=1;const w=new en;w.setAttribute("position",new Fn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Ci(w,_),C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=AE,this.render=function(F,k,z){if(C.enabled===!1||C.autoUpdate===!1&&C.needsUpdate===!1||F.length===0)return;const N=n.getRenderTarget(),I=n.getActiveCubeFace(),W=n.getActiveMipmapLevel(),j=n.state;j.setBlending(Jo),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);for(let U=0,K=F.length;U<K;U++){const Y=F[U],Q=Y.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;r.copy(Q.mapSize);const ne=Q.getFrameExtents();if(r.multiply(ne),s.copy(Q.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/ne.x),r.x=s.x*ne.x,Q.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/ne.y),r.y=s.y*ne.y,Q.mapSize.y=s.y)),Q.map===null&&!Q.isPointLightShadow&&this.type===yh){const ae={minFilter:kr,magFilter:kr,format:cr};Q.map=new Ts(r.x,r.y,ae),Q.map.texture.name=Y.name+".shadowMap",Q.mapPass=new Ts(r.x,r.y,ae),Q.camera.updateProjectionMatrix()}if(Q.map===null){const ae={minFilter:$n,magFilter:$n,format:cr};Q.map=new Ts(r.x,r.y,ae),Q.map.texture.name=Y.name+".shadowMap",Q.camera.updateProjectionMatrix()}n.setRenderTarget(Q.map),n.clear();const oe=Q.getViewportCount();for(let ae=0;ae<oe;ae++){const ee=Q.getViewport(ae);o.set(s.x*ee.x,s.y*ee.y,s.x*ee.z,s.y*ee.w),j.viewport(o),Q.updateMatrices(Y,ae),i=Q.getFrustum(),R(k,z,Q.camera,Y,this.type)}!Q.isPointLightShadow&&this.type===yh&&S(Q,z),Q.needsUpdate=!1}C.needsUpdate=!1,n.setRenderTarget(N,I,W)};function S(F,k){const z=e.update(b);_.uniforms.shadow_pass.value=F.map.texture,_.uniforms.resolution.value=F.mapSize,_.uniforms.radius.value=F.radius,_.uniforms.samples.value=F.blurSamples,n.setRenderTarget(F.mapPass),n.clear(),n.renderBufferDirect(k,null,z,_,b,null),y.uniforms.shadow_pass.value=F.mapPass.texture,y.uniforms.resolution.value=F.mapSize,y.uniforms.radius.value=F.radius,y.uniforms.samples.value=F.blurSamples,n.setRenderTarget(F.map),n.clear(),n.renderBufferDirect(k,null,z,y,b,null)}function T(F,k,z,N,I,W,j){let U=null;const K=N.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(K!==void 0?U=K:U=N.isPointLight===!0?h:u,n.localClippingEnabled&&z.clipShadows===!0&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0){const Y=U.uuid,Q=z.uuid;let ne=d[Y];ne===void 0&&(ne={},d[Y]=ne);let oe=ne[Q];oe===void 0&&(oe=U.clone(),ne[Q]=oe),U=oe}return U.visible=z.visible,U.wireframe=z.wireframe,j===yh?U.side=z.shadowSide!==null?z.shadowSide:z.side:U.side=z.shadowSide!==null?z.shadowSide:g[z.side],U.alphaMap=z.alphaMap,U.alphaTest=z.alphaTest,U.clipShadows=z.clipShadows,U.clippingPlanes=z.clippingPlanes,U.clipIntersection=z.clipIntersection,U.displacementMap=z.displacementMap,U.displacementScale=z.displacementScale,U.displacementBias=z.displacementBias,U.wireframeLinewidth=z.wireframeLinewidth,U.linewidth=z.linewidth,N.isPointLight===!0&&U.isMeshDistanceMaterial===!0&&(U.referencePosition.setFromMatrixPosition(N.matrixWorld),U.nearDistance=I,U.farDistance=W),U}function R(F,k,z,N,I){if(F.visible===!1)return;if(F.layers.test(k.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&I===yh)&&(!F.frustumCulled||i.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,F.matrixWorld);const U=e.update(F),K=F.material;if(Array.isArray(K)){const Y=U.groups;for(let Q=0,ne=Y.length;Q<ne;Q++){const oe=Y[Q],ae=K[oe.materialIndex];if(ae&&ae.visible){const ee=T(F,U,ae,N,z.near,z.far,I);n.renderBufferDirect(z,null,U,ee,F,oe)}}}else if(K.visible){const Y=T(F,U,K,N,z.near,z.far,I);n.renderBufferDirect(z,null,U,Y,F,null)}}const j=F.children;for(let U=0,K=j.length;U<K;U++)R(j[U],k,z,N,I)}}function i4(n,e,t){const i=t.isWebGL2;function r(){let q=!1;const Le=new Qt;let Se=null;const Fe=new Qt(0,0,0,0);return{setMask:function(Xe){Se!==Xe&&!q&&(n.colorMask(Xe,Xe,Xe,Xe),Se=Xe)},setLocked:function(Xe){q=Xe},setClear:function(Xe,ut,At,Ot,gn){gn===!0&&(Xe*=Ot,ut*=Ot,At*=Ot),Le.set(Xe,ut,At,Ot),Fe.equals(Le)===!1&&(n.clearColor(Xe,ut,At,Ot),Fe.copy(Le))},reset:function(){q=!1,Se=null,Fe.set(-1,0,0,0)}}}function s(){let q=!1,Le=null,Se=null,Fe=null;return{setTest:function(Xe){Xe?fe(2929):ve(2929)},setMask:function(Xe){Le!==Xe&&!q&&(n.depthMask(Xe),Le=Xe)},setFunc:function(Xe){if(Se!==Xe){if(Xe)switch(Xe){case Q3:n.depthFunc(512);break;case eD:n.depthFunc(519);break;case tD:n.depthFunc(513);break;case Ay:n.depthFunc(515);break;case nD:n.depthFunc(514);break;case iD:n.depthFunc(518);break;case rD:n.depthFunc(516);break;case sD:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);Se=Xe}},setLocked:function(Xe){q=Xe},setClear:function(Xe){Fe!==Xe&&(n.clearDepth(Xe),Fe=Xe)},reset:function(){q=!1,Le=null,Se=null,Fe=null}}}function o(){let q=!1,Le=null,Se=null,Fe=null,Xe=null,ut=null,At=null,Ot=null,gn=null;return{setTest:function(le){q||(le?fe(2960):ve(2960))},setMask:function(le){Le!==le&&!q&&(n.stencilMask(le),Le=le)},setFunc:function(le,Be,tt){(Se!==le||Fe!==Be||Xe!==tt)&&(n.stencilFunc(le,Be,tt),Se=le,Fe=Be,Xe=tt)},setOp:function(le,Be,tt){(ut!==le||At!==Be||Ot!==tt)&&(n.stencilOp(le,Be,tt),ut=le,At=Be,Ot=tt)},setLocked:function(le){q=le},setClear:function(le){gn!==le&&(n.clearStencil(le),gn=le)},reset:function(){q=!1,Le=null,Se=null,Fe=null,Xe=null,ut=null,At=null,Ot=null,gn=null}}}const u=new r,h=new s,d=new o;let p={},g=null,_={},y=null,w=!1,b=null,C=null,S=null,T=null,R=null,F=null,k=null,z=!1,N=null,I=null,W=null,j=null,U=null;const K=n.getParameter(35661);let Y=!1,Q=0;const ne=n.getParameter(7938);ne.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(ne)[1]),Y=Q>=1):ne.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),Y=Q>=2);let oe=null,ae={};const ee=n.getParameter(3088),pe=n.getParameter(2978),O=new Qt().fromArray(ee),G=new Qt().fromArray(pe);function se(q,Le,Se){const Fe=new Uint8Array(4),Xe=n.createTexture();n.bindTexture(q,Xe),n.texParameteri(q,10241,9728),n.texParameteri(q,10240,9728);for(let ut=0;ut<Se;ut++)n.texImage2D(Le+ut,0,6408,1,1,0,6408,5121,Fe);return Xe}const D={};D[3553]=se(3553,3553,1),D[34067]=se(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),d.setClear(0),fe(2929),h.setFunc(Ay),Re(!1),De(Cb),fe(2884),We(Jo);function fe(q){p[q]!==!0&&(n.enable(q),p[q]=!0)}function ve(q){p[q]!==!1&&(n.disable(q),p[q]=!1)}function te(q){q!==g&&(n.bindFramebuffer(36160,q),g=q)}function Ne(q,Le){return Le===null&&g!==null&&(Le=g),_[q]!==Le?(n.bindFramebuffer(q,Le),_[q]=Le,i&&(q===36009&&(_[36160]=Le),q===36160&&(_[36009]=Le)),!0):!1}function Pe(q){return y!==q?(n.useProgram(q),y=q,!0):!1}const ke={[xu]:32774,[V3]:32778,[W3]:32779};if(i)ke[Rb]=32775,ke[Ib]=32776;else{const q=e.get("EXT_blend_minmax");q!==null&&(ke[Rb]=q.MIN_EXT,ke[Ib]=q.MAX_EXT)}const ze={[j3]:0,[G3]:1,[$3]:768,[RE]:770,[J3]:776,[Y3]:774,[q3]:772,[Z3]:769,[IE]:771,[K3]:775,[X3]:773};function We(q,Le,Se,Fe,Xe,ut,At,Ot){if(q===Jo){w===!0&&(ve(3042),w=!1);return}if(w===!1&&(fe(3042),w=!0),q!==H3){if(q!==b||Ot!==z){if((C!==xu||R!==xu)&&(n.blendEquation(32774),C=xu,R=xu),Ot)switch(q){case Lh:n.blendFuncSeparate(1,771,1,771);break;case Pb:n.blendFunc(1,1);break;case Ab:n.blendFuncSeparate(0,0,769,771);break;case kb:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case Lh:n.blendFuncSeparate(770,771,1,771);break;case Pb:n.blendFunc(770,1);break;case Ab:n.blendFunc(0,769);break;case kb:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}S=null,T=null,F=null,k=null,b=q,z=Ot}return}Xe=Xe||Le,ut=ut||Se,At=At||Fe,(Le!==C||Xe!==R)&&(n.blendEquationSeparate(ke[Le],ke[Xe]),C=Le,R=Xe),(Se!==S||Fe!==T||ut!==F||At!==k)&&(n.blendFuncSeparate(ze[Se],ze[Fe],ze[ut],ze[At]),S=Se,T=Fe,F=ut,k=At),b=q,z=null}function be(q,Le){q.side===tl?ve(2884):fe(2884);let Se=q.side===On;Le&&(Se=!Se),Re(Se),q.blending===Lh&&q.transparent===!1?We(Jo):We(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.premultipliedAlpha),h.setFunc(q.depthFunc),h.setTest(q.depthTest),h.setMask(q.depthWrite),u.setMask(q.colorWrite);const Fe=q.stencilWrite;d.setTest(Fe),Fe&&(d.setMask(q.stencilWriteMask),d.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),d.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),Ie(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?fe(32926):ve(32926)}function Re(q){N!==q&&(q?n.frontFace(2304):n.frontFace(2305),N=q)}function De(q){q!==F3?(fe(2884),q!==I&&(q===Cb?n.cullFace(1029):q===B3?n.cullFace(1028):n.cullFace(1032))):ve(2884),I=q}function je(q){q!==W&&(Y&&n.lineWidth(q),W=q)}function Ie(q,Le,Se){q?(fe(32823),(j!==Le||U!==Se)&&(n.polygonOffset(Le,Se),j=Le,U=Se)):ve(32823)}function X(q){q?fe(3089):ve(3089)}function $(q){q===void 0&&(q=33984+K-1),oe!==q&&(n.activeTexture(q),oe=q)}function we(q,Le){oe===null&&$();let Se=ae[oe];Se===void 0&&(Se={type:void 0,texture:void 0},ae[oe]=Se),(Se.type!==q||Se.texture!==Le)&&(n.bindTexture(q,Le||D[q]),Se.type=q,Se.texture=Le)}function Ae(){const q=ae[oe];q!==void 0&&q.type!==void 0&&(n.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function $e(){try{n.compressedTexImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ke(){try{n.texImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function rt(){try{n.texImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Je(q){O.equals(q)===!1&&(n.scissor(q.x,q.y,q.z,q.w),O.copy(q))}function st(q){G.equals(q)===!1&&(n.viewport(q.x,q.y,q.z,q.w),G.copy(q))}function he(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},oe=null,ae={},g=null,_={},y=null,w=!1,b=null,C=null,S=null,T=null,R=null,F=null,k=null,z=!1,N=null,I=null,W=null,j=null,U=null,O.set(0,0,n.canvas.width,n.canvas.height),G.set(0,0,n.canvas.width,n.canvas.height),u.reset(),h.reset(),d.reset()}return{buffers:{color:u,depth:h,stencil:d},enable:fe,disable:ve,bindFramebuffer:Ne,bindXRFramebuffer:te,useProgram:Pe,setBlending:We,setMaterial:be,setFlipSided:Re,setCullFace:De,setLineWidth:je,setPolygonOffset:Ie,setScissorTest:X,activeTexture:$,bindTexture:we,unbindTexture:Ae,compressedTexImage2D:$e,texImage2D:Ke,texImage3D:rt,scissor:Je,viewport:st,reset:he}}function r4(n,e,t,i,r,s,o){const u=r.isWebGL2,h=r.maxTextures,d=r.maxCubemapSize,p=r.maxTextureSize,g=r.maxSamples,_=new WeakMap;let y,w=!1;try{w=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(X,$){return w?new OffscreenCanvas(X,$):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function C(X,$,we,Ae){let $e=1;if((X.width>Ae||X.height>Ae)&&($e=Ae/Math.max(X.width,X.height)),$e<1||$===!0)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){const Ke=$?BE:Math.floor,rt=Ke($e*X.width),Je=Ke($e*X.height);y===void 0&&(y=b(rt,Je));const st=we?b(rt,Je):y;return st.width=rt,st.height=Je,st.getContext("2d").drawImage(X,0,0,rt,Je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X.width+"x"+X.height+") to ("+rt+"x"+Je+")."),st}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X.width+"x"+X.height+")."),X;return X}function S(X){return Ny(X.width)&&Ny(X.height)}function T(X){return u?!1:X.wrapS!==lr||X.wrapT!==lr||X.minFilter!==$n&&X.minFilter!==kr}function R(X,$){return X.generateMipmaps&&$&&X.minFilter!==$n&&X.minFilter!==kr}function F(X,$,we,Ae,$e=1){n.generateMipmap(X);const Ke=i.get($);Ke.__maxMipLevel=Math.log2(Math.max(we,Ae,$e))}function k(X,$,we){if(u===!1)return $;if(X!==null){if(n[X]!==void 0)return n[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Ae=$;return $===6403&&(we===5126&&(Ae=33326),we===5131&&(Ae=33325),we===5121&&(Ae=33321)),$===6407&&(we===5126&&(Ae=34837),we===5131&&(Ae=34843),we===5121&&(Ae=32849)),$===6408&&(we===5126&&(Ae=34836),we===5131&&(Ae=34842),we===5121&&(Ae=32856)),(Ae===33325||Ae===33326||Ae===34842||Ae===34836)&&e.get("EXT_color_buffer_float"),Ae}function z(X){return X===$n||X===Db||X===Nb?9728:9729}function N(X){const $=X.target;$.removeEventListener("dispose",N),W($),$.isVideoTexture&&_.delete($),o.memory.textures--}function I(X){const $=X.target;$.removeEventListener("dispose",I),j($)}function W(X){const $=i.get(X);$.__webglInit!==void 0&&(n.deleteTexture($.__webglTexture),i.remove(X))}function j(X){const $=X.texture,we=i.get(X),Ae=i.get($);if(X){if(Ae.__webglTexture!==void 0&&(n.deleteTexture(Ae.__webglTexture),o.memory.textures--),X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let $e=0;$e<6;$e++)n.deleteFramebuffer(we.__webglFramebuffer[$e]),we.__webglDepthbuffer&&n.deleteRenderbuffer(we.__webglDepthbuffer[$e]);else n.deleteFramebuffer(we.__webglFramebuffer),we.__webglDepthbuffer&&n.deleteRenderbuffer(we.__webglDepthbuffer),we.__webglMultisampledFramebuffer&&n.deleteFramebuffer(we.__webglMultisampledFramebuffer),we.__webglColorRenderbuffer&&n.deleteRenderbuffer(we.__webglColorRenderbuffer),we.__webglDepthRenderbuffer&&n.deleteRenderbuffer(we.__webglDepthRenderbuffer);if(X.isWebGLMultipleRenderTargets)for(let $e=0,Ke=$.length;$e<Ke;$e++){const rt=i.get($[$e]);rt.__webglTexture&&(n.deleteTexture(rt.__webglTexture),o.memory.textures--),i.remove($[$e])}i.remove($),i.remove(X)}}let U=0;function K(){U=0}function Y(){const X=U;return X>=h&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+h),U+=1,X}function Q(X,$){const we=i.get(X);if(X.isVideoTexture&&be(X),X.version>0&&we.__version!==X.version){const Ae=X.image;if(Ae===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{se(we,X,$);return}}t.activeTexture(33984+$),t.bindTexture(3553,we.__webglTexture)}function ne(X,$){const we=i.get(X);if(X.version>0&&we.__version!==X.version){se(we,X,$);return}t.activeTexture(33984+$),t.bindTexture(35866,we.__webglTexture)}function oe(X,$){const we=i.get(X);if(X.version>0&&we.__version!==X.version){se(we,X,$);return}t.activeTexture(33984+$),t.bindTexture(32879,we.__webglTexture)}function ae(X,$){const we=i.get(X);if(X.version>0&&we.__version!==X.version){D(we,X,$);return}t.activeTexture(33984+$),t.bindTexture(34067,we.__webglTexture)}const ee={[Iy]:10497,[lr]:33071,[Dy]:33648},pe={[$n]:9728,[Db]:9984,[Nb]:9986,[kr]:9729,[fD]:9985,[hm]:9987};function O(X,$,we){if(we?(n.texParameteri(X,10242,ee[$.wrapS]),n.texParameteri(X,10243,ee[$.wrapT]),(X===32879||X===35866)&&n.texParameteri(X,32882,ee[$.wrapR]),n.texParameteri(X,10240,pe[$.magFilter]),n.texParameteri(X,10241,pe[$.minFilter])):(n.texParameteri(X,10242,33071),n.texParameteri(X,10243,33071),(X===32879||X===35866)&&n.texParameteri(X,32882,33071),($.wrapS!==lr||$.wrapT!==lr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(X,10240,z($.magFilter)),n.texParameteri(X,10241,z($.minFilter)),$.minFilter!==$n&&$.minFilter!==kr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ae=e.get("EXT_texture_filter_anisotropic");if($.type===Wa&&e.has("OES_texture_float_linear")===!1||u===!1&&$.type===Lu&&e.has("OES_texture_half_float_linear")===!1)return;($.anisotropy>1||i.get($).__currentAnisotropy)&&(n.texParameterf(X,Ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($.anisotropy,r.getMaxAnisotropy())),i.get($).__currentAnisotropy=$.anisotropy)}}function G(X,$){X.__webglInit===void 0&&(X.__webglInit=!0,$.addEventListener("dispose",N),X.__webglTexture=n.createTexture(),o.memory.textures++)}function se(X,$,we){let Ae=3553;$.isDataTexture2DArray&&(Ae=35866),$.isDataTexture3D&&(Ae=32879),G(X,$),t.activeTexture(33984+we),t.bindTexture(Ae,X.__webglTexture),n.pixelStorei(37440,$.flipY),n.pixelStorei(37441,$.premultiplyAlpha),n.pixelStorei(3317,$.unpackAlignment),n.pixelStorei(37443,0);const $e=T($)&&S($.image)===!1,Ke=C($.image,$e,!1,p),rt=S(Ke)||u,Je=s.convert($.format);let st=s.convert($.type),he=k($.internalFormat,Je,st);O(Ae,$,rt);let q;const Le=$.mipmaps;if($.isDepthTexture)he=6402,u?$.type===Wa?he=36012:$.type===Mp?he=33190:$.type===Ch?he=35056:he=33189:$.type===Wa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),$.format===Cu&&he===6402&&$.type!==zp&&$.type!==Mp&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),$.type=zp,st=s.convert($.type)),$.format===jh&&he===6402&&(he=34041,$.type!==Ch&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),$.type=Ch,st=s.convert($.type))),t.texImage2D(3553,0,he,Ke.width,Ke.height,0,Je,st,null);else if($.isDataTexture)if(Le.length>0&&rt){for(let Se=0,Fe=Le.length;Se<Fe;Se++)q=Le[Se],t.texImage2D(3553,Se,he,q.width,q.height,0,Je,st,q.data);$.generateMipmaps=!1,X.__maxMipLevel=Le.length-1}else t.texImage2D(3553,0,he,Ke.width,Ke.height,0,Je,st,Ke.data),X.__maxMipLevel=0;else if($.isCompressedTexture){for(let Se=0,Fe=Le.length;Se<Fe;Se++)q=Le[Se],$.format!==cr&&$.format!==Qo?Je!==null?t.compressedTexImage2D(3553,Se,he,q.width,q.height,0,q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,Se,he,q.width,q.height,0,Je,st,q.data);X.__maxMipLevel=Le.length-1}else if($.isDataTexture2DArray)t.texImage3D(35866,0,he,Ke.width,Ke.height,Ke.depth,0,Je,st,Ke.data),X.__maxMipLevel=0;else if($.isDataTexture3D)t.texImage3D(32879,0,he,Ke.width,Ke.height,Ke.depth,0,Je,st,Ke.data),X.__maxMipLevel=0;else if(Le.length>0&&rt){for(let Se=0,Fe=Le.length;Se<Fe;Se++)q=Le[Se],t.texImage2D(3553,Se,he,Je,st,q);$.generateMipmaps=!1,X.__maxMipLevel=Le.length-1}else t.texImage2D(3553,0,he,Je,st,Ke),X.__maxMipLevel=0;R($,rt)&&F(Ae,$,Ke.width,Ke.height),X.__version=$.version,$.onUpdate&&$.onUpdate($)}function D(X,$,we){if($.image.length!==6)return;G(X,$),t.activeTexture(33984+we),t.bindTexture(34067,X.__webglTexture),n.pixelStorei(37440,$.flipY),n.pixelStorei(37441,$.premultiplyAlpha),n.pixelStorei(3317,$.unpackAlignment),n.pixelStorei(37443,0);const Ae=$&&($.isCompressedTexture||$.image[0].isCompressedTexture),$e=$.image[0]&&$.image[0].isDataTexture,Ke=[];for(let Se=0;Se<6;Se++)!Ae&&!$e?Ke[Se]=C($.image[Se],!1,!0,d):Ke[Se]=$e?$.image[Se].image:$.image[Se];const rt=Ke[0],Je=S(rt)||u,st=s.convert($.format),he=s.convert($.type),q=k($.internalFormat,st,he);O(34067,$,Je);let Le;if(Ae){for(let Se=0;Se<6;Se++){Le=Ke[Se].mipmaps;for(let Fe=0;Fe<Le.length;Fe++){const Xe=Le[Fe];$.format!==cr&&$.format!==Qo?st!==null?t.compressedTexImage2D(34069+Se,Fe,q,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+Se,Fe,q,Xe.width,Xe.height,0,st,he,Xe.data)}}X.__maxMipLevel=Le.length-1}else{Le=$.mipmaps;for(let Se=0;Se<6;Se++)if($e){t.texImage2D(34069+Se,0,q,Ke[Se].width,Ke[Se].height,0,st,he,Ke[Se].data);for(let Fe=0;Fe<Le.length;Fe++){const ut=Le[Fe].image[Se].image;t.texImage2D(34069+Se,Fe+1,q,ut.width,ut.height,0,st,he,ut.data)}}else{t.texImage2D(34069+Se,0,q,st,he,Ke[Se]);for(let Fe=0;Fe<Le.length;Fe++){const Xe=Le[Fe];t.texImage2D(34069+Se,Fe+1,q,st,he,Xe.image[Se])}}X.__maxMipLevel=Le.length}R($,Je)&&F(34067,$,rt.width,rt.height),X.__version=$.version,$.onUpdate&&$.onUpdate($)}function fe(X,$,we,Ae,$e){const Ke=s.convert(we.format),rt=s.convert(we.type),Je=k(we.internalFormat,Ke,rt);$e===32879||$e===35866?t.texImage3D($e,0,Je,$.width,$.height,$.depth,0,Ke,rt,null):t.texImage2D($e,0,Je,$.width,$.height,0,Ke,rt,null),t.bindFramebuffer(36160,X),n.framebufferTexture2D(36160,Ae,$e,i.get(we).__webglTexture,0),t.bindFramebuffer(36160,null)}function ve(X,$,we){if(n.bindRenderbuffer(36161,X),$.depthBuffer&&!$.stencilBuffer){let Ae=33189;if(we){const $e=$.depthTexture;$e&&$e.isDepthTexture&&($e.type===Wa?Ae=36012:$e.type===Mp&&(Ae=33190));const Ke=We($);n.renderbufferStorageMultisample(36161,Ke,Ae,$.width,$.height)}else n.renderbufferStorage(36161,Ae,$.width,$.height);n.framebufferRenderbuffer(36160,36096,36161,X)}else if($.depthBuffer&&$.stencilBuffer){if(we){const Ae=We($);n.renderbufferStorageMultisample(36161,Ae,35056,$.width,$.height)}else n.renderbufferStorage(36161,34041,$.width,$.height);n.framebufferRenderbuffer(36160,33306,36161,X)}else{const Ae=$.isWebGLMultipleRenderTargets===!0?$.texture[0]:$.texture,$e=s.convert(Ae.format),Ke=s.convert(Ae.type),rt=k(Ae.internalFormat,$e,Ke);if(we){const Je=We($);n.renderbufferStorageMultisample(36161,Je,rt,$.width,$.height)}else n.renderbufferStorage(36161,rt,$.width,$.height)}n.bindRenderbuffer(36161,null)}function te(X,$){if($&&$.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,X),!($.depthTexture&&$.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get($.depthTexture).__webglTexture||$.depthTexture.image.width!==$.width||$.depthTexture.image.height!==$.height)&&($.depthTexture.image.width=$.width,$.depthTexture.image.height=$.height,$.depthTexture.needsUpdate=!0),Q($.depthTexture,0);const Ae=i.get($.depthTexture).__webglTexture;if($.depthTexture.format===Cu)n.framebufferTexture2D(36160,36096,3553,Ae,0);else if($.depthTexture.format===jh)n.framebufferTexture2D(36160,33306,3553,Ae,0);else throw new Error("Unknown depthTexture format")}function Ne(X){const $=i.get(X),we=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture){if(we)throw new Error("target.depthTexture not supported in Cube render targets");te($.__webglFramebuffer,X)}else if(we){$.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)t.bindFramebuffer(36160,$.__webglFramebuffer[Ae]),$.__webglDepthbuffer[Ae]=n.createRenderbuffer(),ve($.__webglDepthbuffer[Ae],X,!1)}else t.bindFramebuffer(36160,$.__webglFramebuffer),$.__webglDepthbuffer=n.createRenderbuffer(),ve($.__webglDepthbuffer,X,!1);t.bindFramebuffer(36160,null)}function Pe(X){const $=X.texture,we=i.get(X),Ae=i.get($);X.addEventListener("dispose",I),X.isWebGLMultipleRenderTargets!==!0&&(Ae.__webglTexture=n.createTexture(),Ae.__version=$.version,o.memory.textures++);const $e=X.isWebGLCubeRenderTarget===!0,Ke=X.isWebGLMultipleRenderTargets===!0,rt=X.isWebGLMultisampleRenderTarget===!0,Je=$.isDataTexture3D||$.isDataTexture2DArray,st=S(X)||u;if(u&&$.format===Qo&&($.type===Wa||$.type===Lu)&&($.format=cr,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),$e){we.__webglFramebuffer=[];for(let he=0;he<6;he++)we.__webglFramebuffer[he]=n.createFramebuffer()}else if(we.__webglFramebuffer=n.createFramebuffer(),Ke)if(r.drawBuffers){const he=X.texture;for(let q=0,Le=he.length;q<Le;q++){const Se=i.get(he[q]);Se.__webglTexture===void 0&&(Se.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(rt)if(u){we.__webglMultisampledFramebuffer=n.createFramebuffer(),we.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,we.__webglColorRenderbuffer);const he=s.convert($.format),q=s.convert($.type),Le=k($.internalFormat,he,q),Se=We(X);n.renderbufferStorageMultisample(36161,Se,Le,X.width,X.height),t.bindFramebuffer(36160,we.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,we.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),X.depthBuffer&&(we.__webglDepthRenderbuffer=n.createRenderbuffer(),ve(we.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if($e){t.bindTexture(34067,Ae.__webglTexture),O(34067,$,st);for(let he=0;he<6;he++)fe(we.__webglFramebuffer[he],X,$,36064,34069+he);R($,st)&&F(34067,$,X.width,X.height),t.unbindTexture()}else if(Ke){const he=X.texture;for(let q=0,Le=he.length;q<Le;q++){const Se=he[q],Fe=i.get(Se);t.bindTexture(3553,Fe.__webglTexture),O(3553,Se,st),fe(we.__webglFramebuffer,X,Se,36064+q,3553),R(Se,st)&&F(3553,Se,X.width,X.height)}t.unbindTexture()}else{let he=3553;Je&&(u?he=$.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(he,Ae.__webglTexture),O(he,$,st),fe(we.__webglFramebuffer,X,$,36064,he),R($,st)&&F(he,$,X.width,X.height,X.depth),t.unbindTexture()}X.depthBuffer&&Ne(X)}function ke(X){const $=S(X)||u,we=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let Ae=0,$e=we.length;Ae<$e;Ae++){const Ke=we[Ae];if(R(Ke,$)){const rt=X.isWebGLCubeRenderTarget?34067:3553,Je=i.get(Ke).__webglTexture;t.bindTexture(rt,Je),F(rt,Ke,X.width,X.height),t.unbindTexture()}}}function ze(X){if(X.isWebGLMultisampleRenderTarget)if(u){const $=X.width,we=X.height;let Ae=16384;X.depthBuffer&&(Ae|=256),X.stencilBuffer&&(Ae|=1024);const $e=i.get(X);t.bindFramebuffer(36008,$e.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,$e.__webglFramebuffer),n.blitFramebuffer(0,0,$,we,0,0,$,we,Ae,9728),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,$e.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function We(X){return u&&X.isWebGLMultisampleRenderTarget?Math.min(g,X.samples):0}function be(X){const $=o.render.frame;_.get(X)!==$&&(_.set(X,$),X.update())}let Re=!1,De=!1;function je(X,$){X&&X.isWebGLRenderTarget&&(Re===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Re=!0),X=X.texture),Q(X,$)}function Ie(X,$){X&&X.isWebGLCubeRenderTarget&&(De===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),De=!0),X=X.texture),ae(X,$)}this.allocateTextureUnit=Y,this.resetTextureUnits=K,this.setTexture2D=Q,this.setTexture2DArray=ne,this.setTexture3D=oe,this.setTextureCube=ae,this.setupRenderTarget=Pe,this.updateRenderTargetMipmap=ke,this.updateMultisampleRenderTarget=ze,this.safeSetTexture2D=je,this.safeSetTextureCube=Ie}function s4(n,e,t){const i=t.isWebGL2;function r(s){let o;if(s===Bu)return 5121;if(s===_D)return 32819;if(s===yD)return 32820;if(s===vD)return 33635;if(s===pD)return 5120;if(s===mD)return 5122;if(s===zp)return 5123;if(s===gD)return 5124;if(s===Mp)return 5125;if(s===Wa)return 5126;if(s===Lu)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===xD)return 6406;if(s===Qo)return 6407;if(s===cr)return 6408;if(s===wD)return 6409;if(s===bD)return 6410;if(s===Cu)return 6402;if(s===jh)return 34041;if(s===MD)return 6403;if(s===ED)return 36244;if(s===TD)return 33319;if(s===LD)return 33320;if(s===CD)return 36248;if(s===PD)return 36249;if(s===Ob||s===zb||s===Fb||s===Bb)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===Ob)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===zb)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Fb)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Bb)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Ub||s===Hb||s===Vb||s===Wb)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===Ub)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Hb)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Vb)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Wb)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===AD)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===jb||s===Gb)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===jb)return o.COMPRESSED_RGB8_ETC2;if(s===Gb)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===kD||s===RD||s===ID||s===DD||s===ND||s===OD||s===zD||s===FD||s===BD||s===UD||s===HD||s===VD||s===WD||s===jD||s===$D||s===ZD||s===qD||s===XD||s===YD||s===KD||s===JD||s===QD||s===eN||s===tN||s===nN||s===iN||s===rN||s===sN)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===GD)return o=e.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===Ch)return i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}class aT extends jn{constructor(e=[]){super(),this.cameras=e}}aT.prototype.isArrayCamera=!0;class xh extends $t{constructor(){super(),this.type="Group"}}xh.prototype.isGroup=!0;const o4={type:"move"};class U_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new xh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new xh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ie,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ie),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new xh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ie,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ie),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const u=this._targetRay,h=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(u!==null&&(r=t.getPose(e.targetRaySpace,i),r!==null&&(u.matrix.fromArray(r.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),r.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(r.linearVelocity)):u.hasLinearVelocity=!1,r.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(r.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(o4))),d&&e.hand){o=!0;for(const b of e.hand.values()){const C=t.getJointPose(b,i);if(d.joints[b.jointName]===void 0){const T=new xh;T.matrixAutoUpdate=!1,T.visible=!1,d.joints[b.jointName]=T,d.add(T)}const S=d.joints[b.jointName];C!==null&&(S.matrix.fromArray(C.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.jointRadius=C.radius),S.visible=C!==null}const p=d.joints["index-finger-tip"],g=d.joints["thumb-tip"],_=p.position.distanceTo(g.position),y=.02,w=.005;d.inputState.pinching&&_>y+w?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&_<=y-w&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1));return u!==null&&(u.visible=r!==null),h!==null&&(h.visible=s!==null),d!==null&&(d.visible=o!==null),this}}class a4 extends ol{constructor(e,t){super();const i=this,r=e.state;let s=null,o=1,u=null,h="local-floor",d=null,p=null,g=null,_=null,y=null,w=!1,b=null,C=null,S=null,T=null,R=null,F=null;const k=[],z=new Map,N=new jn;N.layers.enable(1),N.viewport=new Qt;const I=new jn;I.layers.enable(2),I.viewport=new Qt;const W=[N,I],j=new aT;j.layers.enable(1),j.layers.enable(2);let U=null,K=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(D){let fe=k[D];return fe===void 0&&(fe=new U_,k[D]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(D){let fe=k[D];return fe===void 0&&(fe=new U_,k[D]=fe),fe.getGripSpace()},this.getHand=function(D){let fe=k[D];return fe===void 0&&(fe=new U_,k[D]=fe),fe.getHandSpace()};function Y(D){const fe=z.get(D.inputSource);fe&&fe.dispatchEvent({type:D.type,data:D.inputSource})}function Q(){z.forEach(function(D,fe){D.disconnect(fe)}),z.clear(),U=null,K=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),g&&t.deleteFramebuffer(g),b&&t.deleteFramebuffer(b),C&&t.deleteRenderbuffer(C),S&&t.deleteRenderbuffer(S),g=null,b=null,C=null,S=null,y=null,_=null,p=null,s=null,se.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(D){o=D,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(D){h=D,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u},this.getBaseLayer=function(){return _!==null?_:y},this.getBinding=function(){return p},this.getFrame=function(){return T},this.getSession=function(){return s},this.setSession=async function(D){if(s=D,s!==null){s.addEventListener("select",Y),s.addEventListener("selectstart",Y),s.addEventListener("selectend",Y),s.addEventListener("squeeze",Y),s.addEventListener("squeezestart",Y),s.addEventListener("squeezeend",Y),s.addEventListener("end",Q),s.addEventListener("inputsourceschange",ne);const fe=t.getContextAttributes();if(fe.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0){const ve={antialias:fe.antialias,alpha:fe.alpha,depth:fe.depth,stencil:fe.stencil,framebufferScaleFactor:o};y=new XRWebGLLayer(s,t,ve),s.updateRenderState({baseLayer:y})}else if(t instanceof WebGLRenderingContext){const ve={antialias:!0,alpha:fe.alpha,depth:fe.depth,stencil:fe.stencil,framebufferScaleFactor:o};y=new XRWebGLLayer(s,t,ve),s.updateRenderState({layers:[y]})}else{w=fe.antialias;let ve=null;fe.depth&&(F=256,fe.stencil&&(F|=1024),R=fe.stencil?33306:36096,ve=fe.stencil?35056:33190);const te={colorFormat:fe.alpha?32856:32849,depthFormat:ve,scaleFactor:o};p=new XRWebGLBinding(s,t),_=p.createProjectionLayer(te),g=t.createFramebuffer(),s.updateRenderState({layers:[_]}),w&&(b=t.createFramebuffer(),C=t.createRenderbuffer(),t.bindRenderbuffer(36161,C),t.renderbufferStorageMultisample(36161,4,32856,_.textureWidth,_.textureHeight),r.bindFramebuffer(36160,b),t.framebufferRenderbuffer(36160,36064,36161,C),t.bindRenderbuffer(36161,null),ve!==null&&(S=t.createRenderbuffer(),t.bindRenderbuffer(36161,S),t.renderbufferStorageMultisample(36161,4,ve,_.textureWidth,_.textureHeight),t.framebufferRenderbuffer(36160,R,36161,S),t.bindRenderbuffer(36161,null)),r.bindFramebuffer(36160,null))}u=await s.requestReferenceSpace(h),se.setContext(s),se.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function ne(D){const fe=s.inputSources;for(let ve=0;ve<k.length;ve++)z.set(fe[ve],k[ve]);for(let ve=0;ve<D.removed.length;ve++){const te=D.removed[ve],Ne=z.get(te);Ne&&(Ne.dispatchEvent({type:"disconnected",data:te}),z.delete(te))}for(let ve=0;ve<D.added.length;ve++){const te=D.added[ve],Ne=z.get(te);Ne&&Ne.dispatchEvent({type:"connected",data:te})}}const oe=new ie,ae=new ie;function ee(D,fe,ve){oe.setFromMatrixPosition(fe.matrixWorld),ae.setFromMatrixPosition(ve.matrixWorld);const te=oe.distanceTo(ae),Ne=fe.projectionMatrix.elements,Pe=ve.projectionMatrix.elements,ke=Ne[14]/(Ne[10]-1),ze=Ne[14]/(Ne[10]+1),We=(Ne[9]+1)/Ne[5],be=(Ne[9]-1)/Ne[5],Re=(Ne[8]-1)/Ne[0],De=(Pe[8]+1)/Pe[0],je=ke*Re,Ie=ke*De,X=te/(-Re+De),$=X*-Re;fe.matrixWorld.decompose(D.position,D.quaternion,D.scale),D.translateX($),D.translateZ(X),D.matrixWorld.compose(D.position,D.quaternion,D.scale),D.matrixWorldInverse.copy(D.matrixWorld).invert();const we=ke+X,Ae=ze+X,$e=je-$,Ke=Ie+(te-$),rt=We*ze/Ae*we,Je=be*ze/Ae*we;D.projectionMatrix.makePerspective($e,Ke,rt,Je,we,Ae)}function pe(D,fe){fe===null?D.matrixWorld.copy(D.matrix):D.matrixWorld.multiplyMatrices(fe.matrixWorld,D.matrix),D.matrixWorldInverse.copy(D.matrixWorld).invert()}this.updateCamera=function(D){if(s===null)return;j.near=I.near=N.near=D.near,j.far=I.far=N.far=D.far,(U!==j.near||K!==j.far)&&(s.updateRenderState({depthNear:j.near,depthFar:j.far}),U=j.near,K=j.far);const fe=D.parent,ve=j.cameras;pe(j,fe);for(let Ne=0;Ne<ve.length;Ne++)pe(ve[Ne],fe);j.matrixWorld.decompose(j.position,j.quaternion,j.scale),D.position.copy(j.position),D.quaternion.copy(j.quaternion),D.scale.copy(j.scale),D.matrix.copy(j.matrix),D.matrixWorld.copy(j.matrixWorld);const te=D.children;for(let Ne=0,Pe=te.length;Ne<Pe;Ne++)te[Ne].updateMatrixWorld(!0);ve.length===2?ee(j,N,I):j.projectionMatrix.copy(N.projectionMatrix)},this.getCamera=function(){return j},this.getFoveation=function(){if(_!==null)return _.fixedFoveation;if(y!==null)return y.fixedFoveation},this.setFoveation=function(D){_!==null&&(_.fixedFoveation=D),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=D)};let O=null;function G(D,fe){if(d=fe.getViewerPose(u),T=fe,d!==null){const te=d.views;y!==null&&r.bindXRFramebuffer(y.framebuffer);let Ne=!1;te.length!==j.cameras.length&&(j.cameras.length=0,Ne=!0);for(let Pe=0;Pe<te.length;Pe++){const ke=te[Pe];let ze=null;if(y!==null)ze=y.getViewport(ke);else{const be=p.getViewSubImage(_,ke);r.bindXRFramebuffer(g),be.depthStencilTexture!==void 0&&t.framebufferTexture2D(36160,R,3553,be.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,be.colorTexture,0),ze=be.viewport}const We=W[Pe];We.matrix.fromArray(ke.transform.matrix),We.projectionMatrix.fromArray(ke.projectionMatrix),We.viewport.set(ze.x,ze.y,ze.width,ze.height),Pe===0&&j.matrix.copy(We.matrix),Ne===!0&&j.cameras.push(We)}w&&(r.bindXRFramebuffer(b),F!==null&&t.clear(F))}const ve=s.inputSources;for(let te=0;te<k.length;te++){const Ne=k[te],Pe=ve[te];Ne.update(Pe,fe,u)}if(O&&O(D,fe),w){const te=_.textureWidth,Ne=_.textureHeight;r.bindFramebuffer(36008,b),r.bindFramebuffer(36009,g),t.invalidateFramebuffer(36008,[R]),t.invalidateFramebuffer(36009,[R]),t.blitFramebuffer(0,0,te,Ne,0,0,te,Ne,16384,9728),t.invalidateFramebuffer(36008,[36064]),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),r.bindFramebuffer(36160,b)}T=null}const se=new $E;se.setAnimationLoop(G),this.setAnimationLoop=function(D){O=D},this.dispose=function(){}}}function l4(n){function e(S,T){S.fogColor.value.copy(T.color),T.isFog?(S.fogNear.value=T.near,S.fogFar.value=T.far):T.isFogExp2&&(S.fogDensity.value=T.density)}function t(S,T,R,F,k){T.isMeshBasicMaterial?i(S,T):T.isMeshLambertMaterial?(i(S,T),h(S,T)):T.isMeshToonMaterial?(i(S,T),p(S,T)):T.isMeshPhongMaterial?(i(S,T),d(S,T)):T.isMeshStandardMaterial?(i(S,T),T.isMeshPhysicalMaterial?_(S,T,k):g(S,T)):T.isMeshMatcapMaterial?(i(S,T),y(S,T)):T.isMeshDepthMaterial?(i(S,T),w(S,T)):T.isMeshDistanceMaterial?(i(S,T),b(S,T)):T.isMeshNormalMaterial?(i(S,T),C(S,T)):T.isLineBasicMaterial?(r(S,T),T.isLineDashedMaterial&&s(S,T)):T.isPointsMaterial?o(S,T,R,F):T.isSpriteMaterial?u(S,T):T.isShadowMaterial?(S.color.value.copy(T.color),S.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}function i(S,T){S.opacity.value=T.opacity,T.color&&S.diffuse.value.copy(T.color),T.emissive&&S.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(S.map.value=T.map),T.alphaMap&&(S.alphaMap.value=T.alphaMap),T.specularMap&&(S.specularMap.value=T.specularMap),T.alphaTest>0&&(S.alphaTest.value=T.alphaTest);const R=n.get(T).envMap;if(R){S.envMap.value=R,S.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=T.reflectivity,S.ior.value=T.ior,S.refractionRatio.value=T.refractionRatio;const z=n.get(R).__maxMipLevel;z!==void 0&&(S.maxMipLevel.value=z)}T.lightMap&&(S.lightMap.value=T.lightMap,S.lightMapIntensity.value=T.lightMapIntensity),T.aoMap&&(S.aoMap.value=T.aoMap,S.aoMapIntensity.value=T.aoMapIntensity);let F;T.map?F=T.map:T.specularMap?F=T.specularMap:T.displacementMap?F=T.displacementMap:T.normalMap?F=T.normalMap:T.bumpMap?F=T.bumpMap:T.roughnessMap?F=T.roughnessMap:T.metalnessMap?F=T.metalnessMap:T.alphaMap?F=T.alphaMap:T.emissiveMap?F=T.emissiveMap:T.clearcoatMap?F=T.clearcoatMap:T.clearcoatNormalMap?F=T.clearcoatNormalMap:T.clearcoatRoughnessMap?F=T.clearcoatRoughnessMap:T.specularIntensityMap?F=T.specularIntensityMap:T.specularTintMap?F=T.specularTintMap:T.transmissionMap?F=T.transmissionMap:T.thicknessMap&&(F=T.thicknessMap),F!==void 0&&(F.isWebGLRenderTarget&&(F=F.texture),F.matrixAutoUpdate===!0&&F.updateMatrix(),S.uvTransform.value.copy(F.matrix));let k;T.aoMap?k=T.aoMap:T.lightMap&&(k=T.lightMap),k!==void 0&&(k.isWebGLRenderTarget&&(k=k.texture),k.matrixAutoUpdate===!0&&k.updateMatrix(),S.uv2Transform.value.copy(k.matrix))}function r(S,T){S.diffuse.value.copy(T.color),S.opacity.value=T.opacity}function s(S,T){S.dashSize.value=T.dashSize,S.totalSize.value=T.dashSize+T.gapSize,S.scale.value=T.scale}function o(S,T,R,F){S.diffuse.value.copy(T.color),S.opacity.value=T.opacity,S.size.value=T.size*R,S.scale.value=F*.5,T.map&&(S.map.value=T.map),T.alphaMap&&(S.alphaMap.value=T.alphaMap),T.alphaTest>0&&(S.alphaTest.value=T.alphaTest);let k;T.map?k=T.map:T.alphaMap&&(k=T.alphaMap),k!==void 0&&(k.matrixAutoUpdate===!0&&k.updateMatrix(),S.uvTransform.value.copy(k.matrix))}function u(S,T){S.diffuse.value.copy(T.color),S.opacity.value=T.opacity,S.rotation.value=T.rotation,T.map&&(S.map.value=T.map),T.alphaMap&&(S.alphaMap.value=T.alphaMap),T.alphaTest>0&&(S.alphaTest.value=T.alphaTest);let R;T.map?R=T.map:T.alphaMap&&(R=T.alphaMap),R!==void 0&&(R.matrixAutoUpdate===!0&&R.updateMatrix(),S.uvTransform.value.copy(R.matrix))}function h(S,T){T.emissiveMap&&(S.emissiveMap.value=T.emissiveMap)}function d(S,T){S.specular.value.copy(T.specular),S.shininess.value=Math.max(T.shininess,1e-4),T.emissiveMap&&(S.emissiveMap.value=T.emissiveMap),T.bumpMap&&(S.bumpMap.value=T.bumpMap,S.bumpScale.value=T.bumpScale,T.side===On&&(S.bumpScale.value*=-1)),T.normalMap&&(S.normalMap.value=T.normalMap,S.normalScale.value.copy(T.normalScale),T.side===On&&S.normalScale.value.negate()),T.displacementMap&&(S.displacementMap.value=T.displacementMap,S.displacementScale.value=T.displacementScale,S.displacementBias.value=T.displacementBias)}function p(S,T){T.gradientMap&&(S.gradientMap.value=T.gradientMap),T.emissiveMap&&(S.emissiveMap.value=T.emissiveMap),T.bumpMap&&(S.bumpMap.value=T.bumpMap,S.bumpScale.value=T.bumpScale,T.side===On&&(S.bumpScale.value*=-1)),T.normalMap&&(S.normalMap.value=T.normalMap,S.normalScale.value.copy(T.normalScale),T.side===On&&S.normalScale.value.negate()),T.displacementMap&&(S.displacementMap.value=T.displacementMap,S.displacementScale.value=T.displacementScale,S.displacementBias.value=T.displacementBias)}function g(S,T){S.roughness.value=T.roughness,S.metalness.value=T.metalness,T.roughnessMap&&(S.roughnessMap.value=T.roughnessMap),T.metalnessMap&&(S.metalnessMap.value=T.metalnessMap),T.emissiveMap&&(S.emissiveMap.value=T.emissiveMap),T.bumpMap&&(S.bumpMap.value=T.bumpMap,S.bumpScale.value=T.bumpScale,T.side===On&&(S.bumpScale.value*=-1)),T.normalMap&&(S.normalMap.value=T.normalMap,S.normalScale.value.copy(T.normalScale),T.side===On&&S.normalScale.value.negate()),T.displacementMap&&(S.displacementMap.value=T.displacementMap,S.displacementScale.value=T.displacementScale,S.displacementBias.value=T.displacementBias),n.get(T).envMap&&(S.envMapIntensity.value=T.envMapIntensity)}function _(S,T,R){g(S,T),S.ior.value=T.ior,T.sheenTint&&S.sheenTint.value.copy(T.sheenTint),T.clearcoat>0&&(S.clearcoat.value=T.clearcoat,S.clearcoatRoughness.value=T.clearcoatRoughness,T.clearcoatMap&&(S.clearcoatMap.value=T.clearcoatMap),T.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=T.clearcoatRoughnessMap),T.clearcoatNormalMap&&(S.clearcoatNormalScale.value.copy(T.clearcoatNormalScale),S.clearcoatNormalMap.value=T.clearcoatNormalMap,T.side===On&&S.clearcoatNormalScale.value.negate())),T.transmission>0&&(S.transmission.value=T.transmission,S.transmissionSamplerMap.value=R.texture,S.transmissionSamplerSize.value.set(R.width,R.height),T.transmissionMap&&(S.transmissionMap.value=T.transmissionMap),S.thickness.value=T.thickness,T.thicknessMap&&(S.thicknessMap.value=T.thicknessMap),S.attenuationDistance.value=T.attenuationDistance,S.attenuationTint.value.copy(T.attenuationTint)),S.specularIntensity.value=T.specularIntensity,S.specularTint.value.copy(T.specularTint),T.specularIntensityMap&&(S.specularIntensityMap.value=T.specularIntensityMap),T.specularTintMap&&(S.specularTintMap.value=T.specularTintMap)}function y(S,T){T.matcap&&(S.matcap.value=T.matcap),T.bumpMap&&(S.bumpMap.value=T.bumpMap,S.bumpScale.value=T.bumpScale,T.side===On&&(S.bumpScale.value*=-1)),T.normalMap&&(S.normalMap.value=T.normalMap,S.normalScale.value.copy(T.normalScale),T.side===On&&S.normalScale.value.negate()),T.displacementMap&&(S.displacementMap.value=T.displacementMap,S.displacementScale.value=T.displacementScale,S.displacementBias.value=T.displacementBias)}function w(S,T){T.displacementMap&&(S.displacementMap.value=T.displacementMap,S.displacementScale.value=T.displacementScale,S.displacementBias.value=T.displacementBias)}function b(S,T){T.displacementMap&&(S.displacementMap.value=T.displacementMap,S.displacementScale.value=T.displacementScale,S.displacementBias.value=T.displacementBias),S.referencePosition.value.copy(T.referencePosition),S.nearDistance.value=T.nearDistance,S.farDistance.value=T.farDistance}function C(S,T){T.bumpMap&&(S.bumpMap.value=T.bumpMap,S.bumpScale.value=T.bumpScale,T.side===On&&(S.bumpScale.value*=-1)),T.normalMap&&(S.normalMap.value=T.normalMap,S.normalScale.value.copy(T.normalScale),T.side===On&&S.normalScale.value.negate()),T.displacementMap&&(S.displacementMap.value=T.displacementMap,S.displacementScale.value=T.displacementScale,S.displacementBias.value=T.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function u4(){const n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.style.display="block",n}function Kt(n={}){const e=n.canvas!==void 0?n.canvas:u4(),t=n.context!==void 0?n.context:null,i=n.alpha!==void 0?n.alpha:!1,r=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,u=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,h=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,d=n.powerPreference!==void 0?n.powerPreference:"default",p=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let g=null,_=null;const y=[],w=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=ji,this.physicallyCorrectLights=!1,this.toneMapping=Ka,this.toneMappingExposure=1;const b=this;let C=!1,S=0,T=0,R=null,F=-1,k=null;const z=new Qt,N=new Qt;let I=null,W=e.width,j=e.height,U=1,K=null,Y=null;const Q=new Qt(0,0,W,j),ne=new Qt(0,0,W,j);let oe=!1;const ae=[],ee=new pm;let pe=!1,O=!1,G=null;const se=new yt,D=new ie,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ve(){return R===null?U:1}let te=t;function Ne(Z,ce){for(let ge=0;ge<Z.length;ge++){const Ce=Z[ge],Ve=e.getContext(Ce,ce);if(Ve!==null)return Ve}return null}try{const Z={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:d,failIfMajorPerformanceCaveat:p};if(e.addEventListener("webglcontextlost",At,!1),e.addEventListener("webglcontextrestored",Ot,!1),te===null){const ce=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&ce.shift(),te=Ne(ce,Z),te===null)throw Ne(ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}te.getShaderPrecisionFormat===void 0&&(te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z}let Pe,ke,ze,We,be,Re,De,je,Ie,X,$,we,Ae,$e,Ke,rt,Je,st,he,q,Le,Se,Fe;function Xe(){Pe=new RF(te),ke=new MF(te,Pe,n),Pe.init(ke),Se=new s4(te,Pe,ke),ze=new i4(te,Pe,ke),ae[0]=1029,We=new NF,be=new $B,Re=new r4(te,Pe,ze,be,ke,Se,We),De=new TF(b),je=new kF(b),Ie=new qN(te,ke),Fe=new bF(te,Pe,Ie,ke),X=new IF(te,Ie,We,Fe),$=new BF(te,X,Ie,We),he=new FF(te),rt=new EF(be),we=new GB(b,De,je,Pe,ke,Fe,rt),Ae=new l4(be),$e=new qB(be),Ke=new e4(Pe,ke),st=new wF(b,De,ze,$,u),Je=new oT(b,$,ke),q=new SF(te,Pe,We,ke),Le=new DF(te,Pe,We,ke),We.programs=we.programs,b.capabilities=ke,b.extensions=Pe,b.properties=be,b.renderLists=$e,b.shadowMap=Je,b.state=ze,b.info=We}Xe();const ut=new a4(b,te);this.xr=ut,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const Z=Pe.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){const Z=Pe.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return U},this.setPixelRatio=function(Z){Z!==void 0&&(U=Z,this.setSize(W,j,!1))},this.getSize=function(Z){return Z.set(W,j)},this.setSize=function(Z,ce,ge){if(ut.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}W=Z,j=ce,e.width=Math.floor(Z*U),e.height=Math.floor(ce*U),ge!==!1&&(e.style.width=Z+"px",e.style.height=ce+"px"),this.setViewport(0,0,Z,ce)},this.getDrawingBufferSize=function(Z){return Z.set(W*U,j*U).floor()},this.setDrawingBufferSize=function(Z,ce,ge){W=Z,j=ce,U=ge,e.width=Math.floor(Z*ge),e.height=Math.floor(ce*ge),this.setViewport(0,0,Z,ce)},this.getCurrentViewport=function(Z){return Z.copy(z)},this.getViewport=function(Z){return Z.copy(Q)},this.setViewport=function(Z,ce,ge,Ce){Z.isVector4?Q.set(Z.x,Z.y,Z.z,Z.w):Q.set(Z,ce,ge,Ce),ze.viewport(z.copy(Q).multiplyScalar(U).floor())},this.getScissor=function(Z){return Z.copy(ne)},this.setScissor=function(Z,ce,ge,Ce){Z.isVector4?ne.set(Z.x,Z.y,Z.z,Z.w):ne.set(Z,ce,ge,Ce),ze.scissor(N.copy(ne).multiplyScalar(U).floor())},this.getScissorTest=function(){return oe},this.setScissorTest=function(Z){ze.setScissorTest(oe=Z)},this.setOpaqueSort=function(Z){K=Z},this.setTransparentSort=function(Z){Y=Z},this.getClearColor=function(Z){return Z.copy(st.getClearColor())},this.setClearColor=function(){st.setClearColor.apply(st,arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha.apply(st,arguments)},this.clear=function(Z,ce,ge){let Ce=0;(Z===void 0||Z)&&(Ce|=16384),(ce===void 0||ce)&&(Ce|=256),(ge===void 0||ge)&&(Ce|=1024),te.clear(Ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",At,!1),e.removeEventListener("webglcontextrestored",Ot,!1),$e.dispose(),Ke.dispose(),be.dispose(),De.dispose(),je.dispose(),$.dispose(),Fe.dispose(),ut.dispose(),ut.removeEventListener("sessionstart",bn),ut.removeEventListener("sessionend",En),G&&(G.dispose(),G=null),$i.stop()};function At(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function Ot(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const Z=We.autoReset,ce=Je.enabled,ge=Je.autoUpdate,Ce=Je.needsUpdate,Ve=Je.type;Xe(),We.autoReset=Z,Je.enabled=ce,Je.autoUpdate=ge,Je.needsUpdate=Ce,Je.type=Ve}function gn(Z){const ce=Z.target;ce.removeEventListener("dispose",gn),le(ce)}function le(Z){Be(Z),be.remove(Z)}function Be(Z){const ce=be.get(Z).programs;ce!==void 0&&ce.forEach(function(ge){we.releaseProgram(ge)})}function tt(Z,ce){Z.render(function(ge){b.renderBufferImmediate(ge,ce)})}this.renderBufferImmediate=function(Z,ce){Fe.initAttributes();const ge=be.get(Z);Z.hasPositions&&!ge.position&&(ge.position=te.createBuffer()),Z.hasNormals&&!ge.normal&&(ge.normal=te.createBuffer()),Z.hasUvs&&!ge.uv&&(ge.uv=te.createBuffer()),Z.hasColors&&!ge.color&&(ge.color=te.createBuffer());const Ce=ce.getAttributes();Z.hasPositions&&(te.bindBuffer(34962,ge.position),te.bufferData(34962,Z.positionArray,35048),Fe.enableAttribute(Ce.position.location),te.vertexAttribPointer(Ce.position.location,3,5126,!1,0,0)),Z.hasNormals&&(te.bindBuffer(34962,ge.normal),te.bufferData(34962,Z.normalArray,35048),Fe.enableAttribute(Ce.normal.location),te.vertexAttribPointer(Ce.normal.location,3,5126,!1,0,0)),Z.hasUvs&&(te.bindBuffer(34962,ge.uv),te.bufferData(34962,Z.uvArray,35048),Fe.enableAttribute(Ce.uv.location),te.vertexAttribPointer(Ce.uv.location,2,5126,!1,0,0)),Z.hasColors&&(te.bindBuffer(34962,ge.color),te.bufferData(34962,Z.colorArray,35048),Fe.enableAttribute(Ce.color.location),te.vertexAttribPointer(Ce.color.location,3,5126,!1,0,0)),Fe.disableUnusedAttributes(),te.drawArrays(4,0,Z.count),Z.count=0},this.renderBufferDirect=function(Z,ce,ge,Ce,Ve,St){ce===null&&(ce=fe);const dt=Ve.isMesh&&Ve.matrixWorld.determinant()<0,lt=so(Z,ce,Ce,Ve);ze.setMaterial(Ce,dt);let xt=ge.index;const zt=ge.attributes.position;if(xt===null){if(zt===void 0||zt.count===0)return}else if(xt.count===0)return;let kt=1;Ce.wireframe===!0&&(xt=X.getWireframeAttribute(ge),kt=2),(ge.morphAttributes.position!==void 0||ge.morphAttributes.normal!==void 0)&&he.update(Ve,ge,Ce,lt),Fe.setup(Ve,Ce,lt,ge,xt);let It,_t=q;xt!==null&&(It=Ie.get(xt),_t=Le,_t.setIndex(It));const hr=xt!==null?xt.count:zt.count,tn=ge.drawRange.start*kt,dr=ge.drawRange.count*kt,Bn=St!==null?St.start*kt:0,Vt=St!==null?St.count*kt:1/0,fr=Math.max(tn,Bn),dn=Math.min(hr,tn+dr,Bn+Vt)-1,wi=Math.max(0,dn-fr+1);if(wi!==0){if(Ve.isMesh)Ce.wireframe===!0?(ze.setLineWidth(Ce.wireframeLinewidth*ve()),_t.setMode(1)):_t.setMode(4);else if(Ve.isLine){let fn=Ce.linewidth;fn===void 0&&(fn=1),ze.setLineWidth(fn*ve()),Ve.isLineSegments?_t.setMode(1):Ve.isLineLoop?_t.setMode(2):_t.setMode(3)}else Ve.isPoints?_t.setMode(0):Ve.isSprite&&_t.setMode(4);if(Ve.isInstancedMesh)_t.renderInstances(fr,wi,Ve.count);else if(ge.isInstancedBufferGeometry){const fn=Math.min(ge.instanceCount,ge._maxInstanceCount);_t.renderInstances(fr,wi,fn)}else _t.render(fr,wi)}},this.compile=function(Z,ce){_=Ke.get(Z),_.init(),w.push(_),Z.traverseVisible(function(ge){ge.isLight&&ge.layers.test(ce.layers)&&(_.pushLight(ge),ge.castShadow&&_.pushShadow(ge))}),_.setupLights(b.physicallyCorrectLights),Z.traverse(function(ge){const Ce=ge.material;if(Ce)if(Array.isArray(Ce))for(let Ve=0;Ve<Ce.length;Ve++){const St=Ce[Ve];ni(St,Z,ge)}else ni(Ce,Z,ge)}),w.pop(),_=null};let Ct=null;function Jt(Z){Ct&&Ct(Z)}function bn(){$i.stop()}function En(){$i.start()}const $i=new $E;$i.setAnimationLoop(Jt),typeof window<"u"&&$i.setContext(window),this.setAnimationLoop=function(Z){Ct=Z,ut.setAnimationLoop(Z),Z===null?$i.stop():$i.start()},ut.addEventListener("sessionstart",bn),ut.addEventListener("sessionend",En),this.render=function(Z,ce){if(ce!==void 0&&ce.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;Z.autoUpdate===!0&&Z.updateMatrixWorld(),ce.parent===null&&ce.updateMatrixWorld(),ut.enabled===!0&&ut.isPresenting===!0&&(ut.cameraAutoUpdate===!0&&ut.updateCamera(ce),ce=ut.getCamera()),Z.isScene===!0&&Z.onBeforeRender(b,Z,ce,R),_=Ke.get(Z,w.length),_.init(),w.push(_),se.multiplyMatrices(ce.projectionMatrix,ce.matrixWorldInverse),ee.setFromProjectionMatrix(se),O=this.localClippingEnabled,pe=rt.init(this.clippingPlanes,O,ce),g=$e.get(Z,y.length),g.init(),y.push(g),ns(Z,ce,0,b.sortObjects),g.finish(),b.sortObjects===!0&&g.sort(K,Y),pe===!0&&rt.beginShadows();const ge=_.state.shadowsArray;if(Je.render(ge,Z,ce),pe===!0&&rt.endShadows(),this.info.autoReset===!0&&this.info.reset(),st.render(g,Z),_.setupLights(b.physicallyCorrectLights),ce.isArrayCamera){const Ce=ce.cameras;for(let Ve=0,St=Ce.length;Ve<St;Ve++){const dt=Ce[Ve];Xn(g,Z,dt,dt.viewport)}}else Xn(g,Z,ce);R!==null&&(Re.updateMultisampleRenderTarget(R),Re.updateRenderTargetMipmap(R)),Z.isScene===!0&&Z.onAfterRender(b,Z,ce),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1),Fe.resetDefaultState(),F=-1,k=null,w.pop(),w.length>0?_=w[w.length-1]:_=null,y.pop(),y.length>0?g=y[y.length-1]:g=null};function ns(Z,ce,ge,Ce){if(Z.visible===!1)return;if(Z.layers.test(ce.layers)){if(Z.isGroup)ge=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(ce);else if(Z.isLight)_.pushLight(Z),Z.castShadow&&_.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||ee.intersectsSprite(Z)){Ce&&D.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(se);const dt=$.update(Z),lt=Z.material;lt.visible&&g.push(Z,dt,lt,ge,D.z,null)}}else if(Z.isImmediateRenderObject)Ce&&D.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(se),g.push(Z,null,Z.material,ge,D.z,null);else if((Z.isMesh||Z.isLine||Z.isPoints)&&(Z.isSkinnedMesh&&Z.skeleton.frame!==We.render.frame&&(Z.skeleton.update(),Z.skeleton.frame=We.render.frame),!Z.frustumCulled||ee.intersectsObject(Z))){Ce&&D.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(se);const dt=$.update(Z),lt=Z.material;if(Array.isArray(lt)){const xt=dt.groups;for(let zt=0,kt=xt.length;zt<kt;zt++){const It=xt[zt],_t=lt[It.materialIndex];_t&&_t.visible&&g.push(Z,dt,_t,ge,D.z,It)}}else lt.visible&&g.push(Z,dt,lt,ge,D.z,null)}}const St=Z.children;for(let dt=0,lt=St.length;dt<lt;dt++)ns(St[dt],ce,ge,Ce)}function Xn(Z,ce,ge,Ce){const Ve=Z.opaque,St=Z.transmissive,dt=Z.transparent;_.setupLightsView(ge),St.length>0&&ti(Ve,ce,ge),Ce&&ze.viewport(z.copy(Ce)),Ve.length>0&&vi(Ve,ce,ge),St.length>0&&vi(St,ce,ge),dt.length>0&&vi(dt,ce,ge)}function ti(Z,ce,ge){if(G===null){const dt=o===!0&&ke.isWebGL2===!0?UE:Ts;G=new dt(1024,1024,{generateMipmaps:!0,type:Se.convert(Lu)!==null?Lu:Bu,minFilter:hm,magFilter:$n,wrapS:lr,wrapT:lr})}const Ce=b.getRenderTarget();b.setRenderTarget(G),b.clear();const Ve=b.toneMapping;b.toneMapping=Ka,vi(Z,ce,ge),b.toneMapping=Ve,Re.updateMultisampleRenderTarget(G),Re.updateRenderTargetMipmap(G),b.setRenderTarget(Ce)}function vi(Z,ce,ge){const Ce=ce.isScene===!0?ce.overrideMaterial:null;for(let Ve=0,St=Z.length;Ve<St;Ve++){const dt=Z[Ve],lt=dt.object,xt=dt.geometry,zt=Ce===null?dt.material:Ce,kt=dt.group;lt.layers.test(ge.layers)&&Zi(lt,ce,ge,xt,zt,kt)}}function Zi(Z,ce,ge,Ce,Ve,St){if(Z.onBeforeRender(b,ce,ge,Ce,Ve,St),Z.modelViewMatrix.multiplyMatrices(ge.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),Z.isImmediateRenderObject){const dt=so(ge,ce,Ve,Z);ze.setMaterial(Ve),Fe.reset(),tt(Z,dt)}else Ve.transparent===!0&&Ve.side===tl?(Ve.side=On,Ve.needsUpdate=!0,b.renderBufferDirect(ge,ce,Ce,Ve,Z,St),Ve.side=Wh,Ve.needsUpdate=!0,b.renderBufferDirect(ge,ce,Ce,Ve,Z,St),Ve.side=tl):b.renderBufferDirect(ge,ce,Ce,Ve,Z,St);Z.onAfterRender(b,ce,ge,Ce,Ve,St)}function ni(Z,ce,ge){ce.isScene!==!0&&(ce=fe);const Ce=be.get(Z),Ve=_.state.lights,St=_.state.shadowsArray,dt=Ve.state.version,lt=we.getParameters(Z,Ve.state,St,ce,ge),xt=we.getProgramCacheKey(lt);let zt=Ce.programs;Ce.environment=Z.isMeshStandardMaterial?ce.environment:null,Ce.fog=ce.fog,Ce.envMap=(Z.isMeshStandardMaterial?je:De).get(Z.envMap||Ce.environment),zt===void 0&&(Z.addEventListener("dispose",gn),zt=new Map,Ce.programs=zt);let kt=zt.get(xt);if(kt!==void 0){if(Ce.currentProgram===kt&&Ce.lightsStateVersion===dt)return xi(Z,lt),kt}else lt.uniforms=we.getUniforms(Z),Z.onBuild(lt,b),Z.onBeforeCompile(lt,b),kt=we.acquireProgram(lt,xt),zt.set(xt,kt),Ce.uniforms=lt.uniforms;const It=Ce.uniforms;(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(It.clippingPlanes=rt.uniform),xi(Z,lt),Ce.needsLights=rc(Z),Ce.lightsStateVersion=dt,Ce.needsLights&&(It.ambientLightColor.value=Ve.state.ambient,It.lightProbe.value=Ve.state.probe,It.directionalLights.value=Ve.state.directional,It.directionalLightShadows.value=Ve.state.directionalShadow,It.spotLights.value=Ve.state.spot,It.spotLightShadows.value=Ve.state.spotShadow,It.rectAreaLights.value=Ve.state.rectArea,It.ltc_1.value=Ve.state.rectAreaLTC1,It.ltc_2.value=Ve.state.rectAreaLTC2,It.pointLights.value=Ve.state.point,It.pointLightShadows.value=Ve.state.pointShadow,It.hemisphereLights.value=Ve.state.hemi,It.directionalShadowMap.value=Ve.state.directionalShadowMap,It.directionalShadowMatrix.value=Ve.state.directionalShadowMatrix,It.spotShadowMap.value=Ve.state.spotShadowMap,It.spotShadowMatrix.value=Ve.state.spotShadowMatrix,It.pointShadowMap.value=Ve.state.pointShadowMap,It.pointShadowMatrix.value=Ve.state.pointShadowMatrix);const _t=kt.getUniforms(),hr=ta.seqWithValue(_t.seq,It);return Ce.currentProgram=kt,Ce.uniformsList=hr,kt}function xi(Z,ce){const ge=be.get(Z);ge.outputEncoding=ce.outputEncoding,ge.instancing=ce.instancing,ge.skinning=ce.skinning,ge.morphTargets=ce.morphTargets,ge.morphNormals=ce.morphNormals,ge.numClippingPlanes=ce.numClippingPlanes,ge.numIntersection=ce.numClipIntersection,ge.vertexAlphas=ce.vertexAlphas,ge.vertexTangents=ce.vertexTangents}function so(Z,ce,ge,Ce){ce.isScene!==!0&&(ce=fe),Re.resetTextureUnits();const Ve=ce.fog,St=ge.isMeshStandardMaterial?ce.environment:null,dt=R===null?b.outputEncoding:R.texture.encoding,lt=(ge.isMeshStandardMaterial?je:De).get(ge.envMap||St),xt=ge.vertexColors===!0&&!!Ce.geometry&&!!Ce.geometry.attributes.color&&Ce.geometry.attributes.color.itemSize===4,zt=!!Ce.geometry&&!!Ce.geometry.attributes.tangent,kt=!!Ce.geometry&&!!Ce.geometry.morphAttributes.position,It=!!Ce.geometry&&!!Ce.geometry.morphAttributes.normal,_t=be.get(ge),hr=_.state.lights;if(pe===!0&&(O===!0||Z!==k)){const fn=Z===k&&ge.id===F;rt.setState(ge,Z,fn)}let tn=!1;ge.version===_t.__version?(_t.needsLights&&_t.lightsStateVersion!==hr.state.version||_t.outputEncoding!==dt||Ce.isInstancedMesh&&_t.instancing===!1||!Ce.isInstancedMesh&&_t.instancing===!0||Ce.isSkinnedMesh&&_t.skinning===!1||!Ce.isSkinnedMesh&&_t.skinning===!0||_t.envMap!==lt||ge.fog&&_t.fog!==Ve||_t.numClippingPlanes!==void 0&&(_t.numClippingPlanes!==rt.numPlanes||_t.numIntersection!==rt.numIntersection)||_t.vertexAlphas!==xt||_t.vertexTangents!==zt||_t.morphTargets!==kt||_t.morphNormals!==It)&&(tn=!0):(tn=!0,_t.__version=ge.version);let dr=_t.currentProgram;tn===!0&&(dr=ni(ge,ce,Ce));let Bn=!1,Vt=!1,fr=!1;const dn=dr.getUniforms(),wi=_t.uniforms;if(ze.useProgram(dr.program)&&(Bn=!0,Vt=!0,fr=!0),ge.id!==F&&(F=ge.id,Vt=!0),Bn||k!==Z){if(dn.setValue(te,"projectionMatrix",Z.projectionMatrix),ke.logarithmicDepthBuffer&&dn.setValue(te,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),k!==Z&&(k=Z,Vt=!0,fr=!0),ge.isShaderMaterial||ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshStandardMaterial||ge.envMap){const fn=dn.map.cameraPosition;fn!==void 0&&fn.setValue(te,D.setFromMatrixPosition(Z.matrixWorld))}(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&dn.setValue(te,"isOrthographic",Z.isOrthographicCamera===!0),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial||ge.isShadowMaterial||Ce.isSkinnedMesh)&&dn.setValue(te,"viewMatrix",Z.matrixWorldInverse)}if(Ce.isSkinnedMesh){dn.setOptional(te,Ce,"bindMatrix"),dn.setOptional(te,Ce,"bindMatrixInverse");const fn=Ce.skeleton;fn&&(ke.floatVertexTextures?(fn.boneTexture===null&&fn.computeBoneTexture(),dn.setValue(te,"boneTexture",fn.boneTexture,Re),dn.setValue(te,"boneTextureSize",fn.boneTextureSize)):dn.setOptional(te,fn,"boneMatrices"))}return(Vt||_t.receiveShadow!==Ce.receiveShadow)&&(_t.receiveShadow=Ce.receiveShadow,dn.setValue(te,"receiveShadow",Ce.receiveShadow)),Vt&&(dn.setValue(te,"toneMappingExposure",b.toneMappingExposure),_t.needsLights&&As(wi,fr),Ve&&ge.fog&&Ae.refreshFogUniforms(wi,Ve),Ae.refreshMaterialUniforms(wi,ge,U,j,G),ta.upload(te,_t.uniformsList,wi,Re)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(ta.upload(te,_t.uniformsList,wi,Re),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&dn.setValue(te,"center",Ce.center),dn.setValue(te,"modelViewMatrix",Ce.modelViewMatrix),dn.setValue(te,"normalMatrix",Ce.normalMatrix),dn.setValue(te,"modelMatrix",Ce.matrixWorld),dr}function As(Z,ce){Z.ambientLightColor.needsUpdate=ce,Z.lightProbe.needsUpdate=ce,Z.directionalLights.needsUpdate=ce,Z.directionalLightShadows.needsUpdate=ce,Z.pointLights.needsUpdate=ce,Z.pointLightShadows.needsUpdate=ce,Z.spotLights.needsUpdate=ce,Z.spotLightShadows.needsUpdate=ce,Z.rectAreaLights.needsUpdate=ce,Z.hemisphereLights.needsUpdate=ce}function rc(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return R},this.setRenderTarget=function(Z,ce=0,ge=0){R=Z,S=ce,T=ge,Z&&be.get(Z).__webglFramebuffer===void 0&&Re.setupRenderTarget(Z);let Ce=null,Ve=!1,St=!1;if(Z){const lt=Z.texture;(lt.isDataTexture3D||lt.isDataTexture2DArray)&&(St=!0);const xt=be.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Ce=xt[ce],Ve=!0):Z.isWebGLMultisampleRenderTarget?Ce=be.get(Z).__webglMultisampledFramebuffer:Ce=xt,z.copy(Z.viewport),N.copy(Z.scissor),I=Z.scissorTest}else z.copy(Q).multiplyScalar(U).floor(),N.copy(ne).multiplyScalar(U).floor(),I=oe;if(ze.bindFramebuffer(36160,Ce)&&ke.drawBuffers){let lt=!1;if(Z)if(Z.isWebGLMultipleRenderTargets){const xt=Z.texture;if(ae.length!==xt.length||ae[0]!==36064){for(let zt=0,kt=xt.length;zt<kt;zt++)ae[zt]=36064+zt;ae.length=xt.length,lt=!0}}else(ae.length!==1||ae[0]!==36064)&&(ae[0]=36064,ae.length=1,lt=!0);else(ae.length!==1||ae[0]!==1029)&&(ae[0]=1029,ae.length=1,lt=!0);lt&&(ke.isWebGL2?te.drawBuffers(ae):Pe.get("WEBGL_draw_buffers").drawBuffersWEBGL(ae))}if(ze.viewport(z),ze.scissor(N),ze.setScissorTest(I),Ve){const lt=be.get(Z.texture);te.framebufferTexture2D(36160,36064,34069+ce,lt.__webglTexture,ge)}else if(St){const lt=be.get(Z.texture),xt=ce||0;te.framebufferTextureLayer(36160,36064,lt.__webglTexture,ge||0,xt)}F=-1},this.readRenderTargetPixels=function(Z,ce,ge,Ce,Ve,St,dt){if(!(Z&&Z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=be.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&dt!==void 0&&(lt=lt[dt]),lt){ze.bindFramebuffer(36160,lt);try{const xt=Z.texture,zt=xt.format,kt=xt.type;if(zt!==cr&&Se.convert(zt)!==te.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const It=kt===Lu&&(Pe.has("EXT_color_buffer_half_float")||ke.isWebGL2&&Pe.has("EXT_color_buffer_float"));if(kt!==Bu&&Se.convert(kt)!==te.getParameter(35738)&&!(kt===Wa&&(ke.isWebGL2||Pe.has("OES_texture_float")||Pe.has("WEBGL_color_buffer_float")))&&!It){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}te.checkFramebufferStatus(36160)===36053?ce>=0&&ce<=Z.width-Ce&&ge>=0&&ge<=Z.height-Ve&&te.readPixels(ce,ge,Ce,Ve,Se.convert(zt),Se.convert(kt),St):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const xt=R!==null?be.get(R).__webglFramebuffer:null;ze.bindFramebuffer(36160,xt)}}},this.copyFramebufferToTexture=function(Z,ce,ge=0){const Ce=Math.pow(2,-ge),Ve=Math.floor(ce.image.width*Ce),St=Math.floor(ce.image.height*Ce);let dt=Se.convert(ce.format);ke.isWebGL2&&(dt===6407&&(dt=32849),dt===6408&&(dt=32856)),Re.setTexture2D(ce,0),te.copyTexImage2D(3553,ge,dt,Z.x,Z.y,Ve,St,0),ze.unbindTexture()},this.copyTextureToTexture=function(Z,ce,ge,Ce=0){const Ve=ce.image.width,St=ce.image.height,dt=Se.convert(ge.format),lt=Se.convert(ge.type);Re.setTexture2D(ge,0),te.pixelStorei(37440,ge.flipY),te.pixelStorei(37441,ge.premultiplyAlpha),te.pixelStorei(3317,ge.unpackAlignment),ce.isDataTexture?te.texSubImage2D(3553,Ce,Z.x,Z.y,Ve,St,dt,lt,ce.image.data):ce.isCompressedTexture?te.compressedTexSubImage2D(3553,Ce,Z.x,Z.y,ce.mipmaps[0].width,ce.mipmaps[0].height,dt,ce.mipmaps[0].data):te.texSubImage2D(3553,Ce,Z.x,Z.y,dt,lt,ce.image),Ce===0&&ge.generateMipmaps&&te.generateMipmap(3553),ze.unbindTexture()},this.copyTextureToTexture3D=function(Z,ce,ge,Ce,Ve=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const St=Z.max.x-Z.min.x+1,dt=Z.max.y-Z.min.y+1,lt=Z.max.z-Z.min.z+1,xt=Se.convert(Ce.format),zt=Se.convert(Ce.type);let kt;if(Ce.isDataTexture3D)Re.setTexture3D(Ce,0),kt=32879;else if(Ce.isDataTexture2DArray)Re.setTexture2DArray(Ce,0),kt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(37440,Ce.flipY),te.pixelStorei(37441,Ce.premultiplyAlpha),te.pixelStorei(3317,Ce.unpackAlignment);const It=te.getParameter(3314),_t=te.getParameter(32878),hr=te.getParameter(3316),tn=te.getParameter(3315),dr=te.getParameter(32877),Bn=ge.isCompressedTexture?ge.mipmaps[0]:ge.image;te.pixelStorei(3314,Bn.width),te.pixelStorei(32878,Bn.height),te.pixelStorei(3316,Z.min.x),te.pixelStorei(3315,Z.min.y),te.pixelStorei(32877,Z.min.z),ge.isDataTexture||ge.isDataTexture3D?te.texSubImage3D(kt,Ve,ce.x,ce.y,ce.z,St,dt,lt,xt,zt,Bn.data):ge.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),te.compressedTexSubImage3D(kt,Ve,ce.x,ce.y,ce.z,St,dt,lt,xt,Bn.data)):te.texSubImage3D(kt,Ve,ce.x,ce.y,ce.z,St,dt,lt,xt,zt,Bn),te.pixelStorei(3314,It),te.pixelStorei(32878,_t),te.pixelStorei(3316,hr),te.pixelStorei(3315,tn),te.pixelStorei(32877,dr),Ve===0&&Ce.generateMipmaps&&te.generateMipmap(kt),ze.unbindTexture()},this.initTexture=function(Z){Re.setTexture2D(Z,0),ze.unbindTexture()},this.resetState=function(){S=0,T=0,R=null,ze.reset(),Fe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class c4 extends Kt{}c4.prototype.isWebGL1Renderer=!0;class zv extends $t{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}zv.prototype.isScene=!0;class ad{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Gh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=es()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=es()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=es()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}ad.prototype.isInterleavedBuffer=!0;const Ln=new ie;class Zh{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ln.x=this.getX(t),Ln.y=this.getY(t),Ln.z=this.getZ(t),Ln.applyMatrix4(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ln.x=this.getX(t),Ln.y=this.getY(t),Ln.z=this.getZ(t),Ln.applyNormalMatrix(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ln.x=this.getX(t),Ln.y=this.getY(t),Ln.z=this.getZ(t),Ln.transformDirection(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Fn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Zh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Zh.prototype.isInterleavedBufferAttribute=!0;class lT extends _i{constructor(e){super(),this.type="SpriteMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}lT.prototype.isSpriteMaterial=!0;let pu;const nh=new ie,mu=new ie,gu=new ie,_u=new Ze,ih=new Ze,uT=new yt,np=new ie,rh=new ie,ip=new ie,ES=new Ze,H_=new Ze,TS=new Ze;class h4 extends $t{constructor(e){if(super(),this.type="Sprite",pu===void 0){pu=new en;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new ad(t,5);pu.setIndex([0,1,2,0,2,3]),pu.setAttribute("position",new Zh(i,3,0,!1)),pu.setAttribute("uv",new Zh(i,2,3,!1))}this.geometry=pu,this.material=e!==void 0?e:new lT,this.center=new Ze(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),mu.setFromMatrixScale(this.matrixWorld),uT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),gu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&mu.multiplyScalar(-gu.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;rp(np.set(-.5,-.5,0),gu,o,mu,r,s),rp(rh.set(.5,-.5,0),gu,o,mu,r,s),rp(ip.set(.5,.5,0),gu,o,mu,r,s),ES.set(0,0),H_.set(1,0),TS.set(1,1);let u=e.ray.intersectTriangle(np,rh,ip,!1,nh);if(u===null&&(rp(rh.set(-.5,.5,0),gu,o,mu,r,s),H_.set(0,1),u=e.ray.intersectTriangle(np,ip,rh,!1,nh),u===null))return;const h=e.ray.origin.distanceTo(nh);h<e.near||h>e.far||t.push({distance:h,point:nh.clone(),uv:zn.getUV(nh,np,rh,ip,ES,H_,TS,new Ze),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}h4.prototype.isSprite=!0;function rp(n,e,t,i,r,s){_u.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(ih.x=s*_u.x-r*_u.y,ih.y=r*_u.x+s*_u.y):ih.copy(_u),n.copy(e),n.x+=ih.x,n.y+=ih.y,n.applyMatrix4(uT)}const LS=new ie,CS=new Qt,PS=new Qt,d4=new ie,AS=new yt;class cT extends Ci{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new yt,this.bindMatrixInverse=new yt}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Qt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;CS.fromBufferAttribute(r.attributes.skinIndex,e),PS.fromBufferAttribute(r.attributes.skinWeight,e),LS.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=PS.getComponent(s);if(o!==0){const u=CS.getComponent(s);AS.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(d4.copy(LS).applyMatrix4(AS),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}cT.prototype.isSkinnedMesh=!0;class f4 extends $t{constructor(){super(),this.type="Bone"}}f4.prototype.isBone=!0;class p4 extends ei{constructor(e=null,t=1,i=1,r,s,o,u,h,d=$n,p=$n,g,_){super(null,o,u,h,d,p,r,s,g,_),this.image={data:e,width:t,height:i},this.magFilter=d,this.minFilter=p,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}p4.prototype.isDataTexture=!0;class zy extends Fn{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}zy.prototype.isInstancedBufferAttribute=!0;const kS=new yt,RS=new yt,sp=[],sh=new Ci;class m4 extends Ci{constructor(e,t,i){super(e,t),this.instanceMatrix=new zy(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(sh.geometry=this.geometry,sh.material=this.material,sh.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,kS),RS.multiplyMatrices(i,kS),sh.matrixWorld=RS,sh.raycast(e,sp);for(let o=0,u=sp.length;o<u;o++){const h=sp[o];h.instanceId=s,h.object=this,t.push(h)}sp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new zy(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}m4.prototype.isInstancedMesh=!0;class Qu extends _i{constructor(e){super(),this.type="LineBasicMaterial",this.color=new ht(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Qu.prototype.isLineBasicMaterial=!0;const IS=new ie,DS=new ie,NS=new yt,V_=new al,op=new Yu;class Fv extends $t{constructor(e=new en,t=new Qu){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)IS.fromBufferAttribute(t,r-1),DS.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=IS.distanceTo(DS);e.setAttribute("lineDistance",new qn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),op.copy(i.boundingSphere),op.applyMatrix4(r),op.radius+=s,e.ray.intersectsSphere(op)===!1)return;NS.copy(r).invert(),V_.copy(e.ray).applyMatrix4(NS);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=new ie,p=new ie,g=new ie,_=new ie,y=this.isLineSegments?2:1;if(i.isBufferGeometry){const w=i.index,C=i.attributes.position;if(w!==null){const S=Math.max(0,o.start),T=Math.min(w.count,o.start+o.count);for(let R=S,F=T-1;R<F;R+=y){const k=w.getX(R),z=w.getX(R+1);if(d.fromBufferAttribute(C,k),p.fromBufferAttribute(C,z),V_.distanceSqToSegment(d,p,_,g)>h)continue;_.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(_);I<e.near||I>e.far||t.push({distance:I,point:g.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}else{const S=Math.max(0,o.start),T=Math.min(C.count,o.start+o.count);for(let R=S,F=T-1;R<F;R+=y){if(d.fromBufferAttribute(C,R),p.fromBufferAttribute(C,R+1),V_.distanceSqToSegment(d,p,_,g)>h)continue;_.applyMatrix4(this.matrixWorld);const z=e.ray.origin.distanceTo(_);z<e.near||z>e.far||t.push({distance:z,point:g.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Fv.prototype.isLine=!0;const OS=new ie,zS=new ie;class Bv extends Fv{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)OS.fromBufferAttribute(t,r),zS.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+OS.distanceTo(zS);e.setAttribute("lineDistance",new qn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Bv.prototype.isLineSegments=!0;class Fy extends Fv{constructor(e,t){super(e,t),this.type="LineLoop"}}Fy.prototype.isLineLoop=!0;class hT extends _i{constructor(e){super(),this.type="PointsMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}hT.prototype.isPointsMaterial=!0;const FS=new yt,By=new al,ap=new Yu,lp=new ie;class g4 extends $t{constructor(e=new en,t=new hT){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ap.copy(i.boundingSphere),ap.applyMatrix4(r),ap.radius+=s,e.ray.intersectsSphere(ap)===!1)return;FS.copy(r).invert(),By.copy(e.ray).applyMatrix4(FS);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u;if(i.isBufferGeometry){const d=i.index,g=i.attributes.position;if(d!==null){const _=Math.max(0,o.start),y=Math.min(d.count,o.start+o.count);for(let w=_,b=y;w<b;w++){const C=d.getX(w);lp.fromBufferAttribute(g,C),BS(lp,C,h,r,e,t,this)}}else{const _=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let w=_,b=y;w<b;w++)lp.fromBufferAttribute(g,w),BS(lp,w,h,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const u=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}g4.prototype.isPoints=!0;function BS(n,e,t,i,r,s,o){const u=By.distanceSqToPoint(n);if(u<t){const h=new ie;By.closestPointToPoint(n,h),h.applyMatrix4(i);const d=r.ray.origin.distanceTo(h);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:o})}}class _4 extends ei{constructor(e,t,i,r,s,o,u,h,d){super(e,t,i,r,s,o,u,h,d),this.format=u!==void 0?u:Qo,this.minFilter=o!==void 0?o:kr,this.magFilter=s!==void 0?s:kr,this.generateMipmaps=!1;const p=this;function g(){p.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}_4.prototype.isVideoTexture=!0;class y4 extends ei{constructor(e,t,i,r,s,o,u,h,d,p,g,_){super(null,o,u,h,d,p,r,s,g,_),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}y4.prototype.isCompressedTexture=!0;class v4 extends ei{constructor(e,t,i,r,s,o,u,h,d){super(e,t,i,r,s,o,u,h,d),this.needsUpdate=!0}}v4.prototype.isCanvasTexture=!0;class x4 extends ei{constructor(e,t,i,r,s,o,u,h,d,p){if(p=p!==void 0?p:Cu,p!==Cu&&p!==jh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&p===Cu&&(i=zp),i===void 0&&p===jh&&(i=Ch),super(null,r,s,o,u,h,p,i,d),this.image={width:e,height:t},this.magFilter=u!==void 0?u:$n,this.minFilter=h!==void 0?h:$n,this.flipY=!1,this.generateMipmaps=!1}}x4.prototype.isDepthTexture=!0;class Dr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let u=0,h=s-1,d;for(;u<=h;)if(r=Math.floor(u+(h-u)/2),d=i[r]-o,d<0)u=r+1;else if(d>0)h=r-1;else{h=r;break}if(r=h,i[r]===o)return r/(s-1);const p=i[r],_=i[r+1]-p,y=(o-p)/_;return(r+y)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),u=this.getPoint(s),h=t||(o.isVector2?new Ze:new ie);return h.copy(u).sub(o).normalize(),h}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new ie,r=[],s=[],o=[],u=new ie,h=new yt;for(let y=0;y<=e;y++){const w=y/e;r[y]=this.getTangentAt(w,new ie),r[y].normalize()}s[0]=new ie,o[0]=new ie;let d=Number.MAX_VALUE;const p=Math.abs(r[0].x),g=Math.abs(r[0].y),_=Math.abs(r[0].z);p<=d&&(d=p,i.set(1,0,0)),g<=d&&(d=g,i.set(0,1,0)),_<=d&&i.set(0,0,1),u.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],u),o[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),u.crossVectors(r[y-1],r[y]),u.length()>Number.EPSILON){u.normalize();const w=Math.acos(Li(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(h.makeRotationAxis(u,w))}o[y].crossVectors(r[y],s[y])}if(t===!0){let y=Math.acos(Li(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(u.crossVectors(s[0],s[e]))>0&&(y=-y);for(let w=1;w<=e;w++)s[w].applyMatrix4(h.makeRotationAxis(r[w],y*w)),o[w].crossVectors(r[w],s[w])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class gm extends Dr{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,u=!1,h=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=u,this.aRotation=h}getPoint(e,t){const i=t||new Ze,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const u=this.aStartAngle+e*s;let h=this.aX+this.xRadius*Math.cos(u),d=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),_=h-this.aX,y=d-this.aY;h=_*p-y*g+this.aX,d=_*g+y*p+this.aY}return i.set(h,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}gm.prototype.isEllipseCurve=!0;class dT extends gm{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.type="ArcCurve"}}dT.prototype.isArcCurve=!0;function Uv(){let n=0,e=0,t=0,i=0;function r(s,o,u,h){n=s,e=u,t=-3*s+3*o-2*u-h,i=2*s-2*o+u+h}return{initCatmullRom:function(s,o,u,h,d){r(o,u,d*(u-s),d*(h-o))},initNonuniformCatmullRom:function(s,o,u,h,d,p,g){let _=(o-s)/d-(u-s)/(d+p)+(u-o)/p,y=(u-o)/p-(h-o)/(p+g)+(h-u)/g;_*=p,y*=p,r(o,u,_,y)},calc:function(s){const o=s*s,u=o*s;return n+e*s+t*o+i*u}}}const up=new ie,W_=new Uv,j_=new Uv,G_=new Uv;class fT extends Dr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ie){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let u=Math.floor(o),h=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/s)+1)*s:h===0&&u===s-1&&(u=s-2,h=1);let d,p;this.closed||u>0?d=r[(u-1)%s]:(up.subVectors(r[0],r[1]).add(r[0]),d=up);const g=r[u%s],_=r[(u+1)%s];if(this.closed||u+2<s?p=r[(u+2)%s]:(up.subVectors(r[s-1],r[s-2]).add(r[s-1]),p=up),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let w=Math.pow(d.distanceToSquared(g),y),b=Math.pow(g.distanceToSquared(_),y),C=Math.pow(_.distanceToSquared(p),y);b<1e-4&&(b=1),w<1e-4&&(w=b),C<1e-4&&(C=b),W_.initNonuniformCatmullRom(d.x,g.x,_.x,p.x,w,b,C),j_.initNonuniformCatmullRom(d.y,g.y,_.y,p.y,w,b,C),G_.initNonuniformCatmullRom(d.z,g.z,_.z,p.z,w,b,C)}else this.curveType==="catmullrom"&&(W_.initCatmullRom(d.x,g.x,_.x,p.x,this.tension),j_.initCatmullRom(d.y,g.y,_.y,p.y,this.tension),G_.initCatmullRom(d.z,g.z,_.z,p.z,this.tension));return i.set(W_.calc(h),j_.calc(h),G_.calc(h)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ie().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}fT.prototype.isCatmullRomCurve3=!0;function US(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,u=n*n,h=n*u;return(2*t-2*i+s+o)*h+(-3*t+3*i-2*s-o)*u+s*n+t}function w4(n,e){const t=1-n;return t*t*e}function b4(n,e){return 2*(1-n)*n*e}function S4(n,e){return n*n*e}function kh(n,e,t,i){return w4(n,e)+b4(n,t)+S4(n,i)}function M4(n,e){const t=1-n;return t*t*t*e}function E4(n,e){const t=1-n;return 3*t*t*n*e}function T4(n,e){return 3*(1-n)*n*n*e}function L4(n,e){return n*n*n*e}function Rh(n,e,t,i,r){return M4(n,e)+E4(n,t)+T4(n,i)+L4(n,r)}class Hv extends Dr{constructor(e=new Ze,t=new Ze,i=new Ze,r=new Ze){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ze){const i=t,r=this.v0,s=this.v1,o=this.v2,u=this.v3;return i.set(Rh(e,r.x,s.x,o.x,u.x),Rh(e,r.y,s.y,o.y,u.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Hv.prototype.isCubicBezierCurve=!0;class pT extends Dr{constructor(e=new ie,t=new ie,i=new ie,r=new ie){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ie){const i=t,r=this.v0,s=this.v1,o=this.v2,u=this.v3;return i.set(Rh(e,r.x,s.x,o.x,u.x),Rh(e,r.y,s.y,o.y,u.y),Rh(e,r.z,s.z,o.z,u.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}pT.prototype.isCubicBezierCurve3=!0;class _m extends Dr{constructor(e=new Ze,t=new Ze){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ze){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Ze;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}_m.prototype.isLineCurve=!0;class C4 extends Dr{constructor(e=new ie,t=new ie){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new ie){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Vv extends Dr{constructor(e=new Ze,t=new Ze,i=new Ze){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ze){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(kh(e,r.x,s.x,o.x),kh(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Vv.prototype.isQuadraticBezierCurve=!0;class mT extends Dr{constructor(e=new ie,t=new ie,i=new ie){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ie){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(kh(e,r.x,s.x,o.x),kh(e,r.y,s.y,o.y),kh(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}mT.prototype.isQuadraticBezierCurve3=!0;class Wv extends Dr{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Ze){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),u=s-o,h=r[o===0?o:o-1],d=r[o],p=r[o>r.length-2?r.length-1:o+1],g=r[o>r.length-3?r.length-1:o+2];return i.set(US(u,h.x,d.x,p.x,g.x),US(u,h.y,d.y,p.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ze().fromArray(r))}return this}}Wv.prototype.isSplineCurve=!0;var gT=Object.freeze({__proto__:null,ArcCurve:dT,CatmullRomCurve3:fT,CubicBezierCurve:Hv,CubicBezierCurve3:pT,EllipseCurve:gm,LineCurve:_m,LineCurve3:C4,QuadraticBezierCurve:Vv,QuadraticBezierCurve3:mT,SplineCurve:Wv});const P4={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=_T(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let u,h,d,p,g,_,y;if(i&&(s=D4(n,e,s,t)),n.length>80*t){u=d=n[0],h=p=n[1];for(let w=t;w<r;w+=t)g=n[w],_=n[w+1],g<u&&(u=g),_<h&&(h=_),g>d&&(d=g),_>p&&(p=_);y=Math.max(d-u,p-h),y=y!==0?1/y:0}return qh(s,o,t,u,h,y),o}};function _T(n,e,t,i,r){let s,o;if(r===G4(n,e,t,i)>0)for(s=e;s<t;s+=i)o=HS(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=HS(s,n[s],n[s+1],o);return o&&ym(o,o.next)&&(Yh(o),o=o.next),o}function ra(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(ym(t,t.next)||xn(t.prev,t,t.next)===0)){if(Yh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function qh(n,e,t,i,r,s,o){if(!n)return;!o&&s&&B4(n,i,r,s);let u=n,h,d;for(;n.prev!==n.next;){if(h=n.prev,d=n.next,s?k4(n,i,r,s):A4(n)){e.push(h.i/t),e.push(n.i/t),e.push(d.i/t),Yh(n),n=d.next,u=d.next;continue}if(n=d,n===u){o?o===1?(n=R4(ra(n),e,t),qh(n,e,t,i,r,s,2)):o===2&&I4(n,e,t,i,r,s):qh(ra(n),e,t,i,r,s,1);break}}}function A4(n){const e=n.prev,t=n,i=n.next;if(xn(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Mu(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&xn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function k4(n,e,t,i){const r=n.prev,s=n,o=n.next;if(xn(r,s,o)>=0)return!1;const u=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,d=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,p=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,g=Uy(u,h,e,t,i),_=Uy(d,p,e,t,i);let y=n.prevZ,w=n.nextZ;for(;y&&y.z>=g&&w&&w.z<=_;){if(y!==n.prev&&y!==n.next&&Mu(r.x,r.y,s.x,s.y,o.x,o.y,y.x,y.y)&&xn(y.prev,y,y.next)>=0||(y=y.prevZ,w!==n.prev&&w!==n.next&&Mu(r.x,r.y,s.x,s.y,o.x,o.y,w.x,w.y)&&xn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;y&&y.z>=g;){if(y!==n.prev&&y!==n.next&&Mu(r.x,r.y,s.x,s.y,o.x,o.y,y.x,y.y)&&xn(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=_;){if(w!==n.prev&&w!==n.next&&Mu(r.x,r.y,s.x,s.y,o.x,o.y,w.x,w.y)&&xn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function R4(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!ym(r,s)&&yT(r,i,i.next,s)&&Xh(r,s)&&Xh(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),Yh(i),Yh(i.next),i=n=s),i=i.next}while(i!==n);return ra(i)}function I4(n,e,t,i,r,s){let o=n;do{let u=o.next.next;for(;u!==o.prev;){if(o.i!==u.i&&V4(o,u)){let h=vT(o,u);o=ra(o,o.next),h=ra(h,h.next),qh(o,e,t,i,r,s),qh(h,e,t,i,r,s);return}u=u.next}o=o.next}while(o!==n)}function D4(n,e,t,i){const r=[];let s,o,u,h,d;for(s=0,o=e.length;s<o;s++)u=e[s]*i,h=s<o-1?e[s+1]*i:n.length,d=_T(n,u,h,i,!1),d===d.next&&(d.steiner=!0),r.push(H4(d));for(r.sort(N4),s=0;s<r.length;s++)O4(r[s],t),t=ra(t,t.next);return t}function N4(n,e){return n.x-e.x}function O4(n,e){if(e=z4(n,e),e){const t=vT(e,n);ra(e,e.next),ra(t,t.next)}}function z4(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const _=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(_<=i&&_>s){if(s=_,_===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const u=o,h=o.x,d=o.y;let p=1/0,g;t=o;do i>=t.x&&t.x>=h&&i!==t.x&&Mu(r<d?i:s,r,h,d,r<d?s:i,r,t.x,t.y)&&(g=Math.abs(r-t.y)/(i-t.x),Xh(t,n)&&(g<p||g===p&&(t.x>o.x||t.x===o.x&&F4(o,t)))&&(o=t,p=g)),t=t.next;while(t!==u);return o}function F4(n,e){return xn(n.prev,n,e.prev)<0&&xn(e.next,n,n.next)<0}function B4(n,e,t,i){let r=n;do r.z===null&&(r.z=Uy(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,U4(r)}function U4(n){let e,t,i,r,s,o,u,h,d=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,u=0,e=0;e<d&&(u++,i=i.nextZ,!!i);e++);for(h=d;u>0||h>0&&i;)u!==0&&(h===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,u--):(r=i,i=i.nextZ,h--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,d*=2}while(o>1);return n}function Uy(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function H4(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Mu(n,e,t,i,r,s,o,u){return(r-o)*(e-u)-(n-o)*(s-u)>=0&&(n-o)*(i-u)-(t-o)*(e-u)>=0&&(t-o)*(s-u)-(r-o)*(i-u)>=0}function V4(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!W4(n,e)&&(Xh(n,e)&&Xh(e,n)&&j4(n,e)&&(xn(n.prev,n,e.prev)||xn(n,e.prev,e))||ym(n,e)&&xn(n.prev,n,n.next)>0&&xn(e.prev,e,e.next)>0)}function xn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function ym(n,e){return n.x===e.x&&n.y===e.y}function yT(n,e,t,i){const r=hp(xn(n,e,t)),s=hp(xn(n,e,i)),o=hp(xn(t,i,n)),u=hp(xn(t,i,e));return!!(r!==s&&o!==u||r===0&&cp(n,t,e)||s===0&&cp(n,i,e)||o===0&&cp(t,n,i)||u===0&&cp(t,e,i))}function cp(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function hp(n){return n>0?1:n<0?-1:0}function W4(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&yT(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Xh(n,e){return xn(n.prev,n,n.next)<0?xn(n,e,n.next)>=0&&xn(n,n.prev,e)>=0:xn(n,e,n.prev)<0||xn(n,n.next,e)<0}function j4(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function vT(n,e){const t=new Hy(n.i,n.x,n.y),i=new Hy(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function HS(n,e,t,i){const r=new Hy(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Yh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Hy(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function G4(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class na{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return na.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];VS(e),WS(i,e);let o=e.length;t.forEach(VS);for(let h=0;h<t.length;h++)r.push(o),o+=t[h].length,WS(i,t[h]);const u=P4.triangulate(i,r);for(let h=0;h<u.length;h+=3)s.push(u.slice(h,h+3));return s}}function VS(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function WS(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class ll extends en{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];o(d)}this.setAttribute("position",new qn(r,3)),this.setAttribute("uv",new qn(s,2)),this.computeVertexNormals();function o(u){const h=[],d=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1;let g=t.depth!==void 0?t.depth:100,_=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:6,w=t.bevelSize!==void 0?t.bevelSize:y-2,b=t.bevelOffset!==void 0?t.bevelOffset:0,C=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:$4;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),g=t.amount);let R,F=!1,k,z,N,I;S&&(R=S.getSpacedPoints(p),F=!0,_=!1,k=S.computeFrenetFrames(p,!1),z=new ie,N=new ie,I=new ie),_||(C=0,y=0,w=0,b=0);const W=u.extractPoints(d);let j=W.shape;const U=W.holes;if(!na.isClockWise(j)){j=j.reverse();for(let be=0,Re=U.length;be<Re;be++){const De=U[be];na.isClockWise(De)&&(U[be]=De.reverse())}}const Y=na.triangulateShape(j,U),Q=j;for(let be=0,Re=U.length;be<Re;be++){const De=U[be];j=j.concat(De)}function ne(be,Re,De){return Re||console.error("THREE.ExtrudeGeometry: vec does not exist"),Re.clone().multiplyScalar(De).add(be)}const oe=j.length,ae=Y.length;function ee(be,Re,De){let je,Ie,X;const $=be.x-Re.x,we=be.y-Re.y,Ae=De.x-be.x,$e=De.y-be.y,Ke=$*$+we*we,rt=$*$e-we*Ae;if(Math.abs(rt)>Number.EPSILON){const Je=Math.sqrt(Ke),st=Math.sqrt(Ae*Ae+$e*$e),he=Re.x-we/Je,q=Re.y+$/Je,Le=De.x-$e/st,Se=De.y+Ae/st,Fe=((Le-he)*$e-(Se-q)*Ae)/($*$e-we*Ae);je=he+$*Fe-be.x,Ie=q+we*Fe-be.y;const Xe=je*je+Ie*Ie;if(Xe<=2)return new Ze(je,Ie);X=Math.sqrt(Xe/2)}else{let Je=!1;$>Number.EPSILON?Ae>Number.EPSILON&&(Je=!0):$<-Number.EPSILON?Ae<-Number.EPSILON&&(Je=!0):Math.sign(we)===Math.sign($e)&&(Je=!0),Je?(je=-we,Ie=$,X=Math.sqrt(Ke)):(je=$,Ie=we,X=Math.sqrt(Ke/2))}return new Ze(je/X,Ie/X)}const pe=[];for(let be=0,Re=Q.length,De=Re-1,je=be+1;be<Re;be++,De++,je++)De===Re&&(De=0),je===Re&&(je=0),pe[be]=ee(Q[be],Q[De],Q[je]);const O=[];let G,se=pe.concat();for(let be=0,Re=U.length;be<Re;be++){const De=U[be];G=[];for(let je=0,Ie=De.length,X=Ie-1,$=je+1;je<Ie;je++,X++,$++)X===Ie&&(X=0),$===Ie&&($=0),G[je]=ee(De[je],De[X],De[$]);O.push(G),se=se.concat(G)}for(let be=0;be<C;be++){const Re=be/C,De=y*Math.cos(Re*Math.PI/2),je=w*Math.sin(Re*Math.PI/2)+b;for(let Ie=0,X=Q.length;Ie<X;Ie++){const $=ne(Q[Ie],pe[Ie],je);Ne($.x,$.y,-De)}for(let Ie=0,X=U.length;Ie<X;Ie++){const $=U[Ie];G=O[Ie];for(let we=0,Ae=$.length;we<Ae;we++){const $e=ne($[we],G[we],je);Ne($e.x,$e.y,-De)}}}const D=w+b;for(let be=0;be<oe;be++){const Re=_?ne(j[be],se[be],D):j[be];F?(N.copy(k.normals[0]).multiplyScalar(Re.x),z.copy(k.binormals[0]).multiplyScalar(Re.y),I.copy(R[0]).add(N).add(z),Ne(I.x,I.y,I.z)):Ne(Re.x,Re.y,0)}for(let be=1;be<=p;be++)for(let Re=0;Re<oe;Re++){const De=_?ne(j[Re],se[Re],D):j[Re];F?(N.copy(k.normals[be]).multiplyScalar(De.x),z.copy(k.binormals[be]).multiplyScalar(De.y),I.copy(R[be]).add(N).add(z),Ne(I.x,I.y,I.z)):Ne(De.x,De.y,g/p*be)}for(let be=C-1;be>=0;be--){const Re=be/C,De=y*Math.cos(Re*Math.PI/2),je=w*Math.sin(Re*Math.PI/2)+b;for(let Ie=0,X=Q.length;Ie<X;Ie++){const $=ne(Q[Ie],pe[Ie],je);Ne($.x,$.y,g+De)}for(let Ie=0,X=U.length;Ie<X;Ie++){const $=U[Ie];G=O[Ie];for(let we=0,Ae=$.length;we<Ae;we++){const $e=ne($[we],G[we],je);F?Ne($e.x,$e.y+R[p-1].y,R[p-1].x+De):Ne($e.x,$e.y,g+De)}}}fe(),ve();function fe(){const be=r.length/3;if(_){let Re=0,De=oe*Re;for(let je=0;je<ae;je++){const Ie=Y[je];Pe(Ie[2]+De,Ie[1]+De,Ie[0]+De)}Re=p+C*2,De=oe*Re;for(let je=0;je<ae;je++){const Ie=Y[je];Pe(Ie[0]+De,Ie[1]+De,Ie[2]+De)}}else{for(let Re=0;Re<ae;Re++){const De=Y[Re];Pe(De[2],De[1],De[0])}for(let Re=0;Re<ae;Re++){const De=Y[Re];Pe(De[0]+oe*p,De[1]+oe*p,De[2]+oe*p)}}i.addGroup(be,r.length/3-be,0)}function ve(){const be=r.length/3;let Re=0;te(Q,Re),Re+=Q.length;for(let De=0,je=U.length;De<je;De++){const Ie=U[De];te(Ie,Re),Re+=Ie.length}i.addGroup(be,r.length/3-be,1)}function te(be,Re){let De=be.length;for(;--De>=0;){const je=De;let Ie=De-1;Ie<0&&(Ie=be.length-1);for(let X=0,$=p+C*2;X<$;X++){const we=oe*X,Ae=oe*(X+1),$e=Re+je+we,Ke=Re+Ie+we,rt=Re+Ie+Ae,Je=Re+je+Ae;ke($e,Ke,rt,Je)}}}function Ne(be,Re,De){h.push(be),h.push(Re),h.push(De)}function Pe(be,Re,De){ze(be),ze(Re),ze(De);const je=r.length/3,Ie=T.generateTopUV(i,r,je-3,je-2,je-1);We(Ie[0]),We(Ie[1]),We(Ie[2])}function ke(be,Re,De,je){ze(be),ze(Re),ze(je),ze(Re),ze(De),ze(je);const Ie=r.length/3,X=T.generateSideWallUV(i,r,Ie-6,Ie-3,Ie-2,Ie-1);We(X[0]),We(X[1]),We(X[3]),We(X[1]),We(X[2]),We(X[3])}function ze(be){r.push(h[be*3+0]),r.push(h[be*3+1]),r.push(h[be*3+2])}function We(be){s.push(be.x),s.push(be.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Z4(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const u=t[e.shapes[s]];i.push(u)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new gT[r.type]().fromJSON(r)),new ll(i,e.options)}}const $4={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],u=e[i*3],h=e[i*3+1],d=e[r*3],p=e[r*3+1];return[new Ze(s,o),new Ze(u,h),new Ze(d,p)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],u=e[t*3+1],h=e[t*3+2],d=e[i*3],p=e[i*3+1],g=e[i*3+2],_=e[r*3],y=e[r*3+1],w=e[r*3+2],b=e[s*3],C=e[s*3+1],S=e[s*3+2];return Math.abs(u-p)<Math.abs(o-d)?[new Ze(o,1-h),new Ze(d,1-g),new Ze(_,1-w),new Ze(b,1-S)]:[new Ze(u,1-h),new Ze(p,1-g),new Ze(y,1-w),new Ze(C,1-S)]}};function Z4(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class jv extends en{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let u=0,h=0;if(Array.isArray(e)===!1)d(e);else for(let p=0;p<e.length;p++)d(e[p]),this.addGroup(u,h,p),u+=h,h=0;this.setIndex(i),this.setAttribute("position",new qn(r,3)),this.setAttribute("normal",new qn(s,3)),this.setAttribute("uv",new qn(o,2));function d(p){const g=r.length/3,_=p.extractPoints(t);let y=_.shape;const w=_.holes;na.isClockWise(y)===!1&&(y=y.reverse());for(let C=0,S=w.length;C<S;C++){const T=w[C];na.isClockWise(T)===!0&&(w[C]=T.reverse())}const b=na.triangulateShape(y,w);for(let C=0,S=w.length;C<S;C++){const T=w[C];y=y.concat(T)}for(let C=0,S=y.length;C<S;C++){const T=y[C];r.push(T.x,T.y,0),s.push(0,0,1),o.push(T.x,T.y)}for(let C=0,S=b.length;C<S;C++){const T=b[C],R=T[0]+g,F=T[1]+g,k=T[2]+g;i.push(R,F,k),h+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return q4(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new jv(i,e.curveSegments)}}function q4(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class X4 extends _i{constructor(e){super(),this.type="ShadowMaterial",this.color=new ht(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}X4.prototype.isShadowMaterial=!0;class xT extends _i{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}xT.prototype.isMeshStandardMaterial=!0;class Y4 extends xT{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Li(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenTint=new ht(0),this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new ht(1,1,1),this.specularTintMap=null,this._clearcoat=0,this._transmission=0,this.setValues(e)}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheenTint.copy(e.sheenTint),this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}Y4.prototype.isMeshPhysicalMaterial=!0;class wT extends _i{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new ht(16777215),this.specular=new ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}wT.prototype.isMeshPhongMaterial=!0;class K4 extends _i{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}K4.prototype.isMeshToonMaterial=!0;class J4 extends _i{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}J4.prototype.isMeshNormalMaterial=!0;class Q4 extends _i{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Q4.prototype.isMeshLambertMaterial=!0;class eU extends _i{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qu,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}eU.prototype.isMeshMatcapMaterial=!0;class tU extends Qu{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}tU.prototype.isLineDashedMaterial=!0;const mn={arraySlice:function(n,e,t){return mn.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const u=t[s]*e;for(let h=0;h!==e;++h)r[o++]=n[u+h]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let h=0;h<s.tracks.length;++h){const d=s.tracks[h],p=d.getValueSize(),g=[],_=[];for(let y=0;y<d.times.length;++y){const w=d.times[y]*r;if(!(w<t||w>=i)){g.push(d.times[y]);for(let b=0;b<p;++b)_.push(d.values[y*p+b])}}g.length!==0&&(d.times=mn.convertArray(g,d.times.constructor),d.values=mn.convertArray(_,d.values.constructor),o.push(d))}s.tracks=o;let u=1/0;for(let h=0;h<s.tracks.length;++h)u>s.tracks[h].times[0]&&(u=s.tracks[h].times[0]);for(let h=0;h<s.tracks.length;++h)s.tracks[h].shift(-1*u);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const u=t.tracks[o],h=u.ValueTypeName;if(h==="bool"||h==="string")continue;const d=n.tracks.find(function(S){return S.name===u.name&&S.ValueTypeName===h});if(d===void 0)continue;let p=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let _=0;const y=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=y/3);const w=u.times.length-1;let b;if(s<=u.times[0]){const S=p,T=g-p;b=mn.arraySlice(u.values,S,T)}else if(s>=u.times[w]){const S=w*g+p,T=S+g-p;b=mn.arraySlice(u.values,S,T)}else{const S=u.createInterpolant(),T=p,R=g-p;S.evaluate(s),b=mn.arraySlice(S.resultBuffer,T,R)}h==="quaternion"&&new mi().fromArray(b).normalize().conjugate().toArray(b);const C=d.times.length;for(let S=0;S<C;++S){const T=S*y+_;if(h==="quaternion")mi.multiplyQuaternionsFlat(d.values,T,b,0,d.values,T);else{const R=y-_*2;for(let F=0;F<R;++F)d.values[T+F]-=b[F]}}}return n.blendMode=NE,n}};class sa{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let u=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===u)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const u=t[1];e<u&&(i=2,s=u);for(let h=i-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===h)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const u=i+o>>>1;e<t[u]?o=u:i=u+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}sa.prototype.beforeStart_=sa.prototype.copySampleValue_;sa.prototype.afterEnd_=sa.prototype.copySampleValue_;class nU extends sa{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bu,endingEnd:bu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,u=r[s],h=r[o];if(u===void 0)switch(this.getSettings_().endingStart){case Su:s=e,u=2*t-i;break;case Up:s=r.length-2,u=t+r[s]-r[s+1];break;default:s=e,u=i}if(h===void 0)switch(this.getSettings_().endingEnd){case Su:o=e,h=2*i-t;break;case Up:o=1,h=i+r[1]-r[0];break;default:o=e-1,h=t}const d=(i-t)*.5,p=this.valueSize;this._weightPrev=d/(t-u),this._weightNext=d/(h-i),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,h=e*u,d=h-u,p=this._offsetPrev,g=this._offsetNext,_=this._weightPrev,y=this._weightNext,w=(i-t)/(r-t),b=w*w,C=b*w,S=-_*C+2*_*b-_*w,T=(1+_)*C+(-1.5-2*_)*b+(-.5+_)*w+1,R=(-1-y)*C+(1.5+y)*b+.5*w,F=y*C-y*b;for(let k=0;k!==u;++k)s[k]=S*o[p+k]+T*o[d+k]+R*o[h+k]+F*o[g+k];return s}}class bT extends sa{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,h=e*u,d=h-u,p=(i-t)/(r-t),g=1-p;for(let _=0;_!==u;++_)s[_]=o[d+_]*g+o[h+_]*p;return s}}class iU extends sa{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ps{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mn.convertArray(t,this.TimeBufferType),this.values=mn.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:mn.convertArray(e.times,Array),values:mn.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new iU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new bT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new nU(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Fp:t=this.InterpolantFactoryMethodDiscrete;break;case Bp:t=this.InterpolantFactoryMethodLinear;break;case h_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Fp;case this.InterpolantFactoryMethodLinear:return Bp;case this.InterpolantFactoryMethodSmooth:return h_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const u=this.getValueSize();this.times=mn.arraySlice(i,s,o),this.values=mn.arraySlice(this.values,s*u,o*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let u=0;u!==s;u++){const h=i[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(o!==null&&o>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,o),e=!1;break}o=h}if(r!==void 0&&mn.isTypedArray(r))for(let u=0,h=r.length;u!==h;++u){const d=r[u];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,d),e=!1;break}}return e}optimize(){const e=mn.arraySlice(this.times),t=mn.arraySlice(this.values),i=this.getValueSize(),r=this.getInterpolation()===h_,s=e.length-1;let o=1;for(let u=1;u<s;++u){let h=!1;const d=e[u],p=e[u+1];if(d!==p&&(u!==1||d!==e[0]))if(r)h=!0;else{const g=u*i,_=g-i,y=g+i;for(let w=0;w!==i;++w){const b=t[g+w];if(b!==t[_+w]||b!==t[y+w]){h=!0;break}}}if(h){if(u!==o){e[o]=e[u];const g=u*i,_=o*i;for(let y=0;y!==i;++y)t[_+y]=t[g+y]}++o}}if(s>0){e[o]=e[s];for(let u=s*i,h=o*i,d=0;d!==i;++d)t[h+d]=t[u+d];++o}return o!==e.length?(this.times=mn.arraySlice(e,0,o),this.values=mn.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=mn.arraySlice(this.times,0),t=mn.arraySlice(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ps.prototype.TimeBufferType=Float32Array;Ps.prototype.ValueBufferType=Float32Array;Ps.prototype.DefaultInterpolation=Bp;class ec extends Ps{}ec.prototype.ValueTypeName="bool";ec.prototype.ValueBufferType=Array;ec.prototype.DefaultInterpolation=Fp;ec.prototype.InterpolantFactoryMethodLinear=void 0;ec.prototype.InterpolantFactoryMethodSmooth=void 0;class ST extends Ps{}ST.prototype.ValueTypeName="color";class Vp extends Ps{}Vp.prototype.ValueTypeName="number";class rU extends sa{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,h=(i-t)/(r-t);let d=e*u;for(let p=d+u;d!==p;d+=4)mi.slerpFlat(s,0,o,d-u,o,d,h);return s}}class ld extends Ps{InterpolantFactoryMethodLinear(e){return new rU(this.times,this.values,this.getValueSize(),e)}}ld.prototype.ValueTypeName="quaternion";ld.prototype.DefaultInterpolation=Bp;ld.prototype.InterpolantFactoryMethodSmooth=void 0;class tc extends Ps{}tc.prototype.ValueTypeName="string";tc.prototype.ValueBufferType=Array;tc.prototype.DefaultInterpolation=Fp;tc.prototype.InterpolantFactoryMethodLinear=void 0;tc.prototype.InterpolantFactoryMethodSmooth=void 0;class Wp extends Ps{}Wp.prototype.ValueTypeName="vector";class jS{constructor(e,t=-1,i,r=Lv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=es(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,u=i.length;o!==u;++o)t.push(oU(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ps.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let u=0;u<s;u++){let h=[],d=[];h.push((u+s-1)%s,u,(u+1)%s),d.push(0,1,0);const p=mn.getKeyframeOrder(h);h=mn.sortedArray(h,1,p),d=mn.sortedArray(d,1,p),!r&&h[0]===0&&(h.push(s),d.push(d[0])),o.push(new Vp(".morphTargetInfluences["+t[u].name+"]",h,d).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const d=e[u],p=d.name.match(s);if(p&&p.length>1){const g=p[1];let _=r[g];_||(r[g]=_=[]),_.push(d)}}const o=[];for(const u in r)o.push(this.CreateFromMorphTargetSequence(u,r[u],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(g,_,y,w,b){if(y.length!==0){const C=[],S=[];mn.flattenJSON(y,C,S,w),C.length!==0&&b.push(new g(_,C,S))}},r=[],s=e.name||"default",o=e.fps||30,u=e.blendMode;let h=e.length||-1;const d=e.hierarchy||[];for(let g=0;g<d.length;g++){const _=d[g].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const y={};let w;for(w=0;w<_.length;w++)if(_[w].morphTargets)for(let b=0;b<_[w].morphTargets.length;b++)y[_[w].morphTargets[b]]=-1;for(const b in y){const C=[],S=[];for(let T=0;T!==_[w].morphTargets.length;++T){const R=_[w];C.push(R.time),S.push(R.morphTarget===b?1:0)}r.push(new Vp(".morphTargetInfluence["+b+"]",C,S))}h=y.length*o}else{const y=".bones["+t[g].name+"]";i(Wp,y+".position",_,"pos",r),i(ld,y+".quaternion",_,"rot",r),i(Wp,y+".scale",_,"scl",r)}}return r.length===0?null:new this(s,h,r,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function sU(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vp;case"vector":case"vector2":case"vector3":case"vector4":return Wp;case"color":return ST;case"quaternion":return ld;case"bool":case"boolean":return ec;case"string":return tc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function oU(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=sU(n.type);if(n.times===void 0){const t=[],i=[];mn.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Hu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class aU{constructor(e,t,i){const r=this;let s=!1,o=0,u=0,h;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(p){u++,s===!1&&r.onStart!==void 0&&r.onStart(p,o,u),s=!0},this.itemEnd=function(p){o++,r.onProgress!==void 0&&r.onProgress(p,o,u),o===u&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return h?h(p):p},this.setURLModifier=function(p){return h=p,this},this.addHandler=function(p,g){return d.push(p,g),this},this.removeHandler=function(p){const g=d.indexOf(p);return g!==-1&&d.splice(g,2),this},this.getHandler=function(p){for(let g=0,_=d.length;g<_;g+=2){const y=d[g],w=d[g+1];if(y.global&&(y.lastIndex=0),y.test(p))return w}return null}}}const lU=new aU;class aa{constructor(e){this.manager=e!==void 0?e:lU,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Yr={};class uU extends aa{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Hu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;if(Yr[e]!==void 0){Yr[e].push({onLoad:t,onProgress:i,onError:r});return}const u=/^data:(.*?)(;base64)?,(.*)$/,h=e.match(u);let d;if(h){const p=h[1],g=!!h[2];let _=h[3];_=decodeURIComponent(_),g&&(_=atob(_));try{let y;const w=(this.responseType||"").toLowerCase();switch(w){case"arraybuffer":case"blob":const b=new Uint8Array(_.length);for(let S=0;S<_.length;S++)b[S]=_.charCodeAt(S);w==="blob"?y=new Blob([b.buffer],{type:p}):y=b.buffer;break;case"document":y=new DOMParser().parseFromString(_,p);break;case"json":y=JSON.parse(_);break;default:y=_;break}setTimeout(function(){t&&t(y),s.manager.itemEnd(e)},0)}catch(y){setTimeout(function(){r&&r(y),s.manager.itemError(e),s.manager.itemEnd(e)},0)}}else{Yr[e]=[],Yr[e].push({onLoad:t,onProgress:i,onError:r}),d=new XMLHttpRequest,d.open("GET",e,!0),d.addEventListener("load",function(p){const g=this.response,_=Yr[e];if(delete Yr[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Hu.add(e,g);for(let y=0,w=_.length;y<w;y++){const b=_[y];b.onLoad&&b.onLoad(g)}s.manager.itemEnd(e)}else{for(let y=0,w=_.length;y<w;y++){const b=_[y];b.onError&&b.onError(p)}s.manager.itemError(e),s.manager.itemEnd(e)}},!1),d.addEventListener("progress",function(p){const g=Yr[e];for(let _=0,y=g.length;_<y;_++){const w=g[_];w.onProgress&&w.onProgress(p)}},!1),d.addEventListener("error",function(p){const g=Yr[e];delete Yr[e];for(let _=0,y=g.length;_<y;_++){const w=g[_];w.onError&&w.onError(p)}s.manager.itemError(e),s.manager.itemEnd(e)},!1),d.addEventListener("abort",function(p){const g=Yr[e];delete Yr[e];for(let _=0,y=g.length;_<y;_++){const w=g[_];w.onError&&w.onError(p)}s.manager.itemError(e),s.manager.itemEnd(e)},!1),this.responseType!==void 0&&(d.responseType=this.responseType),this.withCredentials!==void 0&&(d.withCredentials=this.withCredentials),d.overrideMimeType&&d.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const p in this.requestHeader)d.setRequestHeader(p,this.requestHeader[p]);d.send(null)}return s.manager.itemStart(e),d}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class MT extends aa{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Hu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const u=document.createElementNS("http://www.w3.org/1999/xhtml","img");function h(){u.removeEventListener("load",h,!1),u.removeEventListener("error",d,!1),Hu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(p){u.removeEventListener("load",h,!1),u.removeEventListener("error",d,!1),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}return u.addEventListener("load",h,!1),u.addEventListener("error",d,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),s.manager.itemStart(e),u.src=e,u}}class cU extends aa{constructor(e){super(e)}load(e,t,i,r){const s=new fm,o=new MT(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let u=0;function h(d){o.load(e[d],function(p){s.images[d]=p,u++,u===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let d=0;d<e.length;++d)h(d);return s}}class hU extends aa{constructor(e){super(e)}load(e,t,i,r){const s=new ei,o=new MT(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(u){s.image=u;const h=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;s.format=h?Qo:cr,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class dU extends Dr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new _m(t,e))}getPoint(e){const t=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=t){const s=i[r]-t,o=this.curves[r],u=o.getLength(),h=u===0?0:1-s/u;return o.getPointAt(h)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],u=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,h=o.getPoints(u);for(let d=0;d<h.length;d++){const p=h[d];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new gT[r.type]().fromJSON(r))}return this}}class Vy extends dU{constructor(e){super(),this.type="Path",this.currentPoint=new Ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new _m(this.currentPoint.clone(),new Ze(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Vv(this.currentPoint.clone(),new Ze(e,t),new Ze(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const u=new Hv(this.currentPoint.clone(),new Ze(e,t),new Ze(i,r),new Ze(s,o));return this.curves.push(u),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Wv(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+u,t+h,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,u,h){const d=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+d,t+p,i,r,s,o,u,h),this}absellipse(e,t,i,r,s,o,u,h){const d=new gm(e,t,i,r,s,o,u,h);if(this.curves.length>0){const g=d.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class vm extends Vy{constructor(e){super(e),this.uuid=es(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Vy().fromJSON(r))}return this}}class Ls extends $t{constructor(e,t=1){super(),this.type="Light",this.color=new ht(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}Ls.prototype.isLight=!0;class fU extends Ls{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy($t.DefaultUp),this.updateMatrix(),this.groundColor=new ht(t)}copy(e){return Ls.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}fU.prototype.isHemisphereLight=!0;const GS=new yt,$S=new ie,ZS=new ie;class Gv{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ze(512,512),this.map=null,this.mapPass=null,this.matrix=new yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new pm,this._frameExtents=new Ze(1,1),this._viewportCount=1,this._viewports=[new Qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;$S.setFromMatrixPosition(e.matrixWorld),t.position.copy($S),ZS.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ZS),t.updateMatrixWorld(),GS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ET extends Gv{constructor(){super(new jn(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=$h*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}ET.prototype.isSpotLightShadow=!0;class pU extends Ls{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy($t.DefaultUp),this.updateMatrix(),this.target=new $t,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new ET}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}pU.prototype.isSpotLight=!0;const qS=new yt,oh=new ie,$_=new ie;class TT extends Gv{constructor(){super(new jn(90,1,.5,500)),this._frameExtents=new Ze(4,2),this._viewportCount=6,this._viewports=[new Qt(2,1,1,1),new Qt(0,1,1,1),new Qt(3,1,1,1),new Qt(1,1,1,1),new Qt(3,0,1,1),new Qt(1,0,1,1)],this._cubeDirections=[new ie(1,0,0),new ie(-1,0,0),new ie(0,0,1),new ie(0,0,-1),new ie(0,1,0),new ie(0,-1,0)],this._cubeUps=[new ie(0,1,0),new ie(0,1,0),new ie(0,1,0),new ie(0,1,0),new ie(0,0,1),new ie(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),oh.setFromMatrixPosition(e.matrixWorld),i.position.copy(oh),$_.copy(i.position),$_.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt($_),i.updateMatrixWorld(),r.makeTranslation(-oh.x,-oh.y,-oh.z),qS.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qS)}}TT.prototype.isPointLightShadow=!0;class mU extends Ls{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new TT}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}mU.prototype.isPointLight=!0;class LT extends Gv{constructor(){super(new Pu(-5,5,5,-5,.5,500))}}LT.prototype.isDirectionalLightShadow=!0;class CT extends Ls{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy($t.DefaultUp),this.updateMatrix(),this.target=new $t,this.shadow=new LT}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}CT.prototype.isDirectionalLight=!0;class PT extends Ls{constructor(e,t){super(e,t),this.type="AmbientLight"}}PT.prototype.isAmbientLight=!0;class gU extends Ls{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}gU.prototype.isRectAreaLight=!0;class AT{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ie)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}AT.prototype.isSphericalHarmonics3=!0;class $v extends Ls{constructor(e=new AT,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}$v.prototype.isLightProbe=!0;class _U{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}}class yU extends en{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}yU.prototype.isInstancedBufferGeometry=!0;class vU extends aa{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Hu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,fetch(e,u).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){Hu.add(e,h),t&&t(h),s.manager.itemEnd(e)}).catch(function(h){r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}vU.prototype.isImageBitmapLoader=!0;let dp;const xU={getContext:function(){return dp===void 0&&(dp=new(window.AudioContext||window.webkitAudioContext)),dp},setContext:function(n){dp=n}};class wU extends aa{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new uU(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const h=u.slice(0);xU.getContext().decodeAudioData(h,function(p){t(p)})}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},i,r)}}class bU extends $v{constructor(e,t,i=1){super(void 0,i);const r=new ht().set(e),s=new ht().set(t),o=new ie(r.r,r.g,r.b),u=new ie(s.r,s.g,s.b),h=Math.sqrt(Math.PI),d=h*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(u).multiplyScalar(h),this.sh.coefficients[1].copy(o).sub(u).multiplyScalar(d)}}bU.prototype.isHemisphereLightProbe=!0;class SU extends $v{constructor(e,t=1){super(void 0,t);const i=new ht().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}SU.prototype.isAmbientLightProbe=!0;class MU extends $t{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class EU{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let u=0;u!==r;++u)i[s+u]=i[u];o=t}else{o+=t;const u=t/o;this._mixBufferRegion(i,s,0,u,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const h=t*this._origIndex;this._mixBufferRegion(i,r,h,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let h=t,d=t+t;h!==d;++h)if(i[h]!==i[h+t]){u.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){mi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;mi.multiplyQuaternionsFlat(e,o,e,t,e,i),mi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let u=0;u!==s;++u){const h=t+u;e[h]=e[h]*o+e[i+u]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const u=t+o;e[u]=e[u]+e[i+o]*r}}}const Zv="\\[\\]\\.:\\/",TU=new RegExp("["+Zv+"]","g"),qv="[^"+Zv+"]",LU="[^"+Zv.replace("\\.","")+"]",CU=/((?:WC+[\/:])*)/.source.replace("WC",qv),PU=/(WCOD+)?/.source.replace("WCOD",LU),AU=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qv),kU=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qv),RU=new RegExp("^"+CU+PU+AU+kU+"$"),IU=["material","materials","bones"];class DU{constructor(e,t,i){const r=i||Zt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Zt{constructor(e,t,i){this.path=t,this.parsedPath=i||Zt.parseTrackName(t),this.node=Zt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Zt.Composite(e,t,i):new Zt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(TU,"")}static parseTrackName(e){const t=RU.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);IU.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const u=s[o];if(u.name===t||u.uuid===t)return u;const h=i(u.children);if(h)return h}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Zt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let d=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===d){d=p;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[r];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}h=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(h=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Zt.Composite=DU;Zt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Zt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Zt.prototype.GetterByBindingType=[Zt.prototype._getValue_direct,Zt.prototype._getValue_array,Zt.prototype._getValue_arrayElement,Zt.prototype._getValue_toArray];Zt.prototype.SetterByBindingTypeAndVersioning=[[Zt.prototype._setValue_direct,Zt.prototype._setValue_direct_setNeedsUpdate,Zt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_array,Zt.prototype._setValue_array_setNeedsUpdate,Zt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_arrayElement,Zt.prototype._setValue_arrayElement_setNeedsUpdate,Zt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_fromArray,Zt.prototype._setValue_fromArray_setNeedsUpdate,Zt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class NU{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,u=new Array(o),h={endingStart:bu,endingEnd:bu};for(let d=0;d!==o;++d){const p=s[d].createInterpolant(null);u[d]=p,p.settings=h}this._interpolantSettings=h,this._interpolants=u,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=aN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,u=r/s;e.warp(1,o,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=r._lendControlInterpolant(),this._timeScaleInterpolant=u);const h=u.parameterPositions,d=u.sampleValues;return h[0]=s,h[1]=s+i,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const h=(e-s)*i;if(h<0||i===0)return;this._startTime=null,t=i*h}t*=this._updateTimeScale(e);const o=this._updateTime(t),u=this._updateWeight(e);if(u>0){const h=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case NE:for(let p=0,g=h.length;p!==g;++p)h[p].evaluate(o),d[p].accumulateAdditive(u);break;case Lv:default:for(let p=0,g=h.length;p!==g;++p)h[p].evaluate(o),d[p].accumulate(r,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===lN;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===oN){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const u=Math.floor(r/t);r-=t*u,s+=Math.abs(u);const h=this.repetitions-s;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Su,r.endingEnd=Su):(e?r.endingStart=this.zeroSlopeAtStart?Su:bu:r.endingStart=Up,t?r.endingEnd=this.zeroSlopeAtEnd?Su:bu:r.endingEnd=Up)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const u=o.parameterPositions,h=o.sampleValues;return u[0]=s,h[0]=t,u[1]=s+e,h[1]=i,this}}class OU extends ol{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,u=e._interpolants,h=i.uuid,d=this._bindingsByRootAndName;let p=d[h];p===void 0&&(p={},d[h]=p);for(let g=0;g!==s;++g){const _=r[g],y=_.name;let w=p[y];if(w!==void 0)o[g]=w;else{if(w=o[g],w!==void 0){w._cacheIndex===null&&(++w.referenceCount,this._addInactiveBinding(w,h,y));continue}const b=t&&t._propertyBindings[g].binding.parsedPath;w=new EU(Zt.create(i,y,b),_.ValueTypeName,_.getValueSize()),++w.referenceCount,this._addInactiveBinding(w,h,y),o[g]=w}u[g].resultBuffer=w.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const u=o.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,u=o[s],h=u.knownActions,d=h[h.length-1],p=e._byClipCacheIndex;d._byClipCacheIndex=p,h[p]=d,h.pop(),e._byClipCacheIndex=null;const g=u.actionByRoot,_=(e._localRoot||this._root).uuid;delete g[_],h.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,u=o[r],h=t[t.length-1],d=e._cacheIndex;h._cacheIndex=d,t[d]=h,t.pop(),delete u[s],Object.keys(u).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new bT(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?jS.findByName(r,e):e;const u=o!==null?o.uuid:e,h=this._actionsByClip[u];let d=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Lv),h!==void 0){const g=h.actionByRoot[s];if(g!==void 0&&g.blendMode===i)return g;d=h.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const p=new NU(this,o,t,i);return this._bindAction(p,d),this._addInactiveAction(p,u,s),p}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?jS.findByName(i,e):e,o=s?s.uuid:e,u=this._actionsByClip[o];return u!==void 0&&u.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==i;++d)t[d]._update(r,e,s,o);const u=this._bindings,h=this._nActiveBindings;for(let d=0;d!==h;++d)u[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let u=0,h=o.length;u!==h;++u){const d=o[u];this._deactivateAction(d);const p=d._cacheIndex,g=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(d)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const u=i[o].actionByRoot,h=u[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const u=s[o];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}OU.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class zU extends ad{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}zU.prototype.isInstancedInterleavedBuffer=!0;class XS{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Li(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class FU extends $t{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}FU.prototype.isImmediateRenderObject=!0;const Zo=new ie,fp=new yt,Z_=new yt;class BU extends Bv{constructor(e){const t=kT(e),i=new en,r=[],s=[],o=new ht(0,0,1),u=new ht(0,1,0);for(let d=0;d<t.length;d++){const p=t[d];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(u.r,u.g,u.b))}i.setAttribute("position",new qn(r,3)),i.setAttribute("color",new qn(s,3));const h=new Qu({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,h),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Z_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const u=t[s];u.parent&&u.parent.isBone&&(fp.multiplyMatrices(Z_,u.matrixWorld),Zo.setFromMatrixPosition(fp),r.setXYZ(o,Zo.x,Zo.y,Zo.z),fp.multiplyMatrices(Z_,u.parent.matrixWorld),Zo.setFromMatrixPosition(fp),r.setXYZ(o+1,Zo.x,Zo.y,Zo.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function kT(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,kT(n.children[t]));return e}class RT extends Bv{constructor(e=10,t=10,i=4473924,r=8947848){i=new ht(i),r=new ht(r);const s=t/2,o=e/t,u=e/2,h=[],d=[];for(let _=0,y=0,w=-u;_<=t;_++,w+=o){h.push(-u,0,w,u,0,w),h.push(w,0,-u,w,0,u);const b=_===s?i:r;b.toArray(d,y),y+=3,b.toArray(d,y),y+=3,b.toArray(d,y),y+=3,b.toArray(d,y),y+=3}const p=new en;p.setAttribute("position",new qn(h,3)),p.setAttribute("color",new qn(d,3));const g=new Qu({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}}const UU=new Float32Array(1);new Int32Array(UU.buffer);Dr.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Dr.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};Vy.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};RT.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};BU.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};aa.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),_U.extractUrlBase(n)};aa.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Nr.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};Nr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Nr.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Nr.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};Nr.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};Yu.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};pm.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};Qn.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Qn.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Qn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Qn.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Qn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Qn.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};yt.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};yt.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};yt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new ie().setFromMatrixColumn(this,3)};yt.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};yt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};yt.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};yt.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};yt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};yt.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};yt.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};yt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};yt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};yt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};yt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};yt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};yt.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};yt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};yt.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)};yt.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};xs.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};mi.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};mi.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};al.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};al.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};al.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};zn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};zn.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};zn.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};zn.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};zn.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};zn.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),zn.getBarycoord(n,e,t,i,r)};zn.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),zn.getNormal(n,e,t,i)};vm.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};vm.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ll(this,n)};vm.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new jv(this,n)};Ze.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Ze.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};Ze.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};ie.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};ie.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};ie.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};ie.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};ie.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};ie.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};ie.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};ie.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};ie.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Qt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Qt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};$t.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};$t.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};$t.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};$t.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};$t.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties($t.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Ci.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Ci.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),uN},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});cT.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};jn.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(Ls.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(Fn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Hp},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Hp)}}});Fn.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Hp:Gh),this};Fn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Fn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};en.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};en.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Fn(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};en.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};en.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};en.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};en.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};en.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(en.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});ad.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Hp:Gh),this};ad.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};ll.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};ll.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};ll.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};zv.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(_i.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ht}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===kE}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(nl.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});Kt.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)};Kt.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};Kt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Kt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Kt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Kt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Kt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Kt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Kt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Kt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Kt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Kt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Kt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Kt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Kt.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};Kt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Kt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Kt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Kt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Kt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Kt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Kt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Kt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Kt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Kt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Kt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?dm:ji}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(oT.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Ts.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});MU.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new wU().load(n,function(i){e.setBuffer(i)}),this};Iv.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};Iv.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)};Xu.crossOrigin=void 0;Xu.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new hU;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Xu.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new cU;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Xu.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Xu.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:PE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=PE);var HU=Object.defineProperty,VU=(n,e,t)=>e in n?HU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,WU=(n,e,t)=>(VU(n,e+"",t),t);class jU{constructor(){WU(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var GU=Object.defineProperty,$U=(n,e,t)=>e in n?GU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gt=(n,e,t)=>($U(n,typeof e!="symbol"?e+"":e,t),t);const pp=new al,YS=new xs,ZU=Math.cos(70*(Math.PI/180)),KS=(n,e)=>(n%e+e)%e;class qU extends jU{constructor(e,t){super(),gt(this,"object"),gt(this,"domElement"),gt(this,"enabled",!0),gt(this,"target",new ie),gt(this,"minDistance",0),gt(this,"maxDistance",1/0),gt(this,"minZoom",0),gt(this,"maxZoom",1/0),gt(this,"minPolarAngle",0),gt(this,"maxPolarAngle",Math.PI),gt(this,"minAzimuthAngle",-1/0),gt(this,"maxAzimuthAngle",1/0),gt(this,"enableDamping",!1),gt(this,"dampingFactor",.05),gt(this,"enableZoom",!0),gt(this,"zoomSpeed",1),gt(this,"enableRotate",!0),gt(this,"rotateSpeed",1),gt(this,"enablePan",!0),gt(this,"panSpeed",1),gt(this,"screenSpacePanning",!0),gt(this,"keyPanSpeed",7),gt(this,"zoomToCursor",!1),gt(this,"autoRotate",!1),gt(this,"autoRotateSpeed",2),gt(this,"reverseOrbit",!1),gt(this,"reverseHorizontalOrbit",!1),gt(this,"reverseVerticalOrbit",!1),gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gt(this,"mouseButtons",{LEFT:Yl.ROTATE,MIDDLE:Yl.DOLLY,RIGHT:Yl.PAN}),gt(this,"touches",{ONE:Kl.ROTATE,TWO:Kl.DOLLY_PAN}),gt(this,"target0"),gt(this,"position0"),gt(this,"zoom0"),gt(this,"_domElementKeyEvents",null),gt(this,"getPolarAngle"),gt(this,"getAzimuthalAngle"),gt(this,"setPolarAngle"),gt(this,"setAzimuthalAngle"),gt(this,"getDistance"),gt(this,"getZoomScale"),gt(this,"listenToKeyEvents"),gt(this,"stopListenToKeyEvents"),gt(this,"saveState"),gt(this,"reset"),gt(this,"update"),gt(this,"connect"),gt(this,"dispose"),gt(this,"dollyIn"),gt(this,"dollyOut"),gt(this,"getScale"),gt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=le=>{let Be=KS(le,2*Math.PI),tt=p.phi;tt<0&&(tt+=2*Math.PI),Be<0&&(Be+=2*Math.PI);let Ct=Math.abs(Be-tt);2*Math.PI-Ct<Ct&&(Be<tt?Be+=2*Math.PI:tt+=2*Math.PI),g.phi=Be-tt,i.update()},this.setAzimuthalAngle=le=>{let Be=KS(le,2*Math.PI),tt=p.theta;tt<0&&(tt+=2*Math.PI),Be<0&&(Be+=2*Math.PI);let Ct=Math.abs(Be-tt);2*Math.PI-Ct<Ct&&(Be<tt?Be+=2*Math.PI:tt+=2*Math.PI),g.theta=Be-tt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=le=>{le.addEventListener("keydown",Le),this._domElementKeyEvents=le},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Le),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),h=u.NONE},this.update=(()=>{const le=new ie,Be=new ie(0,1,0),tt=new mi().setFromUnitVectors(e.up,Be),Ct=tt.clone().invert(),Jt=new ie,bn=new mi,En=2*Math.PI;return function(){const ns=i.object.position;tt.setFromUnitVectors(e.up,Be),Ct.copy(tt).invert(),le.copy(ns).sub(i.target),le.applyQuaternion(tt),p.setFromVector3(le),i.autoRotate&&h===u.NONE&&Q(K()),i.enableDamping?(p.theta+=g.theta*i.dampingFactor,p.phi+=g.phi*i.dampingFactor):(p.theta+=g.theta,p.phi+=g.phi);let Xn=i.minAzimuthAngle,ti=i.maxAzimuthAngle;isFinite(Xn)&&isFinite(ti)&&(Xn<-Math.PI?Xn+=En:Xn>Math.PI&&(Xn-=En),ti<-Math.PI?ti+=En:ti>Math.PI&&(ti-=En),Xn<=ti?p.theta=Math.max(Xn,Math.min(ti,p.theta)):p.theta=p.theta>(Xn+ti)/2?Math.max(Xn,p.theta):Math.min(ti,p.theta)),p.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,p.phi)),p.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(y,i.dampingFactor):i.target.add(y),i.zoomToCursor&&W||i.object.isOrthographicCamera?p.radius=D(p.radius):p.radius=D(p.radius*_),le.setFromSpherical(p),le.applyQuaternion(Ct),ns.copy(i.target).add(le),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(g.theta*=1-i.dampingFactor,g.phi*=1-i.dampingFactor,y.multiplyScalar(1-i.dampingFactor)):(g.set(0,0,0),y.set(0,0,0));let vi=!1;if(i.zoomToCursor&&W){let Zi=null;if(i.object instanceof jn&&i.object.isPerspectiveCamera){const ni=le.length();Zi=D(ni*_);const xi=ni-Zi;i.object.position.addScaledVector(N,xi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const ni=new ie(I.x,I.y,0);ni.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/_)),i.object.updateProjectionMatrix(),vi=!0;const xi=new ie(I.x,I.y,0);xi.unproject(i.object),i.object.position.sub(xi).add(ni),i.object.updateMatrixWorld(),Zi=le.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Zi!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Zi).add(i.object.position):(pp.origin.copy(i.object.position),pp.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(pp.direction))<ZU?e.lookAt(i.target):(YS.setFromNormalAndCoplanarPoint(i.object.up,i.target),pp.intersectPlane(YS,i.target))))}else i.object instanceof Pu&&i.object.isOrthographicCamera&&(vi=_!==1,vi&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/_)),i.object.updateProjectionMatrix()));return _=1,W=!1,vi||Jt.distanceToSquared(i.object.position)>d||8*(1-bn.dot(i.object.quaternion))>d?(i.dispatchEvent(r),Jt.copy(i.object.position),bn.copy(i.object.quaternion),vi=!1,!0):!1}})(),this.connect=le=>{i.domElement=le,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Xe),i.domElement.addEventListener("pointerdown",Ke),i.domElement.addEventListener("pointercancel",Je),i.domElement.addEventListener("wheel",q)},this.dispose=()=>{var le,Be,tt,Ct,Jt,bn;i.domElement&&(i.domElement.style.touchAction="auto"),(le=i.domElement)==null||le.removeEventListener("contextmenu",Xe),(Be=i.domElement)==null||Be.removeEventListener("pointerdown",Ke),(tt=i.domElement)==null||tt.removeEventListener("pointercancel",Je),(Ct=i.domElement)==null||Ct.removeEventListener("wheel",q),(Jt=i.domElement)==null||Jt.ownerDocument.removeEventListener("pointermove",rt),(bn=i.domElement)==null||bn.ownerDocument.removeEventListener("pointerup",Je),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Le)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=u.NONE;const d=1e-6,p=new XS,g=new XS;let _=1;const y=new ie,w=new Ze,b=new Ze,C=new Ze,S=new Ze,T=new Ze,R=new Ze,F=new Ze,k=new Ze,z=new Ze,N=new ie,I=new Ze;let W=!1;const j=[],U={};function K(){return 2*Math.PI/60/60*i.autoRotateSpeed}function Y(){return Math.pow(.95,i.zoomSpeed)}function Q(le){i.reverseOrbit||i.reverseHorizontalOrbit?g.theta+=le:g.theta-=le}function ne(le){i.reverseOrbit||i.reverseVerticalOrbit?g.phi+=le:g.phi-=le}const oe=(()=>{const le=new ie;return function(tt,Ct){le.setFromMatrixColumn(Ct,0),le.multiplyScalar(-tt),y.add(le)}})(),ae=(()=>{const le=new ie;return function(tt,Ct){i.screenSpacePanning===!0?le.setFromMatrixColumn(Ct,1):(le.setFromMatrixColumn(Ct,0),le.crossVectors(i.object.up,le)),le.multiplyScalar(tt),y.add(le)}})(),ee=(()=>{const le=new ie;return function(tt,Ct){const Jt=i.domElement;if(Jt&&i.object instanceof jn&&i.object.isPerspectiveCamera){const bn=i.object.position;le.copy(bn).sub(i.target);let En=le.length();En*=Math.tan(i.object.fov/2*Math.PI/180),oe(2*tt*En/Jt.clientHeight,i.object.matrix),ae(2*Ct*En/Jt.clientHeight,i.object.matrix)}else Jt&&i.object instanceof Pu&&i.object.isOrthographicCamera?(oe(tt*(i.object.right-i.object.left)/i.object.zoom/Jt.clientWidth,i.object.matrix),ae(Ct*(i.object.top-i.object.bottom)/i.object.zoom/Jt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function pe(le){i.object instanceof jn&&i.object.isPerspectiveCamera||i.object instanceof Pu&&i.object.isOrthographicCamera?_=le:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O(le){pe(_/le)}function G(le){pe(_*le)}function se(le){if(!i.zoomToCursor||!i.domElement)return;W=!0;const Be=i.domElement.getBoundingClientRect(),tt=le.clientX-Be.left,Ct=le.clientY-Be.top,Jt=Be.width,bn=Be.height;I.x=tt/Jt*2-1,I.y=-(Ct/bn)*2+1,N.set(I.x,I.y,1).unproject(i.object).sub(i.object.position).normalize()}function D(le){return Math.max(i.minDistance,Math.min(i.maxDistance,le))}function fe(le){w.set(le.clientX,le.clientY)}function ve(le){se(le),F.set(le.clientX,le.clientY)}function te(le){S.set(le.clientX,le.clientY)}function Ne(le){b.set(le.clientX,le.clientY),C.subVectors(b,w).multiplyScalar(i.rotateSpeed);const Be=i.domElement;Be&&(Q(2*Math.PI*C.x/Be.clientHeight),ne(2*Math.PI*C.y/Be.clientHeight)),w.copy(b),i.update()}function Pe(le){k.set(le.clientX,le.clientY),z.subVectors(k,F),z.y>0?O(Y()):z.y<0&&G(Y()),F.copy(k),i.update()}function ke(le){T.set(le.clientX,le.clientY),R.subVectors(T,S).multiplyScalar(i.panSpeed),ee(R.x,R.y),S.copy(T),i.update()}function ze(le){se(le),le.deltaY<0?G(Y()):le.deltaY>0&&O(Y()),i.update()}function We(le){let Be=!1;switch(le.code){case i.keys.UP:ee(0,i.keyPanSpeed),Be=!0;break;case i.keys.BOTTOM:ee(0,-i.keyPanSpeed),Be=!0;break;case i.keys.LEFT:ee(i.keyPanSpeed,0),Be=!0;break;case i.keys.RIGHT:ee(-i.keyPanSpeed,0),Be=!0;break}Be&&(le.preventDefault(),i.update())}function be(){if(j.length==1)w.set(j[0].pageX,j[0].pageY);else{const le=.5*(j[0].pageX+j[1].pageX),Be=.5*(j[0].pageY+j[1].pageY);w.set(le,Be)}}function Re(){if(j.length==1)S.set(j[0].pageX,j[0].pageY);else{const le=.5*(j[0].pageX+j[1].pageX),Be=.5*(j[0].pageY+j[1].pageY);S.set(le,Be)}}function De(){const le=j[0].pageX-j[1].pageX,Be=j[0].pageY-j[1].pageY,tt=Math.sqrt(le*le+Be*Be);F.set(0,tt)}function je(){i.enableZoom&&De(),i.enablePan&&Re()}function Ie(){i.enableZoom&&De(),i.enableRotate&&be()}function X(le){if(j.length==1)b.set(le.pageX,le.pageY);else{const tt=gn(le),Ct=.5*(le.pageX+tt.x),Jt=.5*(le.pageY+tt.y);b.set(Ct,Jt)}C.subVectors(b,w).multiplyScalar(i.rotateSpeed);const Be=i.domElement;Be&&(Q(2*Math.PI*C.x/Be.clientHeight),ne(2*Math.PI*C.y/Be.clientHeight)),w.copy(b)}function $(le){if(j.length==1)T.set(le.pageX,le.pageY);else{const Be=gn(le),tt=.5*(le.pageX+Be.x),Ct=.5*(le.pageY+Be.y);T.set(tt,Ct)}R.subVectors(T,S).multiplyScalar(i.panSpeed),ee(R.x,R.y),S.copy(T)}function we(le){const Be=gn(le),tt=le.pageX-Be.x,Ct=le.pageY-Be.y,Jt=Math.sqrt(tt*tt+Ct*Ct);k.set(0,Jt),z.set(0,Math.pow(k.y/F.y,i.zoomSpeed)),O(z.y),F.copy(k)}function Ae(le){i.enableZoom&&we(le),i.enablePan&&$(le)}function $e(le){i.enableZoom&&we(le),i.enableRotate&&X(le)}function Ke(le){var Be,tt;i.enabled!==!1&&(j.length===0&&((Be=i.domElement)==null||Be.ownerDocument.addEventListener("pointermove",rt),(tt=i.domElement)==null||tt.ownerDocument.addEventListener("pointerup",Je)),ut(le),le.pointerType==="touch"?Se(le):st(le))}function rt(le){i.enabled!==!1&&(le.pointerType==="touch"?Fe(le):he(le))}function Je(le){var Be,tt,Ct;At(le),j.length===0&&((Be=i.domElement)==null||Be.releasePointerCapture(le.pointerId),(tt=i.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",rt),(Ct=i.domElement)==null||Ct.ownerDocument.removeEventListener("pointerup",Je)),i.dispatchEvent(o),h=u.NONE}function st(le){let Be;switch(le.button){case 0:Be=i.mouseButtons.LEFT;break;case 1:Be=i.mouseButtons.MIDDLE;break;case 2:Be=i.mouseButtons.RIGHT;break;default:Be=-1}switch(Be){case Yl.DOLLY:if(i.enableZoom===!1)return;ve(le),h=u.DOLLY;break;case Yl.ROTATE:if(le.ctrlKey||le.metaKey||le.shiftKey){if(i.enablePan===!1)return;te(le),h=u.PAN}else{if(i.enableRotate===!1)return;fe(le),h=u.ROTATE}break;case Yl.PAN:if(le.ctrlKey||le.metaKey||le.shiftKey){if(i.enableRotate===!1)return;fe(le),h=u.ROTATE}else{if(i.enablePan===!1)return;te(le),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&i.dispatchEvent(s)}function he(le){if(i.enabled!==!1)switch(h){case u.ROTATE:if(i.enableRotate===!1)return;Ne(le);break;case u.DOLLY:if(i.enableZoom===!1)return;Pe(le);break;case u.PAN:if(i.enablePan===!1)return;ke(le);break}}function q(le){i.enabled===!1||i.enableZoom===!1||h!==u.NONE&&h!==u.ROTATE||(le.preventDefault(),i.dispatchEvent(s),ze(le),i.dispatchEvent(o))}function Le(le){i.enabled===!1||i.enablePan===!1||We(le)}function Se(le){switch(Ot(le),j.length){case 1:switch(i.touches.ONE){case Kl.ROTATE:if(i.enableRotate===!1)return;be(),h=u.TOUCH_ROTATE;break;case Kl.PAN:if(i.enablePan===!1)return;Re(),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(i.touches.TWO){case Kl.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;je(),h=u.TOUCH_DOLLY_PAN;break;case Kl.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ie(),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&i.dispatchEvent(s)}function Fe(le){switch(Ot(le),h){case u.TOUCH_ROTATE:if(i.enableRotate===!1)return;X(le),i.update();break;case u.TOUCH_PAN:if(i.enablePan===!1)return;$(le),i.update();break;case u.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ae(le),i.update();break;case u.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;$e(le),i.update();break;default:h=u.NONE}}function Xe(le){i.enabled!==!1&&le.preventDefault()}function ut(le){j.push(le)}function At(le){delete U[le.pointerId];for(let Be=0;Be<j.length;Be++)if(j[Be].pointerId==le.pointerId){j.splice(Be,1);return}}function Ot(le){let Be=U[le.pointerId];Be===void 0&&(Be=new Ze,U[le.pointerId]=Be),Be.set(le.pageX,le.pageY)}function gn(le){const Be=le.pointerId===j[0].pointerId?j[1]:j[0];return U[Be.pointerId]}this.dollyIn=(le=Y())=>{G(le),i.update()},this.dollyOut=(le=Y())=>{O(le),i.update()},this.getScale=()=>_,this.setScale=le=>{pe(le),i.update()},this.getZoomScale=()=>Y(),t!==void 0&&this.connect(t),this.update()}}function XU(n,e,t,i=0,r=0,s="default"){const o=n.current;if(!o)return;for(;o.firstChild;)o.removeChild(o.firstChild);const u=new zv;u.background=new ht(1120295);const h=o.clientWidth||600,d=o.clientHeight||400,p=new jn(45,h/d,.1,1e4);p.position.set(0,-200,150);const g=new Kt({canvas:o,antialias:!0});g.setSize(h,d),u.add(new PT(16777215,.6));const _=new CT(16777215,.8);_.position.set(100,100,200),u.add(_);const y=F=>new ie(F.lon,F.lat,-(F.depth||0)),w=e.map(y),b=t?.map(y)||[];let C=null;if(s==="subduction"){const F=new vm(w.map(W=>new Ze(W.x,W.y))),k=b.length>0?Math.max(...b.map(W=>-W.z)):50,z=new ll(F,{depth:k,bevelEnabled:!1}),N=new wT({color:3900150,opacity:.7,transparent:!0,side:tl}),I=new Ci(z,N);I.rotation.x=f_.degToRad(-90),I.rotation.z=f_.degToRad(r||0),I.rotation.y=f_.degToRad(i||0),u.add(I),C=I}else{const F=new Qu({color:2282478}),k=new Fy(new en().setFromPoints(w),F);if(u.add(k),C=k,b.length>0){const z=new Fy(new en().setFromPoints(b),F);u.add(z)}}const S=new RT(200,20);u.add(S);const T=new qU(p,g.domElement);if(T.enableDamping=!0,T.target.set(0,0,0),C){const F=new Nr().setFromObject(C),k=new ie;F.getCenter(k),T.target.copy(k),p.position.set(k.x+200,k.y-200,k.z+150)}window.addEventListener("resize",()=>{const F=o.clientWidth||600,k=o.clientHeight||400;p.aspect=F/k,p.updateProjectionMatrix(),g.setSize(F,k)});function R(){requestAnimationFrame(R),T.update(),g.render(u,p)}R()}function xm({title:n,children:e,onClose:t,width:i="w-[600px]"}){return V.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:V.jsxs("div",{className:`bg-[var(--card)] text-[var(--text)] rounded-xl shadow-xl p-6 max-h-[90vh] overflow-y-auto transition-colors ${i}`,children:[V.jsxs("div",{className:"flex justify-between items-center mb-4",children:[V.jsx("h2",{className:"text-lg font-bold",children:n}),V.jsx("button",{onClick:t,className:"text-[var(--text)] hover:opacity-70 text-xl font-bold",children:"✕"})]}),V.jsx("div",{children:e})]})})}function YU({onClose:n,onSaved:e,initialData:t}){const[i,r]=me.useState({name:"",mechanism:"",minMag:"",maxMag:"",coordsUpText:"",coordsDownText:"",gr_beta:"",gr_rate:"",gr_weight:"",dipAngle:"",strikeAngle:""}),[s,o]=me.useState(!1),[u,h]=me.useState([]),[d,p]=me.useState([]),[g,_]=me.useState(!1),[y,w]=me.useState([]),b=me.useRef(null);me.useEffect(()=>{fetch("https://sha-api-production.up.railway.app/api/v1/mechanism/").then(k=>k.json()).then(k=>w(k)).catch(k=>console.error("Gagal load mechanisms:",k))},[]),me.useEffect(()=>{t&&r({name:t.name||"",mechanism:t.mechanism||"",minMag:t.min_mag??"",maxMag:t.max_mag??"",coordsUpText:(t.coords_up||[]).map(k=>`${k.lat} ${k.lon} ${k.depth}`).join(`
`),coordsDownText:(t.coords_down||[]).map(k=>`${k.lat} ${k.lon} ${k.depth}`).join(`
`),gr_beta:t.gr_beta??"",gr_rate:t.gr_rate??"",gr_weight:t.gr_weight??"",dipAngle:t.dipAngle??"",strikeAngle:t.strikeAngle??""})},[t]),me.useEffect(()=>{g&&u.length&&d.length&&XU(b,u,d,i.dipAngle,i.strikeAngle,i.mechanism)},[g,u,d,i.dipAngle,i.strikeAngle,i.mechanism]);function C(k){return(k||"").split(`
`).map(z=>z.trim()).filter(z=>z.length>0).map(z=>{const N=z.split(/[\s,]+/);return{lat:parseFloat(N[0])||0,lon:parseFloat(N[1])||0,depth:parseFloat(N[2])||0}})}function S(k){r({...i,[k.target.name]:k.target.value})}function T(){const k=C(i.coordsUpText),z=C(i.coordsDownText);h(k),p(z),_(!0)}function R({coords:k}){const z=av();if(k.length>0){const N=hM.latLngBounds(k.map(I=>[I.lat,I.lon]));z.fitBounds(N,{padding:[30,30]})}return null}async function F(k){k.preventDefault();const z=C(i.coordsUpText),N=C(i.coordsDownText),I={name:i.name,mechanism:i.mechanism,min_mag:i.minMag?parseFloat(i.minMag):void 0,max_mag:i.maxMag?parseFloat(i.maxMag):void 0,coords_up:z,coords_down:N,gr_beta:i.gr_beta?parseFloat(i.gr_beta):void 0,gr_rate:i.gr_rate?parseFloat(i.gr_rate):void 0,gr_weight:i.gr_weight?parseFloat(i.gr_weight):void 0,dipAngle:i.dipAngle?parseFloat(i.dipAngle):void 0,strikeAngle:i.strikeAngle?parseFloat(i.strikeAngle):void 0};try{o(!0);const W=t?`https://sha-api-production.up.railway.app/api/v1/datasource/${t.id}`:"https://sha-api-production.up.railway.app/api/v1/datasource/",U=await fetch(W,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!U.ok){const Y=await U.json();throw new Error(Y.detail||"Gagal simpan datasource")}const K=await U.json();e(K),n()}catch(W){alert(W.message),console.error("Payload gagal:",I,W)}finally{o(!1)}}return V.jsx(xm,{title:t?"Edit Sumber Gempa":"Tambah Sumber Gempa",onClose:n,width:"w-[800px]",children:V.jsxs("form",{onSubmit:F,className:"space-y-4",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium",children:"Source Name"}),V.jsx("input",{type:"text",name:"name",value:i.name,onChange:S,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]",required:!0})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium",children:"Mechanism"}),V.jsxs("select",{name:"mechanism",value:i.mechanism,onChange:S,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]",required:!0,children:[V.jsx("option",{value:"",children:"-- pilih mechanism --"}),y.map(k=>V.jsx("option",{value:k.id,children:k.label},k.id))]})]}),V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium",children:"Min Magnitude"}),V.jsx("input",{type:"number",name:"minMag",value:i.minMag,onChange:S,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium",children:"Max Magnitude"}),V.jsx("input",{type:"number",name:"maxMag",value:i.maxMag,onChange:S,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]"})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium mb-2",children:"Coordinates Up (Lat, Lon, Depth)"}),V.jsx("textarea",{rows:5,value:i.coordsUpText||"",onChange:k=>r({...i,coordsUpText:k.target.value}),placeholder:`lat lon depth
-6.87 107.61 0
-6.90 107.65 10`,className:"w-full border border-[var(--color-border)] px-2 py-1 rounded-lg font-mono text-sm bg-[var(--bg)] text-[var(--text)]"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium mb-2",children:"Coordinates Down (Lat, Lon, Depth)"}),V.jsx("textarea",{rows:5,value:i.coordsDownText||"",onChange:k=>r({...i,coordsDownText:k.target.value}),placeholder:`lat lon depth
-6.95 107.70 15
-7.00 107.75 20`,className:"w-full border border-[var(--color-border)] px-2 py-1 rounded-lg font-mono text-sm bg-[var(--bg)] text-[var(--text)]"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium",children:"Dip Angle"}),V.jsx("input",{type:"number",name:"dipAngle",value:i.dipAngle,onChange:S,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]",placeholder:"Enter dip angle in degrees"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium",children:"Strike Angle"}),V.jsx("input",{type:"number",name:"strikeAngle",value:i.strikeAngle,onChange:S,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]",placeholder:"Enter strike angle in degrees"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium mb-2",children:"Gutenberg-Richter"}),V.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs",children:"Beta"}),V.jsx("input",{type:"number",step:"0.01",name:"gr_beta",value:i.gr_beta,onChange:S,className:"w-full border border-[var(--color-border)] px-2 py-1 rounded-lg bg-[var(--bg)] text-[var(--text)]"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs",children:"Rate"}),V.jsx("input",{type:"number",step:"0.01",name:"gr_rate",value:i.gr_rate,onChange:S,className:"w-full border border-[var(--color-border)] px-2 py-1 rounded-lg bg-[var(--bg)] text-[var(--text)]"})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs",children:"Weight"}),V.jsx("input",{type:"number",step:"0.01",name:"gr_weight",value:i.gr_weight,onChange:S,className:"w-full border border-[var(--color-border)] px-2 py-1 rounded-lg bg-[var(--bg)] text-[var(--text)]"})]})]})]}),V.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600",children:"Preview Coordinates"}),g&&V.jsx("div",{className:"mt-4 h-64 border border-[var(--color-border)] rounded-lg overflow-hidden",children:V.jsxs(Xp,{center:[-6.9,107.6],zoom:9,className:"h-full w-full",children:[V.jsx(Yp,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),V.jsx(R,{coords:[...u,...d]}),u.length>0&&d.length>0&&V.jsx(mM,{positions:[...u.map(k=>[k.lat,k.lon]),...d.slice().reverse().map(k=>[k.lat,k.lon])],color:"purple",fillColor:"purple",fillOpacity:.2}),u.length>0&&V.jsxs(V.Fragment,{children:[V.jsx(Lp,{positions:u.map(k=>[k.lat,k.lon]),color:"blue"}),u.map((k,z)=>V.jsx(Nu,{position:[k.lat,k.lon],children:V.jsxs(Oh,{children:["Up ",z+1,": Depth ",k.depth," km"]})},`up-${z}`))]}),d.length>0&&V.jsxs(V.Fragment,{children:[V.jsx(Lp,{positions:d.map(k=>[k.lat,k.lon]),color:"red"}),d.map((k,z)=>V.jsx(Nu,{position:[k.lat,k.lon],children:V.jsxs(Oh,{children:["Down ",z+1,": Depth ",k.depth," km"]})},`down-${z}`))]})]})}),V.jsx("div",{className:"preview-container",children:V.jsx("canvas",{ref:b,className:"w-full h-96 rounded-lg shadow-lg"})}),V.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[V.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-[var(--hover)] text-[var(--text)] hover:opacity-80",children:"Batal"}),V.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600",children:s?"Menyimpan...":t?"Update":"Simpan"})]})]})})}function KU({datasources:n,setDatasources:e}){const[t,i]=me.useState(!1),[r,s]=me.useState(null),[o,u]=me.useState(null),h=g=>{e(_=>[..._,g]),i(!1),s(null)},d=g=>{e(_=>_.map(y=>y.id===g.id?g:y)),i(!1),s(null)},p=g=>{confirm("Apakah yakin ingin menghapus datasource ini?")&&e(_=>_.filter(y=>y.id!==g))};return V.jsxs("div",{className:"w-full",children:[V.jsxs("div",{className:"flex justify-between items-center mb-4",children:[V.jsx("h2",{className:"text-lg font-bold",children:"List Sumber Gempa"}),V.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",onClick:()=>{s(null),i(!0)},children:"+ Tambah Sumber Gempa"})]}),n.length===0?V.jsx("p",{className:"text-[var(--text)] opacity-60",children:"Belum ada sumber gempa."}):V.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(g=>V.jsxs("div",{className:"border rounded-xl p-4 shadow-sm bg-[var(--card)] text-[var(--text)] hover:shadow-md transition-colors duration-300",style:{borderColor:"var(--color-border)"},children:[V.jsx("h3",{className:"font-semibold text-lg mb-1",children:g.name}),V.jsxs("p",{className:"text-xs opacity-60 mb-2",children:["ID: ",g.id]}),V.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-200 rounded-full mb-2",children:g.mechanism||"Unknown"}),V.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[V.jsxs("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200 rounded-full",children:["Min Mag: ",g.min_mag??"-"]}),V.jsxs("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200 rounded-full",children:["Max Mag: ",g.max_mag??"-"]})]}),V.jsxs("div",{className:"text-sm mb-3",children:[V.jsx("p",{className:"font-medium",children:"GMPEs:"}),g.gmpe_weights?.length>0?V.jsx("ul",{className:"list-disc list-inside text-xs opacity-80",children:g.gmpe_weights.map((_,y)=>V.jsxs("li",{children:[_.gmpe_name||_.gmpe_id," (",_.weight,")"]},y))}):V.jsx("p",{className:"text-xs opacity-60",children:"Belum ada GMPE"})]}),V.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[V.jsx("button",{className:"flex-1 px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600",onClick:()=>u(g),children:"Lihat Peta"}),V.jsx("button",{className:"flex-1 px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600",onClick:()=>{s(g),i(!0)},children:"Edit"}),V.jsx("button",{className:"flex-1 px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",onClick:()=>p(g.id),children:"Hapus"})]})]},g.id))}),t&&V.jsx(YU,{onClose:()=>{i(!1),s(null)},onSaved:r?d:h,initialData:r}),o&&V.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:V.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl w-[700px] h-[500px] relative",children:[V.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Preview Peta - ",o.name]}),V.jsxs(Xp,{center:[o.coords_up?.[0]?.lat||-6.9,o.coords_up?.[0]?.lon||107.6],zoom:8,className:"h-[400px] w-full",children:[V.jsx(Yp,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),o.coords_up?.length>0&&o.coords_down?.length>0&&V.jsx(mM,{positions:[...o.coords_up.map(g=>[g.lat,g.lon]),...o.coords_down.slice().reverse().map(g=>[g.lat,g.lon])],color:"purple",fillColor:"purple",fillOpacity:.2}),o.coords_up?.length>0&&V.jsx(Lp,{positions:o.coords_up.map(g=>[g.lat,g.lon]),color:"blue"}),o.coords_down?.length>0&&V.jsx(Lp,{positions:o.coords_down.map(g=>[g.lat,g.lon]),color:"red"}),o.coords_up?.map((g,_)=>V.jsx(Nu,{position:[g.lat,g.lon],children:V.jsxs(Oh,{children:["Up ",_+1,": Depth ",g.depth," km"]})},`up-${_}`)),o.coords_down?.map((g,_)=>V.jsx(Nu,{position:[g.lat,g.lon],children:V.jsxs(Oh,{children:["Down ",_+1,": Depth ",g.depth," km"]})},`down-${_}`))]}),V.jsx("button",{className:"absolute top-2 right-2 px-3 py-1 bg-gray-300 rounded hover:bg-gray-400",onClick:()=>u(null),children:"✕"})]})})]})}function JU(){const[n,e]=me.useState([]),[t,i]=me.useState(!0),[r,s]=me.useState(null),[o,u]=me.useState(null),h="https://sha-api-production.up.railway.app/api/v1";return me.useEffect(()=>{async function d(){try{const g=await fetch("https://sha-api-production.up.railway.app/api/v1/gmpe");if(!g.ok)throw new Error(`Fetch status: ${g.status}`);const _=await g.json();e(Array.isArray(_)?_:_.data||[])}catch(p){console.error("❌ Fetch GMPE error:",p),s(p.message||"Gagal fetch GMPE")}finally{i(!1)}}d()},[]),console.log("API URL:",h),t?V.jsx("div",{className:"p-4",children:"⏳ Memuat data GMPE..."}):r?V.jsxs("div",{className:"p-4 text-red-500",children:["❌ ",r]}):n.length===0?V.jsx("div",{className:"p-4 opacity-70",children:"Tidak ada GMPE tersedia"}):V.jsxs("div",{className:"space-y-4",children:[V.jsx("h2",{className:"text-xl font-bold",children:"Daftar GMPE"}),n.map(d=>{const p=d.coeffs?.length>0?Object.keys(d.coeffs[0]):[],g=o===d.id;return V.jsxs("div",{className:"card-custom rounded-2xl shadow",children:[V.jsxs("button",{onClick:()=>u(g?null:d.id),className:"w-full text-left px-6 py-4 flex justify-between items-center",children:[V.jsx("span",{className:"font-semibold",children:d.name}),V.jsx("span",{className:"text-sm opacity-70",children:g?"▲ Tutup":"▼ Detail"})]}),g&&V.jsxs("div",{className:"p-6 space-y-4 border-t",style:{borderColor:"var(--color-border)"},children:[V.jsxs("p",{className:"text-sm opacity-80",children:["Tahun: ",d.year||"-"," | Region:"," ",d.tectonic_region||"-"]}),V.jsx("p",{className:"text-sm",children:d.description}),p.length>0?V.jsx("div",{className:"overflow-x-auto",children:V.jsxs("table",{className:"w-full border text-sm",style:{borderColor:"var(--color-border)"},children:[V.jsx("thead",{children:V.jsx("tr",{style:{backgroundColor:"var(--hover)"},children:p.map(_=>V.jsx("th",{className:"px-3 py-2 border",style:{borderColor:"var(--color-border)"},children:_},_))})}),V.jsx("tbody",{children:d.coeffs.map((_,y)=>V.jsx("tr",{className:"hover:bg-[var(--hover)]",children:p.map((w,b)=>V.jsx("td",{className:"px-3 py-2 border",style:{borderColor:"var(--color-border)"},children:typeof _[w]=="number"?_[w].toFixed(3):_[w]},b))},y))})]})}):V.jsx("p",{className:"opacity-70",children:"Koefisien GMPE tidak tersedia"})]})]},d.id||d.name)})]})}function QU({isOpen:n,setIsOpen:e,activeTab:t,setActiveTab:i}){const[r,s]=me.useState(""),o=[{key:"analysis",label:"PSHA"},{key:"datasource",label:"List Sumber Gempa"},{key:"gmpe",label:"List Atenuasi"}];return me.useEffect(()=>{if(n)s("animate-slide-in");else if(r==="animate-slide-in"){s("animate-slide-out");const u=setTimeout(()=>s(""),300);return()=>clearTimeout(u)}},[n]),V.jsxs(V.Fragment,{children:[V.jsx("aside",{className:"hidden md:flex flex-col w-64 h-screen fixed top-14 left-0 bg-[var(--card)] text-[var(--text)] shadow",children:V.jsx("nav",{className:"flex flex-col space-y-2 p-4",children:o.map(u=>V.jsx("button",{className:`text-left px-3 py-2 rounded-lg transition ${t===u.key?"bg-blue-600 text-white":"hover:bg-[var(--hover)]"}`,onClick:()=>i(u.key),children:u.label},u.key))})}),(n||r==="animate-slide-out")&&V.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[V.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>e(!1)}),V.jsxs("aside",{className:`relative z-50 w-64 bg-[var(--card)] text-[var(--text)] p-6 h-full pt-16 shadow-lg ${r}`,children:[V.jsx("button",{onClick:()=>e(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-200",children:"✕"}),V.jsx("nav",{className:"flex flex-col space-y-2 mt-8",children:o.map(u=>V.jsx("button",{className:`text-left px-3 py-2 rounded-lg transition ${t===u.key?"bg-blue-600 text-white":"hover:bg-[var(--hover)]"}`,onClick:()=>{i(u.key),e(!1)},children:u.label},u.key))})]})]})]})}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IT=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=me.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...u},h)=>me.createElement("svg",{ref:h,...tH,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:IT("lucide",r),...u},[...o.map(([d,p])=>me.createElement(d,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=(n,e)=>{const t=me.forwardRef(({className:i,...r},s)=>me.createElement(nH,{ref:s,iconNode:e,className:IT(`lucide-${eH(n)}`,i),...r}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=Xv("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=Xv("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=Xv("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function oH({activeTab:n,setActiveTab:e,onSaveClick:t,onLoadClick:i,onHelpClick:r}){const[s,o]=me.useState(!1),[u,h]=me.useState(!1),d=[{key:"analysis",label:"PSHA"},{key:"datasource",label:"List Sumber Gempa"},{key:"gmpe",label:"List Atenuasi"}];me.useEffect(()=>{const g=localStorage.getItem("theme");if(g)h(g==="dark"),document.documentElement.setAttribute("data-theme",g);else{const _=window.matchMedia("(prefers-color-scheme: dark)").matches;h(_),document.documentElement.setAttribute("data-theme",_?"dark":"light")}},[]);const p=()=>{const g=u?"light":"dark";h(!u),document.documentElement.setAttribute("data-theme",g),localStorage.setItem("theme",g)};return V.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 h-14 bg-[var(--card)] text-[var(--text)] shadow",children:[V.jsxs("div",{className:"px-4 py-3 flex justify-between items-center",children:[V.jsxs("div",{className:"flex items-center space-x-4",children:[V.jsx("button",{onClick:()=>o(!0),className:"md:hidden p-2 rounded-lg hover:bg-[var(--hover)]",children:V.jsx(iH,{size:24})}),V.jsx("span",{className:"text-xl font-bold",children:"SHA-Web"})]}),V.jsxs("div",{className:"flex items-center space-x-4",children:[V.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[V.jsx("button",{onClick:t,className:"hover:text-blue-400",children:"Save"}),V.jsx("button",{onClick:()=>i("file"),className:"hover:text-green-400",children:"Load"}),V.jsx("button",{onClick:r,className:"hover:text-gray-400",children:"Help"})]}),V.jsx("button",{onClick:p,className:"p-2 rounded-lg hover:bg-[var(--hover)] transition",title:"Toggle theme",children:u?V.jsx(sH,{size:20}):V.jsx(rH,{size:20})})]})]}),s&&V.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[V.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>o(!1)}),V.jsxs("aside",{className:"relative z-50 w-64 bg-[var(--card)] text-[var(--text)] p-6 h-full pt-16 shadow-lg",children:[V.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-200",children:"✕"}),V.jsx("nav",{className:"flex flex-col space-y-2 mt-6",children:d.map(g=>V.jsx("button",{className:`text-left px-3 py-2 rounded-lg transition ${n===g.key?"bg-blue-600 text-white":"hover:bg-[var(--hover)]"}`,onClick:()=>{e(g.key),o(!1)},children:g.label},g.key))}),V.jsx("hr",{className:"my-4 border-gray-600"}),V.jsxs("div",{className:"flex flex-col space-y-2",children:[V.jsx("button",{onClick:t,className:"text-left px-3 py-2 hover:bg-[var(--hover)]",children:"Save"}),V.jsx("button",{onClick:()=>i("file"),className:"text-left px-3 py-2 hover:bg-[var(--hover)]",children:"Load"}),V.jsx("button",{onClick:r,className:"text-left px-3 py-2 hover:bg-[var(--hover)]",children:"Help"})]})]})]})]})}function aH({isOpen:n,onClose:e,onSave:t}){const[i,r]=me.useState("");if(me.useEffect(()=>{n&&r("")},[n]),!n)return null;function s(o){o.preventDefault(),i.trim()&&(t(i.trim()),e())}return V.jsx(xm,{title:"Save Project",onClose:e,width:"w-96",children:V.jsxs("form",{onSubmit:s,className:"space-y-4",children:[V.jsx("input",{type:"text",value:i,onChange:o=>r(o.target.value),placeholder:"Enter project name",className:"w-full border border-[var(--color-border)] rounded px-3 py-2 bg-[var(--bg)] text-[var(--text)]",autoFocus:!0}),V.jsxs("div",{className:"flex justify-end space-x-2",children:[V.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded bg-[var(--hover)] text-[var(--text)] hover:opacity-80",children:"Cancel"}),V.jsx("button",{type:"submit",disabled:!i.trim(),className:`px-4 py-2 rounded text-white ${i.trim()?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:"Save"})]})]})})}const lH="https://sha-api-production.up.railway.app/api/v1",wm=wn.create({baseURL:lH,headers:{"Content-Type":"application/json"}});wm.interceptors.request.use(n=>{const e=localStorage.getItem("psha-token");return e&&(n.headers.Authorization=`Bearer ${e}`),n});async function uH(n){return(await wm.post("/projects",n)).data}async function cH(){return(await wm.get("/projects")).data}async function hH(n){await wm.delete(`/projects/${encodeURIComponent(n)}`)}function dH(n){return uH(n)}function JS(){return cH()}function fH(n){return hH(n)}function pH({isOpen:n,onClose:e,onLoad:t}){const[i,r]=me.useState([]);if(me.useEffect(()=>{n&&r(JS())},[n]),!n)return null;function s(u){t(u),e()}function o(u){confirm(`Hapus project "${u}"?`)&&(fH(u),r(JS()))}return V.jsxs(xm,{title:"Load Project",onClose:e,width:"w-96",children:[i.length===0?V.jsx("p",{className:"text-[var(--text)] opacity-70",children:"No saved projects"}):V.jsx("ul",{className:"space-y-2 max-h-64 overflow-y-auto",children:i.map((u,h)=>V.jsxs("li",{className:"flex justify-between items-center border border-[var(--color-border)] rounded px-3 py-2 hover:bg-[var(--hover)] transition-colors",children:[V.jsx("span",{children:u.name}),V.jsxs("div",{className:"space-x-2",children:[V.jsx("button",{onClick:()=>s(u),className:"px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:"Load"}),V.jsx("button",{onClick:()=>o(u.name),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]},`${u.name}-${h}`))}),V.jsx("div",{className:"flex justify-end mt-4",children:V.jsx("button",{onClick:e,className:"px-4 py-2 rounded bg-[var(--hover)] text-[var(--text)] hover:opacity-80",children:"Close"})})]})}function mH(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const gH=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_H=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yH={};function QS(n,e){return(yH.jsx?_H:gH).test(n)}const vH=/[ \t\n\f\r]/g;function xH(n){return typeof n=="object"?n.type==="text"?e1(n.value):!1:e1(n)}function e1(n){return n.replace(vH,"")===""}class ud{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}ud.prototype.normal={};ud.prototype.property={};ud.prototype.space=void 0;function DT(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new ud(t,i,e)}function Wy(n){return n.toLowerCase()}class Gi{constructor(e,t){this.attribute=t,this.property=e}}Gi.prototype.attribute="";Gi.prototype.booleanish=!1;Gi.prototype.boolean=!1;Gi.prototype.commaOrSpaceSeparated=!1;Gi.prototype.commaSeparated=!1;Gi.prototype.defined=!1;Gi.prototype.mustUseProperty=!1;Gi.prototype.number=!1;Gi.prototype.overloadedBoolean=!1;Gi.prototype.property="";Gi.prototype.spaceSeparated=!1;Gi.prototype.space=void 0;let wH=0;const Pt=ul(),kn=ul(),jy=ul(),qe=ul(),on=ul(),ku=ul(),ar=ul();function ul(){return 2**++wH}const Gy=Object.freeze(Object.defineProperty({__proto__:null,boolean:Pt,booleanish:kn,commaOrSpaceSeparated:ar,commaSeparated:ku,number:qe,overloadedBoolean:jy,spaceSeparated:on},Symbol.toStringTag,{value:"Module"})),q_=Object.keys(Gy);class Yv extends Gi{constructor(e,t,i,r){let s=-1;if(super(e,t),t1(this,"space",r),typeof i=="number")for(;++s<q_.length;){const o=q_[s];t1(this,q_[s],(i&Gy[o])===Gy[o])}}}Yv.prototype.defined=!0;function t1(n,e,t){t&&(n[e]=t)}function nc(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const s=new Yv(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,t[Wy(i)]=i,t[Wy(s.attribute)]=i}return new ud(e,t,n.space)}const NT=nc({properties:{ariaActiveDescendant:null,ariaAtomic:kn,ariaAutoComplete:null,ariaBusy:kn,ariaChecked:kn,ariaColCount:qe,ariaColIndex:qe,ariaColSpan:qe,ariaControls:on,ariaCurrent:null,ariaDescribedBy:on,ariaDetails:null,ariaDisabled:kn,ariaDropEffect:on,ariaErrorMessage:null,ariaExpanded:kn,ariaFlowTo:on,ariaGrabbed:kn,ariaHasPopup:null,ariaHidden:kn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:on,ariaLevel:qe,ariaLive:null,ariaModal:kn,ariaMultiLine:kn,ariaMultiSelectable:kn,ariaOrientation:null,ariaOwns:on,ariaPlaceholder:null,ariaPosInSet:qe,ariaPressed:kn,ariaReadOnly:kn,ariaRelevant:null,ariaRequired:kn,ariaRoleDescription:on,ariaRowCount:qe,ariaRowIndex:qe,ariaRowSpan:qe,ariaSelected:kn,ariaSetSize:qe,ariaSort:null,ariaValueMax:qe,ariaValueMin:qe,ariaValueNow:qe,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function OT(n,e){return e in n?n[e]:e}function zT(n,e){return OT(n,e.toLowerCase())}const bH=nc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ku,acceptCharset:on,accessKey:on,action:null,allow:null,allowFullScreen:Pt,allowPaymentRequest:Pt,allowUserMedia:Pt,alt:null,as:null,async:Pt,autoCapitalize:null,autoComplete:on,autoFocus:Pt,autoPlay:Pt,blocking:on,capture:null,charSet:null,checked:Pt,cite:null,className:on,cols:qe,colSpan:null,content:null,contentEditable:kn,controls:Pt,controlsList:on,coords:qe|ku,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Pt,defer:Pt,dir:null,dirName:null,disabled:Pt,download:jy,draggable:kn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Pt,formTarget:null,headers:on,height:qe,hidden:jy,high:qe,href:null,hrefLang:null,htmlFor:on,httpEquiv:on,id:null,imageSizes:null,imageSrcSet:null,inert:Pt,inputMode:null,integrity:null,is:null,isMap:Pt,itemId:null,itemProp:on,itemRef:on,itemScope:Pt,itemType:on,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Pt,low:qe,manifest:null,max:null,maxLength:qe,media:null,method:null,min:null,minLength:qe,multiple:Pt,muted:Pt,name:null,nonce:null,noModule:Pt,noValidate:Pt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Pt,optimum:qe,pattern:null,ping:on,placeholder:null,playsInline:Pt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Pt,referrerPolicy:null,rel:on,required:Pt,reversed:Pt,rows:qe,rowSpan:qe,sandbox:on,scope:null,scoped:Pt,seamless:Pt,selected:Pt,shadowRootClonable:Pt,shadowRootDelegatesFocus:Pt,shadowRootMode:null,shape:null,size:qe,sizes:null,slot:null,span:qe,spellCheck:kn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:qe,step:null,style:null,tabIndex:qe,target:null,title:null,translate:null,type:null,typeMustMatch:Pt,useMap:null,value:kn,width:qe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:on,axis:null,background:null,bgColor:null,border:qe,borderColor:null,bottomMargin:qe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Pt,declare:Pt,event:null,face:null,frame:null,frameBorder:null,hSpace:qe,leftMargin:qe,link:null,longDesc:null,lowSrc:null,marginHeight:qe,marginWidth:qe,noResize:Pt,noHref:Pt,noShade:Pt,noWrap:Pt,object:null,profile:null,prompt:null,rev:null,rightMargin:qe,rules:null,scheme:null,scrolling:kn,standby:null,summary:null,text:null,topMargin:qe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:qe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Pt,disableRemotePlayback:Pt,prefix:null,property:null,results:qe,security:null,unselectable:null},space:"html",transform:zT}),SH=nc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ar,accentHeight:qe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:qe,amplitude:qe,arabicForm:null,ascent:qe,attributeName:null,attributeType:null,azimuth:qe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:qe,by:null,calcMode:null,capHeight:qe,className:on,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:qe,diffuseConstant:qe,direction:null,display:null,dur:null,divisor:qe,dominantBaseline:null,download:Pt,dx:null,dy:null,edgeMode:null,editable:null,elevation:qe,enableBackground:null,end:null,event:null,exponent:qe,externalResourcesRequired:null,fill:null,fillOpacity:qe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ku,g2:ku,glyphName:ku,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:qe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:qe,horizOriginX:qe,horizOriginY:qe,id:null,ideographic:qe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:qe,k:qe,k1:qe,k2:qe,k3:qe,k4:qe,kernelMatrix:ar,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:qe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:qe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:qe,overlineThickness:qe,paintOrder:null,panose1:null,path:null,pathLength:qe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:on,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:qe,pointsAtY:qe,pointsAtZ:qe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ar,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ar,rev:ar,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ar,requiredFeatures:ar,requiredFonts:ar,requiredFormats:ar,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:qe,specularExponent:qe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:qe,strikethroughThickness:qe,string:null,stroke:null,strokeDashArray:ar,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:qe,strokeOpacity:qe,strokeWidth:null,style:null,surfaceScale:qe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ar,tabIndex:qe,tableValues:null,target:null,targetX:qe,targetY:qe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ar,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:qe,underlineThickness:qe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:qe,values:null,vAlphabetic:qe,vMathematical:qe,vectorEffect:null,vHanging:qe,vIdeographic:qe,version:null,vertAdvY:qe,vertOriginX:qe,vertOriginY:qe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:qe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:OT}),FT=nc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),BT=nc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:zT}),UT=nc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),MH={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},EH=/[A-Z]/g,n1=/-[a-z]/g,TH=/^data[-\w.:]+$/i;function LH(n,e){const t=Wy(e);let i=e,r=Gi;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&TH.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(n1,PH);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!n1.test(s)){let o=s.replace(EH,CH);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=Yv}return new r(i,e)}function CH(n){return"-"+n.toLowerCase()}function PH(n){return n.charAt(1).toUpperCase()}const AH=DT([NT,bH,FT,BT,UT],"html"),Kv=DT([NT,SH,FT,BT,UT],"svg");function kH(n){return n.join(" ").trim()}var yu={},X_,i1;function RH(){if(i1)return X_;i1=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,u=/^\s+|\s+$/g,h=`
`,d="/",p="*",g="",_="comment",y="declaration";X_=function(b,C){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];C=C||{};var S=1,T=1;function R(Y){var Q=Y.match(e);Q&&(S+=Q.length);var ne=Y.lastIndexOf(h);T=~ne?Y.length-ne:T+Y.length}function F(){var Y={line:S,column:T};return function(Q){return Q.position=new k(Y),I(),Q}}function k(Y){this.start=Y,this.end={line:S,column:T},this.source=C.source}k.prototype.content=b;function z(Y){var Q=new Error(C.source+":"+S+":"+T+": "+Y);if(Q.reason=Y,Q.filename=C.source,Q.line=S,Q.column=T,Q.source=b,!C.silent)throw Q}function N(Y){var Q=Y.exec(b);if(Q){var ne=Q[0];return R(ne),b=b.slice(ne.length),Q}}function I(){N(t)}function W(Y){var Q;for(Y=Y||[];Q=j();)Q!==!1&&Y.push(Q);return Y}function j(){var Y=F();if(!(d!=b.charAt(0)||p!=b.charAt(1))){for(var Q=2;g!=b.charAt(Q)&&(p!=b.charAt(Q)||d!=b.charAt(Q+1));)++Q;if(Q+=2,g===b.charAt(Q-1))return z("End of comment missing");var ne=b.slice(2,Q-2);return T+=2,R(ne),b=b.slice(Q),T+=2,Y({type:_,comment:ne})}}function U(){var Y=F(),Q=N(i);if(Q){if(j(),!N(r))return z("property missing ':'");var ne=N(s),oe=Y({type:y,property:w(Q[0].replace(n,g)),value:ne?w(ne[0].replace(n,g)):g});return N(o),oe}}function K(){var Y=[];W(Y);for(var Q;Q=U();)Q!==!1&&(Y.push(Q),W(Y));return Y}return I(),K()};function w(b){return b?b.replace(u,g):g}return X_}var r1;function IH(){if(r1)return yu;r1=1;var n=yu&&yu.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(yu,"__esModule",{value:!0}),yu.default=t;var e=n(RH());function t(i,r){var s=null;if(!i||typeof i!="string")return s;var o=(0,e.default)(i),u=typeof r=="function";return o.forEach(function(h){if(h.type==="declaration"){var d=h.property,p=h.value;u?r(d,p,h):p&&(s=s||{},s[d]=p)}}),s}return yu}var ah={},s1;function DH(){if(s1)return ah;s1=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,s=function(d){return!d||t.test(d)||n.test(d)},o=function(d,p){return p.toUpperCase()},u=function(d,p){return"".concat(p,"-")},h=function(d,p){return p===void 0&&(p={}),s(d)?d:(d=d.toLowerCase(),p.reactCompat?d=d.replace(r,u):d=d.replace(i,u),d.replace(e,o))};return ah.camelCase=h,ah}var lh,o1;function NH(){if(o1)return lh;o1=1;var n=lh&&lh.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(IH()),t=DH();function i(r,s){var o={};return!r||typeof r!="string"||(0,e.default)(r,function(u,h){u&&h&&(o[(0,t.camelCase)(u,s)]=h)}),o}return i.default=i,lh=i,lh}var OH=NH();const zH=Vu(OH),HT=VT("end"),Jv=VT("start");function VT(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function FH(n){const e=Jv(n),t=HT(n);if(e&&t)return{start:e,end:t}}function Ih(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?a1(n.position):"start"in n||"end"in n?a1(n):"line"in n||"column"in n?$y(n):""}function $y(n){return l1(n&&n.line)+":"+l1(n&&n.column)}function a1(n){return $y(n&&n.start)+"-"+$y(n&&n.end)}function l1(n){return n&&typeof n=="number"?n:1}class yi extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",s={},o=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof e=="string"?r=e:!s.cause&&e&&(o=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const h=i.indexOf(":");h===-1?s.ruleId=i:(s.source=i.slice(0,h),s.ruleId=i.slice(h+1))}if(!s.place&&s.ancestors&&s.ancestors){const h=s.ancestors[s.ancestors.length-1];h&&(s.place=h.position)}const u=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=u?u.line:void 0,this.name=Ih(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}yi.prototype.file="";yi.prototype.name="";yi.prototype.reason="";yi.prototype.message="";yi.prototype.stack="";yi.prototype.column=void 0;yi.prototype.line=void 0;yi.prototype.ancestors=void 0;yi.prototype.cause=void 0;yi.prototype.fatal=void 0;yi.prototype.place=void 0;yi.prototype.ruleId=void 0;yi.prototype.source=void 0;const Qv={}.hasOwnProperty,BH=new Map,UH=/[A-Z]/g,HH=new Set(["table","tbody","thead","tfoot","tr"]),VH=new Set(["td","th"]),WT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function WH(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=KH(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=YH(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Kv:AH,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=jT(r,n,void 0);return s&&typeof s!="string"?s:r.create(n,r.Fragment,{children:s||void 0},void 0)}function jT(n,e,t){if(e.type==="element")return jH(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return GH(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return ZH(n,e,t);if(e.type==="mdxjsEsm")return $H(n,e);if(e.type==="root")return qH(n,e,t);if(e.type==="text")return XH(n,e)}function jH(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=Kv,n.schema=r),n.ancestors.push(e);const s=$T(n,e.tagName,!1),o=JH(n,e);let u=tx(n,e);return HH.has(e.tagName)&&(u=u.filter(function(h){return typeof h=="string"?!xH(h):!0})),GT(n,o,s,e),ex(o,u),n.ancestors.pop(),n.schema=i,n.create(e,s,o,t)}function GH(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}Kh(n,e.position)}function $H(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);Kh(n,e.position)}function ZH(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=Kv,n.schema=r),n.ancestors.push(e);const s=e.name===null?n.Fragment:$T(n,e.name,!0),o=QH(n,e),u=tx(n,e);return GT(n,o,s,e),ex(o,u),n.ancestors.pop(),n.schema=i,n.create(e,s,o,t)}function qH(n,e,t){const i={};return ex(i,tx(n,e)),n.create(e,n.Fragment,i,t)}function XH(n,e){return e.value}function GT(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function ex(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function YH(n,e,t){return i;function i(r,s,o,u){const d=Array.isArray(o.children)?t:e;return u?d(s,o,u):d(s,o)}}function KH(n,e){return t;function t(i,r,s,o){const u=Array.isArray(s.children),h=Jv(i);return e(r,s,o,u,{columnNumber:h?h.column-1:void 0,fileName:n,lineNumber:h?h.line:void 0},void 0)}}function JH(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&Qv.call(e.properties,r)){const s=e5(n,r,e.properties[r]);if(s){const[o,u]=s;n.tableCellAlignToStyle&&o==="align"&&typeof u=="string"&&VH.has(e.tagName)?i=u:t[o]=u}}if(i){const s=t.style||(t.style={});s[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function QH(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const s=i.data.estree.body[0];s.type;const o=s.expression;o.type;const u=o.properties[0];u.type,Object.assign(t,n.evaluater.evaluateExpression(u.argument))}else Kh(n,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const u=i.value.data.estree.body[0];u.type,s=n.evaluater.evaluateExpression(u.expression)}else Kh(n,e.position);else s=i.value===null?!0:i.value;t[r]=s}return t}function tx(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:BH;for(;++i<e.children.length;){const s=e.children[i];let o;if(n.passKeys){const h=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(h){const d=r.get(h)||0;o=h+"-"+d,r.set(h,d+1)}}const u=jT(n,s,o);u!==void 0&&t.push(u)}return t}function e5(n,e,t){const i=LH(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?mH(t):kH(t)),i.property==="style"){let r=typeof t=="object"?t:t5(n,String(t));return n.stylePropertyNameCase==="css"&&(r=n5(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?MH[i.property]||i.property:i.attribute,t]}}function t5(n,e){try{return zH(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new yi("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=WT+"#cannot-parse-style-attribute",r}}function $T(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,o;for(;++s<r.length;){const u=QS(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};o=o?{type:"MemberExpression",object:o,property:u,computed:!!(s&&u.type==="Literal"),optional:!1}:u}i=o}else i=QS(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return Qv.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);Kh(n)}function Kh(n,e){const t=new yi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=WT+"#cannot-handle-mdx-estrees-without-createevaluater",t}function n5(n){const e={};let t;for(t in n)Qv.call(n,t)&&(e[i5(t)]=n[t]);return e}function i5(n){let e=n.replace(UH,r5);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function r5(n){return"-"+n.toLowerCase()}const Y_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},s5={};function o5(n,e){const t=s5,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return ZT(n,i,r)}function ZT(n,e,t){if(a5(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return u1(n.children,e,t)}return Array.isArray(n)?u1(n,e,t):""}function u1(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=ZT(n[r],e,t);return i.join("")}function a5(n){return!!(n&&typeof n=="object")}const c1=document.createElement("i");function nx(n){const e="&"+n+";";c1.innerHTML=e;const t=c1.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Cs(n,e,t,i){const r=n.length;let s=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)o=Array.from(i),o.unshift(e,t),n.splice(...o);else for(t&&n.splice(e,t);s<i.length;)o=i.slice(s,s+1e4),o.unshift(e,0),n.splice(...o),s+=1e4,e+=1e4}function Cr(n,e){return n.length>0?(Cs(n,n.length,0,e),n):e}const h1={}.hasOwnProperty;function l5(n){const e={};let t=-1;for(;++t<n.length;)u5(e,n[t]);return e}function u5(n,e){let t;for(t in e){const r=(h1.call(n,t)?n[t]:void 0)||(n[t]={}),s=e[t];let o;if(s)for(o in s){h1.call(r,o)||(r[o]=[]);const u=s[o];c5(r[o],Array.isArray(u)?u:u?[u]:[])}}}function c5(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);Cs(n,0,0,i)}function qT(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function Ru(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const bs=la(/[A-Za-z]/),ur=la(/[\dA-Za-z]/),h5=la(/[#-'*+\--9=?A-Z^-~]/);function Zy(n){return n!==null&&(n<32||n===127)}const qy=la(/\d/),d5=la(/[\dA-Fa-f]/),f5=la(/[!-/:-@[-`{-~]/);function bt(n){return n!==null&&n<-2}function Wi(n){return n!==null&&(n<0||n===32)}function Wt(n){return n===-2||n===-1||n===32}const p5=la(new RegExp("\\p{P}|\\p{S}","u")),m5=la(/\s/);function la(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function ic(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const s=n.charCodeAt(t);let o="";if(s===37&&ur(n.charCodeAt(t+1))&&ur(n.charCodeAt(t+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const u=n.charCodeAt(t+1);s<56320&&u>56319&&u<57344?(o=String.fromCharCode(s,u),r=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(n.slice(i,t),encodeURIComponent(o)),i=t+r+1,o=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function ln(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(h){return Wt(h)?(n.enter(t),u(h)):e(h)}function u(h){return Wt(h)&&s++<r?(n.consume(h),u):(n.exit(t),e(h))}}const g5={tokenize:_5};function _5(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),ln(n,e,"linePrefix")}function r(u){return n.enter("paragraph"),s(u)}function s(u){const h=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=h),t=h,o(u)}function o(u){if(u===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(u);return}return bt(u)?(n.consume(u),n.exit("chunkText"),s):(n.consume(u),o)}}const y5={tokenize:v5},d1={tokenize:x5};function v5(n){const e=this,t=[];let i=0,r,s,o;return u;function u(R){if(i<t.length){const F=t[i];return e.containerState=F[1],n.attempt(F[0].continuation,h,d)(R)}return d(R)}function h(R){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&T();const F=e.events.length;let k=F,z;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){z=e.events[k][1].end;break}S(i);let N=F;for(;N<e.events.length;)e.events[N][1].end={...z},N++;return Cs(e.events,k+1,0,e.events.slice(F)),e.events.length=N,d(R)}return u(R)}function d(R){if(i===t.length){if(!r)return _(R);if(r.currentConstruct&&r.currentConstruct.concrete)return w(R);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(d1,p,g)(R)}function p(R){return r&&T(),S(i),_(R)}function g(R){return e.parser.lazy[e.now().line]=i!==t.length,o=e.now().offset,w(R)}function _(R){return e.containerState={},n.attempt(d1,y,w)(R)}function y(R){return i++,t.push([e.currentConstruct,e.containerState]),_(R)}function w(R){if(R===null){r&&T(),S(0),n.consume(R);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),b(R)}function b(R){if(R===null){C(n.exit("chunkFlow"),!0),S(0),n.consume(R);return}return bt(R)?(n.consume(R),C(n.exit("chunkFlow")),i=0,e.interrupt=void 0,u):(n.consume(R),b)}function C(R,F){const k=e.sliceStream(R);if(F&&k.push(null),R.previous=s,s&&(s.next=R),s=R,r.defineSkip(R.start),r.write(k),e.parser.lazy[R.start.line]){let z=r.events.length;for(;z--;)if(r.events[z][1].start.offset<o&&(!r.events[z][1].end||r.events[z][1].end.offset>o))return;const N=e.events.length;let I=N,W,j;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){if(W){j=e.events[I][1].end;break}W=!0}for(S(i),z=N;z<e.events.length;)e.events[z][1].end={...j},z++;Cs(e.events,I+1,0,e.events.slice(N)),e.events.length=z}}function S(R){let F=t.length;for(;F-- >R;){const k=t[F];e.containerState=k[1],k[0].exit.call(e,n)}t.length=R}function T(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function x5(n,e,t){return ln(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function f1(n){if(n===null||Wi(n)||m5(n))return 1;if(p5(n))return 2}function ix(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const s=n[r].resolveAll;s&&!i.includes(s)&&(e=s(e,t),i.push(s))}return e}const Xy={name:"attention",resolveAll:w5,tokenize:b5};function w5(n,e){let t=-1,i,r,s,o,u,h,d,p;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;h=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const g={...n[i][1].end},_={...n[t][1].start};p1(g,-h),p1(_,h),o={type:h>1?"strongSequence":"emphasisSequence",start:g,end:{...n[i][1].end}},u={type:h>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:_},s={type:h>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:h>1?"strong":"emphasis",start:{...o.start},end:{...u.end}},n[i][1].end={...o.start},n[t][1].start={...u.end},d=[],n[i][1].end.offset-n[i][1].start.offset&&(d=Cr(d,[["enter",n[i][1],e],["exit",n[i][1],e]])),d=Cr(d,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",s,e]]),d=Cr(d,ix(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),d=Cr(d,[["exit",s,e],["enter",u,e],["exit",u,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(p=2,d=Cr(d,[["enter",n[t][1],e],["exit",n[t][1],e]])):p=0,Cs(n,i-1,t-i+3,d),t=i+d.length-p-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function b5(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=f1(i);let s;return o;function o(h){return s=h,n.enter("attentionSequence"),u(h)}function u(h){if(h===s)return n.consume(h),u;const d=n.exit("attentionSequence"),p=f1(h),g=!p||p===2&&r||t.includes(h),_=!r||r===2&&p||t.includes(i);return d._open=!!(s===42?g:g&&(r||!_)),d._close=!!(s===42?_:_&&(p||!g)),e(h)}}function p1(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const S5={name:"autolink",tokenize:M5};function M5(n,e,t){let i=0;return r;function r(y){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(y),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(y){return bs(y)?(n.consume(y),o):y===64?t(y):d(y)}function o(y){return y===43||y===45||y===46||ur(y)?(i=1,u(y)):d(y)}function u(y){return y===58?(n.consume(y),i=0,h):(y===43||y===45||y===46||ur(y))&&i++<32?(n.consume(y),u):(i=0,d(y))}function h(y){return y===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(y),n.exit("autolinkMarker"),n.exit("autolink"),e):y===null||y===32||y===60||Zy(y)?t(y):(n.consume(y),h)}function d(y){return y===64?(n.consume(y),p):h5(y)?(n.consume(y),d):t(y)}function p(y){return ur(y)?g(y):t(y)}function g(y){return y===46?(n.consume(y),i=0,p):y===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(y),n.exit("autolinkMarker"),n.exit("autolink"),e):_(y)}function _(y){if((y===45||ur(y))&&i++<63){const w=y===45?_:g;return n.consume(y),w}return t(y)}}const bm={partial:!0,tokenize:E5};function E5(n,e,t){return i;function i(s){return Wt(s)?ln(n,r,"linePrefix")(s):r(s)}function r(s){return s===null||bt(s)?e(s):t(s)}}const XT={continuation:{tokenize:L5},exit:C5,name:"blockQuote",tokenize:T5};function T5(n,e,t){const i=this;return r;function r(o){if(o===62){const u=i.containerState;return u.open||(n.enter("blockQuote",{_container:!0}),u.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),s}return t(o)}function s(o){return Wt(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(o))}}function L5(n,e,t){const i=this;return r;function r(o){return Wt(o)?ln(n,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return n.attempt(XT,e,t)(o)}}function C5(n){n.exit("blockQuote")}const YT={name:"characterEscape",tokenize:P5};function P5(n,e,t){return i;function i(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),r}function r(s){return f5(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(s)}}const KT={name:"characterReference",tokenize:A5};function A5(n,e,t){const i=this;let r=0,s,o;return u;function u(g){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(g),n.exit("characterReferenceMarker"),h}function h(g){return g===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(g),n.exit("characterReferenceMarkerNumeric"),d):(n.enter("characterReferenceValue"),s=31,o=ur,p(g))}function d(g){return g===88||g===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(g),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,o=d5,p):(n.enter("characterReferenceValue"),s=7,o=qy,p(g))}function p(g){if(g===59&&r){const _=n.exit("characterReferenceValue");return o===ur&&!nx(i.sliceSerialize(_))?t(g):(n.enter("characterReferenceMarker"),n.consume(g),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return o(g)&&r++<s?(n.consume(g),p):t(g)}}const m1={partial:!0,tokenize:R5},g1={concrete:!0,name:"codeFenced",tokenize:k5};function k5(n,e,t){const i=this,r={partial:!0,tokenize:k};let s=0,o=0,u;return h;function h(z){return d(z)}function d(z){const N=i.events[i.events.length-1];return s=N&&N[1].type==="linePrefix"?N[2].sliceSerialize(N[1],!0).length:0,u=z,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),p(z)}function p(z){return z===u?(o++,n.consume(z),p):o<3?t(z):(n.exit("codeFencedFenceSequence"),Wt(z)?ln(n,g,"whitespace")(z):g(z))}function g(z){return z===null||bt(z)?(n.exit("codeFencedFence"),i.interrupt?e(z):n.check(m1,b,F)(z)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),_(z))}function _(z){return z===null||bt(z)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),g(z)):Wt(z)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),ln(n,y,"whitespace")(z)):z===96&&z===u?t(z):(n.consume(z),_)}function y(z){return z===null||bt(z)?g(z):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),w(z))}function w(z){return z===null||bt(z)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),g(z)):z===96&&z===u?t(z):(n.consume(z),w)}function b(z){return n.attempt(r,F,C)(z)}function C(z){return n.enter("lineEnding"),n.consume(z),n.exit("lineEnding"),S}function S(z){return s>0&&Wt(z)?ln(n,T,"linePrefix",s+1)(z):T(z)}function T(z){return z===null||bt(z)?n.check(m1,b,F)(z):(n.enter("codeFlowValue"),R(z))}function R(z){return z===null||bt(z)?(n.exit("codeFlowValue"),T(z)):(n.consume(z),R)}function F(z){return n.exit("codeFenced"),e(z)}function k(z,N,I){let W=0;return j;function j(ne){return z.enter("lineEnding"),z.consume(ne),z.exit("lineEnding"),U}function U(ne){return z.enter("codeFencedFence"),Wt(ne)?ln(z,K,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ne):K(ne)}function K(ne){return ne===u?(z.enter("codeFencedFenceSequence"),Y(ne)):I(ne)}function Y(ne){return ne===u?(W++,z.consume(ne),Y):W>=o?(z.exit("codeFencedFenceSequence"),Wt(ne)?ln(z,Q,"whitespace")(ne):Q(ne)):I(ne)}function Q(ne){return ne===null||bt(ne)?(z.exit("codeFencedFence"),N(ne)):I(ne)}}}function R5(n,e,t){const i=this;return r;function r(o){return o===null?t(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?t(o):e(o)}}const K_={name:"codeIndented",tokenize:D5},I5={partial:!0,tokenize:N5};function D5(n,e,t){const i=this;return r;function r(d){return n.enter("codeIndented"),ln(n,s,"linePrefix",5)(d)}function s(d){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?o(d):t(d)}function o(d){return d===null?h(d):bt(d)?n.attempt(I5,o,h)(d):(n.enter("codeFlowValue"),u(d))}function u(d){return d===null||bt(d)?(n.exit("codeFlowValue"),o(d)):(n.consume(d),u)}function h(d){return n.exit("codeIndented"),e(d)}}function N5(n,e,t){const i=this;return r;function r(o){return i.parser.lazy[i.now().line]?t(o):bt(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),r):ln(n,s,"linePrefix",5)(o)}function s(o){const u=i.events[i.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(o):bt(o)?r(o):t(o)}}const O5={name:"codeText",previous:F5,resolve:z5,tokenize:B5};function z5(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function F5(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function B5(n,e,t){let i=0,r,s;return o;function o(g){return n.enter("codeText"),n.enter("codeTextSequence"),u(g)}function u(g){return g===96?(n.consume(g),i++,u):(n.exit("codeTextSequence"),h(g))}function h(g){return g===null?t(g):g===32?(n.enter("space"),n.consume(g),n.exit("space"),h):g===96?(s=n.enter("codeTextSequence"),r=0,p(g)):bt(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),h):(n.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||bt(g)?(n.exit("codeTextData"),h(g)):(n.consume(g),d)}function p(g){return g===96?(n.consume(g),r++,p):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(g)):(s.type="codeTextData",d(g))}}class U5{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&uh(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),uh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),uh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);uh(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);uh(this.left,t.reverse())}}}function uh(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function JT(n){const e={};let t=-1,i,r,s,o,u,h,d;const p=new U5(n);for(;++t<p.length;){for(;t in e;)t=e[t];if(i=p.get(t),t&&i[1].type==="chunkFlow"&&p.get(t-1)[1].type==="listItemPrefix"&&(h=i[1]._tokenizer.events,s=0,s<h.length&&h[s][1].type==="lineEndingBlank"&&(s+=2),s<h.length&&h[s][1].type==="content"))for(;++s<h.length&&h[s][1].type!=="content";)h[s][1].type==="chunkText"&&(h[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,H5(p,t)),t=e[t],d=!0);else if(i[1]._container){for(s=t,r=void 0;s--;)if(o=p.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(p.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(i[1].end={...p.get(r)[1].start},u=p.slice(r,t),u.unshift(i),p.splice(r,t-r+1,u))}}return Cs(n,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function H5(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const s=[];let o=t._tokenizer;o||(o=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const u=o.events,h=[],d={};let p,g,_=-1,y=t,w=0,b=0;const C=[b];for(;y;){for(;n.get(++r)[1]!==y;);s.push(r),y._tokenizer||(p=i.sliceStream(y),y.next||p.push(null),g&&o.defineSkip(y.start),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(p),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),g=y,y=y.next}for(y=t;++_<u.length;)u[_][0]==="exit"&&u[_-1][0]==="enter"&&u[_][1].type===u[_-1][1].type&&u[_][1].start.line!==u[_][1].end.line&&(b=_+1,C.push(b),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(o.events=[],y?(y._tokenizer=void 0,y.previous=void 0):C.pop(),_=C.length;_--;){const S=u.slice(C[_],C[_+1]),T=s.pop();h.push([T,T+S.length-1]),n.splice(T,2,S)}for(h.reverse(),_=-1;++_<h.length;)d[w+h[_][0]]=w+h[_][1],w+=h[_][1]-h[_][0]-1;return d}const V5={resolve:j5,tokenize:G5},W5={partial:!0,tokenize:$5};function j5(n){return JT(n),n}function G5(n,e){let t;return i;function i(u){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(u)}function r(u){return u===null?s(u):bt(u)?n.check(W5,o,s)(u):(n.consume(u),r)}function s(u){return n.exit("chunkContent"),n.exit("content"),e(u)}function o(u){return n.consume(u),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function $5(n,e,t){const i=this;return r;function r(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),ln(n,s,"linePrefix")}function s(o){if(o===null||bt(o))return t(o);const u=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(o):n.interrupt(i.parser.constructs.flow,t,e)(o)}}function QT(n,e,t,i,r,s,o,u,h){const d=h||Number.POSITIVE_INFINITY;let p=0;return g;function g(S){return S===60?(n.enter(i),n.enter(r),n.enter(s),n.consume(S),n.exit(s),_):S===null||S===32||S===41||Zy(S)?t(S):(n.enter(i),n.enter(o),n.enter(u),n.enter("chunkString",{contentType:"string"}),b(S))}function _(S){return S===62?(n.enter(s),n.consume(S),n.exit(s),n.exit(r),n.exit(i),e):(n.enter(u),n.enter("chunkString",{contentType:"string"}),y(S))}function y(S){return S===62?(n.exit("chunkString"),n.exit(u),_(S)):S===null||S===60||bt(S)?t(S):(n.consume(S),S===92?w:y)}function w(S){return S===60||S===62||S===92?(n.consume(S),y):y(S)}function b(S){return!p&&(S===null||S===41||Wi(S))?(n.exit("chunkString"),n.exit(u),n.exit(o),n.exit(i),e(S)):p<d&&S===40?(n.consume(S),p++,b):S===41?(n.consume(S),p--,b):S===null||S===32||S===40||Zy(S)?t(S):(n.consume(S),S===92?C:b)}function C(S){return S===40||S===41||S===92?(n.consume(S),b):b(S)}}function eL(n,e,t,i,r,s){const o=this;let u=0,h;return d;function d(y){return n.enter(i),n.enter(r),n.consume(y),n.exit(r),n.enter(s),p}function p(y){return u>999||y===null||y===91||y===93&&!h||y===94&&!u&&"_hiddenFootnoteSupport"in o.parser.constructs?t(y):y===93?(n.exit(s),n.enter(r),n.consume(y),n.exit(r),n.exit(i),e):bt(y)?(n.enter("lineEnding"),n.consume(y),n.exit("lineEnding"),p):(n.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===null||y===91||y===93||bt(y)||u++>999?(n.exit("chunkString"),p(y)):(n.consume(y),h||(h=!Wt(y)),y===92?_:g)}function _(y){return y===91||y===92||y===93?(n.consume(y),u++,g):g(y)}}function tL(n,e,t,i,r,s){let o;return u;function u(_){return _===34||_===39||_===40?(n.enter(i),n.enter(r),n.consume(_),n.exit(r),o=_===40?41:_,h):t(_)}function h(_){return _===o?(n.enter(r),n.consume(_),n.exit(r),n.exit(i),e):(n.enter(s),d(_))}function d(_){return _===o?(n.exit(s),h(o)):_===null?t(_):bt(_)?(n.enter("lineEnding"),n.consume(_),n.exit("lineEnding"),ln(n,d,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),p(_))}function p(_){return _===o||_===null||bt(_)?(n.exit("chunkString"),d(_)):(n.consume(_),_===92?g:p)}function g(_){return _===o||_===92?(n.consume(_),p):p(_)}}function Dh(n,e){let t;return i;function i(r){return bt(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):Wt(r)?ln(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const Z5={name:"definition",tokenize:X5},q5={partial:!0,tokenize:Y5};function X5(n,e,t){const i=this;let r;return s;function s(y){return n.enter("definition"),o(y)}function o(y){return eL.call(i,n,u,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function u(y){return r=Ru(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),y===58?(n.enter("definitionMarker"),n.consume(y),n.exit("definitionMarker"),h):t(y)}function h(y){return Wi(y)?Dh(n,d)(y):d(y)}function d(y){return QT(n,p,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function p(y){return n.attempt(q5,g,g)(y)}function g(y){return Wt(y)?ln(n,_,"whitespace")(y):_(y)}function _(y){return y===null||bt(y)?(n.exit("definition"),i.parser.defined.push(r),e(y)):t(y)}}function Y5(n,e,t){return i;function i(u){return Wi(u)?Dh(n,r)(u):t(u)}function r(u){return tL(n,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function s(u){return Wt(u)?ln(n,o,"whitespace")(u):o(u)}function o(u){return u===null||bt(u)?e(u):t(u)}}const K5={name:"hardBreakEscape",tokenize:J5};function J5(n,e,t){return i;function i(s){return n.enter("hardBreakEscape"),n.consume(s),r}function r(s){return bt(s)?(n.exit("hardBreakEscape"),e(s)):t(s)}}const Q5={name:"headingAtx",resolve:eV,tokenize:tV};function eV(n,e){let t=n.length-2,i=3,r,s;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},s={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},Cs(n,i,t-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),n}function tV(n,e,t){let i=0;return r;function r(p){return n.enter("atxHeading"),s(p)}function s(p){return n.enter("atxHeadingSequence"),o(p)}function o(p){return p===35&&i++<6?(n.consume(p),o):p===null||Wi(p)?(n.exit("atxHeadingSequence"),u(p)):t(p)}function u(p){return p===35?(n.enter("atxHeadingSequence"),h(p)):p===null||bt(p)?(n.exit("atxHeading"),e(p)):Wt(p)?ln(n,u,"whitespace")(p):(n.enter("atxHeadingText"),d(p))}function h(p){return p===35?(n.consume(p),h):(n.exit("atxHeadingSequence"),u(p))}function d(p){return p===null||p===35||Wi(p)?(n.exit("atxHeadingText"),u(p)):(n.consume(p),d)}}const nV=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],_1=["pre","script","style","textarea"],iV={concrete:!0,name:"htmlFlow",resolveTo:oV,tokenize:aV},rV={partial:!0,tokenize:uV},sV={partial:!0,tokenize:lV};function oV(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function aV(n,e,t){const i=this;let r,s,o,u,h;return d;function d(D){return p(D)}function p(D){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(D),g}function g(D){return D===33?(n.consume(D),_):D===47?(n.consume(D),s=!0,b):D===63?(n.consume(D),r=3,i.interrupt?e:O):bs(D)?(n.consume(D),o=String.fromCharCode(D),C):t(D)}function _(D){return D===45?(n.consume(D),r=2,y):D===91?(n.consume(D),r=5,u=0,w):bs(D)?(n.consume(D),r=4,i.interrupt?e:O):t(D)}function y(D){return D===45?(n.consume(D),i.interrupt?e:O):t(D)}function w(D){const fe="CDATA[";return D===fe.charCodeAt(u++)?(n.consume(D),u===fe.length?i.interrupt?e:K:w):t(D)}function b(D){return bs(D)?(n.consume(D),o=String.fromCharCode(D),C):t(D)}function C(D){if(D===null||D===47||D===62||Wi(D)){const fe=D===47,ve=o.toLowerCase();return!fe&&!s&&_1.includes(ve)?(r=1,i.interrupt?e(D):K(D)):nV.includes(o.toLowerCase())?(r=6,fe?(n.consume(D),S):i.interrupt?e(D):K(D)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(D):s?T(D):R(D))}return D===45||ur(D)?(n.consume(D),o+=String.fromCharCode(D),C):t(D)}function S(D){return D===62?(n.consume(D),i.interrupt?e:K):t(D)}function T(D){return Wt(D)?(n.consume(D),T):j(D)}function R(D){return D===47?(n.consume(D),j):D===58||D===95||bs(D)?(n.consume(D),F):Wt(D)?(n.consume(D),R):j(D)}function F(D){return D===45||D===46||D===58||D===95||ur(D)?(n.consume(D),F):k(D)}function k(D){return D===61?(n.consume(D),z):Wt(D)?(n.consume(D),k):R(D)}function z(D){return D===null||D===60||D===61||D===62||D===96?t(D):D===34||D===39?(n.consume(D),h=D,N):Wt(D)?(n.consume(D),z):I(D)}function N(D){return D===h?(n.consume(D),h=null,W):D===null||bt(D)?t(D):(n.consume(D),N)}function I(D){return D===null||D===34||D===39||D===47||D===60||D===61||D===62||D===96||Wi(D)?k(D):(n.consume(D),I)}function W(D){return D===47||D===62||Wt(D)?R(D):t(D)}function j(D){return D===62?(n.consume(D),U):t(D)}function U(D){return D===null||bt(D)?K(D):Wt(D)?(n.consume(D),U):t(D)}function K(D){return D===45&&r===2?(n.consume(D),oe):D===60&&r===1?(n.consume(D),ae):D===62&&r===4?(n.consume(D),G):D===63&&r===3?(n.consume(D),O):D===93&&r===5?(n.consume(D),pe):bt(D)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(rV,se,Y)(D)):D===null||bt(D)?(n.exit("htmlFlowData"),Y(D)):(n.consume(D),K)}function Y(D){return n.check(sV,Q,se)(D)}function Q(D){return n.enter("lineEnding"),n.consume(D),n.exit("lineEnding"),ne}function ne(D){return D===null||bt(D)?Y(D):(n.enter("htmlFlowData"),K(D))}function oe(D){return D===45?(n.consume(D),O):K(D)}function ae(D){return D===47?(n.consume(D),o="",ee):K(D)}function ee(D){if(D===62){const fe=o.toLowerCase();return _1.includes(fe)?(n.consume(D),G):K(D)}return bs(D)&&o.length<8?(n.consume(D),o+=String.fromCharCode(D),ee):K(D)}function pe(D){return D===93?(n.consume(D),O):K(D)}function O(D){return D===62?(n.consume(D),G):D===45&&r===2?(n.consume(D),O):K(D)}function G(D){return D===null||bt(D)?(n.exit("htmlFlowData"),se(D)):(n.consume(D),G)}function se(D){return n.exit("htmlFlow"),e(D)}}function lV(n,e,t){const i=this;return r;function r(o){return bt(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s):t(o)}function s(o){return i.parser.lazy[i.now().line]?t(o):e(o)}}function uV(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(bm,e,t)}}const cV={name:"htmlText",tokenize:hV};function hV(n,e,t){const i=this;let r,s,o;return u;function u(O){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(O),h}function h(O){return O===33?(n.consume(O),d):O===47?(n.consume(O),k):O===63?(n.consume(O),R):bs(O)?(n.consume(O),I):t(O)}function d(O){return O===45?(n.consume(O),p):O===91?(n.consume(O),s=0,w):bs(O)?(n.consume(O),T):t(O)}function p(O){return O===45?(n.consume(O),y):t(O)}function g(O){return O===null?t(O):O===45?(n.consume(O),_):bt(O)?(o=g,ae(O)):(n.consume(O),g)}function _(O){return O===45?(n.consume(O),y):g(O)}function y(O){return O===62?oe(O):O===45?_(O):g(O)}function w(O){const G="CDATA[";return O===G.charCodeAt(s++)?(n.consume(O),s===G.length?b:w):t(O)}function b(O){return O===null?t(O):O===93?(n.consume(O),C):bt(O)?(o=b,ae(O)):(n.consume(O),b)}function C(O){return O===93?(n.consume(O),S):b(O)}function S(O){return O===62?oe(O):O===93?(n.consume(O),S):b(O)}function T(O){return O===null||O===62?oe(O):bt(O)?(o=T,ae(O)):(n.consume(O),T)}function R(O){return O===null?t(O):O===63?(n.consume(O),F):bt(O)?(o=R,ae(O)):(n.consume(O),R)}function F(O){return O===62?oe(O):R(O)}function k(O){return bs(O)?(n.consume(O),z):t(O)}function z(O){return O===45||ur(O)?(n.consume(O),z):N(O)}function N(O){return bt(O)?(o=N,ae(O)):Wt(O)?(n.consume(O),N):oe(O)}function I(O){return O===45||ur(O)?(n.consume(O),I):O===47||O===62||Wi(O)?W(O):t(O)}function W(O){return O===47?(n.consume(O),oe):O===58||O===95||bs(O)?(n.consume(O),j):bt(O)?(o=W,ae(O)):Wt(O)?(n.consume(O),W):oe(O)}function j(O){return O===45||O===46||O===58||O===95||ur(O)?(n.consume(O),j):U(O)}function U(O){return O===61?(n.consume(O),K):bt(O)?(o=U,ae(O)):Wt(O)?(n.consume(O),U):W(O)}function K(O){return O===null||O===60||O===61||O===62||O===96?t(O):O===34||O===39?(n.consume(O),r=O,Y):bt(O)?(o=K,ae(O)):Wt(O)?(n.consume(O),K):(n.consume(O),Q)}function Y(O){return O===r?(n.consume(O),r=void 0,ne):O===null?t(O):bt(O)?(o=Y,ae(O)):(n.consume(O),Y)}function Q(O){return O===null||O===34||O===39||O===60||O===61||O===96?t(O):O===47||O===62||Wi(O)?W(O):(n.consume(O),Q)}function ne(O){return O===47||O===62||Wi(O)?W(O):t(O)}function oe(O){return O===62?(n.consume(O),n.exit("htmlTextData"),n.exit("htmlText"),e):t(O)}function ae(O){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(O),n.exit("lineEnding"),ee}function ee(O){return Wt(O)?ln(n,pe,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):pe(O)}function pe(O){return n.enter("htmlTextData"),o(O)}}const rx={name:"labelEnd",resolveAll:mV,resolveTo:gV,tokenize:_V},dV={tokenize:yV},fV={tokenize:vV},pV={tokenize:xV};function mV(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&Cs(n,0,n.length,t),n}function gV(n,e){let t=n.length,i=0,r,s,o,u;for(;t--;)if(r=n[t][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(o=t);const h={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},d={type:"label",start:{...n[s][1].start},end:{...n[o][1].end}},p={type:"labelText",start:{...n[s+i+2][1].end},end:{...n[o-2][1].start}};return u=[["enter",h,e],["enter",d,e]],u=Cr(u,n.slice(s+1,s+i+3)),u=Cr(u,[["enter",p,e]]),u=Cr(u,ix(e.parser.constructs.insideSpan.null,n.slice(s+i+4,o-3),e)),u=Cr(u,[["exit",p,e],n[o-2],n[o-1],["exit",d,e]]),u=Cr(u,n.slice(o+1)),u=Cr(u,[["exit",h,e]]),Cs(n,s,n.length,u),n}function _V(n,e,t){const i=this;let r=i.events.length,s,o;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return u;function u(_){return s?s._inactive?g(_):(o=i.parser.defined.includes(Ru(i.sliceSerialize({start:s.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(_),n.exit("labelMarker"),n.exit("labelEnd"),h):t(_)}function h(_){return _===40?n.attempt(dV,p,o?p:g)(_):_===91?n.attempt(fV,p,o?d:g)(_):o?p(_):g(_)}function d(_){return n.attempt(pV,p,g)(_)}function p(_){return e(_)}function g(_){return s._balanced=!0,t(_)}}function yV(n,e,t){return i;function i(g){return n.enter("resource"),n.enter("resourceMarker"),n.consume(g),n.exit("resourceMarker"),r}function r(g){return Wi(g)?Dh(n,s)(g):s(g)}function s(g){return g===41?p(g):QT(n,o,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function o(g){return Wi(g)?Dh(n,h)(g):p(g)}function u(g){return t(g)}function h(g){return g===34||g===39||g===40?tL(n,d,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function d(g){return Wi(g)?Dh(n,p)(g):p(g)}function p(g){return g===41?(n.enter("resourceMarker"),n.consume(g),n.exit("resourceMarker"),n.exit("resource"),e):t(g)}}function vV(n,e,t){const i=this;return r;function r(u){return eL.call(i,n,s,o,"reference","referenceMarker","referenceString")(u)}function s(u){return i.parser.defined.includes(Ru(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(u):t(u)}function o(u){return t(u)}}function xV(n,e,t){return i;function i(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),r}function r(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):t(s)}}const wV={name:"labelStartImage",resolveAll:rx.resolveAll,tokenize:bV};function bV(n,e,t){const i=this;return r;function r(u){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(u),n.exit("labelImageMarker"),s}function s(u){return u===91?(n.enter("labelMarker"),n.consume(u),n.exit("labelMarker"),n.exit("labelImage"),o):t(u)}function o(u){return u===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(u):e(u)}}const SV={name:"labelStartLink",resolveAll:rx.resolveAll,tokenize:MV};function MV(n,e,t){const i=this;return r;function r(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(o):e(o)}}const J_={name:"lineEnding",tokenize:EV};function EV(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),ln(n,e,"linePrefix")}}const Ep={name:"thematicBreak",tokenize:TV};function TV(n,e,t){let i=0,r;return s;function s(d){return n.enter("thematicBreak"),o(d)}function o(d){return r=d,u(d)}function u(d){return d===r?(n.enter("thematicBreakSequence"),h(d)):i>=3&&(d===null||bt(d))?(n.exit("thematicBreak"),e(d)):t(d)}function h(d){return d===r?(n.consume(d),i++,h):(n.exit("thematicBreakSequence"),Wt(d)?ln(n,u,"whitespace")(d):u(d))}}const Bi={continuation:{tokenize:AV},exit:RV,name:"list",tokenize:PV},LV={partial:!0,tokenize:IV},CV={partial:!0,tokenize:kV};function PV(n,e,t){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return u;function u(y){const w=i.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!i.containerState.marker||y===i.containerState.marker:qy(y)){if(i.containerState.type||(i.containerState.type=w,n.enter(w,{_container:!0})),w==="listUnordered")return n.enter("listItemPrefix"),y===42||y===45?n.check(Ep,t,d)(y):d(y);if(!i.interrupt||y===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),h(y)}return t(y)}function h(y){return qy(y)&&++o<10?(n.consume(y),h):(!i.interrupt||o<2)&&(i.containerState.marker?y===i.containerState.marker:y===41||y===46)?(n.exit("listItemValue"),d(y)):t(y)}function d(y){return n.enter("listItemMarker"),n.consume(y),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||y,n.check(bm,i.interrupt?t:p,n.attempt(LV,_,g))}function p(y){return i.containerState.initialBlankLine=!0,s++,_(y)}function g(y){return Wt(y)?(n.enter("listItemPrefixWhitespace"),n.consume(y),n.exit("listItemPrefixWhitespace"),_):t(y)}function _(y){return i.containerState.size=s+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(y)}}function AV(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(bm,r,s);function r(u){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,ln(n,e,"listItemIndent",i.containerState.size+1)(u)}function s(u){return i.containerState.furtherBlankLines||!Wt(u)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(u)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(CV,e,o)(u))}function o(u){return i.containerState._closeFlow=!0,i.interrupt=void 0,ln(n,n.attempt(Bi,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function kV(n,e,t){const i=this;return ln(n,r,"listItemIndent",i.containerState.size+1);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?e(s):t(s)}}function RV(n){n.exit(this.containerState.type)}function IV(n,e,t){const i=this;return ln(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const o=i.events[i.events.length-1];return!Wt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const y1={name:"setextUnderline",resolveTo:DV,tokenize:NV};function DV(n,e){let t=n.length,i,r,s;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!s&&n[t][1].type==="definition"&&(s=t);const o={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",s?(n.splice(r,0,["enter",o,e]),n.splice(s+1,0,["exit",n[i][1],e]),n[i][1].end={...n[s][1].end}):n[i][1]=o,n.push(["exit",o,e]),n}function NV(n,e,t){const i=this;let r;return s;function s(d){let p=i.events.length,g;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){g=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||g)?(n.enter("setextHeadingLine"),r=d,o(d)):t(d)}function o(d){return n.enter("setextHeadingLineSequence"),u(d)}function u(d){return d===r?(n.consume(d),u):(n.exit("setextHeadingLineSequence"),Wt(d)?ln(n,h,"lineSuffix")(d):h(d))}function h(d){return d===null||bt(d)?(n.exit("setextHeadingLine"),e(d)):t(d)}}const OV={tokenize:zV};function zV(n){const e=this,t=n.attempt(bm,i,n.attempt(this.parser.constructs.flowInitial,r,ln(n,n.attempt(this.parser.constructs.flow,r,n.attempt(V5,r)),"linePrefix")));return t;function i(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const FV={resolveAll:iL()},BV=nL("string"),UV=nL("text");function nL(n){return{resolveAll:iL(n==="text"?HV:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],s=t.attempt(r,o,u);return o;function o(p){return d(p)?s(p):u(p)}function u(p){if(p===null){t.consume(p);return}return t.enter("data"),t.consume(p),h}function h(p){return d(p)?(t.exit("data"),s(p)):(t.consume(p),h)}function d(p){if(p===null)return!0;const g=r[p];let _=-1;if(g)for(;++_<g.length;){const y=g[_];if(!y.previous||y.previous.call(i,i.previous))return!0}return!1}}}function iL(n){return e;function e(t,i){let r=-1,s;for(;++r<=t.length;)s===void 0?t[r]&&t[r][1].type==="data"&&(s=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),r=s+2),s=void 0);return n?n(t,i):t}}function HV(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let s=r.length,o=-1,u=0,h;for(;s--;){const d=r[s];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)u++,o--;if(o)break;o=-1}else if(d===-2)h=!0,u++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(u=0),u){const d={type:t===n.length||h||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-u,offset:i.end.offset-u},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(n.splice(t,0,["enter",d,e],["exit",d,e]),t+=2)}t++}return n}const VV={42:Bi,43:Bi,45:Bi,48:Bi,49:Bi,50:Bi,51:Bi,52:Bi,53:Bi,54:Bi,55:Bi,56:Bi,57:Bi,62:XT},WV={91:Z5},jV={[-2]:K_,[-1]:K_,32:K_},GV={35:Q5,42:Ep,45:[y1,Ep],60:iV,61:y1,95:Ep,96:g1,126:g1},$V={38:KT,92:YT},ZV={[-5]:J_,[-4]:J_,[-3]:J_,33:wV,38:KT,42:Xy,60:[S5,cV],91:SV,92:[K5,YT],93:rx,95:Xy,96:O5},qV={null:[Xy,FV]},XV={null:[42,95]},YV={null:[]},KV=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:XV,contentInitial:WV,disable:YV,document:VV,flow:GV,flowInitial:jV,insideSpan:qV,string:$V,text:ZV},Symbol.toStringTag,{value:"Module"}));function JV(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},s=[];let o=[],u=[];const h={attempt:N(k),check:N(z),consume:T,enter:R,exit:F,interrupt:N(z,{interrupt:!0})},d={code:null,containerState:{},defineSkip:b,events:[],now:w,parser:n,previous:null,sliceSerialize:_,sliceStream:y,write:g};let p=e.tokenize.call(d,h);return e.resolveAll&&s.push(e),d;function g(U){return o=Cr(o,U),C(),o[o.length-1]!==null?[]:(I(e,0),d.events=ix(s,d.events,d),d.events)}function _(U,K){return e6(y(U),K)}function y(U){return QV(o,U)}function w(){const{_bufferIndex:U,_index:K,line:Y,column:Q,offset:ne}=i;return{_bufferIndex:U,_index:K,line:Y,column:Q,offset:ne}}function b(U){r[U.line]=U.column,j()}function C(){let U;for(;i._index<o.length;){const K=o[i._index];if(typeof K=="string")for(U=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===U&&i._bufferIndex<K.length;)S(K.charCodeAt(i._bufferIndex));else S(K)}}function S(U){p=p(U)}function T(U){bt(U)?(i.line++,i.column=1,i.offset+=U===-3?2:1,j()):U!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=U}function R(U,K){const Y=K||{};return Y.type=U,Y.start=w(),d.events.push(["enter",Y,d]),u.push(Y),Y}function F(U){const K=u.pop();return K.end=w(),d.events.push(["exit",K,d]),K}function k(U,K){I(U,K.from)}function z(U,K){K.restore()}function N(U,K){return Y;function Y(Q,ne,oe){let ae,ee,pe,O;return Array.isArray(Q)?se(Q):"tokenize"in Q?se([Q]):G(Q);function G(te){return Ne;function Ne(Pe){const ke=Pe!==null&&te[Pe],ze=Pe!==null&&te.null,We=[...Array.isArray(ke)?ke:ke?[ke]:[],...Array.isArray(ze)?ze:ze?[ze]:[]];return se(We)(Pe)}}function se(te){return ae=te,ee=0,te.length===0?oe:D(te[ee])}function D(te){return Ne;function Ne(Pe){return O=W(),pe=te,te.partial||(d.currentConstruct=te),te.name&&d.parser.constructs.disable.null.includes(te.name)?ve():te.tokenize.call(K?Object.assign(Object.create(d),K):d,h,fe,ve)(Pe)}}function fe(te){return U(pe,O),ne}function ve(te){return O.restore(),++ee<ae.length?D(ae[ee]):oe}}}function I(U,K){U.resolveAll&&!s.includes(U)&&s.push(U),U.resolve&&Cs(d.events,K,d.events.length-K,U.resolve(d.events.slice(K),d)),U.resolveTo&&(d.events=U.resolveTo(d.events,d))}function W(){const U=w(),K=d.previous,Y=d.currentConstruct,Q=d.events.length,ne=Array.from(u);return{from:Q,restore:oe};function oe(){i=U,d.previous=K,d.currentConstruct=Y,d.events.length=Q,u=ne,j()}}function j(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function QV(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let o;if(t===r)o=[n[t].slice(i,s)];else{if(o=n.slice(t,r),i>-1){const u=o[0];typeof u=="string"?o[0]=u.slice(i):o.shift()}s>0&&o.push(n[r].slice(0,s))}return o}function e6(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const s=n[t];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(s)}r=s===-2,i.push(o)}return i.join("")}function t6(n){const i={constructs:l5([KV,...(n||{}).extensions||[]]),content:r(g5),defined:[],document:r(y5),flow:r(OV),lazy:{},string:r(BV),text:r(UV)};return i;function r(s){return o;function o(u){return JV(i,s,u)}}}function n6(n){for(;!JT(n););return n}const v1=/[\0\t\n\r]/g;function i6(){let n=1,e="",t=!0,i;return r;function r(s,o,u){const h=[];let d,p,g,_,y;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),g=0,e="",t&&(s.charCodeAt(0)===65279&&g++,t=void 0);g<s.length;){if(v1.lastIndex=g,d=v1.exec(s),_=d&&d.index!==void 0?d.index:s.length,y=s.charCodeAt(_),!d){e=s.slice(g);break}if(y===10&&g===_&&i)h.push(-3),i=void 0;else switch(i&&(h.push(-5),i=void 0),g<_&&(h.push(s.slice(g,_)),n+=_-g),y){case 0:{h.push(65533),n++;break}case 9:{for(p=Math.ceil(n/4)*4,h.push(-2);n++<p;)h.push(-1);break}case 10:{h.push(-4),n=1;break}default:i=!0,n=1}g=_+1}return u&&(i&&h.push(-5),e&&h.push(e),h.push(null)),h}}const r6=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function s6(n){return n.replace(r6,o6)}function o6(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),s=r===120||r===88;return qT(t.slice(s?2:1),s?16:10)}return nx(t)||n}const rL={}.hasOwnProperty;function a6(n,e,t){return typeof e!="string"&&(t=e,e=void 0),l6(t)(n6(t6(t).document().write(i6()(n,e,!0))))}function l6(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(we),autolinkProtocol:W,autolinkEmail:W,atxHeading:s(je),blockQuote:s(ze),characterEscape:W,characterReference:W,codeFenced:s(We),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(We,o),codeText:s(be,o),codeTextData:W,data:W,codeFlowValue:W,definition:s(Re),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(De),hardBreakEscape:s(Ie),hardBreakTrailing:s(Ie),htmlFlow:s(X,o),htmlFlowData:W,htmlText:s(X,o),htmlTextData:W,image:s($),label:o,link:s(we),listItem:s($e),listItemValue:_,listOrdered:s(Ae,g),listUnordered:s(Ae),paragraph:s(Ke),reference:D,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(je),strong:s(rt),thematicBreak:s(st)},exit:{atxHeading:h(),atxHeadingSequence:k,autolink:h(),autolinkEmail:ke,autolinkProtocol:Pe,blockQuote:h(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:ve,characterReferenceMarkerNumeric:ve,characterReferenceValue:te,characterReference:Ne,codeFenced:h(C),codeFencedFence:b,codeFencedFenceInfo:y,codeFencedFenceMeta:w,codeFlowValue:j,codeIndented:h(S),codeText:h(ne),codeTextData:j,data:j,definition:h(),definitionDestinationString:F,definitionLabelString:T,definitionTitleString:R,emphasis:h(),hardBreakEscape:h(K),hardBreakTrailing:h(K),htmlFlow:h(Y),htmlFlowData:j,htmlText:h(Q),htmlTextData:j,image:h(ae),label:pe,labelText:ee,lineEnding:U,link:h(oe),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:fe,resourceDestinationString:O,resourceTitleString:G,resource:se,setextHeading:h(I),setextHeadingLineSequence:N,setextHeadingText:z,strong:h(),thematicBreak:h()}};sL(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(he){let q={type:"root",children:[]};const Le={stack:[q],tokenStack:[],config:e,enter:u,exit:d,buffer:o,resume:p,data:t},Se=[];let Fe=-1;for(;++Fe<he.length;)if(he[Fe][1].type==="listOrdered"||he[Fe][1].type==="listUnordered")if(he[Fe][0]==="enter")Se.push(Fe);else{const Xe=Se.pop();Fe=r(he,Xe,Fe)}for(Fe=-1;++Fe<he.length;){const Xe=e[he[Fe][0]];rL.call(Xe,he[Fe][1].type)&&Xe[he[Fe][1].type].call(Object.assign({sliceSerialize:he[Fe][2].sliceSerialize},Le),he[Fe][1])}if(Le.tokenStack.length>0){const Xe=Le.tokenStack[Le.tokenStack.length-1];(Xe[1]||x1).call(Le,void 0,Xe[0])}for(q.position={start:qo(he.length>0?he[0][1].start:{line:1,column:1,offset:0}),end:qo(he.length>0?he[he.length-2][1].end:{line:1,column:1,offset:0})},Fe=-1;++Fe<e.transforms.length;)q=e.transforms[Fe](q)||q;return q}function r(he,q,Le){let Se=q-1,Fe=-1,Xe=!1,ut,At,Ot,gn;for(;++Se<=Le;){const le=he[Se];switch(le[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{le[0]==="enter"?Fe++:Fe--,gn=void 0;break}case"lineEndingBlank":{le[0]==="enter"&&(ut&&!gn&&!Fe&&!Ot&&(Ot=Se),gn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:gn=void 0}if(!Fe&&le[0]==="enter"&&le[1].type==="listItemPrefix"||Fe===-1&&le[0]==="exit"&&(le[1].type==="listUnordered"||le[1].type==="listOrdered")){if(ut){let Be=Se;for(At=void 0;Be--;){const tt=he[Be];if(tt[1].type==="lineEnding"||tt[1].type==="lineEndingBlank"){if(tt[0]==="exit")continue;At&&(he[At][1].type="lineEndingBlank",Xe=!0),tt[1].type="lineEnding",At=Be}else if(!(tt[1].type==="linePrefix"||tt[1].type==="blockQuotePrefix"||tt[1].type==="blockQuotePrefixWhitespace"||tt[1].type==="blockQuoteMarker"||tt[1].type==="listItemIndent"))break}Ot&&(!At||Ot<At)&&(ut._spread=!0),ut.end=Object.assign({},At?he[At][1].start:le[1].end),he.splice(At||Se,0,["exit",ut,le[2]]),Se++,Le++}if(le[1].type==="listItemPrefix"){const Be={type:"listItem",_spread:!1,start:Object.assign({},le[1].start),end:void 0};ut=Be,he.splice(Se,0,["enter",Be,le[2]]),Se++,Le++,Ot=void 0,gn=!0}}}return he[q][1]._spread=Xe,Le}function s(he,q){return Le;function Le(Se){u.call(this,he(Se),Se),q&&q.call(this,Se)}}function o(){this.stack.push({type:"fragment",children:[]})}function u(he,q,Le){this.stack[this.stack.length-1].children.push(he),this.stack.push(he),this.tokenStack.push([q,Le||void 0]),he.position={start:qo(q.start),end:void 0}}function h(he){return q;function q(Le){he&&he.call(this,Le),d.call(this,Le)}}function d(he,q){const Le=this.stack.pop(),Se=this.tokenStack.pop();if(Se)Se[0].type!==he.type&&(q?q.call(this,he,Se[0]):(Se[1]||x1).call(this,he,Se[0]));else throw new Error("Cannot close `"+he.type+"` ("+Ih({start:he.start,end:he.end})+"): it’s not open");Le.position.end=qo(he.end)}function p(){return o5(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function _(he){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(he),10),this.data.expectingFirstListItemValue=void 0}}function y(){const he=this.resume(),q=this.stack[this.stack.length-1];q.lang=he}function w(){const he=this.resume(),q=this.stack[this.stack.length-1];q.meta=he}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const he=this.resume(),q=this.stack[this.stack.length-1];q.value=he.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const he=this.resume(),q=this.stack[this.stack.length-1];q.value=he.replace(/(\r?\n|\r)$/g,"")}function T(he){const q=this.resume(),Le=this.stack[this.stack.length-1];Le.label=q,Le.identifier=Ru(this.sliceSerialize(he)).toLowerCase()}function R(){const he=this.resume(),q=this.stack[this.stack.length-1];q.title=he}function F(){const he=this.resume(),q=this.stack[this.stack.length-1];q.url=he}function k(he){const q=this.stack[this.stack.length-1];if(!q.depth){const Le=this.sliceSerialize(he).length;q.depth=Le}}function z(){this.data.setextHeadingSlurpLineEnding=!0}function N(he){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(he).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function W(he){const Le=this.stack[this.stack.length-1].children;let Se=Le[Le.length-1];(!Se||Se.type!=="text")&&(Se=Je(),Se.position={start:qo(he.start),end:void 0},Le.push(Se)),this.stack.push(Se)}function j(he){const q=this.stack.pop();q.value+=this.sliceSerialize(he),q.position.end=qo(he.end)}function U(he){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Le=q.children[q.children.length-1];Le.position.end=qo(he.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(q.type)&&(W.call(this,he),j.call(this,he))}function K(){this.data.atHardBreak=!0}function Y(){const he=this.resume(),q=this.stack[this.stack.length-1];q.value=he}function Q(){const he=this.resume(),q=this.stack[this.stack.length-1];q.value=he}function ne(){const he=this.resume(),q=this.stack[this.stack.length-1];q.value=he}function oe(){const he=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";he.type+="Reference",he.referenceType=q,delete he.url,delete he.title}else delete he.identifier,delete he.label;this.data.referenceType=void 0}function ae(){const he=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";he.type+="Reference",he.referenceType=q,delete he.url,delete he.title}else delete he.identifier,delete he.label;this.data.referenceType=void 0}function ee(he){const q=this.sliceSerialize(he),Le=this.stack[this.stack.length-2];Le.label=s6(q),Le.identifier=Ru(q).toLowerCase()}function pe(){const he=this.stack[this.stack.length-1],q=this.resume(),Le=this.stack[this.stack.length-1];if(this.data.inReference=!0,Le.type==="link"){const Se=he.children;Le.children=Se}else Le.alt=q}function O(){const he=this.resume(),q=this.stack[this.stack.length-1];q.url=he}function G(){const he=this.resume(),q=this.stack[this.stack.length-1];q.title=he}function se(){this.data.inReference=void 0}function D(){this.data.referenceType="collapsed"}function fe(he){const q=this.resume(),Le=this.stack[this.stack.length-1];Le.label=q,Le.identifier=Ru(this.sliceSerialize(he)).toLowerCase(),this.data.referenceType="full"}function ve(he){this.data.characterReferenceType=he.type}function te(he){const q=this.sliceSerialize(he),Le=this.data.characterReferenceType;let Se;Le?(Se=qT(q,Le==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Se=nx(q);const Fe=this.stack[this.stack.length-1];Fe.value+=Se}function Ne(he){const q=this.stack.pop();q.position.end=qo(he.end)}function Pe(he){j.call(this,he);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(he)}function ke(he){j.call(this,he);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(he)}function ze(){return{type:"blockquote",children:[]}}function We(){return{type:"code",lang:null,meta:null,value:""}}function be(){return{type:"inlineCode",value:""}}function Re(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function De(){return{type:"emphasis",children:[]}}function je(){return{type:"heading",depth:0,children:[]}}function Ie(){return{type:"break"}}function X(){return{type:"html",value:""}}function $(){return{type:"image",title:null,url:"",alt:null}}function we(){return{type:"link",title:null,url:"",children:[]}}function Ae(he){return{type:"list",ordered:he.type==="listOrdered",start:null,spread:he._spread,children:[]}}function $e(he){return{type:"listItem",spread:he._spread,checked:null,children:[]}}function Ke(){return{type:"paragraph",children:[]}}function rt(){return{type:"strong",children:[]}}function Je(){return{type:"text",value:""}}function st(){return{type:"thematicBreak"}}}function qo(n){return{line:n.line,column:n.column,offset:n.offset}}function sL(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?sL(n,i):u6(n,i)}}function u6(n,e){let t;for(t in e)if(rL.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function x1(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Ih({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Ih({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ih({start:e.start,end:e.end})+") is still open")}function c6(n){const e=this;e.parser=t;function t(i){return a6(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function h6(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function d6(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function f6(n,e){const t=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(r.data={meta:e.meta}),n.patch(e,r),r=n.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(e,r),r}function p6(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function m6(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function g6(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=ic(i.toLowerCase()),s=n.footnoteOrder.indexOf(i);let o,u=n.footnoteCounts.get(i);u===void 0?(u=0,n.footnoteOrder.push(i),o=n.footnoteOrder.length):o=s+1,u+=1,n.footnoteCounts.set(i,u);const h={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};n.patch(e,h);const d={type:"element",tagName:"sup",properties:{},children:[h]};return n.patch(e,d),n.applyData(e,d)}function _6(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function y6(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function oL(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=i:r.push({type:"text",value:i}),r}function v6(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return oL(n,e);const r={src:ic(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,s),n.applyData(e,s)}function x6(n,e){const t={src:ic(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function w6(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function b6(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return oL(n,e);const r={href:ic(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,s),n.applyData(e,s)}function S6(n,e){const t={href:ic(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function M6(n,e,t){const i=n.all(e),r=t?E6(t):aL(e),s={},o=[];if(typeof e.checked=="boolean"){const p=i[0];let g;p&&p.type==="element"&&p.tagName==="p"?g=p:(g={type:"element",tagName:"p",properties:{},children:[]},i.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let u=-1;for(;++u<i.length;){const p=i[u];(r||u!==0||p.type!=="element"||p.tagName!=="p")&&o.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!r?o.push(...p.children):o.push(p)}const h=i[i.length-1];h&&(r||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:o};return n.patch(e,d),n.applyData(e,d)}function E6(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=aL(t[i])}return e}function aL(n){const e=n.spread;return e??n.children.length>1}function T6(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const o=i[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,s),n.applyData(e,s)}function L6(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function C6(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function P6(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function A6(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const o={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],o),r.push(o)}if(t.length>0){const o={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},u=Jv(e.children[1]),h=HT(e.children[e.children.length-1]);u&&h&&(o.position={start:u,end:h}),r.push(o)}const s={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,s),n.applyData(e,s)}function k6(n,e,t){const i=t?t.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",o=t&&t.type==="table"?t.align:void 0,u=o?o.length:e.children.length;let h=-1;const d=[];for(;++h<u;){const g=e.children[h],_={},y=o?o[h]:void 0;y&&(_.align=y);let w={type:"element",tagName:s,properties:_,children:[]};g&&(w.children=n.all(g),n.patch(g,w),w=n.applyData(g,w)),d.push(w)}const p={type:"element",tagName:"tr",properties:{},children:n.wrap(d,!0)};return n.patch(e,p),n.applyData(e,p)}function R6(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const w1=9,b1=32;function I6(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const s=[];for(;i;)s.push(S1(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return s.push(S1(e.slice(r),r>0,!1)),s.join("")}function S1(n,e,t){let i=0,r=n.length;if(e){let s=n.codePointAt(i);for(;s===w1||s===b1;)i++,s=n.codePointAt(i)}if(t){let s=n.codePointAt(r-1);for(;s===w1||s===b1;)r--,s=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function D6(n,e){const t={type:"text",value:I6(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function N6(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const O6={blockquote:h6,break:d6,code:f6,delete:p6,emphasis:m6,footnoteReference:g6,heading:_6,html:y6,imageReference:v6,image:x6,inlineCode:w6,linkReference:b6,link:S6,listItem:M6,list:T6,paragraph:L6,root:C6,strong:P6,table:A6,tableCell:R6,tableRow:k6,text:D6,thematicBreak:N6,toml:mp,yaml:mp,definition:mp,footnoteDefinition:mp};function mp(){}const lL=-1,Sm=0,Nh=1,jp=2,sx=3,ox=4,ax=5,lx=6,uL=7,cL=8,M1=typeof self=="object"?self:globalThis,z6=(n,e)=>{const t=(r,s)=>(n.set(s,r),r),i=r=>{if(n.has(r))return n.get(r);const[s,o]=e[r];switch(s){case Sm:case lL:return t(o,r);case Nh:{const u=t([],r);for(const h of o)u.push(i(h));return u}case jp:{const u=t({},r);for(const[h,d]of o)u[i(h)]=i(d);return u}case sx:return t(new Date(o),r);case ox:{const{source:u,flags:h}=o;return t(new RegExp(u,h),r)}case ax:{const u=t(new Map,r);for(const[h,d]of o)u.set(i(h),i(d));return u}case lx:{const u=t(new Set,r);for(const h of o)u.add(i(h));return u}case uL:{const{name:u,message:h}=o;return t(new M1[u](h),r)}case cL:return t(BigInt(o),r);case"BigInt":return t(Object(BigInt(o)),r);case"ArrayBuffer":return t(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:u}=new Uint8Array(o);return t(new DataView(u),o)}}return t(new M1[s](o),r)};return i},E1=n=>z6(new Map,n)(0),vu="",{toString:F6}={},{keys:B6}=Object,ch=n=>{const e=typeof n;if(e!=="object"||!n)return[Sm,e];const t=F6.call(n).slice(8,-1);switch(t){case"Array":return[Nh,vu];case"Object":return[jp,vu];case"Date":return[sx,vu];case"RegExp":return[ox,vu];case"Map":return[ax,vu];case"Set":return[lx,vu];case"DataView":return[Nh,t]}return t.includes("Array")?[Nh,t]:t.includes("Error")?[uL,t]:[jp,t]},gp=([n,e])=>n===Sm&&(e==="function"||e==="symbol"),U6=(n,e,t,i)=>{const r=(o,u)=>{const h=i.push(o)-1;return t.set(u,h),h},s=o=>{if(t.has(o))return t.get(o);let[u,h]=ch(o);switch(u){case Sm:{let p=o;switch(h){case"bigint":u=cL,p=o.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+h);p=null;break;case"undefined":return r([lL],o)}return r([u,p],o)}case Nh:{if(h){let _=o;return h==="DataView"?_=new Uint8Array(o.buffer):h==="ArrayBuffer"&&(_=new Uint8Array(o)),r([h,[..._]],o)}const p=[],g=r([u,p],o);for(const _ of o)p.push(s(_));return g}case jp:{if(h)switch(h){case"BigInt":return r([h,o.toString()],o);case"Boolean":case"Number":case"String":return r([h,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const p=[],g=r([u,p],o);for(const _ of B6(o))(n||!gp(ch(o[_])))&&p.push([s(_),s(o[_])]);return g}case sx:return r([u,o.toISOString()],o);case ox:{const{source:p,flags:g}=o;return r([u,{source:p,flags:g}],o)}case ax:{const p=[],g=r([u,p],o);for(const[_,y]of o)(n||!(gp(ch(_))||gp(ch(y))))&&p.push([s(_),s(y)]);return g}case lx:{const p=[],g=r([u,p],o);for(const _ of o)(n||!gp(ch(_)))&&p.push(s(_));return g}}const{message:d}=o;return r([u,{name:h,message:d}],o)};return s},T1=(n,{json:e,lossy:t}={})=>{const i=[];return U6(!(e||t),!!e,new Map,i)(n),i},Gp=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?E1(T1(n,e)):structuredClone(n):(n,e)=>E1(T1(n,e));function H6(n,e){const t=[{type:"text",value:"↩"}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function V6(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function W6(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||H6,i=n.options.footnoteBackLabel||V6,r=n.options.footnoteLabel||"Footnotes",s=n.options.footnoteLabelTagName||"h2",o=n.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let h=-1;for(;++h<n.footnoteOrder.length;){const d=n.footnoteById.get(n.footnoteOrder[h]);if(!d)continue;const p=n.all(d),g=String(d.identifier).toUpperCase(),_=ic(g.toLowerCase());let y=0;const w=[],b=n.footnoteCounts.get(g);for(;b!==void 0&&++y<=b;){w.length>0&&w.push({type:"text",value:" "});let T=typeof t=="string"?t:t(h,y);typeof T=="string"&&(T={type:"text",value:T}),w.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+_+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(h,y),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const C=p[p.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const T=C.children[C.children.length-1];T&&T.type==="text"?T.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...w)}else p.push(...w);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+_},children:n.wrap(p,!0)};n.patch(d,S),u.push(S)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Gp(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(u,!0)},{type:"text",value:`
`}]}}const hL=(function(n){if(n==null)return Z6;if(typeof n=="function")return Mm(n);if(typeof n=="object")return Array.isArray(n)?j6(n):G6(n);if(typeof n=="string")return $6(n);throw new Error("Expected function, string, or object as test")});function j6(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=hL(n[t]);return Mm(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function G6(n){const e=n;return Mm(t);function t(i){const r=i;let s;for(s in n)if(r[s]!==e[s])return!1;return!0}}function $6(n){return Mm(e);function e(t){return t&&t.type===n}}function Mm(n){return e;function e(t,i,r){return!!(q6(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function Z6(){return!0}function q6(n){return n!==null&&typeof n=="object"&&"type"in n}const dL=[],X6=!0,L1=!1,Y6="skip";function K6(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const s=hL(r),o=i?-1:1;u(n,void 0,[])();function u(h,d,p){const g=h&&typeof h=="object"?h:{};if(typeof g.type=="string"){const y=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(_,"name",{value:"node ("+(h.type+(y?"<"+y+">":""))+")"})}return _;function _(){let y=dL,w,b,C;if((!e||s(h,d,p[p.length-1]||void 0))&&(y=J6(t(h,p)),y[0]===L1))return y;if("children"in h&&h.children){const S=h;if(S.children&&y[0]!==Y6)for(b=(i?S.children.length:-1)+o,C=p.concat(S);b>-1&&b<S.children.length;){const T=S.children[b];if(w=u(T,b,C)(),w[0]===L1)return w;b=typeof w[1]=="number"?w[1]:b+o}}return y}}}function J6(n){return Array.isArray(n)?n:typeof n=="number"?[X6,n]:n==null?dL:[n]}function fL(n,e,t,i){let r,s,o;typeof e=="function"&&typeof t!="function"?(s=void 0,o=e,r=t):(s=e,o=t,r=i),K6(n,s,u,r);function u(h,d){const p=d[d.length-1],g=p?p.children.indexOf(h):void 0;return o(h,g,p)}}const Yy={}.hasOwnProperty,Q6={};function eW(n,e){const t=e||Q6,i=new Map,r=new Map,s=new Map,o={...O6,...t.handlers},u={all:d,applyData:nW,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:o,one:h,options:t,patch:tW,wrap:rW};return fL(n,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const g=p.type==="definition"?i:r,_=String(p.identifier).toUpperCase();g.has(_)||g.set(_,p)}}),u;function h(p,g){const _=p.type,y=u.handlers[_];if(Yy.call(u.handlers,_)&&y)return y(u,p,g);if(u.options.passThrough&&u.options.passThrough.includes(_)){if("children"in p){const{children:b,...C}=p,S=Gp(C);return S.children=u.all(p),S}return Gp(p)}return(u.options.unknownHandler||iW)(u,p,g)}function d(p){const g=[];if("children"in p){const _=p.children;let y=-1;for(;++y<_.length;){const w=u.one(_[y],p);if(w){if(y&&_[y-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=C1(w.value)),!Array.isArray(w)&&w.type==="element")){const b=w.children[0];b&&b.type==="text"&&(b.value=C1(b.value))}Array.isArray(w)?g.push(...w):g.push(w)}}}return g}}function tW(n,e){n.position&&(e.position=FH(n))}function nW(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,s=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const o="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:o}}t.type==="element"&&s&&Object.assign(t.properties,Gp(s)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function iW(n,e){const t=e.data||{},i="value"in e&&!(Yy.call(t,"hProperties")||Yy.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function rW(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function C1(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function P1(n,e){const t=eW(n,e),i=t.one(n,void 0),r=W6(t),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function sW(n,e){return n&&"run"in n?async function(t,i){const r=P1(t,{file:i,...e});await n.run(r,i)}:function(t,i){return P1(t,{file:i,...n||e})}}function A1(n){if(n)throw n}var Q_,k1;function oW(){if(k1)return Q_;k1=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var p=n.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&n.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!g)return!1;var _;for(_ in d);return typeof _>"u"||n.call(d,_)},o=function(d,p){t&&p.name==="__proto__"?t(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},u=function(d,p){if(p==="__proto__")if(n.call(d,p)){if(i)return i(d,p).value}else return;return d[p]};return Q_=function h(){var d,p,g,_,y,w,b=arguments[0],C=1,S=arguments.length,T=!1;for(typeof b=="boolean"&&(T=b,b=arguments[1]||{},C=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});C<S;++C)if(d=arguments[C],d!=null)for(p in d)g=u(b,p),_=u(d,p),b!==_&&(T&&_&&(s(_)||(y=r(_)))?(y?(y=!1,w=g&&r(g)?g:[]):w=g&&s(g)?g:{},o(b,{name:p,newValue:h(T,w,_)})):typeof _<"u"&&o(b,{name:p,newValue:_}));return b},Q_}var aW=oW();const ey=Vu(aW);function Ky(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function lW(){const n=[],e={run:t,use:i};return e;function t(...r){let s=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);u(null,...r);function u(h,...d){const p=n[++s];let g=-1;if(h){o(h);return}for(;++g<r.length;)(d[g]===null||d[g]===void 0)&&(d[g]=r[g]);r=d,p?uW(p,u)(...d):o(null,...d)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function uW(n,e){let t;return i;function i(...o){const u=n.length>o.length;let h;u&&o.push(r);try{h=n.apply(this,o)}catch(d){const p=d;if(u&&t)throw p;return r(p)}u||(h&&h.then&&typeof h.then=="function"?h.then(s,r):h instanceof Error?r(h):s(h))}function r(o,...u){t||(t=!0,e(o,...u))}function s(o){r(null,o)}}const vs={basename:cW,dirname:hW,extname:dW,join:fW,sep:"/"};function cW(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');cd(n);let t=0,i=-1,r=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(s){t=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let o=-1,u=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(s){t=r+1;break}}else o<0&&(s=!0,o=r+1),u>-1&&(n.codePointAt(r)===e.codePointAt(u--)?u<0&&(i=r):(u=-1,i=o));return t===i?i=o:i<0&&(i=n.length),n.slice(t,i)}function hW(n){if(cd(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function dW(n){cd(n);let e=n.length,t=-1,i=0,r=-1,s=0,o;for(;e--;){const u=n.codePointAt(e);if(u===47){if(o){i=e+1;break}continue}t<0&&(o=!0,t=e+1),u===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||t<0||s===0||s===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function fW(...n){let e=-1,t;for(;++e<n.length;)cd(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":pW(t)}function pW(n){cd(n);const e=n.codePointAt(0)===47;let t=mW(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function mW(n,e){let t="",i=0,r=-1,s=0,o=-1,u,h;for(;++o<=n.length;){if(o<n.length)u=n.codePointAt(o);else{if(u===47)break;u=47}if(u===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(h=t.lastIndexOf("/"),h!==t.length-1){h<0?(t="",i=0):(t=t.slice(0,h),i=t.length-1-t.lastIndexOf("/")),r=o,s=0;continue}}else if(t.length>0){t="",i=0,r=o,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,o):t=n.slice(r+1,o),i=o-r-1;r=o,s=0}else u===46&&s>-1?s++:s=-1}return t}function cd(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const gW={cwd:_W};function _W(){return"/"}function Jy(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function yW(n){if(typeof n=="string")n=new URL(n);else if(!Jy(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return vW(n)}function vW(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const ty=["history","path","basename","stem","extname","dirname"];class pL{constructor(e){let t;e?Jy(e)?t={path:e}:typeof e=="string"||xW(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":gW.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<ty.length;){const s=ty[i];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let r;for(r in t)ty.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?vs.basename(this.path):void 0}set basename(e){iy(e,"basename"),ny(e,"basename"),this.path=vs.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?vs.dirname(this.path):void 0}set dirname(e){R1(this.basename,"dirname"),this.path=vs.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?vs.extname(this.path):void 0}set extname(e){if(ny(e,"extname"),R1(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=vs.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Jy(e)&&(e=yW(e)),iy(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?vs.basename(this.path,this.extname):void 0}set stem(e){iy(e,"stem"),ny(e,"stem"),this.path=vs.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new yi(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function ny(n,e){if(n&&n.includes(vs.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+vs.sep+"`")}function iy(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function R1(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function xW(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const wW=(function(n){const i=this.constructor.prototype,r=i[n],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s}),bW={}.hasOwnProperty;class ux extends wW{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=lW()}copy(){const e=new ux;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(ey(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(oy("data",this.frozen),this.namespace[e]=t,this):bW.call(this.namespace,e)&&this.namespace[e]||void 0:e?(oy("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=_p(e),i=this.parser||this.Parser;return ry("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),ry("process",this.parser||this.Parser),sy("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(s,o){const u=_p(e),h=i.parse(u);i.run(h,u,function(p,g,_){if(p||!g||!_)return d(p);const y=g,w=i.stringify(y,_);EW(w)?_.value=w:_.result=w,d(p,_)});function d(p,g){p||!g?o(p):s?s(g):t(void 0,g)}}}processSync(e){let t=!1,i;return this.freeze(),ry("processSync",this.parser||this.Parser),sy("processSync",this.compiler||this.Compiler),this.process(e,r),D1("processSync","process",t),i;function r(s,o){t=!0,A1(s),i=o}}run(e,t,i){I1(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?s(void 0,i):new Promise(s);function s(o,u){const h=_p(t);r.run(e,h,d);function d(p,g,_){const y=g||e;p?u(p):o?o(y):i(void 0,y,_)}}}runSync(e,t){let i=!1,r;return this.run(e,t,s),D1("runSync","run",i),r;function s(o,u){A1(o),r=u,i=!0}}stringify(e,t){this.freeze();const i=_p(t),r=this.compiler||this.Compiler;return sy("stringify",r),I1(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(oy("use",this.frozen),e!=null)if(typeof e=="function")h(e,t);else if(typeof e=="object")Array.isArray(e)?u(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")h(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...g]=d;h(p,g)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(d.plugins),d.settings&&(r.settings=ey(!0,r.settings,d.settings))}function u(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const g=d[p];s(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function h(d,p){let g=-1,_=-1;for(;++g<i.length;)if(i[g][0]===d){_=g;break}if(_===-1)i.push([d,...p]);else if(p.length>0){let[y,...w]=p;const b=i[_][1];Ky(b)&&Ky(y)&&(y=ey(!0,b,y)),i[_]=[d,y,...w]}}}}const SW=new ux().freeze();function ry(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function sy(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function oy(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function I1(n){if(!Ky(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function D1(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function _p(n){return MW(n)?n:new pL(n)}function MW(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function EW(n){return typeof n=="string"||TW(n)}function TW(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const LW="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",N1=[],O1={allowDangerousHtml:!0},CW=/^(https?|ircs?|mailto|xmpp)$/i,PW=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function AW(n){const e=kW(n),t=RW(n);return IW(e.runSync(e.parse(t),t),n)}function kW(n){const e=n.rehypePlugins||N1,t=n.remarkPlugins||N1,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...O1}:O1;return SW().use(c6).use(t).use(sW,i).use(e)}function RW(n){const e=n.children||"",t=new pL;return typeof e=="string"&&(t.value=e),t}function IW(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,o=e.skipHtml,u=e.unwrapDisallowed,h=e.urlTransform||DW;for(const p of PW)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+LW+p.id,void 0);return e.className&&(n={type:"element",tagName:"div",properties:{className:e.className},children:n.type==="root"?n.children:[n]}),fL(n,d),WH(n,{Fragment:V.Fragment,components:r,ignoreInvalidStyle:!0,jsx:V.jsx,jsxs:V.jsxs,passKeys:!0,passNode:!0});function d(p,g,_){if(p.type==="raw"&&_&&typeof g=="number")return o?_.children.splice(g,1):_.children[g]={type:"text",value:p.value},g;if(p.type==="element"){let y;for(y in Y_)if(Object.hasOwn(Y_,y)&&Object.hasOwn(p.properties,y)){const w=p.properties[y],b=Y_[y];(b===null||b.includes(p.tagName))&&(p.properties[y]=h(String(w||""),y,p))}}if(p.type==="element"){let y=t?!t.includes(p.tagName):s?s.includes(p.tagName):!1;if(!y&&i&&typeof g=="number"&&(y=!i(p,g,_)),y&&_&&typeof g=="number")return u&&p.children?_.children.splice(g,1,...p.children):_.children.splice(g,1),g}}}function DW(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||CW.test(n.slice(0,e))?n:""}function NW({isOpen:n,onClose:e}){const[t,i]=me.useState("");return me.useEffect(()=>{n&&fetch("/src/assets/help.md").then(r=>r.text()).then(r=>i(r)).catch(r=>{console.error("Gagal load help.md:",r),i(`# Error
Gagal memuat panduan.`)})},[n]),n?V.jsx(xm,{title:"Help & Documentation",onClose:e,width:"w-[600px]",children:V.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:V.jsx(AW,{children:t})})}):null}const ay=window.RUNTIME_CONFIG?.API_URL||"http://localhost:8000/api/v1";function OW(){const[n,e]=me.useState("analysis"),[t,i]=me.useState(null),[r,s]=me.useState(null),[o,u]=me.useState(null),[h,d]=me.useState(null),[p,g]=me.useState({}),[_,y]=me.useState([]),[w,b]=me.useState([]),[C,S]=me.useState([]),[T,R]=me.useState([]),[F,k]=me.useState(!1),[z,N]=me.useState(!1),[I,W]=me.useState(!1);me.useEffect(()=>{console.log("Runtime API URL:",ay)},[]);function j({result:ne,siteData:oe,selectedSources:ae,selectedGmpes:ee,error:pe}){pe?(s(pe),u({type:"error",message:pe})):(i(ne),s(null),u({type:"success",message:"Analysis completed successfully!"})),setTimeout(()=>u(null),4e3)}function U(ne){dH({name:ne,site:p,datasources:_,selectedSources:C,selectedGmpes:T}),u({type:"success",message:`Project "${ne}" saved!`}),setTimeout(()=>u(null),3e3)}function K(ne){g(ne.site||{}),y(ne.datasources||[]),S(ne.selectedSources||[]),R(ne.selectedGmpes||[]),u({type:"info",message:`Project "${ne.name}" loaded!`}),setTimeout(()=>u(null),3e3)}async function Y(){try{const ne=await fetch(`${ay}/datasource/`);if(!ne.ok)throw new Error(`Fetch datasource status: ${ne.status}`);const oe=await ne.json();Array.isArray(oe)?y(oe):Array.isArray(oe.data)?y(oe.data):y([])}catch(ne){console.error("Gagal fetch datasources:",ne),y([])}}async function Q(){try{const ne=await fetch(`${ay}/gmpe/`);if(!ne.ok)throw new Error(`Fetch gmpe status: ${ne.status}`);const oe=await ne.json();Array.isArray(oe)?b(oe):Array.isArray(oe.data)?b(oe.data):b([])}catch(ne){console.error("Gagal fetch gmpe:",ne),b([])}}return me.useEffect(()=>{Y(),Q()},[]),V.jsxs("div",{className:"flex flex-col min-h-screen bg-[var(--bg)] text-[var(--text)]",children:[V.jsx(oH,{onSave:()=>k(!0),onLoad:()=>N(!0),onHelp:()=>W(!0),setActiveTab:e}),V.jsxs("div",{className:"flex flex-1 pt-14",children:[V.jsx("div",{className:"hidden md:block",children:V.jsx(QU,{activeTab:n,setActiveTab:e})}),V.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[V.jsx(z3,{toast:o}),n==="analysis"&&V.jsxs(V.Fragment,{children:[V.jsx(vk,{siteData:p,setSiteData:g,datasources:_,gmpeList:w,selectedSources:C,setSelectedSources:S,selectedGmpes:T,setSelectedGmpes:R,onRunResult:j}),t&&V.jsx(O3,{result:t,error:r})]}),n==="datasource"&&V.jsx(KU,{datasources:_,setDatasources:y}),n==="gmpe"&&V.jsx(JU,{gmpeList:w})]})]}),V.jsx(aH,{isOpen:F,onClose:()=>k(!1),onSave:U}),V.jsx(pH,{isOpen:z,onClose:()=>N(!1),onLoad:K}),V.jsx(NW,{isOpen:I,onClose:()=>W(!1)})]})}rC.createRoot(document.getElementById("root")).render(V.jsx(fi.StrictMode,{children:V.jsx(OW,{})}));
