(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function Tc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mv={exports:{}},kh={},gv={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS;function kR(){if(CS)return Ie;CS=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function y(G){return G===null||typeof G!="object"?null:(G=m&&G[m]||G["@@iterator"],typeof G=="function"?G:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function P(G,lt,z){this.props=G,this.context=lt,this.refs=S,this.updater=z||v}P.prototype.isReactComponent={},P.prototype.setState=function(G,lt){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,lt,"setState")},P.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function b(){}b.prototype=P.prototype;function M(G,lt,z){this.props=G,this.context=lt,this.refs=S,this.updater=z||v}var R=M.prototype=new b;R.constructor=M,w(R,P.prototype),R.isPureReactComponent=!0;var O=Array.isArray,k=Object.prototype.hasOwnProperty,N={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function I(G,lt,z){var mt,_t={},nt=null,Ot=null;if(lt!=null)for(mt in lt.ref!==void 0&&(Ot=lt.ref),lt.key!==void 0&&(nt=""+lt.key),lt)k.call(lt,mt)&&!D.hasOwnProperty(mt)&&(_t[mt]=lt[mt]);var At=arguments.length-2;if(At===1)_t.children=z;else if(1<At){for(var kt=Array(At),Ft=0;Ft<At;Ft++)kt[Ft]=arguments[Ft+2];_t.children=kt}if(G&&G.defaultProps)for(mt in At=G.defaultProps,At)_t[mt]===void 0&&(_t[mt]=At[mt]);return{$$typeof:n,type:G,key:nt,ref:Ot,props:_t,_owner:N.current}}function H(G,lt){return{$$typeof:n,type:G.type,key:lt,ref:G.ref,props:G.props,_owner:G._owner}}function W(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function U(G){var lt={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(z){return lt[z]})}var tt=/\/+/g;function K(G,lt){return typeof G=="object"&&G!==null&&G.key!=null?U(""+G.key):lt.toString(36)}function Y(G,lt,z,mt,_t){var nt=typeof G;(nt==="undefined"||nt==="boolean")&&(G=null);var Ot=!1;if(G===null)Ot=!0;else switch(nt){case"string":case"number":Ot=!0;break;case"object":switch(G.$$typeof){case n:case t:Ot=!0}}if(Ot)return Ot=G,_t=_t(Ot),G=mt===""?"."+K(Ot,0):mt,O(_t)?(z="",G!=null&&(z=G.replace(tt,"$&/")+"/"),Y(_t,lt,z,"",function(Ft){return Ft})):_t!=null&&(W(_t)&&(_t=H(_t,z+(!_t.key||Ot&&Ot.key===_t.key?"":(""+_t.key).replace(tt,"$&/")+"/")+G)),lt.push(_t)),1;if(Ot=0,mt=mt===""?".":mt+":",O(G))for(var At=0;At<G.length;At++){nt=G[At];var kt=mt+K(nt,At);Ot+=Y(nt,lt,z,kt,_t)}else if(kt=y(G),typeof kt=="function")for(G=kt.call(G),At=0;!(nt=G.next()).done;)nt=nt.value,kt=mt+K(nt,At++),Ot+=Y(nt,lt,z,kt,_t);else if(nt==="object")throw lt=String(G),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.");return Ot}function rt(G,lt,z){if(G==null)return G;var mt=[],_t=0;return Y(G,mt,"","",function(nt){return lt.call(z,nt,_t++)}),mt}function at(G){if(G._status===-1){var lt=G._result;lt=lt(),lt.then(function(z){(G._status===0||G._status===-1)&&(G._status=1,G._result=z)},function(z){(G._status===0||G._status===-1)&&(G._status=2,G._result=z)}),G._status===-1&&(G._status=0,G._result=lt)}if(G._status===1)return G._result.default;throw G._result}var it={current:null},J={transition:null},pt={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:J,ReactCurrentOwner:N};function F(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:rt,forEach:function(G,lt,z){rt(G,function(){lt.apply(this,arguments)},z)},count:function(G){var lt=0;return rt(G,function(){lt++}),lt},toArray:function(G){return rt(G,function(lt){return lt})||[]},only:function(G){if(!W(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Ie.Component=P,Ie.Fragment=e,Ie.Profiler=r,Ie.PureComponent=M,Ie.StrictMode=i,Ie.Suspense=c,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pt,Ie.act=F,Ie.cloneElement=function(G,lt,z){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var mt=w({},G.props),_t=G.key,nt=G.ref,Ot=G._owner;if(lt!=null){if(lt.ref!==void 0&&(nt=lt.ref,Ot=N.current),lt.key!==void 0&&(_t=""+lt.key),G.type&&G.type.defaultProps)var At=G.type.defaultProps;for(kt in lt)k.call(lt,kt)&&!D.hasOwnProperty(kt)&&(mt[kt]=lt[kt]===void 0&&At!==void 0?At[kt]:lt[kt])}var kt=arguments.length-2;if(kt===1)mt.children=z;else if(1<kt){At=Array(kt);for(var Ft=0;Ft<kt;Ft++)At[Ft]=arguments[Ft+2];mt.children=At}return{$$typeof:n,type:G.type,key:_t,ref:nt,props:mt,_owner:Ot}},Ie.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:s,_context:G},G.Consumer=G},Ie.createElement=I,Ie.createFactory=function(G){var lt=I.bind(null,G);return lt.type=G,lt},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(G){return{$$typeof:a,render:G}},Ie.isValidElement=W,Ie.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:at}},Ie.memo=function(G,lt){return{$$typeof:f,type:G,compare:lt===void 0?null:lt}},Ie.startTransition=function(G){var lt=J.transition;J.transition={};try{G()}finally{J.transition=lt}},Ie.unstable_act=F,Ie.useCallback=function(G,lt){return it.current.useCallback(G,lt)},Ie.useContext=function(G){return it.current.useContext(G)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(G){return it.current.useDeferredValue(G)},Ie.useEffect=function(G,lt){return it.current.useEffect(G,lt)},Ie.useId=function(){return it.current.useId()},Ie.useImperativeHandle=function(G,lt,z){return it.current.useImperativeHandle(G,lt,z)},Ie.useInsertionEffect=function(G,lt){return it.current.useInsertionEffect(G,lt)},Ie.useLayoutEffect=function(G,lt){return it.current.useLayoutEffect(G,lt)},Ie.useMemo=function(G,lt){return it.current.useMemo(G,lt)},Ie.useReducer=function(G,lt,z){return it.current.useReducer(G,lt,z)},Ie.useRef=function(G){return it.current.useRef(G)},Ie.useState=function(G){return it.current.useState(G)},Ie.useSyncExternalStore=function(G,lt,z){return it.current.useSyncExternalStore(G,lt,z)},Ie.useTransition=function(){return it.current.useTransition()},Ie.version="18.3.1",Ie}var AS;function s0(){return AS||(AS=1,gv.exports=kR()),gv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LS;function RR(){if(LS)return kh;LS=1;var n=s0(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,f){var d,m={},y=null,v=null;f!==void 0&&(y=""+f),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(v=c.ref);for(d in c)i.call(c,d)&&!s.hasOwnProperty(d)&&(m[d]=c[d]);if(a&&a.defaultProps)for(d in c=a.defaultProps,c)m[d]===void 0&&(m[d]=c[d]);return{$$typeof:t,type:a,key:y,ref:v,props:m,_owner:r.current}}return kh.Fragment=e,kh.jsx=o,kh.jsxs=o,kh}var kS;function IR(){return kS||(kS=1,mv.exports=RR()),mv.exports}var B=IR(),Q=s0();const vn=Tc(Q);var Pp={},yv={exports:{}},$i={},vv={exports:{}},_v={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS;function DR(){return RS||(RS=1,(function(n){function t(J,pt){var F=J.length;J.push(pt);t:for(;0<F;){var G=F-1>>>1,lt=J[G];if(0<r(lt,pt))J[G]=pt,J[F]=lt,F=G;else break t}}function e(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var pt=J[0],F=J.pop();if(F!==pt){J[0]=F;t:for(var G=0,lt=J.length,z=lt>>>1;G<z;){var mt=2*(G+1)-1,_t=J[mt],nt=mt+1,Ot=J[nt];if(0>r(_t,F))nt<lt&&0>r(Ot,_t)?(J[G]=Ot,J[nt]=F,G=nt):(J[G]=_t,J[mt]=F,G=mt);else if(nt<lt&&0>r(Ot,F))J[G]=Ot,J[nt]=F,G=nt;else break t}}return pt}function r(J,pt){var F=J.sortIndex-pt.sortIndex;return F!==0?F:J.id-pt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],f=[],d=1,m=null,y=3,v=!1,w=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(J){for(var pt=e(f);pt!==null;){if(pt.callback===null)i(f);else if(pt.startTime<=J)i(f),pt.sortIndex=pt.expirationTime,t(c,pt);else break;pt=e(f)}}function O(J){if(S=!1,R(J),!w)if(e(c)!==null)w=!0,at(k);else{var pt=e(f);pt!==null&&it(O,pt.startTime-J)}}function k(J,pt){w=!1,S&&(S=!1,b(I),I=-1),v=!0;var F=y;try{for(R(pt),m=e(c);m!==null&&(!(m.expirationTime>pt)||J&&!U());){var G=m.callback;if(typeof G=="function"){m.callback=null,y=m.priorityLevel;var lt=G(m.expirationTime<=pt);pt=n.unstable_now(),typeof lt=="function"?m.callback=lt:m===e(c)&&i(c),R(pt)}else i(c);m=e(c)}if(m!==null)var z=!0;else{var mt=e(f);mt!==null&&it(O,mt.startTime-pt),z=!1}return z}finally{m=null,y=F,v=!1}}var N=!1,D=null,I=-1,H=5,W=-1;function U(){return!(n.unstable_now()-W<H)}function tt(){if(D!==null){var J=n.unstable_now();W=J;var pt=!0;try{pt=D(!0,J)}finally{pt?K():(N=!1,D=null)}}else N=!1}var K;if(typeof M=="function")K=function(){M(tt)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,rt=Y.port2;Y.port1.onmessage=tt,K=function(){rt.postMessage(null)}}else K=function(){P(tt,0)};function at(J){D=J,N||(N=!0,K())}function it(J,pt){I=P(function(){J(n.unstable_now())},pt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){w||v||(w=!0,at(k))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return e(c)},n.unstable_next=function(J){switch(y){case 1:case 2:case 3:var pt=3;break;default:pt=y}var F=y;y=pt;try{return J()}finally{y=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,pt){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var F=y;y=J;try{return pt()}finally{y=F}},n.unstable_scheduleCallback=function(J,pt,F){var G=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?G+F:G):F=G,J){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=F+lt,J={id:d++,callback:pt,priorityLevel:J,startTime:F,expirationTime:lt,sortIndex:-1},F>G?(J.sortIndex=F,t(f,J),e(c)===null&&J===e(f)&&(S?(b(I),I=-1):S=!0,it(O,F-G))):(J.sortIndex=lt,t(c,J),w||v||(w=!0,at(k))),J},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(J){var pt=y;return function(){var F=y;y=pt;try{return J.apply(this,arguments)}finally{y=F}}}})(_v)),_v}var IS;function OR(){return IS||(IS=1,vv.exports=DR()),vv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS;function NR(){if(DS)return $i;DS=1;var n=s0(),t=OR();function e(l){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+l,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(l,h){o(l,h),o(l+"Capture",h)}function o(l,h){for(r[l]=h,l=0;l<h.length;l++)i.add(h[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function y(l){return c.call(m,l)?!0:c.call(d,l)?!1:f.test(l)?m[l]=!0:(d[l]=!0,!1)}function v(l,h,g,x){if(g!==null&&g.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return x?!1:g!==null?!g.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function w(l,h,g,x){if(h===null||typeof h>"u"||v(l,h,g,x))return!0;if(x)return!1;if(g!==null)switch(g.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function S(l,h,g,x,E,C,V){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=x,this.attributeNamespace=E,this.mustUseProperty=g,this.propertyName=l,this.type=h,this.sanitizeURL=C,this.removeEmptyString=V}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){P[l]=new S(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var h=l[0];P[h]=new S(h,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){P[l]=new S(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){P[l]=new S(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){P[l]=new S(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){P[l]=new S(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){P[l]=new S(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){P[l]=new S(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){P[l]=new S(l,5,!1,l.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function M(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var h=l.replace(b,M);P[h]=new S(h,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var h=l.replace(b,M);P[h]=new S(h,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var h=l.replace(b,M);P[h]=new S(h,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){P[l]=new S(l,1,!1,l.toLowerCase(),null,!1,!1)}),P.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){P[l]=new S(l,1,!1,l.toLowerCase(),null,!0,!0)});function R(l,h,g,x){var E=P.hasOwnProperty(h)?P[h]:null;(E!==null?E.type!==0:x||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(w(h,g,E,x)&&(g=null),x||E===null?y(h)&&(g===null?l.removeAttribute(h):l.setAttribute(h,""+g)):E.mustUseProperty?l[E.propertyName]=g===null?E.type===3?!1:"":g:(h=E.attributeName,x=E.attributeNamespace,g===null?l.removeAttribute(h):(E=E.type,g=E===3||E===4&&g===!0?"":""+g,x?l.setAttributeNS(x,h,g):l.setAttribute(h,g))))}var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),N=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),U=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),it=Symbol.for("react.offscreen"),J=Symbol.iterator;function pt(l){return l===null||typeof l!="object"?null:(l=J&&l[J]||l["@@iterator"],typeof l=="function"?l:null)}var F=Object.assign,G;function lt(l){if(G===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);G=h&&h[1]||""}return`
`+G+l}var z=!1;function mt(l,h){if(!l||z)return"";z=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Tt){var x=Tt}Reflect.construct(l,[],h)}else{try{h.call()}catch(Tt){x=Tt}l.call(h.prototype)}else{try{throw Error()}catch(Tt){x=Tt}l()}}catch(Tt){if(Tt&&x&&typeof Tt.stack=="string"){for(var E=Tt.stack.split(`
`),C=x.stack.split(`
`),V=E.length-1,et=C.length-1;1<=V&&0<=et&&E[V]!==C[et];)et--;for(;1<=V&&0<=et;V--,et--)if(E[V]!==C[et]){if(V!==1||et!==1)do if(V--,et--,0>et||E[V]!==C[et]){var ct=`
`+E[V].replace(" at new "," at ");return l.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",l.displayName)),ct}while(1<=V&&0<=et);break}}}finally{z=!1,Error.prepareStackTrace=g}return(l=l?l.displayName||l.name:"")?lt(l):""}function _t(l){switch(l.tag){case 5:return lt(l.type);case 16:return lt("Lazy");case 13:return lt("Suspense");case 19:return lt("SuspenseList");case 0:case 2:case 15:return l=mt(l.type,!1),l;case 11:return l=mt(l.type.render,!1),l;case 1:return l=mt(l.type,!0),l;default:return""}}function nt(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case D:return"Fragment";case N:return"Portal";case H:return"Profiler";case I:return"StrictMode";case K:return"Suspense";case Y:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case U:return(l.displayName||"Context")+".Consumer";case W:return(l._context.displayName||"Context")+".Provider";case tt:var h=l.render;return l=l.displayName,l||(l=h.displayName||h.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case rt:return h=l.displayName||null,h!==null?h:nt(l.type)||"Memo";case at:h=l._payload,l=l._init;try{return nt(l(h))}catch{}}return null}function Ot(l){var h=l.type;switch(l.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=h.render,l=l.displayName||l.name||"",h.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nt(h);case 8:return h===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function At(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function kt(l){var h=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ft(l){var h=kt(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,h),x=""+l[h];if(!l.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,C=g.set;return Object.defineProperty(l,h,{configurable:!0,get:function(){return E.call(this)},set:function(V){x=""+V,C.call(this,V)}}),Object.defineProperty(l,h,{enumerable:g.enumerable}),{getValue:function(){return x},setValue:function(V){x=""+V},stopTracking:function(){l._valueTracker=null,delete l[h]}}}}function jt(l){l._valueTracker||(l._valueTracker=Ft(l))}function bt(l){if(!l)return!1;var h=l._valueTracker;if(!h)return!0;var g=h.getValue(),x="";return l&&(x=kt(l)?l.checked?"true":"false":l.value),l=x,l!==g?(h.setValue(l),!0):!1}function Rt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Dt(l,h){var g=h.checked;return F({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??l._wrapperState.initialChecked})}function Wt(l,h){var g=h.defaultValue==null?"":h.defaultValue,x=h.checked!=null?h.checked:h.defaultChecked;g=At(h.value!=null?h.value:g),l._wrapperState={initialChecked:x,initialValue:g,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function It(l,h){h=h.checked,h!=null&&R(l,"checked",h,!1)}function X(l,h){It(l,h);var g=At(h.value),x=h.type;if(g!=null)x==="number"?(g===0&&l.value===""||l.value!=g)&&(l.value=""+g):l.value!==""+g&&(l.value=""+g);else if(x==="submit"||x==="reset"){l.removeAttribute("value");return}h.hasOwnProperty("value")?wt(l,h.type,g):h.hasOwnProperty("defaultValue")&&wt(l,h.type,At(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(l.defaultChecked=!!h.defaultChecked)}function $(l,h,g){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var x=h.type;if(!(x!=="submit"&&x!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+l._wrapperState.initialValue,g||h===l.value||(l.value=h),l.defaultValue=h}g=l.name,g!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,g!==""&&(l.name=g)}function wt(l,h,g){(h!=="number"||Rt(l.ownerDocument)!==l)&&(g==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+g&&(l.defaultValue=""+g))}var Lt=Array.isArray;function $t(l,h,g,x){if(l=l.options,h){h={};for(var E=0;E<g.length;E++)h["$"+g[E]]=!0;for(g=0;g<l.length;g++)E=h.hasOwnProperty("$"+l[g].value),l[g].selected!==E&&(l[g].selected=E),E&&x&&(l[g].defaultSelected=!0)}else{for(g=""+At(g),h=null,E=0;E<l.length;E++){if(l[E].value===g){l[E].selected=!0,x&&(l[E].defaultSelected=!0);return}h!==null||l[E].disabled||(h=l[E])}h!==null&&(h.selected=!0)}}function Kt(l,h){if(h.dangerouslySetInnerHTML!=null)throw Error(e(91));return F({},h,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function re(l,h){var g=h.value;if(g==null){if(g=h.children,h=h.defaultValue,g!=null){if(h!=null)throw Error(e(92));if(Lt(g)){if(1<g.length)throw Error(e(93));g=g[0]}h=g}h==null&&(h=""),g=h}l._wrapperState={initialValue:At(g)}}function Jt(l,h){var g=At(h.value),x=At(h.defaultValue);g!=null&&(g=""+g,g!==l.value&&(l.value=g),h.defaultValue==null&&l.defaultValue!==g&&(l.defaultValue=g)),x!=null&&(l.defaultValue=""+x)}function se(l){var h=l.textContent;h===l._wrapperState.initialValue&&h!==""&&h!==null&&(l.value=h)}function ft(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q(l,h){return l==null||l==="http://www.w3.org/1999/xhtml"?ft(h):l==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Pt,St=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,g,x,E){MSApp.execUnsafeLocalFunction(function(){return l(h,g,x,E)})}:l})(function(l,h){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=h;else{for(Pt=Pt||document.createElement("div"),Pt.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Pt.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;h.firstChild;)l.appendChild(h.firstChild)}});function zt(l,h){if(h){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=h;return}}l.textContent=h}var Xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ue=["Webkit","ms","Moz","O"];Object.keys(Xt).forEach(function(l){ue.forEach(function(h){h=h+l.charAt(0).toUpperCase()+l.substring(1),Xt[h]=Xt[l]})});function ke(l,h,g){return h==null||typeof h=="boolean"||h===""?"":g||typeof h!="number"||h===0||Xt.hasOwnProperty(l)&&Xt[l]?(""+h).trim():h+"px"}function Fe(l,h){l=l.style;for(var g in h)if(h.hasOwnProperty(g)){var x=g.indexOf("--")===0,E=ke(g,h[g],x);g==="float"&&(g="cssFloat"),x?l.setProperty(g,E):l[g]=E}}var xn=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ut(l,h){if(h){if(xn[l]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(e(137,l));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(e(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(e(61))}if(h.style!=null&&typeof h.style!="object")throw Error(e(62))}}function Bt(l,h){if(l.indexOf("-")===-1)return typeof h.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ee=null;function Ae(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var tn=null,En=null,Ln=null;function nr(l){if(l=ro(l)){if(typeof tn!="function")throw Error(e(280));var h=l.stateNode;h&&(h=lu(h),tn(l.stateNode,l.type,h))}}function gs(l){En?Ln?Ln.push(l):Ln=[l]:En=l}function ni(){if(En){var l=En,h=Ln;if(Ln=En=null,nr(l),h)for(l=0;l<h.length;l++)nr(h[l])}}function ui(l,h){return l(h)}function Pi(){}var ir=!1;function ci(l,h,g){if(ir)return l(h,g);ir=!0;try{return ui(l,h,g)}finally{ir=!1,(En!==null||Ln!==null)&&(Pi(),ni())}}function Ci(l,h){var g=l.stateNode;if(g===null)return null;var x=lu(g);if(x===null)return null;g=x[h];t:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break t;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(e(231,h,typeof g));return g}var To=!1;if(a)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){To=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{To=!1}function Gc(l,h,g,x,E,C,V,et,ct){var Tt=Array.prototype.slice.call(arguments,3);try{h.apply(g,Tt)}catch(Ut){this.onError(Ut)}}var Z=!1,ht=null,gt=!1,Ct=null,Ht={onError:function(l){Z=!0,ht=l}};function Me(l,h,g,x,E,C,V,et,ct){Z=!1,ht=null,Gc.apply(Ht,arguments)}function fe(l,h,g,x,E,C,V,et,ct){if(Me.apply(this,arguments),Z){if(Z){var Tt=ht;Z=!1,ht=null}else throw Error(e(198));gt||(gt=!0,Ct=Tt)}}function le(l){var h=l,g=l;if(l.alternate)for(;h.return;)h=h.return;else{l=h;do h=l,(h.flags&4098)!==0&&(g=h.return),l=h.return;while(l)}return h.tag===3?g:null}function we(l){if(l.tag===13){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function ze(l){if(le(l)!==l)throw Error(e(188))}function Re(l){var h=l.alternate;if(!h){if(h=le(l),h===null)throw Error(e(188));return h!==l?null:l}for(var g=l,x=h;;){var E=g.return;if(E===null)break;var C=E.alternate;if(C===null){if(x=E.return,x!==null){g=x;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===g)return ze(E),l;if(C===x)return ze(E),h;C=C.sibling}throw Error(e(188))}if(g.return!==x.return)g=E,x=C;else{for(var V=!1,et=E.child;et;){if(et===g){V=!0,g=E,x=C;break}if(et===x){V=!0,x=E,g=C;break}et=et.sibling}if(!V){for(et=C.child;et;){if(et===g){V=!0,g=C,x=E;break}if(et===x){V=!0,x=C,g=E;break}et=et.sibling}if(!V)throw Error(e(189))}}if(g.alternate!==x)throw Error(e(190))}if(g.tag!==3)throw Error(e(188));return g.stateNode.current===g?l:h}function De(l){return l=Re(l),l!==null?ye(l):null}function ye(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var h=ye(l);if(h!==null)return h;l=l.sibling}return null}var wr=t.unstable_scheduleCallback,rn=t.unstable_cancelCallback,br=t.unstable_shouldYield,$n=t.unstable_requestPaint,je=t.unstable_now,Sr=t.unstable_getCurrentPriorityLevel,pn=t.unstable_ImmediatePriority,Ai=t.unstable_UserBlockingPriority,mn=t.unstable_NormalPriority,$c=t.unstable_LowPriority,Eo=t.unstable_IdlePriority,Ia=null,rr=null;function Da(l){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(Ia,l,void 0,(l.current.flags&128)===128)}catch{}}var Ee=Math.clz32?Math.clz32:Po,hn=Math.log,Vl=Math.LN2;function Po(l){return l>>>=0,l===0?32:31-(hn(l)/Vl|0)|0}var Xr=64,Co=4194304;function Te(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function sn(l,h){var g=l.pendingLanes;if(g===0)return 0;var x=0,E=l.suspendedLanes,C=l.pingedLanes,V=g&268435455;if(V!==0){var et=V&~E;et!==0?x=Te(et):(C&=V,C!==0&&(x=Te(C)))}else V=g&~E,V!==0?x=Te(V):C!==0&&(x=Te(C));if(x===0)return 0;if(h!==0&&h!==x&&(h&E)===0&&(E=x&-x,C=h&-h,E>=C||E===16&&(C&4194240)!==0))return h;if((x&4)!==0&&(x|=g&16),h=l.entangledLanes,h!==0)for(l=l.entanglements,h&=x;0<h;)g=31-Ee(h),E=1<<g,x|=l[g],h&=~E;return x}function Zc(l,h){switch(l){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ul(l,h){for(var g=l.suspendedLanes,x=l.pingedLanes,E=l.expirationTimes,C=l.pendingLanes;0<C;){var V=31-Ee(C),et=1<<V,ct=E[V];ct===-1?((et&g)===0||(et&x)!==0)&&(E[V]=Zc(et,h)):ct<=h&&(l.expiredLanes|=et),C&=~et}}function hi(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function xd(){var l=Xr;return Xr<<=1,(Xr&4194240)===0&&(Xr=64),l}function Ao(l){for(var h=[],g=0;31>g;g++)h.push(l);return h}function sr(l,h,g){l.pendingLanes|=h,h!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,h=31-Ee(h),l[h]=g}function Pn(l,h){var g=l.pendingLanes&~h;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=h,l.mutableReadLanes&=h,l.entangledLanes&=h,h=l.entanglements;var x=l.eventTimes;for(l=l.expirationTimes;0<g;){var E=31-Ee(g),C=1<<E;h[E]=0,x[E]=-1,l[E]=-1,g&=~C}}function Yr(l,h){var g=l.entangledLanes|=h;for(l=l.entanglements;g;){var x=31-Ee(g),E=1<<x;E&h|l[x]&h&&(l[x]|=h),g&=~E}}var Be=0;function Lo(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Hl,qs,jl,Wl,Oa,Na=!1,ko=[],or=null,Kr=null,Mr=null,Fa=new Map,_e=new Map,Bn=[],Ke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qc(l,h){switch(l){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Fa.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":_e.delete(h.pointerId)}}function Xs(l,h,g,x,E,C){return l===null||l.nativeEvent!==C?(l={blockedOn:h,domEventName:g,eventSystemFlags:x,nativeEvent:C,targetContainers:[E]},h!==null&&(h=ro(h),h!==null&&qs(h)),l):(l.eventSystemFlags|=x,h=l.targetContainers,E!==null&&h.indexOf(E)===-1&&h.push(E),l)}function Xc(l,h,g,x,E){switch(h){case"focusin":return or=Xs(or,l,h,g,x,E),!0;case"dragenter":return Kr=Xs(Kr,l,h,g,x,E),!0;case"mouseover":return Mr=Xs(Mr,l,h,g,x,E),!0;case"pointerover":var C=E.pointerId;return Fa.set(C,Xs(Fa.get(C)||null,l,h,g,x,E)),!0;case"gotpointercapture":return C=E.pointerId,_e.set(C,Xs(_e.get(C)||null,l,h,g,x,E)),!0}return!1}function Gl(l){var h=io(l.target);if(h!==null){var g=le(h);if(g!==null){if(h=g.tag,h===13){if(h=we(g),h!==null){l.blockedOn=h,Oa(l.priority,function(){jl(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Tr(l){if(l.blockedOn!==null)return!1;for(var h=l.targetContainers;0<h.length;){var g=ql(l.domEventName,l.eventSystemFlags,h[0],l.nativeEvent);if(g===null){g=l.nativeEvent;var x=new g.constructor(g.type,g);ee=x,g.target.dispatchEvent(x),ee=null}else return h=ro(g),h!==null&&qs(h),l.blockedOn=g,!1;h.shift()}return!0}function $l(l,h,g){Tr(l)&&g.delete(h)}function za(){Na=!1,or!==null&&Tr(or)&&(or=null),Kr!==null&&Tr(Kr)&&(Kr=null),Mr!==null&&Tr(Mr)&&(Mr=null),Fa.forEach($l),_e.forEach($l)}function wn(l,h){l.blockedOn===h&&(l.blockedOn=null,Na||(Na=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,za)))}function ar(l){function h(E){return wn(E,l)}if(0<ko.length){wn(ko[0],l);for(var g=1;g<ko.length;g++){var x=ko[g];x.blockedOn===l&&(x.blockedOn=null)}}for(or!==null&&wn(or,l),Kr!==null&&wn(Kr,l),Mr!==null&&wn(Mr,l),Fa.forEach(h),_e.forEach(h),g=0;g<Bn.length;g++)x=Bn[g],x.blockedOn===l&&(x.blockedOn=null);for(;0<Bn.length&&(g=Bn[0],g.blockedOn===null);)Gl(g),g.blockedOn===null&&Bn.shift()}var Ys=O.ReactCurrentBatchConfig,Ba=!0;function Yg(l,h,g,x){var E=Be,C=Ys.transition;Ys.transition=null;try{Be=1,Va(l,h,g,x)}finally{Be=E,Ys.transition=C}}function wd(l,h,g,x){var E=Be,C=Ys.transition;Ys.transition=null;try{Be=4,Va(l,h,g,x)}finally{Be=E,Ys.transition=C}}function Va(l,h,g,x){if(Ba){var E=ql(l,h,g,x);if(E===null)u(l,h,x,Zl,g),qc(l,x);else if(Xc(E,l,h,g,x))x.stopPropagation();else if(qc(l,x),h&4&&-1<Ke.indexOf(l)){for(;E!==null;){var C=ro(E);if(C!==null&&Hl(C),C=ql(l,h,g,x),C===null&&u(l,h,x,Zl,g),C===E)break;E=C}E!==null&&x.stopPropagation()}else u(l,h,x,null,g)}}var Zl=null;function ql(l,h,g,x){if(Zl=null,l=Ae(x),l=io(l),l!==null)if(h=le(l),h===null)l=null;else if(g=h.tag,g===13){if(l=we(h),l!==null)return l;l=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;l=null}else h!==l&&(l=null);return Zl=l,null}function Oe(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sr()){case pn:return 1;case Ai:return 4;case mn:case $c:return 16;case Eo:return 536870912;default:return 16}default:return 16}}var ys=null,Li=null,vs=null;function Yc(){if(vs)return vs;var l,h=Li,g=h.length,x,E="value"in ys?ys.value:ys.textContent,C=E.length;for(l=0;l<g&&h[l]===E[l];l++);var V=g-l;for(x=1;x<=V&&h[g-x]===E[C-x];x++);return vs=E.slice(l,1<x?1-x:void 0)}function Xl(l){var h=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&h===13&&(l=13)):l=h,l===10&&(l=13),32<=l||l===13?l:0}function Ro(){return!0}function bd(){return!1}function fi(l){function h(g,x,E,C,V){this._reactName=g,this._targetInst=E,this.type=x,this.nativeEvent=C,this.target=V,this.currentTarget=null;for(var et in l)l.hasOwnProperty(et)&&(g=l[et],this[et]=g?g(C):C[et]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ro:bd,this.isPropagationStopped=bd,this}return F(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Ro)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Ro)},persist:function(){},isPersistent:Ro}),h}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=fi(Io),Ks=F({},Io,{view:0,detail:0}),Kg=fi(Ks),Bi,Jc,Do,lr=F({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Do&&(Do&&l.type==="mousemove"?(Bi=l.screenX-Do.screenX,Jc=l.screenY-Do.screenY):Jc=Bi=0,Do=l),Bi)},movementY:function(l){return"movementY"in l?l.movementY:Jc}}),Qc=fi(lr),Sd=F({},lr,{dataTransfer:0}),th=fi(Sd),Jg=F({},Ks,{relatedTarget:0}),Yl=fi(Jg),Md=F({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),Qg=fi(Md),ty=F({},Io,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),eh=fi(ty),ey=F({},Io,{data:0}),nh=fi(ey),Td={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Js={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ny(l){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(l):(l=Js[l])?!!h[l]:!1}function Qs(){return ny}var Vi=F({},Ks,{key:function(l){if(l.key){var h=Td[l.key]||l.key;if(h!=="Unidentified")return h}return l.type==="keypress"?(l=Xl(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Kl[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(l){return l.type==="keypress"?Xl(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Xl(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Ed=fi(Vi),Pd=F({},lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cd=fi(Pd),ih=F({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),rh=fi(ih),iy=F({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),ry=fi(iy),Ad=F({},lr,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),sy=fi(Ad),ur=[9,13,27,32],_s=a&&"CompositionEvent"in window,Ua=null;a&&"documentMode"in document&&(Ua=document.documentMode);var Jr=a&&"TextEvent"in window&&!Ua,Ld=a&&(!_s||Ua&&8<Ua&&11>=Ua),to=" ",kd=!1;function Oo(l,h){switch(l){case"keyup":return ur.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sh(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Qr=!1;function oy(l,h){switch(l){case"compositionend":return sh(h);case"keypress":return h.which!==32?null:(kd=!0,to);case"textInput":return l=h.data,l===to&&kd?null:l;default:return null}}function xs(l,h){if(Qr)return l==="compositionend"||!_s&&Oo(l,h)?(l=Yc(),vs=Li=ys=null,Qr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Ld&&h.locale!=="ko"?null:h.data;default:return null}}var Jl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rd(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h==="input"?!!Jl[l.type]:h==="textarea"}function Ql(l,h,g,x){gs(x),h=_(h,"onChange"),0<h.length&&(g=new Kc("onChange","change",null,g,x),l.push({event:g,listeners:h}))}var Ha=null,ki=null;function ay(l){ph(l,0)}function ts(l){var h=so(l);if(bt(h))return l}function ly(l,h){if(l==="change")return h}var Er=!1;if(a){var No;if(a){var tu="oninput"in document;if(!tu){var eu=document.createElement("div");eu.setAttribute("oninput","return;"),tu=typeof eu.oninput=="function"}No=tu}else No=!1;Er=No&&(!document.documentMode||9<document.documentMode)}function ja(){Ha&&(Ha.detachEvent("onpropertychange",nu),ki=Ha=null)}function nu(l){if(l.propertyName==="value"&&ts(ki)){var h=[];Ql(h,ki,l,Ae(l)),ci(ay,h)}}function iu(l,h,g){l==="focusin"?(ja(),Ha=h,ki=g,Ha.attachEvent("onpropertychange",nu)):l==="focusout"&&ja()}function Fo(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ts(ki)}function ru(l,h){if(l==="click")return ts(h)}function oh(l,h){if(l==="input"||l==="change")return ts(h)}function Id(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var cr=typeof Object.is=="function"?Object.is:Id;function ws(l,h){if(cr(l,h))return!0;if(typeof l!="object"||l===null||typeof h!="object"||h===null)return!1;var g=Object.keys(l),x=Object.keys(h);if(g.length!==x.length)return!1;for(x=0;x<g.length;x++){var E=g[x];if(!c.call(h,E)||!cr(l[E],h[E]))return!1}return!0}function Dd(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ah(l,h){var g=Dd(l);l=0;for(var x;g;){if(g.nodeType===3){if(x=l+g.textContent.length,l<=h&&x>=h)return{node:g,offset:h-l};l=x}t:{for(;g;){if(g.nextSibling){g=g.nextSibling;break t}g=g.parentNode}g=void 0}g=Dd(g)}}function Od(l,h){return l&&h?l===h?!0:l&&l.nodeType===3?!1:h&&h.nodeType===3?Od(l,h.parentNode):"contains"in l?l.contains(h):l.compareDocumentPosition?!!(l.compareDocumentPosition(h)&16):!1:!1}function lh(){for(var l=window,h=Rt();h instanceof l.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)l=h.contentWindow;else break;h=Rt(l.document)}return h}function uh(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h&&(h==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||h==="textarea"||l.contentEditable==="true")}function Pr(l){var h=lh(),g=l.focusedElem,x=l.selectionRange;if(h!==g&&g&&g.ownerDocument&&Od(g.ownerDocument.documentElement,g)){if(x!==null&&uh(g)){if(h=x.start,l=x.end,l===void 0&&(l=h),"selectionStart"in g)g.selectionStart=h,g.selectionEnd=Math.min(l,g.value.length);else if(l=(h=g.ownerDocument||document)&&h.defaultView||window,l.getSelection){l=l.getSelection();var E=g.textContent.length,C=Math.min(x.start,E);x=x.end===void 0?C:Math.min(x.end,E),!l.extend&&C>x&&(E=x,x=C,C=E),E=ah(g,C);var V=ah(g,x);E&&V&&(l.rangeCount!==1||l.anchorNode!==E.node||l.anchorOffset!==E.offset||l.focusNode!==V.node||l.focusOffset!==V.offset)&&(h=h.createRange(),h.setStart(E.node,E.offset),l.removeAllRanges(),C>x?(l.addRange(h),l.extend(V.node,V.offset)):(h.setEnd(V.node,V.offset),l.addRange(h)))}}for(h=[],l=g;l=l.parentNode;)l.nodeType===1&&h.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<h.length;g++)l=h[g],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var su=a&&"documentMode"in document&&11>=document.documentMode,zo=null,Bo=null,Wa=null,ou=!1;function Nd(l,h,g){var x=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;ou||zo==null||zo!==Rt(x)||(x=zo,"selectionStart"in x&&uh(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Wa&&ws(Wa,x)||(Wa=x,x=_(Bo,"onSelect"),0<x.length&&(h=new Kc("onSelect","select",null,h,g),l.push({event:h,listeners:x}),h.target=zo)))}function bs(l,h){var g={};return g[l.toLowerCase()]=h.toLowerCase(),g["Webkit"+l]="webkit"+h,g["Moz"+l]="moz"+h,g}var Vo={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionend:bs("Transition","TransitionEnd")},Ss={},ch={};a&&(ch=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Ga(l){if(Ss[l])return Ss[l];if(!Vo[l])return l;var h=Vo[l],g;for(g in h)if(h.hasOwnProperty(g)&&g in ch)return Ss[l]=h[g];return l}var Fd=Ga("animationend"),Cr=Ga("animationiteration"),hh=Ga("animationstart"),fh=Ga("transitionend"),Uo=new Map,zd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(l,h){Uo.set(l,h),s(h,[l])}for(var eo=0;eo<zd.length;eo++){var au=zd[eo],Bd=au.toLowerCase(),uy=au[0].toUpperCase()+au.slice(1);hr(Bd,"on"+uy)}hr(Fd,"onAnimationEnd"),hr(Cr,"onAnimationIteration"),hr(hh,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(fh,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function dh(l,h,g){var x=l.type||"unknown-event";l.currentTarget=g,fe(x,h,void 0,l),l.currentTarget=null}function ph(l,h){h=(h&4)!==0;for(var g=0;g<l.length;g++){var x=l[g],E=x.event;x=x.listeners;t:{var C=void 0;if(h)for(var V=x.length-1;0<=V;V--){var et=x[V],ct=et.instance,Tt=et.currentTarget;if(et=et.listener,ct!==C&&E.isPropagationStopped())break t;dh(E,et,Tt),C=ct}else for(V=0;V<x.length;V++){if(et=x[V],ct=et.instance,Tt=et.currentTarget,et=et.listener,ct!==C&&E.isPropagationStopped())break t;dh(E,et,Tt),C=ct}}}if(gt)throw l=Ct,gt=!1,Ct=null,l}function Je(l,h){var g=h[$o];g===void 0&&(g=h[$o]=new Set);var x=l+"__bubble";g.has(x)||(Ud(h,l,2,!1),g.add(x))}function mh(l,h,g){var x=0;h&&(x|=4),Ud(g,l,x,h)}var $a="_reactListening"+Math.random().toString(36).slice(2);function jo(l){if(!l[$a]){l[$a]=!0,i.forEach(function(g){g!=="selectionchange"&&(Vd.has(g)||mh(g,!1,l),mh(g,!0,l))});var h=l.nodeType===9?l:l.ownerDocument;h===null||h[$a]||(h[$a]=!0,mh("selectionchange",!1,h))}}function Ud(l,h,g,x){switch(Oe(h)){case 1:var E=Yg;break;case 4:E=wd;break;default:E=Va}g=E.bind(null,h,g,l),E=void 0,!To||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(E=!0),x?E!==void 0?l.addEventListener(h,g,{capture:!0,passive:E}):l.addEventListener(h,g,!0):E!==void 0?l.addEventListener(h,g,{passive:E}):l.addEventListener(h,g,!1)}function u(l,h,g,x,E){var C=x;if((h&1)===0&&(h&2)===0&&x!==null)t:for(;;){if(x===null)return;var V=x.tag;if(V===3||V===4){var et=x.stateNode.containerInfo;if(et===E||et.nodeType===8&&et.parentNode===E)break;if(V===4)for(V=x.return;V!==null;){var ct=V.tag;if((ct===3||ct===4)&&(ct=V.stateNode.containerInfo,ct===E||ct.nodeType===8&&ct.parentNode===E))return;V=V.return}for(;et!==null;){if(V=io(et),V===null)return;if(ct=V.tag,ct===5||ct===6){x=C=V;continue t}et=et.parentNode}}x=x.return}ci(function(){var Tt=C,Ut=Ae(g),Gt=[];t:{var Vt=Uo.get(l);if(Vt!==void 0){var ne=Kc,oe=l;switch(l){case"keypress":if(Xl(g)===0)break t;case"keydown":case"keyup":ne=Ed;break;case"focusin":oe="focus",ne=Yl;break;case"focusout":oe="blur",ne=Yl;break;case"beforeblur":case"afterblur":ne=Yl;break;case"click":if(g.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=rh;break;case Fd:case Cr:case hh:ne=Qg;break;case fh:ne=ry;break;case"scroll":ne=Kg;break;case"wheel":ne=sy;break;case"copy":case"cut":case"paste":ne=eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Cd}var ae=(h&4)!==0,kn=!ae&&l==="scroll",vt=ae?Vt!==null?Vt+"Capture":null:Vt;ae=[];for(var dt=Tt,xt;dt!==null;){xt=dt;var Yt=xt.stateNode;if(xt.tag===5&&Yt!==null&&(xt=Yt,vt!==null&&(Yt=Ci(dt,vt),Yt!=null&&ae.push(p(dt,Yt,xt)))),kn)break;dt=dt.return}0<ae.length&&(Vt=new ne(Vt,oe,null,g,Ut),Gt.push({event:Vt,listeners:ae}))}}if((h&7)===0){t:{if(Vt=l==="mouseover"||l==="pointerover",ne=l==="mouseout"||l==="pointerout",Vt&&g!==ee&&(oe=g.relatedTarget||g.fromElement)&&(io(oe)||oe[$e]))break t;if((ne||Vt)&&(Vt=Ut.window===Ut?Ut:(Vt=Ut.ownerDocument)?Vt.defaultView||Vt.parentWindow:window,ne?(oe=g.relatedTarget||g.toElement,ne=Tt,oe=oe?io(oe):null,oe!==null&&(kn=le(oe),oe!==kn||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(ne=null,oe=Tt),ne!==oe)){if(ae=Qc,Yt="onMouseLeave",vt="onMouseEnter",dt="mouse",(l==="pointerout"||l==="pointerover")&&(ae=Cd,Yt="onPointerLeave",vt="onPointerEnter",dt="pointer"),kn=ne==null?Vt:so(ne),xt=oe==null?Vt:so(oe),Vt=new ae(Yt,dt+"leave",ne,g,Ut),Vt.target=kn,Vt.relatedTarget=xt,Yt=null,io(Ut)===Tt&&(ae=new ae(vt,dt+"enter",oe,g,Ut),ae.target=xt,ae.relatedTarget=kn,Yt=ae),kn=Yt,ne&&oe)e:{for(ae=ne,vt=oe,dt=0,xt=ae;xt;xt=T(xt))dt++;for(xt=0,Yt=vt;Yt;Yt=T(Yt))xt++;for(;0<dt-xt;)ae=T(ae),dt--;for(;0<xt-dt;)vt=T(vt),xt--;for(;dt--;){if(ae===vt||vt!==null&&ae===vt.alternate)break e;ae=T(ae),vt=T(vt)}ae=null}else ae=null;ne!==null&&A(Gt,Vt,ne,ae,!1),oe!==null&&kn!==null&&A(Gt,kn,oe,ae,!0)}}t:{if(Vt=Tt?so(Tt):window,ne=Vt.nodeName&&Vt.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Vt.type==="file")var ce=ly;else if(Rd(Vt))if(Er)ce=oh;else{ce=Fo;var pe=iu}else(ne=Vt.nodeName)&&ne.toLowerCase()==="input"&&(Vt.type==="checkbox"||Vt.type==="radio")&&(ce=ru);if(ce&&(ce=ce(l,Tt))){Ql(Gt,ce,g,Ut);break t}pe&&pe(l,Vt,Tt),l==="focusout"&&(pe=Vt._wrapperState)&&pe.controlled&&Vt.type==="number"&&wt(Vt,"number",Vt.value)}switch(pe=Tt?so(Tt):window,l){case"focusin":(Rd(pe)||pe.contentEditable==="true")&&(zo=pe,Bo=Tt,Wa=null);break;case"focusout":Wa=Bo=zo=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,Nd(Gt,g,Ut);break;case"selectionchange":if(su)break;case"keydown":case"keyup":Nd(Gt,g,Ut)}var me;if(_s)t:{switch(l){case"compositionstart":var be="onCompositionStart";break t;case"compositionend":be="onCompositionEnd";break t;case"compositionupdate":be="onCompositionUpdate";break t}be=void 0}else Qr?Oo(l,g)&&(be="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(be="onCompositionStart");be&&(Ld&&g.locale!=="ko"&&(Qr||be!=="onCompositionStart"?be==="onCompositionEnd"&&Qr&&(me=Yc()):(ys=Ut,Li="value"in ys?ys.value:ys.textContent,Qr=!0)),pe=_(Tt,be),0<pe.length&&(be=new nh(be,l,null,g,Ut),Gt.push({event:be,listeners:pe}),me?be.data=me:(me=sh(g),me!==null&&(be.data=me)))),(me=Jr?oy(l,g):xs(l,g))&&(Tt=_(Tt,"onBeforeInput"),0<Tt.length&&(Ut=new nh("onBeforeInput","beforeinput",null,g,Ut),Gt.push({event:Ut,listeners:Tt}),Ut.data=me))}ph(Gt,h)})}function p(l,h,g){return{instance:l,listener:h,currentTarget:g}}function _(l,h){for(var g=h+"Capture",x=[];l!==null;){var E=l,C=E.stateNode;E.tag===5&&C!==null&&(E=C,C=Ci(l,g),C!=null&&x.unshift(p(l,C,E)),C=Ci(l,h),C!=null&&x.push(p(l,C,E))),l=l.return}return x}function T(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function A(l,h,g,x,E){for(var C=h._reactName,V=[];g!==null&&g!==x;){var et=g,ct=et.alternate,Tt=et.stateNode;if(ct!==null&&ct===x)break;et.tag===5&&Tt!==null&&(et=Tt,E?(ct=Ci(g,C),ct!=null&&V.unshift(p(g,ct,et))):E||(ct=Ci(g,C),ct!=null&&V.push(p(g,ct,et)))),g=g.return}V.length!==0&&l.push({event:h,listeners:V})}var j=/\r\n?/g,ot=/\u0000|\uFFFD/g;function yt(l){return(typeof l=="string"?l:""+l).replace(j,`
`).replace(ot,"")}function Mt(l,h,g){if(h=yt(h),yt(l)!==h&&g)throw Error(e(425))}function Nt(){}var te=null,de=null;function Pe(l,h){return l==="textarea"||l==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Vn=typeof setTimeout=="function"?setTimeout:void 0,On=typeof clearTimeout=="function"?clearTimeout:void 0,Ri=typeof Promise=="function"?Promise:void 0,di=typeof queueMicrotask=="function"?queueMicrotask:typeof Ri<"u"?function(l){return Ri.resolve(null).then(l).catch(Wo)}:Vn;function Wo(l){setTimeout(function(){throw l})}function gh(l,h){var g=h,x=0;do{var E=g.nextSibling;if(l.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(x===0){l.removeChild(E),ar(h);return}x--}else g!=="$"&&g!=="$?"&&g!=="$!"||x++;g=E}while(g);ar(h)}function Ms(l){for(;l!=null;l=l.nextSibling){var h=l.nodeType;if(h===1||h===3)break;if(h===8){if(h=l.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return l}function Hd(l){l=l.previousSibling;for(var h=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return l;h--}else g==="/$"&&h++}l=l.previousSibling}return null}var no=Math.random().toString(36).slice(2),Ar="__reactFiber$"+no,Go="__reactProps$"+no,$e="__reactContainer$"+no,$o="__reactEvents$"+no,cy="__reactListeners$"+no,hy="__reactHandles$"+no;function io(l){var h=l[Ar];if(h)return h;for(var g=l.parentNode;g;){if(h=g[$e]||g[Ar]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(l=Hd(l);l!==null;){if(g=l[Ar])return g;l=Hd(l)}return h}l=g,g=l.parentNode}return null}function ro(l){return l=l[Ar]||l[$e],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function so(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(e(33))}function lu(l){return l[Go]||null}var fy=[],uu=-1;function Zo(l){return{current:l}}function fn(l){0>uu||(l.current=fy[uu],fy[uu]=null,uu--)}function on(l,h){uu++,fy[uu]=l.current,l.current=h}var qo={},pi=Zo(qo),Ui=Zo(!1),Za=qo;function cu(l,h){var g=l.type.contextTypes;if(!g)return qo;var x=l.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===h)return x.__reactInternalMemoizedMaskedChildContext;var E={},C;for(C in g)E[C]=h[C];return x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=h,l.__reactInternalMemoizedMaskedChildContext=E),E}function Hi(l){return l=l.childContextTypes,l!=null}function jd(){fn(Ui),fn(pi)}function Yw(l,h,g){if(pi.current!==qo)throw Error(e(168));on(pi,h),on(Ui,g)}function Kw(l,h,g){var x=l.stateNode;if(h=h.childContextTypes,typeof x.getChildContext!="function")return g;x=x.getChildContext();for(var E in x)if(!(E in h))throw Error(e(108,Ot(l)||"Unknown",E));return F({},g,x)}function Wd(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||qo,Za=pi.current,on(pi,l),on(Ui,Ui.current),!0}function Jw(l,h,g){var x=l.stateNode;if(!x)throw Error(e(169));g?(l=Kw(l,h,Za),x.__reactInternalMemoizedMergedChildContext=l,fn(Ui),fn(pi),on(pi,l)):fn(Ui),on(Ui,g)}var oo=null,Gd=!1,dy=!1;function Qw(l){oo===null?oo=[l]:oo.push(l)}function Y2(l){Gd=!0,Qw(l)}function Xo(){if(!dy&&oo!==null){dy=!0;var l=0,h=Be;try{var g=oo;for(Be=1;l<g.length;l++){var x=g[l];do x=x(!0);while(x!==null)}oo=null,Gd=!1}catch(E){throw oo!==null&&(oo=oo.slice(l+1)),wr(pn,Xo),E}finally{Be=h,dy=!1}}return null}var hu=[],fu=0,$d=null,Zd=0,Lr=[],kr=0,qa=null,ao=1,lo="";function Xa(l,h){hu[fu++]=Zd,hu[fu++]=$d,$d=l,Zd=h}function tb(l,h,g){Lr[kr++]=ao,Lr[kr++]=lo,Lr[kr++]=qa,qa=l;var x=ao;l=lo;var E=32-Ee(x)-1;x&=~(1<<E),g+=1;var C=32-Ee(h)+E;if(30<C){var V=E-E%5;C=(x&(1<<V)-1).toString(32),x>>=V,E-=V,ao=1<<32-Ee(h)+E|g<<E|x,lo=C+l}else ao=1<<C|g<<E|x,lo=l}function py(l){l.return!==null&&(Xa(l,1),tb(l,1,0))}function my(l){for(;l===$d;)$d=hu[--fu],hu[fu]=null,Zd=hu[--fu],hu[fu]=null;for(;l===qa;)qa=Lr[--kr],Lr[kr]=null,lo=Lr[--kr],Lr[kr]=null,ao=Lr[--kr],Lr[kr]=null}var fr=null,dr=null,gn=!1,es=null;function eb(l,h){var g=Or(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=l,h=l.deletions,h===null?(l.deletions=[g],l.flags|=16):h.push(g)}function nb(l,h){switch(l.tag){case 5:var g=l.type;return h=h.nodeType!==1||g.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(l.stateNode=h,fr=l,dr=Ms(h.firstChild),!0):!1;case 6:return h=l.pendingProps===""||h.nodeType!==3?null:h,h!==null?(l.stateNode=h,fr=l,dr=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(g=qa!==null?{id:ao,overflow:lo}:null,l.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=Or(18,null,null,0),g.stateNode=h,g.return=l,l.child=g,fr=l,dr=null,!0):!1;default:return!1}}function gy(l){return(l.mode&1)!==0&&(l.flags&128)===0}function yy(l){if(gn){var h=dr;if(h){var g=h;if(!nb(l,h)){if(gy(l))throw Error(e(418));h=Ms(g.nextSibling);var x=fr;h&&nb(l,h)?eb(x,g):(l.flags=l.flags&-4097|2,gn=!1,fr=l)}}else{if(gy(l))throw Error(e(418));l.flags=l.flags&-4097|2,gn=!1,fr=l}}}function ib(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;fr=l}function qd(l){if(l!==fr)return!1;if(!gn)return ib(l),gn=!0,!1;var h;if((h=l.tag!==3)&&!(h=l.tag!==5)&&(h=l.type,h=h!=="head"&&h!=="body"&&!Pe(l.type,l.memoizedProps)),h&&(h=dr)){if(gy(l))throw rb(),Error(e(418));for(;h;)eb(l,h),h=Ms(h.nextSibling)}if(ib(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(e(317));t:{for(l=l.nextSibling,h=0;l;){if(l.nodeType===8){var g=l.data;if(g==="/$"){if(h===0){dr=Ms(l.nextSibling);break t}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++}l=l.nextSibling}dr=null}}else dr=fr?Ms(l.stateNode.nextSibling):null;return!0}function rb(){for(var l=dr;l;)l=Ms(l.nextSibling)}function du(){dr=fr=null,gn=!1}function vy(l){es===null?es=[l]:es.push(l)}var K2=O.ReactCurrentBatchConfig;function yh(l,h,g){if(l=g.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(e(309));var x=g.stateNode}if(!x)throw Error(e(147,l));var E=x,C=""+l;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===C?h.ref:(h=function(V){var et=E.refs;V===null?delete et[C]:et[C]=V},h._stringRef=C,h)}if(typeof l!="string")throw Error(e(284));if(!g._owner)throw Error(e(290,l))}return l}function Xd(l,h){throw l=Object.prototype.toString.call(h),Error(e(31,l==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":l))}function sb(l){var h=l._init;return h(l._payload)}function ob(l){function h(vt,dt){if(l){var xt=vt.deletions;xt===null?(vt.deletions=[dt],vt.flags|=16):xt.push(dt)}}function g(vt,dt){if(!l)return null;for(;dt!==null;)h(vt,dt),dt=dt.sibling;return null}function x(vt,dt){for(vt=new Map;dt!==null;)dt.key!==null?vt.set(dt.key,dt):vt.set(dt.index,dt),dt=dt.sibling;return vt}function E(vt,dt){return vt=ia(vt,dt),vt.index=0,vt.sibling=null,vt}function C(vt,dt,xt){return vt.index=xt,l?(xt=vt.alternate,xt!==null?(xt=xt.index,xt<dt?(vt.flags|=2,dt):xt):(vt.flags|=2,dt)):(vt.flags|=1048576,dt)}function V(vt){return l&&vt.alternate===null&&(vt.flags|=2),vt}function et(vt,dt,xt,Yt){return dt===null||dt.tag!==6?(dt=uv(xt,vt.mode,Yt),dt.return=vt,dt):(dt=E(dt,xt),dt.return=vt,dt)}function ct(vt,dt,xt,Yt){var ce=xt.type;return ce===D?Ut(vt,dt,xt.props.children,Yt,xt.key):dt!==null&&(dt.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===at&&sb(ce)===dt.type)?(Yt=E(dt,xt.props),Yt.ref=yh(vt,dt,xt),Yt.return=vt,Yt):(Yt=_p(xt.type,xt.key,xt.props,null,vt.mode,Yt),Yt.ref=yh(vt,dt,xt),Yt.return=vt,Yt)}function Tt(vt,dt,xt,Yt){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==xt.containerInfo||dt.stateNode.implementation!==xt.implementation?(dt=cv(xt,vt.mode,Yt),dt.return=vt,dt):(dt=E(dt,xt.children||[]),dt.return=vt,dt)}function Ut(vt,dt,xt,Yt,ce){return dt===null||dt.tag!==7?(dt=il(xt,vt.mode,Yt,ce),dt.return=vt,dt):(dt=E(dt,xt),dt.return=vt,dt)}function Gt(vt,dt,xt){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return dt=uv(""+dt,vt.mode,xt),dt.return=vt,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case k:return xt=_p(dt.type,dt.key,dt.props,null,vt.mode,xt),xt.ref=yh(vt,null,dt),xt.return=vt,xt;case N:return dt=cv(dt,vt.mode,xt),dt.return=vt,dt;case at:var Yt=dt._init;return Gt(vt,Yt(dt._payload),xt)}if(Lt(dt)||pt(dt))return dt=il(dt,vt.mode,xt,null),dt.return=vt,dt;Xd(vt,dt)}return null}function Vt(vt,dt,xt,Yt){var ce=dt!==null?dt.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return ce!==null?null:et(vt,dt,""+xt,Yt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case k:return xt.key===ce?ct(vt,dt,xt,Yt):null;case N:return xt.key===ce?Tt(vt,dt,xt,Yt):null;case at:return ce=xt._init,Vt(vt,dt,ce(xt._payload),Yt)}if(Lt(xt)||pt(xt))return ce!==null?null:Ut(vt,dt,xt,Yt,null);Xd(vt,xt)}return null}function ne(vt,dt,xt,Yt,ce){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return vt=vt.get(xt)||null,et(dt,vt,""+Yt,ce);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case k:return vt=vt.get(Yt.key===null?xt:Yt.key)||null,ct(dt,vt,Yt,ce);case N:return vt=vt.get(Yt.key===null?xt:Yt.key)||null,Tt(dt,vt,Yt,ce);case at:var pe=Yt._init;return ne(vt,dt,xt,pe(Yt._payload),ce)}if(Lt(Yt)||pt(Yt))return vt=vt.get(xt)||null,Ut(dt,vt,Yt,ce,null);Xd(dt,Yt)}return null}function oe(vt,dt,xt,Yt){for(var ce=null,pe=null,me=dt,be=dt=0,Xn=null;me!==null&&be<xt.length;be++){me.index>be?(Xn=me,me=null):Xn=me.sibling;var He=Vt(vt,me,xt[be],Yt);if(He===null){me===null&&(me=Xn);break}l&&me&&He.alternate===null&&h(vt,me),dt=C(He,dt,be),pe===null?ce=He:pe.sibling=He,pe=He,me=Xn}if(be===xt.length)return g(vt,me),gn&&Xa(vt,be),ce;if(me===null){for(;be<xt.length;be++)me=Gt(vt,xt[be],Yt),me!==null&&(dt=C(me,dt,be),pe===null?ce=me:pe.sibling=me,pe=me);return gn&&Xa(vt,be),ce}for(me=x(vt,me);be<xt.length;be++)Xn=ne(me,vt,be,xt[be],Yt),Xn!==null&&(l&&Xn.alternate!==null&&me.delete(Xn.key===null?be:Xn.key),dt=C(Xn,dt,be),pe===null?ce=Xn:pe.sibling=Xn,pe=Xn);return l&&me.forEach(function(ra){return h(vt,ra)}),gn&&Xa(vt,be),ce}function ae(vt,dt,xt,Yt){var ce=pt(xt);if(typeof ce!="function")throw Error(e(150));if(xt=ce.call(xt),xt==null)throw Error(e(151));for(var pe=ce=null,me=dt,be=dt=0,Xn=null,He=xt.next();me!==null&&!He.done;be++,He=xt.next()){me.index>be?(Xn=me,me=null):Xn=me.sibling;var ra=Vt(vt,me,He.value,Yt);if(ra===null){me===null&&(me=Xn);break}l&&me&&ra.alternate===null&&h(vt,me),dt=C(ra,dt,be),pe===null?ce=ra:pe.sibling=ra,pe=ra,me=Xn}if(He.done)return g(vt,me),gn&&Xa(vt,be),ce;if(me===null){for(;!He.done;be++,He=xt.next())He=Gt(vt,He.value,Yt),He!==null&&(dt=C(He,dt,be),pe===null?ce=He:pe.sibling=He,pe=He);return gn&&Xa(vt,be),ce}for(me=x(vt,me);!He.done;be++,He=xt.next())He=ne(me,vt,be,He.value,Yt),He!==null&&(l&&He.alternate!==null&&me.delete(He.key===null?be:He.key),dt=C(He,dt,be),pe===null?ce=He:pe.sibling=He,pe=He);return l&&me.forEach(function(LR){return h(vt,LR)}),gn&&Xa(vt,be),ce}function kn(vt,dt,xt,Yt){if(typeof xt=="object"&&xt!==null&&xt.type===D&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case k:t:{for(var ce=xt.key,pe=dt;pe!==null;){if(pe.key===ce){if(ce=xt.type,ce===D){if(pe.tag===7){g(vt,pe.sibling),dt=E(pe,xt.props.children),dt.return=vt,vt=dt;break t}}else if(pe.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===at&&sb(ce)===pe.type){g(vt,pe.sibling),dt=E(pe,xt.props),dt.ref=yh(vt,pe,xt),dt.return=vt,vt=dt;break t}g(vt,pe);break}else h(vt,pe);pe=pe.sibling}xt.type===D?(dt=il(xt.props.children,vt.mode,Yt,xt.key),dt.return=vt,vt=dt):(Yt=_p(xt.type,xt.key,xt.props,null,vt.mode,Yt),Yt.ref=yh(vt,dt,xt),Yt.return=vt,vt=Yt)}return V(vt);case N:t:{for(pe=xt.key;dt!==null;){if(dt.key===pe)if(dt.tag===4&&dt.stateNode.containerInfo===xt.containerInfo&&dt.stateNode.implementation===xt.implementation){g(vt,dt.sibling),dt=E(dt,xt.children||[]),dt.return=vt,vt=dt;break t}else{g(vt,dt);break}else h(vt,dt);dt=dt.sibling}dt=cv(xt,vt.mode,Yt),dt.return=vt,vt=dt}return V(vt);case at:return pe=xt._init,kn(vt,dt,pe(xt._payload),Yt)}if(Lt(xt))return oe(vt,dt,xt,Yt);if(pt(xt))return ae(vt,dt,xt,Yt);Xd(vt,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,dt!==null&&dt.tag===6?(g(vt,dt.sibling),dt=E(dt,xt),dt.return=vt,vt=dt):(g(vt,dt),dt=uv(xt,vt.mode,Yt),dt.return=vt,vt=dt),V(vt)):g(vt,dt)}return kn}var pu=ob(!0),ab=ob(!1),Yd=Zo(null),Kd=null,mu=null,_y=null;function xy(){_y=mu=Kd=null}function wy(l){var h=Yd.current;fn(Yd),l._currentValue=h}function by(l,h,g){for(;l!==null;){var x=l.alternate;if((l.childLanes&h)!==h?(l.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),l===g)break;l=l.return}}function gu(l,h){Kd=l,_y=mu=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&h)!==0&&(ji=!0),l.firstContext=null)}function Rr(l){var h=l._currentValue;if(_y!==l)if(l={context:l,memoizedValue:h,next:null},mu===null){if(Kd===null)throw Error(e(308));mu=l,Kd.dependencies={lanes:0,firstContext:l}}else mu=mu.next=l;return h}var Ya=null;function Sy(l){Ya===null?Ya=[l]:Ya.push(l)}function lb(l,h,g,x){var E=h.interleaved;return E===null?(g.next=g,Sy(h)):(g.next=E.next,E.next=g),h.interleaved=g,uo(l,x)}function uo(l,h){l.lanes|=h;var g=l.alternate;for(g!==null&&(g.lanes|=h),g=l,l=l.return;l!==null;)l.childLanes|=h,g=l.alternate,g!==null&&(g.childLanes|=h),g=l,l=l.return;return g.tag===3?g.stateNode:null}var Yo=!1;function My(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ub(l,h){l=l.updateQueue,h.updateQueue===l&&(h.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function co(l,h){return{eventTime:l,lane:h,tag:0,payload:null,callback:null,next:null}}function Ko(l,h,g){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(Ue&2)!==0){var E=x.pending;return E===null?h.next=h:(h.next=E.next,E.next=h),x.pending=h,uo(l,g)}return E=x.interleaved,E===null?(h.next=h,Sy(x)):(h.next=E.next,E.next=h),x.interleaved=h,uo(l,g)}function Jd(l,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var x=h.lanes;x&=l.pendingLanes,g|=x,h.lanes=g,Yr(l,g)}}function cb(l,h){var g=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,g===x)){var E=null,C=null;if(g=g.firstBaseUpdate,g!==null){do{var V={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};C===null?E=C=V:C=C.next=V,g=g.next}while(g!==null);C===null?E=C=h:C=C.next=h}else E=C=h;g={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:x.shared,effects:x.effects},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=h:l.next=h,g.lastBaseUpdate=h}function Qd(l,h,g,x){var E=l.updateQueue;Yo=!1;var C=E.firstBaseUpdate,V=E.lastBaseUpdate,et=E.shared.pending;if(et!==null){E.shared.pending=null;var ct=et,Tt=ct.next;ct.next=null,V===null?C=Tt:V.next=Tt,V=ct;var Ut=l.alternate;Ut!==null&&(Ut=Ut.updateQueue,et=Ut.lastBaseUpdate,et!==V&&(et===null?Ut.firstBaseUpdate=Tt:et.next=Tt,Ut.lastBaseUpdate=ct))}if(C!==null){var Gt=E.baseState;V=0,Ut=Tt=ct=null,et=C;do{var Vt=et.lane,ne=et.eventTime;if((x&Vt)===Vt){Ut!==null&&(Ut=Ut.next={eventTime:ne,lane:0,tag:et.tag,payload:et.payload,callback:et.callback,next:null});t:{var oe=l,ae=et;switch(Vt=h,ne=g,ae.tag){case 1:if(oe=ae.payload,typeof oe=="function"){Gt=oe.call(ne,Gt,Vt);break t}Gt=oe;break t;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ae.payload,Vt=typeof oe=="function"?oe.call(ne,Gt,Vt):oe,Vt==null)break t;Gt=F({},Gt,Vt);break t;case 2:Yo=!0}}et.callback!==null&&et.lane!==0&&(l.flags|=64,Vt=E.effects,Vt===null?E.effects=[et]:Vt.push(et))}else ne={eventTime:ne,lane:Vt,tag:et.tag,payload:et.payload,callback:et.callback,next:null},Ut===null?(Tt=Ut=ne,ct=Gt):Ut=Ut.next=ne,V|=Vt;if(et=et.next,et===null){if(et=E.shared.pending,et===null)break;Vt=et,et=Vt.next,Vt.next=null,E.lastBaseUpdate=Vt,E.shared.pending=null}}while(!0);if(Ut===null&&(ct=Gt),E.baseState=ct,E.firstBaseUpdate=Tt,E.lastBaseUpdate=Ut,h=E.shared.interleaved,h!==null){E=h;do V|=E.lane,E=E.next;while(E!==h)}else C===null&&(E.shared.lanes=0);Qa|=V,l.lanes=V,l.memoizedState=Gt}}function hb(l,h,g){if(l=h.effects,h.effects=null,l!==null)for(h=0;h<l.length;h++){var x=l[h],E=x.callback;if(E!==null){if(x.callback=null,x=g,typeof E!="function")throw Error(e(191,E));E.call(x)}}}var vh={},Ts=Zo(vh),_h=Zo(vh),xh=Zo(vh);function Ka(l){if(l===vh)throw Error(e(174));return l}function Ty(l,h){switch(on(xh,h),on(_h,l),on(Ts,vh),l=h.nodeType,l){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:q(null,"");break;default:l=l===8?h.parentNode:h,h=l.namespaceURI||null,l=l.tagName,h=q(h,l)}fn(Ts),on(Ts,h)}function yu(){fn(Ts),fn(_h),fn(xh)}function fb(l){Ka(xh.current);var h=Ka(Ts.current),g=q(h,l.type);h!==g&&(on(_h,l),on(Ts,g))}function Ey(l){_h.current===l&&(fn(Ts),fn(_h))}var bn=Zo(0);function tp(l){for(var h=l;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Py=[];function Cy(){for(var l=0;l<Py.length;l++)Py[l]._workInProgressVersionPrimary=null;Py.length=0}var ep=O.ReactCurrentDispatcher,Ay=O.ReactCurrentBatchConfig,Ja=0,Sn=null,Un=null,Zn=null,np=!1,wh=!1,bh=0,J2=0;function mi(){throw Error(e(321))}function Ly(l,h){if(h===null)return!1;for(var g=0;g<h.length&&g<l.length;g++)if(!cr(l[g],h[g]))return!1;return!0}function ky(l,h,g,x,E,C){if(Ja=C,Sn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,ep.current=l===null||l.memoizedState===null?nR:iR,l=g(x,E),wh){C=0;do{if(wh=!1,bh=0,25<=C)throw Error(e(301));C+=1,Zn=Un=null,h.updateQueue=null,ep.current=rR,l=g(x,E)}while(wh)}if(ep.current=sp,h=Un!==null&&Un.next!==null,Ja=0,Zn=Un=Sn=null,np=!1,h)throw Error(e(300));return l}function Ry(){var l=bh!==0;return bh=0,l}function Es(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?Sn.memoizedState=Zn=l:Zn=Zn.next=l,Zn}function Ir(){if(Un===null){var l=Sn.alternate;l=l!==null?l.memoizedState:null}else l=Un.next;var h=Zn===null?Sn.memoizedState:Zn.next;if(h!==null)Zn=h,Un=l;else{if(l===null)throw Error(e(310));Un=l,l={memoizedState:Un.memoizedState,baseState:Un.baseState,baseQueue:Un.baseQueue,queue:Un.queue,next:null},Zn===null?Sn.memoizedState=Zn=l:Zn=Zn.next=l}return Zn}function Sh(l,h){return typeof h=="function"?h(l):h}function Iy(l){var h=Ir(),g=h.queue;if(g===null)throw Error(e(311));g.lastRenderedReducer=l;var x=Un,E=x.baseQueue,C=g.pending;if(C!==null){if(E!==null){var V=E.next;E.next=C.next,C.next=V}x.baseQueue=E=C,g.pending=null}if(E!==null){C=E.next,x=x.baseState;var et=V=null,ct=null,Tt=C;do{var Ut=Tt.lane;if((Ja&Ut)===Ut)ct!==null&&(ct=ct.next={lane:0,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null}),x=Tt.hasEagerState?Tt.eagerState:l(x,Tt.action);else{var Gt={lane:Ut,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null};ct===null?(et=ct=Gt,V=x):ct=ct.next=Gt,Sn.lanes|=Ut,Qa|=Ut}Tt=Tt.next}while(Tt!==null&&Tt!==C);ct===null?V=x:ct.next=et,cr(x,h.memoizedState)||(ji=!0),h.memoizedState=x,h.baseState=V,h.baseQueue=ct,g.lastRenderedState=x}if(l=g.interleaved,l!==null){E=l;do C=E.lane,Sn.lanes|=C,Qa|=C,E=E.next;while(E!==l)}else E===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function Dy(l){var h=Ir(),g=h.queue;if(g===null)throw Error(e(311));g.lastRenderedReducer=l;var x=g.dispatch,E=g.pending,C=h.memoizedState;if(E!==null){g.pending=null;var V=E=E.next;do C=l(C,V.action),V=V.next;while(V!==E);cr(C,h.memoizedState)||(ji=!0),h.memoizedState=C,h.baseQueue===null&&(h.baseState=C),g.lastRenderedState=C}return[C,x]}function db(){}function pb(l,h){var g=Sn,x=Ir(),E=h(),C=!cr(x.memoizedState,E);if(C&&(x.memoizedState=E,ji=!0),x=x.queue,Oy(yb.bind(null,g,x,l),[l]),x.getSnapshot!==h||C||Zn!==null&&Zn.memoizedState.tag&1){if(g.flags|=2048,Mh(9,gb.bind(null,g,x,E,h),void 0,null),qn===null)throw Error(e(349));(Ja&30)!==0||mb(g,h,E)}return E}function mb(l,h,g){l.flags|=16384,l={getSnapshot:h,value:g},h=Sn.updateQueue,h===null?(h={lastEffect:null,stores:null},Sn.updateQueue=h,h.stores=[l]):(g=h.stores,g===null?h.stores=[l]:g.push(l))}function gb(l,h,g,x){h.value=g,h.getSnapshot=x,vb(h)&&_b(l)}function yb(l,h,g){return g(function(){vb(h)&&_b(l)})}function vb(l){var h=l.getSnapshot;l=l.value;try{var g=h();return!cr(l,g)}catch{return!0}}function _b(l){var h=uo(l,1);h!==null&&ss(h,l,1,-1)}function xb(l){var h=Es();return typeof l=="function"&&(l=l()),h.memoizedState=h.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sh,lastRenderedState:l},h.queue=l,l=l.dispatch=eR.bind(null,Sn,l),[h.memoizedState,l]}function Mh(l,h,g,x){return l={tag:l,create:h,destroy:g,deps:x,next:null},h=Sn.updateQueue,h===null?(h={lastEffect:null,stores:null},Sn.updateQueue=h,h.lastEffect=l.next=l):(g=h.lastEffect,g===null?h.lastEffect=l.next=l:(x=g.next,g.next=l,l.next=x,h.lastEffect=l)),l}function wb(){return Ir().memoizedState}function ip(l,h,g,x){var E=Es();Sn.flags|=l,E.memoizedState=Mh(1|h,g,void 0,x===void 0?null:x)}function rp(l,h,g,x){var E=Ir();x=x===void 0?null:x;var C=void 0;if(Un!==null){var V=Un.memoizedState;if(C=V.destroy,x!==null&&Ly(x,V.deps)){E.memoizedState=Mh(h,g,C,x);return}}Sn.flags|=l,E.memoizedState=Mh(1|h,g,C,x)}function bb(l,h){return ip(8390656,8,l,h)}function Oy(l,h){return rp(2048,8,l,h)}function Sb(l,h){return rp(4,2,l,h)}function Mb(l,h){return rp(4,4,l,h)}function Tb(l,h){if(typeof h=="function")return l=l(),h(l),function(){h(null)};if(h!=null)return l=l(),h.current=l,function(){h.current=null}}function Eb(l,h,g){return g=g!=null?g.concat([l]):null,rp(4,4,Tb.bind(null,h,l),g)}function Ny(){}function Pb(l,h){var g=Ir();h=h===void 0?null:h;var x=g.memoizedState;return x!==null&&h!==null&&Ly(h,x[1])?x[0]:(g.memoizedState=[l,h],l)}function Cb(l,h){var g=Ir();h=h===void 0?null:h;var x=g.memoizedState;return x!==null&&h!==null&&Ly(h,x[1])?x[0]:(l=l(),g.memoizedState=[l,h],l)}function Ab(l,h,g){return(Ja&21)===0?(l.baseState&&(l.baseState=!1,ji=!0),l.memoizedState=g):(cr(g,h)||(g=xd(),Sn.lanes|=g,Qa|=g,l.baseState=!0),h)}function Q2(l,h){var g=Be;Be=g!==0&&4>g?g:4,l(!0);var x=Ay.transition;Ay.transition={};try{l(!1),h()}finally{Be=g,Ay.transition=x}}function Lb(){return Ir().memoizedState}function tR(l,h,g){var x=ea(l);if(g={lane:x,action:g,hasEagerState:!1,eagerState:null,next:null},kb(l))Rb(h,g);else if(g=lb(l,h,g,x),g!==null){var E=Di();ss(g,l,x,E),Ib(g,h,x)}}function eR(l,h,g){var x=ea(l),E={lane:x,action:g,hasEagerState:!1,eagerState:null,next:null};if(kb(l))Rb(h,E);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=h.lastRenderedReducer,C!==null))try{var V=h.lastRenderedState,et=C(V,g);if(E.hasEagerState=!0,E.eagerState=et,cr(et,V)){var ct=h.interleaved;ct===null?(E.next=E,Sy(h)):(E.next=ct.next,ct.next=E),h.interleaved=E;return}}catch{}finally{}g=lb(l,h,E,x),g!==null&&(E=Di(),ss(g,l,x,E),Ib(g,h,x))}}function kb(l){var h=l.alternate;return l===Sn||h!==null&&h===Sn}function Rb(l,h){wh=np=!0;var g=l.pending;g===null?h.next=h:(h.next=g.next,g.next=h),l.pending=h}function Ib(l,h,g){if((g&4194240)!==0){var x=h.lanes;x&=l.pendingLanes,g|=x,h.lanes=g,Yr(l,g)}}var sp={readContext:Rr,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},nR={readContext:Rr,useCallback:function(l,h){return Es().memoizedState=[l,h===void 0?null:h],l},useContext:Rr,useEffect:bb,useImperativeHandle:function(l,h,g){return g=g!=null?g.concat([l]):null,ip(4194308,4,Tb.bind(null,h,l),g)},useLayoutEffect:function(l,h){return ip(4194308,4,l,h)},useInsertionEffect:function(l,h){return ip(4,2,l,h)},useMemo:function(l,h){var g=Es();return h=h===void 0?null:h,l=l(),g.memoizedState=[l,h],l},useReducer:function(l,h,g){var x=Es();return h=g!==void 0?g(h):h,x.memoizedState=x.baseState=h,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:h},x.queue=l,l=l.dispatch=tR.bind(null,Sn,l),[x.memoizedState,l]},useRef:function(l){var h=Es();return l={current:l},h.memoizedState=l},useState:xb,useDebugValue:Ny,useDeferredValue:function(l){return Es().memoizedState=l},useTransition:function(){var l=xb(!1),h=l[0];return l=Q2.bind(null,l[1]),Es().memoizedState=l,[h,l]},useMutableSource:function(){},useSyncExternalStore:function(l,h,g){var x=Sn,E=Es();if(gn){if(g===void 0)throw Error(e(407));g=g()}else{if(g=h(),qn===null)throw Error(e(349));(Ja&30)!==0||mb(x,h,g)}E.memoizedState=g;var C={value:g,getSnapshot:h};return E.queue=C,bb(yb.bind(null,x,C,l),[l]),x.flags|=2048,Mh(9,gb.bind(null,x,C,g,h),void 0,null),g},useId:function(){var l=Es(),h=qn.identifierPrefix;if(gn){var g=lo,x=ao;g=(x&~(1<<32-Ee(x)-1)).toString(32)+g,h=":"+h+"R"+g,g=bh++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=J2++,h=":"+h+"r"+g.toString(32)+":";return l.memoizedState=h},unstable_isNewReconciler:!1},iR={readContext:Rr,useCallback:Pb,useContext:Rr,useEffect:Oy,useImperativeHandle:Eb,useInsertionEffect:Sb,useLayoutEffect:Mb,useMemo:Cb,useReducer:Iy,useRef:wb,useState:function(){return Iy(Sh)},useDebugValue:Ny,useDeferredValue:function(l){var h=Ir();return Ab(h,Un.memoizedState,l)},useTransition:function(){var l=Iy(Sh)[0],h=Ir().memoizedState;return[l,h]},useMutableSource:db,useSyncExternalStore:pb,useId:Lb,unstable_isNewReconciler:!1},rR={readContext:Rr,useCallback:Pb,useContext:Rr,useEffect:Oy,useImperativeHandle:Eb,useInsertionEffect:Sb,useLayoutEffect:Mb,useMemo:Cb,useReducer:Dy,useRef:wb,useState:function(){return Dy(Sh)},useDebugValue:Ny,useDeferredValue:function(l){var h=Ir();return Un===null?h.memoizedState=l:Ab(h,Un.memoizedState,l)},useTransition:function(){var l=Dy(Sh)[0],h=Ir().memoizedState;return[l,h]},useMutableSource:db,useSyncExternalStore:pb,useId:Lb,unstable_isNewReconciler:!1};function ns(l,h){if(l&&l.defaultProps){h=F({},h),l=l.defaultProps;for(var g in l)h[g]===void 0&&(h[g]=l[g]);return h}return h}function Fy(l,h,g,x){h=l.memoizedState,g=g(x,h),g=g==null?h:F({},h,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var op={isMounted:function(l){return(l=l._reactInternals)?le(l)===l:!1},enqueueSetState:function(l,h,g){l=l._reactInternals;var x=Di(),E=ea(l),C=co(x,E);C.payload=h,g!=null&&(C.callback=g),h=Ko(l,C,E),h!==null&&(ss(h,l,E,x),Jd(h,l,E))},enqueueReplaceState:function(l,h,g){l=l._reactInternals;var x=Di(),E=ea(l),C=co(x,E);C.tag=1,C.payload=h,g!=null&&(C.callback=g),h=Ko(l,C,E),h!==null&&(ss(h,l,E,x),Jd(h,l,E))},enqueueForceUpdate:function(l,h){l=l._reactInternals;var g=Di(),x=ea(l),E=co(g,x);E.tag=2,h!=null&&(E.callback=h),h=Ko(l,E,x),h!==null&&(ss(h,l,x,g),Jd(h,l,x))}};function Db(l,h,g,x,E,C,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,C,V):h.prototype&&h.prototype.isPureReactComponent?!ws(g,x)||!ws(E,C):!0}function Ob(l,h,g){var x=!1,E=qo,C=h.contextType;return typeof C=="object"&&C!==null?C=Rr(C):(E=Hi(h)?Za:pi.current,x=h.contextTypes,C=(x=x!=null)?cu(l,E):qo),h=new h(g,C),l.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=op,l.stateNode=h,h._reactInternals=l,x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=E,l.__reactInternalMemoizedMaskedChildContext=C),h}function Nb(l,h,g,x){l=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,x),h.state!==l&&op.enqueueReplaceState(h,h.state,null)}function zy(l,h,g,x){var E=l.stateNode;E.props=g,E.state=l.memoizedState,E.refs={},My(l);var C=h.contextType;typeof C=="object"&&C!==null?E.context=Rr(C):(C=Hi(h)?Za:pi.current,E.context=cu(l,C)),E.state=l.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(Fy(l,h,C,g),E.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(h=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),h!==E.state&&op.enqueueReplaceState(E,E.state,null),Qd(l,g,E,x),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308)}function vu(l,h){try{var g="",x=h;do g+=_t(x),x=x.return;while(x);var E=g}catch(C){E=`
Error generating stack: `+C.message+`
`+C.stack}return{value:l,source:h,stack:E,digest:null}}function By(l,h,g){return{value:l,source:null,stack:g??null,digest:h??null}}function Vy(l,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var sR=typeof WeakMap=="function"?WeakMap:Map;function Fb(l,h,g){g=co(-1,g),g.tag=3,g.payload={element:null};var x=h.value;return g.callback=function(){dp||(dp=!0,ev=x),Vy(l,h)},g}function zb(l,h,g){g=co(-1,g),g.tag=3;var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var E=h.value;g.payload=function(){return x(E)},g.callback=function(){Vy(l,h)}}var C=l.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(g.callback=function(){Vy(l,h),typeof x!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var V=h.stack;this.componentDidCatch(h.value,{componentStack:V!==null?V:""})}),g}function Bb(l,h,g){var x=l.pingCache;if(x===null){x=l.pingCache=new sR;var E=new Set;x.set(h,E)}else E=x.get(h),E===void 0&&(E=new Set,x.set(h,E));E.has(g)||(E.add(g),l=_R.bind(null,l,h,g),h.then(l,l))}function Vb(l){do{var h;if((h=l.tag===13)&&(h=l.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return l;l=l.return}while(l!==null);return null}function Ub(l,h,g,x,E){return(l.mode&1)===0?(l===h?l.flags|=65536:(l.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=co(-1,1),h.tag=2,Ko(g,h,1))),g.lanes|=1),l):(l.flags|=65536,l.lanes=E,l)}var oR=O.ReactCurrentOwner,ji=!1;function Ii(l,h,g,x){h.child=l===null?ab(h,null,g,x):pu(h,l.child,g,x)}function Hb(l,h,g,x,E){g=g.render;var C=h.ref;return gu(h,E),x=ky(l,h,g,x,C,E),g=Ry(),l!==null&&!ji?(h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~E,ho(l,h,E)):(gn&&g&&py(h),h.flags|=1,Ii(l,h,x,E),h.child)}function jb(l,h,g,x,E){if(l===null){var C=g.type;return typeof C=="function"&&!lv(C)&&C.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=C,Wb(l,h,C,x,E)):(l=_p(g.type,null,x,h,h.mode,E),l.ref=h.ref,l.return=h,h.child=l)}if(C=l.child,(l.lanes&E)===0){var V=C.memoizedProps;if(g=g.compare,g=g!==null?g:ws,g(V,x)&&l.ref===h.ref)return ho(l,h,E)}return h.flags|=1,l=ia(C,x),l.ref=h.ref,l.return=h,h.child=l}function Wb(l,h,g,x,E){if(l!==null){var C=l.memoizedProps;if(ws(C,x)&&l.ref===h.ref)if(ji=!1,h.pendingProps=x=C,(l.lanes&E)!==0)(l.flags&131072)!==0&&(ji=!0);else return h.lanes=l.lanes,ho(l,h,E)}return Uy(l,h,g,x,E)}function Gb(l,h,g){var x=h.pendingProps,E=x.children,C=l!==null?l.memoizedState:null;if(x.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(xu,pr),pr|=g;else{if((g&1073741824)===0)return l=C!==null?C.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:l,cachePool:null,transitions:null},h.updateQueue=null,on(xu,pr),pr|=l,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=C!==null?C.baseLanes:g,on(xu,pr),pr|=x}else C!==null?(x=C.baseLanes|g,h.memoizedState=null):x=g,on(xu,pr),pr|=x;return Ii(l,h,E,g),h.child}function $b(l,h){var g=h.ref;(l===null&&g!==null||l!==null&&l.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function Uy(l,h,g,x,E){var C=Hi(g)?Za:pi.current;return C=cu(h,C),gu(h,E),g=ky(l,h,g,x,C,E),x=Ry(),l!==null&&!ji?(h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~E,ho(l,h,E)):(gn&&x&&py(h),h.flags|=1,Ii(l,h,g,E),h.child)}function Zb(l,h,g,x,E){if(Hi(g)){var C=!0;Wd(h)}else C=!1;if(gu(h,E),h.stateNode===null)lp(l,h),Ob(h,g,x),zy(h,g,x,E),x=!0;else if(l===null){var V=h.stateNode,et=h.memoizedProps;V.props=et;var ct=V.context,Tt=g.contextType;typeof Tt=="object"&&Tt!==null?Tt=Rr(Tt):(Tt=Hi(g)?Za:pi.current,Tt=cu(h,Tt));var Ut=g.getDerivedStateFromProps,Gt=typeof Ut=="function"||typeof V.getSnapshotBeforeUpdate=="function";Gt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(et!==x||ct!==Tt)&&Nb(h,V,x,Tt),Yo=!1;var Vt=h.memoizedState;V.state=Vt,Qd(h,x,V,E),ct=h.memoizedState,et!==x||Vt!==ct||Ui.current||Yo?(typeof Ut=="function"&&(Fy(h,g,Ut,x),ct=h.memoizedState),(et=Yo||Db(h,g,et,x,Vt,ct,Tt))?(Gt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(h.flags|=4194308)):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=ct),V.props=x,V.state=ct,V.context=Tt,x=et):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{V=h.stateNode,ub(l,h),et=h.memoizedProps,Tt=h.type===h.elementType?et:ns(h.type,et),V.props=Tt,Gt=h.pendingProps,Vt=V.context,ct=g.contextType,typeof ct=="object"&&ct!==null?ct=Rr(ct):(ct=Hi(g)?Za:pi.current,ct=cu(h,ct));var ne=g.getDerivedStateFromProps;(Ut=typeof ne=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(et!==Gt||Vt!==ct)&&Nb(h,V,x,ct),Yo=!1,Vt=h.memoizedState,V.state=Vt,Qd(h,x,V,E);var oe=h.memoizedState;et!==Gt||Vt!==oe||Ui.current||Yo?(typeof ne=="function"&&(Fy(h,g,ne,x),oe=h.memoizedState),(Tt=Yo||Db(h,g,Tt,x,Vt,oe,ct)||!1)?(Ut||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(x,oe,ct),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(x,oe,ct)),typeof V.componentDidUpdate=="function"&&(h.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof V.componentDidUpdate!="function"||et===l.memoizedProps&&Vt===l.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||et===l.memoizedProps&&Vt===l.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=oe),V.props=x,V.state=oe,V.context=ct,x=Tt):(typeof V.componentDidUpdate!="function"||et===l.memoizedProps&&Vt===l.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||et===l.memoizedProps&&Vt===l.memoizedState||(h.flags|=1024),x=!1)}return Hy(l,h,g,x,C,E)}function Hy(l,h,g,x,E,C){$b(l,h);var V=(h.flags&128)!==0;if(!x&&!V)return E&&Jw(h,g,!1),ho(l,h,C);x=h.stateNode,oR.current=h;var et=V&&typeof g.getDerivedStateFromError!="function"?null:x.render();return h.flags|=1,l!==null&&V?(h.child=pu(h,l.child,null,C),h.child=pu(h,null,et,C)):Ii(l,h,et,C),h.memoizedState=x.state,E&&Jw(h,g,!0),h.child}function qb(l){var h=l.stateNode;h.pendingContext?Yw(l,h.pendingContext,h.pendingContext!==h.context):h.context&&Yw(l,h.context,!1),Ty(l,h.containerInfo)}function Xb(l,h,g,x,E){return du(),vy(E),h.flags|=256,Ii(l,h,g,x),h.child}var jy={dehydrated:null,treeContext:null,retryLane:0};function Wy(l){return{baseLanes:l,cachePool:null,transitions:null}}function Yb(l,h,g){var x=h.pendingProps,E=bn.current,C=!1,V=(h.flags&128)!==0,et;if((et=V)||(et=l!==null&&l.memoizedState===null?!1:(E&2)!==0),et?(C=!0,h.flags&=-129):(l===null||l.memoizedState!==null)&&(E|=1),on(bn,E&1),l===null)return yy(h),l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((h.mode&1)===0?h.lanes=1:l.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(V=x.children,l=x.fallback,C?(x=h.mode,C=h.child,V={mode:"hidden",children:V},(x&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=V):C=xp(V,x,0,null),l=il(l,x,g,null),C.return=h,l.return=h,C.sibling=l,h.child=C,h.child.memoizedState=Wy(g),h.memoizedState=jy,l):Gy(h,V));if(E=l.memoizedState,E!==null&&(et=E.dehydrated,et!==null))return aR(l,h,V,x,et,E,g);if(C){C=x.fallback,V=h.mode,E=l.child,et=E.sibling;var ct={mode:"hidden",children:x.children};return(V&1)===0&&h.child!==E?(x=h.child,x.childLanes=0,x.pendingProps=ct,h.deletions=null):(x=ia(E,ct),x.subtreeFlags=E.subtreeFlags&14680064),et!==null?C=ia(et,C):(C=il(C,V,g,null),C.flags|=2),C.return=h,x.return=h,x.sibling=C,h.child=x,x=C,C=h.child,V=l.child.memoizedState,V=V===null?Wy(g):{baseLanes:V.baseLanes|g,cachePool:null,transitions:V.transitions},C.memoizedState=V,C.childLanes=l.childLanes&~g,h.memoizedState=jy,x}return C=l.child,l=C.sibling,x=ia(C,{mode:"visible",children:x.children}),(h.mode&1)===0&&(x.lanes=g),x.return=h,x.sibling=null,l!==null&&(g=h.deletions,g===null?(h.deletions=[l],h.flags|=16):g.push(l)),h.child=x,h.memoizedState=null,x}function Gy(l,h){return h=xp({mode:"visible",children:h},l.mode,0,null),h.return=l,l.child=h}function ap(l,h,g,x){return x!==null&&vy(x),pu(h,l.child,null,g),l=Gy(h,h.pendingProps.children),l.flags|=2,h.memoizedState=null,l}function aR(l,h,g,x,E,C,V){if(g)return h.flags&256?(h.flags&=-257,x=By(Error(e(422))),ap(l,h,V,x)):h.memoizedState!==null?(h.child=l.child,h.flags|=128,null):(C=x.fallback,E=h.mode,x=xp({mode:"visible",children:x.children},E,0,null),C=il(C,E,V,null),C.flags|=2,x.return=h,C.return=h,x.sibling=C,h.child=x,(h.mode&1)!==0&&pu(h,l.child,null,V),h.child.memoizedState=Wy(V),h.memoizedState=jy,C);if((h.mode&1)===0)return ap(l,h,V,null);if(E.data==="$!"){if(x=E.nextSibling&&E.nextSibling.dataset,x)var et=x.dgst;return x=et,C=Error(e(419)),x=By(C,x,void 0),ap(l,h,V,x)}if(et=(V&l.childLanes)!==0,ji||et){if(x=qn,x!==null){switch(V&-V){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(x.suspendedLanes|V))!==0?0:E,E!==0&&E!==C.retryLane&&(C.retryLane=E,uo(l,E),ss(x,l,E,-1))}return av(),x=By(Error(e(421))),ap(l,h,V,x)}return E.data==="$?"?(h.flags|=128,h.child=l.child,h=xR.bind(null,l),E._reactRetry=h,null):(l=C.treeContext,dr=Ms(E.nextSibling),fr=h,gn=!0,es=null,l!==null&&(Lr[kr++]=ao,Lr[kr++]=lo,Lr[kr++]=qa,ao=l.id,lo=l.overflow,qa=h),h=Gy(h,x.children),h.flags|=4096,h)}function Kb(l,h,g){l.lanes|=h;var x=l.alternate;x!==null&&(x.lanes|=h),by(l.return,h,g)}function $y(l,h,g,x,E){var C=l.memoizedState;C===null?l.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:g,tailMode:E}:(C.isBackwards=h,C.rendering=null,C.renderingStartTime=0,C.last=x,C.tail=g,C.tailMode=E)}function Jb(l,h,g){var x=h.pendingProps,E=x.revealOrder,C=x.tail;if(Ii(l,h,x.children,g),x=bn.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=h.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Kb(l,g,h);else if(l.tag===19)Kb(l,g,h);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break t;for(;l.sibling===null;){if(l.return===null||l.return===h)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}if(on(bn,x),(h.mode&1)===0)h.memoizedState=null;else switch(E){case"forwards":for(g=h.child,E=null;g!==null;)l=g.alternate,l!==null&&tp(l)===null&&(E=g),g=g.sibling;g=E,g===null?(E=h.child,h.child=null):(E=g.sibling,g.sibling=null),$y(h,!1,E,g,C);break;case"backwards":for(g=null,E=h.child,h.child=null;E!==null;){if(l=E.alternate,l!==null&&tp(l)===null){h.child=E;break}l=E.sibling,E.sibling=g,g=E,E=l}$y(h,!0,g,null,C);break;case"together":$y(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function lp(l,h){(h.mode&1)===0&&l!==null&&(l.alternate=null,h.alternate=null,h.flags|=2)}function ho(l,h,g){if(l!==null&&(h.dependencies=l.dependencies),Qa|=h.lanes,(g&h.childLanes)===0)return null;if(l!==null&&h.child!==l.child)throw Error(e(153));if(h.child!==null){for(l=h.child,g=ia(l,l.pendingProps),h.child=g,g.return=h;l.sibling!==null;)l=l.sibling,g=g.sibling=ia(l,l.pendingProps),g.return=h;g.sibling=null}return h.child}function lR(l,h,g){switch(h.tag){case 3:qb(h),du();break;case 5:fb(h);break;case 1:Hi(h.type)&&Wd(h);break;case 4:Ty(h,h.stateNode.containerInfo);break;case 10:var x=h.type._context,E=h.memoizedProps.value;on(Yd,x._currentValue),x._currentValue=E;break;case 13:if(x=h.memoizedState,x!==null)return x.dehydrated!==null?(on(bn,bn.current&1),h.flags|=128,null):(g&h.child.childLanes)!==0?Yb(l,h,g):(on(bn,bn.current&1),l=ho(l,h,g),l!==null?l.sibling:null);on(bn,bn.current&1);break;case 19:if(x=(g&h.childLanes)!==0,(l.flags&128)!==0){if(x)return Jb(l,h,g);h.flags|=128}if(E=h.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),on(bn,bn.current),x)break;return null;case 22:case 23:return h.lanes=0,Gb(l,h,g)}return ho(l,h,g)}var Qb,Zy,tS,eS;Qb=function(l,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)l.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Zy=function(){},tS=function(l,h,g,x){var E=l.memoizedProps;if(E!==x){l=h.stateNode,Ka(Ts.current);var C=null;switch(g){case"input":E=Dt(l,E),x=Dt(l,x),C=[];break;case"select":E=F({},E,{value:void 0}),x=F({},x,{value:void 0}),C=[];break;case"textarea":E=Kt(l,E),x=Kt(l,x),C=[];break;default:typeof E.onClick!="function"&&typeof x.onClick=="function"&&(l.onclick=Nt)}ut(g,x);var V;g=null;for(Tt in E)if(!x.hasOwnProperty(Tt)&&E.hasOwnProperty(Tt)&&E[Tt]!=null)if(Tt==="style"){var et=E[Tt];for(V in et)et.hasOwnProperty(V)&&(g||(g={}),g[V]="")}else Tt!=="dangerouslySetInnerHTML"&&Tt!=="children"&&Tt!=="suppressContentEditableWarning"&&Tt!=="suppressHydrationWarning"&&Tt!=="autoFocus"&&(r.hasOwnProperty(Tt)?C||(C=[]):(C=C||[]).push(Tt,null));for(Tt in x){var ct=x[Tt];if(et=E?.[Tt],x.hasOwnProperty(Tt)&&ct!==et&&(ct!=null||et!=null))if(Tt==="style")if(et){for(V in et)!et.hasOwnProperty(V)||ct&&ct.hasOwnProperty(V)||(g||(g={}),g[V]="");for(V in ct)ct.hasOwnProperty(V)&&et[V]!==ct[V]&&(g||(g={}),g[V]=ct[V])}else g||(C||(C=[]),C.push(Tt,g)),g=ct;else Tt==="dangerouslySetInnerHTML"?(ct=ct?ct.__html:void 0,et=et?et.__html:void 0,ct!=null&&et!==ct&&(C=C||[]).push(Tt,ct)):Tt==="children"?typeof ct!="string"&&typeof ct!="number"||(C=C||[]).push(Tt,""+ct):Tt!=="suppressContentEditableWarning"&&Tt!=="suppressHydrationWarning"&&(r.hasOwnProperty(Tt)?(ct!=null&&Tt==="onScroll"&&Je("scroll",l),C||et===ct||(C=[])):(C=C||[]).push(Tt,ct))}g&&(C=C||[]).push("style",g);var Tt=C;(h.updateQueue=Tt)&&(h.flags|=4)}},eS=function(l,h,g,x){g!==x&&(h.flags|=4)};function Th(l,h){if(!gn)switch(l.tailMode){case"hidden":h=l.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?h||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function gi(l){var h=l.alternate!==null&&l.alternate.child===l.child,g=0,x=0;if(h)for(var E=l.child;E!==null;)g|=E.lanes|E.childLanes,x|=E.subtreeFlags&14680064,x|=E.flags&14680064,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)g|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=x,l.childLanes=g,h}function uR(l,h,g){var x=h.pendingProps;switch(my(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(h),null;case 1:return Hi(h.type)&&jd(),gi(h),null;case 3:return x=h.stateNode,yu(),fn(Ui),fn(pi),Cy(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(l===null||l.child===null)&&(qd(h)?h.flags|=4:l===null||l.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,es!==null&&(rv(es),es=null))),Zy(l,h),gi(h),null;case 5:Ey(h);var E=Ka(xh.current);if(g=h.type,l!==null&&h.stateNode!=null)tS(l,h,g,x,E),l.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!x){if(h.stateNode===null)throw Error(e(166));return gi(h),null}if(l=Ka(Ts.current),qd(h)){x=h.stateNode,g=h.type;var C=h.memoizedProps;switch(x[Ar]=h,x[Go]=C,l=(h.mode&1)!==0,g){case"dialog":Je("cancel",x),Je("close",x);break;case"iframe":case"object":case"embed":Je("load",x);break;case"video":case"audio":for(E=0;E<Ho.length;E++)Je(Ho[E],x);break;case"source":Je("error",x);break;case"img":case"image":case"link":Je("error",x),Je("load",x);break;case"details":Je("toggle",x);break;case"input":Wt(x,C),Je("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!C.multiple},Je("invalid",x);break;case"textarea":re(x,C),Je("invalid",x)}ut(g,C),E=null;for(var V in C)if(C.hasOwnProperty(V)){var et=C[V];V==="children"?typeof et=="string"?x.textContent!==et&&(C.suppressHydrationWarning!==!0&&Mt(x.textContent,et,l),E=["children",et]):typeof et=="number"&&x.textContent!==""+et&&(C.suppressHydrationWarning!==!0&&Mt(x.textContent,et,l),E=["children",""+et]):r.hasOwnProperty(V)&&et!=null&&V==="onScroll"&&Je("scroll",x)}switch(g){case"input":jt(x),$(x,C,!0);break;case"textarea":jt(x),se(x);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(x.onclick=Nt)}x=E,h.updateQueue=x,x!==null&&(h.flags|=4)}else{V=E.nodeType===9?E:E.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=ft(g)),l==="http://www.w3.org/1999/xhtml"?g==="script"?(l=V.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof x.is=="string"?l=V.createElement(g,{is:x.is}):(l=V.createElement(g),g==="select"&&(V=l,x.multiple?V.multiple=!0:x.size&&(V.size=x.size))):l=V.createElementNS(l,g),l[Ar]=h,l[Go]=x,Qb(l,h,!1,!1),h.stateNode=l;t:{switch(V=Bt(g,x),g){case"dialog":Je("cancel",l),Je("close",l),E=x;break;case"iframe":case"object":case"embed":Je("load",l),E=x;break;case"video":case"audio":for(E=0;E<Ho.length;E++)Je(Ho[E],l);E=x;break;case"source":Je("error",l),E=x;break;case"img":case"image":case"link":Je("error",l),Je("load",l),E=x;break;case"details":Je("toggle",l),E=x;break;case"input":Wt(l,x),E=Dt(l,x),Je("invalid",l);break;case"option":E=x;break;case"select":l._wrapperState={wasMultiple:!!x.multiple},E=F({},x,{value:void 0}),Je("invalid",l);break;case"textarea":re(l,x),E=Kt(l,x),Je("invalid",l);break;default:E=x}ut(g,E),et=E;for(C in et)if(et.hasOwnProperty(C)){var ct=et[C];C==="style"?Fe(l,ct):C==="dangerouslySetInnerHTML"?(ct=ct?ct.__html:void 0,ct!=null&&St(l,ct)):C==="children"?typeof ct=="string"?(g!=="textarea"||ct!=="")&&zt(l,ct):typeof ct=="number"&&zt(l,""+ct):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(r.hasOwnProperty(C)?ct!=null&&C==="onScroll"&&Je("scroll",l):ct!=null&&R(l,C,ct,V))}switch(g){case"input":jt(l),$(l,x,!1);break;case"textarea":jt(l),se(l);break;case"option":x.value!=null&&l.setAttribute("value",""+At(x.value));break;case"select":l.multiple=!!x.multiple,C=x.value,C!=null?$t(l,!!x.multiple,C,!1):x.defaultValue!=null&&$t(l,!!x.multiple,x.defaultValue,!0);break;default:typeof E.onClick=="function"&&(l.onclick=Nt)}switch(g){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break t;case"img":x=!0;break t;default:x=!1}}x&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return gi(h),null;case 6:if(l&&h.stateNode!=null)eS(l,h,l.memoizedProps,x);else{if(typeof x!="string"&&h.stateNode===null)throw Error(e(166));if(g=Ka(xh.current),Ka(Ts.current),qd(h)){if(x=h.stateNode,g=h.memoizedProps,x[Ar]=h,(C=x.nodeValue!==g)&&(l=fr,l!==null))switch(l.tag){case 3:Mt(x.nodeValue,g,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Mt(x.nodeValue,g,(l.mode&1)!==0)}C&&(h.flags|=4)}else x=(g.nodeType===9?g:g.ownerDocument).createTextNode(x),x[Ar]=h,h.stateNode=x}return gi(h),null;case 13:if(fn(bn),x=h.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(gn&&dr!==null&&(h.mode&1)!==0&&(h.flags&128)===0)rb(),du(),h.flags|=98560,C=!1;else if(C=qd(h),x!==null&&x.dehydrated!==null){if(l===null){if(!C)throw Error(e(318));if(C=h.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(e(317));C[Ar]=h}else du(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;gi(h),C=!1}else es!==null&&(rv(es),es=null),C=!0;if(!C)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=g,h):(x=x!==null,x!==(l!==null&&l.memoizedState!==null)&&x&&(h.child.flags|=8192,(h.mode&1)!==0&&(l===null||(bn.current&1)!==0?Hn===0&&(Hn=3):av())),h.updateQueue!==null&&(h.flags|=4),gi(h),null);case 4:return yu(),Zy(l,h),l===null&&jo(h.stateNode.containerInfo),gi(h),null;case 10:return wy(h.type._context),gi(h),null;case 17:return Hi(h.type)&&jd(),gi(h),null;case 19:if(fn(bn),C=h.memoizedState,C===null)return gi(h),null;if(x=(h.flags&128)!==0,V=C.rendering,V===null)if(x)Th(C,!1);else{if(Hn!==0||l!==null&&(l.flags&128)!==0)for(l=h.child;l!==null;){if(V=tp(l),V!==null){for(h.flags|=128,Th(C,!1),x=V.updateQueue,x!==null&&(h.updateQueue=x,h.flags|=4),h.subtreeFlags=0,x=g,g=h.child;g!==null;)C=g,l=x,C.flags&=14680066,V=C.alternate,V===null?(C.childLanes=0,C.lanes=l,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=V.childLanes,C.lanes=V.lanes,C.child=V.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=V.memoizedProps,C.memoizedState=V.memoizedState,C.updateQueue=V.updateQueue,C.type=V.type,l=V.dependencies,C.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),g=g.sibling;return on(bn,bn.current&1|2),h.child}l=l.sibling}C.tail!==null&&je()>wu&&(h.flags|=128,x=!0,Th(C,!1),h.lanes=4194304)}else{if(!x)if(l=tp(V),l!==null){if(h.flags|=128,x=!0,g=l.updateQueue,g!==null&&(h.updateQueue=g,h.flags|=4),Th(C,!0),C.tail===null&&C.tailMode==="hidden"&&!V.alternate&&!gn)return gi(h),null}else 2*je()-C.renderingStartTime>wu&&g!==1073741824&&(h.flags|=128,x=!0,Th(C,!1),h.lanes=4194304);C.isBackwards?(V.sibling=h.child,h.child=V):(g=C.last,g!==null?g.sibling=V:h.child=V,C.last=V)}return C.tail!==null?(h=C.tail,C.rendering=h,C.tail=h.sibling,C.renderingStartTime=je(),h.sibling=null,g=bn.current,on(bn,x?g&1|2:g&1),h):(gi(h),null);case 22:case 23:return ov(),x=h.memoizedState!==null,l!==null&&l.memoizedState!==null!==x&&(h.flags|=8192),x&&(h.mode&1)!==0?(pr&1073741824)!==0&&(gi(h),h.subtreeFlags&6&&(h.flags|=8192)):gi(h),null;case 24:return null;case 25:return null}throw Error(e(156,h.tag))}function cR(l,h){switch(my(h),h.tag){case 1:return Hi(h.type)&&jd(),l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 3:return yu(),fn(Ui),fn(pi),Cy(),l=h.flags,(l&65536)!==0&&(l&128)===0?(h.flags=l&-65537|128,h):null;case 5:return Ey(h),null;case 13:if(fn(bn),l=h.memoizedState,l!==null&&l.dehydrated!==null){if(h.alternate===null)throw Error(e(340));du()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 19:return fn(bn),null;case 4:return yu(),null;case 10:return wy(h.type._context),null;case 22:case 23:return ov(),null;case 24:return null;default:return null}}var up=!1,yi=!1,hR=typeof WeakSet=="function"?WeakSet:Set,ie=null;function _u(l,h){var g=l.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(x){Cn(l,h,x)}else g.current=null}function qy(l,h,g){try{g()}catch(x){Cn(l,h,x)}}var nS=!1;function fR(l,h){if(te=Ba,l=lh(),uh(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else t:{g=(g=l.ownerDocument)&&g.defaultView||window;var x=g.getSelection&&g.getSelection();if(x&&x.rangeCount!==0){g=x.anchorNode;var E=x.anchorOffset,C=x.focusNode;x=x.focusOffset;try{g.nodeType,C.nodeType}catch{g=null;break t}var V=0,et=-1,ct=-1,Tt=0,Ut=0,Gt=l,Vt=null;e:for(;;){for(var ne;Gt!==g||E!==0&&Gt.nodeType!==3||(et=V+E),Gt!==C||x!==0&&Gt.nodeType!==3||(ct=V+x),Gt.nodeType===3&&(V+=Gt.nodeValue.length),(ne=Gt.firstChild)!==null;)Vt=Gt,Gt=ne;for(;;){if(Gt===l)break e;if(Vt===g&&++Tt===E&&(et=V),Vt===C&&++Ut===x&&(ct=V),(ne=Gt.nextSibling)!==null)break;Gt=Vt,Vt=Gt.parentNode}Gt=ne}g=et===-1||ct===-1?null:{start:et,end:ct}}else g=null}g=g||{start:0,end:0}}else g=null;for(de={focusedElem:l,selectionRange:g},Ba=!1,ie=h;ie!==null;)if(h=ie,l=h.child,(h.subtreeFlags&1028)!==0&&l!==null)l.return=h,ie=l;else for(;ie!==null;){h=ie;try{var oe=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ae=oe.memoizedProps,kn=oe.memoizedState,vt=h.stateNode,dt=vt.getSnapshotBeforeUpdate(h.elementType===h.type?ae:ns(h.type,ae),kn);vt.__reactInternalSnapshotBeforeUpdate=dt}break;case 3:var xt=h.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(Yt){Cn(h,h.return,Yt)}if(l=h.sibling,l!==null){l.return=h.return,ie=l;break}ie=h.return}return oe=nS,nS=!1,oe}function Eh(l,h,g){var x=h.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var E=x=x.next;do{if((E.tag&l)===l){var C=E.destroy;E.destroy=void 0,C!==void 0&&qy(h,g,C)}E=E.next}while(E!==x)}}function cp(l,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&l)===l){var x=g.create;g.destroy=x()}g=g.next}while(g!==h)}}function Xy(l){var h=l.ref;if(h!==null){var g=l.stateNode;switch(l.tag){case 5:l=g;break;default:l=g}typeof h=="function"?h(l):h.current=l}}function iS(l){var h=l.alternate;h!==null&&(l.alternate=null,iS(h)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(h=l.stateNode,h!==null&&(delete h[Ar],delete h[Go],delete h[$o],delete h[cy],delete h[hy])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function rS(l){return l.tag===5||l.tag===3||l.tag===4}function sS(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||rS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Yy(l,h,g){var x=l.tag;if(x===5||x===6)l=l.stateNode,h?g.nodeType===8?g.parentNode.insertBefore(l,h):g.insertBefore(l,h):(g.nodeType===8?(h=g.parentNode,h.insertBefore(l,g)):(h=g,h.appendChild(l)),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=Nt));else if(x!==4&&(l=l.child,l!==null))for(Yy(l,h,g),l=l.sibling;l!==null;)Yy(l,h,g),l=l.sibling}function Ky(l,h,g){var x=l.tag;if(x===5||x===6)l=l.stateNode,h?g.insertBefore(l,h):g.appendChild(l);else if(x!==4&&(l=l.child,l!==null))for(Ky(l,h,g),l=l.sibling;l!==null;)Ky(l,h,g),l=l.sibling}var ii=null,is=!1;function Jo(l,h,g){for(g=g.child;g!==null;)oS(l,h,g),g=g.sibling}function oS(l,h,g){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(Ia,g)}catch{}switch(g.tag){case 5:yi||_u(g,h);case 6:var x=ii,E=is;ii=null,Jo(l,h,g),ii=x,is=E,ii!==null&&(is?(l=ii,g=g.stateNode,l.nodeType===8?l.parentNode.removeChild(g):l.removeChild(g)):ii.removeChild(g.stateNode));break;case 18:ii!==null&&(is?(l=ii,g=g.stateNode,l.nodeType===8?gh(l.parentNode,g):l.nodeType===1&&gh(l,g),ar(l)):gh(ii,g.stateNode));break;case 4:x=ii,E=is,ii=g.stateNode.containerInfo,is=!0,Jo(l,h,g),ii=x,is=E;break;case 0:case 11:case 14:case 15:if(!yi&&(x=g.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){E=x=x.next;do{var C=E,V=C.destroy;C=C.tag,V!==void 0&&((C&2)!==0||(C&4)!==0)&&qy(g,h,V),E=E.next}while(E!==x)}Jo(l,h,g);break;case 1:if(!yi&&(_u(g,h),x=g.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=g.memoizedProps,x.state=g.memoizedState,x.componentWillUnmount()}catch(et){Cn(g,h,et)}Jo(l,h,g);break;case 21:Jo(l,h,g);break;case 22:g.mode&1?(yi=(x=yi)||g.memoizedState!==null,Jo(l,h,g),yi=x):Jo(l,h,g);break;default:Jo(l,h,g)}}function aS(l){var h=l.updateQueue;if(h!==null){l.updateQueue=null;var g=l.stateNode;g===null&&(g=l.stateNode=new hR),h.forEach(function(x){var E=wR.bind(null,l,x);g.has(x)||(g.add(x),x.then(E,E))})}}function rs(l,h){var g=h.deletions;if(g!==null)for(var x=0;x<g.length;x++){var E=g[x];try{var C=l,V=h,et=V;t:for(;et!==null;){switch(et.tag){case 5:ii=et.stateNode,is=!1;break t;case 3:ii=et.stateNode.containerInfo,is=!0;break t;case 4:ii=et.stateNode.containerInfo,is=!0;break t}et=et.return}if(ii===null)throw Error(e(160));oS(C,V,E),ii=null,is=!1;var ct=E.alternate;ct!==null&&(ct.return=null),E.return=null}catch(Tt){Cn(E,h,Tt)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)lS(h,l),h=h.sibling}function lS(l,h){var g=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(rs(h,l),Ps(l),x&4){try{Eh(3,l,l.return),cp(3,l)}catch(ae){Cn(l,l.return,ae)}try{Eh(5,l,l.return)}catch(ae){Cn(l,l.return,ae)}}break;case 1:rs(h,l),Ps(l),x&512&&g!==null&&_u(g,g.return);break;case 5:if(rs(h,l),Ps(l),x&512&&g!==null&&_u(g,g.return),l.flags&32){var E=l.stateNode;try{zt(E,"")}catch(ae){Cn(l,l.return,ae)}}if(x&4&&(E=l.stateNode,E!=null)){var C=l.memoizedProps,V=g!==null?g.memoizedProps:C,et=l.type,ct=l.updateQueue;if(l.updateQueue=null,ct!==null)try{et==="input"&&C.type==="radio"&&C.name!=null&&It(E,C),Bt(et,V);var Tt=Bt(et,C);for(V=0;V<ct.length;V+=2){var Ut=ct[V],Gt=ct[V+1];Ut==="style"?Fe(E,Gt):Ut==="dangerouslySetInnerHTML"?St(E,Gt):Ut==="children"?zt(E,Gt):R(E,Ut,Gt,Tt)}switch(et){case"input":X(E,C);break;case"textarea":Jt(E,C);break;case"select":var Vt=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!C.multiple;var ne=C.value;ne!=null?$t(E,!!C.multiple,ne,!1):Vt!==!!C.multiple&&(C.defaultValue!=null?$t(E,!!C.multiple,C.defaultValue,!0):$t(E,!!C.multiple,C.multiple?[]:"",!1))}E[Go]=C}catch(ae){Cn(l,l.return,ae)}}break;case 6:if(rs(h,l),Ps(l),x&4){if(l.stateNode===null)throw Error(e(162));E=l.stateNode,C=l.memoizedProps;try{E.nodeValue=C}catch(ae){Cn(l,l.return,ae)}}break;case 3:if(rs(h,l),Ps(l),x&4&&g!==null&&g.memoizedState.isDehydrated)try{ar(h.containerInfo)}catch(ae){Cn(l,l.return,ae)}break;case 4:rs(h,l),Ps(l);break;case 13:rs(h,l),Ps(l),E=l.child,E.flags&8192&&(C=E.memoizedState!==null,E.stateNode.isHidden=C,!C||E.alternate!==null&&E.alternate.memoizedState!==null||(tv=je())),x&4&&aS(l);break;case 22:if(Ut=g!==null&&g.memoizedState!==null,l.mode&1?(yi=(Tt=yi)||Ut,rs(h,l),yi=Tt):rs(h,l),Ps(l),x&8192){if(Tt=l.memoizedState!==null,(l.stateNode.isHidden=Tt)&&!Ut&&(l.mode&1)!==0)for(ie=l,Ut=l.child;Ut!==null;){for(Gt=ie=Ut;ie!==null;){switch(Vt=ie,ne=Vt.child,Vt.tag){case 0:case 11:case 14:case 15:Eh(4,Vt,Vt.return);break;case 1:_u(Vt,Vt.return);var oe=Vt.stateNode;if(typeof oe.componentWillUnmount=="function"){x=Vt,g=Vt.return;try{h=x,oe.props=h.memoizedProps,oe.state=h.memoizedState,oe.componentWillUnmount()}catch(ae){Cn(x,g,ae)}}break;case 5:_u(Vt,Vt.return);break;case 22:if(Vt.memoizedState!==null){hS(Gt);continue}}ne!==null?(ne.return=Vt,ie=ne):hS(Gt)}Ut=Ut.sibling}t:for(Ut=null,Gt=l;;){if(Gt.tag===5){if(Ut===null){Ut=Gt;try{E=Gt.stateNode,Tt?(C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(et=Gt.stateNode,ct=Gt.memoizedProps.style,V=ct!=null&&ct.hasOwnProperty("display")?ct.display:null,et.style.display=ke("display",V))}catch(ae){Cn(l,l.return,ae)}}}else if(Gt.tag===6){if(Ut===null)try{Gt.stateNode.nodeValue=Tt?"":Gt.memoizedProps}catch(ae){Cn(l,l.return,ae)}}else if((Gt.tag!==22&&Gt.tag!==23||Gt.memoizedState===null||Gt===l)&&Gt.child!==null){Gt.child.return=Gt,Gt=Gt.child;continue}if(Gt===l)break t;for(;Gt.sibling===null;){if(Gt.return===null||Gt.return===l)break t;Ut===Gt&&(Ut=null),Gt=Gt.return}Ut===Gt&&(Ut=null),Gt.sibling.return=Gt.return,Gt=Gt.sibling}}break;case 19:rs(h,l),Ps(l),x&4&&aS(l);break;case 21:break;default:rs(h,l),Ps(l)}}function Ps(l){var h=l.flags;if(h&2){try{t:{for(var g=l.return;g!==null;){if(rS(g)){var x=g;break t}g=g.return}throw Error(e(160))}switch(x.tag){case 5:var E=x.stateNode;x.flags&32&&(zt(E,""),x.flags&=-33);var C=sS(l);Ky(l,C,E);break;case 3:case 4:var V=x.stateNode.containerInfo,et=sS(l);Yy(l,et,V);break;default:throw Error(e(161))}}catch(ct){Cn(l,l.return,ct)}l.flags&=-3}h&4096&&(l.flags&=-4097)}function dR(l,h,g){ie=l,uS(l)}function uS(l,h,g){for(var x=(l.mode&1)!==0;ie!==null;){var E=ie,C=E.child;if(E.tag===22&&x){var V=E.memoizedState!==null||up;if(!V){var et=E.alternate,ct=et!==null&&et.memoizedState!==null||yi;et=up;var Tt=yi;if(up=V,(yi=ct)&&!Tt)for(ie=E;ie!==null;)V=ie,ct=V.child,V.tag===22&&V.memoizedState!==null?fS(E):ct!==null?(ct.return=V,ie=ct):fS(E);for(;C!==null;)ie=C,uS(C),C=C.sibling;ie=E,up=et,yi=Tt}cS(l)}else(E.subtreeFlags&8772)!==0&&C!==null?(C.return=E,ie=C):cS(l)}}function cS(l){for(;ie!==null;){var h=ie;if((h.flags&8772)!==0){var g=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:yi||cp(5,h);break;case 1:var x=h.stateNode;if(h.flags&4&&!yi)if(g===null)x.componentDidMount();else{var E=h.elementType===h.type?g.memoizedProps:ns(h.type,g.memoizedProps);x.componentDidUpdate(E,g.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var C=h.updateQueue;C!==null&&hb(h,C,x);break;case 3:var V=h.updateQueue;if(V!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=h.child.stateNode;break;case 1:g=h.child.stateNode}hb(h,V,g)}break;case 5:var et=h.stateNode;if(g===null&&h.flags&4){g=et;var ct=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ct.autoFocus&&g.focus();break;case"img":ct.src&&(g.src=ct.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Tt=h.alternate;if(Tt!==null){var Ut=Tt.memoizedState;if(Ut!==null){var Gt=Ut.dehydrated;Gt!==null&&ar(Gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}yi||h.flags&512&&Xy(h)}catch(Vt){Cn(h,h.return,Vt)}}if(h===l){ie=null;break}if(g=h.sibling,g!==null){g.return=h.return,ie=g;break}ie=h.return}}function hS(l){for(;ie!==null;){var h=ie;if(h===l){ie=null;break}var g=h.sibling;if(g!==null){g.return=h.return,ie=g;break}ie=h.return}}function fS(l){for(;ie!==null;){var h=ie;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{cp(4,h)}catch(ct){Cn(h,g,ct)}break;case 1:var x=h.stateNode;if(typeof x.componentDidMount=="function"){var E=h.return;try{x.componentDidMount()}catch(ct){Cn(h,E,ct)}}var C=h.return;try{Xy(h)}catch(ct){Cn(h,C,ct)}break;case 5:var V=h.return;try{Xy(h)}catch(ct){Cn(h,V,ct)}}}catch(ct){Cn(h,h.return,ct)}if(h===l){ie=null;break}var et=h.sibling;if(et!==null){et.return=h.return,ie=et;break}ie=h.return}}var pR=Math.ceil,hp=O.ReactCurrentDispatcher,Jy=O.ReactCurrentOwner,Dr=O.ReactCurrentBatchConfig,Ue=0,qn=null,Nn=null,ri=0,pr=0,xu=Zo(0),Hn=0,Ph=null,Qa=0,fp=0,Qy=0,Ch=null,Wi=null,tv=0,wu=1/0,fo=null,dp=!1,ev=null,Qo=null,pp=!1,ta=null,mp=0,Ah=0,nv=null,gp=-1,yp=0;function Di(){return(Ue&6)!==0?je():gp!==-1?gp:gp=je()}function ea(l){return(l.mode&1)===0?1:(Ue&2)!==0&&ri!==0?ri&-ri:K2.transition!==null?(yp===0&&(yp=xd()),yp):(l=Be,l!==0||(l=window.event,l=l===void 0?16:Oe(l.type)),l)}function ss(l,h,g,x){if(50<Ah)throw Ah=0,nv=null,Error(e(185));sr(l,g,x),((Ue&2)===0||l!==qn)&&(l===qn&&((Ue&2)===0&&(fp|=g),Hn===4&&na(l,ri)),Gi(l,x),g===1&&Ue===0&&(h.mode&1)===0&&(wu=je()+500,Gd&&Xo()))}function Gi(l,h){var g=l.callbackNode;Ul(l,h);var x=sn(l,l===qn?ri:0);if(x===0)g!==null&&rn(g),l.callbackNode=null,l.callbackPriority=0;else if(h=x&-x,l.callbackPriority!==h){if(g!=null&&rn(g),h===1)l.tag===0?Y2(pS.bind(null,l)):Qw(pS.bind(null,l)),di(function(){(Ue&6)===0&&Xo()}),g=null;else{switch(Lo(x)){case 1:g=pn;break;case 4:g=Ai;break;case 16:g=mn;break;case 536870912:g=Eo;break;default:g=mn}g=bS(g,dS.bind(null,l))}l.callbackPriority=h,l.callbackNode=g}}function dS(l,h){if(gp=-1,yp=0,(Ue&6)!==0)throw Error(e(327));var g=l.callbackNode;if(bu()&&l.callbackNode!==g)return null;var x=sn(l,l===qn?ri:0);if(x===0)return null;if((x&30)!==0||(x&l.expiredLanes)!==0||h)h=vp(l,x);else{h=x;var E=Ue;Ue|=2;var C=gS();(qn!==l||ri!==h)&&(fo=null,wu=je()+500,el(l,h));do try{yR();break}catch(et){mS(l,et)}while(!0);xy(),hp.current=C,Ue=E,Nn!==null?h=0:(qn=null,ri=0,h=Hn)}if(h!==0){if(h===2&&(E=hi(l),E!==0&&(x=E,h=iv(l,E))),h===1)throw g=Ph,el(l,0),na(l,x),Gi(l,je()),g;if(h===6)na(l,x);else{if(E=l.current.alternate,(x&30)===0&&!mR(E)&&(h=vp(l,x),h===2&&(C=hi(l),C!==0&&(x=C,h=iv(l,C))),h===1))throw g=Ph,el(l,0),na(l,x),Gi(l,je()),g;switch(l.finishedWork=E,l.finishedLanes=x,h){case 0:case 1:throw Error(e(345));case 2:nl(l,Wi,fo);break;case 3:if(na(l,x),(x&130023424)===x&&(h=tv+500-je(),10<h)){if(sn(l,0)!==0)break;if(E=l.suspendedLanes,(E&x)!==x){Di(),l.pingedLanes|=l.suspendedLanes&E;break}l.timeoutHandle=Vn(nl.bind(null,l,Wi,fo),h);break}nl(l,Wi,fo);break;case 4:if(na(l,x),(x&4194240)===x)break;for(h=l.eventTimes,E=-1;0<x;){var V=31-Ee(x);C=1<<V,V=h[V],V>E&&(E=V),x&=~C}if(x=E,x=je()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*pR(x/1960))-x,10<x){l.timeoutHandle=Vn(nl.bind(null,l,Wi,fo),x);break}nl(l,Wi,fo);break;case 5:nl(l,Wi,fo);break;default:throw Error(e(329))}}}return Gi(l,je()),l.callbackNode===g?dS.bind(null,l):null}function iv(l,h){var g=Ch;return l.current.memoizedState.isDehydrated&&(el(l,h).flags|=256),l=vp(l,h),l!==2&&(h=Wi,Wi=g,h!==null&&rv(h)),l}function rv(l){Wi===null?Wi=l:Wi.push.apply(Wi,l)}function mR(l){for(var h=l;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var x=0;x<g.length;x++){var E=g[x],C=E.getSnapshot;E=E.value;try{if(!cr(C(),E))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function na(l,h){for(h&=~Qy,h&=~fp,l.suspendedLanes|=h,l.pingedLanes&=~h,l=l.expirationTimes;0<h;){var g=31-Ee(h),x=1<<g;l[g]=-1,h&=~x}}function pS(l){if((Ue&6)!==0)throw Error(e(327));bu();var h=sn(l,0);if((h&1)===0)return Gi(l,je()),null;var g=vp(l,h);if(l.tag!==0&&g===2){var x=hi(l);x!==0&&(h=x,g=iv(l,x))}if(g===1)throw g=Ph,el(l,0),na(l,h),Gi(l,je()),g;if(g===6)throw Error(e(345));return l.finishedWork=l.current.alternate,l.finishedLanes=h,nl(l,Wi,fo),Gi(l,je()),null}function sv(l,h){var g=Ue;Ue|=1;try{return l(h)}finally{Ue=g,Ue===0&&(wu=je()+500,Gd&&Xo())}}function tl(l){ta!==null&&ta.tag===0&&(Ue&6)===0&&bu();var h=Ue;Ue|=1;var g=Dr.transition,x=Be;try{if(Dr.transition=null,Be=1,l)return l()}finally{Be=x,Dr.transition=g,Ue=h,(Ue&6)===0&&Xo()}}function ov(){pr=xu.current,fn(xu)}function el(l,h){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;if(g!==-1&&(l.timeoutHandle=-1,On(g)),Nn!==null)for(g=Nn.return;g!==null;){var x=g;switch(my(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&jd();break;case 3:yu(),fn(Ui),fn(pi),Cy();break;case 5:Ey(x);break;case 4:yu();break;case 13:fn(bn);break;case 19:fn(bn);break;case 10:wy(x.type._context);break;case 22:case 23:ov()}g=g.return}if(qn=l,Nn=l=ia(l.current,null),ri=pr=h,Hn=0,Ph=null,Qy=fp=Qa=0,Wi=Ch=null,Ya!==null){for(h=0;h<Ya.length;h++)if(g=Ya[h],x=g.interleaved,x!==null){g.interleaved=null;var E=x.next,C=g.pending;if(C!==null){var V=C.next;C.next=E,x.next=V}g.pending=x}Ya=null}return l}function mS(l,h){do{var g=Nn;try{if(xy(),ep.current=sp,np){for(var x=Sn.memoizedState;x!==null;){var E=x.queue;E!==null&&(E.pending=null),x=x.next}np=!1}if(Ja=0,Zn=Un=Sn=null,wh=!1,bh=0,Jy.current=null,g===null||g.return===null){Hn=1,Ph=h,Nn=null;break}t:{var C=l,V=g.return,et=g,ct=h;if(h=ri,et.flags|=32768,ct!==null&&typeof ct=="object"&&typeof ct.then=="function"){var Tt=ct,Ut=et,Gt=Ut.tag;if((Ut.mode&1)===0&&(Gt===0||Gt===11||Gt===15)){var Vt=Ut.alternate;Vt?(Ut.updateQueue=Vt.updateQueue,Ut.memoizedState=Vt.memoizedState,Ut.lanes=Vt.lanes):(Ut.updateQueue=null,Ut.memoizedState=null)}var ne=Vb(V);if(ne!==null){ne.flags&=-257,Ub(ne,V,et,C,h),ne.mode&1&&Bb(C,Tt,h),h=ne,ct=Tt;var oe=h.updateQueue;if(oe===null){var ae=new Set;ae.add(ct),h.updateQueue=ae}else oe.add(ct);break t}else{if((h&1)===0){Bb(C,Tt,h),av();break t}ct=Error(e(426))}}else if(gn&&et.mode&1){var kn=Vb(V);if(kn!==null){(kn.flags&65536)===0&&(kn.flags|=256),Ub(kn,V,et,C,h),vy(vu(ct,et));break t}}C=ct=vu(ct,et),Hn!==4&&(Hn=2),Ch===null?Ch=[C]:Ch.push(C),C=V;do{switch(C.tag){case 3:C.flags|=65536,h&=-h,C.lanes|=h;var vt=Fb(C,ct,h);cb(C,vt);break t;case 1:et=ct;var dt=C.type,xt=C.stateNode;if((C.flags&128)===0&&(typeof dt.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(Qo===null||!Qo.has(xt)))){C.flags|=65536,h&=-h,C.lanes|=h;var Yt=zb(C,et,h);cb(C,Yt);break t}}C=C.return}while(C!==null)}vS(g)}catch(ce){h=ce,Nn===g&&g!==null&&(Nn=g=g.return);continue}break}while(!0)}function gS(){var l=hp.current;return hp.current=sp,l===null?sp:l}function av(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),qn===null||(Qa&268435455)===0&&(fp&268435455)===0||na(qn,ri)}function vp(l,h){var g=Ue;Ue|=2;var x=gS();(qn!==l||ri!==h)&&(fo=null,el(l,h));do try{gR();break}catch(E){mS(l,E)}while(!0);if(xy(),Ue=g,hp.current=x,Nn!==null)throw Error(e(261));return qn=null,ri=0,Hn}function gR(){for(;Nn!==null;)yS(Nn)}function yR(){for(;Nn!==null&&!br();)yS(Nn)}function yS(l){var h=wS(l.alternate,l,pr);l.memoizedProps=l.pendingProps,h===null?vS(l):Nn=h,Jy.current=null}function vS(l){var h=l;do{var g=h.alternate;if(l=h.return,(h.flags&32768)===0){if(g=uR(g,h,pr),g!==null){Nn=g;return}}else{if(g=cR(g,h),g!==null){g.flags&=32767,Nn=g;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Hn=6,Nn=null;return}}if(h=h.sibling,h!==null){Nn=h;return}Nn=h=l}while(h!==null);Hn===0&&(Hn=5)}function nl(l,h,g){var x=Be,E=Dr.transition;try{Dr.transition=null,Be=1,vR(l,h,g,x)}finally{Dr.transition=E,Be=x}return null}function vR(l,h,g,x){do bu();while(ta!==null);if((Ue&6)!==0)throw Error(e(327));g=l.finishedWork;var E=l.finishedLanes;if(g===null)return null;if(l.finishedWork=null,l.finishedLanes=0,g===l.current)throw Error(e(177));l.callbackNode=null,l.callbackPriority=0;var C=g.lanes|g.childLanes;if(Pn(l,C),l===qn&&(Nn=qn=null,ri=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||pp||(pp=!0,bS(mn,function(){return bu(),null})),C=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||C){C=Dr.transition,Dr.transition=null;var V=Be;Be=1;var et=Ue;Ue|=4,Jy.current=null,fR(l,g),lS(g,l),Pr(de),Ba=!!te,de=te=null,l.current=g,dR(g),$n(),Ue=et,Be=V,Dr.transition=C}else l.current=g;if(pp&&(pp=!1,ta=l,mp=E),C=l.pendingLanes,C===0&&(Qo=null),Da(g.stateNode),Gi(l,je()),h!==null)for(x=l.onRecoverableError,g=0;g<h.length;g++)E=h[g],x(E.value,{componentStack:E.stack,digest:E.digest});if(dp)throw dp=!1,l=ev,ev=null,l;return(mp&1)!==0&&l.tag!==0&&bu(),C=l.pendingLanes,(C&1)!==0?l===nv?Ah++:(Ah=0,nv=l):Ah=0,Xo(),null}function bu(){if(ta!==null){var l=Lo(mp),h=Dr.transition,g=Be;try{if(Dr.transition=null,Be=16>l?16:l,ta===null)var x=!1;else{if(l=ta,ta=null,mp=0,(Ue&6)!==0)throw Error(e(331));var E=Ue;for(Ue|=4,ie=l.current;ie!==null;){var C=ie,V=C.child;if((ie.flags&16)!==0){var et=C.deletions;if(et!==null){for(var ct=0;ct<et.length;ct++){var Tt=et[ct];for(ie=Tt;ie!==null;){var Ut=ie;switch(Ut.tag){case 0:case 11:case 15:Eh(8,Ut,C)}var Gt=Ut.child;if(Gt!==null)Gt.return=Ut,ie=Gt;else for(;ie!==null;){Ut=ie;var Vt=Ut.sibling,ne=Ut.return;if(iS(Ut),Ut===Tt){ie=null;break}if(Vt!==null){Vt.return=ne,ie=Vt;break}ie=ne}}}var oe=C.alternate;if(oe!==null){var ae=oe.child;if(ae!==null){oe.child=null;do{var kn=ae.sibling;ae.sibling=null,ae=kn}while(ae!==null)}}ie=C}}if((C.subtreeFlags&2064)!==0&&V!==null)V.return=C,ie=V;else t:for(;ie!==null;){if(C=ie,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Eh(9,C,C.return)}var vt=C.sibling;if(vt!==null){vt.return=C.return,ie=vt;break t}ie=C.return}}var dt=l.current;for(ie=dt;ie!==null;){V=ie;var xt=V.child;if((V.subtreeFlags&2064)!==0&&xt!==null)xt.return=V,ie=xt;else t:for(V=dt;ie!==null;){if(et=ie,(et.flags&2048)!==0)try{switch(et.tag){case 0:case 11:case 15:cp(9,et)}}catch(ce){Cn(et,et.return,ce)}if(et===V){ie=null;break t}var Yt=et.sibling;if(Yt!==null){Yt.return=et.return,ie=Yt;break t}ie=et.return}}if(Ue=E,Xo(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(Ia,l)}catch{}x=!0}return x}finally{Be=g,Dr.transition=h}}return!1}function _S(l,h,g){h=vu(g,h),h=Fb(l,h,1),l=Ko(l,h,1),h=Di(),l!==null&&(sr(l,1,h),Gi(l,h))}function Cn(l,h,g){if(l.tag===3)_S(l,l,g);else for(;h!==null;){if(h.tag===3){_S(h,l,g);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Qo===null||!Qo.has(x))){l=vu(g,l),l=zb(h,l,1),h=Ko(h,l,1),l=Di(),h!==null&&(sr(h,1,l),Gi(h,l));break}}h=h.return}}function _R(l,h,g){var x=l.pingCache;x!==null&&x.delete(h),h=Di(),l.pingedLanes|=l.suspendedLanes&g,qn===l&&(ri&g)===g&&(Hn===4||Hn===3&&(ri&130023424)===ri&&500>je()-tv?el(l,0):Qy|=g),Gi(l,h)}function xS(l,h){h===0&&((l.mode&1)===0?h=1:(h=Co,Co<<=1,(Co&130023424)===0&&(Co=4194304)));var g=Di();l=uo(l,h),l!==null&&(sr(l,h,g),Gi(l,g))}function xR(l){var h=l.memoizedState,g=0;h!==null&&(g=h.retryLane),xS(l,g)}function wR(l,h){var g=0;switch(l.tag){case 13:var x=l.stateNode,E=l.memoizedState;E!==null&&(g=E.retryLane);break;case 19:x=l.stateNode;break;default:throw Error(e(314))}x!==null&&x.delete(h),xS(l,g)}var wS;wS=function(l,h,g){if(l!==null)if(l.memoizedProps!==h.pendingProps||Ui.current)ji=!0;else{if((l.lanes&g)===0&&(h.flags&128)===0)return ji=!1,lR(l,h,g);ji=(l.flags&131072)!==0}else ji=!1,gn&&(h.flags&1048576)!==0&&tb(h,Zd,h.index);switch(h.lanes=0,h.tag){case 2:var x=h.type;lp(l,h),l=h.pendingProps;var E=cu(h,pi.current);gu(h,g),E=ky(null,h,x,l,E,g);var C=Ry();return h.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Hi(x)?(C=!0,Wd(h)):C=!1,h.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,My(h),E.updater=op,h.stateNode=E,E._reactInternals=h,zy(h,x,l,g),h=Hy(null,h,x,!0,C,g)):(h.tag=0,gn&&C&&py(h),Ii(null,h,E,g),h=h.child),h;case 16:x=h.elementType;t:{switch(lp(l,h),l=h.pendingProps,E=x._init,x=E(x._payload),h.type=x,E=h.tag=SR(x),l=ns(x,l),E){case 0:h=Uy(null,h,x,l,g);break t;case 1:h=Zb(null,h,x,l,g);break t;case 11:h=Hb(null,h,x,l,g);break t;case 14:h=jb(null,h,x,ns(x.type,l),g);break t}throw Error(e(306,x,""))}return h;case 0:return x=h.type,E=h.pendingProps,E=h.elementType===x?E:ns(x,E),Uy(l,h,x,E,g);case 1:return x=h.type,E=h.pendingProps,E=h.elementType===x?E:ns(x,E),Zb(l,h,x,E,g);case 3:t:{if(qb(h),l===null)throw Error(e(387));x=h.pendingProps,C=h.memoizedState,E=C.element,ub(l,h),Qd(h,x,null,g);var V=h.memoizedState;if(x=V.element,C.isDehydrated)if(C={element:x,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},h.updateQueue.baseState=C,h.memoizedState=C,h.flags&256){E=vu(Error(e(423)),h),h=Xb(l,h,x,g,E);break t}else if(x!==E){E=vu(Error(e(424)),h),h=Xb(l,h,x,g,E);break t}else for(dr=Ms(h.stateNode.containerInfo.firstChild),fr=h,gn=!0,es=null,g=ab(h,null,x,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(du(),x===E){h=ho(l,h,g);break t}Ii(l,h,x,g)}h=h.child}return h;case 5:return fb(h),l===null&&yy(h),x=h.type,E=h.pendingProps,C=l!==null?l.memoizedProps:null,V=E.children,Pe(x,E)?V=null:C!==null&&Pe(x,C)&&(h.flags|=32),$b(l,h),Ii(l,h,V,g),h.child;case 6:return l===null&&yy(h),null;case 13:return Yb(l,h,g);case 4:return Ty(h,h.stateNode.containerInfo),x=h.pendingProps,l===null?h.child=pu(h,null,x,g):Ii(l,h,x,g),h.child;case 11:return x=h.type,E=h.pendingProps,E=h.elementType===x?E:ns(x,E),Hb(l,h,x,E,g);case 7:return Ii(l,h,h.pendingProps,g),h.child;case 8:return Ii(l,h,h.pendingProps.children,g),h.child;case 12:return Ii(l,h,h.pendingProps.children,g),h.child;case 10:t:{if(x=h.type._context,E=h.pendingProps,C=h.memoizedProps,V=E.value,on(Yd,x._currentValue),x._currentValue=V,C!==null)if(cr(C.value,V)){if(C.children===E.children&&!Ui.current){h=ho(l,h,g);break t}}else for(C=h.child,C!==null&&(C.return=h);C!==null;){var et=C.dependencies;if(et!==null){V=C.child;for(var ct=et.firstContext;ct!==null;){if(ct.context===x){if(C.tag===1){ct=co(-1,g&-g),ct.tag=2;var Tt=C.updateQueue;if(Tt!==null){Tt=Tt.shared;var Ut=Tt.pending;Ut===null?ct.next=ct:(ct.next=Ut.next,Ut.next=ct),Tt.pending=ct}}C.lanes|=g,ct=C.alternate,ct!==null&&(ct.lanes|=g),by(C.return,g,h),et.lanes|=g;break}ct=ct.next}}else if(C.tag===10)V=C.type===h.type?null:C.child;else if(C.tag===18){if(V=C.return,V===null)throw Error(e(341));V.lanes|=g,et=V.alternate,et!==null&&(et.lanes|=g),by(V,g,h),V=C.sibling}else V=C.child;if(V!==null)V.return=C;else for(V=C;V!==null;){if(V===h){V=null;break}if(C=V.sibling,C!==null){C.return=V.return,V=C;break}V=V.return}C=V}Ii(l,h,E.children,g),h=h.child}return h;case 9:return E=h.type,x=h.pendingProps.children,gu(h,g),E=Rr(E),x=x(E),h.flags|=1,Ii(l,h,x,g),h.child;case 14:return x=h.type,E=ns(x,h.pendingProps),E=ns(x.type,E),jb(l,h,x,E,g);case 15:return Wb(l,h,h.type,h.pendingProps,g);case 17:return x=h.type,E=h.pendingProps,E=h.elementType===x?E:ns(x,E),lp(l,h),h.tag=1,Hi(x)?(l=!0,Wd(h)):l=!1,gu(h,g),Ob(h,x,E),zy(h,x,E,g),Hy(null,h,x,!0,l,g);case 19:return Jb(l,h,g);case 22:return Gb(l,h,g)}throw Error(e(156,h.tag))};function bS(l,h){return wr(l,h)}function bR(l,h,g,x){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(l,h,g,x){return new bR(l,h,g,x)}function lv(l){return l=l.prototype,!(!l||!l.isReactComponent)}function SR(l){if(typeof l=="function")return lv(l)?1:0;if(l!=null){if(l=l.$$typeof,l===tt)return 11;if(l===rt)return 14}return 2}function ia(l,h){var g=l.alternate;return g===null?(g=Or(l.tag,h,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=h,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&14680064,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,h=l.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g}function _p(l,h,g,x,E,C){var V=2;if(x=l,typeof l=="function")lv(l)&&(V=1);else if(typeof l=="string")V=5;else t:switch(l){case D:return il(g.children,E,C,h);case I:V=8,E|=8;break;case H:return l=Or(12,g,h,E|2),l.elementType=H,l.lanes=C,l;case K:return l=Or(13,g,h,E),l.elementType=K,l.lanes=C,l;case Y:return l=Or(19,g,h,E),l.elementType=Y,l.lanes=C,l;case it:return xp(g,E,C,h);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case W:V=10;break t;case U:V=9;break t;case tt:V=11;break t;case rt:V=14;break t;case at:V=16,x=null;break t}throw Error(e(130,l==null?l:typeof l,""))}return h=Or(V,g,h,E),h.elementType=l,h.type=x,h.lanes=C,h}function il(l,h,g,x){return l=Or(7,l,x,h),l.lanes=g,l}function xp(l,h,g,x){return l=Or(22,l,x,h),l.elementType=it,l.lanes=g,l.stateNode={isHidden:!1},l}function uv(l,h,g){return l=Or(6,l,null,h),l.lanes=g,l}function cv(l,h,g){return h=Or(4,l.children!==null?l.children:[],l.key,h),h.lanes=g,h.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},h}function MR(l,h,g,x,E){this.tag=h,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ao(0),this.expirationTimes=Ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ao(0),this.identifierPrefix=x,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function hv(l,h,g,x,E,C,V,et,ct){return l=new MR(l,h,g,et,ct),h===1?(h=1,C===!0&&(h|=8)):h=0,C=Or(3,null,null,h),l.current=C,C.stateNode=l,C.memoizedState={element:x,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},My(C),l}function TR(l,h,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:x==null?null:""+x,children:l,containerInfo:h,implementation:g}}function SS(l){if(!l)return qo;l=l._reactInternals;t:{if(le(l)!==l||l.tag!==1)throw Error(e(170));var h=l;do{switch(h.tag){case 3:h=h.stateNode.context;break t;case 1:if(Hi(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break t}}h=h.return}while(h!==null);throw Error(e(171))}if(l.tag===1){var g=l.type;if(Hi(g))return Kw(l,g,h)}return h}function MS(l,h,g,x,E,C,V,et,ct){return l=hv(g,x,!0,l,E,C,V,et,ct),l.context=SS(null),g=l.current,x=Di(),E=ea(g),C=co(x,E),C.callback=h??null,Ko(g,C,E),l.current.lanes=E,sr(l,E,x),Gi(l,x),l}function wp(l,h,g,x){var E=h.current,C=Di(),V=ea(E);return g=SS(g),h.context===null?h.context=g:h.pendingContext=g,h=co(C,V),h.payload={element:l},x=x===void 0?null:x,x!==null&&(h.callback=x),l=Ko(E,h,V),l!==null&&(ss(l,E,V,C),Jd(l,E,V)),V}function bp(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function TS(l,h){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<h?g:h}}function fv(l,h){TS(l,h),(l=l.alternate)&&TS(l,h)}function ER(){return null}var ES=typeof reportError=="function"?reportError:function(l){console.error(l)};function dv(l){this._internalRoot=l}Sp.prototype.render=dv.prototype.render=function(l){var h=this._internalRoot;if(h===null)throw Error(e(409));wp(l,h,null,null)},Sp.prototype.unmount=dv.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var h=l.containerInfo;tl(function(){wp(null,l,null,null)}),h[$e]=null}};function Sp(l){this._internalRoot=l}Sp.prototype.unstable_scheduleHydration=function(l){if(l){var h=Wl();l={blockedOn:null,target:l,priority:h};for(var g=0;g<Bn.length&&h!==0&&h<Bn[g].priority;g++);Bn.splice(g,0,l),g===0&&Gl(l)}};function pv(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Mp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function PS(){}function PR(l,h,g,x,E){if(E){if(typeof x=="function"){var C=x;x=function(){var Tt=bp(V);C.call(Tt)}}var V=MS(h,x,l,0,null,!1,!1,"",PS);return l._reactRootContainer=V,l[$e]=V.current,jo(l.nodeType===8?l.parentNode:l),tl(),V}for(;E=l.lastChild;)l.removeChild(E);if(typeof x=="function"){var et=x;x=function(){var Tt=bp(ct);et.call(Tt)}}var ct=hv(l,0,!1,null,null,!1,!1,"",PS);return l._reactRootContainer=ct,l[$e]=ct.current,jo(l.nodeType===8?l.parentNode:l),tl(function(){wp(h,ct,g,x)}),ct}function Tp(l,h,g,x,E){var C=g._reactRootContainer;if(C){var V=C;if(typeof E=="function"){var et=E;E=function(){var ct=bp(V);et.call(ct)}}wp(h,V,l,E)}else V=PR(g,h,l,E,x);return bp(V)}Hl=function(l){switch(l.tag){case 3:var h=l.stateNode;if(h.current.memoizedState.isDehydrated){var g=Te(h.pendingLanes);g!==0&&(Yr(h,g|1),Gi(h,je()),(Ue&6)===0&&(wu=je()+500,Xo()))}break;case 13:tl(function(){var x=uo(l,1);if(x!==null){var E=Di();ss(x,l,1,E)}}),fv(l,1)}},qs=function(l){if(l.tag===13){var h=uo(l,134217728);if(h!==null){var g=Di();ss(h,l,134217728,g)}fv(l,134217728)}},jl=function(l){if(l.tag===13){var h=ea(l),g=uo(l,h);if(g!==null){var x=Di();ss(g,l,h,x)}fv(l,h)}},Wl=function(){return Be},Oa=function(l,h){var g=Be;try{return Be=l,h()}finally{Be=g}},tn=function(l,h,g){switch(h){case"input":if(X(l,g),h=g.name,g.type==="radio"&&h!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<g.length;h++){var x=g[h];if(x!==l&&x.form===l.form){var E=lu(x);if(!E)throw Error(e(90));bt(x),X(x,E)}}}break;case"textarea":Jt(l,g);break;case"select":h=g.value,h!=null&&$t(l,!!g.multiple,h,!1)}},ui=sv,Pi=tl;var CR={usingClientEntryPoint:!1,Events:[ro,so,lu,gs,ni,sv]},Lh={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AR={bundleType:Lh.bundleType,version:Lh.version,rendererPackageName:Lh.rendererPackageName,rendererConfig:Lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=De(l),l===null?null:l.stateNode},findFiberByHostInstance:Lh.findFiberByHostInstance||ER,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ep=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ep.isDisabled&&Ep.supportsFiber)try{Ia=Ep.inject(AR),rr=Ep}catch{}}return $i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CR,$i.createPortal=function(l,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pv(h))throw Error(e(200));return TR(l,h,null,g)},$i.createRoot=function(l,h){if(!pv(l))throw Error(e(299));var g=!1,x="",E=ES;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onRecoverableError!==void 0&&(E=h.onRecoverableError)),h=hv(l,1,!1,null,null,g,!1,x,E),l[$e]=h.current,jo(l.nodeType===8?l.parentNode:l),new dv(h)},$i.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var h=l._reactInternals;if(h===void 0)throw typeof l.render=="function"?Error(e(188)):(l=Object.keys(l).join(","),Error(e(268,l)));return l=De(h),l=l===null?null:l.stateNode,l},$i.flushSync=function(l){return tl(l)},$i.hydrate=function(l,h,g){if(!Mp(h))throw Error(e(200));return Tp(null,l,h,!0,g)},$i.hydrateRoot=function(l,h,g){if(!pv(l))throw Error(e(405));var x=g!=null&&g.hydratedSources||null,E=!1,C="",V=ES;if(g!=null&&(g.unstable_strictMode===!0&&(E=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onRecoverableError!==void 0&&(V=g.onRecoverableError)),h=MS(h,null,l,1,g??null,E,!1,C,V),l[$e]=h.current,jo(l),x)for(l=0;l<x.length;l++)g=x[l],E=g._getVersion,E=E(g._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[g,E]:h.mutableSourceEagerHydrationData.push(g,E);return new Sp(h)},$i.render=function(l,h,g){if(!Mp(h))throw Error(e(200));return Tp(null,l,h,!1,g)},$i.unmountComponentAtNode=function(l){if(!Mp(l))throw Error(e(40));return l._reactRootContainer?(tl(function(){Tp(null,null,l,!1,function(){l._reactRootContainer=null,l[$e]=null})}),!0):!1},$i.unstable_batchedUpdates=sv,$i.unstable_renderSubtreeIntoContainer=function(l,h,g,x){if(!Mp(g))throw Error(e(200));if(l==null||l._reactInternals===void 0)throw Error(e(38));return Tp(l,h,g,!1,x)},$i.version="18.3.1-next-f1338f8080-20240426",$i}var OS;function NP(){if(OS)return yv.exports;OS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),yv.exports=NR(),yv.exports}var NS;function FR(){if(NS)return Pp;NS=1;var n=NP();return Pp.createRoot=n.createRoot,Pp.hydrateRoot=n.hydrateRoot,Pp}var zR=FR();const BR=Tc(zR),FP=typeof document<"u"?vn.useLayoutEffect:()=>{};var xv;const VR=(xv=vn.useInsertionEffect)!==null&&xv!==void 0?xv:FP;function UR(n){const t=Q.useRef(null);return VR(()=>{t.current=n},[n]),Q.useCallback((...e)=>{const i=t.current;return i?.(...e)},[])}const Aa=n=>{var t;return(t=n?.ownerDocument)!==null&&t!==void 0?t:document},ml=n=>n&&"window"in n&&n.window===n?n:Aa(n).defaultView||window;function HR(n){return n!==null&&typeof n=="object"&&"nodeType"in n&&typeof n.nodeType=="number"}function jR(n){return HR(n)&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in n}let WR=!1;function o0(){return WR}function zP(n,t){if(!o0())return t&&n?n.contains(t):!1;if(!n||!t)return!1;let e=t;for(;e!==null;){if(e===n)return!0;e.tagName==="SLOT"&&e.assignedSlot?e=e.assignedSlot.parentNode:jR(e)?e=e.host:e=e.parentNode}return!1}const Z_=(n=document)=>{var t;if(!o0())return n.activeElement;let e=n.activeElement;for(;e&&"shadowRoot"in e&&(!((t=e.shadowRoot)===null||t===void 0)&&t.activeElement);)e=e.shadowRoot.activeElement;return e};function BP(n){return o0()&&n.target.shadowRoot&&n.composedPath?n.composedPath()[0]:n.target}function GR(n){var t;if(typeof window>"u"||window.navigator==null)return!1;let e=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(e)&&e.some(i=>n.test(i.brand))||n.test(window.navigator.userAgent)}function $R(n){var t;return typeof window<"u"&&window.navigator!=null?n.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function VP(n){let t=null;return()=>(t==null&&(t=n()),t)}const ZR=VP(function(){return $R(/^Mac/i)}),qR=VP(function(){return GR(/Android/i)});function UP(){let n=Q.useRef(new Map),t=Q.useCallback((r,s,o,a)=>{let c=a?.once?(...f)=>{n.current.delete(o),o(...f)}:o;n.current.set(o,{type:s,eventTarget:r,fn:c,options:a}),r.addEventListener(s,c,a)},[]),e=Q.useCallback((r,s,o,a)=>{var c;let f=((c=n.current.get(o))===null||c===void 0?void 0:c.fn)||o;r.removeEventListener(s,f,a),n.current.delete(o)},[]),i=Q.useCallback(()=>{n.current.forEach((r,s)=>{e(r.eventTarget,r.type,s,r.options)})},[e]);return Q.useEffect(()=>i,[i]),{addGlobalListener:t,removeGlobalListener:e,removeAllGlobalListeners:i}}function XR(n){return n.pointerType===""&&n.isTrusted?!0:qR()&&n.pointerType?n.type==="click"&&n.buttons===1:n.detail===0&&!n.pointerType}var YR=NP();function HP(n){let t=n;return t.nativeEvent=n,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function KR(n,t){Object.defineProperty(n,"target",{value:t}),Object.defineProperty(n,"currentTarget",{value:t})}function jP(n){let t=Q.useRef({isFocused:!1,observer:null});FP(()=>{const i=t.current;return()=>{i.observer&&(i.observer.disconnect(),i.observer=null)}},[]);let e=UR(i=>{n?.(i)});return Q.useCallback(i=>{if(i.target instanceof HTMLButtonElement||i.target instanceof HTMLInputElement||i.target instanceof HTMLTextAreaElement||i.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=i.target,s=o=>{if(t.current.isFocused=!1,r.disabled){let a=HP(o);e(a)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",s,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var o;(o=t.current.observer)===null||o===void 0||o.disconnect();let a=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[e])}let JR=!1,id=null,q_=new Set,df=new Map,Cl=!1,X_=!1;const QR={Tab:!0,Escape:!0};function a0(n,t){for(let e of q_)e(n,t)}function tI(n){return!(n.metaKey||!ZR()&&n.altKey||n.ctrlKey||n.key==="Control"||n.key==="Shift"||n.key==="Meta")}function jm(n){Cl=!0,tI(n)&&(id="keyboard",a0("keyboard",n))}function oc(n){id="pointer",(n.type==="mousedown"||n.type==="pointerdown")&&(Cl=!0,a0("pointer",n))}function WP(n){XR(n)&&(Cl=!0,id="virtual")}function GP(n){n.target===window||n.target===document||JR||!n.isTrusted||(!Cl&&!X_&&(id="virtual",a0("virtual",n)),Cl=!1,X_=!1)}function $P(){Cl=!1,X_=!0}function Y_(n){if(typeof window>"u"||typeof document>"u"||df.get(ml(n)))return;const t=ml(n),e=Aa(n);let i=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){Cl=!0,i.apply(this,arguments)},e.addEventListener("keydown",jm,!0),e.addEventListener("keyup",jm,!0),e.addEventListener("click",WP,!0),t.addEventListener("focus",GP,!0),t.addEventListener("blur",$P,!1),typeof PointerEvent<"u"&&(e.addEventListener("pointerdown",oc,!0),e.addEventListener("pointermove",oc,!0),e.addEventListener("pointerup",oc,!0)),t.addEventListener("beforeunload",()=>{ZP(n)},{once:!0}),df.set(t,{focus:i})}const ZP=(n,t)=>{const e=ml(n),i=Aa(n);t&&i.removeEventListener("DOMContentLoaded",t),df.has(e)&&(e.HTMLElement.prototype.focus=df.get(e).focus,i.removeEventListener("keydown",jm,!0),i.removeEventListener("keyup",jm,!0),i.removeEventListener("click",WP,!0),e.removeEventListener("focus",GP,!0),e.removeEventListener("blur",$P,!1),typeof PointerEvent<"u"&&(i.removeEventListener("pointerdown",oc,!0),i.removeEventListener("pointermove",oc,!0),i.removeEventListener("pointerup",oc,!0)),df.delete(e))};function eI(n){const t=Aa(n);let e;return t.readyState!=="loading"?Y_(n):(e=()=>{Y_(n)},t.addEventListener("DOMContentLoaded",e)),()=>ZP(n,e)}typeof document<"u"&&eI();function qP(){return id!=="pointer"}const nI=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function iI(n,t,e){let i=Aa(e?.target);const r=typeof window<"u"?ml(e?.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?ml(e?.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?ml(e?.target).HTMLElement:HTMLElement,a=typeof window<"u"?ml(e?.target).KeyboardEvent:KeyboardEvent;return n=n||i.activeElement instanceof r&&!nI.has(i.activeElement.type)||i.activeElement instanceof s||i.activeElement instanceof o&&i.activeElement.isContentEditable,!(n&&t==="keyboard"&&e instanceof a&&!QR[e.key])}function rI(n,t,e){Y_(),Q.useEffect(()=>{let i=(r,s)=>{iI(!!e?.isTextInput,r,s)&&n(qP())};return q_.add(i),()=>{q_.delete(i)}},t)}function sI(n){let{isDisabled:t,onFocus:e,onBlur:i,onFocusChange:r}=n;const s=Q.useCallback(c=>{if(c.target===c.currentTarget)return i&&i(c),r&&r(!1),!0},[i,r]),o=jP(s),a=Q.useCallback(c=>{const f=Aa(c.target),d=f?Z_(f):Z_();c.target===c.currentTarget&&d===BP(c.nativeEvent)&&(e&&e(c),r&&r(!0),o(c))},[r,e,o]);return{focusProps:{onFocus:!t&&(e||r||i)?a:void 0,onBlur:!t&&(i||r)?s:void 0}}}function oI(n){let{isDisabled:t,onBlurWithin:e,onFocusWithin:i,onFocusWithinChange:r}=n,s=Q.useRef({isFocusWithin:!1}),{addGlobalListener:o,removeAllGlobalListeners:a}=UP(),c=Q.useCallback(m=>{m.currentTarget.contains(m.target)&&s.current.isFocusWithin&&!m.currentTarget.contains(m.relatedTarget)&&(s.current.isFocusWithin=!1,a(),e&&e(m),r&&r(!1))},[e,r,s,a]),f=jP(c),d=Q.useCallback(m=>{if(!m.currentTarget.contains(m.target))return;const y=Aa(m.target),v=Z_(y);if(!s.current.isFocusWithin&&v===BP(m.nativeEvent)){i&&i(m),r&&r(!0),s.current.isFocusWithin=!0,f(m);let w=m.currentTarget;o(y,"focus",S=>{if(s.current.isFocusWithin&&!zP(w,S.target)){let P=new y.defaultView.FocusEvent("blur",{relatedTarget:S.target});KR(P,w);let b=HP(P);c(b)}},{capture:!0})}},[i,r,f,o,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:c}}}let K_=!1,Cp=0;function aI(){K_=!0,setTimeout(()=>{K_=!1},50)}function FS(n){n.pointerType==="touch"&&aI()}function lI(){if(!(typeof document>"u"))return Cp===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",FS),Cp++,()=>{Cp--,!(Cp>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",FS)}}function uI(n){let{onHoverStart:t,onHoverChange:e,onHoverEnd:i,isDisabled:r}=n,[s,o]=Q.useState(!1),a=Q.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;Q.useEffect(lI,[]);let{addGlobalListener:c,removeAllGlobalListeners:f}=UP(),{hoverProps:d,triggerHoverEnd:m}=Q.useMemo(()=>{let y=(S,P)=>{if(a.pointerType=P,r||P==="touch"||a.isHovered||!S.currentTarget.contains(S.target))return;a.isHovered=!0;let b=S.currentTarget;a.target=b,c(Aa(S.target),"pointerover",M=>{a.isHovered&&a.target&&!zP(a.target,M.target)&&v(M,M.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:b,pointerType:P}),e&&e(!0),o(!0)},v=(S,P)=>{let b=a.target;a.pointerType="",a.target=null,!(P==="touch"||!a.isHovered||!b)&&(a.isHovered=!1,f(),i&&i({type:"hoverend",target:b,pointerType:P}),e&&e(!1),o(!1))},w={};return typeof PointerEvent<"u"&&(w.onPointerEnter=S=>{K_&&S.pointerType==="mouse"||y(S,S.pointerType)},w.onPointerLeave=S=>{!r&&S.currentTarget.contains(S.target)&&v(S,S.pointerType)}),{hoverProps:w,triggerHoverEnd:v}},[t,e,i,r,a,c,f]);return Q.useEffect(()=>{r&&m({currentTarget:a.target},a.pointerType)},[r]),{hoverProps:d,isHovered:s}}function XP(n={}){let{autoFocus:t=!1,isTextInput:e,within:i}=n,r=Q.useRef({isFocused:!1,isFocusVisible:t||qP()}),[s,o]=Q.useState(!1),[a,c]=Q.useState(()=>r.current.isFocused&&r.current.isFocusVisible),f=Q.useCallback(()=>c(r.current.isFocused&&r.current.isFocusVisible),[]),d=Q.useCallback(v=>{r.current.isFocused=v,o(v),f()},[f]);rI(v=>{r.current.isFocusVisible=v,f()},[],{isTextInput:e});let{focusProps:m}=sI({isDisabled:i,onFocusChange:d}),{focusWithinProps:y}=oI({isDisabled:!i,onFocusWithinChange:d});return{isFocused:s,isFocusVisible:a,focusProps:i?y:m}}var cI=Object.defineProperty,hI=(n,t,e)=>t in n?cI(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,wv=(n,t,e)=>(hI(n,typeof t!="symbol"?t+"":t,e),e);let fI=class{constructor(){wv(this,"current",this.detect()),wv(this,"handoffState","pending"),wv(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},YP=new fI;function KP(n){var t,e;return YP.isServer?null:n?"ownerDocument"in n?n.ownerDocument:"current"in n?(e=(t=n.current)==null?void 0:t.ownerDocument)!=null?e:document:null:document}function JP(n){typeof queueMicrotask=="function"?queueMicrotask(n):Promise.resolve().then(n).catch(t=>setTimeout(()=>{throw t}))}function QP(){let n=[],t={addEventListener(e,i,r,s){return e.addEventListener(i,r,s),t.add(()=>e.removeEventListener(i,r,s))},requestAnimationFrame(...e){let i=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(i))},nextFrame(...e){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...e))},setTimeout(...e){let i=setTimeout(...e);return t.add(()=>clearTimeout(i))},microTask(...e){let i={current:!0};return JP(()=>{i.current&&e[0]()}),t.add(()=>{i.current=!1})},style(e,i,r){let s=e.style.getPropertyValue(i);return Object.assign(e.style,{[i]:r}),this.add(()=>{Object.assign(e.style,{[i]:s})})},group(e){let i=QP();return e(i),this.add(()=>i.dispose())},add(e){return n.includes(e)||n.push(e),()=>{let i=n.indexOf(e);if(i>=0)for(let r of n.splice(i,1))r()}},dispose(){for(let e of n.splice(0))e()}};return t}function dI(){let[n]=Q.useState(QP);return Q.useEffect(()=>()=>n.dispose(),[n]),n}let mc=(n,t)=>{YP.isServer?Q.useEffect(n,t):Q.useLayoutEffect(n,t)};function ef(n){let t=Q.useRef(n);return mc(()=>{t.current=n},[n]),t}let Fs=function(n){let t=ef(n);return vn.useCallback((...e)=>t.current(...e),[t])};function pI(n){let t=n.width/2,e=n.height/2;return{top:n.clientY-e,right:n.clientX+t,bottom:n.clientY+e,left:n.clientX-t}}function mI(n,t){return!(!n||!t||n.right<t.left||n.left>t.right||n.bottom<t.top||n.top>t.bottom)}function gI({disabled:n=!1}={}){let t=Q.useRef(null),[e,i]=Q.useState(!1),r=dI(),s=Fs(()=>{t.current=null,i(!1),r.dispose()}),o=Fs(a=>{if(r.dispose(),t.current===null){t.current=a.currentTarget,i(!0);{let c=KP(a.currentTarget);r.addEventListener(c,"pointerup",s,!1),r.addEventListener(c,"pointermove",f=>{if(t.current){let d=pI(f);i(mI(d,t.current.getBoundingClientRect()))}},!1),r.addEventListener(c,"pointercancel",s,!1)}}});return{pressed:e,pressProps:n?{}:{onPointerDown:o,onPointerUp:s,onClick:s}}}function zS(...n){return Array.from(new Set(n.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function wl(n,t,...e){if(n in t){let r=t[n];return typeof r=="function"?r(...e):r}let i=new Error(`Tried to handle "${n}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,wl),i}var J_=(n=>(n[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n))(J_||{}),yI=(n=>(n[n.Unmount=0]="Unmount",n[n.Hidden=1]="Hidden",n))(yI||{});function Ec(){let n=_I();return Q.useCallback(t=>vI({mergeRefs:n,...t}),[n])}function vI({ourProps:n,theirProps:t,slot:e,defaultTag:i,features:r,visible:s=!0,name:o,mergeRefs:a}){a=a??xI;let c=tC(t,n);if(s)return Ap(c,e,i,o,a);let f=r??0;if(f&2){let{static:d=!1,...m}=c;if(d)return Ap(m,e,i,o,a)}if(f&1){let{unmount:d=!0,...m}=c;return wl(d?0:1,{0(){return null},1(){return Ap({...m,hidden:!0,style:{display:"none"}},e,i,o,a)}})}return Ap(c,e,i,o,a)}function Ap(n,t={},e,i,r){let{as:s=e,children:o,refName:a="ref",...c}=bv(n,["unmount","static"]),f=n.ref!==void 0?{[a]:n.ref}:{},d=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let m={};if(t){let y=!1,v=[];for(let[w,S]of Object.entries(t))typeof S=="boolean"&&(y=!0),S===!0&&v.push(w.replace(/([A-Z])/g,P=>`-${P.toLowerCase()}`));if(y){m["data-headlessui-state"]=v.join(" ");for(let w of v)m[`data-${w}`]=""}}if(s===Q.Fragment&&(Object.keys(Su(c)).length>0||Object.keys(Su(m)).length>0))if(!Q.isValidElement(d)||Array.isArray(d)&&d.length>1){if(Object.keys(Su(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Su(c)).concat(Object.keys(Su(m))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=d.props,v=y?.className,w=typeof v=="function"?(...b)=>zS(v(...b),c.className):zS(v,c.className),S=w?{className:w}:{},P=tC(d.props,Su(bv(c,["ref"])));for(let b in m)b in P&&delete m[b];return Q.cloneElement(d,Object.assign({},P,m,f,{ref:r(wI(d),f.ref)},S))}return Q.createElement(s,Object.assign({},bv(c,["ref"]),s!==Q.Fragment&&f,s!==Q.Fragment&&m),d)}function _I(){let n=Q.useRef([]),t=Q.useCallback(e=>{for(let i of n.current)i!=null&&(typeof i=="function"?i(e):i.current=e)},[]);return(...e)=>{if(!e.every(i=>i==null))return n.current=e,t}}function xI(...n){return n.every(t=>t==null)?void 0:t=>{for(let e of n)e!=null&&(typeof e=="function"?e(t):e.current=t)}}function tC(...n){if(n.length===0)return{};if(n.length===1)return n[0];let t={},e={};for(let i of n)for(let r in i)r.startsWith("on")&&typeof i[r]=="function"?(e[r]!=null||(e[r]=[]),e[r].push(i[r])):t[r]=i[r];if(t.disabled||t["aria-disabled"])for(let i in e)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(i)&&(e[i]=[r=>{var s;return(s=r?.preventDefault)==null?void 0:s.call(r)}]);for(let i in e)Object.assign(t,{[i](r,...s){let o=e[i];for(let a of o){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;a(r,...s)}}});return t}function eC(...n){if(n.length===0)return{};if(n.length===1)return n[0];let t={},e={};for(let i of n)for(let r in i)r.startsWith("on")&&typeof i[r]=="function"?(e[r]!=null||(e[r]=[]),e[r].push(i[r])):t[r]=i[r];for(let i in e)Object.assign(t,{[i](...r){let s=e[i];for(let o of s)o?.(...r)}});return t}function Pc(n){var t;return Object.assign(Q.forwardRef(n),{displayName:(t=n.displayName)!=null?t:n.name})}function Su(n){let t=Object.assign({},n);for(let e in t)t[e]===void 0&&delete t[e];return t}function bv(n,t=[]){let e=Object.assign({},n);for(let i of t)i in e&&delete e[i];return e}function wI(n){return vn.version.split(".")[0]>="19"?n.props.ref:n.ref}let bI="span";var nC=(n=>(n[n.None=1]="None",n[n.Focusable=2]="Focusable",n[n.Hidden=4]="Hidden",n))(nC||{});function SI(n,t){var e;let{features:i=1,...r}=n,s={ref:t,"aria-hidden":(i&2)===2?!0:(e=r["aria-hidden"])!=null?e:void 0,hidden:(i&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(i&4)===4&&(i&2)!==2&&{display:"none"}}};return Ec()({ourProps:s,theirProps:r,slot:{},defaultTag:bI,name:"Hidden"})}let iC=Pc(SI),MI=Symbol();function rd(...n){let t=Q.useRef(n);Q.useEffect(()=>{t.current=n},[n]);let e=Fs(i=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(i):r.current=i)});return n.every(i=>i==null||i?.[MI])?void 0:e}var cs=(n=>(n.Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.Delete="Delete",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab",n))(cs||{});let TI=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(n=>`${n}:not([tabindex='-1'])`).join(","),EI=["[data-autofocus]"].map(n=>`${n}:not([tabindex='-1'])`).join(",");var hs=(n=>(n[n.First=1]="First",n[n.Previous=2]="Previous",n[n.Next=4]="Next",n[n.Last=8]="Last",n[n.WrapAround=16]="WrapAround",n[n.NoScroll=32]="NoScroll",n[n.AutoFocus=64]="AutoFocus",n))(hs||{}),nf=(n=>(n[n.Error=0]="Error",n[n.Overflow=1]="Overflow",n[n.Success=2]="Success",n[n.Underflow=3]="Underflow",n))(nf||{}),PI=(n=>(n[n.Previous=-1]="Previous",n[n.Next=1]="Next",n))(PI||{});function CI(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(TI)).sort((t,e)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}function AI(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(EI)).sort((t,e)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}var LI=(n=>(n[n.Strict=0]="Strict",n[n.Loose=1]="Loose",n))(LI||{}),kI=(n=>(n[n.Keyboard=0]="Keyboard",n[n.Mouse=1]="Mouse",n))(kI||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",n=>{n.metaKey||n.altKey||n.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",n=>{n.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:n.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let RI=["textarea","input"].join(",");function II(n){var t,e;return(e=(t=n?.matches)==null?void 0:t.call(n,RI))!=null?e:!1}function Ku(n,t=e=>e){return n.slice().sort((e,i)=>{let r=t(e),s=t(i);if(r===null||s===null)return 0;let o=r.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Mu(n,t,{sorted:e=!0,relativeTo:i=null,skipElements:r=[]}={}){let s=Array.isArray(n)?n.length>0?n[0].ownerDocument:document:n.ownerDocument,o=Array.isArray(n)?e?Ku(n):n:t&64?AI(n):CI(n);r.length>0&&o.length>1&&(o=o.filter(v=>!r.some(w=>w!=null&&"current"in w?w?.current===v:w===v))),i=i??s.activeElement;let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(i))-1;if(t&4)return Math.max(0,o.indexOf(i))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},d=0,m=o.length,y;do{if(d>=m||d+m<=0)return 0;let v=c+d;if(t&16)v=(v+m)%m;else{if(v<0)return 3;if(v>=m)return 1}y=o[v],y?.focus(f),d+=a}while(y!==s.activeElement);return t&6&&II(y)&&y.select(),2}function DI(n,t){return Q.useMemo(()=>{var e;if(n.type)return n.type;let i=(e=n.as)!=null?e:"button";if(typeof i=="string"&&i.toLowerCase()==="button"||t?.tagName==="BUTTON"&&!t.hasAttribute("type"))return"button"},[n.type,n.as,t])}function OI(){let n=Q.useRef(!1);return mc(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function NI({onFocus:n}){let[t,e]=Q.useState(!0),i=OI();return t?vn.createElement(iC,{as:"button",type:"button",features:nC.Focusable,onFocus:r=>{r.preventDefault();let s,o=50;function a(){if(o--<=0){s&&cancelAnimationFrame(s);return}if(n()){if(cancelAnimationFrame(s),!i.current)return;e(!1);return}s=requestAnimationFrame(a)}s=requestAnimationFrame(a)}}):null}const rC=Q.createContext(null);function FI(){return{groups:new Map,get(n,t){var e;let i=this.groups.get(n);i||(i=new Map,this.groups.set(n,i));let r=(e=i.get(t))!=null?e:0;i.set(t,r+1);let s=Array.from(i.keys()).indexOf(t);function o(){let a=i.get(t);a>1?i.set(t,a-1):i.delete(t)}return[s,o]}}}function zI({children:n}){let t=Q.useRef(FI());return Q.createElement(rC.Provider,{value:t},n)}function sC(n){let t=Q.useContext(rC);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let e=Q.useId(),[i,r]=t.current.get(n,e);return Q.useEffect(()=>r,[]),i}var BI=(n=>(n[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n))(BI||{}),VI=(n=>(n[n.Less=-1]="Less",n[n.Equal=0]="Equal",n[n.Greater=1]="Greater",n))(VI||{}),UI=(n=>(n[n.SetSelectedIndex=0]="SetSelectedIndex",n[n.RegisterTab=1]="RegisterTab",n[n.UnregisterTab=2]="UnregisterTab",n[n.RegisterPanel=3]="RegisterPanel",n[n.UnregisterPanel=4]="UnregisterPanel",n))(UI||{});let HI={0(n,t){var e;let i=Ku(n.tabs,d=>d.current),r=Ku(n.panels,d=>d.current),s=i.filter(d=>{var m;return!((m=d.current)!=null&&m.hasAttribute("disabled"))}),o={...n,tabs:i,panels:r};if(t.index<0||t.index>i.length-1){let d=wl(Math.sign(t.index-n.selectedIndex),{[-1]:()=>1,0:()=>wl(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(s.length===0)return o;let m=wl(d,{0:()=>i.indexOf(s[0]),1:()=>i.indexOf(s[s.length-1])});return{...o,selectedIndex:m===-1?n.selectedIndex:m}}let a=i.slice(0,t.index),c=[...i.slice(t.index),...a].find(d=>s.includes(d));if(!c)return o;let f=(e=i.indexOf(c))!=null?e:n.selectedIndex;return f===-1&&(f=n.selectedIndex),{...o,selectedIndex:f}},1(n,t){if(n.tabs.includes(t.tab))return n;let e=n.tabs[n.selectedIndex],i=Ku([...n.tabs,t.tab],s=>s.current),r=n.selectedIndex;return n.info.current.isControlled||(r=i.indexOf(e),r===-1&&(r=n.selectedIndex)),{...n,tabs:i,selectedIndex:r}},2(n,t){return{...n,tabs:n.tabs.filter(e=>e!==t.tab)}},3(n,t){return n.panels.includes(t.panel)?n:{...n,panels:Ku([...n.panels,t.panel],e=>e.current)}},4(n,t){return{...n,panels:n.panels.filter(e=>e!==t.panel)}}},l0=Q.createContext(null);l0.displayName="TabsDataContext";function gc(n){let t=Q.useContext(l0);if(t===null){let e=new Error(`<${n} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,gc),e}return t}let u0=Q.createContext(null);u0.displayName="TabsActionsContext";function c0(n){let t=Q.useContext(u0);if(t===null){let e=new Error(`<${n} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,c0),e}return t}function jI(n,t){return wl(t.type,HI,n,t)}let WI="div";function GI(n,t){let{defaultIndex:e=0,vertical:i=!1,manual:r=!1,onChange:s,selectedIndex:o=null,...a}=n;const c=i?"vertical":"horizontal",f=r?"manual":"auto";let d=o!==null,m=ef({isControlled:d}),y=rd(t),[v,w]=Q.useReducer(jI,{info:m,selectedIndex:o??e,tabs:[],panels:[]}),S=Q.useMemo(()=>({selectedIndex:v.selectedIndex}),[v.selectedIndex]),P=ef(s||(()=>{})),b=ef(v.tabs),M=Q.useMemo(()=>({orientation:c,activation:f,...v}),[c,f,v]),R=Fs(W=>(w({type:1,tab:W}),()=>w({type:2,tab:W}))),O=Fs(W=>(w({type:3,panel:W}),()=>w({type:4,panel:W}))),k=Fs(W=>{N.current!==W&&P.current(W),d||w({type:0,index:W})}),N=ef(d?n.selectedIndex:v.selectedIndex),D=Q.useMemo(()=>({registerTab:R,registerPanel:O,change:k}),[]);mc(()=>{w({type:0,index:o??e})},[o]),mc(()=>{if(N.current===void 0||v.tabs.length<=0)return;let W=Ku(v.tabs,U=>U.current);W.some((U,tt)=>v.tabs[tt]!==U)&&k(W.indexOf(v.tabs[N.current]))});let I={ref:y},H=Ec();return vn.createElement(zI,null,vn.createElement(u0.Provider,{value:D},vn.createElement(l0.Provider,{value:M},M.tabs.length<=0&&vn.createElement(NI,{onFocus:()=>{var W,U;for(let tt of b.current)if(((W=tt.current)==null?void 0:W.tabIndex)===0)return(U=tt.current)==null||U.focus(),!0;return!1}}),H({ourProps:I,theirProps:a,slot:S,defaultTag:WI,name:"Tabs"}))))}let $I="div";function ZI(n,t){let{orientation:e,selectedIndex:i}=gc("Tab.List"),r=rd(t),s=Q.useMemo(()=>({selectedIndex:i}),[i]),o=n,a={ref:r,role:"tablist","aria-orientation":e};return Ec()({ourProps:a,theirProps:o,slot:s,defaultTag:$I,name:"Tabs.List"})}let qI="button";function XI(n,t){var e,i;let r=Q.useId(),{id:s=`headlessui-tabs-tab-${r}`,disabled:o=!1,autoFocus:a=!1,...c}=n,{orientation:f,activation:d,selectedIndex:m,tabs:y,panels:v}=gc("Tab"),w=c0("Tab"),S=gc("Tab"),[P,b]=Q.useState(null),M=Q.useRef(null),R=rd(M,t,b);mc(()=>w.registerTab(M),[w,M]);let O=sC("tabs"),k=y.indexOf(M);k===-1&&(k=O);let N=k===m,D=Fs(F=>{var G;let lt=F();if(lt===nf.Success&&d==="auto"){let z=(G=KP(M))==null?void 0:G.activeElement,mt=S.tabs.findIndex(_t=>_t.current===z);mt!==-1&&w.change(mt)}return lt}),I=Fs(F=>{let G=y.map(lt=>lt.current).filter(Boolean);if(F.key===cs.Space||F.key===cs.Enter){F.preventDefault(),F.stopPropagation(),w.change(k);return}switch(F.key){case cs.Home:case cs.PageUp:return F.preventDefault(),F.stopPropagation(),D(()=>Mu(G,hs.First));case cs.End:case cs.PageDown:return F.preventDefault(),F.stopPropagation(),D(()=>Mu(G,hs.Last))}if(D(()=>wl(f,{vertical(){return F.key===cs.ArrowUp?Mu(G,hs.Previous|hs.WrapAround):F.key===cs.ArrowDown?Mu(G,hs.Next|hs.WrapAround):nf.Error},horizontal(){return F.key===cs.ArrowLeft?Mu(G,hs.Previous|hs.WrapAround):F.key===cs.ArrowRight?Mu(G,hs.Next|hs.WrapAround):nf.Error}}))===nf.Success)return F.preventDefault()}),H=Q.useRef(!1),W=Fs(()=>{var F;H.current||(H.current=!0,(F=M.current)==null||F.focus({preventScroll:!0}),w.change(k),JP(()=>{H.current=!1}))}),U=Fs(F=>{F.preventDefault()}),{isFocusVisible:tt,focusProps:K}=XP({autoFocus:a}),{isHovered:Y,hoverProps:rt}=uI({isDisabled:o}),{pressed:at,pressProps:it}=gI({disabled:o}),J=Q.useMemo(()=>({selected:N,hover:Y,active:at,focus:tt,autofocus:a,disabled:o}),[N,Y,tt,at,a,o]),pt=eC({ref:R,onKeyDown:I,onMouseDown:U,onClick:W,id:s,role:"tab",type:DI(n,P),"aria-controls":(i=(e=v[k])==null?void 0:e.current)==null?void 0:i.id,"aria-selected":N,tabIndex:N?0:-1,disabled:o||void 0,autoFocus:a},K,rt,it);return Ec()({ourProps:pt,theirProps:c,slot:J,defaultTag:qI,name:"Tabs.Tab"})}let YI="div";function KI(n,t){let{selectedIndex:e}=gc("Tab.Panels"),i=rd(t),r=Q.useMemo(()=>({selectedIndex:e}),[e]),s=n,o={ref:i};return Ec()({ourProps:o,theirProps:s,slot:r,defaultTag:YI,name:"Tabs.Panels"})}let JI="div",QI=J_.RenderStrategy|J_.Static;function tD(n,t){var e,i,r,s;let o=Q.useId(),{id:a=`headlessui-tabs-panel-${o}`,tabIndex:c=0,...f}=n,{selectedIndex:d,tabs:m,panels:y}=gc("Tab.Panel"),v=c0("Tab.Panel"),w=Q.useRef(null),S=rd(w,t);mc(()=>v.registerPanel(w),[v,w]);let P=sC("panels"),b=y.indexOf(w);b===-1&&(b=P);let M=b===d,{isFocusVisible:R,focusProps:O}=XP(),k=Q.useMemo(()=>({selected:M,focus:R}),[M,R]),N=eC({ref:S,id:a,role:"tabpanel","aria-labelledby":(i=(e=m[b])==null?void 0:e.current)==null?void 0:i.id,tabIndex:M?c:-1},O),D=Ec();return!M&&((r=f.unmount)==null||r)&&!((s=f.static)!=null&&s)?vn.createElement(iC,{"aria-hidden":"true",...N}):D({ourProps:N,theirProps:f,slot:k,defaultTag:JI,features:QI,visible:M,name:"Tabs.Panel"})}let eD=Pc(XI),nD=Pc(GI),iD=Pc(ZI),rD=Pc(KI),sD=Pc(tD),Lp=Object.assign(eD,{Group:nD,List:iD,Panels:rD,Panel:sD});const h0=Q.createContext({});function f0(n){const t=Q.useRef(null);return t.current===null&&(t.current=n()),t.current}const d0=typeof window<"u",oC=d0?Q.useLayoutEffect:Q.useEffect,gg=Q.createContext(null);function p0(n,t){n.indexOf(t)===-1&&n.push(t)}function m0(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const So=(n,t,e)=>e>t?t:e<n?n:e;let g0=()=>{};const Mo={},aC=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function lC(n){return typeof n=="object"&&n!==null}const uC=n=>/^0[^.\s]+$/u.test(n);function y0(n){let t;return()=>(t===void 0&&(t=n()),t)}const Wr=n=>n,oD=(n,t)=>e=>t(n(e)),sd=(...n)=>n.reduce(oD),Df=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class v0{constructor(){this.subscriptions=[]}add(t){return p0(this.subscriptions,t),()=>m0(this.subscriptions,t)}notify(t,e,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,e,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Bs=n=>n*1e3,Vs=n=>n/1e3;function cC(n,t){return t?n*(1e3/t):0}const hC=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,aD=1e-7,lD=12;function uD(n,t,e,i,r){let s,o,a=0;do o=t+(e-t)/2,s=hC(o,i,r)-n,s>0?e=o:t=o;while(Math.abs(s)>aD&&++a<lD);return o}function od(n,t,e,i){if(n===t&&e===i)return Wr;const r=s=>uD(s,0,1,n,e);return s=>s===0||s===1?s:hC(r(s),t,i)}const fC=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,dC=n=>t=>1-n(1-t),pC=od(.33,1.53,.69,.99),_0=dC(pC),mC=fC(_0),gC=n=>(n*=2)<1?.5*_0(n):.5*(2-Math.pow(2,-10*(n-1))),x0=n=>1-Math.sin(Math.acos(n)),yC=dC(x0),vC=fC(x0),cD=od(.42,0,1,1),hD=od(0,0,.58,1),_C=od(.42,0,.58,1),fD=n=>Array.isArray(n)&&typeof n[0]!="number",xC=n=>Array.isArray(n)&&typeof n[0]=="number",dD={linear:Wr,easeIn:cD,easeInOut:_C,easeOut:hD,circIn:x0,circInOut:vC,circOut:yC,backIn:_0,backInOut:mC,backOut:pC,anticipate:gC},pD=n=>typeof n=="string",BS=n=>{if(xC(n)){g0(n.length===4);const[t,e,i,r]=n;return od(t,e,i,r)}else if(pD(n))return dD[n];return n},kp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function mD(n,t){let e=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(f.schedule(d),n()),d(a)}const f={schedule:(d,m=!1,y=!1)=>{const w=y&&r?e:i;return m&&o.add(d),w.has(d)||w.add(d),d},cancel:d=>{i.delete(d),o.delete(d)},process:d=>{if(a=d,r){s=!0;return}r=!0,[e,i]=[i,e],e.forEach(c),e.clear(),r=!1,s&&(s=!1,f.process(d))}};return f}const gD=40;function wC(n,t){let e=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>e=!0,o=kp.reduce((R,O)=>(R[O]=mD(s),R),{}),{setup:a,read:c,resolveKeyframes:f,preUpdate:d,update:m,preRender:y,render:v,postRender:w}=o,S=()=>{const R=Mo.useManualTiming?r.timestamp:performance.now();e=!1,Mo.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(R-r.timestamp,gD),1)),r.timestamp=R,r.isProcessing=!0,a.process(r),c.process(r),f.process(r),d.process(r),m.process(r),y.process(r),v.process(r),w.process(r),r.isProcessing=!1,e&&t&&(i=!1,n(S))},P=()=>{e=!0,i=!0,r.isProcessing||n(S)};return{schedule:kp.reduce((R,O)=>{const k=o[O];return R[O]=(N,D=!1,I=!1)=>(e||P(),k.schedule(N,D,I)),R},{}),cancel:R=>{for(let O=0;O<kp.length;O++)o[kp[O]].cancel(R)},state:r,steps:o}}const{schedule:_n,cancel:Ma,state:oi,steps:Sv}=wC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wr,!0);let km;function yD(){km=void 0}const Yi={now:()=>(km===void 0&&Yi.set(oi.isProcessing||Mo.useManualTiming?oi.timestamp:performance.now()),km),set:n=>{km=n,queueMicrotask(yD)}},bC=n=>t=>typeof t=="string"&&t.startsWith(n),w0=bC("--"),vD=bC("var(--"),b0=n=>vD(n)?_D.test(n.split("/*")[0].trim()):!1,_D=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Cc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Of={...Cc,transform:n=>So(0,1,n)},Rp={...Cc,default:1},pf=n=>Math.round(n*1e5)/1e5,S0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xD(n){return n==null}const wD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,M0=(n,t)=>e=>!!(typeof e=="string"&&wD.test(e)&&e.startsWith(n)||t&&!xD(e)&&Object.prototype.hasOwnProperty.call(e,t)),SC=(n,t,e)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(S0);return{[n]:parseFloat(r),[t]:parseFloat(s),[e]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},bD=n=>So(0,255,n),Mv={...Cc,transform:n=>Math.round(bD(n))},gl={test:M0("rgb","red"),parse:SC("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+Mv.transform(n)+", "+Mv.transform(t)+", "+Mv.transform(e)+", "+pf(Of.transform(i))+")"};function SD(n){let t="",e="",i="",r="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),t+=t,e+=e,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Q_={test:M0("#"),parse:SD,transform:gl.transform},ad=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),pa=ad("deg"),Us=ad("%"),xe=ad("px"),MD=ad("vh"),TD=ad("vw"),VS={...Us,parse:n=>Us.parse(n)/100,transform:n=>Us.transform(n*100)},Ju={test:M0("hsl","hue"),parse:SC("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+Us.transform(pf(t))+", "+Us.transform(pf(e))+", "+pf(Of.transform(i))+")"},zn={test:n=>gl.test(n)||Q_.test(n)||Ju.test(n),parse:n=>gl.test(n)?gl.parse(n):Ju.test(n)?Ju.parse(n):Q_.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?gl.transform(n):Ju.transform(n),getAnimatableNone:n=>{const t=zn.parse(n);return t.alpha=0,zn.transform(t)}},ED=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function PD(n){return isNaN(n)&&typeof n=="string"&&(n.match(S0)?.length||0)+(n.match(ED)?.length||0)>0}const MC="number",TC="color",CD="var",AD="var(",US="${}",LD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nf(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=t.replace(LD,c=>(zn.test(c)?(i.color.push(s),r.push(TC),e.push(zn.parse(c))):c.startsWith(AD)?(i.var.push(s),r.push(CD),e.push(c)):(i.number.push(s),r.push(MC),e.push(parseFloat(c))),++s,US)).split(US);return{values:e,split:a,indexes:i,types:r}}function EC(n){return Nf(n).values}function PC(n){const{split:t,types:e}=Nf(n),i=t.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=t[o],r[o]!==void 0){const a=e[o];a===MC?s+=pf(r[o]):a===TC?s+=zn.transform(r[o]):s+=r[o]}return s}}const kD=n=>typeof n=="number"?0:zn.test(n)?zn.getAnimatableNone(n):n;function RD(n){const t=EC(n);return PC(n)(t.map(kD))}const Ta={test:PD,parse:EC,createTransformer:PC,getAnimatableNone:RD};function Tv(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function ID({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let r=0,s=0,o=0;if(!t)r=s=o=e;else{const a=e<.5?e*(1+t):e+t-e*t,c=2*e-a;r=Tv(c,a,n+1/3),s=Tv(c,a,n),o=Tv(c,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function Wm(n,t){return e=>e>0?t:n}const Mn=(n,t,e)=>n+(t-n)*e,Ev=(n,t,e)=>{const i=n*n,r=e*(t*t-i)+i;return r<0?0:Math.sqrt(r)},DD=[Q_,gl,Ju],OD=n=>DD.find(t=>t.test(n));function HS(n){const t=OD(n);if(!t)return!1;let e=t.parse(n);return t===Ju&&(e=ID(e)),e}const jS=(n,t)=>{const e=HS(n),i=HS(t);if(!e||!i)return Wm(n,t);const r={...e};return s=>(r.red=Ev(e.red,i.red,s),r.green=Ev(e.green,i.green,s),r.blue=Ev(e.blue,i.blue,s),r.alpha=Mn(e.alpha,i.alpha,s),gl.transform(r))},tx=new Set(["none","hidden"]);function ND(n,t){return tx.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function FD(n,t){return e=>Mn(n,t,e)}function T0(n){return typeof n=="number"?FD:typeof n=="string"?b0(n)?Wm:zn.test(n)?jS:VD:Array.isArray(n)?CC:typeof n=="object"?zn.test(n)?jS:zD:Wm}function CC(n,t){const e=[...n],i=e.length,r=n.map((s,o)=>T0(s)(s,t[o]));return s=>{for(let o=0;o<i;o++)e[o]=r[o](s);return e}}function zD(n,t){const e={...n,...t},i={};for(const r in e)n[r]!==void 0&&t[r]!==void 0&&(i[r]=T0(n[r])(n[r],t[r]));return r=>{for(const s in i)e[s]=i[s](r);return e}}function BD(n,t){const e=[],i={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const s=t.types[r],o=n.indexes[s][i[s]],a=n.values[o]??0;e[r]=a,i[s]++}return e}const VD=(n,t)=>{const e=Ta.createTransformer(t),i=Nf(n),r=Nf(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?tx.has(n)&&!r.values.length||tx.has(t)&&!i.values.length?ND(n,t):sd(CC(BD(i,r),r.values),e):Wm(n,t)};function AC(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?Mn(n,t,e):T0(n)(n,t)}const UD=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>_n.update(t,e),stop:()=>Ma(t),now:()=>oi.isProcessing?oi.timestamp:Yi.now()}},LC=(n,t,e=10)=>{let i="";const r=Math.max(Math.round(t/e),2);for(let s=0;s<r;s++)i+=Math.round(n(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Gm=2e4;function E0(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<Gm;)t+=e,i=n.next(t);return t>=Gm?1/0:t}function HD(n,t=100,e){const i=e({...n,keyframes:[0,t]}),r=Math.min(E0(i),Gm);return{type:"keyframes",ease:s=>i.next(r*s).value/t,duration:Vs(r)}}const jD=5;function kC(n,t,e){const i=Math.max(t-jD,0);return cC(e-n(i),t-i)}const An={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Pv=.001;function WD({duration:n=An.duration,bounce:t=An.bounce,velocity:e=An.velocity,mass:i=An.mass}){let r,s,o=1-t;o=So(An.minDamping,An.maxDamping,o),n=So(An.minDuration,An.maxDuration,Vs(n)),o<1?(r=f=>{const d=f*o,m=d*n,y=d-e,v=ex(f,o),w=Math.exp(-m);return Pv-y/v*w},s=f=>{const m=f*o*n,y=m*e+e,v=Math.pow(o,2)*Math.pow(f,2)*n,w=Math.exp(-m),S=ex(Math.pow(f,2),o);return(-r(f)+Pv>0?-1:1)*((y-v)*w)/S}):(r=f=>{const d=Math.exp(-f*n),m=(f-e)*n+1;return-Pv+d*m},s=f=>{const d=Math.exp(-f*n),m=(e-f)*(n*n);return d*m});const a=5/n,c=$D(r,s,a);if(n=Bs(n),isNaN(c))return{stiffness:An.stiffness,damping:An.damping,duration:n};{const f=Math.pow(c,2)*i;return{stiffness:f,damping:o*2*Math.sqrt(i*f),duration:n}}}const GD=12;function $D(n,t,e){let i=e;for(let r=1;r<GD;r++)i=i-n(i)/t(i);return i}function ex(n,t){return n*Math.sqrt(1-t*t)}const ZD=["duration","bounce"],qD=["stiffness","damping","mass"];function WS(n,t){return t.some(e=>n[e]!==void 0)}function XD(n){let t={velocity:An.velocity,stiffness:An.stiffness,damping:An.damping,mass:An.mass,isResolvedFromDuration:!1,...n};if(!WS(n,qD)&&WS(n,ZD))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),r=i*i,s=2*So(.05,1,1-(n.bounce||0))*Math.sqrt(r);t={...t,mass:An.mass,stiffness:r,damping:s}}else{const e=WD(n);t={...t,...e,mass:An.mass},t.isResolvedFromDuration=!0}return t}function $m(n=An.visualDuration,t=An.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:r}=e;const s=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],a={done:!1,value:s},{stiffness:c,damping:f,mass:d,duration:m,velocity:y,isResolvedFromDuration:v}=XD({...e,velocity:-Vs(e.velocity||0)}),w=y||0,S=f/(2*Math.sqrt(c*d)),P=o-s,b=Vs(Math.sqrt(c/d)),M=Math.abs(P)<5;i||(i=M?An.restSpeed.granular:An.restSpeed.default),r||(r=M?An.restDelta.granular:An.restDelta.default);let R;if(S<1){const k=ex(b,S);R=N=>{const D=Math.exp(-S*b*N);return o-D*((w+S*b*P)/k*Math.sin(k*N)+P*Math.cos(k*N))}}else if(S===1)R=k=>o-Math.exp(-b*k)*(P+(w+b*P)*k);else{const k=b*Math.sqrt(S*S-1);R=N=>{const D=Math.exp(-S*b*N),I=Math.min(k*N,300);return o-D*((w+S*b*P)*Math.sinh(I)+k*P*Math.cosh(I))/k}}const O={calculatedDuration:v&&m||null,next:k=>{const N=R(k);if(v)a.done=k>=m;else{let D=k===0?w:0;S<1&&(D=k===0?Bs(w):kC(R,k,N));const I=Math.abs(D)<=i,H=Math.abs(o-N)<=r;a.done=I&&H}return a.value=a.done?o:N,a},toString:()=>{const k=Math.min(E0(O),Gm),N=LC(D=>O.next(k*D).value,k,30);return k+"ms "+N},toTransition:()=>{}};return O}$m.applyToOptions=n=>{const t=HD(n,100,$m);return n.ease=t.ease,n.duration=Bs(t.duration),n.type="keyframes",n};function nx({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:f=.5,restSpeed:d}){const m=n[0],y={done:!1,value:m},v=I=>a!==void 0&&I<a||c!==void 0&&I>c,w=I=>a===void 0?c:c===void 0||Math.abs(a-I)<Math.abs(c-I)?a:c;let S=e*t;const P=m+S,b=o===void 0?P:o(P);b!==P&&(S=b-m);const M=I=>-S*Math.exp(-I/i),R=I=>b+M(I),O=I=>{const H=M(I),W=R(I);y.done=Math.abs(H)<=f,y.value=y.done?b:W};let k,N;const D=I=>{v(y.value)&&(k=I,N=$m({keyframes:[y.value,w(y.value)],velocity:kC(R,I,y.value),damping:r,stiffness:s,restDelta:f,restSpeed:d}))};return D(0),{calculatedDuration:null,next:I=>{let H=!1;return!N&&k===void 0&&(H=!0,O(I),D(I)),k!==void 0&&I>=k?N.next(I-k):(!H&&O(I),y)}}}function YD(n,t,e){const i=[],r=e||Mo.mix||AC,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(t){const c=Array.isArray(t)?t[o]||Wr:t;a=sd(c,a)}i.push(a)}return i}function KD(n,t,{clamp:e=!0,ease:i,mixer:r}={}){const s=n.length;if(g0(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),t=[...t].reverse());const a=YD(t,i,r),c=a.length,f=d=>{if(o&&d<n[0])return t[0];let m=0;if(c>1)for(;m<n.length-2&&!(d<n[m+1]);m++);const y=Df(n[m],n[m+1],d);return a[m](y)};return e?d=>f(So(n[0],n[s-1],d)):f}function JD(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const r=Df(0,t,i);n.push(Mn(e,1,r))}}function QD(n){const t=[0];return JD(t,n.length-1),t}function t3(n,t){return n.map(e=>e*t)}function e3(n,t){return n.map(()=>t||_C).splice(0,n.length-1)}function mf({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const r=fD(i)?i.map(BS):BS(i),s={done:!1,value:t[0]},o=t3(e&&e.length===t.length?e:QD(t),n),a=KD(o,t,{ease:Array.isArray(r)?r:e3(t,r)});return{calculatedDuration:n,next:c=>(s.value=a(c),s.done=c>=n,s)}}const n3=n=>n!==null;function P0(n,{repeat:t,repeatType:e="loop"},i,r=1){const s=n.filter(n3),a=r<0||t&&e!=="loop"&&t%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const i3={decay:nx,inertia:nx,tween:mf,keyframes:mf,spring:$m};function RC(n){typeof n.type=="string"&&(n.type=i3[n.type])}class C0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const r3=n=>n/100;class A0 extends C0{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==Yi.now()&&this.tick(Yi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;RC(t);const{type:e=mf,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=t;let{keyframes:a}=t;const c=e||mf;c!==mf&&typeof a[0]!="number"&&(this.mixKeyframes=sd(r3,AC(a[0],a[1])),a=[0,100]);const f=c({...t,keyframes:a});s==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...a].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=E0(f));const{calculatedDuration:d}=f;this.calculatedDuration=d,this.resolvedDuration=d+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:d,repeat:m,repeatType:y,repeatDelay:v,type:w,onUpdate:S,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const b=this.currentTime-f*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?b<0:b>r;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let R=this.currentTime,O=i;if(m){const I=Math.min(this.currentTime,r)/a;let H=Math.floor(I),W=I%1;!W&&I>=1&&(W=1),W===1&&H--,H=Math.min(H,m+1),!!(H%2)&&(y==="reverse"?(W=1-W,v&&(W-=v/a)):y==="mirror"&&(O=o)),R=So(0,1,W)*a}const k=M?{done:!1,value:d[0]}:O.next(R);s&&(k.value=s(k.value));let{done:N}=k;!M&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return D&&w!==nx&&(k.value=P0(d,this.options,P,this.speed)),S&&S(k.value),D&&this.finish(),k}then(t,e){return this.finished.then(t,e)}get duration(){return Vs(this.calculatedDuration)}get time(){return Vs(this.currentTime)}set time(t){t=Bs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Yi.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Vs(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=UD,startTime:e}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=e??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function s3(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const yl=n=>n*180/Math.PI,ix=n=>{const t=yl(Math.atan2(n[1],n[0]));return rx(t)},o3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:ix,rotateZ:ix,skewX:n=>yl(Math.atan(n[1])),skewY:n=>yl(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},rx=n=>(n=n%360,n<0&&(n+=360),n),GS=ix,$S=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),ZS=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),a3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$S,scaleY:ZS,scale:n=>($S(n)+ZS(n))/2,rotateX:n=>rx(yl(Math.atan2(n[6],n[5]))),rotateY:n=>rx(yl(Math.atan2(-n[2],n[0]))),rotateZ:GS,rotate:GS,skewX:n=>yl(Math.atan(n[4])),skewY:n=>yl(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function sx(n){return n.includes("scale")?1:0}function ox(n,t){if(!n||n==="none")return sx(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(e)i=a3,r=e;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=o3,r=a}if(!r)return sx(t);const s=i[t],o=r[1].split(",").map(u3);return typeof s=="function"?s(o):o[s]}const l3=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return ox(e,t)};function u3(n){return parseFloat(n.trim())}const Ac=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lc=new Set(Ac),qS=n=>n===Cc||n===xe,c3=new Set(["x","y","z"]),h3=Ac.filter(n=>!c3.has(n));function f3(n){const t=[];return h3.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const bl={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>ox(t,"x"),y:(n,{transform:t})=>ox(t,"y")};bl.translateX=bl.x;bl.translateY=bl.y;const Sl=new Set;let ax=!1,lx=!1,ux=!1;function IC(){if(lx){const n=Array.from(Sl).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const r=f3(i);r.length&&(e.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const r=e.get(i);r&&r.forEach(([s,o])=>{i.getValue(s)?.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}lx=!1,ax=!1,Sl.forEach(n=>n.complete(ux)),Sl.clear()}function DC(){Sl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(lx=!0)})}function d3(){ux=!0,DC(),IC(),ux=!1}class L0{constructor(t,e,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Sl.add(this),ax||(ax=!0,_n.read(DC),_n.resolveKeyframes(IC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:r}=this;if(t[0]===null){const s=r?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(i&&e){const a=i.readValue(e,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),r&&s===void 0&&r.set(t[0])}s3(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Sl.delete(this)}cancel(){this.state==="scheduled"&&(Sl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const p3=n=>n.startsWith("--");function m3(n,t,e){p3(t)?n.style.setProperty(t,e):n.style[t]=e}const g3=y0(()=>window.ScrollTimeline!==void 0),y3={};function v3(n,t){const e=y0(n);return()=>y3[t]??e()}const OC=v3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rf=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,XS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rf([0,.65,.55,1]),circOut:rf([.55,0,1,.45]),backIn:rf([.31,.01,.66,-.59]),backOut:rf([.33,1.53,.69,.99])};function NC(n,t){if(n)return typeof n=="function"?OC()?LC(n,t):"ease-out":xC(n)?rf(n):Array.isArray(n)?n.map(e=>NC(e,t)||XS.easeOut):XS[n]}function _3(n,t,e,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:c}={},f=void 0){const d={[t]:e};c&&(d.offset=c);const m=NC(a,r);Array.isArray(m)&&(d.easing=m);const y={delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),n.animate(d,y)}function FC(n){return typeof n=="function"&&"applyToOptions"in n}function x3({type:n,...t}){return FC(n)&&OC()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class w3 extends C0{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,g0(typeof t.type!="string");const f=x3(t);this.animation=_3(e,i,r,f,s),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=P0(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):m3(e,i,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Vs(Number(t))}get time(){return Vs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Bs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&g3()?(this.animation.timeline=t,Wr):e(this)}}const zC={anticipate:gC,backInOut:mC,circInOut:vC};function b3(n){return n in zC}function S3(n){typeof n.ease=="string"&&b3(n.ease)&&(n.ease=zC[n.ease])}const YS=10;class M3 extends w3{constructor(t){S3(t),RC(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const a=new A0({...o,autoplay:!1}),c=Bs(this.finishedTime??this.time);e.setWithVelocity(a.sample(c-YS).value,a.sample(c).value,YS),a.stop()}}const KS=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ta.test(n)||n==="0")&&!n.startsWith("url("));function T3(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function E3(n,t,e,i){const r=n[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const s=n[n.length-1],o=KS(r,t),a=KS(s,t);return!o||!a?!1:T3(n)||(e==="spring"||FC(e))&&i}function cx(n){n.duration=0,n.type}const P3=new Set(["opacity","clipPath","filter","transform"]),C3=y0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function A3(n){const{motionValue:t,name:e,repeatDelay:i,repeatType:r,damping:s,type:o}=n;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=t.owner.getProps();return C3()&&e&&P3.has(e)&&(e!=="transform"||!f)&&!c&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const L3=40;class k3 extends C0{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:c,motionValue:f,element:d,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Yi.now();const y={autoplay:t,delay:e,type:i,repeat:r,repeatDelay:s,repeatType:o,name:c,motionValue:f,element:d,...m},v=d?.KeyframeResolver||L0;this.keyframeResolver=new v(a,(w,S,P)=>this.onKeyframesResolved(w,S,y,!P),c,f,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:c,isHandoff:f,onUpdate:d}=i;this.resolvedAt=Yi.now(),E3(t,s,o,a)||((Mo.instantAnimations||!c)&&d?.(P0(t,i,e)),t[0]=t[t.length-1],cx(i),i.repeat=0);const y={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>L3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...i,keyframes:t},v=!f&&A3(y)?new M3({...y,element:y.motionValue.owner.current}):new A0(y);v.finished.then(()=>this.notifyFinished()).catch(Wr),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),d3()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const R3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function I3(n){const t=R3.exec(n);if(!t)return[,];const[,e,i,r]=t;return[`--${e??i}`,r]}function BC(n,t,e=1){const[i,r]=I3(n);if(!i)return;const s=window.getComputedStyle(t).getPropertyValue(i);if(s){const o=s.trim();return aC(o)?parseFloat(o):o}return b0(r)?BC(r,t,e+1):r}function k0(n,t){return n?.[t]??n?.default??n}const VC=new Set(["width","height","top","left","right","bottom",...Ac]),D3={test:n=>n==="auto",parse:n=>n},UC=n=>t=>t.test(n),HC=[Cc,xe,Us,pa,TD,MD,D3],JS=n=>HC.find(UC(n));function O3(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||uC(n):!0}const N3=new Set(["brightness","contrast","saturate","opacity"]);function F3(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(S0)||[];if(!i)return n;const r=e.replace(i,"");let s=N3.has(t)?1:0;return i!==e&&(s*=100),t+"("+s+r+")"}const z3=/\b([a-z-]*)\(.*?\)/gu,hx={...Ta,getAnimatableNone:n=>{const t=n.match(z3);return t?t.map(F3).join(" "):n}},QS={...Cc,transform:Math.round},B3={rotate:pa,rotateX:pa,rotateY:pa,rotateZ:pa,scale:Rp,scaleX:Rp,scaleY:Rp,scaleZ:Rp,skew:pa,skewX:pa,skewY:pa,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:Of,originX:VS,originY:VS,originZ:xe},R0={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,backgroundPositionX:xe,backgroundPositionY:xe,...B3,zIndex:QS,fillOpacity:Of,strokeOpacity:Of,numOctaves:QS},V3={...R0,color:zn,backgroundColor:zn,outlineColor:zn,fill:zn,stroke:zn,borderColor:zn,borderTopColor:zn,borderRightColor:zn,borderBottomColor:zn,borderLeftColor:zn,filter:hx,WebkitFilter:hx},jC=n=>V3[n];function WC(n,t){let e=jC(n);return e!==hx&&(e=Ta),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const U3=new Set(["auto","none","0"]);function H3(n,t,e){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!U3.has(s)&&Nf(s).values.length&&(r=n[i]),i++}if(r&&e)for(const s of t)n[s]=WC(e,r)}class j3 extends L0{constructor(t,e,i,r,s){super(t,e,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let f=t[c];if(typeof f=="string"&&(f=f.trim(),b0(f))){const d=BC(f,e.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!VC.has(i)||t.length!==2)return;const[r,s]=t,o=JS(r),a=JS(s);if(o!==a)if(qS(o)&&qS(a))for(let c=0;c<t.length;c++){const f=t[c];typeof f=="string"&&(t[c]=parseFloat(f))}else bl[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let r=0;r<t.length;r++)(t[r]===null||O3(t[r]))&&i.push(r);i.length&&H3(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bl[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];r!==void 0&&t.getValue(i,r).jump(r,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const r=t.getValue(e);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=bl[e](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,c])=>{t.getValue(a).set(c)}),this.resolveNoneKeyframes()}}function W3(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=e?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const GC=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function $C(n){return lC(n)&&"offsetHeight"in n}const t1=30,G3=n=>!isNaN(parseFloat(n));class $3{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Yi.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Yi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=G3(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new v0);const i=this.events[t].add(e);return t==="change"?()=>{i(),_n.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Yi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>t1)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,t1);return cC(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yc(n,t){return new $3(n,t)}const{schedule:I0}=wC(queueMicrotask,!1),fs={x:!1,y:!1};function ZC(){return fs.x||fs.y}function Z3(n){return n==="x"||n==="y"?fs[n]?null:(fs[n]=!0,()=>{fs[n]=!1}):fs.x||fs.y?null:(fs.x=fs.y=!0,()=>{fs.x=fs.y=!1})}function qC(n,t){const e=W3(n),i=new AbortController,r={passive:!0,...t,signal:i.signal};return[e,r,()=>i.abort()]}function e1(n){return!(n.pointerType==="touch"||ZC())}function q3(n,t,e={}){const[i,r,s]=qC(n,e),o=a=>{if(!e1(a))return;const{target:c}=a,f=t(c,a);if(typeof f!="function"||!c)return;const d=m=>{e1(m)&&(f(m),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const XC=(n,t)=>t?n===t?!0:XC(n,t.parentElement):!1,D0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,X3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Y3(n){return X3.has(n.tagName)||n.tabIndex!==-1}const Rm=new WeakSet;function n1(n){return t=>{t.key==="Enter"&&n(t)}}function Cv(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const K3=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=n1(()=>{if(Rm.has(e))return;Cv(e,"down");const r=n1(()=>{Cv(e,"up")}),s=()=>Cv(e,"cancel");e.addEventListener("keyup",r,t),e.addEventListener("blur",s,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function i1(n){return D0(n)&&!ZC()}function J3(n,t,e={}){const[i,r,s]=qC(n,e),o=a=>{const c=a.currentTarget;if(!i1(a))return;Rm.add(c);const f=t(c,a),d=(v,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),Rm.has(c)&&Rm.delete(c),i1(v)&&typeof f=="function"&&f(v,{success:w})},m=v=>{d(v,c===window||c===document||e.useGlobalTarget||XC(c,v.target))},y=v=>{d(v,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",y,r)};return i.forEach(a=>{(e.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),$C(a)&&(a.addEventListener("focus",f=>K3(f,r)),!Y3(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function YC(n){return lC(n)&&"ownerSVGElement"in n}function Q3(n){return YC(n)&&n.tagName==="svg"}const wi=n=>!!(n&&n.getVelocity),tO=[...HC,zn,Ta],eO=n=>tO.find(UC(n)),O0=Q.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class nO extends Q.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const i=e.offsetParent,r=$C(i)&&i.offsetWidth||0,s=this.props.sizeRef.current;s.height=e.offsetHeight||0,s.width=e.offsetWidth||0,s.top=e.offsetTop,s.left=e.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function iO({children:n,isPresent:t,anchorX:e,root:i}){const r=Q.useId(),s=Q.useRef(null),o=Q.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=Q.useContext(O0);return Q.useInsertionEffect(()=>{const{width:c,height:f,top:d,left:m,right:y}=o.current;if(t||!s.current||!c||!f)return;const v=e==="left"?`left: ${m}`:`right: ${y}`;s.current.dataset.motionPopId=r;const w=document.createElement("style");a&&(w.nonce=a);const S=i??document.head;return S.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            ${v}px !important;
            top: ${d}px !important;
          }
        `),()=>{S.contains(w)&&S.removeChild(w)}},[t]),B.jsx(nO,{isPresent:t,childRef:s,sizeRef:o,children:Q.cloneElement(n,{ref:s})})}const rO=({children:n,initial:t,isPresent:e,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o,anchorX:a,root:c})=>{const f=f0(sO),d=Q.useId();let m=!0,y=Q.useMemo(()=>(m=!1,{id:d,initial:t,isPresent:e,custom:r,onExitComplete:v=>{f.set(v,!0);for(const w of f.values())if(!w)return;i&&i()},register:v=>(f.set(v,!1),()=>f.delete(v))}),[e,f,i]);return s&&m&&(y={...y}),Q.useMemo(()=>{f.forEach((v,w)=>f.set(w,!1))},[e]),Q.useEffect(()=>{!e&&!f.size&&i&&i()},[e]),o==="popLayout"&&(n=B.jsx(iO,{isPresent:e,anchorX:a,root:c,children:n})),B.jsx(gg.Provider,{value:y,children:n})};function sO(){return new Map}function KC(n=!0){const t=Q.useContext(gg);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:r}=t,s=Q.useId();Q.useEffect(()=>{if(n)return r(s)},[n]);const o=Q.useCallback(()=>n&&i&&i(s),[s,i,n]);return!e&&i?[!1,o]:[!0]}const Ip=n=>n.key||"";function r1(n){const t=[];return Q.Children.forEach(n,e=>{Q.isValidElement(e)&&t.push(e)}),t}const JC=({children:n,custom:t,initial:e=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:c})=>{const[f,d]=KC(o),m=Q.useMemo(()=>r1(n),[n]),y=o&&!f?[]:m.map(Ip),v=Q.useRef(!0),w=Q.useRef(m),S=f0(()=>new Map),[P,b]=Q.useState(m),[M,R]=Q.useState(m);oC(()=>{v.current=!1,w.current=m;for(let N=0;N<M.length;N++){const D=Ip(M[N]);y.includes(D)?S.delete(D):S.get(D)!==!0&&S.set(D,!1)}},[M,y.length,y.join("-")]);const O=[];if(m!==P){let N=[...m];for(let D=0;D<M.length;D++){const I=M[D],H=Ip(I);y.includes(H)||(N.splice(D,0,I),O.push(I))}return s==="wait"&&O.length&&(N=O),R(r1(N)),b(m),null}const{forceRender:k}=Q.useContext(h0);return B.jsx(B.Fragment,{children:M.map(N=>{const D=Ip(N),I=o&&!f?!1:m===M||y.includes(D),H=()=>{if(S.has(D))S.set(D,!0);else return;let W=!0;S.forEach(U=>{U||(W=!1)}),W&&(k?.(),R(w.current),o&&d?.(),i&&i())};return B.jsx(rO,{isPresent:I,initial:!v.current||e?void 0:!1,custom:t,presenceAffectsLayout:r,mode:s,root:c,onExitComplete:I?void 0:H,anchorX:a,children:N},D)})})},QC=Q.createContext({strict:!1}),s1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vc={};for(const n in s1)vc[n]={isEnabled:t=>s1[n].some(e=>!!t[e])};function oO(n){for(const t in n)vc[t]={...vc[t],...n[t]}}const aO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zm(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||aO.has(n)}let tA=n=>!Zm(n);function lO(n){typeof n=="function"&&(tA=t=>t.startsWith("on")?!Zm(t):n(t))}try{lO(require("@emotion/is-prop-valid").default)}catch{}function uO(n,t,e){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(tA(r)||e===!0&&Zm(r)||!t&&!Zm(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const yg=Q.createContext({});function vg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Ff(n){return typeof n=="string"||Array.isArray(n)}const N0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],F0=["initial",...N0];function _g(n){return vg(n.animate)||F0.some(t=>Ff(n[t]))}function eA(n){return!!(_g(n)||n.variants)}function cO(n,t){if(_g(n)){const{initial:e,animate:i}=n;return{initial:e===!1||Ff(e)?e:void 0,animate:Ff(i)?i:void 0}}return n.inherit!==!1?t:{}}function hO(n){const{initial:t,animate:e}=cO(n,Q.useContext(yg));return Q.useMemo(()=>({initial:t,animate:e}),[o1(t),o1(e)])}function o1(n){return Array.isArray(n)?n.join(" "):n}const zf={};function fO(n){for(const t in n)zf[t]=n[t],w0(t)&&(zf[t].isCSSVariable=!0)}function nA(n,{layout:t,layoutId:e}){return Lc.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!zf[n]||n==="opacity")}const dO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pO=Ac.length;function mO(n,t,e){let i="",r=!0;for(let s=0;s<pO;s++){const o=Ac[s],a=n[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||e){const f=GC(a,R0[o]);if(!c){r=!1;const d=dO[o]||o;i+=`${d}(${f}) `}e&&(t[o]=f)}}return i=i.trim(),e?i=e(t,r?"":i):r&&(i="none"),i}function z0(n,t,e){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const c in t){const f=t[c];if(Lc.has(c)){o=!0;continue}else if(w0(c)){r[c]=f;continue}else{const d=GC(f,R0[c]);c.startsWith("origin")?(a=!0,s[c]=d):i[c]=d}}if(t.transform||(o||e?i.transform=mO(t,n.transform,e):i.transform&&(i.transform="none")),a){const{originX:c="50%",originY:f="50%",originZ:d=0}=s;i.transformOrigin=`${c} ${f} ${d}`}}const B0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iA(n,t,e){for(const i in t)!wi(t[i])&&!nA(i,e)&&(n[i]=t[i])}function gO({transformTemplate:n},t){return Q.useMemo(()=>{const e=B0();return z0(e,t,n),Object.assign({},e.vars,e.style)},[t])}function yO(n,t){const e=n.style||{},i={};return iA(i,e,n),Object.assign(i,gO(n,t)),i}function vO(n,t){const e={},i=yO(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const _O={offset:"stroke-dashoffset",array:"stroke-dasharray"},xO={offset:"strokeDashoffset",array:"strokeDasharray"};function wO(n,t,e=1,i=0,r=!0){n.pathLength=1;const s=r?_O:xO;n[s.offset]=xe.transform(-i);const o=xe.transform(t),a=xe.transform(e);n[s.array]=`${o} ${a}`}function rA(n,{attrX:t,attrY:e,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...a},c,f,d){if(z0(n,a,f),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y}=n;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=d?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),e!==void 0&&(m.y=e),i!==void 0&&(m.scale=i),r!==void 0&&wO(m,r,s,o,!1)}const sA=()=>({...B0(),attrs:{}}),oA=n=>typeof n=="string"&&n.toLowerCase()==="svg";function bO(n,t,e,i){const r=Q.useMemo(()=>{const s=sA();return rA(s,t,oA(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[t]);if(n.style){const s={};iA(s,n.style,n),r.style={...s,...r.style}}return r}const SO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function V0(n){return typeof n!="string"||n.includes("-")?!1:!!(SO.indexOf(n)>-1||/[A-Z]/u.test(n))}function MO(n,t,e,{latestValues:i},r,s=!1){const a=(V0(n)?bO:vO)(t,i,r,n),c=uO(t,typeof n=="string",s),f=n!==Q.Fragment?{...c,...a,ref:e}:{},{children:d}=t,m=Q.useMemo(()=>wi(d)?d.get():d,[d]);return Q.createElement(n,{...f,children:m})}function a1(n){const t=[{},{}];return n?.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function U0(n,t,e,i){if(typeof t=="function"){const[r,s]=a1(i);t=t(e!==void 0?e:n.custom,r,s)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[r,s]=a1(i);t=t(e!==void 0?e:n.custom,r,s)}return t}function Im(n){return wi(n)?n.get():n}function TO({scrapeMotionValuesFromProps:n,createRenderState:t},e,i,r){return{latestValues:EO(e,i,r,n),renderState:t()}}function EO(n,t,e,i){const r={},s=i(n,{});for(const y in s)r[y]=Im(s[y]);let{initial:o,animate:a}=n;const c=_g(n),f=eA(n);t&&f&&!c&&n.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let d=e?e.initial===!1:!1;d=d||o===!1;const m=d?a:o;if(m&&typeof m!="boolean"&&!vg(m)){const y=Array.isArray(m)?m:[m];for(let v=0;v<y.length;v++){const w=U0(n,y[v]);if(w){const{transitionEnd:S,transition:P,...b}=w;for(const M in b){let R=b[M];if(Array.isArray(R)){const O=d?R.length-1:0;R=R[O]}R!==null&&(r[M]=R)}for(const M in S)r[M]=S[M]}}}return r}const aA=n=>(t,e)=>{const i=Q.useContext(yg),r=Q.useContext(gg),s=()=>TO(n,t,i,r);return e?s():f0(s)};function H0(n,t,e){const{style:i}=n,r={};for(const s in i)(wi(i[s])||t.style&&wi(t.style[s])||nA(s,n)||e?.getValue(s)?.liveStyle!==void 0)&&(r[s]=i[s]);return r}const PO=aA({scrapeMotionValuesFromProps:H0,createRenderState:B0});function lA(n,t,e){const i=H0(n,t,e);for(const r in n)if(wi(n[r])||wi(t[r])){const s=Ac.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const CO=aA({scrapeMotionValuesFromProps:lA,createRenderState:sA}),AO=Symbol.for("motionComponentSymbol");function Qu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function LO(n,t,e){return Q.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Qu(e)&&(e.current=i))},[t])}const j0=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),kO="framerAppearId",uA="data-"+j0(kO),cA=Q.createContext({});function RO(n,t,e,i,r){const{visualElement:s}=Q.useContext(yg),o=Q.useContext(QC),a=Q.useContext(gg),c=Q.useContext(O0).reducedMotion,f=Q.useRef(null);i=i||o.renderer,!f.current&&i&&(f.current=i(n,{visualState:t,parent:s,props:e,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const d=f.current,m=Q.useContext(cA);d&&!d.projection&&r&&(d.type==="html"||d.type==="svg")&&IO(f.current,e,r,m);const y=Q.useRef(!1);Q.useInsertionEffect(()=>{d&&y.current&&d.update(e,a)});const v=e[uA],w=Q.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return oC(()=>{d&&(y.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),w.current&&d.animationState&&d.animationState.animateChanges())}),Q.useEffect(()=>{d&&(!w.current&&d.animationState&&d.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),w.current=!1),d.enteringChildren=void 0)}),d}function IO(n,t,e,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:f,layoutCrossfade:d}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:hA(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Qu(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:c,layoutRoot:f})}function hA(n){if(n)return n.options.allowProjection!==!1?n.projection:hA(n.parent)}function Av(n,{forwardMotionProps:t=!1}={},e,i){e&&oO(e);const r=V0(n)?CO:PO;function s(a,c){let f;const d={...Q.useContext(O0),...a,layoutId:DO(a)},{isStatic:m}=d,y=hO(a),v=r(a,m);if(!m&&d0){OO();const w=NO(d);f=w.MeasureLayout,y.visualElement=RO(n,v,d,i,w.ProjectionNode)}return B.jsxs(yg.Provider,{value:y,children:[f&&y.visualElement?B.jsx(f,{visualElement:y.visualElement,...d}):null,MO(n,a,LO(v,y.visualElement,c),v,m,t)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=Q.forwardRef(s);return o[AO]=n,o}function DO({layoutId:n}){const t=Q.useContext(h0).id;return t&&n!==void 0?t+"-"+n:n}function OO(n,t){Q.useContext(QC).strict}function NO(n){const{drag:t,layout:e}=vc;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t?.isEnabled(n)||e?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function FO(n,t){if(typeof Proxy>"u")return Av;const e=new Map,i=(s,o)=>Av(s,o,n,t),r=(s,o)=>i(s,o);return new Proxy(r,{get:(s,o)=>o==="create"?i:(e.has(o)||e.set(o,Av(o,void 0,n,t)),e.get(o))})}function fA({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function zO({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function BO(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function Lv(n){return n===void 0||n===1}function fx({scale:n,scaleX:t,scaleY:e}){return!Lv(n)||!Lv(t)||!Lv(e)}function cl(n){return fx(n)||dA(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function dA(n){return l1(n.x)||l1(n.y)}function l1(n){return n&&n!=="0%"}function qm(n,t,e){const i=n-e,r=t*i;return e+r}function u1(n,t,e,i,r){return r!==void 0&&(n=qm(n,r,i)),qm(n,e,i)+t}function dx(n,t=0,e=1,i,r){n.min=u1(n.min,t,e,i,r),n.max=u1(n.max,t,e,i,r)}function pA(n,{x:t,y:e}){dx(n.x,t.translate,t.scale,t.originPoint),dx(n.y,e.translate,e.scale,e.originPoint)}const c1=.999999999999,h1=1.0000000000001;function VO(n,t,e,i=!1){const r=e.length;if(!r)return;t.x=t.y=1;let s,o;for(let a=0;a<r;a++){s=e[a],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ec(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,pA(n,o)),i&&cl(s.latestValues)&&ec(n,s.latestValues))}t.x<h1&&t.x>c1&&(t.x=1),t.y<h1&&t.y>c1&&(t.y=1)}function tc(n,t){n.min=n.min+t,n.max=n.max+t}function f1(n,t,e,i,r=.5){const s=Mn(n.min,n.max,r);dx(n,t,e,s,i)}function ec(n,t){f1(n.x,t.x,t.scaleX,t.scale,t.originX),f1(n.y,t.y,t.scaleY,t.scale,t.originY)}function mA(n,t){return fA(BO(n.getBoundingClientRect(),t))}function UO(n,t,e){const i=mA(n,e),{scroll:r}=t;return r&&(tc(i.x,r.offset.x),tc(i.y,r.offset.y)),i}const d1=()=>({translate:0,scale:1,origin:0,originPoint:0}),nc=()=>({x:d1(),y:d1()}),p1=()=>({min:0,max:0}),In=()=>({x:p1(),y:p1()}),px={current:null},gA={current:!1};function HO(){if(gA.current=!0,!!d0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>px.current=n.matches;n.addEventListener("change",t),t()}else px.current=!1}const jO=new WeakMap;function WO(n,t,e){for(const i in t){const r=t[i],s=e[i];if(wi(r))n.addValue(i,r);else if(wi(s))n.addValue(i,yc(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,yc(o!==void 0?o:r,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const m1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class GO{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=L0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Yi.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,_n.render(this.render,!1,!0))};const{latestValues:c,renderState:f}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=e.initial?{...c}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=_g(e),this.isVariantNode=eA(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(e,{},this);for(const y in m){const v=m[y];c[y]!==void 0&&wi(v)&&v.set(c[y])}}mount(t){this.current=t,jO.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,i)=>this.bindToMotionValue(i,e)),gA.current||HO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:px.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ma(this.notifyUpdate),Ma(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Lc.has(t);i&&this.onBindTransform&&this.onBindTransform();const r=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&_n.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{r(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in vc){const e=vc[t];if(!e)continue;const{isEnabled:i,Feature:r}=e;if(!this.features[t]&&r&&i(this.props)&&(this.features[t]=new r(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):In()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<m1.length;i++){const r=m1[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=t[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=WO(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=yc(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(aC(i)||uC(i))?i=parseFloat(i):!eO(i)&&Ta.test(e)&&(i=WC(t,e)),this.setBaseTarget(t,wi(i)?i.get():i)),wi(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let i;if(typeof e=="string"||typeof e=="object"){const s=U0(this.props,e,this.presenceContext?.custom);s&&(i=s[t])}if(e&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!wi(r)?r:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new v0),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){I0.render(this.render)}}class yA extends GO{constructor(){super(...arguments),this.KeyframeResolver=j3}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;wi(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function vA(n,{style:t,vars:e},i,r){const s=n.style;let o;for(o in t)s[o]=t[o];r?.applyProjectionStyles(s,i);for(o in e)s.setProperty(o,e[o])}function $O(n){return window.getComputedStyle(n)}class ZO extends yA{constructor(){super(...arguments),this.type="html",this.renderInstance=vA}readValueFromInstance(t,e){if(Lc.has(e))return this.projection?.isProjecting?sx(e):l3(t,e);{const i=$O(t),r=(w0(e)?i.getPropertyValue(e):i[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return mA(t,e)}build(t,e,i){z0(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return H0(t,e,i)}}const _A=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qO(n,t,e,i){vA(n,t,void 0,i);for(const r in t.attrs)n.setAttribute(_A.has(r)?r:j0(r),t.attrs[r])}class XO extends yA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=In}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Lc.has(e)){const i=jC(e);return i&&i.default||0}return e=_A.has(e)?e:j0(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return lA(t,e,i)}build(t,e,i){rA(t,e,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,e,i,r){qO(t,e,i,r)}mount(t){this.isSVGTag=oA(t.tagName),super.mount(t)}}const YO=(n,t)=>V0(n)?new XO(t):new ZO(t,{allowProjection:n!==Q.Fragment});function ac(n,t,e){const i=n.getProps();return U0(i,t,e!==void 0?e:i.custom,n)}const mx=n=>Array.isArray(n);function KO(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,yc(e))}function JO(n){return mx(n)?n[n.length-1]||0:n}function QO(n,t){const e=ac(n,t);let{transitionEnd:i={},transition:r={},...s}=e||{};s={...s,...i};for(const o in s){const a=JO(s[o]);KO(n,o,a)}}function tN(n){return!!(wi(n)&&n.add)}function gx(n,t){const e=n.getValue("willChange");if(tN(e))return e.add(t);if(!e&&Mo.WillChange){const i=new Mo.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function xA(n){return n.props[uA]}const eN=n=>n!==null;function nN(n,{repeat:t,repeatType:e="loop"},i){const r=n.filter(eN),s=t&&e!=="loop"&&t%2===1?0:r.length-1;return r[s]}const iN={type:"spring",stiffness:500,damping:25,restSpeed:10},rN=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),sN={type:"keyframes",duration:.8},oN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aN=(n,{keyframes:t})=>t.length>2?sN:Lc.has(n)?n.startsWith("scale")?rN(t[1]):iN:oN;function lN({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:f,...d}){return!!Object.keys(d).length}const W0=(n,t,e,i={},r,s)=>o=>{const a=k0(i,n)||{},c=a.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Bs(c);const d={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-f,onUpdate:y=>{t.set(y),a.onUpdate&&a.onUpdate(y)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:t,element:s?void 0:r};lN(a)||Object.assign(d,aN(n,d)),d.duration&&(d.duration=Bs(d.duration)),d.repeatDelay&&(d.repeatDelay=Bs(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(cx(d),d.delay===0&&(m=!0)),(Mo.instantAnimations||Mo.skipAnimations)&&(m=!0,cx(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,m&&!s&&t.get()!==void 0){const y=nN(d.keyframes,a);if(y!==void 0){_n.update(()=>{d.onUpdate(y),d.onComplete()});return}}return a.isSync?new A0(d):new k3(d)};function uN({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function wA(n,t,{delay:e=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=t;i&&(s=i);const c=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const d in a){const m=n.getValue(d,n.latestValues[d]??null),y=a[d];if(y===void 0||f&&uN(f,d))continue;const v={delay:e,...k0(s||{},d)},w=m.get();if(w!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===w&&!v.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const b=xA(n);if(b){const M=window.MotionHandoffAnimation(b,d,_n);M!==null&&(v.startTime=M,S=!0)}}gx(n,d),m.start(W0(d,m,y,n.shouldReduceMotion&&VC.has(d)?{type:!1}:v,n,S));const P=m.animation;P&&c.push(P)}return o&&Promise.all(c).then(()=>{_n.update(()=>{o&&QO(n,o)})}),c}function bA(n,t,e,i=0,r=1){const s=Array.from(n).sort((f,d)=>f.sortNodePosition(d)).indexOf(t),o=n.size,a=(o-1)*i;return typeof e=="function"?e(s,o):r===1?s*i:a-s*i}function yx(n,t,e={}){const i=ac(n,t,e.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(r=e.transitionOverride);const s=i?()=>Promise.all(wA(n,i,e)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:m}=r;return cN(n,t,c,f,d,m,e)}:()=>Promise.resolve(),{when:a}=r;if(a){const[c,f]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>f())}else return Promise.all([s(),o(e.delay)])}function cN(n,t,e=0,i=0,r=0,s=1,o){const a=[];for(const c of n.variantChildren)c.notify("AnimationStart",t),a.push(yx(c,t,{...o,delay:e+(typeof i=="function"?0:i)+bA(n.variantChildren,c,i,r,s)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(a)}function hN(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const r=t.map(s=>yx(n,s,e));i=Promise.all(r)}else if(typeof t=="string")i=yx(n,t,e);else{const r=typeof t=="function"?ac(n,t,e.custom):t;i=Promise.all(wA(n,r,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function SA(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const fN=F0.length;function MA(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?MA(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<fN;e++){const i=F0[e],r=n.props[i];(Ff(r)||r===!1)&&(t[i]=r)}return t}const dN=[...N0].reverse(),pN=N0.length;function mN(n){return t=>Promise.all(t.map(({animation:e,options:i})=>hN(n,e,i)))}function gN(n){let t=mN(n),e=g1(),i=!0;const r=c=>(f,d)=>{const m=ac(n,d,c==="exit"?n.presenceContext?.custom:void 0);if(m){const{transition:y,transitionEnd:v,...w}=m;f={...f,...w,...v}}return f};function s(c){t=c(n)}function o(c){const{props:f}=n,d=MA(n.parent)||{},m=[],y=new Set;let v={},w=1/0;for(let P=0;P<pN;P++){const b=dN[P],M=e[b],R=f[b]!==void 0?f[b]:d[b],O=Ff(R),k=b===c?M.isActive:null;k===!1&&(w=P);let N=R===d[b]&&R!==f[b]&&O;if(N&&i&&n.manuallyAnimateOnMount&&(N=!1),M.protectedKeys={...v},!M.isActive&&k===null||!R&&!M.prevProp||vg(R)||typeof R=="boolean")continue;const D=yN(M.prevProp,R);let I=D||b===c&&M.isActive&&!N&&O||P>w&&O,H=!1;const W=Array.isArray(R)?R:[R];let U=W.reduce(r(b),{});k===!1&&(U={});const{prevResolvedValues:tt={}}=M,K={...tt,...U},Y=it=>{I=!0,y.has(it)&&(H=!0,y.delete(it)),M.needsAnimating[it]=!0;const J=n.getValue(it);J&&(J.liveStyle=!1)};for(const it in K){const J=U[it],pt=tt[it];if(v.hasOwnProperty(it))continue;let F=!1;mx(J)&&mx(pt)?F=!SA(J,pt):F=J!==pt,F?J!=null?Y(it):y.add(it):J!==void 0&&y.has(it)?Y(it):M.protectedKeys[it]=!0}M.prevProp=R,M.prevResolvedValues=U,M.isActive&&(v={...v,...U}),i&&n.blockInitialAnimation&&(I=!1);const rt=N&&D;I&&(!rt||H)&&m.push(...W.map(it=>{const J={type:b};if(typeof it=="string"&&i&&!rt&&n.manuallyAnimateOnMount&&n.parent){const{parent:pt}=n,F=ac(pt,it);if(pt.enteringChildren&&F){const{delayChildren:G}=F.transition||{};J.delay=bA(pt.enteringChildren,n,G)}}return{animation:it,options:J}}))}if(y.size){const P={};if(typeof f.initial!="boolean"){const b=ac(n,Array.isArray(f.initial)?f.initial[0]:f.initial);b&&b.transition&&(P.transition=b.transition)}y.forEach(b=>{const M=n.getBaseTarget(b),R=n.getValue(b);R&&(R.liveStyle=!0),P[b]=M??null}),m.push({animation:P})}let S=!!m.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(S=!1),i=!1,S?t(m):Promise.resolve()}function a(c,f){if(e[c].isActive===f)return Promise.resolve();n.variantChildren?.forEach(m=>m.animationState?.setActive(c,f)),e[c].isActive=f;const d=o(c);for(const m in e)e[m].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>e,reset:()=>{e=g1(),i=!0}}}function yN(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!SA(t,n):!1}function rl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function g1(){return{animate:rl(!0),whileInView:rl(),whileHover:rl(),whileTap:rl(),whileDrag:rl(),whileFocus:rl(),exit:rl()}}class La{constructor(t){this.isMounted=!1,this.node=t}update(){}}class vN extends La{constructor(t){super(t),t.animationState||(t.animationState=gN(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();vg(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let _N=0;class xN extends La{constructor(){super(...arguments),this.id=_N++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const wN={animation:{Feature:vN},exit:{Feature:xN}};function Bf(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function ld(n){return{point:{x:n.pageX,y:n.pageY}}}const bN=n=>t=>D0(t)&&n(t,ld(t));function gf(n,t,e,i){return Bf(n,t,bN(e),i)}const TA=1e-4,SN=1-TA,MN=1+TA,EA=.01,TN=0-EA,EN=0+EA;function Ni(n){return n.max-n.min}function PN(n,t,e){return Math.abs(n-t)<=e}function y1(n,t,e,i=.5){n.origin=i,n.originPoint=Mn(t.min,t.max,n.origin),n.scale=Ni(e)/Ni(t),n.translate=Mn(e.min,e.max,n.origin)-n.originPoint,(n.scale>=SN&&n.scale<=MN||isNaN(n.scale))&&(n.scale=1),(n.translate>=TN&&n.translate<=EN||isNaN(n.translate))&&(n.translate=0)}function yf(n,t,e,i){y1(n.x,t.x,e.x,i?i.originX:void 0),y1(n.y,t.y,e.y,i?i.originY:void 0)}function v1(n,t,e){n.min=e.min+t.min,n.max=n.min+Ni(t)}function CN(n,t,e){v1(n.x,t.x,e.x),v1(n.y,t.y,e.y)}function _1(n,t,e){n.min=t.min-e.min,n.max=n.min+Ni(t)}function vf(n,t,e){_1(n.x,t.x,e.x),_1(n.y,t.y,e.y)}function Br(n){return[n("x"),n("y")]}const PA=({current:n})=>n?n.ownerDocument.defaultView:null,x1=(n,t)=>Math.abs(n-t);function AN(n,t){const e=x1(n.x,t.x),i=x1(n.y,t.y);return Math.sqrt(e**2+i**2)}class CA{constructor(t,e,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Rv(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,w=AN(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!w)return;const{point:S}=y,{timestamp:P}=oi;this.history.push({...S,timestamp:P});const{onStart:b,onMove:M}=this.handlers;v||(b&&b(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,y)},this.handlePointerMove=(y,v)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=kv(v,this.transformPagePoint),_n.update(this.updatePoint,!0)},this.handlePointerUp=(y,v)=>{this.end();const{onEnd:w,onSessionEnd:S,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Rv(y.type==="pointercancel"?this.lastMoveEventInfo:kv(v,this.transformPagePoint),this.history);this.startEvent&&w&&w(y,b),S&&S(y,b)},!D0(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=r||window;const a=ld(t),c=kv(a,this.transformPagePoint),{point:f}=c,{timestamp:d}=oi;this.history=[{...f,timestamp:d}];const{onSessionStart:m}=e;m&&m(t,Rv(c,this.history)),this.removeListeners=sd(gf(this.contextWindow,"pointermove",this.handlePointerMove),gf(this.contextWindow,"pointerup",this.handlePointerUp),gf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ma(this.updatePoint)}}function kv(n,t){return t?{point:t(n.point)}:n}function w1(n,t){return{x:n.x-t.x,y:n.y-t.y}}function Rv({point:n},t){return{point:n,delta:w1(n,AA(t)),offset:w1(n,LN(t)),velocity:kN(t,.1)}}function LN(n){return n[0]}function AA(n){return n[n.length-1]}function kN(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const r=AA(n);for(;e>=0&&(i=n[e],!(r.timestamp-i.timestamp>Bs(t)));)e--;if(!i)return{x:0,y:0};const s=Vs(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function RN(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?Mn(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?Mn(e,n,i.max):Math.min(n,e)),n}function b1(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function IN(n,{top:t,left:e,bottom:i,right:r}){return{x:b1(n.x,e,r),y:b1(n.y,t,i)}}function S1(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function DN(n,t){return{x:S1(n.x,t.x),y:S1(n.y,t.y)}}function ON(n,t){let e=.5;const i=Ni(n),r=Ni(t);return r>i?e=Df(t.min,t.max-i,n.min):i>r&&(e=Df(n.min,n.max-r,t.min)),So(0,1,e)}function NN(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const vx=.35;function FN(n=vx){return n===!1?n=0:n===!0&&(n=vx),{x:M1(n,"left","right"),y:M1(n,"top","bottom")}}function M1(n,t,e){return{min:T1(n,t),max:T1(n,e)}}function T1(n,t){return typeof n=="number"?n:n[t]||0}const zN=new WeakMap;class BN{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=In(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=m=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(ld(m).point)},o=(m,y)=>{const{drag:v,dragPropagation:w,onDragStart:S}=this.getProps();if(v&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Z3(v),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Br(b=>{let M=this.getAxisMotionValue(b).get()||0;if(Us.test(M)){const{projection:R}=this.visualElement;if(R&&R.layout){const O=R.layout.layoutBox[b];O&&(M=Ni(O)*(parseFloat(M)/100))}}this.originPoint[b]=M}),S&&_n.postRender(()=>S(m,y)),gx(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},a=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y;const{dragPropagation:v,dragDirectionLock:w,onDirectionLock:S,onDrag:P}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:b}=y;if(w&&this.currentDirection===null){this.currentDirection=VN(b),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",y.point,b),this.updateAxis("y",y.point,b),this.visualElement.render(),P&&P(m,y)},c=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y,this.stop(m,y),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Br(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new CA(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:i,contextWindow:PA(this.visualElement)})}stop(t,e){const i=t||this.latestPointerEvent,r=e||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&_n.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:r}=this.getProps();if(!i||!Dp(t,r,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=RN(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;t&&Qu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=IN(i.layoutBox,t):this.constraints=!1,this.elastic=FN(e),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Br(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=NN(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Qu(t))return!1;const i=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=UO(i,r.root,this.visualElement.getTransformPagePoint());let o=DN(r.layout.layoutBox,s);if(e){const a=e(zO(o));this.hasMutatedConstraints=!!a,a&&(o=fA(a))}return o}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},f=Br(d=>{if(!Dp(d,e,this.currentDirection))return;let m=c&&c[d]||{};o&&(m={min:0,max:0});const y=r?200:1e6,v=r?40:1e7,w={type:"inertia",velocity:i?t[d]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(d,w)});return Promise.all(f).then(a)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return gx(this.visualElement,t),i.start(W0(t,i,0,e,this.visualElement,!1))}stopAnimation(){Br(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Br(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),r=i[e];return r||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Br(e=>{const{drag:i}=this.getProps();if(!Dp(e,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(e);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[e];s.set(t[e]-Mn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Qu(e)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Br(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();r[o]=ON({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Br(o=>{if(!Dp(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:f}=this.constraints[o];a.set(Mn(c,f,r[o]))})}addListeners(){if(!this.visualElement.current)return;zN.set(this.visualElement,this);const t=this.visualElement.current,e=gf(t,"pointerdown",c=>{const{drag:f,dragListener:d=!0}=this.getProps();f&&d&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();Qu(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),_n.read(i);const o=Bf(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Br(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),this.visualElement.render())}));return()=>{o(),e(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=vx,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Dp(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function VN(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class UN extends La{constructor(t){super(t),this.removeGroupControls=Wr,this.removeListeners=Wr,this.controls=new BN(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wr}unmount(){this.removeGroupControls(),this.removeListeners()}}const E1=n=>(t,e)=>{n&&_n.postRender(()=>n(t,e))};class HN extends La{constructor(){super(...arguments),this.removePointerDownListener=Wr}onPointerDown(t){this.session=new CA(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:PA(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:E1(t),onStart:E1(e),onMove:i,onEnd:(s,o)=>{delete this.session,r&&_n.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=gf(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Dm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function P1(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Rh={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(xe.test(n))n=parseFloat(n);else return n;const e=P1(n,t.target.x),i=P1(n,t.target.y);return`${e}% ${i}%`}},jN={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,r=Ta.parse(n);if(r.length>5)return i;const s=Ta.createTransformer(n),o=typeof r[0]!="number"?1:0,a=e.x.scale*t.x,c=e.y.scale*t.y;r[0+o]/=a,r[1+o]/=c;const f=Mn(a,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=f),typeof r[3+o]=="number"&&(r[3+o]/=f),s(r)}};let Iv=!1;class WN extends Q.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=t;fO(GN),s&&(e.group&&e.group.add(s),i&&i.register&&r&&i.register(s),Iv&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Dm.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,Iv=!0,r||t.layoutDependency!==e||e===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||_n.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),I0.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:r}=t;Iv=!0,r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function LA(n){const[t,e]=KC(),i=Q.useContext(h0);return B.jsx(WN,{...n,layoutGroup:i,switchLayoutGroup:Q.useContext(cA),isPresent:t,safeToRemove:e})}const GN={borderRadius:{...Rh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rh,borderTopRightRadius:Rh,borderBottomLeftRadius:Rh,borderBottomRightRadius:Rh,boxShadow:jN};function $N(n,t,e){const i=wi(n)?n:yc(n);return i.start(W0("",i,t,e)),i.animation}const ZN=(n,t)=>n.depth-t.depth;class qN{constructor(){this.children=[],this.isDirty=!1}add(t){p0(this.children,t),this.isDirty=!0}remove(t){m0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(ZN),this.isDirty=!1,this.children.forEach(t)}}function XN(n,t){const e=Yi.now(),i=({timestamp:r})=>{const s=r-e;s>=t&&(Ma(i),n(s-t))};return _n.setup(i,!0),()=>Ma(i)}const kA=["TopLeft","TopRight","BottomLeft","BottomRight"],YN=kA.length,C1=n=>typeof n=="string"?parseFloat(n):n,A1=n=>typeof n=="number"||xe.test(n);function KN(n,t,e,i,r,s){r?(n.opacity=Mn(0,e.opacity??1,JN(i)),n.opacityExit=Mn(t.opacity??1,0,QN(i))):s&&(n.opacity=Mn(t.opacity??1,e.opacity??1,i));for(let o=0;o<YN;o++){const a=`border${kA[o]}Radius`;let c=L1(t,a),f=L1(e,a);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||A1(c)===A1(f)?(n[a]=Math.max(Mn(C1(c),C1(f),i),0),(Us.test(f)||Us.test(c))&&(n[a]+="%")):n[a]=f}(t.rotate||e.rotate)&&(n.rotate=Mn(t.rotate||0,e.rotate||0,i))}function L1(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const JN=RA(0,.5,yC),QN=RA(.5,.95,Wr);function RA(n,t,e){return i=>i<n?0:i>t?1:e(Df(n,t,i))}function k1(n,t){n.min=t.min,n.max=t.max}function Nr(n,t){k1(n.x,t.x),k1(n.y,t.y)}function R1(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function I1(n,t,e,i,r){return n-=t,n=qm(n,1/e,i),r!==void 0&&(n=qm(n,1/r,i)),n}function tF(n,t=0,e=1,i=.5,r,s=n,o=n){if(Us.test(t)&&(t=parseFloat(t),t=Mn(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Mn(s.min,s.max,i);n===s&&(a-=t),n.min=I1(n.min,t,e,a,r),n.max=I1(n.max,t,e,a,r)}function D1(n,t,[e,i,r],s,o){tF(n,t[e],t[i],t[r],t.scale,s,o)}const eF=["x","scaleX","originX"],nF=["y","scaleY","originY"];function O1(n,t,e,i){D1(n.x,t,eF,e?e.x:void 0,i?i.x:void 0),D1(n.y,t,nF,e?e.y:void 0,i?i.y:void 0)}function N1(n){return n.translate===0&&n.scale===1}function IA(n){return N1(n.x)&&N1(n.y)}function F1(n,t){return n.min===t.min&&n.max===t.max}function iF(n,t){return F1(n.x,t.x)&&F1(n.y,t.y)}function z1(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function DA(n,t){return z1(n.x,t.x)&&z1(n.y,t.y)}function B1(n){return Ni(n.x)/Ni(n.y)}function V1(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class rF{constructor(){this.members=[]}add(t){p0(this.members,t),t.scheduleRender()}remove(t){if(m0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(r=>t===r);if(e===0)return!1;let i;for(let r=e;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sF(n,t,e){let i="";const r=n.x.translate/t.x,s=n.y.translate/t.y,o=e?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:d,rotateX:m,rotateY:y,skewX:v,skewY:w}=e;f&&(i=`perspective(${f}px) ${i}`),d&&(i+=`rotate(${d}deg) `),m&&(i+=`rotateX(${m}deg) `),y&&(i+=`rotateY(${y}deg) `),v&&(i+=`skewX(${v}deg) `),w&&(i+=`skewY(${w}deg) `)}const a=n.x.scale*t.x,c=n.y.scale*t.y;return(a!==1||c!==1)&&(i+=`scale(${a}, ${c})`),i||"none"}const Dv=["","X","Y","Z"],oF=1e3;let aF=0;function Ov(n,t,e,i){const{latestValues:r}=t;r[n]&&(e[n]=r[n],t.setStaticValue(n,0),i&&(i[n]=0))}function OA(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=xA(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",_n,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&OA(i)}function NA({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=t?.()){this.id=aF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(cF),this.nodes.forEach(pF),this.nodes.forEach(mF),this.nodes.forEach(hF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new qN)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new v0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=YC(o)&&!Q3(o),this.instance=o;const{layoutId:a,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),n){let d,m=0;const y=()=>this.root.updateBlockedByResize=!1;_n.read(()=>{m=window.innerWidth}),n(o,()=>{const v=window.innerWidth;v!==m&&(m=v,this.root.updateBlockedByResize=!0,d&&d(),d=XN(y,250),Dm.hasAnimatedSinceResize&&(Dm.hasAnimatedSinceResize=!1,this.nodes.forEach(j1)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&f&&(a||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||xF,{onLayoutAnimationStart:S,onLayoutAnimationComplete:P}=f.getProps(),b=!this.targetLayout||!DA(this.targetLayout,v),M=!m&&y;if(this.options.layoutRoot||this.resumeFrom||M||m&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...k0(w,"layout"),onPlay:S,onComplete:P};(f.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(d,M)}else m||j1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ma(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&OA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(U1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(H1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(dF),this.nodes.forEach(lF),this.nodes.forEach(uF)):this.nodes.forEach(H1),this.clearAllSnapshots();const a=Yi.now();oi.delta=So(0,1e3/60,a-oi.timestamp),oi.timestamp=a,oi.isProcessing=!0,Sv.update.process(oi),Sv.preRender.process(oi),Sv.render.process(oi),oi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,I0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fF),this.sharedNodes.forEach(yF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_n.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_n.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ni(this.snapshot.measuredBox.x)&&!Ni(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=In(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!IA(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;o&&this.instance&&(a||cl(this.latestValues)||d)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),wF(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return In();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(bF))){const{scroll:f}=this.root;f&&(tc(a.x,f.offset.x),tc(a.y,f.offset.y))}return a}removeElementScroll(o){const a=In();if(Nr(a,o),this.scroll?.wasRoot)return a;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:d,options:m}=f;f!==this.root&&d&&m.layoutScroll&&(d.wasRoot&&Nr(a,o),tc(a.x,d.offset.x),tc(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const c=In();Nr(c,o);for(let f=0;f<this.path.length;f++){const d=this.path[f];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ec(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),cl(d.latestValues)&&ec(c,d.latestValues)}return cl(this.latestValues)&&ec(c,this.latestValues),c}removeTransform(o){const a=In();Nr(a,o);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!cl(f.latestValues))continue;fx(f.latestValues)&&f.updateSnapshot();const d=In(),m=f.measurePageBox();Nr(d,m),O1(a,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return cl(this.latestValues)&&O1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==oi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=oi.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),vf(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=In(),this.targetWithTransforms=In()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nr(this.target,this.layout.layoutBox),pA(this.target,this.targetDelta)):Nr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=In(),this.relativeTargetOrigin=In(),vf(this.relativeTargetOrigin,this.target,y.target),Nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||fx(this.parent.latestValues)||dA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===oi.timestamp&&(c=!1),c)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Nr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;VO(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=In());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(R1(this.prevProjectionDelta.x,this.projectionDelta.x),R1(this.prevProjectionDelta.y,this.projectionDelta.y)),yf(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!V1(this.projectionDelta.x,this.prevProjectionDelta.x)||!V1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nc(),this.projectionDelta=nc(),this.projectionDeltaWithTransform=nc()}setAnimationOrigin(o,a=!1){const c=this.snapshot,f=c?c.latestValues:{},d={...this.latestValues},m=nc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const y=In(),v=c?c.source:void 0,w=this.layout?this.layout.source:void 0,S=v!==w,P=this.getStack(),b=!P||P.members.length<=1,M=!!(S&&!b&&this.options.crossfade===!0&&!this.path.some(_F));this.animationProgress=0;let R;this.mixTargetDelta=O=>{const k=O/1e3;W1(m.x,o.x,k),W1(m.y,o.y,k),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vf(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vF(this.relativeTarget,this.relativeTargetOrigin,y,k),R&&iF(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=In()),Nr(R,this.relativeTarget)),S&&(this.animationValues=d,KN(d,f,this.latestValues,k,M,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ma(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_n.update(()=>{Dm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=yc(0)),this.currentAnimation=$N(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:f,latestValues:d}=o;if(!(!a||!c||!f)){if(this!==o&&this.layout&&f&&FA(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||In();const m=Ni(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const y=Ni(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+y}Nr(a,c),ec(a,d),yf(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new rF),this.sharedNodes.get(o).add(a);const f=a.options.initialPromotionConfig;a.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const f={};c.z&&Ov("z",o,f,this.animationValues);for(let d=0;d<Dv.length;d++)Ov(`rotate${Dv[d]}`,o,f,this.animationValues),Ov(`skew${Dv[d]}`,o,f,this.animationValues);o.render();for(const d in f)o.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Im(a?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Im(a?.pointerEvents)||""),this.hasProjected&&!cl(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=f.animationValues||f.latestValues;this.applyTransformsToTarget();let m=sF(this.projectionDeltaWithTransform,this.treeScale,d);c&&(m=c(d,m)),o.transform=m;const{x:y,y:v}=this.projectionDelta;o.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,f.animationValues?o.opacity=f===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const w in zf){if(d[w]===void 0)continue;const{correct:S,applyTo:P,isCSSVariable:b}=zf[w],M=m==="none"?d[w]:S(d[w],f);if(P){const R=P.length;for(let O=0;O<R;O++)o[P[O]]=M}else b?this.options.visualElement.renderState.vars[w]=M:o[w]=M}this.options.layoutId&&(o.pointerEvents=f===this?Im(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(U1),this.root.sharedNodes.clear()}}}function lF(n){n.updateLayout()}function uF(n){const t=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:i}=n.layout,{animationType:r}=n.options,s=t.source!==n.layout.source;r==="size"?Br(d=>{const m=s?t.measuredBox[d]:t.layoutBox[d],y=Ni(m);m.min=e[d].min,m.max=m.min+y}):FA(r,t.layoutBox,e)&&Br(d=>{const m=s?t.measuredBox[d]:t.layoutBox[d],y=Ni(e[d]);m.max=m.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+y)});const o=nc();yf(o,e,t.layoutBox);const a=nc();s?yf(a,n.applyTransform(i,!0),t.measuredBox):yf(a,e,t.layoutBox);const c=!IA(o);let f=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:y}=d;if(m&&y){const v=In();vf(v,t.layoutBox,m.layoutBox);const w=In();vf(w,e,y.layoutBox),DA(v,w)||(f=!0),d.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=v,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:a,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:e}=n.options;e&&e()}n.options.transition=void 0}function cF(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function hF(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function fF(n){n.clearSnapshot()}function U1(n){n.clearMeasurements()}function H1(n){n.isLayoutDirty=!1}function dF(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function j1(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function pF(n){n.resolveTargetDelta()}function mF(n){n.calcProjection()}function gF(n){n.resetSkewAndRotation()}function yF(n){n.removeLeadSnapshot()}function W1(n,t,e){n.translate=Mn(t.translate,0,e),n.scale=Mn(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function G1(n,t,e,i){n.min=Mn(t.min,e.min,i),n.max=Mn(t.max,e.max,i)}function vF(n,t,e,i){G1(n.x,t.x,e.x,i),G1(n.y,t.y,e.y,i)}function _F(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const xF={duration:.45,ease:[.4,0,.1,1]},$1=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Z1=$1("applewebkit/")&&!$1("chrome/")?Math.round:Wr;function q1(n){n.min=Z1(n.min),n.max=Z1(n.max)}function wF(n){q1(n.x),q1(n.y)}function FA(n,t,e){return n==="position"||n==="preserve-aspect"&&!PN(B1(t),B1(e),.2)}function bF(n){return n!==n.root&&n.scroll?.wasRoot}const SF=NA({attachResizeListener:(n,t)=>Bf(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Nv={current:void 0},zA=NA({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Nv.current){const n=new SF({});n.mount(window),n.setOptions({layoutScroll:!0}),Nv.current=n}return Nv.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),MF={pan:{Feature:HN},drag:{Feature:UN,ProjectionNode:zA,MeasureLayout:LA}};function X1(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const r="onHover"+e,s=i[r];s&&_n.postRender(()=>s(t,ld(t)))}class TF extends La{mount(){const{current:t}=this.node;t&&(this.unmount=q3(t,(e,i)=>(X1(this.node,i,"Start"),r=>X1(this.node,r,"End"))))}unmount(){}}class EF extends La{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sd(Bf(this.node.current,"focus",()=>this.onFocus()),Bf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Y1(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const r="onTap"+(e==="End"?"":e),s=i[r];s&&_n.postRender(()=>s(t,ld(t)))}class PF extends La{mount(){const{current:t}=this.node;t&&(this.unmount=J3(t,(e,i)=>(Y1(this.node,i,"Start"),(r,{success:s})=>Y1(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _x=new WeakMap,Fv=new WeakMap,CF=n=>{const t=_x.get(n.target);t&&t(n)},AF=n=>{n.forEach(CF)};function LF({root:n,...t}){const e=n||document;Fv.has(e)||Fv.set(e,{});const i=Fv.get(e),r=JSON.stringify(t);return i[r]||(i[r]=new IntersectionObserver(AF,{root:n,...t})),i[r]}function kF(n,t,e){const i=LF(t);return _x.set(n,e),i.observe(n),()=>{_x.delete(n),i.unobserve(n)}}const RF={some:0,all:1};class IF extends La{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:r="some",once:s}=t,o={root:e?e.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:RF[r]},a=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),y=f?d:m;y&&y(c)};return kF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(DF(t,e))&&this.startObserver()}unmount(){}}function DF({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const OF={inView:{Feature:IF},tap:{Feature:PF},focus:{Feature:EF},hover:{Feature:TF}},NF={layout:{ProjectionNode:zA,MeasureLayout:LA}},FF={...wN,...OF,...MF,...NF},_f=FO(FF,YO);function BA(n,t){const e=Q.useRef(t);Q.useEffect(function(){t!==e.current&&n.attributionControl!=null&&(e.current!=null&&n.attributionControl.removeAttribution(e.current),t!=null&&n.attributionControl.addAttribution(t)),e.current=t},[n,t])}const zF=1;function BF(n){return Object.freeze({__version:zF,map:n})}function G0(n,t){return Object.freeze({...n,...t})}const VA=Q.createContext(null),UA=VA.Provider;function xg(){const n=Q.useContext(VA);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function HA(n){function t(e,i){const{instance:r,context:s}=n(e).current;return Q.useImperativeHandle(i,()=>r),e.children==null?null:vn.createElement(UA,{value:s},e.children)}return Q.forwardRef(t)}function VF(n){function t(e,i){const[r,s]=Q.useState(!1),{instance:o}=n(e,s).current;Q.useImperativeHandle(i,()=>o),Q.useEffect(function(){r&&o.update()},[o,r,e.children]);const a=o._contentNode;return a?YR.createPortal(e.children,a):null}return Q.forwardRef(t)}function UF(n){function t(e,i){const{instance:r}=n(e).current;return Q.useImperativeHandle(i,()=>r),null}return Q.forwardRef(t)}function $0(n,t){const e=Q.useRef();Q.useEffect(function(){return t!=null&&n.instance.on(t),e.current=t,function(){e.current!=null&&n.instance.off(e.current),e.current=null}},[n,t])}function wg(n,t){const e=n.pane??t.pane;return e?{...n,pane:e}:n}function HF(n,t){return function(i,r){const s=xg(),o=n(wg(i,s),s);return BA(s.map,i.attribution),$0(o.current,i.eventHandlers),t(o.current,s,i,r),o}}var sf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var jF=sf.exports,K1;function WF(){return K1||(K1=1,(function(n,t){(function(e,i){i(t)})(jF,(function(e){var i="1.9.4";function r(u){var p,_,T,A;for(_=1,T=arguments.length;_<T;_++){A=arguments[_];for(p in A)u[p]=A[p]}return u}var s=Object.create||(function(){function u(){}return function(p){return u.prototype=p,new u}})();function o(u,p){var _=Array.prototype.slice;if(u.bind)return u.bind.apply(u,_.call(arguments,1));var T=_.call(arguments,2);return function(){return u.apply(p,T.length?T.concat(_.call(arguments)):arguments)}}var a=0;function c(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function f(u,p,_){var T,A,j,ot;return ot=function(){T=!1,A&&(j.apply(_,A),A=!1)},j=function(){T?A=arguments:(u.apply(_,arguments),setTimeout(ot,p),T=!0)},j}function d(u,p,_){var T=p[1],A=p[0],j=T-A;return u===T&&_?u:((u-A)%j+j)%j+A}function m(){return!1}function y(u,p){if(p===!1)return u;var _=Math.pow(10,p===void 0?6:p);return Math.round(u*_)/_}function v(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function w(u){return v(u).split(/\s+/)}function S(u,p){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var _ in p)u.options[_]=p[_];return u.options}function P(u,p,_){var T=[];for(var A in u)T.push(encodeURIComponent(_?A.toUpperCase():A)+"="+encodeURIComponent(u[A]));return(!p||p.indexOf("?")===-1?"?":"&")+T.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function M(u,p){return u.replace(b,function(_,T){var A=p[T];if(A===void 0)throw new Error("No value provided for variable "+_);return typeof A=="function"&&(A=A(p)),A})}var R=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function O(u,p){for(var _=0;_<u.length;_++)if(u[_]===p)return _;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function N(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var D=0;function I(u){var p=+new Date,_=Math.max(0,16-(p-D));return D=p+_,window.setTimeout(u,_)}var H=window.requestAnimationFrame||N("RequestAnimationFrame")||I,W=window.cancelAnimationFrame||N("CancelAnimationFrame")||N("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function U(u,p,_){if(_&&H===I)u.call(p);else return H.call(window,o(u,p))}function tt(u){u&&W.call(window,u)}var K={__proto__:null,extend:r,create:s,bind:o,get lastId(){return a},stamp:c,throttle:f,wrapNum:d,falseFn:m,formatNum:y,trim:v,splitWords:w,setOptions:S,getParamString:P,template:M,isArray:R,indexOf:O,emptyImageUrl:k,requestFn:H,cancelFn:W,requestAnimFrame:U,cancelAnimFrame:tt};function Y(){}Y.extend=function(u){var p=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=p.__super__=this.prototype,T=s(_);T.constructor=p,p.prototype=T;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(p[A]=this[A]);return u.statics&&r(p,u.statics),u.includes&&(rt(u.includes),r.apply(null,[T].concat(u.includes))),r(T,u),delete T.statics,delete T.includes,T.options&&(T.options=_.options?s(_.options):{},r(T.options,u.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var j=0,ot=T._initHooks.length;j<ot;j++)T._initHooks[j].call(this)}},p},Y.include=function(u){var p=this.prototype.options;return r(this.prototype,u),u.options&&(this.prototype.options=p,this.mergeOptions(u.options)),this},Y.mergeOptions=function(u){return r(this.prototype.options,u),this},Y.addInitHook=function(u){var p=Array.prototype.slice.call(arguments,1),_=typeof u=="function"?u:function(){this[u].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function rt(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=R(u)?u:[u];for(var p=0;p<u.length;p++)u[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var at={on:function(u,p,_){if(typeof u=="object")for(var T in u)this._on(T,u[T],p);else{u=w(u);for(var A=0,j=u.length;A<j;A++)this._on(u[A],p,_)}return this},off:function(u,p,_){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var T in u)this._off(T,u[T],p);else{u=w(u);for(var A=arguments.length===1,j=0,ot=u.length;j<ot;j++)A?this._off(u[j]):this._off(u[j],p,_)}return this},_on:function(u,p,_,T){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(u,p,_)===!1){_===this&&(_=void 0);var A={fn:p,ctx:_};T&&(A.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(A)}},_off:function(u,p,_){var T,A,j;if(this._events&&(T=this._events[u],!!T)){if(arguments.length===1){if(this._firingCount)for(A=0,j=T.length;A<j;A++)T[A].fn=m;delete this._events[u];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var ot=this._listens(u,p,_);if(ot!==!1){var yt=T[ot];this._firingCount&&(yt.fn=m,this._events[u]=T=T.slice()),T.splice(ot,1)}}},fire:function(u,p,_){if(!this.listens(u,_))return this;var T=r({},p,{type:u,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var A=this._events[u];if(A){this._firingCount=this._firingCount+1||1;for(var j=0,ot=A.length;j<ot;j++){var yt=A[j],Mt=yt.fn;yt.once&&this.off(u,Mt,yt.ctx),Mt.call(yt.ctx||this,T)}this._firingCount--}}return _&&this._propagateEvent(T),this},listens:function(u,p,_,T){typeof u!="string"&&console.warn('"string" type argument expected');var A=p;typeof p!="function"&&(T=!!p,A=void 0,_=void 0);var j=this._events&&this._events[u];if(j&&j.length&&this._listens(u,A,_)!==!1)return!0;if(T){for(var ot in this._eventParents)if(this._eventParents[ot].listens(u,p,_,T))return!0}return!1},_listens:function(u,p,_){if(!this._events)return!1;var T=this._events[u]||[];if(!p)return!!T.length;_===this&&(_=void 0);for(var A=0,j=T.length;A<j;A++)if(T[A].fn===p&&T[A].ctx===_)return A;return!1},once:function(u,p,_){if(typeof u=="object")for(var T in u)this._on(T,u[T],p,!0);else{u=w(u);for(var A=0,j=u.length;A<j;A++)this._on(u[A],p,_,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[c(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[c(u)],this},_propagateEvent:function(u){for(var p in this._eventParents)this._eventParents[p].fire(u.type,r({layer:u.target,propagatedFrom:u.target},u),!0)}};at.addEventListener=at.on,at.removeEventListener=at.clearAllEventListeners=at.off,at.addOneTimeEventListener=at.once,at.fireEvent=at.fire,at.hasEventListeners=at.listens;var it=Y.extend(at);function J(u,p,_){this.x=_?Math.round(u):u,this.y=_?Math.round(p):p}var pt=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(u){return this.clone()._add(F(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(F(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new J(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new J(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pt(this.x),this.y=pt(this.y),this},distanceTo:function(u){u=F(u);var p=u.x-this.x,_=u.y-this.y;return Math.sqrt(p*p+_*_)},equals:function(u){return u=F(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=F(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function F(u,p,_){return u instanceof J?u:R(u)?new J(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new J(u.x,u.y):new J(u,p,_)}function G(u,p){if(u)for(var _=p?[u,p]:u,T=0,A=_.length;T<A;T++)this.extend(_[T])}G.prototype={extend:function(u){var p,_;if(!u)return this;if(u instanceof J||typeof u[0]=="number"||"x"in u)p=_=F(u);else if(u=lt(u),p=u.min,_=u.max,!p||!_)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=_.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(u){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var p,_;return typeof u[0]=="number"||u instanceof J?u=F(u):u=lt(u),u instanceof G?(p=u.min,_=u.max):p=_=u,p.x>=this.min.x&&_.x<=this.max.x&&p.y>=this.min.y&&_.y<=this.max.y},intersects:function(u){u=lt(u);var p=this.min,_=this.max,T=u.min,A=u.max,j=A.x>=p.x&&T.x<=_.x,ot=A.y>=p.y&&T.y<=_.y;return j&&ot},overlaps:function(u){u=lt(u);var p=this.min,_=this.max,T=u.min,A=u.max,j=A.x>p.x&&T.x<_.x,ot=A.y>p.y&&T.y<_.y;return j&&ot},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var p=this.min,_=this.max,T=Math.abs(p.x-_.x)*u,A=Math.abs(p.y-_.y)*u;return lt(F(p.x-T,p.y-A),F(_.x+T,_.y+A))},equals:function(u){return u?(u=lt(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function lt(u,p){return!u||u instanceof G?u:new G(u,p)}function z(u,p){if(u)for(var _=p?[u,p]:u,T=0,A=_.length;T<A;T++)this.extend(_[T])}z.prototype={extend:function(u){var p=this._southWest,_=this._northEast,T,A;if(u instanceof _t)T=u,A=u;else if(u instanceof z){if(T=u._southWest,A=u._northEast,!T||!A)return this}else return u?this.extend(nt(u)||mt(u)):this;return!p&&!_?(this._southWest=new _t(T.lat,T.lng),this._northEast=new _t(A.lat,A.lng)):(p.lat=Math.min(T.lat,p.lat),p.lng=Math.min(T.lng,p.lng),_.lat=Math.max(A.lat,_.lat),_.lng=Math.max(A.lng,_.lng)),this},pad:function(u){var p=this._southWest,_=this._northEast,T=Math.abs(p.lat-_.lat)*u,A=Math.abs(p.lng-_.lng)*u;return new z(new _t(p.lat-T,p.lng-A),new _t(_.lat+T,_.lng+A))},getCenter:function(){return new _t((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _t(this.getNorth(),this.getWest())},getSouthEast:function(){return new _t(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof _t||"lat"in u?u=nt(u):u=mt(u);var p=this._southWest,_=this._northEast,T,A;return u instanceof z?(T=u.getSouthWest(),A=u.getNorthEast()):T=A=u,T.lat>=p.lat&&A.lat<=_.lat&&T.lng>=p.lng&&A.lng<=_.lng},intersects:function(u){u=mt(u);var p=this._southWest,_=this._northEast,T=u.getSouthWest(),A=u.getNorthEast(),j=A.lat>=p.lat&&T.lat<=_.lat,ot=A.lng>=p.lng&&T.lng<=_.lng;return j&&ot},overlaps:function(u){u=mt(u);var p=this._southWest,_=this._northEast,T=u.getSouthWest(),A=u.getNorthEast(),j=A.lat>p.lat&&T.lat<_.lat,ot=A.lng>p.lng&&T.lng<_.lng;return j&&ot},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,p){return u?(u=mt(u),this._southWest.equals(u.getSouthWest(),p)&&this._northEast.equals(u.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function mt(u,p){return u instanceof z?u:new z(u,p)}function _t(u,p,_){if(isNaN(u)||isNaN(p))throw new Error("Invalid LatLng object: ("+u+", "+p+")");this.lat=+u,this.lng=+p,_!==void 0&&(this.alt=+_)}_t.prototype={equals:function(u,p){if(!u)return!1;u=nt(u);var _=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return _<=(p===void 0?1e-9:p)},toString:function(u){return"LatLng("+y(this.lat,u)+", "+y(this.lng,u)+")"},distanceTo:function(u){return At.distance(this,nt(u))},wrap:function(){return At.wrapLatLng(this)},toBounds:function(u){var p=180*u/40075017,_=p/Math.cos(Math.PI/180*this.lat);return mt([this.lat-p,this.lng-_],[this.lat+p,this.lng+_])},clone:function(){return new _t(this.lat,this.lng,this.alt)}};function nt(u,p,_){return u instanceof _t?u:R(u)&&typeof u[0]!="object"?u.length===3?new _t(u[0],u[1],u[2]):u.length===2?new _t(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new _t(u.lat,"lng"in u?u.lng:u.lon,u.alt):p===void 0?null:new _t(u,p,_)}var Ot={latLngToPoint:function(u,p){var _=this.projection.project(u),T=this.scale(p);return this.transformation._transform(_,T)},pointToLatLng:function(u,p){var _=this.scale(p),T=this.transformation.untransform(u,_);return this.projection.unproject(T)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var p=this.projection.bounds,_=this.scale(u),T=this.transformation.transform(p.min,_),A=this.transformation.transform(p.max,_);return new G(T,A)},infinite:!1,wrapLatLng:function(u){var p=this.wrapLng?d(u.lng,this.wrapLng,!0):u.lng,_=this.wrapLat?d(u.lat,this.wrapLat,!0):u.lat,T=u.alt;return new _t(_,p,T)},wrapLatLngBounds:function(u){var p=u.getCenter(),_=this.wrapLatLng(p),T=p.lat-_.lat,A=p.lng-_.lng;if(T===0&&A===0)return u;var j=u.getSouthWest(),ot=u.getNorthEast(),yt=new _t(j.lat-T,j.lng-A),Mt=new _t(ot.lat-T,ot.lng-A);return new z(yt,Mt)}},At=r({},Ot,{wrapLng:[-180,180],R:6371e3,distance:function(u,p){var _=Math.PI/180,T=u.lat*_,A=p.lat*_,j=Math.sin((p.lat-u.lat)*_/2),ot=Math.sin((p.lng-u.lng)*_/2),yt=j*j+Math.cos(T)*Math.cos(A)*ot*ot,Mt=2*Math.atan2(Math.sqrt(yt),Math.sqrt(1-yt));return this.R*Mt}}),kt=6378137,Ft={R:kt,MAX_LATITUDE:85.0511287798,project:function(u){var p=Math.PI/180,_=this.MAX_LATITUDE,T=Math.max(Math.min(_,u.lat),-_),A=Math.sin(T*p);return new J(this.R*u.lng*p,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(u){var p=180/Math.PI;return new _t((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*p,u.x*p/this.R)},bounds:(function(){var u=kt*Math.PI;return new G([-u,-u],[u,u])})()};function jt(u,p,_,T){if(R(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=p,this._c=_,this._d=T}jt.prototype={transform:function(u,p){return this._transform(u.clone(),p)},_transform:function(u,p){return p=p||1,u.x=p*(this._a*u.x+this._b),u.y=p*(this._c*u.y+this._d),u},untransform:function(u,p){return p=p||1,new J((u.x/p-this._b)/this._a,(u.y/p-this._d)/this._c)}};function bt(u,p,_,T){return new jt(u,p,_,T)}var Rt=r({},At,{code:"EPSG:3857",projection:Ft,transformation:(function(){var u=.5/(Math.PI*Ft.R);return bt(u,.5,-u,.5)})()}),Dt=r({},Rt,{code:"EPSG:900913"});function Wt(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function It(u,p){var _="",T,A,j,ot,yt,Mt;for(T=0,j=u.length;T<j;T++){for(yt=u[T],A=0,ot=yt.length;A<ot;A++)Mt=yt[A],_+=(A?"L":"M")+Mt.x+" "+Mt.y;_+=p?ht.svg?"z":"x":""}return _||"M0 0"}var X=document.documentElement.style,$="ActiveXObject"in window,wt=$&&!document.addEventListener,Lt="msLaunchUri"in navigator&&!("documentMode"in document),$t=Z("webkit"),Kt=Z("android"),re=Z("android 2")||Z("android 3"),Jt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),se=Kt&&Z("Google")&&Jt<537&&!("AudioNode"in window),ft=!!window.opera,q=!Lt&&Z("chrome"),Pt=Z("gecko")&&!$t&&!ft&&!$,St=!q&&Z("safari"),zt=Z("phantom"),Xt="OTransition"in X,ue=navigator.platform.indexOf("Win")===0,ke=$&&"transition"in X,Fe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!re,xn="MozPerspective"in X,ut=!window.L_DISABLE_3D&&(ke||Fe||xn)&&!Xt&&!zt,Bt=typeof orientation<"u"||Z("mobile"),ee=Bt&&$t,Ae=Bt&&Fe,tn=!window.PointerEvent&&window.MSPointerEvent,En=!!(window.PointerEvent||tn),Ln="ontouchstart"in window||!!window.TouchEvent,nr=!window.L_NO_TOUCH&&(Ln||En),gs=Bt&&ft,ni=Bt&&Pt,ui=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pi=(function(){var u=!1;try{var p=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",m,p),window.removeEventListener("testPassiveEventSupport",m,p)}catch{}return u})(),ir=(function(){return!!document.createElement("canvas").getContext})(),ci=!!(document.createElementNS&&Wt("svg").createSVGRect),Ci=!!ci&&(function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),To=!ci&&(function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var p=u.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}})(),Zs=navigator.platform.indexOf("Mac")===0,Gc=navigator.platform.indexOf("Linux")===0;function Z(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var ht={ie:$,ielt9:wt,edge:Lt,webkit:$t,android:Kt,android23:re,androidStock:se,opera:ft,chrome:q,gecko:Pt,safari:St,phantom:zt,opera12:Xt,win:ue,ie3d:ke,webkit3d:Fe,gecko3d:xn,any3d:ut,mobile:Bt,mobileWebkit:ee,mobileWebkit3d:Ae,msPointer:tn,pointer:En,touch:nr,touchNative:Ln,mobileOpera:gs,mobileGecko:ni,retina:ui,passiveEvents:Pi,canvas:ir,svg:ci,vml:To,inlineSvg:Ci,mac:Zs,linux:Gc},gt=ht.msPointer?"MSPointerDown":"pointerdown",Ct=ht.msPointer?"MSPointerMove":"pointermove",Ht=ht.msPointer?"MSPointerUp":"pointerup",Me=ht.msPointer?"MSPointerCancel":"pointercancel",fe={touchstart:gt,touchmove:Ct,touchend:Ht,touchcancel:Me},le={touchstart:je,touchmove:$n,touchend:$n,touchcancel:$n},we={},ze=!1;function Re(u,p,_){return p==="touchstart"&&br(),le[p]?(_=le[p].bind(this,_),u.addEventListener(fe[p],_,!1),_):(console.warn("wrong event specified:",p),m)}function De(u,p,_){if(!fe[p]){console.warn("wrong event specified:",p);return}u.removeEventListener(fe[p],_,!1)}function ye(u){we[u.pointerId]=u}function wr(u){we[u.pointerId]&&(we[u.pointerId]=u)}function rn(u){delete we[u.pointerId]}function br(){ze||(document.addEventListener(gt,ye,!0),document.addEventListener(Ct,wr,!0),document.addEventListener(Ht,rn,!0),document.addEventListener(Me,rn,!0),ze=!0)}function $n(u,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var _ in we)p.touches.push(we[_]);p.changedTouches=[p],u(p)}}function je(u,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&wn(p),$n(u,p)}function Sr(u){var p={},_,T;for(T in u)_=u[T],p[T]=_&&_.bind?_.bind(u):_;return u=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var pn=200;function Ai(u,p){u.addEventListener("dblclick",p);var _=0,T;function A(j){if(j.detail!==1){T=j.detail;return}if(!(j.pointerType==="mouse"||j.sourceCapabilities&&!j.sourceCapabilities.firesTouchEvents)){var ot=Ys(j);if(!(ot.some(function(Mt){return Mt instanceof HTMLLabelElement&&Mt.attributes.for})&&!ot.some(function(Mt){return Mt instanceof HTMLInputElement||Mt instanceof HTMLSelectElement}))){var yt=Date.now();yt-_<=pn?(T++,T===2&&p(Sr(j))):T=1,_=yt}}}return u.addEventListener("click",A),{dblclick:p,simDblclick:A}}function mn(u,p){u.removeEventListener("dblclick",p.dblclick),u.removeEventListener("click",p.simDblclick)}var $c=Ao(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Eo=Ao(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ia=Eo==="webkitTransition"||Eo==="OTransition"?Eo+"End":"transitionend";function rr(u){return typeof u=="string"?document.getElementById(u):u}function Da(u,p){var _=u.style[p]||u.currentStyle&&u.currentStyle[p];if((!_||_==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(u,null);_=T?T[p]:null}return _==="auto"?null:_}function Ee(u,p,_){var T=document.createElement(u);return T.className=p||"",_&&_.appendChild(T),T}function hn(u){var p=u.parentNode;p&&p.removeChild(u)}function Vl(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Po(u){var p=u.parentNode;p&&p.lastChild!==u&&p.appendChild(u)}function Xr(u){var p=u.parentNode;p&&p.firstChild!==u&&p.insertBefore(u,p.firstChild)}function Co(u,p){if(u.classList!==void 0)return u.classList.contains(p);var _=Ul(u);return _.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(_)}function Te(u,p){if(u.classList!==void 0)for(var _=w(p),T=0,A=_.length;T<A;T++)u.classList.add(_[T]);else if(!Co(u,p)){var j=Ul(u);Zc(u,(j?j+" ":"")+p)}}function sn(u,p){u.classList!==void 0?u.classList.remove(p):Zc(u,v((" "+Ul(u)+" ").replace(" "+p+" "," ")))}function Zc(u,p){u.className.baseVal===void 0?u.className=p:u.className.baseVal=p}function Ul(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function hi(u,p){"opacity"in u.style?u.style.opacity=p:"filter"in u.style&&xd(u,p)}function xd(u,p){var _=!1,T="DXImageTransform.Microsoft.Alpha";try{_=u.filters.item(T)}catch{if(p===1)return}p=Math.round(p*100),_?(_.Enabled=p!==100,_.Opacity=p):u.style.filter+=" progid:"+T+"(opacity="+p+")"}function Ao(u){for(var p=document.documentElement.style,_=0;_<u.length;_++)if(u[_]in p)return u[_];return!1}function sr(u,p,_){var T=p||new J(0,0);u.style[$c]=(ht.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(_?" scale("+_+")":"")}function Pn(u,p){u._leaflet_pos=p,ht.any3d?sr(u,p):(u.style.left=p.x+"px",u.style.top=p.y+"px")}function Yr(u){return u._leaflet_pos||new J(0,0)}var Be,Lo,Hl;if("onselectstart"in document)Be=function(){_e(window,"selectstart",wn)},Lo=function(){Ke(window,"selectstart",wn)};else{var qs=Ao(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Be=function(){if(qs){var u=document.documentElement.style;Hl=u[qs],u[qs]="none"}},Lo=function(){qs&&(document.documentElement.style[qs]=Hl,Hl=void 0)}}function jl(){_e(window,"dragstart",wn)}function Wl(){Ke(window,"dragstart",wn)}var Oa,Na;function ko(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(or(),Oa=u,Na=u.style.outlineStyle,u.style.outlineStyle="none",_e(window,"keydown",or))}function or(){Oa&&(Oa.style.outlineStyle=Na,Oa=void 0,Na=void 0,Ke(window,"keydown",or))}function Kr(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function Mr(u){var p=u.getBoundingClientRect();return{x:p.width/u.offsetWidth||1,y:p.height/u.offsetHeight||1,boundingClientRect:p}}var Fa={__proto__:null,TRANSFORM:$c,TRANSITION:Eo,TRANSITION_END:Ia,get:rr,getStyle:Da,create:Ee,remove:hn,empty:Vl,toFront:Po,toBack:Xr,hasClass:Co,addClass:Te,removeClass:sn,setClass:Zc,getClass:Ul,setOpacity:hi,testProp:Ao,setTransform:sr,setPosition:Pn,getPosition:Yr,get disableTextSelection(){return Be},get enableTextSelection(){return Lo},disableImageDrag:jl,enableImageDrag:Wl,preventOutline:ko,restoreOutline:or,getSizedParentNode:Kr,getScale:Mr};function _e(u,p,_,T){if(p&&typeof p=="object")for(var A in p)Xc(u,A,p[A],_);else{p=w(p);for(var j=0,ot=p.length;j<ot;j++)Xc(u,p[j],_,T)}return this}var Bn="_leaflet_events";function Ke(u,p,_,T){if(arguments.length===1)qc(u),delete u[Bn];else if(p&&typeof p=="object")for(var A in p)Gl(u,A,p[A],_);else if(p=w(p),arguments.length===2)qc(u,function(yt){return O(p,yt)!==-1});else for(var j=0,ot=p.length;j<ot;j++)Gl(u,p[j],_,T);return this}function qc(u,p){for(var _ in u[Bn]){var T=_.split(/\d/)[0];(!p||p(T))&&Gl(u,T,null,null,_)}}var Xs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xc(u,p,_,T){var A=p+c(_)+(T?"_"+c(T):"");if(u[Bn]&&u[Bn][A])return this;var j=function(yt){return _.call(T||u,yt||window.event)},ot=j;!ht.touchNative&&ht.pointer&&p.indexOf("touch")===0?j=Re(u,p,j):ht.touch&&p==="dblclick"?j=Ai(u,j):"addEventListener"in u?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?u.addEventListener(Xs[p]||p,j,ht.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(j=function(yt){yt=yt||window.event,Va(u,yt)&&ot(yt)},u.addEventListener(Xs[p],j,!1)):u.addEventListener(p,ot,!1):u.attachEvent("on"+p,j),u[Bn]=u[Bn]||{},u[Bn][A]=j}function Gl(u,p,_,T,A){A=A||p+c(_)+(T?"_"+c(T):"");var j=u[Bn]&&u[Bn][A];if(!j)return this;!ht.touchNative&&ht.pointer&&p.indexOf("touch")===0?De(u,p,j):ht.touch&&p==="dblclick"?mn(u,j):"removeEventListener"in u?u.removeEventListener(Xs[p]||p,j,!1):u.detachEvent("on"+p,j),u[Bn][A]=null}function Tr(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function $l(u){return Xc(u,"wheel",Tr),this}function za(u){return _e(u,"mousedown touchstart dblclick contextmenu",Tr),u._leaflet_disable_click=!0,this}function wn(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function ar(u){return wn(u),Tr(u),this}function Ys(u){if(u.composedPath)return u.composedPath();for(var p=[],_=u.target;_;)p.push(_),_=_.parentNode;return p}function Ba(u,p){if(!p)return new J(u.clientX,u.clientY);var _=Mr(p),T=_.boundingClientRect;return new J((u.clientX-T.left)/_.x-p.clientLeft,(u.clientY-T.top)/_.y-p.clientTop)}var Yg=ht.linux&&ht.chrome?window.devicePixelRatio:ht.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wd(u){return ht.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/Yg:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Va(u,p){var _=p.relatedTarget;if(!_)return!0;try{for(;_&&_!==u;)_=_.parentNode}catch{return!1}return _!==u}var Zl={__proto__:null,on:_e,off:Ke,stopPropagation:Tr,disableScrollPropagation:$l,disableClickPropagation:za,preventDefault:wn,stop:ar,getPropagationPath:Ys,getMousePosition:Ba,getWheelDelta:wd,isExternalTarget:Va,addListener:_e,removeListener:Ke},ql=it.extend({run:function(u,p,_,T){this.stop(),this._el=u,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=Yr(u),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(u){var p=+new Date-this._startTime,_=this._duration*1e3;p<_?this._runFrame(this._easeOut(p/_),u):(this._runFrame(1),this._complete())},_runFrame:function(u,p){var _=this._startPos.add(this._offset.multiplyBy(u));p&&_._round(),Pn(this._el,_),this.fire("step")},_complete:function(){tt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Oe=it.extend({options:{crs:Rt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,p){p=S(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(nt(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Eo&&ht.any3d&&!ht.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_e(this._proxy,Ia,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,p,_){if(p=p===void 0?this._zoom:this._limitZoom(p),u=this._limitCenter(nt(u),p,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=r({animate:_.animate},_.zoom),_.pan=r({animate:_.animate,duration:_.duration},_.pan));var T=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,p,_.zoom):this._tryAnimatedPan(u,_.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(u,p,_.pan&&_.pan.noMoveStart),this},setZoom:function(u,p){return this._loaded?this.setView(this.getCenter(),u,{zoom:p}):(this._zoom=u,this)},zoomIn:function(u,p){return u=u||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,p)},zoomOut:function(u,p){return u=u||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,p)},setZoomAround:function(u,p,_){var T=this.getZoomScale(p),A=this.getSize().divideBy(2),j=u instanceof J?u:this.latLngToContainerPoint(u),ot=j.subtract(A).multiplyBy(1-1/T),yt=this.containerPointToLatLng(A.add(ot));return this.setView(yt,p,{zoom:_})},_getBoundsCenterZoom:function(u,p){p=p||{},u=u.getBounds?u.getBounds():mt(u);var _=F(p.paddingTopLeft||p.padding||[0,0]),T=F(p.paddingBottomRight||p.padding||[0,0]),A=this.getBoundsZoom(u,!1,_.add(T));if(A=typeof p.maxZoom=="number"?Math.min(p.maxZoom,A):A,A===1/0)return{center:u.getCenter(),zoom:A};var j=T.subtract(_).divideBy(2),ot=this.project(u.getSouthWest(),A),yt=this.project(u.getNorthEast(),A),Mt=this.unproject(ot.add(yt).divideBy(2).add(j),A);return{center:Mt,zoom:A}},fitBounds:function(u,p){if(u=mt(u),!u.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(u,p);return this.setView(_.center,_.zoom,p)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,p){return this.setView(u,this._zoom,{pan:p})},panBy:function(u,p){if(u=F(u).round(),p=p||{},!u.x&&!u.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ql,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){Te(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,_,p.duration||.25,p.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,p,_){if(_=_||{},_.animate===!1||!ht.any3d)return this.setView(u,p,_);this._stop();var T=this.project(this.getCenter()),A=this.project(u),j=this.getSize(),ot=this._zoom;u=nt(u),p=p===void 0?ot:p;var yt=Math.max(j.x,j.y),Mt=yt*this.getZoomScale(ot,p),Nt=A.distanceTo(T)||1,te=1.42,de=te*te;function Pe($e){var $o=$e?-1:1,cy=$e?Mt:yt,hy=Mt*Mt-yt*yt+$o*de*de*Nt*Nt,io=2*cy*de*Nt,ro=hy/io,so=Math.sqrt(ro*ro+1)-ro,lu=so<1e-9?-18:Math.log(so);return lu}function Vn($e){return(Math.exp($e)-Math.exp(-$e))/2}function On($e){return(Math.exp($e)+Math.exp(-$e))/2}function Ri($e){return Vn($e)/On($e)}var di=Pe(0);function Wo($e){return yt*(On(di)/On(di+te*$e))}function gh($e){return yt*(On(di)*Ri(di+te*$e)-Vn(di))/de}function Ms($e){return 1-Math.pow(1-$e,1.5)}var Hd=Date.now(),no=(Pe(1)-di)/te,Ar=_.duration?1e3*_.duration:1e3*no*.8;function Go(){var $e=(Date.now()-Hd)/Ar,$o=Ms($e)*no;$e<=1?(this._flyToFrame=U(Go,this),this._move(this.unproject(T.add(A.subtract(T).multiplyBy(gh($o)/Nt)),ot),this.getScaleZoom(yt/Wo($o),ot),{flyTo:!0})):this._move(u,p)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),Go.call(this),this},flyToBounds:function(u,p){var _=this._getBoundsCenterZoom(u,p);return this.flyTo(_.center,_.zoom,p)},setMaxBounds:function(u){return u=mt(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var p=this.options.minZoom;return this.options.minZoom=u,this._loaded&&p!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var p=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&p!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,p){this._enforcingBounds=!0;var _=this.getCenter(),T=this._limitCenter(_,this._zoom,mt(u));return _.equals(T)||this.panTo(T,p),this._enforcingBounds=!1,this},panInside:function(u,p){p=p||{};var _=F(p.paddingTopLeft||p.padding||[0,0]),T=F(p.paddingBottomRight||p.padding||[0,0]),A=this.project(this.getCenter()),j=this.project(u),ot=this.getPixelBounds(),yt=lt([ot.min.add(_),ot.max.subtract(T)]),Mt=yt.getSize();if(!yt.contains(j)){this._enforcingBounds=!0;var Nt=j.subtract(yt.getCenter()),te=yt.extend(j).getSize().subtract(Mt);A.x+=Nt.x<0?-te.x:te.x,A.y+=Nt.y<0?-te.y:te.y,this.panTo(this.unproject(A),p),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=r({animate:!1,pan:!0},u===!0?{animate:!0}:u);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),T=p.divideBy(2).round(),A=_.divideBy(2).round(),j=T.subtract(A);return!j.x&&!j.y?this:(u.animate&&u.pan?this.panBy(j):(u.pan&&this._rawPanBy(j),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=r({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=o(this._handleGeolocationResponse,this),_=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,_,u):navigator.geolocation.getCurrentPosition(p,_,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var p=u.code,_=u.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var p=u.coords.latitude,_=u.coords.longitude,T=new _t(p,_),A=T.toBounds(u.coords.accuracy*2),j=this._locateOptions;if(j.setView){var ot=this.getBoundsZoom(A);this.setView(T,j.maxZoom?Math.min(ot,j.maxZoom):ot)}var yt={latlng:T,bounds:A,timestamp:u.timestamp};for(var Mt in u.coords)typeof u.coords[Mt]=="number"&&(yt[Mt]=u.coords[Mt]);this.fire("locationfound",yt)}},addHandler:function(u,p){if(!p)return this;var _=this[u]=new p(this);return this._handlers.push(_),this.options[u]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),hn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(tt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)hn(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,p){var _="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),T=Ee("div",_,p||this._mapPane);return u&&(this._panes[u]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),p=this.unproject(u.getBottomLeft()),_=this.unproject(u.getTopRight());return new z(p,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,p,_){u=mt(u),_=F(_||[0,0]);var T=this.getZoom()||0,A=this.getMinZoom(),j=this.getMaxZoom(),ot=u.getNorthWest(),yt=u.getSouthEast(),Mt=this.getSize().subtract(_),Nt=lt(this.project(yt,T),this.project(ot,T)).getSize(),te=ht.any3d?this.options.zoomSnap:1,de=Mt.x/Nt.x,Pe=Mt.y/Nt.y,Vn=p?Math.max(de,Pe):Math.min(de,Pe);return T=this.getScaleZoom(Vn,T),te&&(T=Math.round(T/(te/100))*(te/100),T=p?Math.ceil(T/te)*te:Math.floor(T/te)*te),Math.max(A,Math.min(j,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,p){var _=this._getTopLeftPoint(u,p);return new G(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,p){var _=this.options.crs;return p=p===void 0?this._zoom:p,_.scale(u)/_.scale(p)},getScaleZoom:function(u,p){var _=this.options.crs;p=p===void 0?this._zoom:p;var T=_.zoom(u*_.scale(p));return isNaN(T)?1/0:T},project:function(u,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(nt(u),p)},unproject:function(u,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(F(u),p)},layerPointToLatLng:function(u){var p=F(u).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(u){var p=this.project(nt(u))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(nt(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(mt(u))},distance:function(u,p){return this.options.crs.distance(nt(u),nt(p))},containerPointToLayerPoint:function(u){return F(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return F(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var p=this.containerPointToLayerPoint(F(u));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(nt(u)))},mouseEventToContainerPoint:function(u){return Ba(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var p=this._container=rr(u);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_e(p,"scroll",this._onScroll,this),this._containerId=c(p)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&ht.any3d,Te(u,"leaflet-container"+(ht.touch?" leaflet-touch":"")+(ht.retina?" leaflet-retina":"")+(ht.ielt9?" leaflet-oldie":"")+(ht.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=Da(u,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pn(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Te(u.markerPane,"leaflet-zoom-hide"),Te(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,p,_){Pn(this._mapPane,new J(0,0));var T=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var A=this._zoom!==p;this._moveStart(A,_)._move(u,p)._moveEnd(A),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(u,p){return u&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(u,p,_,T){p===void 0&&(p=this._zoom);var A=this._zoom!==p;return this._zoom=p,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),T?_&&_.pinch&&this.fire("zoom",_):((A||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return tt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){Pn(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[c(this._container)]=this;var p=u?Ke:_e;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),ht.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){tt(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,p){for(var _=[],T,A=p==="mouseout"||p==="mouseover",j=u.target||u.srcElement,ot=!1;j;){if(T=this._targets[c(j)],T&&(p==="click"||p==="preclick")&&this._draggableMoved(T)){ot=!0;break}if(T&&T.listens(p,!0)&&(A&&!Va(j,u)||(_.push(T),A))||j===this._container)break;j=j.parentNode}return!_.length&&!ot&&!A&&this.listens(p,!0)&&(_=[this]),_},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var p=u.target||u.srcElement;if(!(!this._loaded||p._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(p))){var _=u.type;_==="mousedown"&&ko(p),this._fireDOMEvent(u,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,p,_){if(u.type==="click"){var T=r({},u);T.type="preclick",this._fireDOMEvent(T,T.type,_)}var A=this._findEventTargets(u,p);if(_){for(var j=[],ot=0;ot<_.length;ot++)_[ot].listens(p,!0)&&j.push(_[ot]);A=j.concat(A)}if(A.length){p==="contextmenu"&&wn(u);var yt=A[0],Mt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var Nt=yt.getLatLng&&(!yt._radius||yt._radius<=10);Mt.containerPoint=Nt?this.latLngToContainerPoint(yt.getLatLng()):this.mouseEventToContainerPoint(u),Mt.layerPoint=this.containerPointToLayerPoint(Mt.containerPoint),Mt.latlng=Nt?yt.getLatLng():this.layerPointToLatLng(Mt.layerPoint)}for(ot=0;ot<A.length;ot++)if(A[ot].fire(p,Mt,!0),Mt.originalEvent._stopped||A[ot].options.bubblingMouseEvents===!1&&O(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,p=this._handlers.length;u<p;u++)this._handlers[u].disable()},whenReady:function(u,p){return this._loaded?u.call(p||this,{target:this}):this.on("load",u,p),this},_getMapPanePos:function(){return Yr(this._mapPane)||new J(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,p){var _=u&&p!==void 0?this._getNewPixelOrigin(u,p):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,p){var _=this.getSize()._divideBy(2);return this.project(u,p)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,p,_){var T=this._getNewPixelOrigin(_,p);return this.project(u,p)._subtract(T)},_latLngBoundsToNewLayerBounds:function(u,p,_){var T=this._getNewPixelOrigin(_,p);return lt([this.project(u.getSouthWest(),p)._subtract(T),this.project(u.getNorthWest(),p)._subtract(T),this.project(u.getSouthEast(),p)._subtract(T),this.project(u.getNorthEast(),p)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,p,_){if(!_)return u;var T=this.project(u,p),A=this.getSize().divideBy(2),j=new G(T.subtract(A),T.add(A)),ot=this._getBoundsOffset(j,_,p);return Math.abs(ot.x)<=1&&Math.abs(ot.y)<=1?u:this.unproject(T.add(ot),p)},_limitOffset:function(u,p){if(!p)return u;var _=this.getPixelBounds(),T=new G(_.min.add(u),_.max.add(u));return u.add(this._getBoundsOffset(T,p))},_getBoundsOffset:function(u,p,_){var T=lt(this.project(p.getNorthEast(),_),this.project(p.getSouthWest(),_)),A=T.min.subtract(u.min),j=T.max.subtract(u.max),ot=this._rebound(A.x,-j.x),yt=this._rebound(A.y,-j.y);return new J(ot,yt)},_rebound:function(u,p){return u+p>0?Math.round(u-p)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(p))},_limitZoom:function(u){var p=this.getMinZoom(),_=this.getMaxZoom(),T=ht.any3d?this.options.zoomSnap:1;return T&&(u=Math.round(u/T)*T),Math.max(p,Math.min(_,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){sn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,p){var _=this._getCenterOffset(u)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,p),!0)},_createAnimProxy:function(){var u=this._proxy=Ee("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(p){var _=$c,T=this._proxy.style[_];sr(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),T===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){hn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),p=this.getZoom();sr(this._proxy,this.project(u,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,p,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(p),A=this._getCenterOffset(u)._divideBy(1-1/T);return _.animate!==!0&&!this.getSize().contains(A)?!1:(U(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(u,p,!0)},this),!0)},_animateZoom:function(u,p,_,T){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=p,Te(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:p,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&sn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ys(u,p){return new Oe(u,p)}var Li=Y.extend({options:{position:"topright"},initialize:function(u){S(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var p=this._map;return p&&p.removeControl(this),this.options.position=u,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var p=this._container=this.onAdd(u),_=this.getPosition(),T=u._controlCorners[_];return Te(p,"leaflet-control"),_.indexOf("bottom")!==-1?T.insertBefore(p,T.firstChild):T.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(hn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),vs=function(u){return new Li(u)};Oe.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},p="leaflet-",_=this._controlContainer=Ee("div",p+"control-container",this._container);function T(A,j){var ot=p+A+" "+p+j;u[A+j]=Ee("div",ot,_)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)hn(this._controlCorners[u]);hn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yc=Li.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,p,_,T){return _<T?-1:T<_?1:0}},initialize:function(u,p,_){S(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in u)this._addLayer(u[T],T);for(T in p)this._addLayer(p[T],T,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Li.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,p){return this._addLayer(u,p),this._map?this._update():this},addOverlay:function(u,p){return this._addLayer(u,p,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var p=this._getLayer(c(u));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){Te(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(Te(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):sn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return sn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",p=this._container=Ee("div",u),_=this.options.collapsed;p.setAttribute("aria-haspopup",!0),za(p),$l(p);var T=this._section=Ee("section",u+"-list");_&&(this._map.on("click",this.collapse,this),_e(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=Ee("a",u+"-toggle",p);A.href="#",A.title="Layers",A.setAttribute("role","button"),_e(A,{keydown:function(j){j.keyCode===13&&this._expandSafely()},click:function(j){wn(j),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=Ee("div",u+"-base",T),this._separator=Ee("div",u+"-separator",T),this._overlaysList=Ee("div",u+"-overlays",T),p.appendChild(T)},_getLayer:function(u){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&c(this._layers[p].layer)===u)return this._layers[p]},_addLayer:function(u,p,_){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:p,overlay:_}),this.options.sortLayers&&this._layers.sort(o(function(T,A){return this.options.sortFunction(T.layer,A.layer,T.name,A.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Vl(this._baseLayersList),Vl(this._overlaysList),this._layerControlInputs=[];var u,p,_,T,A=0;for(_=0;_<this._layers.length;_++)T=this._layers[_],this._addItem(T),p=p||T.overlay,u=u||!T.overlay,A+=T.overlay?0:1;return this.options.hideSingleBase&&(u=u&&A>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=p&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var p=this._getLayer(c(u.target)),_=p.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;_&&this._map.fire(_,p)},_createRadioElement:function(u,p){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(p?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=_,T.firstChild},_addItem:function(u){var p=document.createElement("label"),_=this._map.hasLayer(u.layer),T;u.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=_):T=this._createRadioElement("leaflet-base-layers_"+c(this),_),this._layerControlInputs.push(T),T.layerId=c(u.layer),_e(T,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+u.name;var j=document.createElement("span");p.appendChild(j),j.appendChild(T),j.appendChild(A);var ot=u.overlay?this._overlaysList:this._baseLayersList;return ot.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,p,_,T=[],A=[];this._handlingClick=!0;for(var j=u.length-1;j>=0;j--)p=u[j],_=this._getLayer(p.layerId).layer,p.checked?T.push(_):p.checked||A.push(_);for(j=0;j<A.length;j++)this._map.hasLayer(A[j])&&this._map.removeLayer(A[j]);for(j=0;j<T.length;j++)this._map.hasLayer(T[j])||this._map.addLayer(T[j]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,p,_,T=this._map.getZoom(),A=u.length-1;A>=0;A--)p=u[A],_=this._getLayer(p.layerId).layer,p.disabled=_.options.minZoom!==void 0&&T<_.options.minZoom||_.options.maxZoom!==void 0&&T>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,_e(u,"click",wn),this.expand();var p=this;setTimeout(function(){Ke(u,"click",wn),p._preventClick=!1})}}),Xl=function(u,p,_){return new Yc(u,p,_)},Ro=Li.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var p="leaflet-control-zoom",_=Ee("div",p+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,p+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,p+"-out",_,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,p,_,T,A){var j=Ee("a",_,T);return j.innerHTML=u,j.href="#",j.title=p,j.setAttribute("role","button"),j.setAttribute("aria-label",p),za(j),_e(j,"click",ar),_e(j,"click",A,this),_e(j,"click",this._refocusOnMap,this),j},_updateDisabled:function(){var u=this._map,p="leaflet-disabled";sn(this._zoomInButton,p),sn(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(Te(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(Te(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Oe.mergeOptions({zoomControl:!0}),Oe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ro,this.addControl(this.zoomControl))});var bd=function(u){return new Ro(u)},fi=Li.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var p="leaflet-control-scale",_=Ee("div",p),T=this.options;return this._addScales(T,p+"-line",_),u.on(T.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),_},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,p,_){u.metric&&(this._mScale=Ee("div",p,_)),u.imperial&&(this._iScale=Ee("div",p,_))},_update:function(){var u=this._map,p=u.getSize().y/2,_=u.distance(u.containerPointToLatLng([0,p]),u.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(_)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var p=this._getRoundNum(u),_=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,_,p/u)},_updateImperial:function(u){var p=u*3.2808399,_,T,A;p>5280?(_=p/5280,T=this._getRoundNum(_),this._updateScale(this._iScale,T+" mi",T/_)):(A=this._getRoundNum(p),this._updateScale(this._iScale,A+" ft",A/p))},_updateScale:function(u,p,_){u.style.width=Math.round(this.options.maxWidth*_)+"px",u.innerHTML=p},_getRoundNum:function(u){var p=Math.pow(10,(Math.floor(u)+"").length-1),_=u/p;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,p*_}}),Io=function(u){return new fi(u)},Kc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ks=Li.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ht.inlineSvg?Kc+" ":"")+"Leaflet</a>"},initialize:function(u){S(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=Ee("div","leaflet-control-attribution"),za(this._container);for(var p in u._layers)u._layers[p].getAttribution&&this.addAttribution(u._layers[p].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var p in this._attributions)this._attributions[p]&&u.push(p);var _=[];this.options.prefix&&_.push(this.options.prefix),u.length&&_.push(u.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});Oe.mergeOptions({attributionControl:!0}),Oe.addInitHook(function(){this.options.attributionControl&&new Ks().addTo(this)});var Kg=function(u){return new Ks(u)};Li.Layers=Yc,Li.Zoom=Ro,Li.Scale=fi,Li.Attribution=Ks,vs.layers=Xl,vs.zoom=bd,vs.scale=Io,vs.attribution=Kg;var Bi=Y.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Bi.addTo=function(u,p){return u.addHandler(p,this),this};var Jc={Events:at},Do=ht.touch?"touchstart mousedown":"mousedown",lr=it.extend({options:{clickTolerance:3},initialize:function(u,p,_,T){S(this,T),this._element=u,this._dragStartTarget=p||u,this._preventOutline=_},enable:function(){this._enabled||(_e(this._dragStartTarget,Do,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(lr._dragging===this&&this.finishDrag(!0),Ke(this._dragStartTarget,Do,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Co(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){lr._dragging===this&&this.finishDrag();return}if(!(lr._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(lr._dragging=this,this._preventOutline&&ko(this._element),jl(),Be(),!this._moving)){this.fire("down");var p=u.touches?u.touches[0]:u,_=Kr(this._element);this._startPoint=new J(p.clientX,p.clientY),this._startPos=Yr(this._element),this._parentScale=Mr(_);var T=u.type==="mousedown";_e(document,T?"mousemove":"touchmove",this._onMove,this),_e(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var p=u.touches&&u.touches.length===1?u.touches[0]:u,_=new J(p.clientX,p.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,wn(u),this._moved||(this.fire("dragstart"),this._moved=!0,Te(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Te(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),Pn(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){sn(document.body,"leaflet-dragging"),this._lastTarget&&(sn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ke(document,"mousemove touchmove",this._onMove,this),Ke(document,"mouseup touchend touchcancel",this._onUp,this),Wl(),Lo();var p=this._moved&&this._moving;this._moving=!1,lr._dragging=!1,p&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function Qc(u,p,_){var T,A=[1,4,2,8],j,ot,yt,Mt,Nt,te,de,Pe;for(j=0,te=u.length;j<te;j++)u[j]._code=Js(u[j],p);for(yt=0;yt<4;yt++){for(de=A[yt],T=[],j=0,te=u.length,ot=te-1;j<te;ot=j++)Mt=u[j],Nt=u[ot],Mt._code&de?Nt._code&de||(Pe=Kl(Nt,Mt,de,p,_),Pe._code=Js(Pe,p),T.push(Pe)):(Nt._code&de&&(Pe=Kl(Nt,Mt,de,p,_),Pe._code=Js(Pe,p),T.push(Pe)),T.push(Mt));u=T}return u}function Sd(u,p){var _,T,A,j,ot,yt,Mt,Nt,te;if(!u||u.length===0)throw new Error("latlngs not passed");Vi(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var de=nt([0,0]),Pe=mt(u),Vn=Pe.getNorthWest().distanceTo(Pe.getSouthWest())*Pe.getNorthEast().distanceTo(Pe.getNorthWest());Vn<1700&&(de=th(u));var On=u.length,Ri=[];for(_=0;_<On;_++){var di=nt(u[_]);Ri.push(p.project(nt([di.lat-de.lat,di.lng-de.lng])))}for(yt=Mt=Nt=0,_=0,T=On-1;_<On;T=_++)A=Ri[_],j=Ri[T],ot=A.y*j.x-j.y*A.x,Mt+=(A.x+j.x)*ot,Nt+=(A.y+j.y)*ot,yt+=ot*3;yt===0?te=Ri[0]:te=[Mt/yt,Nt/yt];var Wo=p.unproject(F(te));return nt([Wo.lat+de.lat,Wo.lng+de.lng])}function th(u){for(var p=0,_=0,T=0,A=0;A<u.length;A++){var j=nt(u[A]);p+=j.lat,_+=j.lng,T++}return nt([p/T,_/T])}var Jg={__proto__:null,clipPolygon:Qc,polygonCenter:Sd,centroid:th};function Yl(u,p){if(!p||!u.length)return u.slice();var _=p*p;return u=ey(u,_),u=ty(u,_),u}function Md(u,p,_){return Math.sqrt(Qs(u,p,_,!0))}function Qg(u,p,_){return Qs(u,p,_)}function ty(u,p){var _=u.length,T=typeof Uint8Array<"u"?Uint8Array:Array,A=new T(_);A[0]=A[_-1]=1,eh(u,A,p,0,_-1);var j,ot=[];for(j=0;j<_;j++)A[j]&&ot.push(u[j]);return ot}function eh(u,p,_,T,A){var j=0,ot,yt,Mt;for(yt=T+1;yt<=A-1;yt++)Mt=Qs(u[yt],u[T],u[A],!0),Mt>j&&(ot=yt,j=Mt);j>_&&(p[ot]=1,eh(u,p,_,T,ot),eh(u,p,_,ot,A))}function ey(u,p){for(var _=[u[0]],T=1,A=0,j=u.length;T<j;T++)ny(u[T],u[A])>p&&(_.push(u[T]),A=T);return A<j-1&&_.push(u[j-1]),_}var nh;function Td(u,p,_,T,A){var j=T?nh:Js(u,_),ot=Js(p,_),yt,Mt,Nt;for(nh=ot;;){if(!(j|ot))return[u,p];if(j&ot)return!1;yt=j||ot,Mt=Kl(u,p,yt,_,A),Nt=Js(Mt,_),yt===j?(u=Mt,j=Nt):(p=Mt,ot=Nt)}}function Kl(u,p,_,T,A){var j=p.x-u.x,ot=p.y-u.y,yt=T.min,Mt=T.max,Nt,te;return _&8?(Nt=u.x+j*(Mt.y-u.y)/ot,te=Mt.y):_&4?(Nt=u.x+j*(yt.y-u.y)/ot,te=yt.y):_&2?(Nt=Mt.x,te=u.y+ot*(Mt.x-u.x)/j):_&1&&(Nt=yt.x,te=u.y+ot*(yt.x-u.x)/j),new J(Nt,te,A)}function Js(u,p){var _=0;return u.x<p.min.x?_|=1:u.x>p.max.x&&(_|=2),u.y<p.min.y?_|=4:u.y>p.max.y&&(_|=8),_}function ny(u,p){var _=p.x-u.x,T=p.y-u.y;return _*_+T*T}function Qs(u,p,_,T){var A=p.x,j=p.y,ot=_.x-A,yt=_.y-j,Mt=ot*ot+yt*yt,Nt;return Mt>0&&(Nt=((u.x-A)*ot+(u.y-j)*yt)/Mt,Nt>1?(A=_.x,j=_.y):Nt>0&&(A+=ot*Nt,j+=yt*Nt)),ot=u.x-A,yt=u.y-j,T?ot*ot+yt*yt:new J(A,j)}function Vi(u){return!R(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function Ed(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Vi(u)}function Pd(u,p){var _,T,A,j,ot,yt,Mt,Nt;if(!u||u.length===0)throw new Error("latlngs not passed");Vi(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var te=nt([0,0]),de=mt(u),Pe=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());Pe<1700&&(te=th(u));var Vn=u.length,On=[];for(_=0;_<Vn;_++){var Ri=nt(u[_]);On.push(p.project(nt([Ri.lat-te.lat,Ri.lng-te.lng])))}for(_=0,T=0;_<Vn-1;_++)T+=On[_].distanceTo(On[_+1])/2;if(T===0)Nt=On[0];else for(_=0,j=0;_<Vn-1;_++)if(ot=On[_],yt=On[_+1],A=ot.distanceTo(yt),j+=A,j>T){Mt=(j-T)/A,Nt=[yt.x-Mt*(yt.x-ot.x),yt.y-Mt*(yt.y-ot.y)];break}var di=p.unproject(F(Nt));return nt([di.lat+te.lat,di.lng+te.lng])}var Cd={__proto__:null,simplify:Yl,pointToSegmentDistance:Md,closestPointOnSegment:Qg,clipSegment:Td,_getEdgeIntersection:Kl,_getBitCode:Js,_sqClosestPointOnSegment:Qs,isFlat:Vi,_flat:Ed,polylineCenter:Pd},ih={project:function(u){return new J(u.lng,u.lat)},unproject:function(u){return new _t(u.y,u.x)},bounds:new G([-180,-90],[180,90])},rh={R:6378137,R_MINOR:6356752314245179e-9,bounds:new G([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var p=Math.PI/180,_=this.R,T=u.lat*p,A=this.R_MINOR/_,j=Math.sqrt(1-A*A),ot=j*Math.sin(T),yt=Math.tan(Math.PI/4-T/2)/Math.pow((1-ot)/(1+ot),j/2);return T=-_*Math.log(Math.max(yt,1e-10)),new J(u.lng*p*_,T)},unproject:function(u){for(var p=180/Math.PI,_=this.R,T=this.R_MINOR/_,A=Math.sqrt(1-T*T),j=Math.exp(-u.y/_),ot=Math.PI/2-2*Math.atan(j),yt=0,Mt=.1,Nt;yt<15&&Math.abs(Mt)>1e-7;yt++)Nt=A*Math.sin(ot),Nt=Math.pow((1-Nt)/(1+Nt),A/2),Mt=Math.PI/2-2*Math.atan(j*Nt)-ot,ot+=Mt;return new _t(ot*p,u.x*p/_)}},iy={__proto__:null,LonLat:ih,Mercator:rh,SphericalMercator:Ft},ry=r({},At,{code:"EPSG:3395",projection:rh,transformation:(function(){var u=.5/(Math.PI*rh.R);return bt(u,.5,-u,.5)})()}),Ad=r({},At,{code:"EPSG:4326",projection:ih,transformation:bt(1/180,1,-1/180,.5)}),sy=r({},Ot,{projection:ih,transformation:bt(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,p){var _=p.lng-u.lng,T=p.lat-u.lat;return Math.sqrt(_*_+T*T)},infinite:!0});Ot.Earth=At,Ot.EPSG3395=ry,Ot.EPSG3857=Rt,Ot.EPSG900913=Dt,Ot.EPSG4326=Ad,Ot.Simple=sy;var ur=it.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[c(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[c(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var p=u.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var _=this.getEvents();p.on(_,this),this.once("remove",function(){p.off(_,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Oe.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var p=c(u);return this._layers[p]?this:(this._layers[p]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var p=c(u);return this._layers[p]?(this._loaded&&u.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return c(u)in this._layers},eachLayer:function(u,p){for(var _ in this._layers)u.call(p,this._layers[_]);return this},_addLayers:function(u){u=u?R(u)?u:[u]:[];for(var p=0,_=u.length;p<_;p++)this.addLayer(u[p])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[c(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var p=c(u);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,p=-1/0,_=this._getZoomSpan();for(var T in this._zoomBoundLayers){var A=this._zoomBoundLayers[T].options;u=A.minZoom===void 0?u:Math.min(u,A.minZoom),p=A.maxZoom===void 0?p:Math.max(p,A.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=u===1/0?void 0:u,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _s=ur.extend({initialize:function(u,p){S(this,p),this._layers={};var _,T;if(u)for(_=0,T=u.length;_<T;_++)this.addLayer(u[_])},addLayer:function(u){var p=this.getLayerId(u);return this._layers[p]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var p=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(u){var p=typeof u=="number"?u:this.getLayerId(u);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var p=Array.prototype.slice.call(arguments,1),_,T;for(_ in this._layers)T=this._layers[_],T[u]&&T[u].apply(T,p);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,p){for(var _ in this._layers)u.call(p,this._layers[_]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return c(u)}}),Ua=function(u,p){return new _s(u,p)},Jr=_s.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),_s.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),_s.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new z;for(var p in this._layers){var _=this._layers[p];u.extend(_.getBounds?_.getBounds():_.getLatLng())}return u}}),Ld=function(u,p){return new Jr(u,p)},to=Y.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){S(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,p){var _=this._getIconUrl(u);if(!_){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(_,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(T,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(u,p){var _=this.options,T=_[p+"Size"];typeof T=="number"&&(T=[T,T]);var A=F(T),j=F(p==="shadow"&&_.shadowAnchor||_.iconAnchor||A&&A.divideBy(2,!0));u.className="leaflet-marker-"+p+" "+(_.className||""),j&&(u.style.marginLeft=-j.x+"px",u.style.marginTop=-j.y+"px"),A&&(u.style.width=A.x+"px",u.style.height=A.y+"px")},_createImg:function(u,p){return p=p||document.createElement("img"),p.src=u,p},_getIconUrl:function(u){return ht.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function kd(u){return new to(u)}var Oo=to.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Oo.imagePath!="string"&&(Oo.imagePath=this._detectIconPath()),(this.options.imagePath||Oo.imagePath)+to.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var p=function(_,T,A){var j=T.exec(_);return j&&j[A]};return u=p(u,/^url\((['"])?(.+)\1\)$/,2),u&&p(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=Ee("div","leaflet-default-icon-path",document.body),p=Da(u,"background-image")||Da(u,"backgroundImage");if(document.body.removeChild(u),p=this._stripUrl(p),p)return p;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),sh=Bi.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new lr(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Te(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&sn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var p=this._marker,_=p._map,T=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,j=Yr(p._icon),ot=_.getPixelBounds(),yt=_.getPixelOrigin(),Mt=lt(ot.min._subtract(yt).add(A),ot.max._subtract(yt).subtract(A));if(!Mt.contains(j)){var Nt=F((Math.max(Mt.max.x,j.x)-Mt.max.x)/(ot.max.x-Mt.max.x)-(Math.min(Mt.min.x,j.x)-Mt.min.x)/(ot.min.x-Mt.min.x),(Math.max(Mt.max.y,j.y)-Mt.max.y)/(ot.max.y-Mt.max.y)-(Math.min(Mt.min.y,j.y)-Mt.min.y)/(ot.min.y-Mt.min.y)).multiplyBy(T);_.panBy(Nt,{animate:!1}),this._draggable._newPos._add(Nt),this._draggable._startPos._add(Nt),Pn(p._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=U(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(tt(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,u)))},_onDrag:function(u){var p=this._marker,_=p._shadow,T=Yr(p._icon),A=p._map.layerPointToLatLng(T);_&&Pn(_,T),p._latlng=A,u.latlng=A,u.oldLatLng=this._oldLatLng,p.fire("move",u).fire("drag",u)},_onDragEnd:function(u){tt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Qr=ur.extend({options:{icon:new Oo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,p){S(this,p),this._latlng=nt(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var p=this._latlng;return this._latlng=nt(u),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=u.icon.createIcon(this._icon),T=!1;_!==this._icon&&(this._icon&&this._removeIcon(),T=!0,u.title&&(_.title=u.title),_.tagName==="IMG"&&(_.alt=u.alt||"")),Te(_,p),u.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(_,"focus",this._panOnFocus,this);var A=u.icon.createShadow(this._shadow),j=!1;A!==this._shadow&&(this._removeShadow(),j=!0),A&&(Te(A,p),A.alt=""),this._shadow=A,u.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&j&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ke(this._icon,"focus",this._panOnFocus,this),hn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&hn(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&Pn(this._icon,u),this._shadow&&Pn(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var p=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(Te(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sh)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sh(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&hi(this._icon,u),this._shadow&&hi(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var p=this.options.icon.options,_=p.iconSize?F(p.iconSize):F(0,0),T=p.iconAnchor?F(p.iconAnchor):F(0,0);u.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:_.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function oy(u,p){return new Qr(u,p)}var xs=ur.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return S(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Jl=xs.extend({options:{fill:!0,radius:10},initialize:function(u,p){S(this,p),this._latlng=nt(u),this._radius=this.options.radius},setLatLng:function(u){var p=this._latlng;return this._latlng=nt(u),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var p=u&&u.radius||this._radius;return xs.prototype.setStyle.call(this,u),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,p=this._radiusY||u,_=this._clickTolerance(),T=[u+_,p+_];this._pxBounds=new G(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Rd(u,p){return new Jl(u,p)}var Ql=Jl.extend({initialize:function(u,p,_){if(typeof p=="number"&&(p=r({},_,{radius:p})),S(this,p),this._latlng=nt(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new z(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:xs.prototype.setStyle,_project:function(){var u=this._latlng.lng,p=this._latlng.lat,_=this._map,T=_.options.crs;if(T.distance===At.distance){var A=Math.PI/180,j=this._mRadius/At.R/A,ot=_.project([p+j,u]),yt=_.project([p-j,u]),Mt=ot.add(yt).divideBy(2),Nt=_.unproject(Mt).lat,te=Math.acos((Math.cos(j*A)-Math.sin(p*A)*Math.sin(Nt*A))/(Math.cos(p*A)*Math.cos(Nt*A)))/A;(isNaN(te)||te===0)&&(te=j/Math.cos(Math.PI/180*p)),this._point=Mt.subtract(_.getPixelOrigin()),this._radius=isNaN(te)?0:Mt.x-_.project([Nt,u-te]).x,this._radiusY=Mt.y-ot.y}else{var de=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(de).x}this._updateBounds()}});function Ha(u,p,_){return new Ql(u,p,_)}var ki=xs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,p){S(this,p),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var p=1/0,_=null,T=Qs,A,j,ot=0,yt=this._parts.length;ot<yt;ot++)for(var Mt=this._parts[ot],Nt=1,te=Mt.length;Nt<te;Nt++){A=Mt[Nt-1],j=Mt[Nt];var de=T(u,A,j,!0);de<p&&(p=de,_=T(u,A,j))}return _&&(_.distance=Math.sqrt(p)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pd(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,p){return p=p||this._defaultShape(),u=nt(u),p.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new z,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Vi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var p=[],_=Vi(u),T=0,A=u.length;T<A;T++)_?(p[T]=nt(u[T]),this._bounds.extend(p[T])):p[T]=this._convertLatLngs(u[T]);return p},_project:function(){var u=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),p=new J(u,u);this._rawPxBounds&&(this._pxBounds=new G([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(u,p,_){var T=u[0]instanceof _t,A=u.length,j,ot;if(T){for(ot=[],j=0;j<A;j++)ot[j]=this._map.latLngToLayerPoint(u[j]),_.extend(ot[j]);p.push(ot)}else for(j=0;j<A;j++)this._projectLatlngs(u[j],p,_)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,_,T,A,j,ot,yt,Mt;for(_=0,A=0,j=this._rings.length;_<j;_++)for(Mt=this._rings[_],T=0,ot=Mt.length;T<ot-1;T++)yt=Td(Mt[T],Mt[T+1],u,T,!0),yt&&(p[A]=p[A]||[],p[A].push(yt[0]),(yt[1]!==Mt[T+1]||T===ot-2)&&(p[A].push(yt[1]),A++))}},_simplifyPoints:function(){for(var u=this._parts,p=this.options.smoothFactor,_=0,T=u.length;_<T;_++)u[_]=Yl(u[_],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,p){var _,T,A,j,ot,yt,Mt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(_=0,j=this._parts.length;_<j;_++)for(yt=this._parts[_],T=0,ot=yt.length,A=ot-1;T<ot;A=T++)if(!(!p&&T===0)&&Md(u,yt[A],yt[T])<=Mt)return!0;return!1}});function ay(u,p){return new ki(u,p)}ki._flat=Ed;var ts=ki.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Sd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var p=ki.prototype._convertLatLngs.call(this,u),_=p.length;return _>=2&&p[0]instanceof _t&&p[0].equals(p[_-1])&&p.pop(),p},_setLatLngs:function(u){ki.prototype._setLatLngs.call(this,u),Vi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Vi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,p=this.options.weight,_=new J(p,p);if(u=new G(u.min.subtract(_),u.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,A=this._rings.length,j;T<A;T++)j=Qc(this._rings[T],u,!0),j.length&&this._parts.push(j)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var p=!1,_,T,A,j,ot,yt,Mt,Nt;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(j=0,Mt=this._parts.length;j<Mt;j++)for(_=this._parts[j],ot=0,Nt=_.length,yt=Nt-1;ot<Nt;yt=ot++)T=_[ot],A=_[yt],T.y>u.y!=A.y>u.y&&u.x<(A.x-T.x)*(u.y-T.y)/(A.y-T.y)+T.x&&(p=!p);return p||ki.prototype._containsPoint.call(this,u,!0)}});function ly(u,p){return new ts(u,p)}var Er=Jr.extend({initialize:function(u,p){S(this,p),this._layers={},u&&this.addData(u)},addData:function(u){var p=R(u)?u:u.features,_,T,A;if(p){for(_=0,T=p.length;_<T;_++)A=p[_],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var j=this.options;if(j.filter&&!j.filter(u))return this;var ot=No(u,j);return ot?(ot.feature=ru(u),ot.defaultOptions=ot.options,this.resetStyle(ot),j.onEachFeature&&j.onEachFeature(u,ot),this.addLayer(ot)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=r({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(p){this._setLayerStyle(p,u)},this)},_setLayerStyle:function(u,p){u.setStyle&&(typeof p=="function"&&(p=p(u.feature)),u.setStyle(p))}});function No(u,p){var _=u.type==="Feature"?u.geometry:u,T=_?_.coordinates:null,A=[],j=p&&p.pointToLayer,ot=p&&p.coordsToLatLng||eu,yt,Mt,Nt,te;if(!T&&!_)return null;switch(_.type){case"Point":return yt=ot(T),tu(j,u,yt,p);case"MultiPoint":for(Nt=0,te=T.length;Nt<te;Nt++)yt=ot(T[Nt]),A.push(tu(j,u,yt,p));return new Jr(A);case"LineString":case"MultiLineString":return Mt=ja(T,_.type==="LineString"?0:1,ot),new ki(Mt,p);case"Polygon":case"MultiPolygon":return Mt=ja(T,_.type==="Polygon"?1:2,ot),new ts(Mt,p);case"GeometryCollection":for(Nt=0,te=_.geometries.length;Nt<te;Nt++){var de=No({geometry:_.geometries[Nt],type:"Feature",properties:u.properties},p);de&&A.push(de)}return new Jr(A);case"FeatureCollection":for(Nt=0,te=_.features.length;Nt<te;Nt++){var Pe=No(_.features[Nt],p);Pe&&A.push(Pe)}return new Jr(A);default:throw new Error("Invalid GeoJSON object.")}}function tu(u,p,_,T){return u?u(p,_):new Qr(_,T&&T.markersInheritOptions&&T)}function eu(u){return new _t(u[1],u[0],u[2])}function ja(u,p,_){for(var T=[],A=0,j=u.length,ot;A<j;A++)ot=p?ja(u[A],p-1,_):(_||eu)(u[A]),T.push(ot);return T}function nu(u,p){return u=nt(u),u.alt!==void 0?[y(u.lng,p),y(u.lat,p),y(u.alt,p)]:[y(u.lng,p),y(u.lat,p)]}function iu(u,p,_,T){for(var A=[],j=0,ot=u.length;j<ot;j++)A.push(p?iu(u[j],Vi(u[j])?0:p-1,_,T):nu(u[j],T));return!p&&_&&A.length>0&&A.push(A[0].slice()),A}function Fo(u,p){return u.feature?r({},u.feature,{geometry:p}):ru(p)}function ru(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var oh={toGeoJSON:function(u){return Fo(this,{type:"Point",coordinates:nu(this.getLatLng(),u)})}};Qr.include(oh),Ql.include(oh),Jl.include(oh),ki.include({toGeoJSON:function(u){var p=!Vi(this._latlngs),_=iu(this._latlngs,p?1:0,!1,u);return Fo(this,{type:(p?"Multi":"")+"LineString",coordinates:_})}}),ts.include({toGeoJSON:function(u){var p=!Vi(this._latlngs),_=p&&!Vi(this._latlngs[0]),T=iu(this._latlngs,_?2:p?1:0,!0,u);return p||(T=[T]),Fo(this,{type:(_?"Multi":"")+"Polygon",coordinates:T})}}),_s.include({toMultiPoint:function(u){var p=[];return this.eachLayer(function(_){p.push(_.toGeoJSON(u).geometry.coordinates)}),Fo(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(u){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(u);var _=p==="GeometryCollection",T=[];return this.eachLayer(function(A){if(A.toGeoJSON){var j=A.toGeoJSON(u);if(_)T.push(j.geometry);else{var ot=ru(j);ot.type==="FeatureCollection"?T.push.apply(T,ot.features):T.push(ot)}}}),_?Fo(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function Id(u,p){return new Er(u,p)}var cr=Id,ws=ur.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,p,_){this._url=u,this._bounds=mt(p),S(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Te(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){hn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&Po(this._image),this},bringToBack:function(){return this._map&&Xr(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=mt(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",p=this._image=u?this._url:Ee("img");if(Te(p,"leaflet-image-layer"),this._zoomAnimated&&Te(p,"leaflet-zoom-animated"),this.options.className&&Te(p,this.options.className),p.onselectstart=m,p.onmousemove=m,p.onload=o(this.fire,this,"load"),p.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(u){var p=this._map.getZoomScale(u.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;sr(this._image,_,p)},_reset:function(){var u=this._image,p=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=p.getSize();Pn(u,p.min),u.style.width=_.x+"px",u.style.height=_.y+"px"},_updateOpacity:function(){hi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),Dd=function(u,p,_){return new ws(u,p,_)},ah=ws.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",p=this._image=u?this._url:Ee("video");if(Te(p,"leaflet-image-layer"),this._zoomAnimated&&Te(p,"leaflet-zoom-animated"),this.options.className&&Te(p,this.options.className),p.onselectstart=m,p.onmousemove=m,p.onloadeddata=o(this.fire,this,"load"),u){for(var _=p.getElementsByTagName("source"),T=[],A=0;A<_.length;A++)T.push(_[A].src);this._url=_.length>0?T:[p.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var j=0;j<this._url.length;j++){var ot=Ee("source");ot.src=this._url[j],p.appendChild(ot)}}});function Od(u,p,_){return new ah(u,p,_)}var lh=ws.extend({_initImage:function(){var u=this._image=this._url;Te(u,"leaflet-image-layer"),this._zoomAnimated&&Te(u,"leaflet-zoom-animated"),this.options.className&&Te(u,this.options.className),u.onselectstart=m,u.onmousemove=m}});function uh(u,p,_){return new lh(u,p,_)}var Pr=ur.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,p){u&&(u instanceof _t||R(u))?(this._latlng=nt(u),S(this,p)):(S(this,u),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&hi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&hi(this._container,1),this.bringToFront(),this.options.interactive&&(Te(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(hi(this._container,0),this._removeTimeout=setTimeout(o(hn,void 0,this._container),200)):hn(this._container),this.options.interactive&&(sn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=nt(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Po(this._container),this},bringToBack:function(){return this._map&&Xr(this._container),this},_prepareOpen:function(u){var p=this._source;if(!p._map)return!1;if(p instanceof Jr){p=null;var _=this._source._layers;for(var T in _)if(_[T]._map){p=_[T];break}if(!p)return!1;this._source=p}if(!u)if(p.getCenter)u=p.getCenter();else if(p.getLatLng)u=p.getLatLng();else if(p.getBounds)u=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")u.innerHTML=p;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),p=F(this.options.offset),_=this._getAnchor();this._zoomAnimated?Pn(this._container,u.add(_)):p=p.add(u).add(_);var T=this._containerBottom=-p.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=T+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});Oe.include({_initOverlay:function(u,p,_,T){var A=p;return A instanceof u||(A=new u(T).setContent(p)),_&&A.setLatLng(_),A}}),ur.include({_initOverlay:function(u,p,_,T){var A=_;return A instanceof u?(S(A,T),A._source=this):(A=p&&!T?p:new u(T,this),A.setContent(_)),A}});var su=Pr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,Pr.prototype.openOn.call(this,u)},onAdd:function(u){Pr.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xs||this._source.on("preclick",Tr))},onRemove:function(u){Pr.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xs||this._source.off("preclick",Tr))},getEvents:function(){var u=Pr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",p=this._container=Ee("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=Ee("div",u+"-content-wrapper",p);if(this._contentNode=Ee("div",u+"-content",_),za(p),$l(this._contentNode),_e(p,"contextmenu",Tr),this._tipContainer=Ee("div",u+"-tip-container",p),this._tip=Ee("div",u+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=Ee("a",u+"-close-button",p);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',_e(T,"click",function(A){wn(A),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,p=u.style;p.width="",p.whiteSpace="nowrap";var _=u.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),p.width=_+1+"px",p.whiteSpace="",p.height="";var T=u.offsetHeight,A=this.options.maxHeight,j="leaflet-popup-scrolled";A&&T>A?(p.height=A+"px",Te(u,j)):sn(u,j),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var p=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),_=this._getAnchor();Pn(this._container,p.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,p=parseInt(Da(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+p,T=this._containerWidth,A=new J(this._containerLeft,-_-this._containerBottom);A._add(Yr(this._container));var j=u.layerPointToContainerPoint(A),ot=F(this.options.autoPanPadding),yt=F(this.options.autoPanPaddingTopLeft||ot),Mt=F(this.options.autoPanPaddingBottomRight||ot),Nt=u.getSize(),te=0,de=0;j.x+T+Mt.x>Nt.x&&(te=j.x+T-Nt.x+Mt.x),j.x-te-yt.x<0&&(te=j.x-yt.x),j.y+_+Mt.y>Nt.y&&(de=j.y+_-Nt.y+Mt.y),j.y-de-yt.y<0&&(de=j.y-yt.y),(te||de)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([te,de]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zo=function(u,p){return new su(u,p)};Oe.mergeOptions({closePopupOnClick:!0}),Oe.include({openPopup:function(u,p,_){return this._initOverlay(su,u,p,_).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),ur.include({bindPopup:function(u,p){return this._popup=this._initOverlay(su,this._popup,u,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof Jr||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){ar(u);var p=u.layer||u.target;if(this._popup._source===p&&!(p instanceof xs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=p,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Bo=Pr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){Pr.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){Pr.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=Pr.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",p=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ee("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var p,_,T=this._map,A=this._container,j=T.latLngToContainerPoint(T.getCenter()),ot=T.layerPointToContainerPoint(u),yt=this.options.direction,Mt=A.offsetWidth,Nt=A.offsetHeight,te=F(this.options.offset),de=this._getAnchor();yt==="top"?(p=Mt/2,_=Nt):yt==="bottom"?(p=Mt/2,_=0):yt==="center"?(p=Mt/2,_=Nt/2):yt==="right"?(p=0,_=Nt/2):yt==="left"?(p=Mt,_=Nt/2):ot.x<j.x?(yt="right",p=0,_=Nt/2):(yt="left",p=Mt+(te.x+de.x)*2,_=Nt/2),u=u.subtract(F(p,_,!0)).add(te).add(de),sn(A,"leaflet-tooltip-right"),sn(A,"leaflet-tooltip-left"),sn(A,"leaflet-tooltip-top"),sn(A,"leaflet-tooltip-bottom"),Te(A,"leaflet-tooltip-"+yt),Pn(A,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&hi(this._container,u)},_animateZoom:function(u){var p=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(p)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Wa=function(u,p){return new Bo(u,p)};Oe.include({openTooltip:function(u,p,_){return this._initOverlay(Bo,u,p,_).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),ur.include({bindTooltip:function(u,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Bo,this._tooltip,u,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var p=u?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[p](_),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof Jr||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var p=typeof u.getElement=="function"&&u.getElement();p&&(_e(p,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),_e(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var p=typeof u.getElement=="function"&&u.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var p=u.latlng,_,T;this._tooltip.options.sticky&&u.originalEvent&&(_=this._map.mouseEventToContainerPoint(u.originalEvent),T=this._map.containerPointToLayerPoint(_),p=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(p)}});var ou=to.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var p=u&&u.tagName==="DIV"?u:document.createElement("div"),_=this.options;if(_.html instanceof Element?(Vl(p),p.appendChild(_.html)):p.innerHTML=_.html!==!1?_.html:"",_.bgPos){var T=F(_.bgPos);p.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function Nd(u){return new ou(u)}to.Default=Oo;var bs=ur.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ht.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){S(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),hn(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Po(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Xr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof J?u:new J(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var p=this.getPane().children,_=-u(-1/0,1/0),T=0,A=p.length,j;T<A;T++)j=p[T].style.zIndex,p[T]!==this._container&&j&&(_=u(_,+j));isFinite(_)&&(this.options.zIndex=_+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ht.ielt9){hi(this._container,this.options.opacity);var u=+new Date,p=!1,_=!1;for(var T in this._tiles){var A=this._tiles[T];if(!(!A.current||!A.loaded)){var j=Math.min(1,(u-A.loaded)/200);hi(A.el,j),j<1?p=!0:(A.active?_=!0:this._onOpaqueTile(A),A.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),p&&(tt(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Ee("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,p=this.options.maxZoom;if(u!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===u?(this._levels[_].el.style.zIndex=p-Math.abs(u-_),this._onUpdateLevel(_)):(hn(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var T=this._levels[u],A=this._map;return T||(T=this._levels[u]={},T.el=Ee("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=p,T.origin=A.project(A.unproject(A.getPixelOrigin()),u).round(),T.zoom=u,this._setZoomTransform(T,A.getCenter(),A.getZoom()),m(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var u,p,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)p=this._tiles[u],p.retain=p.current;for(u in this._tiles)if(p=this._tiles[u],p.current&&!p.active){var T=p.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var p in this._tiles)this._tiles[p].coords.z===u&&this._removeTile(p)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)hn(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,p,_,T){var A=Math.floor(u/2),j=Math.floor(p/2),ot=_-1,yt=new J(+A,+j);yt.z=+ot;var Mt=this._tileCoordsToKey(yt),Nt=this._tiles[Mt];return Nt&&Nt.active?(Nt.retain=!0,!0):(Nt&&Nt.loaded&&(Nt.retain=!0),ot>T?this._retainParent(A,j,ot,T):!1)},_retainChildren:function(u,p,_,T){for(var A=2*u;A<2*u+2;A++)for(var j=2*p;j<2*p+2;j++){var ot=new J(A,j);ot.z=_+1;var yt=this._tileCoordsToKey(ot),Mt=this._tiles[yt];if(Mt&&Mt.active){Mt.retain=!0;continue}else Mt&&Mt.loaded&&(Mt.retain=!0);_+1<T&&this._retainChildren(A,j,_+1,T)}},_resetView:function(u){var p=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var p=this.options;return p.minNativeZoom!==void 0&&u<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<u?p.maxNativeZoom:u},_setView:function(u,p,_,T){var A=Math.round(p);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var j=this.options.updateWhenZooming&&A!==this._tileZoom;(!T||j)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(u),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(u,p)},_setZoomTransforms:function(u,p){for(var _ in this._levels)this._setZoomTransform(this._levels[_],u,p)},_setZoomTransform:function(u,p,_){var T=this._map.getZoomScale(_,u.zoom),A=u.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(p,_)).round();ht.any3d?sr(u.el,A,T):Pn(u.el,A)},_resetGrid:function(){var u=this._map,p=u.options.crs,_=this._tileSize=this.getTileSize(),T=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,p.wrapLng[0]],T).x/_.x),Math.ceil(u.project([0,p.wrapLng[1]],T).x/_.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([p.wrapLat[0],0],T).y/_.x),Math.ceil(u.project([p.wrapLat[1],0],T).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var p=this._map,_=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),T=p.getZoomScale(_,this._tileZoom),A=p.project(u,this._tileZoom).floor(),j=p.getSize().divideBy(T*2);return new G(A.subtract(j),A.add(j))},_update:function(u){var p=this._map;if(p){var _=this._clampZoom(p.getZoom());if(u===void 0&&(u=p.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(u),A=this._pxBoundsToTileRange(T),j=A.getCenter(),ot=[],yt=this.options.keepBuffer,Mt=new G(A.getBottomLeft().subtract([yt,-yt]),A.getTopRight().add([yt,-yt]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Nt in this._tiles){var te=this._tiles[Nt].coords;(te.z!==this._tileZoom||!Mt.contains(new J(te.x,te.y)))&&(this._tiles[Nt].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(u,_);return}for(var de=A.min.y;de<=A.max.y;de++)for(var Pe=A.min.x;Pe<=A.max.x;Pe++){var Vn=new J(Pe,de);if(Vn.z=this._tileZoom,!!this._isValidTile(Vn)){var On=this._tiles[this._tileCoordsToKey(Vn)];On?On.current=!0:ot.push(Vn)}}if(ot.sort(function(di,Wo){return di.distanceTo(j)-Wo.distanceTo(j)}),ot.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ri=document.createDocumentFragment();for(Pe=0;Pe<ot.length;Pe++)this._addTile(ot[Pe],Ri);this._level.el.appendChild(Ri)}}}},_isValidTile:function(u){var p=this._map.options.crs;if(!p.infinite){var _=this._globalTileRange;if(!p.wrapLng&&(u.x<_.min.x||u.x>_.max.x)||!p.wrapLat&&(u.y<_.min.y||u.y>_.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(u);return mt(this.options.bounds).overlaps(T)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var p=this._map,_=this.getTileSize(),T=u.scaleBy(_),A=T.add(_),j=p.unproject(T,u.z),ot=p.unproject(A,u.z);return[j,ot]},_tileCoordsToBounds:function(u){var p=this._tileCoordsToNwSe(u),_=new z(p[0],p[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var p=u.split(":"),_=new J(+p[0],+p[1]);return _.z=+p[2],_},_removeTile:function(u){var p=this._tiles[u];p&&(hn(p.el),delete this._tiles[u],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){Te(u,"leaflet-tile");var p=this.getTileSize();u.style.width=p.x+"px",u.style.height=p.y+"px",u.onselectstart=m,u.onmousemove=m,ht.ielt9&&this.options.opacity<1&&hi(u,this.options.opacity)},_addTile:function(u,p){var _=this._getTilePos(u),T=this._tileCoordsToKey(u),A=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(A),this.createTile.length<2&&U(o(this._tileReady,this,u,null,A)),Pn(A,_),this._tiles[T]={el:A,coords:u,current:!0},p.appendChild(A),this.fire("tileloadstart",{tile:A,coords:u})},_tileReady:function(u,p,_){p&&this.fire("tileerror",{error:p,tile:_,coords:u});var T=this._tileCoordsToKey(u);_=this._tiles[T],_&&(_.loaded=+new Date,this._map._fadeAnimated?(hi(_.el,0),tt(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),p||(Te(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ht.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var p=new J(this._wrapX?d(u.x,this._wrapX):u.x,this._wrapY?d(u.y,this._wrapY):u.y);return p.z=u.z,p},_pxBoundsToTileRange:function(u){var p=this.getTileSize();return new G(u.min.unscaleBy(p).floor(),u.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function Vo(u){return new bs(u)}var Ss=bs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,p){this._url=u,p=S(this,p),p.detectRetina&&ht.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,p){return this._url===u&&p===void 0&&(p=!0),this._url=u,p||this.redraw(),this},createTile:function(u,p){var _=document.createElement("img");return _e(_,"load",o(this._tileOnLoad,this,p,_)),_e(_,"error",o(this._tileOnError,this,p,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(u),_},getTileUrl:function(u){var p={r:ht.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-u.y;this.options.tms&&(p.y=_),p["-y"]=_}return M(this._url,r(p,this.options))},_tileOnLoad:function(u,p){ht.ielt9?setTimeout(o(u,this,null,p),0):u(null,p)},_tileOnError:function(u,p,_){var T=this.options.errorTileUrl;T&&p.getAttribute("src")!==T&&(p.src=T),u(_,p)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,p=this.options.maxZoom,_=this.options.zoomReverse,T=this.options.zoomOffset;return _&&(u=p-u),u+T},_getSubdomain:function(u){var p=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var u,p;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(p=this._tiles[u].el,p.onload=m,p.onerror=m,!p.complete)){p.src=k;var _=this._tiles[u].coords;hn(p),delete this._tiles[u],this.fire("tileabort",{tile:p,coords:_})}},_removeTile:function(u){var p=this._tiles[u];if(p)return p.el.setAttribute("src",k),bs.prototype._removeTile.call(this,u)},_tileReady:function(u,p,_){if(!(!this._map||_&&_.getAttribute("src")===k))return bs.prototype._tileReady.call(this,u,p,_)}});function ch(u,p){return new Ss(u,p)}var Ga=Ss.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,p){this._url=u;var _=r({},this.defaultWmsParams);for(var T in p)T in this.options||(_[T]=p[T]);p=S(this,p);var A=p.detectRetina&&ht.retina?2:1,j=this.getTileSize();_.width=j.x*A,_.height=j.y*A,this.wmsParams=_},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,Ss.prototype.onAdd.call(this,u)},getTileUrl:function(u){var p=this._tileCoordsToNwSe(u),_=this._crs,T=lt(_.project(p[0]),_.project(p[1])),A=T.min,j=T.max,ot=(this._wmsVersion>=1.3&&this._crs===Ad?[A.y,A.x,j.y,j.x]:[A.x,A.y,j.x,j.y]).join(","),yt=Ss.prototype.getTileUrl.call(this,u);return yt+P(this.wmsParams,yt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ot},setParams:function(u,p){return r(this.wmsParams,u),p||this.redraw(),this}});function Fd(u,p){return new Ga(u,p)}Ss.WMS=Ga,ch.wms=Fd;var Cr=ur.extend({options:{padding:.1},initialize:function(u){S(this,u),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Te(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,p){var _=this._map.getZoomScale(p,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,p),j=T.multiplyBy(-_).add(A).subtract(this._map._getNewPixelOrigin(u,p));ht.any3d?sr(this._container,j,_):Pn(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,p=this._map.getSize(),_=this._map.containerPointToLayerPoint(p.multiplyBy(-u)).round();this._bounds=new G(_,_.add(p.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hh=Cr.extend({options:{tolerance:0},getEvents:function(){var u=Cr.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Cr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");_e(u,"mousemove",this._onMouseMove,this),_e(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_e(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){tt(this._redrawRequest),delete this._ctx,hn(this._container),Ke(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var p in this._layers)u=this._layers[p],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Cr.prototype._update.call(this);var u=this._bounds,p=this._container,_=u.getSize(),T=ht.retina?2:1;Pn(p,u.min),p.width=T*_.x,p.height=T*_.y,p.style.width=_.x+"px",p.style.height=_.y+"px",ht.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Cr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[c(u)]=u;var p=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var p=u._order,_=p.next,T=p.prev;_?_.prev=T:this._drawLast=T,T?T.next=_:this._drawFirst=_,delete u._order,delete this._layers[c(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var p=u.options.dashArray.split(/[, ]+/),_=[],T,A;for(A=0;A<p.length;A++){if(T=Number(p[A]),isNaN(T))return;_.push(T)}u.options._dashArray=_}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var p=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(u._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(u._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var p=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,p=this._redrawBounds;if(this._ctx.save(),p){var _=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)u=T.layer,(!p||u._pxBounds&&u._pxBounds.intersects(p))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,p){if(this._drawing){var _,T,A,j,ot=u._parts,yt=ot.length,Mt=this._ctx;if(yt){for(Mt.beginPath(),_=0;_<yt;_++){for(T=0,A=ot[_].length;T<A;T++)j=ot[_][T],Mt[T?"lineTo":"moveTo"](j.x,j.y);p&&Mt.closePath()}this._fillStroke(Mt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var p=u._point,_=this._ctx,T=Math.max(Math.round(u._radius),1),A=(Math.max(Math.round(u._radiusY),1)||T)/T;A!==1&&(_.save(),_.scale(1,A)),_.beginPath(),_.arc(p.x,p.y/A,T,0,Math.PI*2,!1),A!==1&&_.restore(),this._fillStroke(_,u)}},_fillStroke:function(u,p){var _=p.options;_.fill&&(u.globalAlpha=_.fillOpacity,u.fillStyle=_.fillColor||_.color,u.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(u.setLineDash&&u.setLineDash(p.options&&p.options._dashArray||[]),u.globalAlpha=_.opacity,u.lineWidth=_.weight,u.strokeStyle=_.color,u.lineCap=_.lineCap,u.lineJoin=_.lineJoin,u.stroke())},_onClick:function(u){for(var p=this._map.mouseEventToLayerPoint(u),_,T,A=this._drawFirst;A;A=A.next)_=A.layer,_.options.interactive&&_._containsPoint(p)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(_))&&(T=_);this._fireEvent(T?[T]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,p)}},_handleMouseOut:function(u){var p=this._hoveredLayer;p&&(sn(this._container,"leaflet-interactive"),this._fireEvent([p],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,p){if(!this._mouseHoverThrottled){for(var _,T,A=this._drawFirst;A;A=A.next)_=A.layer,_.options.interactive&&_._containsPoint(p)&&(T=_);T!==this._hoveredLayer&&(this._handleMouseOut(u),T&&(Te(this._container,"leaflet-interactive"),this._fireEvent([T],u,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,p,_){this._map._fireDOMEvent(p,_||p.type,u)},_bringToFront:function(u){var p=u._order;if(p){var _=p.next,T=p.prev;if(_)_.prev=T;else return;T?T.next=_:_&&(this._drawFirst=_),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(u)}},_bringToBack:function(u){var p=u._order;if(p){var _=p.next,T=p.prev;if(T)T.next=_;else return;_?_.prev=T:T&&(this._drawLast=T),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(u)}}});function fh(u){return ht.canvas?new hh(u):null}var Uo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),zd={_initContainer:function(){this._container=Ee("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Cr.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var p=u._container=Uo("shape");Te(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",u._path=Uo("path"),p.appendChild(u._path),this._updateStyle(u),this._layers[c(u)]=u},_addPath:function(u){var p=u._container;this._container.appendChild(p),u.options.interactive&&u.addInteractiveTarget(p)},_removePath:function(u){var p=u._container;hn(p),u.removeInteractiveTarget(p),delete this._layers[c(u)]},_updateStyle:function(u){var p=u._stroke,_=u._fill,T=u.options,A=u._container;A.stroked=!!T.stroke,A.filled=!!T.fill,T.stroke?(p||(p=u._stroke=Uo("stroke")),A.appendChild(p),p.weight=T.weight+"px",p.color=T.color,p.opacity=T.opacity,T.dashArray?p.dashStyle=R(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=T.lineCap.replace("butt","flat"),p.joinstyle=T.lineJoin):p&&(A.removeChild(p),u._stroke=null),T.fill?(_||(_=u._fill=Uo("fill")),A.appendChild(_),_.color=T.fillColor||T.color,_.opacity=T.fillOpacity):_&&(A.removeChild(_),u._fill=null)},_updateCircle:function(u){var p=u._point.round(),_=Math.round(u._radius),T=Math.round(u._radiusY||_);this._setPath(u,u._empty()?"M0 0":"AL "+p.x+","+p.y+" "+_+","+T+" 0,"+65535*360)},_setPath:function(u,p){u._path.v=p},_bringToFront:function(u){Po(u._container)},_bringToBack:function(u){Xr(u._container)}},hr=ht.vml?Uo:Wt,eo=Cr.extend({_initContainer:function(){this._container=hr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=hr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){hn(this._container),Ke(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Cr.prototype._update.call(this);var u=this._bounds,p=u.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,_.setAttribute("width",p.x),_.setAttribute("height",p.y)),Pn(_,u.min),_.setAttribute("viewBox",[u.min.x,u.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(u){var p=u._path=hr("path");u.options.className&&Te(p,u.options.className),u.options.interactive&&Te(p,"leaflet-interactive"),this._updateStyle(u),this._layers[c(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){hn(u._path),u.removeInteractiveTarget(u._path),delete this._layers[c(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var p=u._path,_=u.options;p&&(_.stroke?(p.setAttribute("stroke",_.color),p.setAttribute("stroke-opacity",_.opacity),p.setAttribute("stroke-width",_.weight),p.setAttribute("stroke-linecap",_.lineCap),p.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?p.setAttribute("stroke-dasharray",_.dashArray):p.removeAttribute("stroke-dasharray"),_.dashOffset?p.setAttribute("stroke-dashoffset",_.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),_.fill?(p.setAttribute("fill",_.fillColor||_.color),p.setAttribute("fill-opacity",_.fillOpacity),p.setAttribute("fill-rule",_.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(u,p){this._setPath(u,It(u._parts,p))},_updateCircle:function(u){var p=u._point,_=Math.max(Math.round(u._radius),1),T=Math.max(Math.round(u._radiusY),1)||_,A="a"+_+","+T+" 0 1,0 ",j=u._empty()?"M0 0":"M"+(p.x-_)+","+p.y+A+_*2+",0 "+A+-_*2+",0 ";this._setPath(u,j)},_setPath:function(u,p){u._path.setAttribute("d",p)},_bringToFront:function(u){Po(u._path)},_bringToBack:function(u){Xr(u._path)}});ht.vml&&eo.include(zd);function au(u){return ht.svg||ht.vml?new eo(u):null}Oe.include({getRenderer:function(u){var p=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var p=this._paneRenderers[u];return p===void 0&&(p=this._createRenderer({pane:u}),this._paneRenderers[u]=p),p},_createRenderer:function(u){return this.options.preferCanvas&&fh(u)||au(u)}});var Bd=ts.extend({initialize:function(u,p){ts.prototype.initialize.call(this,this._boundsToLatLngs(u),p)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=mt(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function uy(u,p){return new Bd(u,p)}eo.create=hr,eo.pointsToPath=It,Er.geometryToLayer=No,Er.coordsToLatLng=eu,Er.coordsToLatLngs=ja,Er.latLngToCoords=nu,Er.latLngsToCoords=iu,Er.getFeature=Fo,Er.asFeature=ru,Oe.mergeOptions({boxZoom:!0});var Ho=Bi.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ke(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){hn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Be(),jl(),this._startPoint=this._map.mouseEventToContainerPoint(u),_e(document,{contextmenu:ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=Ee("div","leaflet-zoom-box",this._container),Te(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var p=new G(this._point,this._startPoint),_=p.getSize();Pn(this._box,p.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(hn(this._box),sn(this._container,"leaflet-crosshair")),Lo(),Wl(),Ke(document,{contextmenu:ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var p=new z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Oe.addInitHook("addHandler","boxZoom",Ho),Oe.mergeOptions({doubleClickZoom:!0});var Vd=Bi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var p=this._map,_=p.getZoom(),T=p.options.zoomDelta,A=u.originalEvent.shiftKey?_-T:_+T;p.options.doubleClickZoom==="center"?p.setZoom(A):p.setZoomAround(u.containerPoint,A)}});Oe.addInitHook("addHandler","doubleClickZoom",Vd),Oe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var dh=Bi.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new lr(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}Te(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){sn(this._map._container,"leaflet-grab"),sn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=mt(this._map.options.maxBounds);this._offsetLimit=lt(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var p=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(p),this._prunePositions(p)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,p){return u-(u-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;u.x<p.min.x&&(u.x=this._viscousLimit(u.x,p.min.x)),u.y<p.min.y&&(u.y=this._viscousLimit(u.y,p.min.y)),u.x>p.max.x&&(u.x=this._viscousLimit(u.x,p.max.x)),u.y>p.max.y&&(u.y=this._viscousLimit(u.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,p=Math.round(u/2),_=this._initialWorldOffset,T=this._draggable._newPos.x,A=(T-p+_)%u+p-_,j=(T+p+_)%u-p-_,ot=Math.abs(A+_)<Math.abs(j+_)?A:j;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ot},_onDragEnd:function(u){var p=this._map,_=p.options,T=!_.inertia||u.noInertia||this._times.length<2;if(p.fire("dragend",u),T)p.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),j=(this._lastTime-this._times[0])/1e3,ot=_.easeLinearity,yt=A.multiplyBy(ot/j),Mt=yt.distanceTo([0,0]),Nt=Math.min(_.inertiaMaxSpeed,Mt),te=yt.multiplyBy(Nt/Mt),de=Nt/(_.inertiaDeceleration*ot),Pe=te.multiplyBy(-de/2).round();!Pe.x&&!Pe.y?p.fire("moveend"):(Pe=p._limitOffset(Pe,p.options.maxBounds),U(function(){p.panBy(Pe,{duration:de,easeLinearity:ot,noMoveStart:!0,animate:!0})}))}}});Oe.addInitHook("addHandler","dragging",dh),Oe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ph=Bi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),_e(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ke(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,p=document.documentElement,_=u.scrollTop||p.scrollTop,T=u.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(T,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var p=this._panKeys={},_=this.keyCodes,T,A;for(T=0,A=_.left.length;T<A;T++)p[_.left[T]]=[-1*u,0];for(T=0,A=_.right.length;T<A;T++)p[_.right[T]]=[u,0];for(T=0,A=_.down.length;T<A;T++)p[_.down[T]]=[0,u];for(T=0,A=_.up.length;T<A;T++)p[_.up[T]]=[0,-1*u]},_setZoomDelta:function(u){var p=this._zoomKeys={},_=this.keyCodes,T,A;for(T=0,A=_.zoomIn.length;T<A;T++)p[_.zoomIn[T]]=u;for(T=0,A=_.zoomOut.length;T<A;T++)p[_.zoomOut[T]]=-u},_addHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ke(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var p=u.keyCode,_=this._map,T;if(p in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(T=this._panKeys[p],u.shiftKey&&(T=F(T).multiplyBy(3)),_.options.maxBounds&&(T=_._limitOffset(F(T),_.options.maxBounds)),_.options.worldCopyJump){var A=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(T)));_.panTo(A)}else _.panBy(T)}else if(p in this._zoomKeys)_.setZoom(_.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;ar(u)}}});Oe.addInitHook("addHandler","keyboard",ph),Oe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Je=Bi.extend({addHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ke(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var p=wd(u),_=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var T=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),T),ar(u)},_performZoom:function(){var u=this._map,p=u.getZoom(),_=this._map.options.zoomSnap||0;u._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,j=_?Math.ceil(A/_)*_:A,ot=u._limitZoom(p+(this._delta>0?j:-j))-p;this._delta=0,this._startTime=null,ot&&(u.options.scrollWheelZoom==="center"?u.setZoom(p+ot):u.setZoomAround(this._lastMousePos,p+ot))}});Oe.addInitHook("addHandler","scrollWheelZoom",Je);var mh=600;Oe.mergeOptions({tapHold:ht.touchNative&&ht.safari&&ht.mobile,tapTolerance:15});var $a=Bi.extend({addHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ke(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var p=u.touches[0];this._startPos=this._newPos=new J(p.clientX,p.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(_e(document,"touchend",wn),_e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),mh),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Ke(document,"touchend",wn),Ke(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Ke(document,"touchend touchcancel contextmenu",this._cancel,this),Ke(document,"touchmove",this._onMove,this)},_onMove:function(u){var p=u.touches[0];this._newPos=new J(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,p){var _=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});_._simulated=!0,p.target.dispatchEvent(_)}});Oe.addInitHook("addHandler","tapHold",$a),Oe.mergeOptions({touchZoom:ht.touch,bounceAtZoomLimits:!0});var jo=Bi.extend({addHooks:function(){Te(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){sn(this._map._container,"leaflet-touch-zoom"),Ke(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var p=this._map;if(!(!u.touches||u.touches.length!==2||p._animatingZoom||this._zooming)){var _=p.mouseEventToContainerPoint(u.touches[0]),T=p.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(_.add(T)._divideBy(2))),this._startDist=_.distanceTo(T),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),wn(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var p=this._map,_=p.mouseEventToContainerPoint(u.touches[0]),T=p.mouseEventToContainerPoint(u.touches[1]),A=_.distanceTo(T)/this._startDist;if(this._zoom=p.getScaleZoom(A,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&A<1||this._zoom>p.getMaxZoom()&&A>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var j=_._add(T)._divideBy(2)._subtract(this._centerPoint);if(A===1&&j.x===0&&j.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(j),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),tt(this._animRequest);var ot=o(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(ot,this,!0),wn(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,tt(this._animRequest),Ke(document,"touchmove",this._onTouchMove,this),Ke(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Oe.addInitHook("addHandler","touchZoom",jo),Oe.BoxZoom=Ho,Oe.DoubleClickZoom=Vd,Oe.Drag=dh,Oe.Keyboard=ph,Oe.ScrollWheelZoom=Je,Oe.TapHold=$a,Oe.TouchZoom=jo,e.Bounds=G,e.Browser=ht,e.CRS=Ot,e.Canvas=hh,e.Circle=Ql,e.CircleMarker=Jl,e.Class=Y,e.Control=Li,e.DivIcon=ou,e.DivOverlay=Pr,e.DomEvent=Zl,e.DomUtil=Fa,e.Draggable=lr,e.Evented=it,e.FeatureGroup=Jr,e.GeoJSON=Er,e.GridLayer=bs,e.Handler=Bi,e.Icon=to,e.ImageOverlay=ws,e.LatLng=_t,e.LatLngBounds=z,e.Layer=ur,e.LayerGroup=_s,e.LineUtil=Cd,e.Map=Oe,e.Marker=Qr,e.Mixin=Jc,e.Path=xs,e.Point=J,e.PolyUtil=Jg,e.Polygon=ts,e.Polyline=ki,e.Popup=su,e.PosAnimation=ql,e.Projection=iy,e.Rectangle=Bd,e.Renderer=Cr,e.SVG=eo,e.SVGOverlay=lh,e.TileLayer=Ss,e.Tooltip=Bo,e.Transformation=jt,e.Util=K,e.VideoOverlay=ah,e.bind=o,e.bounds=lt,e.canvas=fh,e.circle=Ha,e.circleMarker=Rd,e.control=vs,e.divIcon=Nd,e.extend=r,e.featureGroup=Ld,e.geoJSON=Id,e.geoJson=cr,e.gridLayer=Vo,e.icon=kd,e.imageOverlay=Dd,e.latLng=nt,e.latLngBounds=mt,e.layerGroup=Ua,e.map=ys,e.marker=oy,e.point=F,e.polygon=ly,e.polyline=ay,e.popup=zo,e.rectangle=uy,e.setOptions=S,e.stamp=c,e.svg=au,e.svgOverlay=uh,e.tileLayer=ch,e.tooltip=Wa,e.transformation=bt,e.version=i,e.videoOverlay=Od;var Ud=window.L;e.noConflict=function(){return window.L=Ud,this},window.L=e}))})(sf,sf.exports)),sf.exports}var Il=WF();const kc=Tc(Il);function ud(n,t,e){return Object.freeze({instance:n,context:t,container:e})}function bg(n,t){return t==null?function(i,r){const s=Q.useRef();return s.current||(s.current=n(i,r)),s}:function(i,r){const s=Q.useRef();s.current||(s.current=n(i,r));const o=Q.useRef(i),{instance:a}=s.current;return Q.useEffect(function(){o.current!==i&&(t(a,i,o.current),o.current=i)},[a,i,r]),s}}function jA(n,t){Q.useEffect(function(){return(t.layerContainer??t.map).addLayer(n.instance),function(){t.layerContainer?.removeLayer(n.instance),t.map.removeLayer(n.instance)}},[t,n])}function WA(n){return function(e){const i=xg(),r=n(wg(e,i),i);return BA(i.map,e.attribution),$0(r.current,e.eventHandlers),jA(r.current,i),r}}function GF(n,t){const e=Q.useRef();Q.useEffect(function(){if(t.pathOptions!==e.current){const r=t.pathOptions??{};n.instance.setStyle(r),e.current=r}},[n,t])}function $F(n){return function(e){const i=xg(),r=n(wg(e,i),i);return $0(r.current,e.eventHandlers),jA(r.current,i),GF(r.current,e),r}}function ZF(n,t){const e=bg(n,t),i=WA(e);return HA(i)}function qF(n,t){const e=bg(n),i=HF(e,t);return VF(i)}function GA(n,t){const e=bg(n,t),i=$F(e);return HA(i)}function XF(n,t){const e=bg(n,t),i=WA(e);return UF(i)}function YF(n,t,e){const{opacity:i,zIndex:r}=t;i!=null&&i!==e.opacity&&n.setOpacity(i),r!=null&&r!==e.zIndex&&n.setZIndex(r)}function Z0(){return xg().map}function KF(n){const t=Z0();return Q.useEffect(function(){return t.on(n),function(){t.off(n)}},[t,n]),t}function xx(){return xx=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},xx.apply(this,arguments)}function JF({bounds:n,boundsOptions:t,center:e,children:i,className:r,id:s,placeholder:o,style:a,whenReady:c,zoom:f,...d},m){const[y]=Q.useState({className:r,id:s,style:a}),[v,w]=Q.useState(null);Q.useImperativeHandle(m,()=>v?.map??null,[v]);const S=Q.useCallback(b=>{if(b!==null&&v===null){const M=new Il.Map(b,d);e!=null&&f!=null?M.setView(e,f):n!=null&&M.fitBounds(n,t),c!=null&&M.whenReady(c),w(BF(M))}},[]);Q.useEffect(()=>()=>{v?.map.remove()},[v]);const P=v?vn.createElement(UA,{value:v},i):o??null;return vn.createElement("div",xx({},y,{ref:S}),P)}const Vf=Q.forwardRef(JF),ya=ZF(function({position:t,...e},i){const r=new Il.Marker(t,e);return ud(r,G0(i,{overlayContainer:r}))},function(t,e,i){e.position!==i.position&&t.setLatLng(e.position),e.icon!=null&&e.icon!==i.icon&&t.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==i.opacity&&t.setOpacity(e.opacity),t.dragging!=null&&e.draggable!==i.draggable&&(e.draggable===!0?t.dragging.enable():t.dragging.disable())}),$A=GA(function({positions:t,...e},i){const r=new Il.Polygon(t,e);return ud(r,G0(i,{overlayContainer:r}))},function(t,e,i){e.positions!==i.positions&&t.setLatLngs(e.positions)}),Xm=GA(function({positions:t,...e},i){const r=new Il.Polyline(t,e);return ud(r,G0(i,{overlayContainer:r}))},function(t,e,i){e.positions!==i.positions&&t.setLatLngs(e.positions)}),Ml=qF(function(t,e){const i=new Il.Popup(t,e.overlayContainer);return ud(i,e)},function(t,e,{position:i},r){Q.useEffect(function(){const{instance:o}=t;function a(f){f.popup===o&&(o.update(),r(!0))}function c(f){f.popup===o&&r(!1)}return e.map.on({popupopen:a,popupclose:c}),e.overlayContainer==null?(i!=null&&o.setLatLng(i),o.openOn(e.map)):e.overlayContainer.bindPopup(o),function(){e.map.off({popupopen:a,popupclose:c}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(o)}},[t,e,r,i])}),Uf=XF(function({url:t,...e},i){const r=new Il.TileLayer(t,wg(e,i));return ud(r,i)},function(t,e,i){YF(t,e,i);const{url:r}=e;r!=null&&r!==i.url&&t.setUrl(r)}),QF=kc.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});kc.Marker.prototype.options.icon=QF;function tz({siteData:n,setSiteData:t,initialData:e={}}){const[i,r]=Q.useState("single"),[s,o]=Q.useState(""),[a,c]=Q.useState([]),[f,d]=Q.useState(!1);function m(w){return(w||"").split(`
`).map((S,P)=>S.trim()).filter(S=>S.length>0).map((S,P)=>{const b=S.split(/[\s,]+/);return i==="single"?{name:n.name||`Site-${P+1}`,lat:parseFloat(b[0])||0,lon:parseFloat(b[1])||0}:{name:b[0]||`Site-${P+1}`,lat:parseFloat(b[1])||0,lon:parseFloat(b[2])||0}})}function y(){const w=m(s);t({...n,sites:w}),alert("Site parameters updated!")}const v=()=>{c(m(s)),d(!0)};return Q.useEffect(()=>{e&&Object.keys(e).length>0&&t(e)},[e]),B.jsxs("div",{className:"p-4 space-y-4",children:[B.jsxs("div",{className:"flex items-center space-x-4",children:[B.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[B.jsx("input",{type:"radio",className:"theme-adaptive",checked:i==="single",onChange:()=>r("single")}),B.jsx("span",{children:"Single Site"})]}),B.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[B.jsx("input",{type:"radio",className:"theme-adaptive",checked:i==="multi",onChange:()=>r("multi")}),B.jsx("span",{children:"Multi Site"})]})]}),B.jsxs(JC,{mode:"wait",children:[i==="single"&&B.jsxs(_f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"grid grid-cols-2 gap-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block font-semibold",children:"Site Name"}),B.jsx("input",{type:"text",className:"input w-full",value:n.name||"",onChange:w=>t({...n,name:w.target.value})})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block font-semibold",children:"Coordinate (Lat, Lon)"}),B.jsx("input",{type:"text",className:"input w-full font-mono",value:s,onChange:w=>o(w.target.value),placeholder:"-6.9 107.6"}),B.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: Lat Lon"})]})]},"single"),i==="multi"&&B.jsxs(_f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[B.jsx("label",{className:"block font-semibold mb-1",children:"Input Sites (Name, Lat, Lon)"}),B.jsx("textarea",{rows:4,className:"w-full border px-2 py-1 rounded font-mono text-sm",value:s,onChange:w=>o(w.target.value),placeholder:"SiteA -6.9 107.6\\nSiteB -7.0 108.1"}),B.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: Name Lat Lon, pisahkan dengan spasi/koma/tab"})]},"multi")]}),B.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block font-semibold",children:"Rock/Soil Site"}),B.jsxs("select",{className:"input w-full",value:n.siteType||"",onChange:w=>t({...n,siteType:w.target.value}),children:[B.jsx("option",{value:"",children:"Select"}),B.jsx("option",{value:"rock",children:"Rock Site"}),B.jsx("option",{value:"soil",children:"Soil Site"})]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block font-semibold",children:"Wall"}),B.jsxs("select",{className:"input w-full",value:n.wall||"",onChange:w=>t({...n,wall:w.target.value}),children:[B.jsx("option",{value:"",children:"Select"}),B.jsx("option",{value:"hanging",children:"Hanging Wall"}),B.jsx("option",{value:"foot",children:"Foot Wall"})]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block font-semibold",children:"Vs30 (m/s)"}),B.jsx("input",{type:"number",className:"input w-full",value:n.vs30||"",onChange:w=>t({...n,vs30:w.target.value})})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block font-semibold",children:"Depth of Basement Rock (D, km)"}),B.jsx("input",{type:"number",className:"input w-full",value:n.depth||"",onChange:w=>t({...n,depth:w.target.value})})]})]}),B.jsxs("div",{className:"flex space-x-2",children:[B.jsx("button",{onClick:v,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"Preview on Map"}),B.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Update"})]})]})}function ez({datasources:n,selectedSources:t,setSelectedSources:e,selectedGmpes:i,setSelectedGmpes:r,siteParameter:s}){const[o,a]=Q.useState([]),[c,f]=Q.useState(!0),[d,m]=Q.useState(null),y="https://sha-api-production.up.railway.app/api/v1";Q.useEffect(()=>{async function b(){try{const M=await fetch(`${y}/gmpe`);if(!M.ok)throw new Error(`Fetch status: ${M.status}`);const R=await M.json();a(Array.isArray(R)?R:R.data||[])}catch(M){console.error("❌ GMPE fetch error:",M),m(M.message||"Gagal fetch GMPE")}finally{f(!1)}}b()},[y]);const v=b=>e(M=>M.some(R=>R.id===b.id)?M.filter(R=>R.id!==b.id):[...M,b]),w=()=>e(b=>b.length===n.length?[]:n),S=b=>{r(M=>M.find(O=>O.gmpeId===b.id)?M.filter(O=>O.gmpeId!==b.id):[...M,{gmpeId:b.id,gmpeName:b.name,weight:0}])},P=(b,M)=>{r(R=>R.map(O=>O.gmpeId===b?{...O,weight:parseFloat(M)||0}:O))};return c?B.jsx("div",{className:"p-4",children:"⏳ Memuat GMPE..."}):d?B.jsxs("div",{className:"p-4 text-red-500",children:["❌ ",d]}):(i.reduce((b,M)=>b+(M.weight||0),0),B.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[B.jsxs("div",{className:"border rounded-lg p-4 flex flex-col",children:[B.jsx("h2",{className:"font-semibold mb-2",children:"Available Datasources"}),B.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[B.jsx("input",{type:"checkbox",checked:t.length===n.length&&n.length>0,onChange:w}),B.jsx("span",{className:"font-medium",children:"Select All"})]}),B.jsx("div",{className:"flex-1 max-h-80 overflow-y-auto pr-2 space-y-1",children:n.length===0?B.jsx("p",{className:"text-gray-500",children:"No datasource available"}):n.map(b=>{const M=t.some(R=>R.id===b.id);return B.jsx("div",{onClick:()=>v(b),className:`cursor-pointer px-3 py-2 rounded border ${M?"bg-blue-100 border-blue-400":"hover:bg-gray-100 border-gray-300"}`,children:b.name||"Unnamed Source"},b.id)})})]}),B.jsxs("div",{className:"border rounded-lg p-4 flex flex-col",children:[B.jsx("h2",{className:"font-semibold mb-2",children:"Available GMPEs"}),B.jsx("div",{className:"flex-1 max-h-80 overflow-y-auto pr-2 space-y-1",children:o.length===0?B.jsx("p",{className:"text-gray-500",children:"Tidak ada GMPE tersedia"}):o.map(b=>{const M=i.find(R=>R.gmpeId===b.id);return B.jsxs("div",{onClick:()=>S(b),className:`gmpe-item ${M?"selected":""}`,children:[B.jsxs("span",{children:[b.name," (",b.year||"-",", ",b.tectonic_region||b.region||"-",")"]}),M&&B.jsx("input",{type:"number",step:"0.01",value:M.weight,onChange:R=>P(b.id,R.target.value),onClick:R=>R.stopPropagation()})]},b.id)})}),B.jsxs("div",{className:`mt-2 text-sm ${Math.abs(i.reduce((b,M)=>b+(M.weight||0),0)-1)>.001?"text-red-600 font-semibold":"text-gray-600"}`,children:["Total weight = ",B.jsx("strong",{children:i.reduce((b,M)=>b+(M.weight||0),0).toFixed(2)}),Math.abs(i.reduce((b,M)=>b+(M.weight||0),0)-1)>.001?" (harus = 1.0)":" ✅ Sudah valid"]})]})]}))}const nz="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",iz="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",rz="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";function ZA(n,t){return function(){return n.apply(t,arguments)}}const{toString:sz}=Object.prototype,{getPrototypeOf:q0}=Object,{iterator:Sg,toStringTag:qA}=Symbol,Mg=(n=>t=>{const e=sz.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),ms=n=>(n=n.toLowerCase(),t=>Mg(t)===n),Tg=n=>t=>typeof t===n,{isArray:Rc}=Array,Hf=Tg("undefined");function cd(n){return n!==null&&!Hf(n)&&n.constructor!==null&&!Hf(n.constructor)&&Ki(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const XA=ms("ArrayBuffer");function oz(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&XA(n.buffer),t}const az=Tg("string"),Ki=Tg("function"),YA=Tg("number"),hd=n=>n!==null&&typeof n=="object",lz=n=>n===!0||n===!1,Om=n=>{if(Mg(n)!=="object")return!1;const t=q0(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(qA in n)&&!(Sg in n)},uz=n=>{if(!hd(n)||cd(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},cz=ms("Date"),hz=ms("File"),fz=ms("Blob"),dz=ms("FileList"),pz=n=>hd(n)&&Ki(n.pipe),mz=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||Ki(n.append)&&((t=Mg(n))==="formdata"||t==="object"&&Ki(n.toString)&&n.toString()==="[object FormData]"))},gz=ms("URLSearchParams"),[yz,vz,_z,xz]=["ReadableStream","Request","Response","Headers"].map(ms),wz=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fd(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),Rc(n))for(i=0,r=n.length;i<r;i++)t.call(null,n[i],i,n);else{if(cd(n))return;const s=e?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(i=0;i<o;i++)a=s[i],t.call(null,n[a],a,n)}}function KA(n,t){if(cd(n))return null;t=t.toLowerCase();const e=Object.keys(n);let i=e.length,r;for(;i-- >0;)if(r=e[i],t===r.toLowerCase())return r;return null}const vl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,JA=n=>!Hf(n)&&n!==vl;function wx(){const{caseless:n}=JA(this)&&this||{},t={},e=(i,r)=>{const s=n&&KA(t,r)||r;Om(t[s])&&Om(i)?t[s]=wx(t[s],i):Om(i)?t[s]=wx({},i):Rc(i)?t[s]=i.slice():t[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&fd(arguments[i],e);return t}const bz=(n,t,e,{allOwnKeys:i}={})=>(fd(t,(r,s)=>{e&&Ki(r)?n[s]=ZA(r,e):n[s]=r},{allOwnKeys:i}),n),Sz=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Mz=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},Tz=(n,t,e,i)=>{let r,s,o;const a={};if(t=t||{},n==null)return t;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)o=r[s],(!i||i(o,n,t))&&!a[o]&&(t[o]=n[o],a[o]=!0);n=e!==!1&&q0(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},Ez=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},Pz=n=>{if(!n)return null;if(Rc(n))return n;let t=n.length;if(!YA(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},Cz=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&q0(Uint8Array)),Az=(n,t)=>{const i=(n&&n[Sg]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;t.call(n,s[0],s[1])}},Lz=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},kz=ms("HTMLFormElement"),Rz=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,r){return i.toUpperCase()+r}),J1=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),Iz=ms("RegExp"),QA=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};fd(e,(r,s)=>{let o;(o=t(r,s,n))!==!1&&(i[s]=o||r)}),Object.defineProperties(n,i)},Dz=n=>{QA(n,(t,e)=>{if(Ki(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(Ki(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},Oz=(n,t)=>{const e={},i=r=>{r.forEach(s=>{e[s]=!0})};return Rc(n)?i(n):i(String(n).split(t)),e},Nz=()=>{},Fz=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function zz(n){return!!(n&&Ki(n.append)&&n[qA]==="FormData"&&n[Sg])}const Bz=n=>{const t=new Array(10),e=(i,r)=>{if(hd(i)){if(t.indexOf(i)>=0)return;if(cd(i))return i;if(!("toJSON"in i)){t[r]=i;const s=Rc(i)?[]:{};return fd(i,(o,a)=>{const c=e(o,r+1);!Hf(c)&&(s[a]=c)}),t[r]=void 0,s}}return i};return e(n,0)},Vz=ms("AsyncFunction"),Uz=n=>n&&(hd(n)||Ki(n))&&Ki(n.then)&&Ki(n.catch),tL=((n,t)=>n?setImmediate:t?((e,i)=>(vl.addEventListener("message",({source:r,data:s})=>{r===vl&&s===e&&i.length&&i.shift()()},!1),r=>{i.push(r),vl.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Ki(vl.postMessage)),Hz=typeof queueMicrotask<"u"?queueMicrotask.bind(vl):typeof process<"u"&&process.nextTick||tL,jz=n=>n!=null&&Ki(n[Sg]),Et={isArray:Rc,isArrayBuffer:XA,isBuffer:cd,isFormData:mz,isArrayBufferView:oz,isString:az,isNumber:YA,isBoolean:lz,isObject:hd,isPlainObject:Om,isEmptyObject:uz,isReadableStream:yz,isRequest:vz,isResponse:_z,isHeaders:xz,isUndefined:Hf,isDate:cz,isFile:hz,isBlob:fz,isRegExp:Iz,isFunction:Ki,isStream:pz,isURLSearchParams:gz,isTypedArray:Cz,isFileList:dz,forEach:fd,merge:wx,extend:bz,trim:wz,stripBOM:Sz,inherits:Mz,toFlatObject:Tz,kindOf:Mg,kindOfTest:ms,endsWith:Ez,toArray:Pz,forEachEntry:Az,matchAll:Lz,isHTMLForm:kz,hasOwnProperty:J1,hasOwnProp:J1,reduceDescriptors:QA,freezeMethods:Dz,toObjectSet:Oz,toCamelCase:Rz,noop:Nz,toFiniteNumber:Fz,findKey:KA,global:vl,isContextDefined:JA,isSpecCompliantForm:zz,toJSONObject:Bz,isAsyncFn:Vz,isThenable:Uz,setImmediate:tL,asap:Hz,isIterable:jz};function Ce(n,t,e,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}Et.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Et.toJSONObject(this.config),code:this.code,status:this.status}}});const eL=Ce.prototype,nL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{nL[n]={value:n}});Object.defineProperties(Ce,nL);Object.defineProperty(eL,"isAxiosError",{value:!0});Ce.from=(n,t,e,i,r,s)=>{const o=Object.create(eL);return Et.toFlatObject(n,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Ce.call(o,n.message,t,e,i,r),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const Wz=null;function bx(n){return Et.isPlainObject(n)||Et.isArray(n)}function iL(n){return Et.endsWith(n,"[]")?n.slice(0,-2):n}function Q1(n,t,e){return n?n.concat(t).map(function(r,s){return r=iL(r),!e&&s?"["+r+"]":r}).join(e?".":""):t}function Gz(n){return Et.isArray(n)&&!n.some(bx)}const $z=Et.toFlatObject(Et,{},null,function(t){return/^is[A-Z]/.test(t)});function Eg(n,t,e){if(!Et.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=Et.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,P){return!Et.isUndefined(P[S])});const i=e.metaTokens,r=e.visitor||d,s=e.dots,o=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&Et.isSpecCompliantForm(t);if(!Et.isFunction(r))throw new TypeError("visitor must be a function");function f(w){if(w===null)return"";if(Et.isDate(w))return w.toISOString();if(Et.isBoolean(w))return w.toString();if(!c&&Et.isBlob(w))throw new Ce("Blob is not supported. Use a Buffer instead.");return Et.isArrayBuffer(w)||Et.isTypedArray(w)?c&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function d(w,S,P){let b=w;if(w&&!P&&typeof w=="object"){if(Et.endsWith(S,"{}"))S=i?S:S.slice(0,-2),w=JSON.stringify(w);else if(Et.isArray(w)&&Gz(w)||(Et.isFileList(w)||Et.endsWith(S,"[]"))&&(b=Et.toArray(w)))return S=iL(S),b.forEach(function(R,O){!(Et.isUndefined(R)||R===null)&&t.append(o===!0?Q1([S],O,s):o===null?S:S+"[]",f(R))}),!1}return bx(w)?!0:(t.append(Q1(P,S,s),f(w)),!1)}const m=[],y=Object.assign($z,{defaultVisitor:d,convertValue:f,isVisitable:bx});function v(w,S){if(!Et.isUndefined(w)){if(m.indexOf(w)!==-1)throw Error("Circular reference detected in "+S.join("."));m.push(w),Et.forEach(w,function(b,M){(!(Et.isUndefined(b)||b===null)&&r.call(t,b,Et.isString(M)?M.trim():M,S,y))===!0&&v(b,S?S.concat(M):[M])}),m.pop()}}if(!Et.isObject(n))throw new TypeError("data must be an object");return v(n),t}function tM(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function X0(n,t){this._pairs=[],n&&Eg(n,this,t)}const rL=X0.prototype;rL.append=function(t,e){this._pairs.push([t,e])};rL.toString=function(t){const e=t?function(i){return t.call(this,i,tM)}:tM;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function Zz(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sL(n,t,e){if(!t)return n;const i=e&&e.encode||Zz;Et.isFunction(e)&&(e={serialize:e});const r=e&&e.serialize;let s;if(r?s=r(t,e):s=Et.isURLSearchParams(t)?t.toString():new X0(t,e).toString(i),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class eM{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Et.forEach(this.handlers,function(i){i!==null&&t(i)})}}const oL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qz=typeof URLSearchParams<"u"?URLSearchParams:X0,Xz=typeof FormData<"u"?FormData:null,Yz=typeof Blob<"u"?Blob:null,Kz={isBrowser:!0,classes:{URLSearchParams:qz,FormData:Xz,Blob:Yz},protocols:["http","https","file","blob","url","data"]},Y0=typeof window<"u"&&typeof document<"u",Sx=typeof navigator=="object"&&navigator||void 0,Jz=Y0&&(!Sx||["ReactNative","NativeScript","NS"].indexOf(Sx.product)<0),Qz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tB=Y0&&window.location.href||"http://localhost",eB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Y0,hasStandardBrowserEnv:Jz,hasStandardBrowserWebWorkerEnv:Qz,navigator:Sx,origin:tB},Symbol.toStringTag,{value:"Module"})),xi={...eB,...Kz};function nB(n,t){return Eg(n,new xi.classes.URLSearchParams,{visitor:function(e,i,r,s){return xi.isNode&&Et.isBuffer(e)?(this.append(i,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function iB(n){return Et.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function rB(n){const t={},e=Object.keys(n);let i;const r=e.length;let s;for(i=0;i<r;i++)s=e[i],t[s]=n[s];return t}function aL(n){function t(e,i,r,s){let o=e[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=e.length;return o=!o&&Et.isArray(r)?r.length:o,c?(Et.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!Et.isObject(r[o]))&&(r[o]=[]),t(e,i,r[o],s)&&Et.isArray(r[o])&&(r[o]=rB(r[o])),!a)}if(Et.isFormData(n)&&Et.isFunction(n.entries)){const e={};return Et.forEachEntry(n,(i,r)=>{t(iB(i),r,e,0)}),e}return null}function sB(n,t,e){if(Et.isString(n))try{return(t||JSON.parse)(n),Et.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const dd={transitional:oL,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",r=i.indexOf("application/json")>-1,s=Et.isObject(t);if(s&&Et.isHTMLForm(t)&&(t=new FormData(t)),Et.isFormData(t))return r?JSON.stringify(aL(t)):t;if(Et.isArrayBuffer(t)||Et.isBuffer(t)||Et.isStream(t)||Et.isFile(t)||Et.isBlob(t)||Et.isReadableStream(t))return t;if(Et.isArrayBufferView(t))return t.buffer;if(Et.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return nB(t,this.formSerializer).toString();if((a=Et.isFileList(t))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Eg(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||r?(e.setContentType("application/json",!1),sB(t)):t}],transformResponse:[function(t){const e=this.transitional||dd.transitional,i=e&&e.forcedJSONParsing,r=this.responseType==="json";if(Et.isResponse(t)||Et.isReadableStream(t))return t;if(t&&Et.isString(t)&&(i&&!this.responseType||r)){const o=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?Ce.from(a,Ce.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xi.classes.FormData,Blob:xi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Et.forEach(["delete","get","head","post","put","patch"],n=>{dd.headers[n]={}});const oB=Et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),aB=n=>{const t={};let e,i,r;return n&&n.split(`
`).forEach(function(o){r=o.indexOf(":"),e=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!e||t[e]&&oB[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},nM=Symbol("internals");function Ih(n){return n&&String(n).trim().toLowerCase()}function Nm(n){return n===!1||n==null?n:Et.isArray(n)?n.map(Nm):String(n)}function lB(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const uB=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function zv(n,t,e,i,r){if(Et.isFunction(i))return i.call(this,t,e);if(r&&(t=e),!!Et.isString(t)){if(Et.isString(i))return t.indexOf(i)!==-1;if(Et.isRegExp(i))return i.test(t)}}function cB(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function hB(n,t){const e=Et.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(r,s,o){return this[i].call(this,t,r,s,o)},configurable:!0})})}let Ji=class{constructor(t){t&&this.set(t)}set(t,e,i){const r=this;function s(a,c,f){const d=Ih(c);if(!d)throw new Error("header name must be a non-empty string");const m=Et.findKey(r,d);(!m||r[m]===void 0||f===!0||f===void 0&&r[m]!==!1)&&(r[m||c]=Nm(a))}const o=(a,c)=>Et.forEach(a,(f,d)=>s(f,d,c));if(Et.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(Et.isString(t)&&(t=t.trim())&&!uB(t))o(aB(t),e);else if(Et.isObject(t)&&Et.isIterable(t)){let a={},c,f;for(const d of t){if(!Et.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[f=d[0]]=(c=a[f])?Et.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(a,e)}else t!=null&&s(e,t,i);return this}get(t,e){if(t=Ih(t),t){const i=Et.findKey(this,t);if(i){const r=this[i];if(!e)return r;if(e===!0)return lB(r);if(Et.isFunction(e))return e.call(this,r,i);if(Et.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ih(t),t){const i=Et.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||zv(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let r=!1;function s(o){if(o=Ih(o),o){const a=Et.findKey(i,o);a&&(!e||zv(i,i[a],a,e))&&(delete i[a],r=!0)}}return Et.isArray(t)?t.forEach(s):s(t),r}clear(t){const e=Object.keys(this);let i=e.length,r=!1;for(;i--;){const s=e[i];(!t||zv(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const e=this,i={};return Et.forEach(this,(r,s)=>{const o=Et.findKey(i,s);if(o){e[o]=Nm(r),delete e[s];return}const a=t?cB(s):String(s).trim();a!==s&&delete e[s],e[a]=Nm(r),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Et.forEach(this,(i,r)=>{i!=null&&i!==!1&&(e[r]=t&&Et.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(r=>i.set(r)),i}static accessor(t){const i=(this[nM]=this[nM]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Ih(o);i[a]||(hB(r,o),i[a]=!0)}return Et.isArray(t)?t.forEach(s):s(t),this}};Ji.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Et.reduceDescriptors(Ji.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});Et.freezeMethods(Ji);function Bv(n,t){const e=this||dd,i=t||e,r=Ji.from(i.headers);let s=i.data;return Et.forEach(n,function(a){s=a.call(e,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function lL(n){return!!(n&&n.__CANCEL__)}function Ic(n,t,e){Ce.call(this,n??"canceled",Ce.ERR_CANCELED,t,e),this.name="CanceledError"}Et.inherits(Ic,Ce,{__CANCEL__:!0});function uL(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new Ce("Request failed with status code "+e.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function fB(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function dB(n,t){n=n||10;const e=new Array(n),i=new Array(n);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const f=Date.now(),d=i[s];o||(o=f),e[r]=c,i[r]=f;let m=s,y=0;for(;m!==r;)y+=e[m++],m=m%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),f-o<t)return;const v=d&&f-d;return v?Math.round(y*1e3/v):void 0}}function pB(n,t){let e=0,i=1e3/t,r,s;const o=(f,d=Date.now())=>{e=d,r=null,s&&(clearTimeout(s),s=null),n(...f)};return[(...f)=>{const d=Date.now(),m=d-e;m>=i?o(f,d):(r=f,s||(s=setTimeout(()=>{s=null,o(r)},i-m)))},()=>r&&o(r)]}const Ym=(n,t,e=3)=>{let i=0;const r=dB(50,250);return pB(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-i,f=r(c),d=o<=a;i=o;const m={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:f||void 0,estimated:f&&a&&d?(a-o)/f:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};n(m)},e)},iM=(n,t)=>{const e=n!=null;return[i=>t[0]({lengthComputable:e,total:n,loaded:i}),t[1]]},rM=n=>(...t)=>Et.asap(()=>n(...t)),mB=xi.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,xi.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(xi.origin),xi.navigator&&/(msie|trident)/i.test(xi.navigator.userAgent)):()=>!0,gB=xi.hasStandardBrowserEnv?{write(n,t,e,i,r,s){const o=[n+"="+encodeURIComponent(t)];Et.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),Et.isString(i)&&o.push("path="+i),Et.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yB(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function vB(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function cL(n,t,e){let i=!yB(t);return n&&(i||e==!1)?vB(n,t):t}const sM=n=>n instanceof Ji?{...n}:n;function Al(n,t){t=t||{};const e={};function i(f,d,m,y){return Et.isPlainObject(f)&&Et.isPlainObject(d)?Et.merge.call({caseless:y},f,d):Et.isPlainObject(d)?Et.merge({},d):Et.isArray(d)?d.slice():d}function r(f,d,m,y){if(Et.isUndefined(d)){if(!Et.isUndefined(f))return i(void 0,f,m,y)}else return i(f,d,m,y)}function s(f,d){if(!Et.isUndefined(d))return i(void 0,d)}function o(f,d){if(Et.isUndefined(d)){if(!Et.isUndefined(f))return i(void 0,f)}else return i(void 0,d)}function a(f,d,m){if(m in t)return i(f,d);if(m in n)return i(void 0,f)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(f,d,m)=>r(sM(f),sM(d),m,!0)};return Et.forEach(Object.keys({...n,...t}),function(d){const m=c[d]||r,y=m(n[d],t[d],d);Et.isUndefined(y)&&m!==a||(e[d]=y)}),e}const hL=n=>{const t=Al({},n);let{data:e,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:a}=t;t.headers=o=Ji.from(o),t.url=sL(cL(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(Et.isFormData(e)){if(xi.hasStandardBrowserEnv||xi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[f,...d]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([f||"multipart/form-data",...d].join("; "))}}if(xi.hasStandardBrowserEnv&&(i&&Et.isFunction(i)&&(i=i(t)),i||i!==!1&&mB(t.url))){const f=r&&s&&gB.read(s);f&&o.set(r,f)}return t},_B=typeof XMLHttpRequest<"u",xB=_B&&function(n){return new Promise(function(e,i){const r=hL(n);let s=r.data;const o=Ji.from(r.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:f}=r,d,m,y,v,w;function S(){v&&v(),w&&w(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let P=new XMLHttpRequest;P.open(r.method.toUpperCase(),r.url,!0),P.timeout=r.timeout;function b(){if(!P)return;const R=Ji.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),k={data:!a||a==="text"||a==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:R,config:n,request:P};uL(function(D){e(D),S()},function(D){i(D),S()},k),P=null}"onloadend"in P?P.onloadend=b:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(b)},P.onabort=function(){P&&(i(new Ce("Request aborted",Ce.ECONNABORTED,n,P)),P=null)},P.onerror=function(){i(new Ce("Network Error",Ce.ERR_NETWORK,n,P)),P=null},P.ontimeout=function(){let O=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||oL;r.timeoutErrorMessage&&(O=r.timeoutErrorMessage),i(new Ce(O,k.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,n,P)),P=null},s===void 0&&o.setContentType(null),"setRequestHeader"in P&&Et.forEach(o.toJSON(),function(O,k){P.setRequestHeader(k,O)}),Et.isUndefined(r.withCredentials)||(P.withCredentials=!!r.withCredentials),a&&a!=="json"&&(P.responseType=r.responseType),f&&([y,w]=Ym(f,!0),P.addEventListener("progress",y)),c&&P.upload&&([m,v]=Ym(c),P.upload.addEventListener("progress",m),P.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(d=R=>{P&&(i(!R||R.type?new Ic(null,n,P):R),P.abort(),P=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const M=fB(r.url);if(M&&xi.protocols.indexOf(M)===-1){i(new Ce("Unsupported protocol "+M+":",Ce.ERR_BAD_REQUEST,n));return}P.send(s||null)})},wB=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let i=new AbortController,r;const s=function(f){if(!r){r=!0,a();const d=f instanceof Error?f:this.reason;i.abort(d instanceof Ce?d:new Ic(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,s(new Ce(`timeout ${t} of ms exceeded`,Ce.ETIMEDOUT))},t);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),n=null)};n.forEach(f=>f.addEventListener("abort",s));const{signal:c}=i;return c.unsubscribe=()=>Et.asap(a),c}},bB=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let i=0,r;for(;i<e;)r=i+t,yield n.slice(i,r),i=r},SB=async function*(n,t){for await(const e of MB(n))yield*bB(e,t)},MB=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},oM=(n,t,e,i)=>{const r=SB(n,t);let s=0,o,a=c=>{o||(o=!0,i&&i(c))};return new ReadableStream({async pull(c){try{const{done:f,value:d}=await r.next();if(f){a(),c.close();return}let m=d.byteLength;if(e){let y=s+=m;e(y)}c.enqueue(new Uint8Array(d))}catch(f){throw a(f),f}},cancel(c){return a(c),r.return()}},{highWaterMark:2})},Pg=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fL=Pg&&typeof ReadableStream=="function",TB=Pg&&(typeof TextEncoder=="function"?(n=>t=>n.encode(t))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),dL=(n,...t)=>{try{return!!n(...t)}catch{return!1}},EB=fL&&dL(()=>{let n=!1;const t=new Request(xi.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!t}),aM=64*1024,Mx=fL&&dL(()=>Et.isReadableStream(new Response("").body)),Km={stream:Mx&&(n=>n.body)};Pg&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Km[t]&&(Km[t]=Et.isFunction(n[t])?e=>e[t]():(e,i)=>{throw new Ce(`Response type '${t}' is not supported`,Ce.ERR_NOT_SUPPORT,i)})})})(new Response);const PB=async n=>{if(n==null)return 0;if(Et.isBlob(n))return n.size;if(Et.isSpecCompliantForm(n))return(await new Request(xi.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Et.isArrayBufferView(n)||Et.isArrayBuffer(n))return n.byteLength;if(Et.isURLSearchParams(n)&&(n=n+""),Et.isString(n))return(await TB(n)).byteLength},CB=async(n,t)=>{const e=Et.toFiniteNumber(n.getContentLength());return e??PB(t)},AB=Pg&&(async n=>{let{url:t,method:e,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:f,headers:d,withCredentials:m="same-origin",fetchOptions:y}=hL(n);f=f?(f+"").toLowerCase():"text";let v=wB([r,s&&s.toAbortSignal()],o),w;const S=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let P;try{if(c&&EB&&e!=="get"&&e!=="head"&&(P=await CB(d,i))!==0){let k=new Request(t,{method:"POST",body:i,duplex:"half"}),N;if(Et.isFormData(i)&&(N=k.headers.get("content-type"))&&d.setContentType(N),k.body){const[D,I]=iM(P,Ym(rM(c)));i=oM(k.body,aM,D,I)}}Et.isString(m)||(m=m?"include":"omit");const b="credentials"in Request.prototype;w=new Request(t,{...y,signal:v,method:e.toUpperCase(),headers:d.normalize().toJSON(),body:i,duplex:"half",credentials:b?m:void 0});let M=await fetch(w,y);const R=Mx&&(f==="stream"||f==="response");if(Mx&&(a||R&&S)){const k={};["status","statusText","headers"].forEach(H=>{k[H]=M[H]});const N=Et.toFiniteNumber(M.headers.get("content-length")),[D,I]=a&&iM(N,Ym(rM(a),!0))||[];M=new Response(oM(M.body,aM,D,()=>{I&&I(),S&&S()}),k)}f=f||"text";let O=await Km[Et.findKey(Km,f)||"text"](M,n);return!R&&S&&S(),await new Promise((k,N)=>{uL(k,N,{data:O,headers:Ji.from(M.headers),status:M.status,statusText:M.statusText,config:n,request:w})})}catch(b){throw S&&S(),b&&b.name==="TypeError"&&/Load failed|fetch/i.test(b.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,n,w),{cause:b.cause||b}):Ce.from(b,b&&b.code,n,w)}}),Tx={http:Wz,xhr:xB,fetch:AB};Et.forEach(Tx,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const lM=n=>`- ${n}`,LB=n=>Et.isFunction(n)||n===null||n===!1,pL={getAdapter:n=>{n=Et.isArray(n)?n:[n];const{length:t}=n;let e,i;const r={};for(let s=0;s<t;s++){e=n[s];let o;if(i=e,!LB(e)&&(i=Tx[(o=String(e)).toLowerCase()],i===void 0))throw new Ce(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(lM).join(`
`):" "+lM(s[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:Tx};function Vv(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Ic(null,n)}function uM(n){return Vv(n),n.headers=Ji.from(n.headers),n.data=Bv.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),pL.getAdapter(n.adapter||dd.adapter)(n).then(function(i){return Vv(n),i.data=Bv.call(n,n.transformResponse,i),i.headers=Ji.from(i.headers),i},function(i){return lL(i)||(Vv(n),i&&i.response&&(i.response.data=Bv.call(n,n.transformResponse,i.response),i.response.headers=Ji.from(i.response.headers))),Promise.reject(i)})}const mL="1.11.0",Cg={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Cg[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const cM={};Cg.transitional=function(t,e,i){function r(s,o){return"[Axios v"+mL+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(t===!1)throw new Ce(r(o," has been removed"+(e?" in "+e:"")),Ce.ERR_DEPRECATED);return e&&!cM[o]&&(cM[o]=!0,console.warn(r(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,o,a):!0}};Cg.spelling=function(t){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function kB(n,t,e){if(typeof n!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],o=t[s];if(o){const a=n[s],c=a===void 0||o(a,s,n);if(c!==!0)throw new Ce("option "+s+" must be "+c,Ce.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Ce("Unknown option "+s,Ce.ERR_BAD_OPTION)}}const Fm={assertOptions:kB,validators:Cg},Cs=Fm.validators;let Tl=class{constructor(t){this.defaults=t||{},this.interceptors={request:new eM,response:new eM}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Al(this.defaults,e);const{transitional:i,paramsSerializer:r,headers:s}=e;i!==void 0&&Fm.assertOptions(i,{silentJSONParsing:Cs.transitional(Cs.boolean),forcedJSONParsing:Cs.transitional(Cs.boolean),clarifyTimeoutError:Cs.transitional(Cs.boolean)},!1),r!=null&&(Et.isFunction(r)?e.paramsSerializer={serialize:r}:Fm.assertOptions(r,{encode:Cs.function,serialize:Cs.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Fm.assertOptions(e,{baseUrl:Cs.spelling("baseURL"),withXsrfToken:Cs.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=s&&Et.merge(s.common,s[e.method]);s&&Et.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),e.headers=Ji.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(c=c&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const f=[];this.interceptors.response.forEach(function(S){f.push(S.fulfilled,S.rejected)});let d,m=0,y;if(!c){const w=[uM.bind(this),void 0];for(w.unshift(...a),w.push(...f),y=w.length,d=Promise.resolve(e);m<y;)d=d.then(w[m++],w[m++]);return d}y=a.length;let v=e;for(m=0;m<y;){const w=a[m++],S=a[m++];try{v=w(v)}catch(P){S.call(this,P);break}}try{d=uM.call(this,v)}catch(w){return Promise.reject(w)}for(m=0,y=f.length;m<y;)d=d.then(f[m++],f[m++]);return d}getUri(t){t=Al(this.defaults,t);const e=cL(t.baseURL,t.url,t.allowAbsoluteUrls);return sL(e,t.params,t.paramsSerializer)}};Et.forEach(["delete","get","head","options"],function(t){Tl.prototype[t]=function(e,i){return this.request(Al(i||{},{method:t,url:e,data:(i||{}).data}))}});Et.forEach(["post","put","patch"],function(t){function e(i){return function(s,o,a){return this.request(Al(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Tl.prototype[t]=e(),Tl.prototype[t+"Form"]=e(!0)});let RB=class gL{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(s){e=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},t(function(s,o,a){i.reason||(i.reason=new Ic(s,o,a),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=i=>{t.abort(i)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new gL(function(r){t=r}),cancel:t}}};function IB(n){return function(e){return n.apply(null,e)}}function DB(n){return Et.isObject(n)&&n.isAxiosError===!0}const Ex={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ex).forEach(([n,t])=>{Ex[t]=n});function yL(n){const t=new Tl(n),e=ZA(Tl.prototype.request,t);return Et.extend(e,Tl.prototype,t,{allOwnKeys:!0}),Et.extend(e,t,null,{allOwnKeys:!0}),e.create=function(r){return yL(Al(n,r))},e}const Ye=yL(dd);Ye.Axios=Tl;Ye.CanceledError=Ic;Ye.CancelToken=RB;Ye.isCancel=lL;Ye.VERSION=mL;Ye.toFormData=Eg;Ye.AxiosError=Ce;Ye.Cancel=Ye.CanceledError;Ye.all=function(t){return Promise.all(t)};Ye.spread=IB;Ye.isAxiosError=DB;Ye.mergeConfig=Al;Ye.AxiosHeaders=Ji;Ye.formToJSON=n=>aL(Et.isHTMLForm(n)?new FormData(n):n);Ye.getAdapter=pL.getAdapter;Ye.HttpStatusCode=Ex;Ye.default=Ye;const{Axios:pK,AxiosError:mK,CanceledError:gK,isCancel:yK,CancelToken:vK,VERSION:_K,all:xK,Cancel:wK,isAxiosError:bK,spread:SK,toFormData:MK,AxiosHeaders:TK,HttpStatusCode:EK,formToJSON:PK,getAdapter:CK,mergeConfig:AK}=Ye;function Uv({title:n,children:t,footer:e,className:i=""}){return B.jsxs("div",{className:`p-4 sm:p-6 border rounded-xl shadow-sm 
                  bg-[var(--card)] text-[var(--text)] 
                  w-full max-w-full ${i}`,children:[n&&B.jsx("h2",{className:"font-semibold text-lg mb-4",children:n}),B.jsx("div",{className:"space-y-4",children:t}),e&&B.jsx("div",{className:"mt-4 flex flex-col sm:flex-row sm:justify-end gap-2",children:e})]})}delete kc.Icon.Default.prototype._getIconUrl;kc.Icon.Default.mergeOptions({iconRetinaUrl:iz,iconUrl:nz,shadowUrl:rz});const Dh=n=>(n||[]).map(t=>Array.isArray(t)&&t.length===2?[t[0],t[1]]:typeof t=="object"&&t.lat!=null&&t.lon!=null?[t.lat,t.lon]:null).filter(Boolean);function hM({coords:n}){const t=Z0();return Q.useEffect(()=>{if(n.length>0){const e=kc.latLngBounds(n);t.fitBounds(e,{padding:[30,30]})}},[n,t]),null}function OB({siteData:n,selectedSources:t,datasources:e,onRunResult:i}){const[r,s]=Q.useState(!1),[o,a]=Q.useState(null),c=t.flatMap(d=>[...Dh(d.coords_up),...Dh(d.coords_down)]);async function f(){s(!0),a(null);try{const d={site:n,sources:t},m=await Ye.post("https://sha-api-production.up.railway.app/api/v1/run-analysis",d);i&&i({result:m.data,siteData:n,selectedSources:t})}catch(d){a(d.response?.data?.error||d.message||"Terjadi kesalahan")}finally{s(!1)}}return B.jsxs("div",{className:"p-2 sm:p-4 space-y-6",children:[B.jsx(Uv,{title:"Site Configuration",children:Object.keys(n).length===0?B.jsx("p",{className:"text-gray-500",children:"No site parameters saved"}):B.jsx("div",{className:"space-y-3",children:Object.entries(n).map(([d,m])=>{if(d==="sites"){const y=Dh(m);return B.jsxs("div",{children:[B.jsx("span",{className:"font-medium",children:"Sites:"}),m?.length>0?B.jsxs(B.Fragment,{children:[B.jsx("ul",{className:"list-disc pl-5 mt-1 text-sm sm:text-base overflow-x-auto",children:m.map((v,w)=>B.jsxs("li",{children:[v.name?B.jsx("strong",{children:v.name}):`Site-${w+1}`," → Lat: ",v.lat,", Lon: ",v.lon]},w))}),B.jsx("div",{className:"mt-3 h-[35vh] sm:h-[50vh] border rounded overflow-hidden",children:B.jsxs(Vf,{center:y[0]||[0,0],zoom:6,className:"h-full w-full",children:[B.jsx(Uf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),B.jsx(hM,{coords:y}),y.map((v,w)=>B.jsx(ya,{position:v,children:B.jsxs(Ml,{children:[m[w]?.name||`Site-${w+1}`,B.jsx("br",{}),"Lat: ",v[0],", Lon: ",v[1]]})},w))]})})]}):B.jsx("span",{className:"text-gray-500 ml-2",children:"None"})]},d)}return B.jsxs("div",{children:[B.jsxs("span",{className:"font-medium",children:[d,":"]})," ",String(m)||"-"]},d)})})}),B.jsx(Uv,{title:"Selected Datasources",children:t.length>0?B.jsx("div",{className:"h-[35vh] sm:h-[55vh] w-full border rounded overflow-hidden",children:B.jsxs(Vf,{center:c[0]||[0,0],zoom:6,className:"h-full w-full",children:[B.jsx(Uf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),B.jsx(hM,{coords:c}),t.map((d,m)=>B.jsxs(B.Fragment,{children:[Dh(d.coords_up).map((y,v)=>B.jsx(ya,{position:y,children:B.jsxs(Ml,{children:[d.name," (Up)",B.jsx("br",{}),"Lat: ",y[0],", Lon: ",y[1]]})},`up-${m}-${v}`)),Dh(d.coords_down).map((y,v)=>B.jsx(ya,{position:y,children:B.jsxs(Ml,{children:[d.name," (Down)",B.jsx("br",{}),"Lat: ",y[0],", Lon: ",y[1]]})},`down-${m}-${v}`))]}))]})}):B.jsx("p",{className:"text-gray-500",children:"No sources selected"})}),B.jsx(Uv,{footer:B.jsxs(B.Fragment,{children:[o&&B.jsx("p",{className:"text-red-500",children:o}),B.jsx("button",{onClick:f,disabled:r||!n||t.length===0,className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400",children:r?"Running...":"Run Analysis"})]})})]})}function NB({datasources:n,onRunResult:t}){const[e,i]=Q.useState(0),[r,s]=Q.useState({}),[o,a]=Q.useState([]),[c,f]=Q.useState([]),[d,m]=Q.useState(!1),[y,v]=Q.useState(null),w=["Site Parameter","Seismic Model","Analysis Conclusion"];async function S(){m(!0),v(null);const P={site:r,sources:o,gmpes:c};try{const{data:b}=await Ye.post("https://sha-api-production.up.railway.app/api/v1/run-analysis",P);t?.({result:b,siteData:r,selectedSources:o,selectedGmpes:c,error:null})}catch(b){const M=b.response?.data?.error||b.message||"Terjadi kesalahan";console.error(M),v(M),t?.({result:null,siteData:r,selectedSources:o,selectedGmpes:c,error:M})}finally{m(!1)}}return B.jsx("div",{className:"w-full p-6",children:B.jsx(Lp.Group,{selectedIndex:e,onChange:i,children:B.jsxs("div",{className:"tab-wrapper",children:[B.jsx(Lp.List,{className:"tab-list",children:w.map((P,b)=>B.jsx(Lp,{className:"tab-item group",children:P},P))}),B.jsx(Lp.Panels,{className:"p-4 sm:p-6 relative",children:B.jsxs(JC,{mode:"wait",children:[e===0&&B.jsx(_f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"tab-panel",children:B.jsx(tz,{siteData:r,setSiteData:s})},"site"),e===1&&B.jsx(_f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"tab-panel",children:B.jsx(ez,{datasources:n,selectedSources:o,setSelectedSources:a,selectedGmpes:c,setSelectedGmpes:f,siteParameter:r?.siteType})},"seismic"),e===2&&B.jsx(_f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"tab-panel",children:B.jsx(OB,{siteData:r,selectedSources:o,selectedGmpes:c,datasources:n,onRunResult:S,loading:d,error:y})},"conclusion")]})})]})})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function pd(n){return n+.5|0}const ga=(n,t,e)=>Math.max(Math.min(n,e),t);function of(n){return ga(pd(n*2.55),0,255)}function va(n){return ga(pd(n*255),0,255)}function bo(n){return ga(pd(n/2.55)/100,0,1)}function fM(n){return ga(pd(n*100),0,100)}const Fr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Px=[..."0123456789ABCDEF"],FB=n=>Px[n&15],zB=n=>Px[(n&240)>>4]+Px[n&15],Op=n=>(n&240)>>4===(n&15),BB=n=>Op(n.r)&&Op(n.g)&&Op(n.b)&&Op(n.a);function VB(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Fr[n[1]]*17,g:255&Fr[n[2]]*17,b:255&Fr[n[3]]*17,a:t===5?Fr[n[4]]*17:255}:(t===7||t===9)&&(e={r:Fr[n[1]]<<4|Fr[n[2]],g:Fr[n[3]]<<4|Fr[n[4]],b:Fr[n[5]]<<4|Fr[n[6]],a:t===9?Fr[n[7]]<<4|Fr[n[8]]:255})),e}const UB=(n,t)=>n<255?t(n):"";function HB(n){var t=BB(n)?FB:zB;return n?"#"+t(n.r)+t(n.g)+t(n.b)+UB(n.a,t):void 0}const jB=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function vL(n,t,e){const i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function WB(n,t,e){const i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function GB(n,t,e){const i=vL(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function $B(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function K0(n){const e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2;let c,f,d;return s!==o&&(d=s-o,f=a>.5?d/(2-s-o):d/(s+o),c=$B(e,i,r,d,s),c=c*60+.5),[c|0,f||0,a]}function J0(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(va)}function Q0(n,t,e){return J0(vL,n,t,e)}function ZB(n,t,e){return J0(GB,n,t,e)}function qB(n,t,e){return J0(WB,n,t,e)}function _L(n){return(n%360+360)%360}function XB(n){const t=jB.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?of(+t[5]):va(+t[5]));const r=_L(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=ZB(r,s,o):t[1]==="hsv"?i=qB(r,s,o):i=Q0(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}function YB(n,t){var e=K0(n);e[0]=_L(e[0]+t),e=Q0(e),n.r=e[0],n.g=e[1],n.b=e[2]}function KB(n){if(!n)return;const t=K0(n),e=t[0],i=fM(t[1]),r=fM(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${bo(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const dM={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},pM={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function JB(){const n={},t=Object.keys(pM),e=Object.keys(dM);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,dM[s]);s=parseInt(pM[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let Np;function QB(n){Np||(Np=JB(),Np.transparent=[0,0,0,0]);const t=Np[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const t4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function e4(n){const t=t4.exec(n);let e=255,i,r,s;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?of(o):ga(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?of(i):ga(i,0,255)),r=255&(t[4]?of(r):ga(r,0,255)),s=255&(t[6]?of(s):ga(s,0,255)),{r:i,g:r,b:s,a:e}}}function n4(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${bo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Hv=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Tu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function i4(n,t,e){const i=Tu(bo(n.r)),r=Tu(bo(n.g)),s=Tu(bo(n.b));return{r:va(Hv(i+e*(Tu(bo(t.r))-i))),g:va(Hv(r+e*(Tu(bo(t.g))-r))),b:va(Hv(s+e*(Tu(bo(t.b))-s))),a:n.a+e*(t.a-n.a)}}function Fp(n,t,e){if(n){let i=K0(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Q0(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function xL(n,t){return n&&Object.assign(t||{},n)}function mM(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=va(n[3]))):(t=xL(n,{r:0,g:0,b:0,a:1}),t.a=va(t.a)),t}function r4(n){return n.charAt(0)==="r"?e4(n):XB(n)}let wL=class Cx{constructor(t){if(t instanceof Cx)return t;const e=typeof t;let i;e==="object"?i=mM(t):e==="string"&&(i=VB(t)||QB(t)||r4(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=xL(this._rgb);return t&&(t.a=bo(t.a)),t}set rgb(t){this._rgb=mM(t)}rgbString(){return this._valid?n4(this._rgb):void 0}hexString(){return this._valid?HB(this._rgb):void 0}hslString(){return this._valid?KB(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,a=2*o-1,c=i.a-r.a,f=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-f,i.r=255&f*i.r+s*r.r+.5,i.g=255&f*i.g+s*r.g+.5,i.b=255&f*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=i4(this._rgb,t._rgb,e)),this}clone(){return new Cx(this.rgb)}alpha(t){return this._rgb.a=va(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=pd(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Fp(this._rgb,2,t),this}darken(t){return Fp(this._rgb,2,-t),this}saturate(t){return Fp(this._rgb,1,t),this}desaturate(t){return Fp(this._rgb,1,-t),this}rotate(t){return YB(this._rgb,t),this}};/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function po(){}const s4=(()=>{let n=0;return()=>n++})();function un(n){return n==null}function Jn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ge(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Gr(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function As(n,t){return Gr(n)?n:t}function Ve(n,t){return typeof n>"u"?t:n}const o4=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function dn(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Xe(n,t,e,i){let r,s,o;if(Jn(n))for(s=n.length,r=0;r<s;r++)t.call(e,n[r],r);else if(Ge(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function Jm(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Qm(n){if(Jn(n))return n.map(Qm);if(Ge(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=Qm(n[e[r]]);return t}return n}function bL(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function a4(n,t,e,i){if(!bL(n))return;const r=t[n],s=e[n];Ge(r)&&Ge(s)?jf(r,s,i):t[n]=Qm(s)}function jf(n,t,e){const i=Jn(t)?t:[t],r=i.length;if(!Ge(n))return n;e=e||{};const s=e.merger||a4;let o;for(let a=0;a<r;++a){if(o=i[a],!Ge(o))continue;const c=Object.keys(o);for(let f=0,d=c.length;f<d;++f)s(c[f],n,o,e)}return n}function xf(n,t){return jf(n,t,{merger:l4})}function l4(n,t,e){if(!bL(n))return;const i=t[n],r=e[n];Ge(i)&&Ge(r)?xf(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Qm(r))}const gM={"":n=>n,x:n=>n.x,y:n=>n.y};function u4(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function c4(n){const t=u4(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function tg(n,t){return(gM[t]||(gM[t]=c4(t)))(n)}function tw(n){return n.charAt(0).toUpperCase()+n.slice(1)}const eg=n=>typeof n<"u",Ea=n=>typeof n=="function",yM=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function h4(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const ti=Math.PI,Hs=2*ti,f4=Hs+ti,ng=Number.POSITIVE_INFINITY,d4=ti/180,ds=ti/2,sl=ti/4,vM=ti*2/3,SL=Math.log10,_c=Math.sign;function wf(n,t,e){return Math.abs(n-t)<e}function _M(n){const t=Math.round(n);n=wf(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(SL(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function p4(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function m4(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Wf(n){return!m4(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function g4(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function y4(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function _l(n){return n*(ti/180)}function v4(n){return n*(180/ti)}function xM(n){if(!Gr(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function _4(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let s=Math.atan2(i,e);return s<-.5*ti&&(s+=Hs),{angle:s,distance:r}}function Ax(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function x4(n,t){return(n-t+f4)%Hs-ti}function ma(n){return(n%Hs+Hs)%Hs}function ML(n,t,e,i){const r=ma(n),s=ma(t),o=ma(e),a=ma(s-r),c=ma(o-r),f=ma(r-s),d=ma(r-o);return r===s||r===o||i&&s===o||a>c&&f<d}function Ur(n,t,e){return Math.max(t,Math.min(e,n))}function w4(n){return Ur(n,-32768,32767)}function af(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function ew(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}const xl=(n,t,e,i)=>ew(n,e,i?r=>{const s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),b4=(n,t,e)=>ew(n,e,i=>n[i][t]>=e);function S4(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const TL=["push","pop","shift","splice","unshift"];function M4(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),TL.forEach(e=>{const i="_onData"+tw(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function wM(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(TL.forEach(s=>{delete n[s]}),delete n._chartjs)}function T4(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const EL=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function PL(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,EL.call(window,()=>{i=!1,n.apply(t,e)}))}}function E4(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const nw=n=>n==="start"?"left":n==="end"?"right":"center",_i=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,P4=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function C4(n,t,e){const i=t.length;let r=0,s=i;if(n._sorted){const{iScale:o,vScale:a,_parsed:c}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=o.axis,{min:m,max:y,minDefined:v,maxDefined:w}=o.getUserBounds();if(v){if(r=Math.min(xl(c,d,m).lo,e?i:xl(t,d,o.getPixelForValue(m)).lo),f){const S=c.slice(0,r+1).reverse().findIndex(P=>!un(P[a.axis]));r-=Math.max(0,S)}r=Ur(r,0,i-1)}if(w){let S=Math.max(xl(c,o.axis,y,!0).hi+1,e?0:xl(t,d,o.getPixelForValue(y),!0).hi+1);if(f){const P=c.slice(S-1).findIndex(b=>!un(b[a.axis]));S+=Math.max(0,P)}s=Ur(S,r,i)-r}else s=i-r}return{start:r,count:s}}function A4(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}const zp=n=>n===0||n===1,bM=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Hs/e)),SM=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Hs/e)+1,bf={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ds)+1,easeOutSine:n=>Math.sin(n*ds),easeInOutSine:n=>-.5*(Math.cos(ti*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>zp(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>zp(n)?n:bM(n,.075,.3),easeOutElastic:n=>zp(n)?n:SM(n,.075,.3),easeInOutElastic(n){return zp(n)?n:n<.5?.5*bM(n*2,.1125,.45):.5+.5*SM(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-bf.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?bf.easeInBounce(n*2)*.5:bf.easeOutBounce(n*2-1)*.5+.5};function iw(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function MM(n){return iw(n)?n:new wL(n)}function jv(n){return iw(n)?n:new wL(n).saturate(.5).darken(.1).hexString()}const L4=["x","y","borderWidth","radius","tension"],k4=["color","borderColor","backgroundColor"];function R4(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:k4},numbers:{type:"number",properties:L4}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function I4(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const TM=new Map;function D4(n,t){t=t||{};const e=n+JSON.stringify(t);let i=TM.get(e);return i||(i=new Intl.NumberFormat(n,t),TM.set(e,i)),i}function CL(n,t,e){return D4(t,e).format(n)}const O4={values(n){return Jn(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(e.length>1){const f=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(f<1e-4||f>1e15)&&(r="scientific"),s=N4(n,e)}const o=SL(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),CL(n,i,c)}};function N4(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var AL={formatters:O4};function F4(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:AL.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ll=Object.create(null),Lx=Object.create(null);function Sf(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function Wv(n,t,e){return typeof t=="string"?jf(Sf(n,t),e):jf(Sf(n,""),t)}class z4{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>jv(r.backgroundColor),this.hoverBorderColor=(i,r)=>jv(r.borderColor),this.hoverColor=(i,r)=>jv(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Wv(this,t,e)}get(t){return Sf(this,t)}describe(t,e){return Wv(Lx,t,e)}override(t,e){return Wv(Ll,t,e)}route(t,e,i,r){const s=Sf(this,t),o=Sf(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const c=this[a],f=o[r];return Ge(c)?Object.assign({},f,c):Ve(c,f)},set(c){this[a]=c}}})}apply(t){t.forEach(e=>e(this))}}var Dn=new z4({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[R4,I4,F4]);function B4(n){return!n||un(n.size)||un(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function EM(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function ol(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function PM(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function kx(n,t,e,i){LL(n,t,e,i,null)}function LL(n,t,e,i,r){let s,o,a,c,f,d,m,y;const v=t.pointStyle,w=t.rotation,S=t.radius;let P=(w||0)*d4;if(v&&typeof v=="object"&&(s=v.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(P),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),n.restore();return}if(!(isNaN(S)||S<=0)){switch(n.beginPath(),v){default:r?n.ellipse(e,i,r/2,S,0,0,Hs):n.arc(e,i,S,0,Hs),n.closePath();break;case"triangle":d=r?r/2:S,n.moveTo(e+Math.sin(P)*d,i-Math.cos(P)*S),P+=vM,n.lineTo(e+Math.sin(P)*d,i-Math.cos(P)*S),P+=vM,n.lineTo(e+Math.sin(P)*d,i-Math.cos(P)*S),n.closePath();break;case"rectRounded":f=S*.516,c=S-f,o=Math.cos(P+sl)*c,m=Math.cos(P+sl)*(r?r/2-f:c),a=Math.sin(P+sl)*c,y=Math.sin(P+sl)*(r?r/2-f:c),n.arc(e-m,i-a,f,P-ti,P-ds),n.arc(e+y,i-o,f,P-ds,P),n.arc(e+m,i+a,f,P,P+ds),n.arc(e-y,i+o,f,P+ds,P+ti),n.closePath();break;case"rect":if(!w){c=Math.SQRT1_2*S,d=r?r/2:c,n.rect(e-d,i-c,2*d,2*c);break}P+=sl;case"rectRot":m=Math.cos(P)*(r?r/2:S),o=Math.cos(P)*S,a=Math.sin(P)*S,y=Math.sin(P)*(r?r/2:S),n.moveTo(e-m,i-a),n.lineTo(e+y,i-o),n.lineTo(e+m,i+a),n.lineTo(e-y,i+o),n.closePath();break;case"crossRot":P+=sl;case"cross":m=Math.cos(P)*(r?r/2:S),o=Math.cos(P)*S,a=Math.sin(P)*S,y=Math.sin(P)*(r?r/2:S),n.moveTo(e-m,i-a),n.lineTo(e+m,i+a),n.moveTo(e+y,i-o),n.lineTo(e-y,i+o);break;case"star":m=Math.cos(P)*(r?r/2:S),o=Math.cos(P)*S,a=Math.sin(P)*S,y=Math.sin(P)*(r?r/2:S),n.moveTo(e-m,i-a),n.lineTo(e+m,i+a),n.moveTo(e+y,i-o),n.lineTo(e-y,i+o),P+=sl,m=Math.cos(P)*(r?r/2:S),o=Math.cos(P)*S,a=Math.sin(P)*S,y=Math.sin(P)*(r?r/2:S),n.moveTo(e-m,i-a),n.lineTo(e+m,i+a),n.moveTo(e+y,i-o),n.lineTo(e-y,i+o);break;case"line":o=r?r/2:Math.cos(P)*S,a=Math.sin(P)*S,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(P)*(r?r/2:S),i+Math.sin(P)*S);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Gf(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function rw(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function sw(n){n.restore()}function V4(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function U4(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function H4(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),un(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function j4(n,t,e,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,c=e-s.actualBoundingBoxAscent,f=e+s.actualBoundingBoxDescent,d=r.strikethrough?(c+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,d),n.lineTo(a,d),n.stroke()}}function W4(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function $f(n,t,e,i,r,s={}){const o=Jn(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="";let c,f;for(n.save(),n.font=r.string,H4(n,s),c=0;c<o.length;++c)f=o[c],s.backdrop&&W4(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),un(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(f,e,i,s.maxWidth)),n.fillText(f,e,i,s.maxWidth),j4(n,e,i,f,s),i+=Number(r.lineHeight);n.restore()}function Rx(n,t){const{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*ti,ti,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,ti,ds,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,ds,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-ds,!0),n.lineTo(e+o.topLeft,i)}const G4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Z4(n,t){const e=(""+n).match(G4);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const q4=n=>+n||0;function kL(n,t){const e={},i=Ge(t),r=i?Object.keys(t):t,s=Ge(n)?i?o=>Ve(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of r)e[o]=q4(s(o));return e}function X4(n){return kL(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Mf(n){return kL(n,["topLeft","topRight","bottomLeft","bottomRight"])}function $r(n){const t=X4(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function bi(n,t){n=n||{},t=t||Dn.font;let e=Ve(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Ve(n.style,t.style);i&&!(""+i).match($4)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Ve(n.family,t.family),lineHeight:Z4(Ve(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Ve(n.weight,t.weight),string:""};return r.string=B4(r),r}function Bp(n,t,e,i){let r,s,o;for(r=0,s=n.length;r<s;++r)if(o=n[r],o!==void 0&&o!==void 0)return o}function Y4(n,t,e){const{min:i,max:r}=n,s=o4(t,(r-i)/2),o=(a,c)=>e&&a===0?0:a+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Dl(n,t){return Object.assign(Object.create(n),t)}function ow(n,t=[""],e,i,r=()=>n[0]){const s=e||n;typeof i>"u"&&(i=OL("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>ow([a,...n],t,s,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return IL(a,c,()=>rV(c,t,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return AM(a).includes(c)},ownKeys(a){return AM(a)},set(a,c,f){const d=a._storage||(a._storage=r());return a[c]=d[c]=f,delete a._keys,!0}})}function xc(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:RL(n,i),setContext:s=>xc(n,s,e,i),override:s=>xc(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return IL(s,o,()=>J4(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function RL(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:Ea(e)?e:()=>e,isIndexable:Ea(i)?i:()=>i}}const K4=(n,t)=>n?n+tw(t):t,aw=(n,t)=>Ge(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function IL(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function J4(n,t,e){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[t];return Ea(a)&&o.isScriptable(t)&&(a=Q4(t,a,n,e)),Jn(a)&&a.length&&(a=tV(t,a,n,o.isIndexable)),aw(t,a)&&(a=xc(a,r,s&&s[t],o)),a}function Q4(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=t(s,o||i);return a.delete(n),aw(n,c)&&(c=lw(r._scopes,r,n,c)),c}function tV(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(Ge(t[0])){const c=t,f=r._scopes.filter(d=>d!==c);t=[];for(const d of c){const m=lw(f,r,n,d);t.push(xc(m,s,o&&o[n],a))}}return t}function DL(n,t,e){return Ea(n)?n(t,e):n}const eV=(n,t)=>n===!0?t:typeof n=="string"?tg(t,n):void 0;function nV(n,t,e,i,r){for(const s of t){const o=eV(e,s);if(o){n.add(o);const a=DL(o._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function lw(n,t,e,i){const r=t._rootScopes,s=DL(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let c=CM(a,o,e,s||e,i);return c===null||typeof s<"u"&&s!==e&&(c=CM(a,o,s,c,i),c===null)?!1:ow(Array.from(a),[""],r,s,()=>iV(t,e,i))}function CM(n,t,e,i,r){for(;e;)e=nV(n,t,e,i,r);return e}function iV(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return Jn(r)&&Ge(e)?e:r||{}}function rV(n,t,e,i){let r;for(const s of t)if(r=OL(K4(s,n),e),typeof r<"u")return aw(n,r)?lw(e,i,n,r):r}function OL(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function AM(n){let t=n._keys;return t||(t=n._keys=sV(n._scopes)),t}function sV(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}const oV=Number.EPSILON||1e-14,wc=(n,t)=>t<n.length&&!n[t].skip&&n[t],NL=n=>n==="x"?"y":"x";function aV(n,t,e,i){const r=n.skip?t:n,s=t,o=e.skip?t:e,a=Ax(s,r),c=Ax(o,s);let f=a/(a+c),d=c/(a+c);f=isNaN(f)?0:f,d=isNaN(d)?0:d;const m=i*f,y=i*d;return{previous:{x:s.x-m*(o.x-r.x),y:s.y-m*(o.y-r.y)},next:{x:s.x+y*(o.x-r.x),y:s.y+y*(o.y-r.y)}}}function lV(n,t,e){const i=n.length;let r,s,o,a,c,f=wc(n,0);for(let d=0;d<i-1;++d)if(c=f,f=wc(n,d+1),!(!c||!f)){if(wf(t[d],0,oV)){e[d]=e[d+1]=0;continue}r=e[d]/t[d],s=e[d+1]/t[d],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[d]=r*o*t[d],e[d+1]=s*o*t[d])}}function uV(n,t,e="x"){const i=NL(e),r=n.length;let s,o,a,c=wc(n,0);for(let f=0;f<r;++f){if(o=a,a=c,c=wc(n,f+1),!a)continue;const d=a[e],m=a[i];o&&(s=(d-o[e])/3,a[`cp1${e}`]=d-s,a[`cp1${i}`]=m-s*t[f]),c&&(s=(c[e]-d)/3,a[`cp2${e}`]=d+s,a[`cp2${i}`]=m+s*t[f])}}function cV(n,t="x"){const e=NL(t),i=n.length,r=Array(i).fill(0),s=Array(i);let o,a,c,f=wc(n,0);for(o=0;o<i;++o)if(a=c,c=f,f=wc(n,o+1),!!c){if(f){const d=f[t]-c[t];r[o]=d!==0?(f[e]-c[e])/d:0}s[o]=a?f?_c(r[o-1])!==_c(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}lV(n,r,s),uV(n,s,t)}function Vp(n,t,e){return Math.max(Math.min(n,e),t)}function hV(n,t){let e,i,r,s,o,a=Gf(n[0],t);for(e=0,i=n.length;e<i;++e)o=s,s=a,a=e<i-1&&Gf(n[e+1],t),s&&(r=n[e],o&&(r.cp1x=Vp(r.cp1x,t.left,t.right),r.cp1y=Vp(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=Vp(r.cp2x,t.left,t.right),r.cp2y=Vp(r.cp2y,t.top,t.bottom)))}function fV(n,t,e,i,r){let s,o,a,c;if(t.spanGaps&&(n=n.filter(f=>!f.skip)),t.cubicInterpolationMode==="monotone")cV(n,r);else{let f=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=aV(f,a,n[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,f=a}t.capBezierPoints&&hV(n,e)}function uw(){return typeof window<"u"&&typeof document<"u"}function cw(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ig(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Ag=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function dV(n,t){return Ag(n).getPropertyValue(t)}const pV=["top","right","bottom","left"];function El(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=pV[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const mV=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function gV(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i;let o=!1,a,c;if(mV(r,s,n.target))a=r,c=s;else{const f=t.getBoundingClientRect();a=i.clientX-f.left,c=i.clientY-f.top,o=!0}return{x:a,y:c,box:o}}function hl(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=Ag(e),s=r.boxSizing==="border-box",o=El(r,"padding"),a=El(r,"border","width"),{x:c,y:f,box:d}=gV(n,e),m=o.left+(d&&a.left),y=o.top+(d&&a.top);let{width:v,height:w}=t;return s&&(v-=o.width+a.width,w-=o.height+a.height),{x:Math.round((c-m)/v*e.width/i),y:Math.round((f-y)/w*e.height/i)}}function yV(n,t,e){let i,r;if(t===void 0||e===void 0){const s=n&&cw(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const o=s.getBoundingClientRect(),a=Ag(s),c=El(a,"border","width"),f=El(a,"padding");t=o.width-f.width-c.width,e=o.height-f.height-c.height,i=ig(a.maxWidth,s,"clientWidth"),r=ig(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:i||ng,maxHeight:r||ng}}const Up=n=>Math.round(n*10)/10;function vV(n,t,e,i){const r=Ag(n),s=El(r,"margin"),o=ig(r.maxWidth,n,"clientWidth")||ng,a=ig(r.maxHeight,n,"clientHeight")||ng,c=yV(n,t,e);let{width:f,height:d}=c;if(r.boxSizing==="content-box"){const y=El(r,"border","width"),v=El(r,"padding");f-=v.width+y.width,d-=v.height+y.height}return f=Math.max(0,f-s.width),d=Math.max(0,i?f/i:d-s.height),f=Up(Math.min(f,o,c.maxWidth)),d=Up(Math.min(d,a,c.maxHeight)),f&&!d&&(d=Up(f/2)),(t!==void 0||e!==void 0)&&i&&c.height&&d>c.height&&(d=c.height,f=Up(Math.floor(d*i))),{width:f,height:d}}function LM(n,t,e){const i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const _V=(function(){let n=!1;try{const t={get passive(){return n=!0,!1}};uw()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function kM(n,t){const e=dV(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function fl(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function xV(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function wV(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=fl(n,r,e),a=fl(r,s,e),c=fl(s,t,e),f=fl(o,a,e),d=fl(a,c,e);return fl(f,d,e)}const bV=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},SV=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function lc(n,t,e){return n?bV(t,e):SV()}function FL(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function zL(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function BL(n){return n==="angle"?{between:ML,compare:x4,normalize:ma}:{between:af,compare:(t,e)=>t-e,normalize:t=>t}}function RM({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function MV(n,t,e){const{property:i,start:r,end:s}=e,{between:o,normalize:a}=BL(i),c=t.length;let{start:f,end:d,loop:m}=n,y,v;if(m){for(f+=c,d+=c,y=0,v=c;y<v&&o(a(t[f%c][i]),r,s);++y)f--,d--;f%=c,d%=c}return d<f&&(d+=c),{start:f,end:d,loop:m,style:n.style}}function TV(n,t,e){if(!e)return[n];const{property:i,start:r,end:s}=e,o=t.length,{compare:a,between:c,normalize:f}=BL(i),{start:d,end:m,loop:y,style:v}=MV(n,t,e),w=[];let S=!1,P=null,b,M,R;const O=()=>c(r,R,b)&&a(r,R)!==0,k=()=>a(s,b)===0||c(s,R,b),N=()=>S||O(),D=()=>!S||k();for(let I=d,H=d;I<=m;++I)M=t[I%o],!M.skip&&(b=f(M[i]),b!==R&&(S=c(b,r,s),P===null&&N()&&(P=a(b,r)===0?I:H),P!==null&&D()&&(w.push(RM({start:P,end:I,loop:y,count:o,style:v})),P=null),H=I,R=b));return P!==null&&w.push(RM({start:P,end:m,loop:y,count:o,style:v})),w}function EV(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const s=TV(i[r],n.points,t);s.length&&e.push(...s)}return e}function PV(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}function CV(n,t,e,i){const r=n.length,s=[];let o=t,a=n[t],c;for(c=t+1;c<=e;++c){const f=n[c%r];f.skip||f.stop?a.skip||(i=!1,s.push({start:t%r,end:(c-1)%r,loop:i}),t=o=f.stop?c:null):(o=c,a.skip&&(t=c)),a=f}return o!==null&&s.push({start:t%r,end:o%r,loop:i}),s}function AV(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const s=!!n._loop,{start:o,end:a}=PV(e,r,s,i);if(i===!0)return IM(n,[{start:o,end:a,loop:s}],e,t);const c=a<o?a+r:a,f=!!n._fullLoop&&o===0&&a===r-1;return IM(n,CV(e,o,c,f),e,t)}function IM(n,t,e,i){return!i||!i.setContext||!e?t:LV(n,t,e,i)}function LV(n,t,e,i){const r=n._chart.getContext(),s=DM(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=e.length,f=[];let d=s,m=t[0].start,y=m;function v(w,S,P,b){const M=a?-1:1;if(w!==S){for(w+=c;e[w%c].skip;)w-=M;for(;e[S%c].skip;)S+=M;w%c!==S%c&&(f.push({start:w%c,end:S%c,loop:P,style:b}),d=b,m=S%c)}}for(const w of t){m=a?m:w.start;let S=e[m%c],P;for(y=m+1;y<=w.end;y++){const b=e[y%c];P=DM(i.setContext(Dl(r,{type:"segment",p0:S,p1:b,p0DataIndex:(y-1)%c,p1DataIndex:y%c,datasetIndex:o}))),kV(P,d)&&v(m,y-1,w.loop,d),S=b,d=P}m<y-1&&v(m,y-1,w.loop,d)}return f}function DM(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function kV(n,t){if(!t)return!1;const e=[],i=function(r,s){return iw(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Hp(n,t,e){return n.options.clip?n[e]:t[e]}function RV(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Hp(e,t,"left"),right:Hp(e,t,"right"),top:Hp(i,t,"top"),bottom:Hp(i,t,"bottom")}:t}function IV(n,t){const e=t._clip;if(e.disabled)return!1;const i=RV(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class DV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const s=e.listeners[r],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=EL.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var xo=new DV;const OM="transparent",OV={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=MM(n||OM),r=i.valid&&MM(t||OM);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class NV{constructor(t,e,i,r){const s=e[i];r=Bp([t.to,r,s,t.from]);const o=Bp([t.from,s,r]);this._active=!0,this._fn=t.fn||OV[t.type||typeof o],this._easing=bf[t.easing]||bf.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Bp([t.to,e,r,t.from]),this._from=Bp([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let c;if(this._active=s!==a&&(o||e<i),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=s;return}c=e/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,a,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class VL{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ge(t))return;const e=Object.keys(Dn.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!Ge(s))return;const o={};for(const a of e)o[a]=s[a];(Jn(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,r=zV(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&FV(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const f=o[c];if(f.charAt(0)==="$")continue;if(f==="options"){r.push(...this._animateOptions(t,e));continue}const d=e[f];let m=s[f];const y=i.get(f);if(m)if(y&&m.active()){m.update(y,d,a);continue}else m.cancel();if(!y||!y.duration){t[f]=d;continue}s[f]=m=new NV(y,t,f,d),r.push(m)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return xo.add(this._chart,i),!0}}function FV(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function zV(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function NM(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function BV(n,t,e){if(e===!1)return!1;const i=NM(n,e),r=NM(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function VV(n){let t,e,i,r;return Ge(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function UL(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function FM(n,t,e,i={}){const r=n.keys,s=i.mode==="single";let o,a,c,f;if(t===null)return;let d=!1;for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===e){if(d=!0,i.all)continue;break}f=n.values[c],Gr(f)&&(s||t===0||_c(t)===_c(f))&&(t+=f)}return!d&&!i.all?0:t}function UV(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let c,f,d;for(c=0,f=o.length;c<f;++c)d=o[c],a[c]={[r]:d,[s]:n[d]};return a}function Gv(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function HV(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function jV(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function WV(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function zM(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function BM(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,f=o.axis,d=HV(s,o,i),m=t.length;let y;for(let v=0;v<m;++v){const w=t[v],{[c]:S,[f]:P}=w,b=w._stacks||(w._stacks={});y=b[f]=WV(r,d,S),y[a]=P,y._top=zM(y,o,!0,i.type),y._bottom=zM(y,o,!1,i.type);const M=y._visualValues||(y._visualValues={});M[a]=P}}function $v(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function GV(n,t){return Dl(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function $V(n,t,e){return Dl(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Oh(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const s=r._stacks;if(!s||s[i]===void 0||s[i][e]===void 0)return;delete s[i][e],s[i]._visualValues!==void 0&&s[i]._visualValues[e]!==void 0&&delete s[i]._visualValues[e]}}}const Zv=n=>n==="reset"||n==="none",VM=(n,t)=>t?n:Object.assign({},n),ZV=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:UL(e,!0),values:null};class HL{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Gv(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Oh(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(m,y,v,w)=>m==="x"?y:m==="r"?w:v,s=e.xAxisID=Ve(i.xAxisID,$v(t,"x")),o=e.yAxisID=Ve(i.yAxisID,$v(t,"y")),a=e.rAxisID=Ve(i.rAxisID,$v(t,"r")),c=e.indexAxis,f=e.iAxisID=r(c,s,o,a),d=e.vAxisID=r(c,o,s,a);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(f),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&wM(this._data,this),t._stacked&&Oh(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ge(e)){const r=this._cachedMeta;this._data=UV(e,r)}else if(i!==e){if(i){wM(i,this);const r=this._cachedMeta;Oh(r),r._parsed=[]}e&&Object.isExtensible(e)&&M4(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=e._stacked;e._stacked=Gv(e.vScale,e),e.stack!==i.stack&&(r=!0,Oh(e),e.stack=i.stack),this._resyncElements(t),(r||s!==e._stacked)&&(BM(this,e._parsed),e._stacked=Gv(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let c=t===0&&e===r.length?!0:i._sorted,f=t>0&&i._parsed[t-1],d,m,y;if(this._parsing===!1)i._parsed=r,i._sorted=!0,y=r;else{Jn(r[t])?y=this.parseArrayData(i,r,t,e):Ge(r[t])?y=this.parseObjectData(i,r,t,e):y=this.parsePrimitiveData(i,r,t,e);const v=()=>m[a]===null||f&&m[a]<f[a];for(d=0;d<e;++d)i._parsed[d+t]=m=y[d],c&&(v()&&(c=!1),f=m);i._sorted=c}o&&BM(this,y)}parsePrimitiveData(t,e,i,r){const{iScale:s,vScale:o}=t,a=s.axis,c=o.axis,f=s.getLabels(),d=s===o,m=new Array(r);let y,v,w;for(y=0,v=r;y<v;++y)w=y+i,m[y]={[a]:d||s.parse(f[w],w),[c]:o.parse(e[w],w)};return m}parseArrayData(t,e,i,r){const{xScale:s,yScale:o}=t,a=new Array(r);let c,f,d,m;for(c=0,f=r;c<f;++c)d=c+i,m=e[d],a[c]={x:s.parse(m[0],d),y:o.parse(m[1],d)};return a}parseObjectData(t,e,i,r){const{xScale:s,yScale:o}=t,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,f=new Array(r);let d,m,y,v;for(d=0,m=r;d<m;++d)y=d+i,v=e[y],f[d]={x:s.parse(tg(v,a),y),y:o.parse(tg(v,c),y)};return f}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,s=this._cachedMeta,o=e[t.axis],a={keys:UL(r,!0),values:e._stacks[t.axis]._visualValues};return FM(a,o,s.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const s=i[e.axis];let o=s===null?NaN:s;const a=r&&i._stacks[e.axis];r&&a&&(r.values=a,o=FM(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,o=r.length,a=this._getOtherScale(t),c=ZV(e,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:m}=jV(a);let y,v;function w(){v=r[y];const S=v[a.axis];return!Gr(v[t.axis])||d>S||m<S}for(y=0;y<o&&!(!w()&&(this.updateRangeFromParsed(f,t,v,c),s));++y);if(s){for(y=o-1;y>=0;--y)if(!w()){this.updateRangeFromParsed(f,t,v,c);break}}return f}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=e.length;r<s;++r)o=e[r][t.axis],Gr(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=VV(Ve(this.options.clip,BV(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],s=e.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||r.length-a,f=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(t,s,a,c),d=a;d<a+c;++d){const m=r[d];m.hidden||(m.active&&f?o.push(m):m.draw(t,s))}for(d=0;d<o.length;++d)o[d].draw(t,s)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];s=o.$context||(o.$context=$V(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=GV(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",s=this._cachedDataOpts,o=t+"-"+e,a=s[o],c=this.enableOptionSharing&&eg(i);if(a)return VM(a,c);const f=this.chart.config,d=f.datasetElementScopeKeys(this._type,t),m=r?[`${t}Hover`,"hover",t,""]:[t,""],y=f.getOptionScopes(this.getDataset(),d),v=Object.keys(Dn.elements[t]),w=()=>this.getContext(i,r,e),S=f.resolveNamedOptions(y,v,w,m);return S.$shared&&(S.$shared=c,s[o]=Object.freeze(VM(S,c))),S}_resolveAnimations(t,e,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${e}`,a=s[o];if(a)return a;let c;if(r.options.animation!==!1){const d=this.chart.config,m=d.datasetAnimationScopeKeys(this._type,e),y=d.getOptionScopes(this.getDataset(),m);c=d.createResolver(y,this.getContext(t,i,e))}const f=new VL(r,c&&c.animations);return c&&c._cacheable&&(s[o]=Object.freeze(f)),f}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Zv(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(e,s)||s!==r;return this.updateSharedOptions(s,e,i),{sharedOptions:s,includeOptions:o}}updateElement(t,e,i,r){Zv(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!Zv(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const s=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,c,f]of this._syncList)this[a](c,f);this._syncList=[];const r=i.length,s=e.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,e,i=!0){const r=this._cachedMeta,s=r.data,o=t+e;let a;const c=f=>{for(f.length+=e,a=f.length-1;a>=o;a--)f[a]=f[a-e]};for(c(s),a=t;a<o;++a)s[a]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,e),i&&this.updateElements(s,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Oh(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class qV extends HL{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=e,o=this.chart._animationsDisabled;let{start:a,count:c}=C4(e,r,o);this._drawStart=a,this._drawCount=c,A4(e)&&(a=0,c=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const f=this.resolveDatasetElementOptions(t);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:f},t),this.updateElements(r,a,c,t)}updateElements(t,e,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:f}=this._cachedMeta,{sharedOptions:d,includeOptions:m}=this._getSharedOptions(e,r),y=o.axis,v=a.axis,{spanGaps:w,segment:S}=this.options,P=Wf(w)?w:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||r==="none",M=e+i,R=t.length;let O=e>0&&this.getParsed(e-1);for(let k=0;k<R;++k){const N=t[k],D=b?N:{};if(k<e||k>=M){D.skip=!0;continue}const I=this.getParsed(k),H=un(I[v]),W=D[y]=o.getPixelForValue(I[y],k),U=D[v]=s||H?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,I,c):I[v],k);D.skip=isNaN(W)||isNaN(U)||H,D.stop=k>0&&Math.abs(I[y]-O[y])>P,S&&(D.parsed=I,D.raw=f.data[k]),m&&(D.options=d||this.resolveDataElementOptions(k,N.active?"active":r)),b||this.updateElement(N,k,D,r),O=I}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function al(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hw{static override(t){Object.assign(hw.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return al()}parse(){return al()}format(){return al()}add(){return al()}diff(){return al()}startOf(){return al()}endOf(){return al()}}var XV={_date:hw};function YV(n,t,e,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&s.length){const f=a._reversePixels?b4:xl;if(i){if(r._sharedOptions){const d=s[0],m=typeof d.getRange=="function"&&d.getRange(t);if(m){const y=f(s,t,e-m),v=f(s,t,e+m);return{lo:y.lo,hi:v.hi}}}}else{const d=f(s,t,e);if(c){const{vScale:m}=r._cachedMeta,{_parsed:y}=n,v=y.slice(0,d.lo+1).reverse().findIndex(S=>!un(S[m.axis]));d.lo-=Math.max(0,v);const w=y.slice(d.hi).findIndex(S=>!un(S[m.axis]));d.hi+=Math.max(0,w)}return d}}return{lo:0,hi:s.length-1}}function Lg(n,t,e,i,r){const s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,c=s.length;a<c;++a){const{index:f,data:d}=s[a],{lo:m,hi:y}=YV(s[a],t,o,r);for(let v=m;v<=y;++v){const w=d[v];w.skip||i(w,f,v)}}}function KV(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function qv(n,t,e,i,r){const s=[];return!r&&!n.isPointInArea(t)||Lg(n,e,t,function(a,c,f){!r&&!Gf(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:c,index:f})},!0),s}function JV(n,t,e,i){let r=[];function s(o,a,c){const{startAngle:f,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:m}=_4(o,{x:t.x,y:t.y});ML(m,f,d)&&r.push({element:o,datasetIndex:a,index:c})}return Lg(n,e,t,s),r}function QV(n,t,e,i,r,s){let o=[];const a=KV(e);let c=Number.POSITIVE_INFINITY;function f(d,m,y){const v=d.inRange(t.x,t.y,r);if(i&&!v)return;const w=d.getCenterPoint(r);if(!(!!s||n.isPointInArea(w))&&!v)return;const P=a(t,w);P<c?(o=[{element:d,datasetIndex:m,index:y}],c=P):P===c&&o.push({element:d,datasetIndex:m,index:y})}return Lg(n,e,t,f),o}function Xv(n,t,e,i,r,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!i?JV(n,t,e,r):QV(n,t,e,i,r,s)}function UM(n,t,e,i,r){const s=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return Lg(n,e,t,(c,f,d)=>{c[o]&&c[o](t[e],r)&&(s.push({element:c,datasetIndex:f,index:d}),a=a||c.inRange(t.x,t.y,r))}),i&&!a?[]:s}var tU={modes:{index(n,t,e,i){const r=hl(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?qv(n,r,s,i,o):Xv(n,r,s,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const d=a[0].index,m=f.data[d];m&&!m.skip&&c.push({element:m,datasetIndex:f.index,index:d})}),c):[]},dataset(n,t,e,i){const r=hl(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?qv(n,r,s,i,o):Xv(n,r,s,!1,i,o);if(a.length>0){const c=a[0].datasetIndex,f=n.getDatasetMeta(c).data;a=[];for(let d=0;d<f.length;++d)a.push({element:f[d],datasetIndex:c,index:d})}return a},point(n,t,e,i){const r=hl(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return qv(n,r,s,i,o)},nearest(n,t,e,i){const r=hl(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return Xv(n,r,s,e.intersect,i,o)},x(n,t,e,i){const r=hl(t,n);return UM(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=hl(t,n);return UM(n,r,"y",e.intersect,i)}}};const jL=["left","top","right","bottom"];function Nh(n,t){return n.filter(e=>e.pos===t)}function HM(n,t){return n.filter(e=>jL.indexOf(e.pos)===-1&&e.box.axis===t)}function Fh(n,t){return n.sort((e,i)=>{const r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function eU(n){const t=[];let e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function nU(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:s}=e;if(!i||!jL.includes(r))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function iU(n,t){const e=nU(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:c}=a.box,f=e[a.stack],d=f&&a.stackWeight/f.weight;a.horizontal?(a.width=d?d*i:c&&t.availableWidth,a.height=r):(a.width=i,a.height=d?d*r:c&&t.availableHeight)}return e}function rU(n){const t=eU(n),e=Fh(t.filter(f=>f.box.fullSize),!0),i=Fh(Nh(t,"left"),!0),r=Fh(Nh(t,"right")),s=Fh(Nh(t,"top"),!0),o=Fh(Nh(t,"bottom")),a=HM(t,"x"),c=HM(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:Nh(t,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function jM(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function WL(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function sU(n,t,e,i){const{pos:r,box:s}=e,o=n.maxPadding;if(!Ge(r)){e.size&&(n[r]-=e.size);const m=i[e.stack]||{size:0,count:1};m.size=Math.max(m.size,e.horizontal?s.height:s.width),e.size=m.size/m.count,n[r]+=e.size}s.getPadding&&WL(o,s.getPadding());const a=Math.max(0,t.outerWidth-jM(o,n,"left","right")),c=Math.max(0,t.outerHeight-jM(o,n,"top","bottom")),f=a!==n.w,d=c!==n.h;return n.w=a,n.h=c,e.horizontal?{same:f,other:d}:{same:d,other:f}}function oU(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function aU(n,t){const e=t.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return i(n?["left","right"]:["top","bottom"])}function lf(n,t,e,i){const r=[];let s,o,a,c,f,d;for(s=0,o=n.length,f=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||t.w,a.height||t.h,aU(a.horizontal,t));const{same:m,other:y}=sU(t,e,a,i);f|=m&&r.length,d=d||y,c.fullSize||r.push(a)}return f&&lf(r,t,e,i)||d}function jp(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function WM(n,t,e,i){const r=e.padding;let{x:s,y:o}=t;for(const a of n){const c=a.box,f=i[a.stack]||{placed:0,weight:1},d=a.stackWeight/f.weight||1;if(a.horizontal){const m=t.w*d,y=f.size||c.height;eg(f.start)&&(o=f.start),c.fullSize?jp(c,r.left,o,e.outerWidth-r.right-r.left,y):jp(c,t.left+f.placed,o,m,y),f.start=o,f.placed+=m,o=c.bottom}else{const m=t.h*d,y=f.size||c.width;eg(f.start)&&(s=f.start),c.fullSize?jp(c,s,r.top,y,e.outerHeight-r.bottom-r.top):jp(c,s,t.top+f.placed,y,m),f.start=s,f.placed+=m,s=c.right}}t.x=s,t.y=o}var Hr={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=$r(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=rU(n.boxes),c=a.vertical,f=a.horizontal;Xe(n.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const d=c.reduce((S,P)=>P.box.options&&P.box.options.display===!1?S:S+1,0)||1,m=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),y=Object.assign({},r);WL(y,$r(i));const v=Object.assign({maxPadding:y,w:s,h:o,x:r.left,y:r.top},r),w=iU(c.concat(f),m);lf(a.fullSize,v,m,w),lf(c,v,m,w),lf(f,v,m,w)&&lf(c,v,m,w),oU(v),WM(a.leftAndTop,v,m,w),v.x+=v.w,v.y+=v.h,WM(a.rightAndBottom,v,m,w),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Xe(a.chartArea,S=>{const P=S.box;Object.assign(P,n.chartArea),P.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class GL{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class lU extends GL{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const zm="$chartjs",uU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},GM=n=>n===null||n==="";function cU(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[zm]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",GM(r)){const s=kM(n,"width");s!==void 0&&(n.width=s)}if(GM(i))if(n.style.height==="")n.height=n.width/(t||2);else{const s=kM(n,"height");s!==void 0&&(n.height=s)}return n}const $L=_V?{passive:!0}:!1;function hU(n,t,e){n&&n.addEventListener(t,e,$L)}function fU(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,$L)}function dU(n,t){const e=uU[n.type]||n.type,{x:i,y:r}=hl(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function rg(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function pU(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||rg(a.addedNodes,i),o=o&&!rg(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function mU(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||rg(a.removedNodes,i),o=o&&!rg(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Zf=new Map;let $M=0;function ZL(){const n=window.devicePixelRatio;n!==$M&&($M=n,Zf.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function gU(n,t){Zf.size||window.addEventListener("resize",ZL),Zf.set(n,t)}function yU(n){Zf.delete(n),Zf.size||window.removeEventListener("resize",ZL)}function vU(n,t,e){const i=n.canvas,r=i&&cw(i);if(!r)return;const s=PL((a,c)=>{const f=r.clientWidth;e(a,c),f<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{const c=a[0],f=c.contentRect.width,d=c.contentRect.height;f===0&&d===0||s(f,d)});return o.observe(r),gU(n,s),o}function Yv(n,t,e){e&&e.disconnect(),t==="resize"&&yU(n)}function _U(n,t,e){const i=n.canvas,r=PL(s=>{n.ctx!==null&&e(dU(s,n))},n);return hU(i,t,r),r}class xU extends GL{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(cU(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[zm])return!1;const i=e[zm].initial;["height","width"].forEach(s=>{const o=i[s];un(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[zm],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),o={attach:pU,detach:mU,resize:vU}[e]||_U;r[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:Yv,detach:Yv,resize:Yv}[e]||fU)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return vV(t,e,i,r)}isAttached(t){const e=t&&cw(t);return!!(e&&e.isConnected)}}function wU(n){return!uw()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?lU:xU}let Ol=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Wf(this.x)&&Wf(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function bU(n,t){const e=n.options.ticks,i=SU(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?TU(t):[],o=s.length,a=s[0],c=s[o-1],f=[];if(o>r)return EU(t,f,s,o/r),f;const d=MU(s,t,r);if(o>0){let m,y;const v=o>1?Math.round((c-a)/(o-1)):null;for(Wp(t,f,d,un(v)?0:a-v,a),m=0,y=o-1;m<y;m++)Wp(t,f,d,s[m],s[m+1]);return Wp(t,f,d,c,un(v)?t.length:c+v),f}return Wp(t,f,d),f}function SU(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function MU(n,t,e){const i=PU(n),r=t.length/e;if(!i)return Math.max(r,1);const s=p4(i);for(let o=0,a=s.length-1;o<a;o++){const c=s[o];if(c>r)return c}return Math.max(r,1)}function TU(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function EU(n,t,e,i){let r=0,s=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}function Wp(n,t,e,i,r){const s=Ve(i,0),o=Math.min(Ve(r,n.length),n.length);let a=0,c,f,d;for(e=Math.ceil(e),r&&(c=r-i,e=c/Math.floor(c/e)),d=s;d<0;)a++,d=Math.round(s+a*e);for(f=Math.max(s,0);f<o;f++)f===d&&(t.push(n[f]),a++,d=Math.round(s+a*e))}function PU(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const CU=n=>n==="left"?"right":n==="right"?"left":n,ZM=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,qM=(n,t)=>Math.min(t||n,n);function XM(n,t){const e=[],i=n.length/t,r=n.length;let s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function AU(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let c=n.getPixelForTick(r),f;if(!(e&&(i===1?f=Math.max(c-s,o-c):t===0?f=(n.getPixelForTick(1)-c)/2:f=(c-n.getPixelForTick(r-1))/2,c+=r<t?f:-f,c<s-a||c>o+a)))return c}function LU(n,t){Xe(n,e=>{const i=e.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}function zh(n){return n.drawTicks?n.tickLength:0}function YM(n,t){if(!n.display)return 0;const e=bi(n.font,t),i=$r(n.padding);return(Jn(n.text)?n.text.length:1)*e.lineHeight+i.height}function kU(n,t){return Dl(n,{scale:t,type:"scale"})}function RU(n,t,e){return Dl(n,{tick:e,index:t,type:"tick"})}function IU(n,t,e){let i=nw(n);return(e&&t!=="right"||!e&&t==="right")&&(i=CU(i)),i}function DU(n,t,e,i){const{top:r,left:s,bottom:o,right:a,chart:c}=n,{chartArea:f,scales:d}=c;let m=0,y,v,w;const S=o-r,P=a-s;if(n.isHorizontal()){if(v=_i(i,s,a),Ge(e)){const b=Object.keys(e)[0],M=e[b];w=d[b].getPixelForValue(M)+S-t}else e==="center"?w=(f.bottom+f.top)/2+S-t:w=ZM(n,e,t);y=a-s}else{if(Ge(e)){const b=Object.keys(e)[0],M=e[b];v=d[b].getPixelForValue(M)-P+t}else e==="center"?v=(f.left+f.right)/2-P+t:v=ZM(n,e,t);w=_i(i,o,r),m=e==="left"?-ds:ds}return{titleX:v,titleY:w,maxWidth:y,rotation:m}}class Dc extends Ol{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=As(t,Number.POSITIVE_INFINITY),e=As(e,Number.NEGATIVE_INFINITY),i=As(i,Number.POSITIVE_INFINITY),r=As(r,Number.NEGATIVE_INFINITY),{min:As(t,i),max:As(e,r),minDefined:Gr(t),maxDefined:Gr(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let c=0,f=a.length;c<f;++c)o=a[c].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:As(e,As(i,e)),max:As(i,As(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){dn(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Y4(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?XM(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=bU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){dn(this.options.afterUpdate,[this])}beforeSetDimensions(){dn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){dn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),dn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){dn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=dn(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){dn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){dn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=qM(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation;let o=r,a,c,f;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),m=d.widest.width,y=d.highest.height,v=Ur(this.chart.width-m,0,this.maxWidth);a=t.offset?this.maxWidth/i:v/(i-1),m+6>a&&(a=v/(i-(t.offset?.5:1)),c=this.maxHeight-zh(t.grid)-e.padding-YM(t.title,this.chart.options.font),f=Math.sqrt(m*m+y*y),o=v4(Math.min(Math.asin(Ur((d.highest.height+6)/a,-1,1)),Math.asin(Ur(c/f,-1,1))-Math.asin(Ur(y/f,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){dn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){dn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=YM(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=zh(s)+c):(t.height=this.maxHeight,t.width=zh(s)+c),i.display&&this.ticks.length){const{first:f,last:d,widest:m,highest:y}=this._getLabelSizes(),v=i.padding*2,w=_l(this.labelRotation),S=Math.cos(w),P=Math.sin(w);if(a){const b=i.mirror?0:P*m.width+S*y.height;t.height=Math.min(this.maxHeight,t.height+b+v)}else{const b=i.mirror?0:S*m.width+P*y.height;t.width=Math.min(this.maxWidth,t.width+b+v)}this._calculatePadding(f,d,P,S)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,f=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,v=0;c?f?(y=r*t.width,v=i*e.height):(y=i*t.height,v=r*e.width):s==="start"?v=e.width:s==="end"?y=t.width:s!=="inner"&&(y=t.width/2,v=e.width/2),this.paddingLeft=Math.max((y-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((v-m+o)*this.width/(this.width-m),0)}else{let d=e.height/2,m=t.height/2;s==="start"?(d=0,m=t.height):s==="end"&&(d=e.height,m=0),this.paddingTop=d+o,this.paddingBottom=m+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){dn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)un(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=XM(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(e/qM(e,i));let f=0,d=0,m,y,v,w,S,P,b,M,R,O,k;for(m=0;m<e;m+=c){if(w=t[m].label,S=this._resolveTickFontOptions(m),r.font=P=S.string,b=s[P]=s[P]||{data:{},gc:[]},M=S.lineHeight,R=O=0,!un(w)&&!Jn(w))R=EM(r,b.data,b.gc,R,w),O=M;else if(Jn(w))for(y=0,v=w.length;y<v;++y)k=w[y],!un(k)&&!Jn(k)&&(R=EM(r,b.data,b.gc,R,k),O+=M);o.push(R),a.push(O),f=Math.max(R,f),d=Math.max(O,d)}LU(s,e);const N=o.indexOf(f),D=a.indexOf(d),I=H=>({width:o[H]||0,height:a[H]||0});return{first:I(0),last:I(e-1),widest:I(N),highest:I(D),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return w4(this._alignToPixels?ol(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=RU(this.getContext(),t,i))}return this.$context||(this.$context=kU(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=_l(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,c=s.offset,f=this.isHorizontal(),m=this.ticks.length+(c?1:0),y=zh(s),v=[],w=a.setContext(this.getContext()),S=w.display?w.width:0,P=S/2,b=function(at){return ol(i,at,S)};let M,R,O,k,N,D,I,H,W,U,tt,K;if(o==="top")M=b(this.bottom),D=this.bottom-y,H=M-P,U=b(t.top)+P,K=t.bottom;else if(o==="bottom")M=b(this.top),U=t.top,K=b(t.bottom)-P,D=M+P,H=this.top+y;else if(o==="left")M=b(this.right),N=this.right-y,I=M-P,W=b(t.left)+P,tt=t.right;else if(o==="right")M=b(this.left),W=t.left,tt=b(t.right)-P,N=M+P,I=this.left+y;else if(e==="x"){if(o==="center")M=b((t.top+t.bottom)/2+.5);else if(Ge(o)){const at=Object.keys(o)[0],it=o[at];M=b(this.chart.scales[at].getPixelForValue(it))}U=t.top,K=t.bottom,D=M+P,H=D+y}else if(e==="y"){if(o==="center")M=b((t.left+t.right)/2);else if(Ge(o)){const at=Object.keys(o)[0],it=o[at];M=b(this.chart.scales[at].getPixelForValue(it))}N=M-P,I=N-y,W=t.left,tt=t.right}const Y=Ve(r.ticks.maxTicksLimit,m),rt=Math.max(1,Math.ceil(m/Y));for(R=0;R<m;R+=rt){const at=this.getContext(R),it=s.setContext(at),J=a.setContext(at),pt=it.lineWidth,F=it.color,G=J.dash||[],lt=J.dashOffset,z=it.tickWidth,mt=it.tickColor,_t=it.tickBorderDash||[],nt=it.tickBorderDashOffset;O=AU(this,R,c),O!==void 0&&(k=ol(i,O,pt),f?N=I=W=tt=k:D=H=U=K=k,v.push({tx1:N,ty1:D,tx2:I,ty2:H,x1:W,y1:U,x2:tt,y2:K,width:pt,color:F,borderDash:G,borderDashOffset:lt,tickWidth:z,tickColor:mt,tickBorderDash:_t,tickBorderDashOffset:nt}))}return this._ticksLength=m,this._borderValue=M,v}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:f,padding:d,mirror:m}=s,y=zh(i.grid),v=y+d,w=m?-d:v,S=-_l(this.labelRotation),P=[];let b,M,R,O,k,N,D,I,H,W,U,tt,K="middle";if(r==="top")N=this.bottom-w,D=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+w,D=this._getXAxisLabelAlignment();else if(r==="left"){const rt=this._getYAxisLabelAlignment(y);D=rt.textAlign,k=rt.x}else if(r==="right"){const rt=this._getYAxisLabelAlignment(y);D=rt.textAlign,k=rt.x}else if(e==="x"){if(r==="center")N=(t.top+t.bottom)/2+v;else if(Ge(r)){const rt=Object.keys(r)[0],at=r[rt];N=this.chart.scales[rt].getPixelForValue(at)+v}D=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")k=(t.left+t.right)/2-v;else if(Ge(r)){const rt=Object.keys(r)[0],at=r[rt];k=this.chart.scales[rt].getPixelForValue(at)}D=this._getYAxisLabelAlignment(y).textAlign}e==="y"&&(c==="start"?K="top":c==="end"&&(K="bottom"));const Y=this._getLabelSizes();for(b=0,M=a.length;b<M;++b){R=a[b],O=R.label;const rt=s.setContext(this.getContext(b));I=this.getPixelForTick(b)+s.labelOffset,H=this._resolveTickFontOptions(b),W=H.lineHeight,U=Jn(O)?O.length:1;const at=U/2,it=rt.color,J=rt.textStrokeColor,pt=rt.textStrokeWidth;let F=D;o?(k=I,D==="inner"&&(b===M-1?F=this.options.reverse?"left":"right":b===0?F=this.options.reverse?"right":"left":F="center"),r==="top"?f==="near"||S!==0?tt=-U*W+W/2:f==="center"?tt=-Y.highest.height/2-at*W+W:tt=-Y.highest.height+W/2:f==="near"||S!==0?tt=W/2:f==="center"?tt=Y.highest.height/2-at*W:tt=Y.highest.height-U*W,m&&(tt*=-1),S!==0&&!rt.showLabelBackdrop&&(k+=W/2*Math.sin(S))):(N=I,tt=(1-U)*W/2);let G;if(rt.showLabelBackdrop){const lt=$r(rt.backdropPadding),z=Y.heights[b],mt=Y.widths[b];let _t=tt-lt.top,nt=0-lt.left;switch(K){case"middle":_t-=z/2;break;case"bottom":_t-=z;break}switch(D){case"center":nt-=mt/2;break;case"right":nt-=mt;break;case"inner":b===M-1?nt-=mt:b>0&&(nt-=mt/2);break}G={left:nt,top:_t,width:mt+lt.width,height:z+lt.height,color:rt.backdropColor}}P.push({label:O,font:H,textOffset:tt,options:{rotation:S,color:it,strokeColor:J,strokeWidth:pt,textAlign:F,textBaseline:K,translation:[k,N],backdrop:G}})}return P}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-_l(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,c=o.widest.width;let f,d;return e==="left"?r?(d=this.right+s,i==="near"?f="left":i==="center"?(f="center",d+=c/2):(f="right",d+=c)):(d=this.right-a,i==="near"?f="right":i==="center"?(f="center",d-=c/2):(f="left",d=this.left)):e==="right"?r?(d=this.left+s,i==="near"?f="right":i==="center"?(f="center",d-=c/2):(f="left",d-=c)):(d=this.left+a,i==="near"?f="left":i==="center"?(f="center",d+=c/2):(f="right",d=this.right)):f="right",{textAlign:f,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(c,f,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const c=r[s];e.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let f,d,m,y;this.isHorizontal()?(f=ol(t,this.left,o)-o/2,d=ol(t,this.right,a)+a/2,m=y=c):(m=ol(t,this.top,o)-o/2,y=ol(t,this.bottom,a)+a/2,f=d=c),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(f,m),e.lineTo(d,y),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&rw(i,r);const s=this.getLabelItems(t);for(const o of s){const a=o.options,c=o.font,f=o.label,d=o.textOffset;$f(i,f,0,d,c,a)}r&&sw(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const s=bi(i.font),o=$r(i.padding),a=i.align;let c=s.lineHeight/2;e==="bottom"||e==="center"||Ge(e)?(c+=o.bottom,Jn(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:f,titleY:d,maxWidth:m,rotation:y}=DU(this,c,e,a);$f(t,i.text,0,0,s,{color:i.color,maxWidth:m,rotation:y,textAlign:IU(a,e,r),textBaseline:"middle",translation:[f,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Ve(t.grid&&t.grid.z,-1),r=Ve(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Dc.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return bi(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Gp{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;FU(e)&&(i=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,OU(t,o,i),this.override&&Dn.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in Dn[r]&&(delete Dn[r][i],this.override&&delete Ll[i])}}function OU(n,t,e){const i=jf(Object.create(null),[e?Dn.get(e):{},Dn.get(t),n.defaults]);Dn.set(t,i),n.defaultRoutes&&NU(t,n.defaultRoutes),n.descriptors&&Dn.describe(t,n.descriptors)}function NU(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),c=o.join(".");Dn.route(s,r,c,a)})}function FU(n){return"id"in n&&"defaults"in n}class zU{constructor(){this.controllers=new Gp(HL,"datasets",!0),this.elements=new Gp(Ol,"elements"),this.plugins=new Gp(Object,"plugins"),this.scales=new Gp(Dc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Xe(r,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const r=tw(t);dn(i["before"+r],[],i),e[t](i),dn(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var ks=new zU;class BU{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(const s of t){const o=s.plugin,a=o[i],c=[e,r,s.options];if(dn(a,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){un(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Ve(i.options&&i.options.plugins,{}),s=VU(i);return r===!1&&!e?[]:HU(t,s,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function VU(n){const t={},e=[],i=Object.keys(ks.plugins.items);for(let s=0;s<i.length;s++)e.push(ks.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function UU(n,t){return!t&&n===!1?null:n===!0?{}:n}function HU(n,{plugins:t,localIds:e},i,r){const s=[],o=n.getContext();for(const a of t){const c=a.id,f=UU(i[c],r);f!==null&&s.push({plugin:a,options:jU(n.config,{plugin:a,local:e[c]},f,o)})}return s}function jU(n,{plugin:t,local:e},i,r){const s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ix(n,t){const e=Dn.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function WU(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function GU(n,t){return n===t?"_index_":"_value_"}function KM(n){if(n==="x"||n==="y"||n==="r")return n}function $U(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Dx(n,...t){if(KM(n))return n;for(const e of t){const i=e.axis||$U(e.position)||n.length>1&&KM(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function JM(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function ZU(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return JM(n,"x",e[0])||JM(n,"y",e[0])}return{}}function qU(n,t){const e=Ll[n.type]||{scales:{}},i=t.scales||{},r=Ix(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Ge(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Dx(o,a,ZU(o,n),Dn.scales[a.type]),f=GU(c,r),d=e.scales||{};s[o]=xf(Object.create(null),[{axis:c},a,d[c],d[f]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,c=o.indexAxis||Ix(a,t),d=(Ll[a]||{}).scales||{};Object.keys(d).forEach(m=>{const y=WU(m,c),v=o[y+"AxisID"]||y;s[v]=s[v]||Object.create(null),xf(s[v],[{axis:y},i[v],d[m]])})}),Object.keys(s).forEach(o=>{const a=s[o];xf(a,[Dn.scales[a.type],Dn.scale])}),s}function qL(n){const t=n.options||(n.options={});t.plugins=Ve(t.plugins,{}),t.scales=qU(n,t)}function XL(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function XU(n){return n=n||{},n.data=XL(n.data),qL(n),n}const QM=new Map,YL=new Set;function $p(n,t){let e=QM.get(n);return e||(e=t(),QM.set(n,e),YL.add(e)),e}const Bh=(n,t,e)=>{const i=tg(t,e);i!==void 0&&n.add(i)};class YU{constructor(t){this._config=XU(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=XL(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),qL(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return $p(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return $p(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return $p(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return $p(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const c=new Set;e.forEach(d=>{t&&(c.add(t),d.forEach(m=>Bh(c,t,m))),d.forEach(m=>Bh(c,r,m)),d.forEach(m=>Bh(c,Ll[s]||{},m)),d.forEach(m=>Bh(c,Dn,m)),d.forEach(m=>Bh(c,Lx,m))});const f=Array.from(c);return f.length===0&&f.push(Object.create(null)),YL.has(e)&&o.set(e,f),f}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ll[e]||{},Dn.datasets[e]||{},{type:e},Dn,Lx]}resolveNamedOptions(t,e,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=tT(this._resolverCache,t,r);let c=o;if(JU(o,e)){s.$shared=!1,i=Ea(i)?i():i;const f=this.createResolver(t,i,a);c=xc(o,i,f)}for(const f of e)s[f]=c[f];return s}createResolver(t,e,i=[""],r){const{resolver:s}=tT(this._resolverCache,t,i);return Ge(e)?xc(s,e,void 0,r):s}}function tT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let s=i.get(r);return s||(s={resolver:ow(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const KU=n=>Ge(n)&&Object.getOwnPropertyNames(n).some(t=>Ea(n[t]));function JU(n,t){const{isScriptable:e,isIndexable:i}=RL(n);for(const r of t){const s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(Ea(a)||KU(a))||o&&Jn(a))return!0}return!1}var QU="4.5.0";const t5=["top","bottom","left","right","chartArea"];function eT(n,t){return n==="top"||n==="bottom"||t5.indexOf(n)===-1&&t==="x"}function nT(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function iT(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),dn(e&&e.onComplete,[n],t)}function e5(n){const t=n.chart,e=t.options.animation;dn(e&&e.onProgress,[n],t)}function KL(n){return uw()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Bm={},rT=n=>{const t=KL(n);return Object.values(Bm).filter(e=>e.canvas===t).pop()};function n5(n,t,e){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=t){const o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function i5(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let kg=class{static defaults=Dn;static instances=Bm;static overrides=Ll;static registry=ks;static version=QU;static getChart=rT;static register(...t){ks.add(...t),sT()}static unregister(...t){ks.remove(...t),sT()}constructor(t,e){const i=this.config=new YU(e),r=KL(t),s=rT(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||wU(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),c=a&&a.canvas,f=c&&c.height,d=c&&c.width;if(this.id=s4(),this.ctx=a,this.canvas=c,this.width=d,this.height=f,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new BU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=E4(m=>this.update(m),o.resizeDelay||0),this._dataChanges=[],Bm[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}xo.listen(this,"complete",iT),xo.listen(this,"progress",e5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:s}=this;return un(t)?e&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ks}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():LM(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return PM(this.canvas,this.ctx),this}stop(){return xo.stop(this),this}resize(t,e){xo.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,LM(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),dn(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Xe(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];e&&(s=s.concat(Object.keys(e).map(o=>{const a=e[o],c=Dx(o,a),f=c==="r",d=c==="x";return{options:a,dposition:f?"chartArea":d?"bottom":"left",dtype:f?"radialLinear":d?"category":"linear"}}))),Xe(s,o=>{const a=o.options,c=a.id,f=Dx(c,a),d=Ve(a.type,o.dtype);(a.position===void 0||eT(a.position,f)!==eT(o.dposition))&&(a.position=o.dposition),r[c]=!0;let m=null;if(c in i&&i[c].type===d)m=i[c];else{const y=ks.getScale(d);m=new y({id:c,type:d,ctx:this.ctx,chart:this}),i[m.id]=m}m.init(a,t)}),Xe(r,(o,a)=>{o||delete i[a]}),Xe(i,o=>{Hr.configure(this,o,o.options),Hr.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,s)=>r.index-s.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(nT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const s=e[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Ix(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const c=ks.getController(a),{datasetElementType:f,dataElementType:d}=Dn.datasets[a];Object.assign(c,{dataElementType:ks.getElement(d),datasetElementType:f&&ks.getElement(f)}),o.controller=new c(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Xe(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let f=0,d=this.data.datasets.length;f<d;f++){const{controller:m}=this.getDatasetMeta(f),y=!r&&s.indexOf(m)===-1;m.buildOrUpdateElements(y),o=Math.max(+m.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Xe(s,f=>{f.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(nT("z","_idx"));const{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Xe(this.scales,t=>{Hr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!yM(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of e){const o=i==="_removeElements"?-s:s;n5(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=s=>new Set(t.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<e;s++)if(!yM(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Hr.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Xe(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Ea(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xo.has(this)?this.attached&&!xo.running(this)&&xo.start(this):(this.draw(),iT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,s;for(r=0,s=e.length;r<s;++r){const o=e[r];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=IV(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&rw(e,r),t.controller.draw(),r&&sw(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Gf(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const s=tU.modes[e];return typeof s=="function"?s(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Dl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);eg(e)?(s.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),xo.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),PM(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Bm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Xe(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(c,f)=>{e.addEventListener(this,c,f),t[c]=f},r=(c,f)=>{t[c]&&(e.removeEventListener(this,c,f),delete t[c])},s=(c,f)=>{this.canvas&&this.resize(c,f)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Xe(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Xe(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let s,o,a,c;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,c=t.length;a<c;++a){o=t[a];const f=o&&this.getDatasetMeta(o.datasetIndex).controller;f&&f[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Jm(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,s=(c,f)=>c.filter(d=>!f.some(m=>d.datasetIndex===m.datasetIndex&&d.index===m.index)),o=s(e,t),a=i?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:s}=this,o=e,a=this._getActiveElements(t,r,i,o),c=h4(t),f=i5(t,this._lastEvent,i,c);i&&(this._lastEvent=null,dn(s.onHover,[t,a,this],this),c&&dn(s.onClick,[t,a,this],this));const d=!Jm(a,r);return(d||e)&&(this._active=a,this._updateHoverStyles(a,r,e)),this._lastEvent=f,d}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}};function sT(){return Xe(kg.instances,n=>n._plugins.invalidate())}function JL(n,t,e=t){n.lineCap=Ve(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Ve(e.borderDash,t.borderDash)),n.lineDashOffset=Ve(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Ve(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Ve(e.borderWidth,t.borderWidth),n.strokeStyle=Ve(e.borderColor,t.borderColor)}function r5(n,t,e){n.lineTo(e.x,e.y)}function s5(n){return n.stepped?V4:n.tension||n.cubicInterpolationMode==="monotone"?U4:r5}function QL(n,t,e={}){const i=n.length,{start:r=0,end:s=i-1}=e,{start:o,end:a}=t,c=Math.max(r,o),f=Math.min(s,a),d=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:t.loop,ilen:f<c&&!d?i+f-c:f-c}}function o5(n,t,e,i){const{points:r,options:s}=t,{count:o,start:a,loop:c,ilen:f}=QL(r,e,i),d=s5(s);let{move:m=!0,reverse:y}=i||{},v,w,S;for(v=0;v<=f;++v)w=r[(a+(y?f-v:v))%o],!w.skip&&(m?(n.moveTo(w.x,w.y),m=!1):d(n,S,w,y,s.stepped),S=w);return c&&(w=r[(a+(y?f:0))%o],d(n,S,w,y,s.stepped)),!!c}function a5(n,t,e,i){const r=t.points,{count:s,start:o,ilen:a}=QL(r,e,i),{move:c=!0,reverse:f}=i||{};let d=0,m=0,y,v,w,S,P,b;const M=O=>(o+(f?a-O:O))%s,R=()=>{S!==P&&(n.lineTo(d,P),n.lineTo(d,S),n.lineTo(d,b))};for(c&&(v=r[M(0)],n.moveTo(v.x,v.y)),y=0;y<=a;++y){if(v=r[M(y)],v.skip)continue;const O=v.x,k=v.y,N=O|0;N===w?(k<S?S=k:k>P&&(P=k),d=(m*d+O)/++m):(R(),n.lineTo(O,k),w=N,m=0,S=P=k),b=k}R()}function Ox(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?a5:o5}function l5(n){return n.stepped?xV:n.tension||n.cubicInterpolationMode==="monotone"?wV:fl}function u5(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),JL(n,t.options),n.stroke(r)}function c5(n,t,e,i){const{segments:r,options:s}=t,o=Ox(t);for(const a of r)JL(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const h5=typeof Path2D=="function";function f5(n,t,e,i){h5&&!t.options.segment?u5(n,t,e,i):c5(n,t,e,i)}class d5 extends Ol{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;fV(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=AV(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],s=this.points,o=EV(this,{property:e,start:r,end:r});if(!o.length)return;const a=[],c=l5(i);let f,d;for(f=0,d=o.length;f<d;++f){const{start:m,end:y}=o[f],v=s[m],w=s[y];if(v===w){a.push(v);continue}const S=Math.abs((r-v[e])/(w[e]-v[e])),P=c(v,w,S,i.stepped);P[e]=t[e],a.push(P)}return a.length===1?a[0]:a}pathSegment(t,e,i){return Ox(this)(t,this,e,i)}path(t,e,i){const r=this.segments,s=Ox(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const a of r)o&=s(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),f5(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function oT(n,t,e,i){const r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}class p5 extends Ol{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return oT(this,t,"x",e)}inYRange(t,e){return oT(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!Gf(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,kx(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}const aT=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},m5=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class lT extends Ol{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=dn(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=bi(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=aT(i,s);let f,d;e.font=r.string,this.isHorizontal()?(f=this.maxWidth,d=this._fitRows(o,s,a,c)+10):(d=this.maxHeight,f=this._fitCols(o,r,a,c)+10),this.width=Math.min(f,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],f=this.lineWidths=[0],d=r+a;let m=t;s.textAlign="left",s.textBaseline="middle";let y=-1,v=-d;return this.legendItems.forEach((w,S)=>{const P=i+e/2+s.measureText(w.text).width;(S===0||f[f.length-1]+P+2*a>o)&&(m+=d,f[f.length-(S>0?0:1)]=0,v+=d,y++),c[S]={left:0,top:v,row:y,width:P,height:r},f[f.length-1]+=P+a}),m}_fitCols(t,e,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],f=this.columnSizes=[],d=o-t;let m=a,y=0,v=0,w=0,S=0;return this.legendItems.forEach((P,b)=>{const{itemWidth:M,itemHeight:R}=g5(i,e,s,P,r);b>0&&v+R+2*a>d&&(m+=y+a,f.push({width:y,height:v}),w+=y+a,S++,y=v=0),c[b]={left:w,top:v,col:S,width:M,height:R},y=Math.max(y,M),v+=R+a}),m+=y,f.push({width:y,height:v}),m}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=lc(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=_i(i,this.left+r,this.right-this.lineWidths[a]);for(const f of e)a!==f.row&&(a=f.row,c=_i(i,this.left+r,this.right-this.lineWidths[a])),f.top+=this.top+t+r,f.left=o.leftForLtr(o.x(c),f.width),c+=f.width+r}else{let a=0,c=_i(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const f of e)f.col!==a&&(a=f.col,c=_i(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),f.top=c,f.left+=this.left+r,f.left=o.leftForLtr(o.x(f.left),f.width),c+=f.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;rw(t,this),this._draw(),sw(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=Dn.color,c=lc(t.rtl,this.left,this.width),f=bi(o.font),{padding:d}=o,m=f.size,y=m/2;let v;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=f.string;const{boxWidth:w,boxHeight:S,itemHeight:P}=aT(o,m),b=function(N,D,I){if(isNaN(w)||w<=0||isNaN(S)||S<0)return;r.save();const H=Ve(I.lineWidth,1);if(r.fillStyle=Ve(I.fillStyle,a),r.lineCap=Ve(I.lineCap,"butt"),r.lineDashOffset=Ve(I.lineDashOffset,0),r.lineJoin=Ve(I.lineJoin,"miter"),r.lineWidth=H,r.strokeStyle=Ve(I.strokeStyle,a),r.setLineDash(Ve(I.lineDash,[])),o.usePointStyle){const W={radius:S*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:H},U=c.xPlus(N,w/2),tt=D+y;LL(r,W,U,tt,o.pointStyleWidth&&w)}else{const W=D+Math.max((m-S)/2,0),U=c.leftForLtr(N,w),tt=Mf(I.borderRadius);r.beginPath(),Object.values(tt).some(K=>K!==0)?Rx(r,{x:U,y:W,w,h:S,radius:tt}):r.rect(U,W,w,S),r.fill(),H!==0&&r.stroke()}r.restore()},M=function(N,D,I){$f(r,I.text,N,D+P/2,f,{strikethrough:I.hidden,textAlign:c.textAlign(I.textAlign)})},R=this.isHorizontal(),O=this._computeTitleHeight();R?v={x:_i(s,this.left+d,this.right-i[0]),y:this.top+d+O,line:0}:v={x:this.left+d,y:_i(s,this.top+O+d,this.bottom-e[0].height),line:0},FL(this.ctx,t.textDirection);const k=P+d;this.legendItems.forEach((N,D)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;const I=r.measureText(N.text).width,H=c.textAlign(N.textAlign||(N.textAlign=o.textAlign)),W=w+y+I;let U=v.x,tt=v.y;c.setWidth(this.width),R?D>0&&U+W+d>this.right&&(tt=v.y+=k,v.line++,U=v.x=_i(s,this.left+d,this.right-i[v.line])):D>0&&tt+k>this.bottom&&(U=v.x=U+e[v.line].width+d,v.line++,tt=v.y=_i(s,this.top+O+d,this.bottom-e[v.line].height));const K=c.x(U);if(b(K,tt,N),U=P4(H,U+w+y,R?U+W:this.right,t.rtl),M(c.x(U),tt,N),R)v.x+=W+d;else if(typeof N.text!="string"){const Y=f.lineHeight;v.y+=tk(N,Y)+d}else v.y+=k}),zL(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=bi(e.font),r=$r(e.padding);if(!e.display)return;const s=lc(t.rtl,this.left,this.width),o=this.ctx,a=e.position,c=i.size/2,f=r.top+c;let d,m=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),d=this.top+f,m=_i(t.align,m,this.right-y);else{const w=this.columnSizes.reduce((S,P)=>Math.max(S,P.height),0);d=f+_i(t.align,this.top,this.bottom-w-t.labels.padding-this._computeTitleHeight())}const v=_i(a,m,m+y);o.textAlign=s.textAlign(nw(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,$f(o,e.text,v,d,i)}_computeTitleHeight(){const t=this.options.title,e=bi(t.font),i=$r(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(af(t,this.left,this.right)&&af(e,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],af(t,r.left,r.left+r.width)&&af(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!_5(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,s=m5(r,i);r&&!s&&dn(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&dn(e.onHover,[t,i,this],this)}else i&&dn(e.onClick,[t,i,this],this)}}function g5(n,t,e,i,r){const s=y5(i,n,t,e),o=v5(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}function y5(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}function v5(n,t,e){let i=n;return typeof t.text!="string"&&(i=tk(t,e)),i}function tk(n,t){const e=n.text?n.text.length:0;return t*e}function _5(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var x5={id:"legend",_element:lT,start(n,t,e){const i=n.legend=new lT({ctx:n.ctx,options:e,chart:n});Hr.configure(n,i,e),Hr.addBox(n,i)},stop(n){Hr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Hr.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const f=c.controller.getStyle(e?0:void 0),d=$r(f.borderWidth);return{text:t[c.index].label,fillStyle:f.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:r||f.textAlign,borderRadius:o&&(a||f.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class ek extends Ol{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=Jn(i.text)?i.text.length:1;this._padding=$r(i.padding);const s=r*bi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:s,options:o}=this,a=o.align;let c=0,f,d,m;return this.isHorizontal()?(d=_i(a,i,s),m=e+t,f=s-i):(o.position==="left"?(d=i+t,m=_i(a,r,e),c=ti*-.5):(d=s-t,m=_i(a,e,r),c=ti*.5),f=r-e),{titleX:d,titleY:m,maxWidth:f,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=bi(e.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:f}=this._drawArgs(s);$f(t,e.text,0,0,i,{color:e.color,maxWidth:c,rotation:f,textAlign:nw(e.align),textBaseline:"middle",translation:[o,a]})}}function w5(n,t){const e=new ek({ctx:n.ctx,options:t,chart:n});Hr.configure(n,e,t),Hr.addBox(n,e),n.titleBlock=e}var b5={id:"title",_element:ek,start(n,t,e){w5(n,e)},stop(n){const t=n.titleBlock;Hr.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Hr.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const uf={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const c=a.tooltipPosition();i.add(c.x),r+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const c=n[s].element;if(c&&c.hasValue()){const f=c.getCenterPoint(),d=Ax(t,f);d<r&&(r=d,a=c)}}if(a){const c=a.tooltipPosition();e=c.x,i=c.y}return{x:e,y:i}}};function Ls(n,t){return t&&(Jn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function wo(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function S5(n,t){const{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function uT(n,t){const e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=t,c=bi(t.bodyFont),f=bi(t.titleFont),d=bi(t.footerFont),m=s.length,y=r.length,v=i.length,w=$r(t.padding);let S=w.height,P=0,b=i.reduce((O,k)=>O+k.before.length+k.lines.length+k.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,m&&(S+=m*f.lineHeight+(m-1)*t.titleSpacing+t.titleMarginBottom),b){const O=t.displayColors?Math.max(a,c.lineHeight):c.lineHeight;S+=v*O+(b-v)*c.lineHeight+(b-1)*t.bodySpacing}y&&(S+=t.footerMarginTop+y*d.lineHeight+(y-1)*t.footerSpacing);let M=0;const R=function(O){P=Math.max(P,e.measureText(O).width+M)};return e.save(),e.font=f.string,Xe(n.title,R),e.font=c.string,Xe(n.beforeBody.concat(n.afterBody),R),M=t.displayColors?o+2+t.boxPadding:0,Xe(i,O=>{Xe(O.before,R),Xe(O.lines,R),Xe(O.after,R)}),M=0,e.font=d.string,Xe(n.footer,R),e.restore(),P+=w.width,{width:P,height:S}}function M5(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function T5(n,t,e,i){const{x:r,width:s}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&r+s+o>t.width||n==="right"&&r-s-o<0)return!0}function E5(n,t,e,i){const{x:r,width:s}=e,{width:o,chartArea:{left:a,right:c}}=n;let f="center";return i==="center"?f=r<=(a+c)/2?"left":"right":r<=s/2?f="left":r>=o-s/2&&(f="right"),T5(f,n,t,e)&&(f="center"),f}function cT(n,t,e){const i=e.yAlign||t.yAlign||M5(n,e);return{xAlign:e.xAlign||t.xAlign||E5(n,t,e,i),yAlign:i}}function P5(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function C5(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function hT(n,t,e,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=e,f=r+s,{topLeft:d,topRight:m,bottomLeft:y,bottomRight:v}=Mf(o);let w=P5(t,a);const S=C5(t,c,f);return c==="center"?a==="left"?w+=f:a==="right"&&(w-=f):a==="left"?w-=Math.max(d,y)+r:a==="right"&&(w+=Math.max(m,v)+r),{x:Ur(w,0,i.width-t.width),y:Ur(S,0,i.height-t.height)}}function Zp(n,t,e){const i=$r(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function fT(n){return Ls([],wo(n))}function A5(n,t,e){return Dl(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function dT(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const nk={beforeTitle:po,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:po,beforeBody:po,beforeLabel:po,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return un(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:po,afterBody:po,beforeFooter:po,footer:po,afterFooter:po};function Zi(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?nk[t].call(e,i):r}class pT extends Ol{static positioners=uf;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,s=new VL(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=A5(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=Zi(i,"beforeTitle",this,t),s=Zi(i,"title",this,t),o=Zi(i,"afterTitle",this,t);let a=[];return a=Ls(a,wo(r)),a=Ls(a,wo(s)),a=Ls(a,wo(o)),a}getBeforeBody(t,e){return fT(Zi(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return Xe(t,s=>{const o={before:[],lines:[],after:[]},a=dT(i,s);Ls(o.before,wo(Zi(a,"beforeLabel",this,s))),Ls(o.lines,Zi(a,"label",this,s)),Ls(o.after,wo(Zi(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(t,e){return fT(Zi(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=Zi(i,"beforeFooter",this,t),s=Zi(i,"footer",this,t),o=Zi(i,"afterFooter",this,t);let a=[];return a=Ls(a,wo(r)),a=Ls(a,wo(s)),a=Ls(a,wo(o)),a}_createItems(t){const e=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],c,f;for(c=0,f=e.length;c<f;++c)a.push(S5(this.chart,e[c]));return t.filter&&(a=a.filter((d,m,y)=>t.filter(d,m,y,i))),t.itemSort&&(a=a.sort((d,m)=>t.itemSort(d,m,i))),Xe(a,d=>{const m=dT(t.callbacks,d);r.push(Zi(m,"labelColor",this,d)),s.push(Zi(m,"labelPointStyle",this,d)),o.push(Zi(m,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=uf[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const c=this._size=uT(this,i),f=Object.assign({},a,c),d=cT(this.chart,i,f),m=hT(i,f,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const s=this.getCaretPosition(t,i,r);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:c,topRight:f,bottomLeft:d,bottomRight:m}=Mf(a),{x:y,y:v}=t,{width:w,height:S}=e;let P,b,M,R,O,k;return s==="center"?(O=v+S/2,r==="left"?(P=y,b=P-o,R=O+o,k=O-o):(P=y+w,b=P+o,R=O-o,k=O+o),M=P):(r==="left"?b=y+Math.max(c,d)+o:r==="right"?b=y+w-Math.max(f,m)-o:b=this.caretX,s==="top"?(R=v,O=R-o,P=b-o,M=b+o):(R=v+S,O=R+o,P=b+o,M=b-o),k=R),{x1:P,x2:b,x3:M,y1:R,y2:O,y3:k}}drawTitle(t,e,i){const r=this.title,s=r.length;let o,a,c;if(s){const f=lc(i.rtl,this.x,this.width);for(t.x=Zp(this,i.titleAlign,i),e.textAlign=f.textAlign(i.titleAlign),e.textBaseline="middle",o=bi(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,c=0;c<s;++c)e.fillText(r[c],f.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,c+1===s&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:c,boxWidth:f}=s,d=bi(s.bodyFont),m=Zp(this,"left",s),y=r.x(m),v=c<d.lineHeight?(d.lineHeight-c)/2:0,w=e.y+v;if(s.usePointStyle){const S={radius:Math.min(f,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},P=r.leftForLtr(y,f)+f/2,b=w+c/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,kx(t,S,P,b),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,kx(t,S,P,b)}else{t.lineWidth=Ge(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const S=r.leftForLtr(y,f),P=r.leftForLtr(r.xPlus(y,1),f-2),b=Mf(o.borderRadius);Object.values(b).some(M=>M!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Rx(t,{x:S,y:w,w:f,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Rx(t,{x:P,y:w+1,w:f-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(S,w,f,c),t.strokeRect(S,w,f,c),t.fillStyle=o.backgroundColor,t.fillRect(P,w+1,f-2,c-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:f,boxPadding:d}=i,m=bi(i.bodyFont);let y=m.lineHeight,v=0;const w=lc(i.rtl,this.x,this.width),S=function(I){e.fillText(I,w.x(t.x+v),t.y+y/2),t.y+=y+s},P=w.textAlign(o);let b,M,R,O,k,N,D;for(e.textAlign=o,e.textBaseline="middle",e.font=m.string,t.x=Zp(this,P,i),e.fillStyle=i.bodyColor,Xe(this.beforeBody,S),v=a&&P!=="right"?o==="center"?f/2+d:f+2+d:0,O=0,N=r.length;O<N;++O){for(b=r[O],M=this.labelTextColors[O],e.fillStyle=M,Xe(b.before,S),R=b.lines,a&&R.length&&(this._drawColorBox(e,t,O,w,i),y=Math.max(m.lineHeight,c)),k=0,D=R.length;k<D;++k)S(R[k]),y=m.lineHeight;Xe(b.after,S)}v=0,y=m.lineHeight,Xe(this.afterBody,S),t.y-=s}drawFooter(t,e,i){const r=this.footer,s=r.length;let o,a;if(s){const c=lc(i.rtl,this.x,this.width);for(t.x=Zp(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=c.textAlign(i.footerAlign),e.textBaseline="middle",o=bi(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<s;++a)e.fillText(r[a],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:c}=t,{width:f,height:d}=i,{topLeft:m,topRight:y,bottomLeft:v,bottomRight:w}=Mf(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(a+m,c),o==="top"&&this.drawCaret(t,e,i,r),e.lineTo(a+f-y,c),e.quadraticCurveTo(a+f,c,a+f,c+y),o==="center"&&s==="right"&&this.drawCaret(t,e,i,r),e.lineTo(a+f,c+d-w),e.quadraticCurveTo(a+f,c+d,a+f-w,c+d),o==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(a+v,c+d),e.quadraticCurveTo(a,c+d,a,c+d-v),o==="center"&&s==="left"&&this.drawCaret(t,e,i,r),e.lineTo(a,c+m),e.quadraticCurveTo(a,c,a+m,c),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=uf[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=uT(this,t),c=Object.assign({},o,this._size),f=cT(e,t,c),d=hT(t,c,f,e);(r._to!==d.x||s._to!==d.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=$r(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,r,e),FL(t,e.textDirection),s.y+=o.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),zL(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:a,index:c})=>{const f=this.chart.getDatasetMeta(a);if(!f)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:f.data[c],index:c}}),s=!Jm(i,r),o=this._positionChanged(r,e);(s||o)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(t,s,e,i),a=this._positionChanged(o,t),c=e||!Jm(o,s)||a;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),c}_getActiveElements(t,e,i,r){const s=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:r,options:s}=this,o=uf[s.position].call(this,t,e);return o!==!1&&(i!==o.x||r!==o.y)}}var L5={id:"tooltip",_element:pT,positioners:uf,afterInit(n,t,e){e&&(n.tooltip=new pT({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const k5=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function R5(n,t,e,i){const r=n.indexOf(t);if(r===-1)return k5(n,t,e,i);const s=n.lastIndexOf(t);return r!==s?e:r}const I5=(n,t)=>n===null?null:Ur(Math.round(n),0,t);function mT(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class D5 extends Dc{static id="category";static defaults={ticks:{callback:mT}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:s}of e)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(un(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:R5(i,t,Ve(e,t),this._addedLabels),I5(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){return mT.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function O5(n,t){const e=[],{bounds:r,step:s,min:o,max:a,precision:c,count:f,maxTicks:d,maxDigits:m,includeBounds:y}=n,v=s||1,w=d-1,{min:S,max:P}=t,b=!un(o),M=!un(a),R=!un(f),O=(P-S)/(m+1);let k=_M((P-S)/w/v)*v,N,D,I,H;if(k<1e-14&&!b&&!M)return[{value:S},{value:P}];H=Math.ceil(P/k)-Math.floor(S/k),H>w&&(k=_M(H*k/w/v)*v),un(c)||(N=Math.pow(10,c),k=Math.ceil(k*N)/N),r==="ticks"?(D=Math.floor(S/k)*k,I=Math.ceil(P/k)*k):(D=S,I=P),b&&M&&s&&g4((a-o)/s,k/1e3)?(H=Math.round(Math.min((a-o)/k,d)),k=(a-o)/H,D=o,I=a):R?(D=b?o:D,I=M?a:I,H=f-1,k=(I-D)/H):(H=(I-D)/k,wf(H,Math.round(H),k/1e3)?H=Math.round(H):H=Math.ceil(H));const W=Math.max(xM(k),xM(D));N=Math.pow(10,un(c)?W:c),D=Math.round(D*N)/N,I=Math.round(I*N)/N;let U=0;for(b&&(y&&D!==o?(e.push({value:o}),D<o&&U++,wf(Math.round((D+U*k)*N)/N,o,gT(o,O,n))&&U++):D<o&&U++);U<H;++U){const tt=Math.round((D+U*k)*N)/N;if(M&&tt>a)break;e.push({value:tt})}return M&&y&&I!==a?e.length&&wf(e[e.length-1].value,a,gT(a,O,n))?e[e.length-1].value=a:e.push({value:a}):(!M||I===a)&&e.push({value:I}),e}function gT(n,t,{horizontal:e,minRotation:i}){const r=_l(i),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+n).length;return Math.min(t/s,o)}class N5 extends Dc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return un(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=c=>r=e?r:c,a=c=>s=i?s:c;if(t){const c=_c(r),f=_c(s);c<0&&f<0?a(0):c>0&&f>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);a(s+c),t||o(r-c)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=O5(r,s);return t.bounds==="ticks"&&y4(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return CL(t,this.chart.options.locale,this.options.ticks.format)}}class F5 extends N5{static id="linear";static defaults={ticks:{callback:AL.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Gr(t)?t:0,this.max=Gr(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=_l(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Rg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xi=Object.keys(Rg);function yT(n,t){return n-t}function vT(n,t){if(un(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),Gr(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(Wf(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function _T(n,t,e,i){const r=Xi.length;for(let s=Xi.indexOf(n);s<r-1;++s){const o=Rg[Xi[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return Xi[s]}return Xi[r-1]}function z5(n,t,e,i,r){for(let s=Xi.length-1;s>=Xi.indexOf(e);s--){const o=Xi[s];if(Rg[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return Xi[e?Xi.indexOf(e):0]}function B5(n){for(let t=Xi.indexOf(n)+1,e=Xi.length;t<e;++t)if(Rg[Xi[t]].common)return Xi[t]}function xT(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=ew(e,t),s=e[i]>=t?e[i]:e[r];n[s]=!0}}function V5(n,t,e,i){const r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=e[a],c>=0&&(t[c].major=!0);return t}function wT(n,t,e){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return s===0||!e?i:V5(n,i,r,e)}class bT extends Dc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new XV._date(t.adapters.date);r.init(e),xf(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:vT(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function c(f){!o&&!isNaN(f.min)&&(r=Math.min(r,f.min)),!a&&!isNaN(f.max)&&(s=Math.max(s,f.max))}(!o||!a)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Gr(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),s=Gr(s)&&!isNaN(s)?s:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=S4(r,s,o);return this._unit=e.unit||(i.autoSkip?_T(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):z5(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:B5(this._unit),this.initOffsets(r),t.reverse&&a.reverse(),wT(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=Ur(e,0,o),i=Ur(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||_T(s.minUnit,e,i,this._getLabelCapacity(e)),a=Ve(r.ticks.stepSize,1),c=o==="week"?s.isoWeekday:!1,f=Wf(c)||c===!0,d={};let m=e,y,v;if(f&&(m=+t.startOf(m,"isoWeek",c)),m=+t.startOf(m,f?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(y=m,v=0;y<i;y=+t.add(y,a,o),v++)xT(d,y,w);return(y===i||r.bounds==="ticks"||v===1)&&xT(d,y,w),Object.keys(d).sort(yT).map(S=>+S)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,s=this._unit,o=e||r[s];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,r){const s=this.options,o=s.ticks.callback;if(o)return dn(o,[t,e,i],this);const a=s.time.displayFormats,c=this._unit,f=this._majorUnit,d=c&&a[c],m=f&&a[f],y=i[e],v=f&&m&&y&&y.major;return this._adapter.format(t,r||(v?m:d))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=_l(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,s=this._tickFormatFunction(t,0,wT(this,[t],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(vT(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return T4(t.sort(yT))}}function qp(n,t,e){let i=0,r=n.length-1,s,o,a,c;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=xl(n,"pos",t)),{pos:s,time:a}=n[i],{pos:o,time:c}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=xl(n,"time",t)),{time:s,pos:a}=n[i],{time:o,pos:c}=n[r]);const f=o-s;return f?a+(c-a)*(t-s)/f:a}class RK extends bT{static id="timeseries";static defaults=bT.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=qp(e,this.min),this._tableRange=qp(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],s=[];let o,a,c,f,d;for(o=0,a=t.length;o<a;++o)f=t[o],f>=e&&f<=i&&r.push(f);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)d=r[o+1],c=r[o-1],f=r[o],Math.round((d+c)/2)!==f&&s.push({time:f,pos:o/(a-1)});return s}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(qp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return qp(this._table,i*this._tableRange+this._minPos,!0)}}const ik="label";function ST(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function U5(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function rk(n,t){n.labels=t}function sk(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ik;const i=[];n.datasets=t.map(r=>{const s=n.datasets.find(o=>o[e]===r[e]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function H5(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ik;const e={labels:[],datasets:[]};return rk(e,n.labels),sk(e,n.datasets,t),e}function j5(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:c,plugins:f=[],fallbackContent:d,updateMode:m,...y}=n,v=Q.useRef(null),w=Q.useRef(null),S=()=>{v.current&&(w.current=new kg(v.current,{type:o,data:H5(a,s),options:c&&{...c},plugins:f}),ST(t,w.current))},P=()=>{ST(t,null),w.current&&(w.current.destroy(),w.current=null)};return Q.useEffect(()=>{!r&&w.current&&c&&U5(w.current,c)},[r,c]),Q.useEffect(()=>{!r&&w.current&&rk(w.current.config.data,a.labels)},[r,a.labels]),Q.useEffect(()=>{!r&&w.current&&a.datasets&&sk(w.current.config.data,a.datasets,s)},[r,a.datasets]),Q.useEffect(()=>{w.current&&(r?(P(),setTimeout(S)):w.current.update(m))},[r,c,a.labels,a.datasets,m]),Q.useEffect(()=>{w.current&&(P(),setTimeout(S))},[o]),Q.useEffect(()=>(S(),()=>P()),[]),vn.createElement("canvas",{ref:v,role:"img",height:e,width:i,...y},d)}const W5=Q.forwardRef(j5);function G5(n,t){return kg.register(t),Q.forwardRef((e,i)=>vn.createElement(W5,{...e,ref:i,type:n}))}const $5=G5("line",qV);kg.register(D5,F5,p5,d5,b5,L5,x5);function Z5({curves:n}){if(!n)return B.jsx("p",{children:"Tidak ada data curve"});const e={datasets:n.map(r=>({label:`T = ${r.period}s`,data:r.points.map(s=>({x:s.im,y:s.prob})),borderColor:"rgba(59,130,246,1)",backgroundColor:"rgba(59,130,246,0.2)",fill:!1}))},i={responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{type:"linear",title:{display:!0,text:"IML (g)"}},y:{type:"linear",title:{display:!0,text:"Prob Exceed"}}}};return B.jsx($5,{data:e,options:i})}function q5({curves:n}){return n?B.jsxs("table",{className:"w-full border",children:[B.jsx("thead",{children:B.jsxs("tr",{className:"bg-gray-100",children:[B.jsx("th",{className:"border p-2",children:"Period (s)"}),B.jsx("th",{className:"border p-2",children:"IML"}),B.jsx("th",{className:"border p-2",children:"Prob"})]})}),B.jsx("tbody",{children:n.map(t=>t.points.map((e,i)=>B.jsxs("tr",{children:[B.jsx("td",{className:"border p-2 text-center",children:t.period}),B.jsx("td",{className:"border p-2 text-center",children:e.im}),B.jsx("td",{className:"border p-2 text-center",children:e.prob})]},`${t.period}-${i}`)))})]}):B.jsx("p",{children:"Tidak ada data tabel"})}var Vm={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var X5=Vm.exports,MT;function Y5(){return MT||(MT=1,(function(n,t){((e,i)=>{n.exports=i()})(X5,function e(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r,s=!i.document&&!!i.postMessage,o=i.IS_PAPA_WORKER||!1,a={},c=0,f={};function d(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(H){var W=k(H);W.chunkSize=parseInt(W.chunkSize),H.step||H.chunk||(W.chunkSize=null),this._handle=new S(W),(this._handle.streamer=this)._config=W}).call(this,I),this.parseChunk=function(H,W){var U=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<U){let K=this._config.newline;K||(tt=this._config.quoteChar||'"',K=this._handle.guessLineEndings(H,tt)),H=[...H.split(K).slice(U)].join(K)}this.isFirstChunk&&D(this._config.beforeFirstChunk)&&(tt=this._config.beforeFirstChunk(H))!==void 0&&(H=tt),this.isFirstChunk=!1,this._halted=!1;var U=this._partialLine+H,tt=(this._partialLine="",this._handle.parse(U,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(H=tt.meta.cursor,U=(this._finished||(this._partialLine=U.substring(H-this._baseIndex),this._baseIndex=H),tt&&tt.data&&(this._rowCount+=tt.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)i.postMessage({results:tt,workerId:f.WORKER_ID,finished:U});else if(D(this._config.chunk)&&!W){if(this._config.chunk(tt,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=tt=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(tt.data),this._completeResults.errors=this._completeResults.errors.concat(tt.errors),this._completeResults.meta=tt.meta),this._completed||!U||!D(this._config.complete)||tt&&tt.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),U||tt&&tt.meta.paused||this._nextChunk(),tt}this._halted=!0},this._sendError=function(H){D(this._config.error)?this._config.error(H):o&&this._config.error&&i.postMessage({workerId:f.WORKER_ID,error:H,finished:!1})}}function m(I){var H;(I=I||{}).chunkSize||(I.chunkSize=f.RemoteChunkSize),d.call(this,I),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(W){this._input=W,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(H=new XMLHttpRequest,this._config.withCredentials&&(H.withCredentials=this._config.withCredentials),s||(H.onload=N(this._chunkLoaded,this),H.onerror=N(this._chunkError,this)),H.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var W,U=this._config.downloadRequestHeaders;for(W in U)H.setRequestHeader(W,U[W])}var tt;this._config.chunkSize&&(tt=this._start+this._config.chunkSize-1,H.setRequestHeader("Range","bytes="+this._start+"-"+tt));try{H.send(this._config.downloadRequestBody)}catch(K){this._chunkError(K.message)}s&&H.status===0&&this._chunkError()}},this._chunkLoaded=function(){H.readyState===4&&(H.status<200||400<=H.status?this._chunkError():(this._start+=this._config.chunkSize||H.responseText.length,this._finished=!this._config.chunkSize||this._start>=(W=>(W=W.getResponseHeader("Content-Range"))!==null?parseInt(W.substring(W.lastIndexOf("/")+1)):-1)(H),this.parseChunk(H.responseText)))},this._chunkError=function(W){W=H.statusText||W,this._sendError(new Error(W))}}function y(I){(I=I||{}).chunkSize||(I.chunkSize=f.LocalChunkSize),d.call(this,I);var H,W,U=typeof FileReader<"u";this.stream=function(tt){this._input=tt,W=tt.slice||tt.webkitSlice||tt.mozSlice,U?((H=new FileReader).onload=N(this._chunkLoaded,this),H.onerror=N(this._chunkError,this)):H=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var tt=this._input,K=(this._config.chunkSize&&(K=Math.min(this._start+this._config.chunkSize,this._input.size),tt=W.call(tt,this._start,K)),H.readAsText(tt,this._config.encoding));U||this._chunkLoaded({target:{result:K}})},this._chunkLoaded=function(tt){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(tt.target.result)},this._chunkError=function(){this._sendError(H.error)}}function v(I){var H;d.call(this,I=I||{}),this.stream=function(W){return H=W,this._nextChunk()},this._nextChunk=function(){var W,U;if(!this._finished)return W=this._config.chunkSize,H=W?(U=H.substring(0,W),H.substring(W)):(U=H,""),this._finished=!H,this.parseChunk(U)}}function w(I){d.call(this,I=I||{});var H=[],W=!0,U=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(tt){this._input=tt,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){U&&H.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),H.length?this.parseChunk(H.shift()):W=!0},this._streamData=N(function(tt){try{H.push(typeof tt=="string"?tt:tt.toString(this._config.encoding)),W&&(W=!1,this._checkIsFinished(),this.parseChunk(H.shift()))}catch(K){this._streamError(K)}},this),this._streamError=N(function(tt){this._streamCleanUp(),this._sendError(tt)},this),this._streamEnd=N(function(){this._streamCleanUp(),U=!0,this._streamData("")},this),this._streamCleanUp=N(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function S(I){var H,W,U,tt,K=Math.pow(2,53),Y=-K,rt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,at=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,it=this,J=0,pt=0,F=!1,G=!1,lt=[],z={data:[],errors:[],meta:{}};function mt(At){return I.skipEmptyLines==="greedy"?At.join("").trim()==="":At.length===1&&At[0].length===0}function _t(){if(z&&U&&(Ot("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),U=!1),I.skipEmptyLines&&(z.data=z.data.filter(function(bt){return!mt(bt)})),nt()){let bt=function(Rt,Dt){D(I.transformHeader)&&(Rt=I.transformHeader(Rt,Dt)),lt.push(Rt)};var jt=bt;if(z)if(Array.isArray(z.data[0])){for(var At=0;nt()&&At<z.data.length;At++)z.data[At].forEach(bt);z.data.splice(0,1)}else z.data.forEach(bt)}function kt(bt,Rt){for(var Dt=I.header?{}:[],Wt=0;Wt<bt.length;Wt++){var It=Wt,X=bt[Wt],X=(($,wt)=>(Lt=>(I.dynamicTypingFunction&&I.dynamicTyping[Lt]===void 0&&(I.dynamicTyping[Lt]=I.dynamicTypingFunction(Lt)),(I.dynamicTyping[Lt]||I.dynamicTyping)===!0))($)?wt==="true"||wt==="TRUE"||wt!=="false"&&wt!=="FALSE"&&((Lt=>{if(rt.test(Lt)&&(Lt=parseFloat(Lt),Y<Lt&&Lt<K))return 1})(wt)?parseFloat(wt):at.test(wt)?new Date(wt):wt===""?null:wt):wt)(It=I.header?Wt>=lt.length?"__parsed_extra":lt[Wt]:It,X=I.transform?I.transform(X,It):X);It==="__parsed_extra"?(Dt[It]=Dt[It]||[],Dt[It].push(X)):Dt[It]=X}return I.header&&(Wt>lt.length?Ot("FieldMismatch","TooManyFields","Too many fields: expected "+lt.length+" fields but parsed "+Wt,pt+Rt):Wt<lt.length&&Ot("FieldMismatch","TooFewFields","Too few fields: expected "+lt.length+" fields but parsed "+Wt,pt+Rt)),Dt}var Ft;z&&(I.header||I.dynamicTyping||I.transform)&&(Ft=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(kt),Ft=z.data.length):z.data=kt(z.data,0),I.header&&z.meta&&(z.meta.fields=lt),pt+=Ft)}function nt(){return I.header&&lt.length===0}function Ot(At,kt,Ft,jt){At={type:At,code:kt,message:Ft},jt!==void 0&&(At.row=jt),z.errors.push(At)}D(I.step)&&(tt=I.step,I.step=function(At){z=At,nt()?_t():(_t(),z.data.length!==0&&(J+=At.data.length,I.preview&&J>I.preview?W.abort():(z.data=z.data[0],tt(z,it))))}),this.parse=function(At,kt,Ft){var jt=I.quoteChar||'"',jt=(I.newline||(I.newline=this.guessLineEndings(At,jt)),U=!1,I.delimiter?D(I.delimiter)&&(I.delimiter=I.delimiter(At),z.meta.delimiter=I.delimiter):((jt=((bt,Rt,Dt,Wt,It)=>{var X,$,wt,Lt;It=It||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var $t=0;$t<It.length;$t++){for(var Kt,re=It[$t],Jt=0,se=0,ft=0,q=(wt=void 0,new b({comments:Wt,delimiter:re,newline:Rt,preview:10}).parse(bt)),Pt=0;Pt<q.data.length;Pt++)Dt&&mt(q.data[Pt])?ft++:(Kt=q.data[Pt].length,se+=Kt,wt===void 0?wt=Kt:0<Kt&&(Jt+=Math.abs(Kt-wt),wt=Kt));0<q.data.length&&(se/=q.data.length-ft),($===void 0||Jt<=$)&&(Lt===void 0||Lt<se)&&1.99<se&&($=Jt,X=re,Lt=se)}return{successful:!!(I.delimiter=X),bestDelimiter:X}})(At,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess)).successful?I.delimiter=jt.bestDelimiter:(U=!0,I.delimiter=f.DefaultDelimiter),z.meta.delimiter=I.delimiter),k(I));return I.preview&&I.header&&jt.preview++,H=At,W=new b(jt),z=W.parse(H,kt,Ft),_t(),F?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return F},this.pause=function(){F=!0,W.abort(),H=D(I.chunk)?"":H.substring(W.getCharIndex())},this.resume=function(){it.streamer._halted?(F=!1,it.streamer.parseChunk(H,!0)):setTimeout(it.resume,3)},this.aborted=function(){return G},this.abort=function(){G=!0,W.abort(),z.meta.aborted=!0,D(I.complete)&&I.complete(z),H=""},this.guessLineEndings=function(bt,jt){bt=bt.substring(0,1048576);var jt=new RegExp(P(jt)+"([^]*?)"+P(jt),"gm"),Ft=(bt=bt.replace(jt,"")).split("\r"),jt=bt.split(`
`),bt=1<jt.length&&jt[0].length<Ft[0].length;if(Ft.length===1||bt)return`
`;for(var Rt=0,Dt=0;Dt<Ft.length;Dt++)Ft[Dt][0]===`
`&&Rt++;return Rt>=Ft.length/2?`\r
`:"\r"}}function P(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(I){var H=(I=I||{}).delimiter,W=I.newline,U=I.comments,tt=I.step,K=I.preview,Y=I.fastMode,rt=null,at=!1,it=I.quoteChar==null?'"':I.quoteChar,J=it;if(I.escapeChar!==void 0&&(J=I.escapeChar),(typeof H!="string"||-1<f.BAD_DELIMITERS.indexOf(H))&&(H=","),U===H)throw new Error("Comment character same as delimiter");U===!0?U="#":(typeof U!="string"||-1<f.BAD_DELIMITERS.indexOf(U))&&(U=!1),W!==`
`&&W!=="\r"&&W!==`\r
`&&(W=`
`);var pt=0,F=!1;this.parse=function(G,lt,z){if(typeof G!="string")throw new Error("Input must be a string");var mt=G.length,_t=H.length,nt=W.length,Ot=U.length,At=D(tt),kt=[],Ft=[],jt=[],bt=pt=0;if(!G)return Jt();if(Y||Y!==!1&&G.indexOf(it)===-1){for(var Rt=G.split(W),Dt=0;Dt<Rt.length;Dt++){if(jt=Rt[Dt],pt+=jt.length,Dt!==Rt.length-1)pt+=W.length;else if(z)return Jt();if(!U||jt.substring(0,Ot)!==U){if(At){if(kt=[],Lt(jt.split(H)),se(),F)return Jt()}else Lt(jt.split(H));if(K&&K<=Dt)return kt=kt.slice(0,K),Jt(!0)}}return Jt()}for(var Wt=G.indexOf(H,pt),It=G.indexOf(W,pt),X=new RegExp(P(J)+P(it),"g"),$=G.indexOf(it,pt);;)if(G[pt]===it)for($=pt,pt++;;){if(($=G.indexOf(it,$+1))===-1)return z||Ft.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:kt.length,index:pt}),Kt();if($===mt-1)return Kt(G.substring(pt,$).replace(X,it));if(it===J&&G[$+1]===J)$++;else if(it===J||$===0||G[$-1]!==J){Wt!==-1&&Wt<$+1&&(Wt=G.indexOf(H,$+1));var wt=$t((It=It!==-1&&It<$+1?G.indexOf(W,$+1):It)===-1?Wt:Math.min(Wt,It));if(G.substr($+1+wt,_t)===H){jt.push(G.substring(pt,$).replace(X,it)),G[pt=$+1+wt+_t]!==it&&($=G.indexOf(it,pt)),Wt=G.indexOf(H,pt),It=G.indexOf(W,pt);break}if(wt=$t(It),G.substring($+1+wt,$+1+wt+nt)===W){if(jt.push(G.substring(pt,$).replace(X,it)),re($+1+wt+nt),Wt=G.indexOf(H,pt),$=G.indexOf(it,pt),At&&(se(),F))return Jt();if(K&&kt.length>=K)return Jt(!0);break}Ft.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:kt.length,index:pt}),$++}}else if(U&&jt.length===0&&G.substring(pt,pt+Ot)===U){if(It===-1)return Jt();pt=It+nt,It=G.indexOf(W,pt),Wt=G.indexOf(H,pt)}else if(Wt!==-1&&(Wt<It||It===-1))jt.push(G.substring(pt,Wt)),pt=Wt+_t,Wt=G.indexOf(H,pt);else{if(It===-1)break;if(jt.push(G.substring(pt,It)),re(It+nt),At&&(se(),F))return Jt();if(K&&kt.length>=K)return Jt(!0)}return Kt();function Lt(ft){kt.push(ft),bt=pt}function $t(ft){var q=0;return q=ft!==-1&&(ft=G.substring($+1,ft))&&ft.trim()===""?ft.length:q}function Kt(ft){return z||(ft===void 0&&(ft=G.substring(pt)),jt.push(ft),pt=mt,Lt(jt),At&&se()),Jt()}function re(ft){pt=ft,Lt(jt),jt=[],It=G.indexOf(W,pt)}function Jt(ft){if(I.header&&!lt&&kt.length&&!at){var q=kt[0],Pt=Object.create(null),St=new Set(q);let zt=!1;for(let Xt=0;Xt<q.length;Xt++){let ue=q[Xt];if(Pt[ue=D(I.transformHeader)?I.transformHeader(ue,Xt):ue]){let ke,Fe=Pt[ue];for(;ke=ue+"_"+Fe,Fe++,St.has(ke););St.add(ke),q[Xt]=ke,Pt[ue]++,zt=!0,(rt=rt===null?{}:rt)[ke]=ue}else Pt[ue]=1,q[Xt]=ue;St.add(ue)}zt&&console.warn("Duplicate headers found and renamed."),at=!0}return{data:kt,errors:Ft,meta:{delimiter:H,linebreak:W,aborted:F,truncated:!!ft,cursor:bt+(lt||0),renamedHeaders:rt}}}function se(){tt(Jt()),kt=[],Ft=[]}},this.abort=function(){F=!0},this.getCharIndex=function(){return pt}}function M(I){var H=I.data,W=a[H.workerId],U=!1;if(H.error)W.userError(H.error,H.file);else if(H.results&&H.results.data){var tt={abort:function(){U=!0,R(H.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:O,resume:O};if(D(W.userStep)){for(var K=0;K<H.results.data.length&&(W.userStep({data:H.results.data[K],errors:H.results.errors,meta:H.results.meta},tt),!U);K++);delete H.results}else D(W.userChunk)&&(W.userChunk(H.results,tt,H.file),delete H.results)}H.finished&&!U&&R(H.workerId,H.results)}function R(I,H){var W=a[I];D(W.userComplete)&&W.userComplete(H),W.terminate(),delete a[I]}function O(){throw new Error("Not implemented.")}function k(I){if(typeof I!="object"||I===null)return I;var H,W=Array.isArray(I)?[]:{};for(H in I)W[H]=k(I[H]);return W}function N(I,H){return function(){I.apply(H,arguments)}}function D(I){return typeof I=="function"}return f.parse=function(I,H){var W=(H=H||{}).dynamicTyping||!1;if(D(W)&&(H.dynamicTypingFunction=W,W={}),H.dynamicTyping=W,H.transform=!!D(H.transform)&&H.transform,!H.worker||!f.WORKERS_SUPPORTED)return W=null,f.NODE_STREAM_INPUT,typeof I=="string"?(I=(U=>U.charCodeAt(0)!==65279?U:U.slice(1))(I),W=new(H.download?m:v)(H)):I.readable===!0&&D(I.read)&&D(I.on)?W=new w(H):(i.File&&I instanceof File||I instanceof Object)&&(W=new y(H)),W.stream(I);(W=(()=>{var U;return!!f.WORKERS_SUPPORTED&&(U=(()=>{var tt=i.URL||i.webkitURL||null,K=e.toString();return f.BLOB_URL||(f.BLOB_URL=tt.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",K,")();"],{type:"text/javascript"})))})(),(U=new i.Worker(U)).onmessage=M,U.id=c++,a[U.id]=U)})()).userStep=H.step,W.userChunk=H.chunk,W.userComplete=H.complete,W.userError=H.error,H.step=D(H.step),H.chunk=D(H.chunk),H.complete=D(H.complete),H.error=D(H.error),delete H.worker,W.postMessage({input:I,config:H,workerId:W.id})},f.unparse=function(I,H){var W=!1,U=!0,tt=",",K=`\r
`,Y='"',rt=Y+Y,at=!1,it=null,J=!1,pt=((()=>{if(typeof H=="object"){if(typeof H.delimiter!="string"||f.BAD_DELIMITERS.filter(function(lt){return H.delimiter.indexOf(lt)!==-1}).length||(tt=H.delimiter),typeof H.quotes!="boolean"&&typeof H.quotes!="function"&&!Array.isArray(H.quotes)||(W=H.quotes),typeof H.skipEmptyLines!="boolean"&&typeof H.skipEmptyLines!="string"||(at=H.skipEmptyLines),typeof H.newline=="string"&&(K=H.newline),typeof H.quoteChar=="string"&&(Y=H.quoteChar),typeof H.header=="boolean"&&(U=H.header),Array.isArray(H.columns)){if(H.columns.length===0)throw new Error("Option columns is empty");it=H.columns}H.escapeChar!==void 0&&(rt=H.escapeChar+Y),H.escapeFormulae instanceof RegExp?J=H.escapeFormulae:typeof H.escapeFormulae=="boolean"&&H.escapeFormulae&&(J=/^[=+\-@\t\r].*$/)}})(),new RegExp(P(Y),"g"));if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return F(null,I,at);if(typeof I[0]=="object")return F(it||Object.keys(I[0]),I,at)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||it),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),F(I.fields||[],I.data||[],at);throw new Error("Unable to serialize unrecognized input");function F(lt,z,mt){var _t="",nt=(typeof lt=="string"&&(lt=JSON.parse(lt)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(lt)&&0<lt.length),Ot=!Array.isArray(z[0]);if(nt&&U){for(var At=0;At<lt.length;At++)0<At&&(_t+=tt),_t+=G(lt[At],At);0<z.length&&(_t+=K)}for(var kt=0;kt<z.length;kt++){var Ft=(nt?lt:z[kt]).length,jt=!1,bt=nt?Object.keys(z[kt]).length===0:z[kt].length===0;if(mt&&!nt&&(jt=mt==="greedy"?z[kt].join("").trim()==="":z[kt].length===1&&z[kt][0].length===0),mt==="greedy"&&nt){for(var Rt=[],Dt=0;Dt<Ft;Dt++){var Wt=Ot?lt[Dt]:Dt;Rt.push(z[kt][Wt])}jt=Rt.join("").trim()===""}if(!jt){for(var It=0;It<Ft;It++){0<It&&!bt&&(_t+=tt);var X=nt&&Ot?lt[It]:It;_t+=G(z[kt][X],It)}kt<z.length-1&&(!mt||0<Ft&&!bt)&&(_t+=K)}}return _t}function G(lt,z){var mt,_t;return lt==null?"":lt.constructor===Date?JSON.stringify(lt).slice(1,25):(_t=!1,J&&typeof lt=="string"&&J.test(lt)&&(lt="'"+lt,_t=!0),mt=lt.toString().replace(pt,rt),(_t=_t||W===!0||typeof W=="function"&&W(lt,z)||Array.isArray(W)&&W[z]||((nt,Ot)=>{for(var At=0;At<Ot.length;At++)if(-1<nt.indexOf(Ot[At]))return!0;return!1})(mt,f.BAD_DELIMITERS)||-1<mt.indexOf(tt)||mt.charAt(0)===" "||mt.charAt(mt.length-1)===" ")?Y+mt+Y:mt)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!s&&!!i.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=b,f.ParserHandle=S,f.NetworkStreamer=m,f.FileStreamer=y,f.StringStreamer=v,f.ReadableStreamStreamer=w,i.jQuery&&((r=i.jQuery).fn.parse=function(I){var H=I.config||{},W=[];return this.each(function(K){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Y=0;Y<this.files.length;Y++)W.push({file:this.files[Y],inputElem:this,instanceConfig:r.extend({},H)})}),U(),this;function U(){if(W.length===0)D(I.complete)&&I.complete();else{var K,Y,rt,at,it=W[0];if(D(I.before)){var J=I.before(it.file,it.inputElem);if(typeof J=="object"){if(J.action==="abort")return K="AbortError",Y=it.file,rt=it.inputElem,at=J.reason,void(D(I.error)&&I.error({name:K},Y,rt,at));if(J.action==="skip")return void tt();typeof J.config=="object"&&(it.instanceConfig=r.extend(it.instanceConfig,J.config))}else if(J==="skip")return void tt()}var pt=it.instanceConfig.complete;it.instanceConfig.complete=function(F){D(pt)&&pt(F,it.file,it.inputElem),tt()},f.parse(it.file,it.instanceConfig)}}function tt(){W.splice(0,1),U()}}),o&&(i.onmessage=function(I){I=I.data,f.WORKER_ID===void 0&&I&&(f.WORKER_ID=I.workerId),typeof I.input=="string"?i.postMessage({workerId:f.WORKER_ID,results:f.parse(I.input,I.config),finished:!0}):(i.File&&I.input instanceof File||I.input instanceof Object)&&(I=f.parse(I.input,I.config))&&i.postMessage({workerId:f.WORKER_ID,results:I,finished:!0})}),(m.prototype=Object.create(d.prototype)).constructor=m,(y.prototype=Object.create(d.prototype)).constructor=y,(v.prototype=Object.create(v.prototype)).constructor=v,(w.prototype=Object.create(d.prototype)).constructor=w,f})})(Vm)),Vm.exports}var K5=Y5();const TT=Tc(K5);function J5(){const[n,t]=Q.useState([{lat:-6.2,lng:106.8}]);function e(){return KF({click(s){t(o=>[...o,{lat:s.latlng.lat,lng:s.latlng.lng}])}}),null}function i(){const s=TT.unparse(n),o=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(o),c=document.createElement("a");c.href=a,c.setAttribute("download","sites.csv"),document.body.appendChild(c),c.click(),document.body.removeChild(c)}function r(s){const o=s.target.files[0];o&&TT.parse(o,{header:!0,dynamicTyping:!0,complete:a=>{const c=a.data.filter(f=>f.Latitude&&f.Longitude).map(f=>({lat:f.Latitude,lng:f.Longitude}));c.length>0&&t(c)}})}return B.jsxs("div",{className:"space-y-4",children:[B.jsxs(Vf,{center:[-2,118],zoom:5,style:{height:"400px",width:"100%"},children:[B.jsx(Uf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((s,o)=>B.jsx(ya,{position:[s.lat,s.lng]},o)),B.jsx(e,{})]}),B.jsxs("div",{className:"flex gap-4",children:[B.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow",children:"Export CSV"}),B.jsxs("label",{className:"px-4 py-2 bg-green-600 text-white rounded-lg shadow cursor-pointer",children:["Import CSV",B.jsx("input",{type:"file",accept:".csv",onChange:r,hidden:!0})]})]})]})}function Q5({result:n,mode:t,error:e}){const[i,r]=Q.useState("chart");return e?B.jsxs("div",{className:"bg-red-100 text-red-600 p-4 rounded-lg",children:[B.jsx("strong",{children:"Error:"})," ",e]}):n?B.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[B.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Analysis Result"}),B.jsxs("div",{className:"flex mb-4 rounded-xl overflow-hidden border w-full",children:[B.jsx("button",{onClick:()=>r("chart"),className:`flex-1 px-3 py-2 text-sm font-medium ${i==="chart"?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:"Chart"}),B.jsx("button",{onClick:()=>r("table"),className:`flex-1 px-3 py-2 text-sm font-medium ${i==="table"?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:"Table"}),t==="multi"&&B.jsx("button",{onClick:()=>r("map"),className:`flex-1 px-3 py-2 text-sm font-medium ${i==="map"?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:"Map"})]}),i==="chart"&&B.jsx(Z5,{curves:n.curves}),i==="table"&&B.jsx(q5,{curves:n.curves}),i==="map"&&t==="multi"&&B.jsx(J5,{})]}):B.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:B.jsx("p",{className:"text-gray-500",children:"Belum ada hasil analisis."})})}function tH({toast:n}){if(Q.useEffect(()=>{if(!n)return;const e=setTimeout(()=>{},3e3);return()=>clearTimeout(e)},[n]),!n)return null;const t={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return B.jsx("div",{className:"fixed top-4 right-4 z-50",children:B.jsx("div",{className:`${t[n.type]||"bg-gray-500"} text-white px-4 py-2 rounded-lg shadow-lg`,children:n.message})})}/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ok="132",Eu={ROTATE:0,DOLLY:1,PAN:2},Pu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},eH=0,ET=1,nH=2,ak=1,iH=2,cf=3,qf=0,jn=1,kl=2,lk=1,_a=0,Tf=1,PT=2,CT=3,AT=4,rH=5,Yu=100,sH=101,oH=102,LT=103,kT=104,aH=200,lH=201,uH=202,cH=203,uk=204,ck=205,hH=206,fH=207,dH=208,pH=209,mH=210,gH=0,yH=1,vH=2,Nx=3,_H=4,xH=5,wH=6,bH=7,Ig=0,SH=1,MH=2,Pl=0,TH=1,EH=2,PH=3,CH=4,AH=5,hk=300,Dg=301,Og=302,Fx=303,zx=304,Ng=306,fw=307,Bx=1e3,vr=1001,Vx=1002,Qn=1003,RT=1004,IT=1005,jr=1006,LH=1007,Fg=1008,bc=1009,kH=1010,RH=1011,sg=1012,IH=1013,Um=1014,pl=1015,uc=1016,DH=1017,OH=1018,NH=1019,Ef=1020,FH=1021,xa=1022,xr=1023,zH=1024,BH=1025,VH=xr,cc=1026,Xf=1027,UH=1028,HH=1029,jH=1030,WH=1031,GH=1032,$H=1033,DT=33776,OT=33777,NT=33778,FT=33779,zT=35840,BT=35841,VT=35842,UT=35843,ZH=36196,HT=37492,jT=37496,qH=37808,XH=37809,YH=37810,KH=37811,JH=37812,QH=37813,tj=37814,ej=37815,nj=37816,ij=37817,rj=37818,sj=37819,oj=37820,aj=37821,lj=36492,uj=37840,cj=37841,hj=37842,fj=37843,dj=37844,pj=37845,mj=37846,gj=37847,yj=37848,vj=37849,_j=37850,xj=37851,wj=37852,bj=37853,Sj=2200,Mj=2201,Tj=2202,og=2300,ag=2301,Kv=2302,ic=2400,rc=2401,lg=2402,dw=2500,fk=2501,Ej=0,tr=3e3,zg=3001,pw=3007,mw=3002,Pj=3003,dk=3004,pk=3005,mk=3006,Cj=3200,Aj=3201,Oc=0,Lj=1,Jv=7680,kj=519,Yf=35044,ug=35048,WT="300 es";let Nl=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const r=this._listeners[t];if(r!==void 0){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const i=this._listeners[t.type];if(i!==void 0){t.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}};const si=[];for(let n=0;n<256;n++)si[n]=(n<16?"0":"")+n.toString(16);let Xp=1234567;const Pf=Math.PI/180,Kf=180/Math.PI;function ps(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(si[n&255]+si[n>>8&255]+si[n>>16&255]+si[n>>24&255]+"-"+si[t&255]+si[t>>8&255]+"-"+si[t>>16&15|64]+si[t>>24&255]+"-"+si[e&63|128]+si[e>>8&255]+"-"+si[e>>16&255]+si[e>>24&255]+si[i&255]+si[i>>8&255]+si[i>>16&255]+si[i>>24&255]).toUpperCase()}function Oi(n,t,e){return Math.max(t,Math.min(e,n))}function gw(n,t){return(n%t+t)%t}function Rj(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function Ij(n,t,e){return n!==t?(e-n)/(t-n):0}function Cf(n,t,e){return(1-e)*n+e*t}function Dj(n,t,e,i){return Cf(n,t,1-Math.exp(-e*i))}function Oj(n,t=1){return t-Math.abs(gw(n,t*2)-t)}function Nj(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function Fj(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function zj(n,t){return n+Math.floor(Math.random()*(t-n+1))}function Bj(n,t){return n+Math.random()*(t-n)}function Vj(n){return n*(.5-Math.random())}function Uj(n){return n!==void 0&&(Xp=n%2147483647),Xp=Xp*16807%2147483647,(Xp-1)/2147483646}function Hj(n){return n*Pf}function jj(n){return n*Kf}function Ux(n){return(n&n-1)===0&&n!==0}function Wj(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function gk(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Gj(n,t,e,i,r){const s=Math.cos,o=Math.sin,a=s(e/2),c=o(e/2),f=s((t+i)/2),d=o((t+i)/2),m=s((t-i)/2),y=o((t-i)/2),v=s((i-t)/2),w=o((i-t)/2);switch(r){case"XYX":n.set(a*d,c*m,c*y,a*f);break;case"YZY":n.set(c*y,a*d,c*m,a*f);break;case"ZXZ":n.set(c*m,c*y,a*d,a*f);break;case"XZX":n.set(a*d,c*w,c*v,a*f);break;case"YXY":n.set(c*v,a*d,c*w,a*f);break;case"ZYZ":n.set(c*w,c*v,a*d,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}var Qv=Object.freeze({__proto__:null,DEG2RAD:Pf,RAD2DEG:Kf,generateUUID:ps,clamp:Oi,euclideanModulo:gw,mapLinear:Rj,inverseLerp:Ij,lerp:Cf,damp:Dj,pingpong:Oj,smoothstep:Nj,smootherstep:Fj,randInt:zj,randFloat:Bj,randFloatSpread:Vj,seededRandom:Uj,degToRad:Hj,radToDeg:jj,isPowerOfTwo:Ux,ceilPowerOfTwo:Wj,floorPowerOfTwo:gk,setQuaternionFromProperEuler:Gj});class Zt{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*i-o*r+t.x,this.y=s*r+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Zt.prototype.isVector2=!0;class ai{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,r,s,o,a,c,f){const d=this.elements;return d[0]=t,d[1]=r,d[2]=a,d[3]=e,d[4]=s,d[5]=c,d[6]=i,d[7]=o,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,o=i[0],a=i[3],c=i[6],f=i[1],d=i[4],m=i[7],y=i[2],v=i[5],w=i[8],S=r[0],P=r[3],b=r[6],M=r[1],R=r[4],O=r[7],k=r[2],N=r[5],D=r[8];return s[0]=o*S+a*M+c*k,s[3]=o*P+a*R+c*N,s[6]=o*b+a*O+c*D,s[1]=f*S+d*M+m*k,s[4]=f*P+d*R+m*N,s[7]=f*b+d*O+m*D,s[2]=y*S+v*M+w*k,s[5]=y*P+v*R+w*N,s[8]=y*b+v*O+w*D,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],c=t[6],f=t[7],d=t[8];return e*o*d-e*a*f-i*s*d+i*a*c+r*s*f-r*o*c}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],c=t[6],f=t[7],d=t[8],m=d*o-a*f,y=a*c-d*s,v=f*s-o*c,w=e*m+i*y+r*v;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/w;return t[0]=m*S,t[1]=(r*f-d*i)*S,t[2]=(a*i-r*o)*S,t[3]=y*S,t[4]=(d*e-r*c)*S,t[5]=(r*s-a*e)*S,t[6]=v*S,t[7]=(i*c-f*e)*S,t[8]=(o*e-i*s)*S,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,s,o,a){const c=Math.cos(s),f=Math.sin(s);return this.set(i*c,i*f,-i*(c*o+f*a)+o+t,-r*f,r*c,-r*(-f*o+c*a)+a+e,0,0,1),this}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.elements,s=r[0],o=r[3],a=r[6],c=r[1],f=r[4],d=r[7];return r[0]=e*s+i*c,r[3]=e*o+i*f,r[6]=e*a+i*d,r[1]=-i*s+e*c,r[4]=-i*o+e*f,r[7]=-i*a+e*d,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}ai.prototype.isMatrix3=!0;let Cu;class Nc{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Cu===void 0&&(Cu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Cu.width=t.width,Cu.height=t.height;const i=Cu.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Cu}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}let $j=0;class li extends Nl{constructor(t=li.DEFAULT_IMAGE,e=li.DEFAULT_MAPPING,i=vr,r=vr,s=jr,o=Fg,a=xr,c=bc,f=1,d=tr){super(),Object.defineProperty(this,"id",{value:$j++}),this.uuid=ps(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=c,this.offset=new Zt(0,0),this.repeat=new Zt(1,1),this.center=new Zt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ai,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=ps()),!e&&t.images[r.uuid]===void 0){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(t_(r[o].image)):s.push(t_(r[o]))}else s=t_(r);t.images[r.uuid]={uuid:r.uuid,url:s}}i.image=r.uuid}return e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==hk)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Bx:t.x=t.x-Math.floor(t.x);break;case vr:t.x=t.x<0?0:1;break;case Vx:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Bx:t.y=t.y-Math.floor(t.y);break;case vr:t.y=t.y<0?0:1;break;case Vx:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&this.version++}}li.DEFAULT_IMAGE=void 0;li.DEFAULT_MAPPING=hk;li.prototype.isTexture=!0;function t_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Nc.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class en{constructor(t=0,e=0,i=0,r=1){this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,s;const c=t.elements,f=c[0],d=c[4],m=c[8],y=c[1],v=c[5],w=c[9],S=c[2],P=c[6],b=c[10];if(Math.abs(d-y)<.01&&Math.abs(m-S)<.01&&Math.abs(w-P)<.01){if(Math.abs(d+y)<.1&&Math.abs(m+S)<.1&&Math.abs(w+P)<.1&&Math.abs(f+v+b-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const R=(f+1)/2,O=(v+1)/2,k=(b+1)/2,N=(d+y)/4,D=(m+S)/4,I=(w+P)/4;return R>O&&R>k?R<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(R),r=N/i,s=D/i):O>k?O<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(O),i=N/r,s=I/r):k<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(k),i=D/s,r=I/s),this.set(i,r,s,e),this}let M=Math.sqrt((P-w)*(P-w)+(m-S)*(m-S)+(y-d)*(y-d));return Math.abs(M)<.001&&(M=1),this.x=(P-w)/M,this.y=(m-S)/M,this.z=(y-d)/M,this.w=Math.acos((f+v+b-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}en.prototype.isVector4=!0;class js extends Nl{constructor(t,e,i={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new en(0,0,t,e),this.scissorTest=!1,this.viewport=new en(0,0,t,e),this.texture=new li(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:t,height:e,depth:1},this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:jr,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e,i=1){(this.width!==t||this.height!==e||this.depth!==i)&&(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}js.prototype.isWebGLRenderTarget=!0;class Zj extends js{constructor(t,e,i){super(t,e);const r=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=r.clone()}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=t,this.texture[r].image.height=e,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,i=t.texture.length;e<i;e++)this.texture[e]=t.texture[e].clone();return this}}Zj.prototype.isWebGLMultipleRenderTargets=!0;class yk extends js{constructor(t,e,i){super(t,e,i),this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}yk.prototype.isWebGLMultisampleRenderTarget=!0;class Si{constructor(t=0,e=0,i=0,r=1){this._x=t,this._y=e,this._z=i,this._w=r}static slerp(t,e,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(t,e,r)}static slerpFlat(t,e,i,r,s,o,a){let c=i[r+0],f=i[r+1],d=i[r+2],m=i[r+3];const y=s[o+0],v=s[o+1],w=s[o+2],S=s[o+3];if(a===0){t[e+0]=c,t[e+1]=f,t[e+2]=d,t[e+3]=m;return}if(a===1){t[e+0]=y,t[e+1]=v,t[e+2]=w,t[e+3]=S;return}if(m!==S||c!==y||f!==v||d!==w){let P=1-a;const b=c*y+f*v+d*w+m*S,M=b>=0?1:-1,R=1-b*b;if(R>Number.EPSILON){const k=Math.sqrt(R),N=Math.atan2(k,b*M);P=Math.sin(P*N)/k,a=Math.sin(a*N)/k}const O=a*M;if(c=c*P+y*O,f=f*P+v*O,d=d*P+w*O,m=m*P+S*O,P===1-a){const k=1/Math.sqrt(c*c+f*f+d*d+m*m);c*=k,f*=k,d*=k,m*=k}}t[e]=c,t[e+1]=f,t[e+2]=d,t[e+3]=m}static multiplyQuaternionsFlat(t,e,i,r,s,o){const a=i[r],c=i[r+1],f=i[r+2],d=i[r+3],m=s[o],y=s[o+1],v=s[o+2],w=s[o+3];return t[e]=a*w+d*m+c*v-f*y,t[e+1]=c*w+d*y+f*m-a*v,t[e+2]=f*w+d*v+a*y-c*m,t[e+3]=d*w-a*m-c*y-f*v,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,c=Math.sin,f=a(i/2),d=a(r/2),m=a(s/2),y=c(i/2),v=c(r/2),w=c(s/2);switch(o){case"XYZ":this._x=y*d*m+f*v*w,this._y=f*v*m-y*d*w,this._z=f*d*w+y*v*m,this._w=f*d*m-y*v*w;break;case"YXZ":this._x=y*d*m+f*v*w,this._y=f*v*m-y*d*w,this._z=f*d*w-y*v*m,this._w=f*d*m+y*v*w;break;case"ZXY":this._x=y*d*m-f*v*w,this._y=f*v*m+y*d*w,this._z=f*d*w+y*v*m,this._w=f*d*m-y*v*w;break;case"ZYX":this._x=y*d*m-f*v*w,this._y=f*v*m+y*d*w,this._z=f*d*w-y*v*m,this._w=f*d*m+y*v*w;break;case"YZX":this._x=y*d*m+f*v*w,this._y=f*v*m+y*d*w,this._z=f*d*w-y*v*m,this._w=f*d*m-y*v*w;break;case"XZY":this._x=y*d*m-f*v*w,this._y=f*v*m-y*d*w,this._z=f*d*w+y*v*m,this._w=f*d*m+y*v*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],c=e[9],f=e[2],d=e[6],m=e[10],y=i+a+m;if(y>0){const v=.5/Math.sqrt(y+1);this._w=.25/v,this._x=(d-c)*v,this._y=(s-f)*v,this._z=(o-r)*v}else if(i>a&&i>m){const v=2*Math.sqrt(1+i-a-m);this._w=(d-c)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+f)/v}else if(a>m){const v=2*Math.sqrt(1+a-i-m);this._w=(s-f)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(c+d)/v}else{const v=2*Math.sqrt(1+m-i-a);this._w=(o-r)/v,this._x=(s+f)/v,this._y=(c+d)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Oi(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return e!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,r=t._y,s=t._z,o=t._w,a=e._x,c=e._y,f=e._z,d=e._w;return this._x=i*d+o*a+r*f-s*c,this._y=r*d+o*c+s*a-i*f,this._z=s*d+o*f+i*c-r*a,this._w=o*d-i*a-r*c-s*f,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+i*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const v=1-e;return this._w=v*o+e*this._w,this._x=v*i+e*this._x,this._y=v*r+e*this._y,this._z=v*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(c),d=Math.atan2(f,a),m=Math.sin((1-e)*d)/f,y=Math.sin(e*d)/f;return this._w=o*m+this._w*y,this._x=i*m+this._x*y,this._y=r*m+this._y*y,this._z=s*m+this._z*y,this._onChangeCallback(),this}slerpQuaternions(t,e,i){this.copy(t).slerp(e,i)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Si.prototype.isQuaternion=!0;class st{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return e!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return e!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return e!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(GT.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(GT.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*r,this.y=s[1]*e+s[4]*i+s[7]*r,this.z=s[2]*e+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,i=this.y,r=this.z,s=t.x,o=t.y,a=t.z,c=t.w,f=c*e+o*r-a*i,d=c*i+a*e-s*r,m=c*r+s*i-o*e,y=-s*e-o*i-a*r;return this.x=f*c+y*-s+d*-a-m*-o,this.y=d*c+y*-o+m*-s-f*-a,this.z=m*c+y*-a+f*-o-d*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r,this.y=s[1]*e+s[5]*i+s[9]*r,this.z=s[2]*e+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t,e){return e!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,r=t.y,s=t.z,o=e.x,a=e.y,c=e.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return e_.copy(this).projectOnVector(t),this.sub(e_)}reflect(t){return this.sub(e_.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Oi(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}st.prototype.isVector3=!0;const e_=new st,GT=new Si;class qr{constructor(t=new st(1/0,1/0,1/0),e=new st(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,f=t.length;c<f;c+=3){const d=t[c],m=t[c+1],y=t[c+2];d<e&&(e=d),m<i&&(i=m),y<r&&(r=y),d>s&&(s=d),m>o&&(o=m),y>a&&(a=y)}return this.min.set(e,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(t){let e=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,f=t.count;c<f;c++){const d=t.getX(c),m=t.getY(c),y=t.getZ(c);d<e&&(e=d),m<i&&(i=m),y<r&&(r=y),d>s&&(s=d),m>o&&(o=m),y>a&&(a=y)}return this.min.set(e,i,r),this.max.set(s,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Vh.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;e!==void 0&&(e.boundingBox===null&&e.computeBoundingBox(),n_.copy(e.boundingBox),n_.applyMatrix4(t.matrixWorld),this.union(n_));const i=t.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Vh),Vh.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Uh),Yp.subVectors(this.max,Uh),Au.subVectors(t.a,Uh),Lu.subVectors(t.b,Uh),ku.subVectors(t.c,Uh),sa.subVectors(Lu,Au),oa.subVectors(ku,Lu),ll.subVectors(Au,ku);let e=[0,-sa.z,sa.y,0,-oa.z,oa.y,0,-ll.z,ll.y,sa.z,0,-sa.x,oa.z,0,-oa.x,ll.z,0,-ll.x,-sa.y,sa.x,0,-oa.y,oa.x,0,-ll.y,ll.x,0];return!i_(e,Au,Lu,ku,Yp)||(e=[1,0,0,0,1,0,0,0,1],!i_(e,Au,Lu,ku,Yp))?!1:(Kp.crossVectors(sa,oa),e=[Kp.x,Kp.y,Kp.z],i_(e,Au,Lu,ku,Yp))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Vh.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(Vh).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(mo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),mo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),mo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),mo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),mo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),mo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),mo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),mo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(mo),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}qr.prototype.isBox3=!0;const mo=[new st,new st,new st,new st,new st,new st,new st,new st],Vh=new st,n_=new qr,Au=new st,Lu=new st,ku=new st,sa=new st,oa=new st,ll=new st,Uh=new st,Yp=new st,Kp=new st,ul=new st;function i_(n,t,e,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){ul.fromArray(n,s);const a=r.x*Math.abs(ul.x)+r.y*Math.abs(ul.y)+r.z*Math.abs(ul.z),c=t.dot(ul),f=e.dot(ul),d=i.dot(ul);if(Math.max(-Math.max(c,f,d),Math.min(c,f,d))>a)return!1}return!0}const qj=new qr,$T=new st,r_=new st,s_=new st;class Fc{constructor(t=new st,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):qj.setFromPoints(t).getCenter(i);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){s_.subVectors(t,this.center);const e=s_.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.add(s_.multiplyScalar(r/i)),this.radius+=r}return this}union(t){return r_.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint($T.copy(t.center).add(r_)),this.expandByPoint($T.copy(t.center).sub(r_)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const go=new st,o_=new st,Jp=new st,aa=new st,a_=new st,Qp=new st,l_=new st;class Fl{constructor(t=new st,e=new st(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,go)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=go.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(go.copy(this.direction).multiplyScalar(e).add(this.origin),go.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){o_.copy(t).add(e).multiplyScalar(.5),Jp.copy(e).sub(t).normalize(),aa.copy(this.origin).sub(o_);const s=t.distanceTo(e)*.5,o=-this.direction.dot(Jp),a=aa.dot(this.direction),c=-aa.dot(Jp),f=aa.lengthSq(),d=Math.abs(1-o*o);let m,y,v,w;if(d>0)if(m=o*c-a,y=o*a-c,w=s*d,m>=0)if(y>=-w)if(y<=w){const S=1/d;m*=S,y*=S,v=m*(m+o*y+2*a)+y*(o*m+y+2*c)+f}else y=s,m=Math.max(0,-(o*y+a)),v=-m*m+y*(y+2*c)+f;else y=-s,m=Math.max(0,-(o*y+a)),v=-m*m+y*(y+2*c)+f;else y<=-w?(m=Math.max(0,-(-o*s+a)),y=m>0?-s:Math.min(Math.max(-s,-c),s),v=-m*m+y*(y+2*c)+f):y<=w?(m=0,y=Math.min(Math.max(-s,-c),s),v=y*(y+2*c)+f):(m=Math.max(0,-(o*s+a)),y=m>0?s:Math.min(Math.max(-s,-c),s),v=-m*m+y*(y+2*c)+f);else y=o>0?-s:s,m=Math.max(0,-(o*y+a)),v=-m*m+y*(y+2*c)+f;return i&&i.copy(this.direction).multiplyScalar(m).add(this.origin),r&&r.copy(Jp).multiplyScalar(y).add(o_),v}intersectSphere(t,e){go.subVectors(t.center,this.origin);const i=go.dot(this.direction),r=go.dot(go)-i*i,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return a<0&&c<0?null:a<0?this.at(c,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,s,o,a,c;const f=1/this.direction.x,d=1/this.direction.y,m=1/this.direction.z,y=this.origin;return f>=0?(i=(t.min.x-y.x)*f,r=(t.max.x-y.x)*f):(i=(t.max.x-y.x)*f,r=(t.min.x-y.x)*f),d>=0?(s=(t.min.y-y.y)*d,o=(t.max.y-y.y)*d):(s=(t.max.y-y.y)*d,o=(t.min.y-y.y)*d),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),m>=0?(a=(t.min.z-y.z)*m,c=(t.max.z-y.z)*m):(a=(t.max.z-y.z)*m,c=(t.min.z-y.z)*m),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,go)!==null}intersectTriangle(t,e,i,r,s){a_.subVectors(e,t),Qp.subVectors(i,t),l_.crossVectors(a_,Qp);let o=this.direction.dot(l_),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;aa.subVectors(this.origin,t);const c=a*this.direction.dot(Qp.crossVectors(aa,Qp));if(c<0)return null;const f=a*this.direction.dot(a_.cross(aa));if(f<0||c+f>o)return null;const d=-a*aa.dot(l_);return d<0?null:this.at(d/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ve{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,r,s,o,a,c,f,d,m,y,v,w,S,P){const b=this.elements;return b[0]=t,b[4]=e,b[8]=i,b[12]=r,b[1]=s,b[5]=o,b[9]=a,b[13]=c,b[2]=f,b[6]=d,b[10]=m,b[14]=y,b[3]=v,b[7]=w,b[11]=S,b[15]=P,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ve().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,r=1/Ru.setFromMatrixColumn(t,0).length(),s=1/Ru.setFromMatrixColumn(t,1).length(),o=1/Ru.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,i=t.x,r=t.y,s=t.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),f=Math.sin(r),d=Math.cos(s),m=Math.sin(s);if(t.order==="XYZ"){const y=o*d,v=o*m,w=a*d,S=a*m;e[0]=c*d,e[4]=-c*m,e[8]=f,e[1]=v+w*f,e[5]=y-S*f,e[9]=-a*c,e[2]=S-y*f,e[6]=w+v*f,e[10]=o*c}else if(t.order==="YXZ"){const y=c*d,v=c*m,w=f*d,S=f*m;e[0]=y+S*a,e[4]=w*a-v,e[8]=o*f,e[1]=o*m,e[5]=o*d,e[9]=-a,e[2]=v*a-w,e[6]=S+y*a,e[10]=o*c}else if(t.order==="ZXY"){const y=c*d,v=c*m,w=f*d,S=f*m;e[0]=y-S*a,e[4]=-o*m,e[8]=w+v*a,e[1]=v+w*a,e[5]=o*d,e[9]=S-y*a,e[2]=-o*f,e[6]=a,e[10]=o*c}else if(t.order==="ZYX"){const y=o*d,v=o*m,w=a*d,S=a*m;e[0]=c*d,e[4]=w*f-v,e[8]=y*f+S,e[1]=c*m,e[5]=S*f+y,e[9]=v*f-w,e[2]=-f,e[6]=a*c,e[10]=o*c}else if(t.order==="YZX"){const y=o*c,v=o*f,w=a*c,S=a*f;e[0]=c*d,e[4]=S-y*m,e[8]=w*m+v,e[1]=m,e[5]=o*d,e[9]=-a*d,e[2]=-f*d,e[6]=v*m+w,e[10]=y-S*m}else if(t.order==="XZY"){const y=o*c,v=o*f,w=a*c,S=a*f;e[0]=c*d,e[4]=-m,e[8]=f*d,e[1]=y*m+S,e[5]=o*d,e[9]=v*m-w,e[2]=w*m-v,e[6]=a*d,e[10]=S*m+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Xj,t,Yj)}lookAt(t,e,i){const r=this.elements;return mr.subVectors(t,e),mr.lengthSq()===0&&(mr.z=1),mr.normalize(),la.crossVectors(i,mr),la.lengthSq()===0&&(Math.abs(i.z)===1?mr.x+=1e-4:mr.z+=1e-4,mr.normalize(),la.crossVectors(i,mr)),la.normalize(),tm.crossVectors(mr,la),r[0]=la.x,r[4]=tm.x,r[8]=mr.x,r[1]=la.y,r[5]=tm.y,r[9]=mr.y,r[2]=la.z,r[6]=tm.z,r[10]=mr.z,this}multiply(t,e){return e!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,o=i[0],a=i[4],c=i[8],f=i[12],d=i[1],m=i[5],y=i[9],v=i[13],w=i[2],S=i[6],P=i[10],b=i[14],M=i[3],R=i[7],O=i[11],k=i[15],N=r[0],D=r[4],I=r[8],H=r[12],W=r[1],U=r[5],tt=r[9],K=r[13],Y=r[2],rt=r[6],at=r[10],it=r[14],J=r[3],pt=r[7],F=r[11],G=r[15];return s[0]=o*N+a*W+c*Y+f*J,s[4]=o*D+a*U+c*rt+f*pt,s[8]=o*I+a*tt+c*at+f*F,s[12]=o*H+a*K+c*it+f*G,s[1]=d*N+m*W+y*Y+v*J,s[5]=d*D+m*U+y*rt+v*pt,s[9]=d*I+m*tt+y*at+v*F,s[13]=d*H+m*K+y*it+v*G,s[2]=w*N+S*W+P*Y+b*J,s[6]=w*D+S*U+P*rt+b*pt,s[10]=w*I+S*tt+P*at+b*F,s[14]=w*H+S*K+P*it+b*G,s[3]=M*N+R*W+O*Y+k*J,s[7]=M*D+R*U+O*rt+k*pt,s[11]=M*I+R*tt+O*at+k*F,s[15]=M*H+R*K+O*it+k*G,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],r=t[8],s=t[12],o=t[1],a=t[5],c=t[9],f=t[13],d=t[2],m=t[6],y=t[10],v=t[14],w=t[3],S=t[7],P=t[11],b=t[15];return w*(+s*c*m-r*f*m-s*a*y+i*f*y+r*a*v-i*c*v)+S*(+e*c*v-e*f*y+s*o*y-r*o*v+r*f*d-s*c*d)+P*(+e*f*m-e*a*v-s*o*m+i*o*v+s*a*d-i*f*d)+b*(-r*a*d-e*c*m+e*a*y+r*o*m-i*o*y+i*c*d)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],c=t[6],f=t[7],d=t[8],m=t[9],y=t[10],v=t[11],w=t[12],S=t[13],P=t[14],b=t[15],M=m*P*f-S*y*f+S*c*v-a*P*v-m*c*b+a*y*b,R=w*y*f-d*P*f-w*c*v+o*P*v+d*c*b-o*y*b,O=d*S*f-w*m*f+w*a*v-o*S*v-d*a*b+o*m*b,k=w*m*c-d*S*c-w*a*y+o*S*y+d*a*P-o*m*P,N=e*M+i*R+r*O+s*k;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/N;return t[0]=M*D,t[1]=(S*y*s-m*P*s-S*r*v+i*P*v+m*r*b-i*y*b)*D,t[2]=(a*P*s-S*c*s+S*r*f-i*P*f-a*r*b+i*c*b)*D,t[3]=(m*c*s-a*y*s-m*r*f+i*y*f+a*r*v-i*c*v)*D,t[4]=R*D,t[5]=(d*P*s-w*y*s+w*r*v-e*P*v-d*r*b+e*y*b)*D,t[6]=(w*c*s-o*P*s-w*r*f+e*P*f+o*r*b-e*c*b)*D,t[7]=(o*y*s-d*c*s+d*r*f-e*y*f-o*r*v+e*c*v)*D,t[8]=O*D,t[9]=(w*m*s-d*S*s-w*i*v+e*S*v+d*i*b-e*m*b)*D,t[10]=(o*S*s-w*a*s+w*i*f-e*S*f-o*i*b+e*a*b)*D,t[11]=(d*a*s-o*m*s-d*i*f+e*m*f+o*i*v-e*a*v)*D,t[12]=k*D,t[13]=(d*S*r-w*m*r+w*i*y-e*S*y-d*i*P+e*m*P)*D,t[14]=(w*a*r-o*S*r-w*i*c+e*S*c+o*i*P-e*a*P)*D,t[15]=(o*m*r-d*a*r+d*i*c-e*m*c-o*i*y+e*a*y)*D,this}scale(t){const e=this.elements,i=t.x,r=t.y,s=t.z;return e[0]*=i,e[4]*=r,e[8]*=s,e[1]*=i,e[5]*=r,e[9]*=s,e[2]*=i,e[6]*=r,e[10]*=s,e[3]*=i,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),r=Math.sin(e),s=1-i,o=t.x,a=t.y,c=t.z,f=s*o,d=s*a;return this.set(f*o+i,f*a-r*c,f*c+r*a,0,f*a+r*c,d*a+i,d*c-r*o,0,f*c-r*a,d*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,s,o){return this.set(1,i,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){const r=this.elements,s=e._x,o=e._y,a=e._z,c=e._w,f=s+s,d=o+o,m=a+a,y=s*f,v=s*d,w=s*m,S=o*d,P=o*m,b=a*m,M=c*f,R=c*d,O=c*m,k=i.x,N=i.y,D=i.z;return r[0]=(1-(S+b))*k,r[1]=(v+O)*k,r[2]=(w-R)*k,r[3]=0,r[4]=(v-O)*N,r[5]=(1-(y+b))*N,r[6]=(P+M)*N,r[7]=0,r[8]=(w+R)*D,r[9]=(P-M)*D,r[10]=(1-(y+S))*D,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){const r=this.elements;let s=Ru.set(r[0],r[1],r[2]).length();const o=Ru.set(r[4],r[5],r[6]).length(),a=Ru.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],os.copy(this);const f=1/s,d=1/o,m=1/a;return os.elements[0]*=f,os.elements[1]*=f,os.elements[2]*=f,os.elements[4]*=d,os.elements[5]*=d,os.elements[6]*=d,os.elements[8]*=m,os.elements[9]*=m,os.elements[10]*=m,e.setFromRotationMatrix(os),i.x=s,i.y=o,i.z=a,this}makePerspective(t,e,i,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(e-t),f=2*s/(i-r),d=(e+t)/(e-t),m=(i+r)/(i-r),y=-(o+s)/(o-s),v=-2*o*s/(o-s);return a[0]=c,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=f,a[9]=m,a[13]=0,a[2]=0,a[6]=0,a[10]=y,a[14]=v,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,r,s,o){const a=this.elements,c=1/(e-t),f=1/(i-r),d=1/(o-s),m=(e+t)*c,y=(i+r)*f,v=(o+s)*d;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-m,a[1]=0,a[5]=2*f,a[9]=0,a[13]=-y,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-v,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}ve.prototype.isMatrix4=!0;const Ru=new st,os=new ve,Xj=new st(0,0,0),Yj=new st(1,1,1),la=new st,tm=new st,mr=new st,ZT=new ve,qT=new Si;class zc{constructor(t=0,e=0,i=0,r=zc.DefaultOrder){this._x=t,this._y=e,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,r=this._order){return this._x=t,this._y=e,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const r=t.elements,s=r[0],o=r[4],a=r[8],c=r[1],f=r[5],d=r[9],m=r[2],y=r[6],v=r[10];switch(e){case"XYZ":this._y=Math.asin(Oi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Oi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Oi(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-m,v),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Oi(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(y,v),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(Oi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-Oi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return ZT.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ZT,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return qT.setFromEuler(this),this.setFromQuaternion(qT,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new st(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}zc.prototype.isEuler=!0;zc.DefaultOrder="XYZ";zc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Kj{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}}let Jj=0;const XT=new st,Iu=new Si,yo=new ve,em=new st,Hh=new st,Qj=new st,t6=new Si,YT=new st(1,0,0),KT=new st(0,1,0),JT=new st(0,0,1),e6={type:"added"},QT={type:"removed"};class Ze extends Nl{constructor(){super(),Object.defineProperty(this,"id",{value:Jj++}),this.uuid=ps(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ze.DefaultUp.clone();const t=new st,e=new zc,i=new Si,r=new st(1,1,1);function s(){i.setFromEuler(e,!1)}function o(){e.setFromQuaternion(i,void 0,!1)}e._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ve},normalMatrix:{value:new ai}}),this.matrix=new ve,this.matrixWorld=new ve,this.matrixAutoUpdate=Ze.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Kj,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Iu.setFromAxisAngle(t,e),this.quaternion.multiply(Iu),this}rotateOnWorldAxis(t,e){return Iu.setFromAxisAngle(t,e),this.quaternion.premultiply(Iu),this}rotateX(t){return this.rotateOnAxis(YT,t)}rotateY(t){return this.rotateOnAxis(KT,t)}rotateZ(t){return this.rotateOnAxis(JT,t)}translateOnAxis(t,e){return XT.copy(t).applyQuaternion(this.quaternion),this.position.add(XT.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(YT,t)}translateY(t){return this.translateOnAxis(KT,t)}translateZ(t){return this.translateOnAxis(JT,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(yo.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?em.copy(t):em.set(t,e,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Hh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yo.lookAt(Hh,em,this.up):yo.lookAt(em,Hh,this.up),this.quaternion.setFromRotationMatrix(yo),r&&(yo.extractRotation(r.matrixWorld),Iu.setFromRotationMatrix(yo),this.quaternion.premultiply(Iu.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(e6)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(QT)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(QT)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),yo.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),yo.multiply(t.parent.matrixWorld)),t.applyMatrix4(yo),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(t,e);if(o!==void 0)return o}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hh,t,Qj),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hh,t6,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let f=0,d=c.length;f<d;f++){const m=c[f];s(t.shapes,m)}else s(t.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,f=this.material.length;c<f;c++)a.push(s(t.materials,this.material[c]));r.material=a}else r.material=s(t.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];r.animations.push(s(t.animations,c))}}if(e){const a=o(t.geometries),c=o(t.materials),f=o(t.textures),d=o(t.images),m=o(t.shapes),y=o(t.skeletons),v=o(t.animations);a.length>0&&(i.geometries=a),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),d.length>0&&(i.images=d),m.length>0&&(i.shapes=m),y.length>0&&(i.skeletons=y),v.length>0&&(i.animations=v)}return i.object=r,i;function o(a){const c=[];for(const f in a){const d=a[f];delete d.metadata,c.push(d)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const r=t.children[i];this.add(r.clone())}return this}}Ze.DefaultUp=new st(0,1,0);Ze.DefaultMatrixAutoUpdate=!0;Ze.prototype.isObject3D=!0;const as=new st,vo=new st,u_=new st,_o=new st,Du=new st,Ou=new st,tE=new st,c_=new st,h_=new st,f_=new st;class Wn{constructor(t=new st,e=new st,i=new st){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),as.subVectors(t,e),r.cross(as);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,i,r,s){as.subVectors(r,e),vo.subVectors(i,e),u_.subVectors(t,e);const o=as.dot(as),a=as.dot(vo),c=as.dot(u_),f=vo.dot(vo),d=vo.dot(u_),m=o*f-a*a;if(m===0)return s.set(-2,-1,-1);const y=1/m,v=(f*c-a*d)*y,w=(o*d-a*c)*y;return s.set(1-v-w,w,v)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,_o),_o.x>=0&&_o.y>=0&&_o.x+_o.y<=1}static getUV(t,e,i,r,s,o,a,c){return this.getBarycoord(t,e,i,r,_o),c.set(0,0),c.addScaledVector(s,_o.x),c.addScaledVector(o,_o.y),c.addScaledVector(a,_o.z),c}static isFrontFacing(t,e,i,r){return as.subVectors(i,e),vo.subVectors(t,e),as.cross(vo).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return as.subVectors(this.c,this.b),vo.subVectors(this.a,this.b),as.cross(vo).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Wn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Wn.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,r,s){return Wn.getUV(t,this.a,this.b,this.c,e,i,r,s)}containsPoint(t){return Wn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Wn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,r=this.b,s=this.c;let o,a;Du.subVectors(r,i),Ou.subVectors(s,i),c_.subVectors(t,i);const c=Du.dot(c_),f=Ou.dot(c_);if(c<=0&&f<=0)return e.copy(i);h_.subVectors(t,r);const d=Du.dot(h_),m=Ou.dot(h_);if(d>=0&&m<=d)return e.copy(r);const y=c*m-d*f;if(y<=0&&c>=0&&d<=0)return o=c/(c-d),e.copy(i).addScaledVector(Du,o);f_.subVectors(t,s);const v=Du.dot(f_),w=Ou.dot(f_);if(w>=0&&v<=w)return e.copy(s);const S=v*f-c*w;if(S<=0&&f>=0&&w<=0)return a=f/(f-w),e.copy(i).addScaledVector(Ou,a);const P=d*w-v*m;if(P<=0&&m-d>=0&&v-w>=0)return tE.subVectors(s,r),a=(m-d)/(m-d+(v-w)),e.copy(r).addScaledVector(tE,a);const b=1/(P+S+y);return o=S*b,a=y*b,e.copy(i).addScaledVector(Du,o).addScaledVector(Ou,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let n6=0;class Ti extends Nl{constructor(){super(),Object.defineProperty(this,"id",{value:n6++}),this.uuid=ps(),this.name="",this.type="Material",this.fog=!0,this.blending=Tf,this.side=qf,this.vertexColors=!1,this.opacity=1,this.format=xr,this.transparent=!1,this.blendSrc=uk,this.blendDst=ck,this.blendEquation=Yu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Nx,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kj,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Jv,this.stencilZFail=Jv,this.stencilZPass=Jv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===lk;continue}const r=this[e];if(r===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheenTint&&this.sheenTint.isColor&&(i.sheenTint=this.sheenTint.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(i.specularTint=this.specularTint.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(i.specularTintMap=this.specularTintMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationTint!==void 0&&(i.attenuationTint=this.attenuationTint.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Tf&&(i.blending=this.blending),this.side!==qf&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==xr&&(i.format=this.format),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(e){const s=r(t.textures),o=r(t.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const r=e.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}Ti.prototype.isMaterial=!0;const vk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ls={h:0,s:0,l:0},nm={h:0,s:0,l:0};function d_(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}function p_(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function m_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}class he{constructor(t,e,i){return e===void 0&&i===void 0?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this}setRGB(t,e,i){return this.r=t,this.g=e,this.b=i,this}setHSL(t,e,i){if(t=gw(t,1),e=Oi(e,0,1),i=Oi(i,0,1),e===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+e):i+e-i*e,s=2*i-r;this.r=d_(s,r,t+1/3),this.g=d_(s,r,t),this.b=d_(s,r,t-1/3)}return this}setStyle(t){function e(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let r;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const a=parseFloat(r[1])/360,c=parseInt(r[2],10)/100,f=parseInt(r[3],10)/100;return e(r[4]),this.setHSL(a,c,f)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=vk[t.toLowerCase()];return e!==void 0?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=p_(t.r),this.g=p_(t.g),this.b=p_(t.b),this}copyLinearToSRGB(t){return this.r=m_(t.r),this.g=m_(t.g),this.b=m_(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,i=this.g,r=this.b,s=Math.max(e,i,r),o=Math.min(e,i,r);let a,c;const f=(o+s)/2;if(o===s)a=0,c=0;else{const d=s-o;switch(c=f<=.5?d/(s+o):d/(2-s-o),s){case e:a=(i-r)/d+(i<r?6:0);break;case i:a=(r-e)/d+2;break;case r:a=(e-i)/d+4;break}a/=6}return t.h=a,t.s=c,t.l=f,t}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(t,e,i){return this.getHSL(ls),ls.h+=t,ls.s+=e,ls.l+=i,this.setHSL(ls.h,ls.s,ls.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(ls),t.getHSL(nm);const i=Cf(ls.h,nm.h,e),r=Cf(ls.s,nm.s,e),s=Cf(ls.l,nm.l,e);return this.setHSL(i,r,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}he.NAMES=vk;he.prototype.isColor=!0;he.prototype.r=1;he.prototype.g=1;he.prototype.b=1;class yw extends Ti{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new he(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ig,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}yw.prototype.isMeshBasicMaterial=!0;const an=new st,im=new Zt;class Gn{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i===!0,this.usage=Yf,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let i=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new he),e[i++]=o.r,e[i++]=o.g,e[i++]=o.b}return this}copyVector2sArray(t){const e=this.array;let i=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Zt),e[i++]=o.x,e[i++]=o.y}return this}copyVector3sArray(t){const e=this.array;let i=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new st),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this}copyVector4sArray(t){const e=this.array;let i=0;for(let r=0,s=t.length;r<s;r++){let o=t[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new en),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)im.fromBufferAttribute(this,e),im.applyMatrix3(t),this.setXY(e,im.x,im.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)an.fromBufferAttribute(this,e),an.applyMatrix3(t),this.setXYZ(e,an.x,an.y,an.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)an.x=this.getX(e),an.y=this.getY(e),an.z=this.getZ(e),an.applyMatrix4(t),this.setXYZ(e,an.x,an.y,an.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)an.x=this.getX(e),an.y=this.getY(e),an.z=this.getZ(e),an.applyNormalMatrix(t),this.setXYZ(e,an.x,an.y,an.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)an.x=this.getX(e),an.y=this.getY(e),an.z=this.getZ(e),an.transformDirection(t),this.setXYZ(e,an.x,an.y,an.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Yf&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}}Gn.prototype.isBufferAttribute=!0;class _k extends Gn{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class xk extends Gn{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class i6 extends Gn{constructor(t,e,i){super(new Uint16Array(t),e,i)}}i6.prototype.isFloat16BufferAttribute=!0;class ei extends Gn{constructor(t,e,i){super(new Float32Array(t),e,i)}}function wk(n){if(n.length===0)return-1/0;let t=n[0];for(let e=1,i=n.length;e<i;++e)n[e]>t&&(t=n[e]);return t}let r6=0;const zr=new ve,g_=new Ze,Nu=new st,gr=new qr,jh=new qr,Yn=new st;class nn extends Nl{constructor(){super(),Object.defineProperty(this,"id",{value:r6++}),this.uuid=ps(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(wk(t)>65535?xk:_k)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new ai().getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return zr.makeRotationFromQuaternion(t),this.applyMatrix4(zr),this}rotateX(t){return zr.makeRotationX(t),this.applyMatrix4(zr),this}rotateY(t){return zr.makeRotationY(t),this.applyMatrix4(zr),this}rotateZ(t){return zr.makeRotationZ(t),this.applyMatrix4(zr),this}translate(t,e,i){return zr.makeTranslation(t,e,i),this.applyMatrix4(zr),this}scale(t,e,i){return zr.makeScale(t,e,i),this.applyMatrix4(zr),this}lookAt(t){return g_.lookAt(t),g_.updateMatrix(),this.applyMatrix4(g_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nu).negate(),this.translate(Nu.x,Nu.y,Nu.z),this}setFromPoints(t){const e=[];for(let i=0,r=t.length;i<r;i++){const s=t[i];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ei(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new st(-1/0,-1/0,-1/0),new st(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){const s=e[i];gr.setFromBufferAttribute(s),this.morphTargetsRelative?(Yn.addVectors(this.boundingBox.min,gr.min),this.boundingBox.expandByPoint(Yn),Yn.addVectors(this.boundingBox.max,gr.max),this.boundingBox.expandByPoint(Yn)):(this.boundingBox.expandByPoint(gr.min),this.boundingBox.expandByPoint(gr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fc);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new st,1/0);return}if(t){const i=this.boundingSphere.center;if(gr.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++){const a=e[s];jh.setFromBufferAttribute(a),this.morphTargetsRelative?(Yn.addVectors(gr.min,jh.min),gr.expandByPoint(Yn),Yn.addVectors(gr.max,jh.max),gr.expandByPoint(Yn)):(gr.expandByPoint(jh.min),gr.expandByPoint(jh.max))}gr.getCenter(i);let r=0;for(let s=0,o=t.count;s<o;s++)Yn.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(Yn));if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s],c=this.morphTargetsRelative;for(let f=0,d=a.count;f<d;f++)Yn.fromBufferAttribute(a,f),c&&(Nu.fromBufferAttribute(t,f),Yn.add(Nu)),r=Math.max(r,i.distanceToSquared(Yn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.array,r=e.position.array,s=e.normal.array,o=e.uv.array,a=r.length/3;e.tangent===void 0&&this.setAttribute("tangent",new Gn(new Float32Array(4*a),4));const c=e.tangent.array,f=[],d=[];for(let W=0;W<a;W++)f[W]=new st,d[W]=new st;const m=new st,y=new st,v=new st,w=new Zt,S=new Zt,P=new Zt,b=new st,M=new st;function R(W,U,tt){m.fromArray(r,W*3),y.fromArray(r,U*3),v.fromArray(r,tt*3),w.fromArray(o,W*2),S.fromArray(o,U*2),P.fromArray(o,tt*2),y.sub(m),v.sub(m),S.sub(w),P.sub(w);const K=1/(S.x*P.y-P.x*S.y);isFinite(K)&&(b.copy(y).multiplyScalar(P.y).addScaledVector(v,-S.y).multiplyScalar(K),M.copy(v).multiplyScalar(S.x).addScaledVector(y,-P.x).multiplyScalar(K),f[W].add(b),f[U].add(b),f[tt].add(b),d[W].add(M),d[U].add(M),d[tt].add(M))}let O=this.groups;O.length===0&&(O=[{start:0,count:i.length}]);for(let W=0,U=O.length;W<U;++W){const tt=O[W],K=tt.start,Y=tt.count;for(let rt=K,at=K+Y;rt<at;rt+=3)R(i[rt+0],i[rt+1],i[rt+2])}const k=new st,N=new st,D=new st,I=new st;function H(W){D.fromArray(s,W*3),I.copy(D);const U=f[W];k.copy(U),k.sub(D.multiplyScalar(D.dot(U))).normalize(),N.crossVectors(I,U);const K=N.dot(d[W])<0?-1:1;c[W*4]=k.x,c[W*4+1]=k.y,c[W*4+2]=k.z,c[W*4+3]=K}for(let W=0,U=O.length;W<U;++W){const tt=O[W],K=tt.start,Y=tt.count;for(let rt=K,at=K+Y;rt<at;rt+=3)H(i[rt+0]),H(i[rt+1]),H(i[rt+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Gn(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let y=0,v=i.count;y<v;y++)i.setXYZ(y,0,0,0);const r=new st,s=new st,o=new st,a=new st,c=new st,f=new st,d=new st,m=new st;if(t)for(let y=0,v=t.count;y<v;y+=3){const w=t.getX(y+0),S=t.getX(y+1),P=t.getX(y+2);r.fromBufferAttribute(e,w),s.fromBufferAttribute(e,S),o.fromBufferAttribute(e,P),d.subVectors(o,s),m.subVectors(r,s),d.cross(m),a.fromBufferAttribute(i,w),c.fromBufferAttribute(i,S),f.fromBufferAttribute(i,P),a.add(d),c.add(d),f.add(d),i.setXYZ(w,a.x,a.y,a.z),i.setXYZ(S,c.x,c.y,c.z),i.setXYZ(P,f.x,f.y,f.z)}else for(let y=0,v=e.count;y<v;y+=3)r.fromBufferAttribute(e,y+0),s.fromBufferAttribute(e,y+1),o.fromBufferAttribute(e,y+2),d.subVectors(o,s),m.subVectors(r,s),d.cross(m),i.setXYZ(y+0,d.x,d.y,d.z),i.setXYZ(y+1,d.x,d.y,d.z),i.setXYZ(y+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(t.attributes[r]===void 0)continue;const o=i[r].array,a=t.attributes[r],c=a.array,f=a.itemSize*e,d=Math.min(c.length,o.length-f);for(let m=0,y=f;m<d;m++,y++)o[y]=c[m]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Yn.fromBufferAttribute(t,e),Yn.normalize(),t.setXYZ(e,Yn.x,Yn.y,Yn.z)}toNonIndexed(){function t(a,c){const f=a.array,d=a.itemSize,m=a.normalized,y=new f.constructor(c.length*d);let v=0,w=0;for(let S=0,P=c.length;S<P;S++){a.isInterleavedBufferAttribute?v=c[S]*a.data.stride+a.offset:v=c[S]*d;for(let b=0;b<d;b++)y[w++]=f[v++]}return new Gn(y,d,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new nn,i=this.index.array,r=this.attributes;for(const a in r){const c=r[a],f=t(c,i);e.setAttribute(a,f)}const s=this.morphAttributes;for(const a in s){const c=[],f=s[a];for(let d=0,m=f.length;d<m;d++){const y=f[d],v=t(y,i);c.push(v)}e.morphAttributes[a]=c}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const f=o[a];e.addGroup(f.start,f.count,f.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(t[f]=c[f]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const c in i){const f=i[c];t.data.attributes[c]=f.toJSON(t.data)}const r={};let s=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],d=[];for(let m=0,y=f.length;m<y;m++){const v=f[m];d.push(v.toJSON(t.data))}d.length>0&&(r[c]=d,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new nn().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone(e));const r=t.attributes;for(const f in r){const d=r[f];this.setAttribute(f,d.clone(e))}const s=t.morphAttributes;for(const f in s){const d=[],m=s[f];for(let y=0,v=m.length;y<v;y++)d.push(m[y].clone(e));this.morphAttributes[f]=d}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let f=0,d=o.length;f<d;f++){const m=o[f];this.addGroup(m.start,m.count,m.materialIndex)}const a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}nn.prototype.isBufferGeometry=!0;const eE=new ve,Fu=new Fl,y_=new Fc,ua=new st,ca=new st,ha=new st,v_=new st,__=new st,x_=new st,rm=new st,sm=new st,om=new st,am=new Zt,lm=new Zt,um=new Zt,w_=new st,cm=new st;class Fi extends Ze{constructor(t=new nn,e=new yw){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),y_.copy(i.boundingSphere),y_.applyMatrix4(s),t.ray.intersectsSphere(y_)===!1)||(eE.copy(s).invert(),Fu.copy(t.ray).applyMatrix4(eE),i.boundingBox!==null&&Fu.intersectsBox(i.boundingBox)===!1))return;let o;if(i.isBufferGeometry){const a=i.index,c=i.attributes.position,f=i.morphAttributes.position,d=i.morphTargetsRelative,m=i.attributes.uv,y=i.attributes.uv2,v=i.groups,w=i.drawRange;if(a!==null)if(Array.isArray(r))for(let S=0,P=v.length;S<P;S++){const b=v[S],M=r[b.materialIndex],R=Math.max(b.start,w.start),O=Math.min(b.start+b.count,w.start+w.count);for(let k=R,N=O;k<N;k+=3){const D=a.getX(k),I=a.getX(k+1),H=a.getX(k+2);o=hm(this,M,t,Fu,c,f,d,m,y,D,I,H),o&&(o.faceIndex=Math.floor(k/3),o.face.materialIndex=b.materialIndex,e.push(o))}}else{const S=Math.max(0,w.start),P=Math.min(a.count,w.start+w.count);for(let b=S,M=P;b<M;b+=3){const R=a.getX(b),O=a.getX(b+1),k=a.getX(b+2);o=hm(this,r,t,Fu,c,f,d,m,y,R,O,k),o&&(o.faceIndex=Math.floor(b/3),e.push(o))}}else if(c!==void 0)if(Array.isArray(r))for(let S=0,P=v.length;S<P;S++){const b=v[S],M=r[b.materialIndex],R=Math.max(b.start,w.start),O=Math.min(b.start+b.count,w.start+w.count);for(let k=R,N=O;k<N;k+=3){const D=k,I=k+1,H=k+2;o=hm(this,M,t,Fu,c,f,d,m,y,D,I,H),o&&(o.faceIndex=Math.floor(k/3),o.face.materialIndex=b.materialIndex,e.push(o))}}else{const S=Math.max(0,w.start),P=Math.min(c.count,w.start+w.count);for(let b=S,M=P;b<M;b+=3){const R=b,O=b+1,k=b+2;o=hm(this,r,t,Fu,c,f,d,m,y,R,O,k),o&&(o.faceIndex=Math.floor(b/3),e.push(o))}}}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Fi.prototype.isMesh=!0;function s6(n,t,e,i,r,s,o,a){let c;if(t.side===jn?c=i.intersectTriangle(o,s,r,!0,a):c=i.intersectTriangle(r,s,o,t.side!==kl,a),c===null)return null;cm.copy(a),cm.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(cm);return f<e.near||f>e.far?null:{distance:f,point:cm.clone(),object:n}}function hm(n,t,e,i,r,s,o,a,c,f,d,m){ua.fromBufferAttribute(r,f),ca.fromBufferAttribute(r,d),ha.fromBufferAttribute(r,m);const y=n.morphTargetInfluences;if(s&&y){rm.set(0,0,0),sm.set(0,0,0),om.set(0,0,0);for(let w=0,S=s.length;w<S;w++){const P=y[w],b=s[w];P!==0&&(v_.fromBufferAttribute(b,f),__.fromBufferAttribute(b,d),x_.fromBufferAttribute(b,m),o?(rm.addScaledVector(v_,P),sm.addScaledVector(__,P),om.addScaledVector(x_,P)):(rm.addScaledVector(v_.sub(ua),P),sm.addScaledVector(__.sub(ca),P),om.addScaledVector(x_.sub(ha),P)))}ua.add(rm),ca.add(sm),ha.add(om)}n.isSkinnedMesh&&(n.boneTransform(f,ua),n.boneTransform(d,ca),n.boneTransform(m,ha));const v=s6(n,t,e,i,ua,ca,ha,w_);if(v){a&&(am.fromBufferAttribute(a,f),lm.fromBufferAttribute(a,d),um.fromBufferAttribute(a,m),v.uv=Wn.getUV(w_,ua,ca,ha,am,lm,um,new Zt)),c&&(am.fromBufferAttribute(c,f),lm.fromBufferAttribute(c,d),um.fromBufferAttribute(c,m),v.uv2=Wn.getUV(w_,ua,ca,ha,am,lm,um,new Zt));const w={a:f,b:d,c:m,normal:new st,materialIndex:0};Wn.getNormal(ua,ca,ha,w.normal),v.face=w}return v}class md extends nn{constructor(t=1,e=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],f=[],d=[],m=[];let y=0,v=0;w("z","y","x",-1,-1,i,e,t,o,s,0),w("z","y","x",1,-1,i,e,-t,o,s,1),w("x","z","y",1,1,t,i,e,r,o,2),w("x","z","y",1,-1,t,i,-e,r,o,3),w("x","y","z",1,-1,t,e,i,r,s,4),w("x","y","z",-1,-1,t,e,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new ei(f,3)),this.setAttribute("normal",new ei(d,3)),this.setAttribute("uv",new ei(m,2));function w(S,P,b,M,R,O,k,N,D,I,H){const W=O/D,U=k/I,tt=O/2,K=k/2,Y=N/2,rt=D+1,at=I+1;let it=0,J=0;const pt=new st;for(let F=0;F<at;F++){const G=F*U-K;for(let lt=0;lt<rt;lt++){const z=lt*W-tt;pt[S]=z*M,pt[P]=G*R,pt[b]=Y,f.push(pt.x,pt.y,pt.z),pt[S]=0,pt[P]=0,pt[b]=N>0?1:-1,d.push(pt.x,pt.y,pt.z),m.push(lt/D),m.push(1-F/I),it+=1}}for(let F=0;F<I;F++)for(let G=0;G<D;G++){const lt=y+G+rt*F,z=y+G+rt*(F+1),mt=y+(G+1)+rt*(F+1),_t=y+(G+1)+rt*F;c.push(lt,z,_t),c.push(z,mt,_t),J+=6}a.addGroup(v,J,H),v+=J,y+=it}}static fromJSON(t){return new md(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Sc(n){const t={};for(const e in n){t[e]={};for(const i in n[e]){const r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function vi(n){const t={};for(let e=0;e<n.length;e++){const i=Sc(n[e]);for(const r in i)t[r]=i[r]}return t}const o6={clone:Sc,merge:vi};var a6=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,l6=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Rl extends Ti{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=a6,this.fragmentShader=l6,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Sc(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?e.uniforms[r]={type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?e.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?e.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?e.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?e.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?e.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?e.uniforms[r]={type:"m4",value:o.toArray()}:e.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}Rl.prototype.isShaderMaterial=!0;class vw extends Ze{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new ve,this.projectionMatrix=new ve,this.projectionMatrixInverse=new ve}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}vw.prototype.isCamera=!0;class Kn extends vw{constructor(t=50,e=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=Kf*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Pf*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Kf*2*Math.atan(Math.tan(Pf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,r,s,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Pf*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,f=o.fullHeight;s+=o.offsetX*r/c,e-=o.offsetY*i/f,r*=o.width/c,i*=o.height/f}const a=this.filmOffset;a!==0&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Kn.prototype.isPerspectiveCamera=!0;const zu=90,Bu=1;class _w extends Ze{constructor(t,e,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new Kn(zu,Bu,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new st(1,0,0)),this.add(r);const s=new Kn(zu,Bu,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new st(-1,0,0)),this.add(s);const o=new Kn(zu,Bu,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new st(0,1,0)),this.add(o);const a=new Kn(zu,Bu,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new st(0,-1,0)),this.add(a);const c=new Kn(zu,Bu,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new st(0,0,1)),this.add(c);const f=new Kn(zu,Bu,t,e);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new st(0,0,-1)),this.add(f)}update(t,e){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,c,f]=this.children,d=t.xr.enabled,m=t.getRenderTarget();t.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,r),t.setRenderTarget(i,1),t.render(e,s),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,a),t.setRenderTarget(i,4),t.render(e,c),i.texture.generateMipmaps=y,t.setRenderTarget(i,5),t.render(e,f),t.setRenderTarget(m),t.xr.enabled=d}}class Bg extends li{constructor(t,e,i,r,s,o,a,c,f,d){t=t!==void 0?t:[],e=e!==void 0?e:Dg,a=a!==void 0?a:xa,super(t,e,i,r,s,o,a,c,f,d),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Bg.prototype.isCubeTexture=!0;class bk extends js{constructor(t,e,i){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=i),super(t,t,e),e=e||{},this.texture=new Bg(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:jr,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=xr,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new md(5,5,5),s=new Rl({name:"CubemapFromEquirect",uniforms:Sc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:jn,blending:_a});s.uniforms.tEquirect.value=e;const o=new Fi(r,s),a=e.minFilter;return e.minFilter===Fg&&(e.minFilter=jr),new _w(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,i,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,i,r);t.setRenderTarget(s)}}bk.prototype.isWebGLCubeRenderTarget=!0;const b_=new st,u6=new st,c6=new ai;class Ds{constructor(t=new st(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const r=b_.subVectors(i,e).cross(u6.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const i=t.delta(b_),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(i).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||c6.getNormalMatrix(t),r=this.coplanarPoint(b_).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}Ds.prototype.isPlane=!0;const Vu=new Fc,fm=new st;class Vg{constructor(t=new Ds,e=new Ds,i=new Ds,r=new Ds,s=new Ds,o=new Ds){this.planes=[t,e,i,r,s,o]}set(t,e,i,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],f=i[5],d=i[6],m=i[7],y=i[8],v=i[9],w=i[10],S=i[11],P=i[12],b=i[13],M=i[14],R=i[15];return e[0].setComponents(a-r,m-c,S-y,R-P).normalize(),e[1].setComponents(a+r,m+c,S+y,R+P).normalize(),e[2].setComponents(a+s,m+f,S+v,R+b).normalize(),e[3].setComponents(a-s,m-f,S-v,R-b).normalize(),e[4].setComponents(a-o,m-d,S-w,R-M).normalize(),e[5].setComponents(a+o,m+d,S+w,R+M).normalize(),this}intersectsObject(t){const e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),Vu.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Vu)}intersectsSprite(t){return Vu.center.set(0,0,0),Vu.radius=.7071067811865476,Vu.applyMatrix4(t.matrixWorld),this.intersectsSphere(Vu)}intersectsSphere(t){const e=this.planes,i=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const r=e[i];if(fm.x=r.normal.x>0?t.max.x:t.min.x,fm.y=r.normal.y>0?t.max.y:t.min.y,fm.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(fm)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Sk(){let n=null,t=!1,e=null,i=null;function r(s,o){e(s,o),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){n=s}}}function h6(n,t){const e=t.isWebGL2,i=new WeakMap;function r(f,d){const m=f.array,y=f.usage,v=n.createBuffer();n.bindBuffer(d,v),n.bufferData(d,m,y),f.onUploadCallback();let w=5126;return m instanceof Float32Array?w=5126:m instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):m instanceof Uint16Array?f.isFloat16BufferAttribute?e?w=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):w=5123:m instanceof Int16Array?w=5122:m instanceof Uint32Array?w=5125:m instanceof Int32Array?w=5124:m instanceof Int8Array?w=5120:(m instanceof Uint8Array||m instanceof Uint8ClampedArray)&&(w=5121),{buffer:v,type:w,bytesPerElement:m.BYTES_PER_ELEMENT,version:f.version}}function s(f,d,m){const y=d.array,v=d.updateRange;n.bindBuffer(m,f),v.count===-1?n.bufferSubData(m,0,y):(e?n.bufferSubData(m,v.offset*y.BYTES_PER_ELEMENT,y,v.offset,v.count):n.bufferSubData(m,v.offset*y.BYTES_PER_ELEMENT,y.subarray(v.offset,v.offset+v.count)),v.count=-1)}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const d=i.get(f);d&&(n.deleteBuffer(d.buffer),i.delete(f))}function c(f,d){if(f.isGLBufferAttribute){const y=i.get(f);(!y||y.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const m=i.get(f);m===void 0?i.set(f,r(f,d)):m.version<f.version&&(s(m.buffer,f,d),m.version=f.version)}return{get:o,remove:a,update:c}}class xw extends nn{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};const s=t/2,o=e/2,a=Math.floor(i),c=Math.floor(r),f=a+1,d=c+1,m=t/a,y=e/c,v=[],w=[],S=[],P=[];for(let b=0;b<d;b++){const M=b*y-o;for(let R=0;R<f;R++){const O=R*m-s;w.push(O,-M,0),S.push(0,0,1),P.push(R/a),P.push(1-b/c)}}for(let b=0;b<c;b++)for(let M=0;M<a;M++){const R=M+f*b,O=M+f*(b+1),k=M+1+f*(b+1),N=M+1+f*b;v.push(R,O,N),v.push(O,k,N)}this.setIndex(v),this.setAttribute("position",new ei(w,3)),this.setAttribute("normal",new ei(S,3)),this.setAttribute("uv",new ei(P,2))}static fromJSON(t){return new xw(t.width,t.height,t.widthSegments,t.heightSegments)}}var f6=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,d6=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,p6=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,m6=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,g6=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,y6=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,v6="vec3 transformed = vec3( position );",_6=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,x6=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotVH = saturate( dot( geometry.viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float NoH ) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float NoV, float NoL ) {
	return saturate( 1.0 / ( 4.0 * ( NoL + NoV - NoL * NoV ) ) );
}
vec3 BRDF_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,w6=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,b6=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,S6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,M6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,T6=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,E6=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,P6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,C6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,A6=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,L6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,k6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,R6=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,I6=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,D6=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,O6=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,N6=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,F6="gl_FragColor = linearToOutputTexel( gl_FragColor );",z6=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,B6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,V6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,U6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,H6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,j6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,W6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,G6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Z6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,q6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,X6=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Y6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,K6=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,J6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Q6=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in GeometricContext geometry ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,tW=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,eW=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,nW=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,iW=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,rW=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularTintFactor = specularTint;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARTINTMAP
			specularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularTintFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenTint = sheenTint;
#endif`,sW=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenTint;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( material.roughness, directLight.direction, geometry, material.sheenTint );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,oW=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,aW=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lW=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,uW=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,cW=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hW=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,fW=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,dW=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,pW=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mW=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gW=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yW=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,vW=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_W=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,xW=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,wW=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,bW=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,SW=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,MW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,TW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,EW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,PW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,CW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,AW=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,LW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,kW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,RW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,IW=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,DW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,OW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,NW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,FW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,BW=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,VW=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,UW=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,HW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,jW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,WW=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,GW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,$W=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ZW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,qW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,XW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,YW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,KW=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationTint, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = transmission.a;
#endif`,JW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationTint;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,QW=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,tG=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,eG=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,nG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,iG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,rG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,sG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,oG=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,aG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,lG=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,uG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,hG=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fG=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,dG=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,pG=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,mG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,gG=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yG=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vG=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_G=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,xG=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wG=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bG=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SG=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,MG=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,TG=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,EG=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PG=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CG=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularTint;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARTINTMAP
		uniform sampler2D specularTintMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenTint;
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AG=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,LG=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kG=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,IG=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,DG=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,OG=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,FG=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const Ne={alphamap_fragment:f6,alphamap_pars_fragment:d6,alphatest_fragment:p6,alphatest_pars_fragment:m6,aomap_fragment:g6,aomap_pars_fragment:y6,begin_vertex:v6,beginnormal_vertex:_6,bsdfs:x6,bumpmap_pars_fragment:w6,clipping_planes_fragment:b6,clipping_planes_pars_fragment:S6,clipping_planes_pars_vertex:M6,clipping_planes_vertex:T6,color_fragment:E6,color_pars_fragment:P6,color_pars_vertex:C6,color_vertex:A6,common:L6,cube_uv_reflection_fragment:k6,defaultnormal_vertex:R6,displacementmap_pars_vertex:I6,displacementmap_vertex:D6,emissivemap_fragment:O6,emissivemap_pars_fragment:N6,encodings_fragment:F6,encodings_pars_fragment:z6,envmap_fragment:B6,envmap_common_pars_fragment:V6,envmap_pars_fragment:U6,envmap_pars_vertex:H6,envmap_physical_pars_fragment:Q6,envmap_vertex:j6,fog_vertex:W6,fog_pars_vertex:G6,fog_fragment:$6,fog_pars_fragment:Z6,gradientmap_pars_fragment:q6,lightmap_fragment:X6,lightmap_pars_fragment:Y6,lights_lambert_vertex:K6,lights_pars_begin:J6,lights_toon_fragment:tW,lights_toon_pars_fragment:eW,lights_phong_fragment:nW,lights_phong_pars_fragment:iW,lights_physical_fragment:rW,lights_physical_pars_fragment:sW,lights_fragment_begin:oW,lights_fragment_maps:aW,lights_fragment_end:lW,logdepthbuf_fragment:uW,logdepthbuf_pars_fragment:cW,logdepthbuf_pars_vertex:hW,logdepthbuf_vertex:fW,map_fragment:dW,map_pars_fragment:pW,map_particle_fragment:mW,map_particle_pars_fragment:gW,metalnessmap_fragment:yW,metalnessmap_pars_fragment:vW,morphnormal_vertex:_W,morphtarget_pars_vertex:xW,morphtarget_vertex:wW,normal_fragment_begin:bW,normal_fragment_maps:SW,normal_pars_fragment:MW,normal_pars_vertex:TW,normal_vertex:EW,normalmap_pars_fragment:PW,clearcoat_normal_fragment_begin:CW,clearcoat_normal_fragment_maps:AW,clearcoat_pars_fragment:LW,output_fragment:kW,packing:RW,premultiplied_alpha_fragment:IW,project_vertex:DW,dithering_fragment:OW,dithering_pars_fragment:NW,roughnessmap_fragment:FW,roughnessmap_pars_fragment:zW,shadowmap_pars_fragment:BW,shadowmap_pars_vertex:VW,shadowmap_vertex:UW,shadowmask_pars_fragment:HW,skinbase_vertex:jW,skinning_pars_vertex:WW,skinning_vertex:GW,skinnormal_vertex:$W,specularmap_fragment:ZW,specularmap_pars_fragment:qW,tonemapping_fragment:XW,tonemapping_pars_fragment:YW,transmission_fragment:KW,transmission_pars_fragment:JW,uv_pars_fragment:QW,uv_pars_vertex:tG,uv_vertex:eG,uv2_pars_fragment:nG,uv2_pars_vertex:iG,uv2_vertex:rG,worldpos_vertex:sG,background_frag:oG,background_vert:aG,cube_frag:lG,cube_vert:uG,depth_frag:cG,depth_vert:hG,distanceRGBA_frag:fG,distanceRGBA_vert:dG,equirect_frag:pG,equirect_vert:mG,linedashed_frag:gG,linedashed_vert:yG,meshbasic_frag:vG,meshbasic_vert:_G,meshlambert_frag:xG,meshlambert_vert:wG,meshmatcap_frag:bG,meshmatcap_vert:SG,meshnormal_frag:MG,meshnormal_vert:TG,meshphong_frag:EG,meshphong_vert:PG,meshphysical_frag:CG,meshphysical_vert:AG,meshtoon_frag:LG,meshtoon_vert:kG,points_frag:RG,points_vert:IG,shadow_frag:DG,shadow_vert:OG,sprite_frag:NG,sprite_vert:FG},Qt={common:{diffuse:{value:new he(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ai},uv2Transform:{value:new ai},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Zt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new he(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new he(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ai}},sprite:{diffuse:{value:new he(16777215)},opacity:{value:1},center:{value:new Zt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ai}}},Os={basic:{uniforms:vi([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.fog]),vertexShader:Ne.meshbasic_vert,fragmentShader:Ne.meshbasic_frag},lambert:{uniforms:vi([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.fog,Qt.lights,{emissive:{value:new he(0)}}]),vertexShader:Ne.meshlambert_vert,fragmentShader:Ne.meshlambert_frag},phong:{uniforms:vi([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,Qt.lights,{emissive:{value:new he(0)},specular:{value:new he(1118481)},shininess:{value:30}}]),vertexShader:Ne.meshphong_vert,fragmentShader:Ne.meshphong_frag},standard:{uniforms:vi([Qt.common,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.roughnessmap,Qt.metalnessmap,Qt.fog,Qt.lights,{emissive:{value:new he(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ne.meshphysical_vert,fragmentShader:Ne.meshphysical_frag},toon:{uniforms:vi([Qt.common,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.gradientmap,Qt.fog,Qt.lights,{emissive:{value:new he(0)}}]),vertexShader:Ne.meshtoon_vert,fragmentShader:Ne.meshtoon_frag},matcap:{uniforms:vi([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,{matcap:{value:null}}]),vertexShader:Ne.meshmatcap_vert,fragmentShader:Ne.meshmatcap_frag},points:{uniforms:vi([Qt.points,Qt.fog]),vertexShader:Ne.points_vert,fragmentShader:Ne.points_frag},dashed:{uniforms:vi([Qt.common,Qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ne.linedashed_vert,fragmentShader:Ne.linedashed_frag},depth:{uniforms:vi([Qt.common,Qt.displacementmap]),vertexShader:Ne.depth_vert,fragmentShader:Ne.depth_frag},normal:{uniforms:vi([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,{opacity:{value:1}}]),vertexShader:Ne.meshnormal_vert,fragmentShader:Ne.meshnormal_frag},sprite:{uniforms:vi([Qt.sprite,Qt.fog]),vertexShader:Ne.sprite_vert,fragmentShader:Ne.sprite_frag},background:{uniforms:{uvTransform:{value:new ai},t2D:{value:null}},vertexShader:Ne.background_vert,fragmentShader:Ne.background_frag},cube:{uniforms:vi([Qt.envmap,{opacity:{value:1}}]),vertexShader:Ne.cube_vert,fragmentShader:Ne.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ne.equirect_vert,fragmentShader:Ne.equirect_frag},distanceRGBA:{uniforms:vi([Qt.common,Qt.displacementmap,{referencePosition:{value:new st},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ne.distanceRGBA_vert,fragmentShader:Ne.distanceRGBA_frag},shadow:{uniforms:vi([Qt.lights,Qt.fog,{color:{value:new he(0)},opacity:{value:1}}]),vertexShader:Ne.shadow_vert,fragmentShader:Ne.shadow_frag}};Os.physical={uniforms:vi([Os.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Zt(1,1)},clearcoatNormalMap:{value:null},sheenTint:{value:new he(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Zt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new he(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new he(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Ne.meshphysical_vert,fragmentShader:Ne.meshphysical_frag};function zG(n,t,e,i,r){const s=new he(0);let o=0,a,c,f=null,d=0,m=null;function y(w,S){let P=!1,b=S.isScene===!0?S.background:null;b&&b.isTexture&&(b=t.get(b));const M=n.xr,R=M.getSession&&M.getSession();R&&R.environmentBlendMode==="additive"&&(b=null),b===null?v(s,o):b&&b.isColor&&(v(b,1),P=!0),(n.autoClear||P)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Ng)?(c===void 0&&(c=new Fi(new md(1,1,1),new Rl({name:"BackgroundCubeMaterial",uniforms:Sc(Os.cube.uniforms),vertexShader:Os.cube.vertexShader,fragmentShader:Os.cube.fragmentShader,side:jn,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(O,k,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,(f!==b||d!==b.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=b,d=b.version,m=n.toneMapping),w.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(a===void 0&&(a=new Fi(new xw(2,2),new Rl({name:"BackgroundMaterial",uniforms:Sc(Os.background.uniforms),vertexShader:Os.background.vertexShader,fragmentShader:Os.background.fragmentShader,side:qf,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=b,b.matrixAutoUpdate===!0&&b.updateMatrix(),a.material.uniforms.uvTransform.value.copy(b.matrix),(f!==b||d!==b.version||m!==n.toneMapping)&&(a.material.needsUpdate=!0,f=b,d=b.version,m=n.toneMapping),w.unshift(a,a.geometry,a.material,0,0,null))}function v(w,S){e.buffers.color.setClear(w.r,w.g,w.b,S,r)}return{getClearColor:function(){return s},setClearColor:function(w,S=1){s.set(w),o=S,v(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(w){o=w,v(s,o)},render:y}}function BG(n,t,e,i){const r=n.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},c=S(null);let f=c;function d(K,Y,rt,at,it){let J=!1;if(o){const pt=w(at,rt,Y);f!==pt&&(f=pt,y(f.object)),J=P(at,it),J&&b(at,it)}else{const pt=Y.wireframe===!0;(f.geometry!==at.id||f.program!==rt.id||f.wireframe!==pt)&&(f.geometry=at.id,f.program=rt.id,f.wireframe=pt,J=!0)}K.isInstancedMesh===!0&&(J=!0),it!==null&&e.update(it,34963),J&&(D(K,Y,rt,at),it!==null&&n.bindBuffer(34963,e.get(it).buffer))}function m(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function y(K){return i.isWebGL2?n.bindVertexArray(K):s.bindVertexArrayOES(K)}function v(K){return i.isWebGL2?n.deleteVertexArray(K):s.deleteVertexArrayOES(K)}function w(K,Y,rt){const at=rt.wireframe===!0;let it=a[K.id];it===void 0&&(it={},a[K.id]=it);let J=it[Y.id];J===void 0&&(J={},it[Y.id]=J);let pt=J[at];return pt===void 0&&(pt=S(m()),J[at]=pt),pt}function S(K){const Y=[],rt=[],at=[];for(let it=0;it<r;it++)Y[it]=0,rt[it]=0,at[it]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:rt,attributeDivisors:at,object:K,attributes:{},index:null}}function P(K,Y){const rt=f.attributes,at=K.attributes;let it=0;for(const J in at){const pt=rt[J],F=at[J];if(pt===void 0||pt.attribute!==F||pt.data!==F.data)return!0;it++}return f.attributesNum!==it||f.index!==Y}function b(K,Y){const rt={},at=K.attributes;let it=0;for(const J in at){const pt=at[J],F={};F.attribute=pt,pt.data&&(F.data=pt.data),rt[J]=F,it++}f.attributes=rt,f.attributesNum=it,f.index=Y}function M(){const K=f.newAttributes;for(let Y=0,rt=K.length;Y<rt;Y++)K[Y]=0}function R(K){O(K,0)}function O(K,Y){const rt=f.newAttributes,at=f.enabledAttributes,it=f.attributeDivisors;rt[K]=1,at[K]===0&&(n.enableVertexAttribArray(K),at[K]=1),it[K]!==Y&&((i.isWebGL2?n:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](K,Y),it[K]=Y)}function k(){const K=f.newAttributes,Y=f.enabledAttributes;for(let rt=0,at=Y.length;rt<at;rt++)Y[rt]!==K[rt]&&(n.disableVertexAttribArray(rt),Y[rt]=0)}function N(K,Y,rt,at,it,J){i.isWebGL2===!0&&(rt===5124||rt===5125)?n.vertexAttribIPointer(K,Y,rt,it,J):n.vertexAttribPointer(K,Y,rt,at,it,J)}function D(K,Y,rt,at){if(i.isWebGL2===!1&&(K.isInstancedMesh||at.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;M();const it=at.attributes,J=rt.getAttributes(),pt=Y.defaultAttributeValues;for(const F in J){const G=J[F];if(G.location>=0){let lt=it[F];if(lt===void 0&&(F==="instanceMatrix"&&K.instanceMatrix&&(lt=K.instanceMatrix),F==="instanceColor"&&K.instanceColor&&(lt=K.instanceColor)),lt!==void 0){const z=lt.normalized,mt=lt.itemSize,_t=e.get(lt);if(_t===void 0)continue;const nt=_t.buffer,Ot=_t.type,At=_t.bytesPerElement;if(lt.isInterleavedBufferAttribute){const kt=lt.data,Ft=kt.stride,jt=lt.offset;if(kt&&kt.isInstancedInterleavedBuffer){for(let bt=0;bt<G.locationSize;bt++)O(G.location+bt,kt.meshPerAttribute);K.isInstancedMesh!==!0&&at._maxInstanceCount===void 0&&(at._maxInstanceCount=kt.meshPerAttribute*kt.count)}else for(let bt=0;bt<G.locationSize;bt++)R(G.location+bt);n.bindBuffer(34962,nt);for(let bt=0;bt<G.locationSize;bt++)N(G.location+bt,mt/G.locationSize,Ot,z,Ft*At,(jt+mt/G.locationSize*bt)*At)}else{if(lt.isInstancedBufferAttribute){for(let kt=0;kt<G.locationSize;kt++)O(G.location+kt,lt.meshPerAttribute);K.isInstancedMesh!==!0&&at._maxInstanceCount===void 0&&(at._maxInstanceCount=lt.meshPerAttribute*lt.count)}else for(let kt=0;kt<G.locationSize;kt++)R(G.location+kt);n.bindBuffer(34962,nt);for(let kt=0;kt<G.locationSize;kt++)N(G.location+kt,mt/G.locationSize,Ot,z,mt*At,mt/G.locationSize*kt*At)}}else if(pt!==void 0){const z=pt[F];if(z!==void 0)switch(z.length){case 2:n.vertexAttrib2fv(G.location,z);break;case 3:n.vertexAttrib3fv(G.location,z);break;case 4:n.vertexAttrib4fv(G.location,z);break;default:n.vertexAttrib1fv(G.location,z)}}}}k()}function I(){U();for(const K in a){const Y=a[K];for(const rt in Y){const at=Y[rt];for(const it in at)v(at[it].object),delete at[it];delete Y[rt]}delete a[K]}}function H(K){if(a[K.id]===void 0)return;const Y=a[K.id];for(const rt in Y){const at=Y[rt];for(const it in at)v(at[it].object),delete at[it];delete Y[rt]}delete a[K.id]}function W(K){for(const Y in a){const rt=a[Y];if(rt[K.id]===void 0)continue;const at=rt[K.id];for(const it in at)v(at[it].object),delete at[it];delete rt[K.id]}}function U(){tt(),f!==c&&(f=c,y(f.object))}function tt(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:d,reset:U,resetDefaultState:tt,dispose:I,releaseStatesOfGeometry:H,releaseStatesOfProgram:W,initAttributes:M,enableAttribute:R,disableUnusedAttributes:k}}function VG(n,t,e,i){const r=i.isWebGL2;let s;function o(f){s=f}function a(f,d){n.drawArrays(s,f,d),e.update(d,s,1)}function c(f,d,m){if(m===0)return;let y,v;if(r)y=n,v="drawArraysInstanced";else if(y=t.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[v](s,f,d,m),e.update(d,s,m)}this.setMode=o,this.render=a,this.renderInstances=c}function UG(n,t,e){let i;function r(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){const D=t.get("EXT_texture_filter_anisotropic");i=n.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(D){if(D==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";D="mediump"}return D==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=e.precision!==void 0?e.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const f=o||t.has("WEBGL_draw_buffers"),d=e.logarithmicDepthBuffer===!0,m=n.getParameter(34930),y=n.getParameter(35660),v=n.getParameter(3379),w=n.getParameter(34076),S=n.getParameter(34921),P=n.getParameter(36347),b=n.getParameter(36348),M=n.getParameter(36349),R=y>0,O=o||t.has("OES_texture_float"),k=R&&O,N=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:m,maxVertexTextures:y,maxTextureSize:v,maxCubemapSize:w,maxAttributes:S,maxVertexUniforms:P,maxVaryings:b,maxFragmentUniforms:M,vertexTextures:R,floatFragmentTextures:O,floatVertexTextures:k,maxSamples:N}}function HG(n){const t=this;let e=null,i=0,r=!1,s=!1;const o=new Ds,a=new ai,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,y,v){const w=m.length!==0||y||i!==0||r;return r=y,e=d(m,v,0),i=m.length,w},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,f()},this.setState=function(m,y,v){const w=m.clippingPlanes,S=m.clipIntersection,P=m.clipShadows,b=n.get(m);if(!r||w===null||w.length===0||s&&!P)s?d(null):f();else{const M=s?0:i,R=M*4;let O=b.clippingState||null;c.value=O,O=d(w,y,R,v);for(let k=0;k!==R;++k)O[k]=e[k];b.clippingState=O,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=M}};function f(){c.value!==e&&(c.value=e,c.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function d(m,y,v,w){const S=m!==null?m.length:0;let P=null;if(S!==0){if(P=c.value,w!==!0||P===null){const b=v+S*4,M=y.matrixWorldInverse;a.getNormalMatrix(M),(P===null||P.length<b)&&(P=new Float32Array(b));for(let R=0,O=v;R!==S;++R,O+=4)o.copy(m[R]).applyMatrix4(M,a),o.normal.toArray(P,O),P[O+3]=o.constant}c.value=P,c.needsUpdate=!0}return t.numPlanes=S,t.numIntersection=0,P}}function jG(n){let t=new WeakMap;function e(o,a){return a===Fx?o.mapping=Dg:a===zx&&(o.mapping=Og),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Fx||a===zx)if(t.has(o)){const c=t.get(o).texture;return e(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const f=n.getRenderTarget(),d=new bk(c.height/2);return d.fromEquirectangularTexture(n,o),t.set(o,d),n.setRenderTarget(f),o.addEventListener("dispose",r),e(d.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=t.get(a);c!==void 0&&(t.delete(a),c.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}class hc extends vw{constructor(t=-1,e=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-t,o=i+t,a=r+e,c=r-e;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,a-=d*this.view.offsetY,c=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}hc.prototype.isOrthographicCamera=!0;class Ug extends Rl{constructor(t){super(t),this.type="RawShaderMaterial"}}Ug.prototype.isRawShaderMaterial=!0;const fc=4,wa=8,Rs=Math.pow(2,wa),Mk=[.125,.215,.35,.446,.526,.582],Tk=wa-fc+1+Mk.length,Uu=20,zs={[tr]:0,[zg]:1,[mw]:2,[dk]:3,[pk]:4,[mk]:5,[pw]:6},S_=new hc,{_lodPlanes:Wh,_sizeLods:nE,_sigmas:dm}=$G(),iE=new he;let M_=null;const dl=(1+Math.sqrt(5))/2,Hu=1/dl,rE=[new st(1,1,1),new st(-1,1,1),new st(1,1,-1),new st(-1,1,-1),new st(0,dl,Hu),new st(0,dl,-Hu),new st(Hu,0,dl),new st(-Hu,0,dl),new st(dl,Hu,0),new st(-dl,Hu,0)];class WG{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=ZG(Uu),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100){M_=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(t,i,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=aE(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=oE(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let t=0;t<Wh.length;t++)Wh[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(M_),t.scissorTest=!1,pm(t,0,0,t.width,t.height)}_fromTexture(t){M_=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:Qn,minFilter:Qn,generateMipmaps:!1,type:bc,format:VH,encoding:GG(t)?t.encoding:mw,depthBuffer:!1},i=sE(e);return i.depthBuffer=!t,this._pingPongRenderTarget=sE(e),i}_compileMaterial(t){const e=new Fi(Wh[0],t);this._renderer.compile(e,S_)}_sceneToCubeUV(t,e,i,r){const a=new Kn(90,1,e,i),c=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],d=this._renderer,m=d.autoClear,y=d.outputEncoding,v=d.toneMapping;d.getClearColor(iE),d.toneMapping=Pl,d.outputEncoding=tr,d.autoClear=!1;const w=new yw({name:"PMREM.Background",side:jn,depthWrite:!1,depthTest:!1}),S=new Fi(new md,w);let P=!1;const b=t.background;b?b.isColor&&(w.color.copy(b),t.background=null,P=!0):(w.color.copy(iE),P=!0);for(let M=0;M<6;M++){const R=M%3;R==0?(a.up.set(0,c[M],0),a.lookAt(f[M],0,0)):R==1?(a.up.set(0,0,c[M]),a.lookAt(0,f[M],0)):(a.up.set(0,c[M],0),a.lookAt(0,0,f[M])),pm(r,R*Rs,M>2?Rs:0,Rs,Rs),d.setRenderTarget(r),P&&d.render(S,a),d.render(t,a)}S.geometry.dispose(),S.material.dispose(),d.toneMapping=v,d.outputEncoding=y,d.autoClear=m,t.background=b}_textureToCubeUV(t,e){const i=this._renderer;t.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=aE()):this._equirectShader==null&&(this._equirectShader=oE());const r=t.isCubeTexture?this._cubemapShader:this._equirectShader,s=new Fi(Wh[0],r),o=r.uniforms;o.envMap.value=t,t.isCubeTexture||o.texelSize.value.set(1/t.image.width,1/t.image.height),o.inputEncoding.value=zs[t.encoding],o.outputEncoding.value=zs[e.texture.encoding],pm(e,0,0,3*Rs,2*Rs),i.setRenderTarget(e),i.render(s,S_)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let r=1;r<Tk;r++){const s=Math.sqrt(dm[r]*dm[r]-dm[r-1]*dm[r-1]),o=rE[(r-1)%rE.length];this._blur(t,r-1,r,s,o)}e.autoClear=i}_blur(t,e,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,r,"latitudinal",s),this._halfBlur(o,t,i,i,r,"longitudinal",s)}_halfBlur(t,e,i,r,s,o,a){const c=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,m=new Fi(Wh[r],f),y=f.uniforms,v=nE[i]-1,w=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*Uu-1),S=s/w,P=isFinite(s)?1+Math.floor(d*S):Uu;P>Uu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${P} samples when the maximum is set to ${Uu}`);const b=[];let M=0;for(let N=0;N<Uu;++N){const D=N/S,I=Math.exp(-D*D/2);b.push(I),N==0?M+=I:N<P&&(M+=2*I)}for(let N=0;N<b.length;N++)b[N]=b[N]/M;y.envMap.value=t.texture,y.samples.value=P,y.weights.value=b,y.latitudinal.value=o==="latitudinal",a&&(y.poleAxis.value=a),y.dTheta.value=w,y.mipInt.value=wa-i,y.inputEncoding.value=zs[t.texture.encoding],y.outputEncoding.value=zs[t.texture.encoding];const R=nE[r],O=3*Math.max(0,Rs-2*R),k=(r===0?0:2*Rs)+2*R*(r>wa-fc?r-wa+fc:0);pm(e,O,k,3*R,2*R),c.setRenderTarget(e),c.render(m,S_)}}function GG(n){return n===void 0||n.type!==bc?!1:n.encoding===tr||n.encoding===zg||n.encoding===pw}function $G(){const n=[],t=[],e=[];let i=wa;for(let r=0;r<Tk;r++){const s=Math.pow(2,i);t.push(s);let o=1/s;r>wa-fc?o=Mk[r-wa+fc-1]:r==0&&(o=0),e.push(o);const a=1/(s-1),c=-a/2,f=1+a/2,d=[c,c,f,c,f,f,c,c,f,f,c,f],m=6,y=6,v=3,w=2,S=1,P=new Float32Array(v*y*m),b=new Float32Array(w*y*m),M=new Float32Array(S*y*m);for(let O=0;O<m;O++){const k=O%3*2/3-1,N=O>2?0:-1,D=[k,N,0,k+2/3,N,0,k+2/3,N+1,0,k,N,0,k+2/3,N+1,0,k,N+1,0];P.set(D,v*y*O),b.set(d,w*y*O);const I=[O,O,O,O,O,O];M.set(I,S*y*O)}const R=new nn;R.setAttribute("position",new Gn(P,v)),R.setAttribute("uv",new Gn(b,w)),R.setAttribute("faceIndex",new Gn(M,S)),n.push(R),i>fc&&i--}return{_lodPlanes:n,_sizeLods:t,_sigmas:e}}function sE(n){const t=new js(3*Rs,3*Rs,n);return t.texture.mapping=Ng,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function pm(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function ZG(n){const t=new Float32Array(n),e=new st(0,1,0);return new Ug({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:e},inputEncoding:{value:zs[tr]},outputEncoding:{value:zs[tr]}},vertexShader:ww(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${bw()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:_a,depthTest:!1,depthWrite:!1})}function oE(){const n=new Zt(1,1);return new Ug({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:zs[tr]},outputEncoding:{value:zs[tr]}},vertexShader:ww(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${bw()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:_a,depthTest:!1,depthWrite:!1})}function aE(){return new Ug({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:zs[tr]},outputEncoding:{value:zs[tr]}},vertexShader:ww(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${bw()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:_a,depthTest:!1,depthWrite:!1})}function ww(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function bw(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function qG(n){let t=new WeakMap,e=null;function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const c=a.mapping,f=c===Fx||c===zx,d=c===Dg||c===Og;if(f||d){if(t.has(a))return t.get(a).texture;{const m=a.image;if(f&&m&&m.height>0||d&&m&&r(m)){const y=n.getRenderTarget();e===null&&(e=new WG(n));const v=f?e.fromEquirectangular(a):e.fromCubemap(a);return t.set(a,v),n.setRenderTarget(y),a.addEventListener("dispose",s),v.texture}else return null}}}return a}function r(a){let c=0;const f=6;for(let d=0;d<f;d++)a[d]!==void 0&&c++;return c===f}function s(a){const c=a.target;c.removeEventListener("dispose",s);const f=t.get(c);f!==void 0&&(t.delete(c),f.dispose())}function o(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:o}}function XG(n){const t={};function e(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(i){i.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float")},get:function(i){const r=e(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function YG(n,t,e,i){const r={},s=new WeakMap;function o(m){const y=m.target;y.index!==null&&t.remove(y.index);for(const w in y.attributes)t.remove(y.attributes[w]);y.removeEventListener("dispose",o),delete r[y.id];const v=s.get(y);v&&(t.remove(v),s.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,e.memory.geometries--}function a(m,y){return r[y.id]===!0||(y.addEventListener("dispose",o),r[y.id]=!0,e.memory.geometries++),y}function c(m){const y=m.attributes;for(const w in y)t.update(y[w],34962);const v=m.morphAttributes;for(const w in v){const S=v[w];for(let P=0,b=S.length;P<b;P++)t.update(S[P],34962)}}function f(m){const y=[],v=m.index,w=m.attributes.position;let S=0;if(v!==null){const M=v.array;S=v.version;for(let R=0,O=M.length;R<O;R+=3){const k=M[R+0],N=M[R+1],D=M[R+2];y.push(k,N,N,D,D,k)}}else{const M=w.array;S=w.version;for(let R=0,O=M.length/3-1;R<O;R+=3){const k=R+0,N=R+1,D=R+2;y.push(k,N,N,D,D,k)}}const P=new(wk(y)>65535?xk:_k)(y,1);P.version=S;const b=s.get(m);b&&t.remove(b),s.set(m,P)}function d(m){const y=s.get(m);if(y){const v=m.index;v!==null&&y.version<v.version&&f(m)}else f(m);return s.get(m)}return{get:a,update:c,getWireframeAttribute:d}}function KG(n,t,e,i){const r=i.isWebGL2;let s;function o(y){s=y}let a,c;function f(y){a=y.type,c=y.bytesPerElement}function d(y,v){n.drawElements(s,v,a,y*c),e.update(v,s,1)}function m(y,v,w){if(w===0)return;let S,P;if(r)S=n,P="drawElementsInstanced";else if(S=t.get("ANGLE_instanced_arrays"),P="drawElementsInstancedANGLE",S===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}S[P](s,v,a,y*c,w),e.update(v,s,w)}this.setMode=o,this.setIndex=f,this.render=d,this.renderInstances=m}function JG(n){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(e.calls++,o){case 4:e.triangles+=a*(s/3);break;case 1:e.lines+=a*(s/2);break;case 3:e.lines+=a*(s-1);break;case 2:e.lines+=a*s;break;case 0:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function QG(n,t){return n[0]-t[0]}function t8(n,t){return Math.abs(t[1])-Math.abs(n[1])}function e8(n){const t={},e=new Float32Array(8),i=[];for(let s=0;s<8;s++)i[s]=[s,0];function r(s,o,a,c){const f=s.morphTargetInfluences,d=f===void 0?0:f.length;let m=t[o.id];if(m===void 0||m.length!==d){m=[];for(let P=0;P<d;P++)m[P]=[P,0];t[o.id]=m}for(let P=0;P<d;P++){const b=m[P];b[0]=P,b[1]=f[P]}m.sort(t8);for(let P=0;P<8;P++)P<d&&m[P][1]?(i[P][0]=m[P][0],i[P][1]=m[P][1]):(i[P][0]=Number.MAX_SAFE_INTEGER,i[P][1]=0);i.sort(QG);const y=o.morphAttributes.position,v=o.morphAttributes.normal;let w=0;for(let P=0;P<8;P++){const b=i[P],M=b[0],R=b[1];M!==Number.MAX_SAFE_INTEGER&&R?(y&&o.getAttribute("morphTarget"+P)!==y[M]&&o.setAttribute("morphTarget"+P,y[M]),v&&o.getAttribute("morphNormal"+P)!==v[M]&&o.setAttribute("morphNormal"+P,v[M]),e[P]=R,w+=R):(y&&o.hasAttribute("morphTarget"+P)===!0&&o.deleteAttribute("morphTarget"+P),v&&o.hasAttribute("morphNormal"+P)===!0&&o.deleteAttribute("morphNormal"+P),e[P]=0)}const S=o.morphTargetsRelative?1:1-w;c.getUniforms().setValue(n,"morphTargetBaseInfluence",S),c.getUniforms().setValue(n,"morphTargetInfluences",e)}return{update:r}}function n8(n,t,e,i){let r=new WeakMap;function s(c){const f=i.render.frame,d=c.geometry,m=t.get(c,d);return r.get(m)!==f&&(t.update(m),r.set(m,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),e.update(c.instanceMatrix,34962),c.instanceColor!==null&&e.update(c.instanceColor,34962)),m}function o(){r=new WeakMap}function a(c){const f=c.target;f.removeEventListener("dispose",a),e.remove(f.instanceMatrix),f.instanceColor!==null&&e.remove(f.instanceColor)}return{update:s,dispose:o}}class Ek extends li{constructor(t=null,e=1,i=1,r=1){super(null),this.image={data:t,width:e,height:i,depth:r},this.magFilter=Qn,this.minFilter=Qn,this.wrapR=vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Ek.prototype.isDataTexture2DArray=!0;class Pk extends li{constructor(t=null,e=1,i=1,r=1){super(null),this.image={data:t,width:e,height:i,depth:r},this.magFilter=Qn,this.minFilter=Qn,this.wrapR=vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Pk.prototype.isDataTexture3D=!0;const Ck=new li,i8=new Ek,r8=new Pk,Ak=new Bg,lE=[],uE=[],cE=new Float32Array(16),hE=new Float32Array(9),fE=new Float32Array(4);function Bc(n,t,e){const i=n[0];if(i<=0||i>0)return n;const r=t*e;let s=lE[r];if(s===void 0&&(s=new Float32Array(r),lE[r]=s),t!==0){i.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,n[o].toArray(s,a)}return s}function zi(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function Mi(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function Lk(n,t){let e=uE[t];e===void 0&&(e=new Int32Array(t),uE[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function s8(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function o8(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(zi(e,t))return;n.uniform2fv(this.addr,t),Mi(e,t)}}function a8(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(zi(e,t))return;n.uniform3fv(this.addr,t),Mi(e,t)}}function l8(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(zi(e,t))return;n.uniform4fv(this.addr,t),Mi(e,t)}}function u8(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(zi(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),Mi(e,t)}else{if(zi(e,i))return;fE.set(i),n.uniformMatrix2fv(this.addr,!1,fE),Mi(e,i)}}function c8(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(zi(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),Mi(e,t)}else{if(zi(e,i))return;hE.set(i),n.uniformMatrix3fv(this.addr,!1,hE),Mi(e,i)}}function h8(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(zi(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),Mi(e,t)}else{if(zi(e,i))return;cE.set(i),n.uniformMatrix4fv(this.addr,!1,cE),Mi(e,i)}}function f8(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function d8(n,t){const e=this.cache;zi(e,t)||(n.uniform2iv(this.addr,t),Mi(e,t))}function p8(n,t){const e=this.cache;zi(e,t)||(n.uniform3iv(this.addr,t),Mi(e,t))}function m8(n,t){const e=this.cache;zi(e,t)||(n.uniform4iv(this.addr,t),Mi(e,t))}function g8(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function y8(n,t){const e=this.cache;zi(e,t)||(n.uniform2uiv(this.addr,t),Mi(e,t))}function v8(n,t){const e=this.cache;zi(e,t)||(n.uniform3uiv(this.addr,t),Mi(e,t))}function _8(n,t){const e=this.cache;zi(e,t)||(n.uniform4uiv(this.addr,t),Mi(e,t))}function x8(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.safeSetTexture2D(t||Ck,r)}function w8(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||r8,r)}function b8(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.safeSetTextureCube(t||Ak,r)}function S8(n,t,e){const i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||i8,r)}function M8(n){switch(n){case 5126:return s8;case 35664:return o8;case 35665:return a8;case 35666:return l8;case 35674:return u8;case 35675:return c8;case 35676:return h8;case 5124:case 35670:return f8;case 35667:case 35671:return d8;case 35668:case 35672:return p8;case 35669:case 35673:return m8;case 5125:return g8;case 36294:return y8;case 36295:return v8;case 36296:return _8;case 35678:case 36198:case 36298:case 36306:case 35682:return x8;case 35679:case 36299:case 36307:return w8;case 35680:case 36300:case 36308:case 36293:return b8;case 36289:case 36303:case 36311:case 36292:return S8}}function T8(n,t){n.uniform1fv(this.addr,t)}function E8(n,t){const e=Bc(t,this.size,2);n.uniform2fv(this.addr,e)}function P8(n,t){const e=Bc(t,this.size,3);n.uniform3fv(this.addr,e)}function C8(n,t){const e=Bc(t,this.size,4);n.uniform4fv(this.addr,e)}function A8(n,t){const e=Bc(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function L8(n,t){const e=Bc(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function k8(n,t){const e=Bc(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function R8(n,t){n.uniform1iv(this.addr,t)}function I8(n,t){n.uniform2iv(this.addr,t)}function D8(n,t){n.uniform3iv(this.addr,t)}function O8(n,t){n.uniform4iv(this.addr,t)}function N8(n,t){n.uniform1uiv(this.addr,t)}function F8(n,t){n.uniform2uiv(this.addr,t)}function z8(n,t){n.uniform3uiv(this.addr,t)}function B8(n,t){n.uniform4uiv(this.addr,t)}function V8(n,t,e){const i=t.length,r=Lk(e,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)e.safeSetTexture2D(t[s]||Ck,r[s])}function U8(n,t,e){const i=t.length,r=Lk(e,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)e.safeSetTextureCube(t[s]||Ak,r[s])}function H8(n){switch(n){case 5126:return T8;case 35664:return E8;case 35665:return P8;case 35666:return C8;case 35674:return A8;case 35675:return L8;case 35676:return k8;case 5124:case 35670:return R8;case 35667:case 35671:return I8;case 35668:case 35672:return D8;case 35669:case 35673:return O8;case 5125:return N8;case 36294:return F8;case 36295:return z8;case 36296:return B8;case 35678:case 36198:case 36298:case 36306:case 35682:return V8;case 35680:case 36300:case 36308:case 36293:return U8}}function j8(n,t,e){this.id=n,this.addr=e,this.cache=[],this.setValue=M8(t.type)}function kk(n,t,e){this.id=n,this.addr=e,this.cache=[],this.size=t.size,this.setValue=H8(t.type)}kk.prototype.updateCache=function(n){const t=this.cache;n instanceof Float32Array&&t.length!==n.length&&(this.cache=new Float32Array(n.length)),Mi(t,n)};function Rk(n){this.id=n,this.seq=[],this.map={}}Rk.prototype.setValue=function(n,t,e){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,t[o.id],e)}};const T_=/(\w+)(\])?(\[|\.)?/g;function dE(n,t){n.seq.push(t),n.map[t.id]=t}function W8(n,t,e){const i=n.name,r=i.length;for(T_.lastIndex=0;;){const s=T_.exec(i),o=T_.lastIndex;let a=s[1];const c=s[2]==="]",f=s[3];if(c&&(a=a|0),f===void 0||f==="["&&o+2===r){dE(e,f===void 0?new j8(a,n,t):new kk(a,n,t));break}else{let m=e.map[a];m===void 0&&(m=new Rk(a),dE(e,m)),e=m}}}function ba(n,t){this.seq=[],this.map={};const e=n.getProgramParameter(t,35718);for(let i=0;i<e;++i){const r=n.getActiveUniform(t,i),s=n.getUniformLocation(t,r.name);W8(r,s,this)}}ba.prototype.setValue=function(n,t,e,i){const r=this.map[t];r!==void 0&&r.setValue(n,e,i)};ba.prototype.setOptional=function(n,t,e){const i=t[e];i!==void 0&&this.setValue(n,e,i)};ba.upload=function(n,t,e,i){for(let r=0,s=t.length;r!==s;++r){const o=t[r],a=e[o.id];a.needsUpdate!==!1&&o.setValue(n,a.value,i)}};ba.seqWithValue=function(n,t){const e=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in t&&e.push(s)}return e};function pE(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}let G8=0;function $8(n){const t=n.split(`
`);for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join(`
`)}function Ik(n){switch(n){case tr:return["Linear","( value )"];case zg:return["sRGB","( value )"];case mw:return["RGBE","( value )"];case dk:return["RGBM","( value, 7.0 )"];case pk:return["RGBM","( value, 16.0 )"];case mk:return["RGBD","( value, 256.0 )"];case pw:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Pj:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function mE(n,t,e){const i=n.getShaderParameter(t,35713),r=n.getShaderInfoLog(t).trim();return i&&r===""?"":e.toUpperCase()+`

`+r+`

`+$8(n.getShaderSource(t))}function ju(n,t){const e=Ik(t);return"vec4 "+n+"( vec4 value ) { return "+e[0]+"ToLinear"+e[1]+"; }"}function Z8(n,t){const e=Ik(t);return"vec4 "+n+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function q8(n,t){let e;switch(t){case TH:e="Linear";break;case EH:e="Reinhard";break;case PH:e="OptimizedCineon";break;case CH:e="ACESFilmic";break;case AH:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function X8(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(hf).join(`
`)}function Y8(n){const t=[];for(const e in n){const i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function K8(n,t){const e={},i=n.getProgramParameter(t,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(t,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),e[o]={type:s.type,location:n.getAttribLocation(t,o),locationSize:a}}return e}function hf(n){return n!==""}function gE(n,t){return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function yE(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const J8=/^[ \t]*#include +<([\w\d./]+)>/gm;function Hx(n){return n.replace(J8,Q8)}function Q8(n,t){const e=Ne[t];if(e===void 0)throw new Error("Can not resolve #include <"+t+">");return Hx(e)}const t9=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,e9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function vE(n){return n.replace(e9,Dk).replace(t9,n9)}function n9(n,t,e,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Dk(n,t,e,i)}function Dk(n,t,e,i){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function _E(n){let t="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function i9(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===ak?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===iH?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===cf&&(t="SHADOWMAP_TYPE_VSM"),t}function r9(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Dg:case Og:t="ENVMAP_TYPE_CUBE";break;case Ng:case fw:t="ENVMAP_TYPE_CUBE_UV";break}return t}function s9(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Og:case fw:t="ENVMAP_MODE_REFRACTION";break}return t}function o9(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ig:t="ENVMAP_BLENDING_MULTIPLY";break;case SH:t="ENVMAP_BLENDING_MIX";break;case MH:t="ENVMAP_BLENDING_ADD";break}return t}function a9(n,t,e,i){const r=n.getContext(),s=e.defines;let o=e.vertexShader,a=e.fragmentShader;const c=i9(e),f=r9(e),d=s9(e),m=o9(e),y=n.gammaFactor>0?n.gammaFactor:1,v=e.isWebGL2?"":X8(e),w=Y8(s),S=r.createProgram();let P,b,M=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(P=[w].filter(hf).join(`
`),P.length>0&&(P+=`
`),b=[v,w].filter(hf).join(`
`),b.length>0&&(b+=`
`)):(P=[_E(e),"#define SHADER_NAME "+e.shaderName,w,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+e.maxBones,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularTintMap?"#define USE_SPECULARTINTMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(hf).join(`
`),b=[v,_E(e),"#define SHADER_NAME "+e.shaderName,w,"#define GAMMA_FACTOR "+y,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.envMap?"#define "+d:"",e.envMap?"#define "+m:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularTintMap?"#define USE_SPECULARTINTMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheenTint?"#define USE_SHEEN":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Pl?"#define TONE_MAPPING":"",e.toneMapping!==Pl?Ne.tonemapping_pars_fragment:"",e.toneMapping!==Pl?q8("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.format===xa?"#define OPAQUE":"",Ne.encodings_pars_fragment,e.map?ju("mapTexelToLinear",e.mapEncoding):"",e.matcap?ju("matcapTexelToLinear",e.matcapEncoding):"",e.envMap?ju("envMapTexelToLinear",e.envMapEncoding):"",e.emissiveMap?ju("emissiveMapTexelToLinear",e.emissiveMapEncoding):"",e.specularTintMap?ju("specularTintMapTexelToLinear",e.specularTintMapEncoding):"",e.lightMap?ju("lightMapTexelToLinear",e.lightMapEncoding):"",Z8("linearToOutputTexel",e.outputEncoding),e.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(hf).join(`
`)),o=Hx(o),o=gE(o,e),o=yE(o,e),a=Hx(a),a=gE(a,e),a=yE(a,e),o=vE(o),a=vE(a),e.isWebGL2&&e.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,P=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+P,b=["#define varying in",e.glslVersion===WT?"":"out highp vec4 pc_fragColor;",e.glslVersion===WT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const R=M+P+o,O=M+b+a,k=pE(r,35633,R),N=pE(r,35632,O);if(r.attachShader(S,k),r.attachShader(S,N),e.index0AttributeName!==void 0?r.bindAttribLocation(S,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S),n.debug.checkShaderErrors){const H=r.getProgramInfoLog(S).trim(),W=r.getShaderInfoLog(k).trim(),U=r.getShaderInfoLog(N).trim();let tt=!0,K=!0;if(r.getProgramParameter(S,35714)===!1){tt=!1;const Y=mE(r,k,"vertex"),rt=mE(r,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,35715)+`

Program Info Log: `+H+`
`+Y+`
`+rt)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(W===""||U==="")&&(K=!1);K&&(this.diagnostics={runnable:tt,programLog:H,vertexShader:{log:W,prefix:P},fragmentShader:{log:U,prefix:b}})}r.deleteShader(k),r.deleteShader(N);let D;this.getUniforms=function(){return D===void 0&&(D=new ba(r,S)),D};let I;return this.getAttributes=function(){return I===void 0&&(I=K8(r,S)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.name=e.shaderName,this.id=G8++,this.cacheKey=t,this.usedTimes=1,this.program=S,this.vertexShader=k,this.fragmentShader=N,this}function l9(n,t,e,i,r,s,o){const a=[],c=r.isWebGL2,f=r.logarithmicDepthBuffer,d=r.floatVertexTextures,m=r.maxVertexUniforms,y=r.vertexTextures;let v=r.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},S=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheenTint","transmission","transmissionMap","thicknessMap"];function P(D){const H=D.skeleton.bones;if(d)return 1024;{const U=Math.floor((m-20)/4),tt=Math.min(U,H.length);return tt<H.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+H.length+" bones. This GPU supports "+tt+"."),0):tt}}function b(D){let I;return D&&D.isTexture?I=D.encoding:D&&D.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),I=D.texture.encoding):I=tr,I}function M(D,I,H,W,U){const tt=W.fog,K=D.isMeshStandardMaterial?W.environment:null,Y=(D.isMeshStandardMaterial?e:t).get(D.envMap||K),rt=w[D.type],at=U.isSkinnedMesh?P(U):0;D.precision!==null&&(v=r.getMaxPrecision(D.precision),v!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",v,"instead."));let it,J;if(rt){const z=Os[rt];it=z.vertexShader,J=z.fragmentShader}else it=D.vertexShader,J=D.fragmentShader;const pt=n.getRenderTarget(),F=D.alphaTest>0,G=D.clearcoat>0;return{isWebGL2:c,shaderID:rt,shaderName:D.type,vertexShader:it,fragmentShader:J,defines:D.defines,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:v,instancing:U.isInstancedMesh===!0,instancingColor:U.isInstancedMesh===!0&&U.instanceColor!==null,supportsVertexTextures:y,outputEncoding:pt!==null?b(pt.texture):n.outputEncoding,map:!!D.map,mapEncoding:b(D.map),matcap:!!D.matcap,matcapEncoding:b(D.matcap),envMap:!!Y,envMapMode:Y&&Y.mapping,envMapEncoding:b(Y),envMapCubeUV:!!Y&&(Y.mapping===Ng||Y.mapping===fw),lightMap:!!D.lightMap,lightMapEncoding:b(D.lightMap),aoMap:!!D.aoMap,emissiveMap:!!D.emissiveMap,emissiveMapEncoding:b(D.emissiveMap),bumpMap:!!D.bumpMap,normalMap:!!D.normalMap,objectSpaceNormalMap:D.normalMapType===Lj,tangentSpaceNormalMap:D.normalMapType===Oc,clearcoat:G,clearcoatMap:G&&!!D.clearcoatMap,clearcoatRoughnessMap:G&&!!D.clearcoatRoughnessMap,clearcoatNormalMap:G&&!!D.clearcoatNormalMap,displacementMap:!!D.displacementMap,roughnessMap:!!D.roughnessMap,metalnessMap:!!D.metalnessMap,specularMap:!!D.specularMap,specularIntensityMap:!!D.specularIntensityMap,specularTintMap:!!D.specularTintMap,specularTintMapEncoding:b(D.specularTintMap),alphaMap:!!D.alphaMap,alphaTest:F,gradientMap:!!D.gradientMap,sheenTint:!!D.sheenTint&&(D.sheenTint.r>0||D.sheenTint.g>0||D.sheenTint.b>0),transmission:D.transmission>0,transmissionMap:!!D.transmissionMap,thicknessMap:!!D.thicknessMap,combine:D.combine,vertexTangents:!!D.normalMap&&!!U.geometry&&!!U.geometry.attributes.tangent,vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!U.geometry&&!!U.geometry.attributes.color&&U.geometry.attributes.color.itemSize===4,vertexUvs:!!D.map||!!D.bumpMap||!!D.normalMap||!!D.specularMap||!!D.alphaMap||!!D.emissiveMap||!!D.roughnessMap||!!D.metalnessMap||!!D.clearcoatMap||!!D.clearcoatRoughnessMap||!!D.clearcoatNormalMap||!!D.displacementMap||!!D.transmissionMap||!!D.thicknessMap||!!D.specularIntensityMap||!!D.specularTintMap,uvsVertexOnly:!(D.map||D.bumpMap||D.normalMap||D.specularMap||D.alphaMap||D.emissiveMap||D.roughnessMap||D.metalnessMap||D.clearcoatNormalMap||D.transmission>0||D.transmissionMap||D.thicknessMap||D.specularIntensityMap||D.specularTintMap)&&!!D.displacementMap,fog:!!tt,useFog:D.fog,fogExp2:tt&&tt.isFogExp2,flatShading:!!D.flatShading,sizeAttenuation:D.sizeAttenuation,logarithmicDepthBuffer:f,skinning:U.isSkinnedMesh===!0&&at>0,maxBones:at,useVertexTexture:d,morphTargets:!!U.geometry&&!!U.geometry.morphAttributes.position,morphNormals:!!U.geometry&&!!U.geometry.morphAttributes.normal,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:D.format,dithering:D.dithering,shadowMapEnabled:n.shadowMap.enabled&&H.length>0,shadowMapType:n.shadowMap.type,toneMapping:D.toneMapped?n.toneMapping:Pl,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===kl,flipSided:D.side===jn,depthPacking:D.depthPacking!==void 0?D.depthPacking:!1,index0AttributeName:D.index0AttributeName,extensionDerivatives:D.extensions&&D.extensions.derivatives,extensionFragDepth:D.extensions&&D.extensions.fragDepth,extensionDrawBuffers:D.extensions&&D.extensions.drawBuffers,extensionShaderTextureLOD:D.extensions&&D.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:D.customProgramCacheKey()}}function R(D){const I=[];if(D.shaderID?I.push(D.shaderID):(I.push(D.fragmentShader),I.push(D.vertexShader)),D.defines!==void 0)for(const H in D.defines)I.push(H),I.push(D.defines[H]);if(D.isRawShaderMaterial===!1){for(let H=0;H<S.length;H++)I.push(D[S[H]]);I.push(n.outputEncoding),I.push(n.gammaFactor)}return I.push(D.customProgramCacheKey),I.join()}function O(D){const I=w[D.type];let H;if(I){const W=Os[I];H=o6.clone(W.uniforms)}else H=D.uniforms;return H}function k(D,I){let H;for(let W=0,U=a.length;W<U;W++){const tt=a[W];if(tt.cacheKey===I){H=tt,++H.usedTimes;break}}return H===void 0&&(H=new a9(n,I,D,s),a.push(H)),H}function N(D){if(--D.usedTimes===0){const I=a.indexOf(D);a[I]=a[a.length-1],a.pop(),D.destroy()}}return{getParameters:M,getProgramCacheKey:R,getUniforms:O,acquireProgram:k,releaseProgram:N,programs:a}}function u9(){let n=new WeakMap;function t(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function e(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:t,remove:e,update:i,dispose:r}}function c9(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.program!==t.program?n.program.id-t.program.id:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function xE(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function wE(n){const t=[];let e=0;const i=[],r=[],s=[],o={id:-1};function a(){e=0,i.length=0,r.length=0,s.length=0}function c(v,w,S,P,b,M){let R=t[e];const O=n.get(S);return R===void 0?(R={id:v.id,object:v,geometry:w,material:S,program:O.program||o,groupOrder:P,renderOrder:v.renderOrder,z:b,group:M},t[e]=R):(R.id=v.id,R.object=v,R.geometry=w,R.material=S,R.program=O.program||o,R.groupOrder=P,R.renderOrder=v.renderOrder,R.z=b,R.group=M),e++,R}function f(v,w,S,P,b,M){const R=c(v,w,S,P,b,M);S.transmission>0?r.push(R):S.transparent===!0?s.push(R):i.push(R)}function d(v,w,S,P,b,M){const R=c(v,w,S,P,b,M);S.transmission>0?r.unshift(R):S.transparent===!0?s.unshift(R):i.unshift(R)}function m(v,w){i.length>1&&i.sort(v||c9),r.length>1&&r.sort(w||xE),s.length>1&&s.sort(w||xE)}function y(){for(let v=e,w=t.length;v<w;v++){const S=t[v];if(S.id===null)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.program=null,S.group=null}}return{opaque:i,transmissive:r,transparent:s,init:a,push:f,unshift:d,finish:y,sort:m}}function h9(n){let t=new WeakMap;function e(r,s){let o;return t.has(r)===!1?(o=new wE(n),t.set(r,[o])):s>=t.get(r).length?(o=new wE(n),t.get(r).push(o)):o=t.get(r)[s],o}function i(){t=new WeakMap}return{get:e,dispose:i}}function f9(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new st,color:new he};break;case"SpotLight":e={position:new st,direction:new st,color:new he,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new st,color:new he,distance:0,decay:0};break;case"HemisphereLight":e={direction:new st,skyColor:new he,groundColor:new he};break;case"RectAreaLight":e={color:new he,position:new st,halfWidth:new st,halfHeight:new st};break}return n[t.id]=e,e}}}function d9(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Zt};break;case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Zt};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Zt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}let p9=0;function m9(n,t){return(t.castShadow?1:0)-(n.castShadow?1:0)}function g9(n,t){const e=new f9,i=d9(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)r.probe.push(new st);const s=new st,o=new ve,a=new ve;function c(d,m){let y=0,v=0,w=0;for(let H=0;H<9;H++)r.probe[H].set(0,0,0);let S=0,P=0,b=0,M=0,R=0,O=0,k=0,N=0;d.sort(m9);const D=m!==!0?Math.PI:1;for(let H=0,W=d.length;H<W;H++){const U=d[H],tt=U.color,K=U.intensity,Y=U.distance,rt=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)y+=tt.r*K*D,v+=tt.g*K*D,w+=tt.b*K*D;else if(U.isLightProbe)for(let at=0;at<9;at++)r.probe[at].addScaledVector(U.sh.coefficients[at],K);else if(U.isDirectionalLight){const at=e.get(U);if(at.color.copy(U.color).multiplyScalar(U.intensity*D),U.castShadow){const it=U.shadow,J=i.get(U);J.shadowBias=it.bias,J.shadowNormalBias=it.normalBias,J.shadowRadius=it.radius,J.shadowMapSize=it.mapSize,r.directionalShadow[S]=J,r.directionalShadowMap[S]=rt,r.directionalShadowMatrix[S]=U.shadow.matrix,O++}r.directional[S]=at,S++}else if(U.isSpotLight){const at=e.get(U);if(at.position.setFromMatrixPosition(U.matrixWorld),at.color.copy(tt).multiplyScalar(K*D),at.distance=Y,at.coneCos=Math.cos(U.angle),at.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),at.decay=U.decay,U.castShadow){const it=U.shadow,J=i.get(U);J.shadowBias=it.bias,J.shadowNormalBias=it.normalBias,J.shadowRadius=it.radius,J.shadowMapSize=it.mapSize,r.spotShadow[b]=J,r.spotShadowMap[b]=rt,r.spotShadowMatrix[b]=U.shadow.matrix,N++}r.spot[b]=at,b++}else if(U.isRectAreaLight){const at=e.get(U);at.color.copy(tt).multiplyScalar(K),at.halfWidth.set(U.width*.5,0,0),at.halfHeight.set(0,U.height*.5,0),r.rectArea[M]=at,M++}else if(U.isPointLight){const at=e.get(U);if(at.color.copy(U.color).multiplyScalar(U.intensity*D),at.distance=U.distance,at.decay=U.decay,U.castShadow){const it=U.shadow,J=i.get(U);J.shadowBias=it.bias,J.shadowNormalBias=it.normalBias,J.shadowRadius=it.radius,J.shadowMapSize=it.mapSize,J.shadowCameraNear=it.camera.near,J.shadowCameraFar=it.camera.far,r.pointShadow[P]=J,r.pointShadowMap[P]=rt,r.pointShadowMatrix[P]=U.shadow.matrix,k++}r.point[P]=at,P++}else if(U.isHemisphereLight){const at=e.get(U);at.skyColor.copy(U.color).multiplyScalar(K*D),at.groundColor.copy(U.groundColor).multiplyScalar(K*D),r.hemi[R]=at,R++}}M>0&&(t.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Qt.LTC_FLOAT_1,r.rectAreaLTC2=Qt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Qt.LTC_HALF_1,r.rectAreaLTC2=Qt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=y,r.ambient[1]=v,r.ambient[2]=w;const I=r.hash;(I.directionalLength!==S||I.pointLength!==P||I.spotLength!==b||I.rectAreaLength!==M||I.hemiLength!==R||I.numDirectionalShadows!==O||I.numPointShadows!==k||I.numSpotShadows!==N)&&(r.directional.length=S,r.spot.length=b,r.rectArea.length=M,r.point.length=P,r.hemi.length=R,r.directionalShadow.length=O,r.directionalShadowMap.length=O,r.pointShadow.length=k,r.pointShadowMap.length=k,r.spotShadow.length=N,r.spotShadowMap.length=N,r.directionalShadowMatrix.length=O,r.pointShadowMatrix.length=k,r.spotShadowMatrix.length=N,I.directionalLength=S,I.pointLength=P,I.spotLength=b,I.rectAreaLength=M,I.hemiLength=R,I.numDirectionalShadows=O,I.numPointShadows=k,I.numSpotShadows=N,r.version=p9++)}function f(d,m){let y=0,v=0,w=0,S=0,P=0;const b=m.matrixWorldInverse;for(let M=0,R=d.length;M<R;M++){const O=d[M];if(O.isDirectionalLight){const k=r.directional[y];k.direction.setFromMatrixPosition(O.matrixWorld),s.setFromMatrixPosition(O.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(b),y++}else if(O.isSpotLight){const k=r.spot[w];k.position.setFromMatrixPosition(O.matrixWorld),k.position.applyMatrix4(b),k.direction.setFromMatrixPosition(O.matrixWorld),s.setFromMatrixPosition(O.target.matrixWorld),k.direction.sub(s),k.direction.transformDirection(b),w++}else if(O.isRectAreaLight){const k=r.rectArea[S];k.position.setFromMatrixPosition(O.matrixWorld),k.position.applyMatrix4(b),a.identity(),o.copy(O.matrixWorld),o.premultiply(b),a.extractRotation(o),k.halfWidth.set(O.width*.5,0,0),k.halfHeight.set(0,O.height*.5,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),S++}else if(O.isPointLight){const k=r.point[v];k.position.setFromMatrixPosition(O.matrixWorld),k.position.applyMatrix4(b),v++}else if(O.isHemisphereLight){const k=r.hemi[P];k.direction.setFromMatrixPosition(O.matrixWorld),k.direction.transformDirection(b),k.direction.normalize(),P++}}}return{setup:c,setupView:f,state:r}}function bE(n,t){const e=new g9(n,t),i=[],r=[];function s(){i.length=0,r.length=0}function o(m){i.push(m)}function a(m){r.push(m)}function c(m){e.setup(i,m)}function f(m){e.setupView(i,m)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:e},setupLights:c,setupLightsView:f,pushLight:o,pushShadow:a}}function y9(n,t){let e=new WeakMap;function i(s,o=0){let a;return e.has(s)===!1?(a=new bE(n,t),e.set(s,[a])):o>=e.get(s).length?(a=new bE(n,t),e.get(s).push(a)):a=e.get(s)[o],a}function r(){e=new WeakMap}return{get:i,dispose:r}}class Ok extends Ti{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=Cj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}Ok.prototype.isMeshDepthMaterial=!0;class Nk extends Ti{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new st,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}Nk.prototype.isMeshDistanceMaterial=!0;var v9=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
uniform float samples;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,_9=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function Fk(n,t,e){let i=new Vg;const r=new Zt,s=new Zt,o=new en,a=new Ok({depthPacking:Aj}),c=new Nk,f={},d=e.maxTextureSize,m={0:jn,1:qf,2:kl},y=new Rl({uniforms:{shadow_pass:{value:null},resolution:{value:new Zt},radius:{value:4},samples:{value:8}},vertexShader:_9,fragmentShader:v9}),v=y.clone();v.defines.HORIZONTAL_PASS=1;const w=new nn;w.setAttribute("position",new Gn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Fi(w,y),P=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ak,this.render=function(O,k,N){if(P.enabled===!1||P.autoUpdate===!1&&P.needsUpdate===!1||O.length===0)return;const D=n.getRenderTarget(),I=n.getActiveCubeFace(),H=n.getActiveMipmapLevel(),W=n.state;W.setBlending(_a),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);for(let U=0,tt=O.length;U<tt;U++){const K=O[U],Y=K.shadow;if(Y===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(Y.autoUpdate===!1&&Y.needsUpdate===!1)continue;r.copy(Y.mapSize);const rt=Y.getFrameExtents();if(r.multiply(rt),s.copy(Y.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/rt.x),r.x=s.x*rt.x,Y.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/rt.y),r.y=s.y*rt.y,Y.mapSize.y=s.y)),Y.map===null&&!Y.isPointLightShadow&&this.type===cf){const it={minFilter:jr,magFilter:jr,format:xr};Y.map=new js(r.x,r.y,it),Y.map.texture.name=K.name+".shadowMap",Y.mapPass=new js(r.x,r.y,it),Y.camera.updateProjectionMatrix()}if(Y.map===null){const it={minFilter:Qn,magFilter:Qn,format:xr};Y.map=new js(r.x,r.y,it),Y.map.texture.name=K.name+".shadowMap",Y.camera.updateProjectionMatrix()}n.setRenderTarget(Y.map),n.clear();const at=Y.getViewportCount();for(let it=0;it<at;it++){const J=Y.getViewport(it);o.set(s.x*J.x,s.y*J.y,s.x*J.z,s.y*J.w),W.viewport(o),Y.updateMatrices(K,it),i=Y.getFrustum(),R(k,N,Y.camera,K,this.type)}!Y.isPointLightShadow&&this.type===cf&&b(Y,N),Y.needsUpdate=!1}P.needsUpdate=!1,n.setRenderTarget(D,I,H)};function b(O,k){const N=t.update(S);y.uniforms.shadow_pass.value=O.map.texture,y.uniforms.resolution.value=O.mapSize,y.uniforms.radius.value=O.radius,y.uniforms.samples.value=O.blurSamples,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(k,null,N,y,S,null),v.uniforms.shadow_pass.value=O.mapPass.texture,v.uniforms.resolution.value=O.mapSize,v.uniforms.radius.value=O.radius,v.uniforms.samples.value=O.blurSamples,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(k,null,N,v,S,null)}function M(O,k,N,D,I,H,W){let U=null;const tt=D.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(tt!==void 0?U=tt:U=D.isPointLight===!0?c:a,n.localClippingEnabled&&N.clipShadows===!0&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0){const K=U.uuid,Y=N.uuid;let rt=f[K];rt===void 0&&(rt={},f[K]=rt);let at=rt[Y];at===void 0&&(at=U.clone(),rt[Y]=at),U=at}return U.visible=N.visible,U.wireframe=N.wireframe,W===cf?U.side=N.shadowSide!==null?N.shadowSide:N.side:U.side=N.shadowSide!==null?N.shadowSide:m[N.side],U.alphaMap=N.alphaMap,U.alphaTest=N.alphaTest,U.clipShadows=N.clipShadows,U.clippingPlanes=N.clippingPlanes,U.clipIntersection=N.clipIntersection,U.displacementMap=N.displacementMap,U.displacementScale=N.displacementScale,U.displacementBias=N.displacementBias,U.wireframeLinewidth=N.wireframeLinewidth,U.linewidth=N.linewidth,D.isPointLight===!0&&U.isMeshDistanceMaterial===!0&&(U.referencePosition.setFromMatrixPosition(D.matrixWorld),U.nearDistance=I,U.farDistance=H),U}function R(O,k,N,D,I){if(O.visible===!1)return;if(O.layers.test(k.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&I===cf)&&(!O.frustumCulled||i.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,O.matrixWorld);const U=t.update(O),tt=O.material;if(Array.isArray(tt)){const K=U.groups;for(let Y=0,rt=K.length;Y<rt;Y++){const at=K[Y],it=tt[at.materialIndex];if(it&&it.visible){const J=M(O,U,it,D,N.near,N.far,I);n.renderBufferDirect(N,null,U,J,O,at)}}}else if(tt.visible){const K=M(O,U,tt,D,N.near,N.far,I);n.renderBufferDirect(N,null,U,K,O,null)}}const W=O.children;for(let U=0,tt=W.length;U<tt;U++)R(W[U],k,N,D,I)}}function x9(n,t,e){const i=e.isWebGL2;function r(){let q=!1;const Pt=new en;let St=null;const zt=new en(0,0,0,0);return{setMask:function(Xt){St!==Xt&&!q&&(n.colorMask(Xt,Xt,Xt,Xt),St=Xt)},setLocked:function(Xt){q=Xt},setClear:function(Xt,ue,ke,Fe,xn){xn===!0&&(Xt*=Fe,ue*=Fe,ke*=Fe),Pt.set(Xt,ue,ke,Fe),zt.equals(Pt)===!1&&(n.clearColor(Xt,ue,ke,Fe),zt.copy(Pt))},reset:function(){q=!1,St=null,zt.set(-1,0,0,0)}}}function s(){let q=!1,Pt=null,St=null,zt=null;return{setTest:function(Xt){Xt?mt(2929):_t(2929)},setMask:function(Xt){Pt!==Xt&&!q&&(n.depthMask(Xt),Pt=Xt)},setFunc:function(Xt){if(St!==Xt){if(Xt)switch(Xt){case gH:n.depthFunc(512);break;case yH:n.depthFunc(519);break;case vH:n.depthFunc(513);break;case Nx:n.depthFunc(515);break;case _H:n.depthFunc(514);break;case xH:n.depthFunc(518);break;case wH:n.depthFunc(516);break;case bH:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);St=Xt}},setLocked:function(Xt){q=Xt},setClear:function(Xt){zt!==Xt&&(n.clearDepth(Xt),zt=Xt)},reset:function(){q=!1,Pt=null,St=null,zt=null}}}function o(){let q=!1,Pt=null,St=null,zt=null,Xt=null,ue=null,ke=null,Fe=null,xn=null;return{setTest:function(ut){q||(ut?mt(2960):_t(2960))},setMask:function(ut){Pt!==ut&&!q&&(n.stencilMask(ut),Pt=ut)},setFunc:function(ut,Bt,ee){(St!==ut||zt!==Bt||Xt!==ee)&&(n.stencilFunc(ut,Bt,ee),St=ut,zt=Bt,Xt=ee)},setOp:function(ut,Bt,ee){(ue!==ut||ke!==Bt||Fe!==ee)&&(n.stencilOp(ut,Bt,ee),ue=ut,ke=Bt,Fe=ee)},setLocked:function(ut){q=ut},setClear:function(ut){xn!==ut&&(n.clearStencil(ut),xn=ut)},reset:function(){q=!1,Pt=null,St=null,zt=null,Xt=null,ue=null,ke=null,Fe=null,xn=null}}}const a=new r,c=new s,f=new o;let d={},m=null,y={},v=null,w=!1,S=null,P=null,b=null,M=null,R=null,O=null,k=null,N=!1,D=null,I=null,H=null,W=null,U=null;const tt=n.getParameter(35661);let K=!1,Y=0;const rt=n.getParameter(7938);rt.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL (\d)/.exec(rt)[1]),K=Y>=1):rt.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL ES (\d)/.exec(rt)[1]),K=Y>=2);let at=null,it={};const J=n.getParameter(3088),pt=n.getParameter(2978),F=new en().fromArray(J),G=new en().fromArray(pt);function lt(q,Pt,St){const zt=new Uint8Array(4),Xt=n.createTexture();n.bindTexture(q,Xt),n.texParameteri(q,10241,9728),n.texParameteri(q,10240,9728);for(let ue=0;ue<St;ue++)n.texImage2D(Pt+ue,0,6408,1,1,0,6408,5121,zt);return Xt}const z={};z[3553]=lt(3553,3553,1),z[34067]=lt(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),f.setClear(0),mt(2929),c.setFunc(Nx),Rt(!1),Dt(ET),mt(2884),jt(_a);function mt(q){d[q]!==!0&&(n.enable(q),d[q]=!0)}function _t(q){d[q]!==!1&&(n.disable(q),d[q]=!1)}function nt(q){q!==m&&(n.bindFramebuffer(36160,q),m=q)}function Ot(q,Pt){return Pt===null&&m!==null&&(Pt=m),y[q]!==Pt?(n.bindFramebuffer(q,Pt),y[q]=Pt,i&&(q===36009&&(y[36160]=Pt),q===36160&&(y[36009]=Pt)),!0):!1}function At(q){return v!==q?(n.useProgram(q),v=q,!0):!1}const kt={[Yu]:32774,[sH]:32778,[oH]:32779};if(i)kt[LT]=32775,kt[kT]=32776;else{const q=t.get("EXT_blend_minmax");q!==null&&(kt[LT]=q.MIN_EXT,kt[kT]=q.MAX_EXT)}const Ft={[aH]:0,[lH]:1,[uH]:768,[uk]:770,[mH]:776,[dH]:774,[hH]:772,[cH]:769,[ck]:771,[pH]:775,[fH]:773};function jt(q,Pt,St,zt,Xt,ue,ke,Fe){if(q===_a){w===!0&&(_t(3042),w=!1);return}if(w===!1&&(mt(3042),w=!0),q!==rH){if(q!==S||Fe!==N){if((P!==Yu||R!==Yu)&&(n.blendEquation(32774),P=Yu,R=Yu),Fe)switch(q){case Tf:n.blendFuncSeparate(1,771,1,771);break;case PT:n.blendFunc(1,1);break;case CT:n.blendFuncSeparate(0,0,769,771);break;case AT:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case Tf:n.blendFuncSeparate(770,771,1,771);break;case PT:n.blendFunc(770,1);break;case CT:n.blendFunc(0,769);break;case AT:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}b=null,M=null,O=null,k=null,S=q,N=Fe}return}Xt=Xt||Pt,ue=ue||St,ke=ke||zt,(Pt!==P||Xt!==R)&&(n.blendEquationSeparate(kt[Pt],kt[Xt]),P=Pt,R=Xt),(St!==b||zt!==M||ue!==O||ke!==k)&&(n.blendFuncSeparate(Ft[St],Ft[zt],Ft[ue],Ft[ke]),b=St,M=zt,O=ue,k=ke),S=q,N=null}function bt(q,Pt){q.side===kl?_t(2884):mt(2884);let St=q.side===jn;Pt&&(St=!St),Rt(St),q.blending===Tf&&q.transparent===!1?jt(_a):jt(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.premultipliedAlpha),c.setFunc(q.depthFunc),c.setTest(q.depthTest),c.setMask(q.depthWrite),a.setMask(q.colorWrite);const zt=q.stencilWrite;f.setTest(zt),zt&&(f.setMask(q.stencilWriteMask),f.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),f.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),It(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?mt(32926):_t(32926)}function Rt(q){D!==q&&(q?n.frontFace(2304):n.frontFace(2305),D=q)}function Dt(q){q!==eH?(mt(2884),q!==I&&(q===ET?n.cullFace(1029):q===nH?n.cullFace(1028):n.cullFace(1032))):_t(2884),I=q}function Wt(q){q!==H&&(K&&n.lineWidth(q),H=q)}function It(q,Pt,St){q?(mt(32823),(W!==Pt||U!==St)&&(n.polygonOffset(Pt,St),W=Pt,U=St)):_t(32823)}function X(q){q?mt(3089):_t(3089)}function $(q){q===void 0&&(q=33984+tt-1),at!==q&&(n.activeTexture(q),at=q)}function wt(q,Pt){at===null&&$();let St=it[at];St===void 0&&(St={type:void 0,texture:void 0},it[at]=St),(St.type!==q||St.texture!==Pt)&&(n.bindTexture(q,Pt||z[q]),St.type=q,St.texture=Pt)}function Lt(){const q=it[at];q!==void 0&&q.type!==void 0&&(n.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function $t(){try{n.compressedTexImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Kt(){try{n.texImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function re(){try{n.texImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Jt(q){F.equals(q)===!1&&(n.scissor(q.x,q.y,q.z,q.w),F.copy(q))}function se(q){G.equals(q)===!1&&(n.viewport(q.x,q.y,q.z,q.w),G.copy(q))}function ft(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},at=null,it={},m=null,y={},v=null,w=!1,S=null,P=null,b=null,M=null,R=null,O=null,k=null,N=!1,D=null,I=null,H=null,W=null,U=null,F.set(0,0,n.canvas.width,n.canvas.height),G.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),f.reset()}return{buffers:{color:a,depth:c,stencil:f},enable:mt,disable:_t,bindFramebuffer:Ot,bindXRFramebuffer:nt,useProgram:At,setBlending:jt,setMaterial:bt,setFlipSided:Rt,setCullFace:Dt,setLineWidth:Wt,setPolygonOffset:It,setScissorTest:X,activeTexture:$,bindTexture:wt,unbindTexture:Lt,compressedTexImage2D:$t,texImage2D:Kt,texImage3D:re,scissor:Jt,viewport:se,reset:ft}}function w9(n,t,e,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,f=r.maxCubemapSize,d=r.maxTextureSize,m=r.maxSamples,y=new WeakMap;let v,w=!1;try{w=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(X,$){return w?new OffscreenCanvas(X,$):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function P(X,$,wt,Lt){let $t=1;if((X.width>Lt||X.height>Lt)&&($t=Lt/Math.max(X.width,X.height)),$t<1||$===!0)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){const Kt=$?gk:Math.floor,re=Kt($t*X.width),Jt=Kt($t*X.height);v===void 0&&(v=S(re,Jt));const se=wt?S(re,Jt):v;return se.width=re,se.height=Jt,se.getContext("2d").drawImage(X,0,0,re,Jt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X.width+"x"+X.height+") to ("+re+"x"+Jt+")."),se}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X.width+"x"+X.height+")."),X;return X}function b(X){return Ux(X.width)&&Ux(X.height)}function M(X){return a?!1:X.wrapS!==vr||X.wrapT!==vr||X.minFilter!==Qn&&X.minFilter!==jr}function R(X,$){return X.generateMipmaps&&$&&X.minFilter!==Qn&&X.minFilter!==jr}function O(X,$,wt,Lt,$t=1){n.generateMipmap(X);const Kt=i.get($);Kt.__maxMipLevel=Math.log2(Math.max(wt,Lt,$t))}function k(X,$,wt){if(a===!1)return $;if(X!==null){if(n[X]!==void 0)return n[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Lt=$;return $===6403&&(wt===5126&&(Lt=33326),wt===5131&&(Lt=33325),wt===5121&&(Lt=33321)),$===6407&&(wt===5126&&(Lt=34837),wt===5131&&(Lt=34843),wt===5121&&(Lt=32849)),$===6408&&(wt===5126&&(Lt=34836),wt===5131&&(Lt=34842),wt===5121&&(Lt=32856)),(Lt===33325||Lt===33326||Lt===34842||Lt===34836)&&t.get("EXT_color_buffer_float"),Lt}function N(X){return X===Qn||X===RT||X===IT?9728:9729}function D(X){const $=X.target;$.removeEventListener("dispose",D),H($),$.isVideoTexture&&y.delete($),o.memory.textures--}function I(X){const $=X.target;$.removeEventListener("dispose",I),W($)}function H(X){const $=i.get(X);$.__webglInit!==void 0&&(n.deleteTexture($.__webglTexture),i.remove(X))}function W(X){const $=X.texture,wt=i.get(X),Lt=i.get($);if(X){if(Lt.__webglTexture!==void 0&&(n.deleteTexture(Lt.__webglTexture),o.memory.textures--),X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let $t=0;$t<6;$t++)n.deleteFramebuffer(wt.__webglFramebuffer[$t]),wt.__webglDepthbuffer&&n.deleteRenderbuffer(wt.__webglDepthbuffer[$t]);else n.deleteFramebuffer(wt.__webglFramebuffer),wt.__webglDepthbuffer&&n.deleteRenderbuffer(wt.__webglDepthbuffer),wt.__webglMultisampledFramebuffer&&n.deleteFramebuffer(wt.__webglMultisampledFramebuffer),wt.__webglColorRenderbuffer&&n.deleteRenderbuffer(wt.__webglColorRenderbuffer),wt.__webglDepthRenderbuffer&&n.deleteRenderbuffer(wt.__webglDepthRenderbuffer);if(X.isWebGLMultipleRenderTargets)for(let $t=0,Kt=$.length;$t<Kt;$t++){const re=i.get($[$t]);re.__webglTexture&&(n.deleteTexture(re.__webglTexture),o.memory.textures--),i.remove($[$t])}i.remove($),i.remove(X)}}let U=0;function tt(){U=0}function K(){const X=U;return X>=c&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+c),U+=1,X}function Y(X,$){const wt=i.get(X);if(X.isVideoTexture&&bt(X),X.version>0&&wt.__version!==X.version){const Lt=X.image;if(Lt===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Lt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{lt(wt,X,$);return}}e.activeTexture(33984+$),e.bindTexture(3553,wt.__webglTexture)}function rt(X,$){const wt=i.get(X);if(X.version>0&&wt.__version!==X.version){lt(wt,X,$);return}e.activeTexture(33984+$),e.bindTexture(35866,wt.__webglTexture)}function at(X,$){const wt=i.get(X);if(X.version>0&&wt.__version!==X.version){lt(wt,X,$);return}e.activeTexture(33984+$),e.bindTexture(32879,wt.__webglTexture)}function it(X,$){const wt=i.get(X);if(X.version>0&&wt.__version!==X.version){z(wt,X,$);return}e.activeTexture(33984+$),e.bindTexture(34067,wt.__webglTexture)}const J={[Bx]:10497,[vr]:33071,[Vx]:33648},pt={[Qn]:9728,[RT]:9984,[IT]:9986,[jr]:9729,[LH]:9985,[Fg]:9987};function F(X,$,wt){if(wt?(n.texParameteri(X,10242,J[$.wrapS]),n.texParameteri(X,10243,J[$.wrapT]),(X===32879||X===35866)&&n.texParameteri(X,32882,J[$.wrapR]),n.texParameteri(X,10240,pt[$.magFilter]),n.texParameteri(X,10241,pt[$.minFilter])):(n.texParameteri(X,10242,33071),n.texParameteri(X,10243,33071),(X===32879||X===35866)&&n.texParameteri(X,32882,33071),($.wrapS!==vr||$.wrapT!==vr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(X,10240,N($.magFilter)),n.texParameteri(X,10241,N($.minFilter)),$.minFilter!==Qn&&$.minFilter!==jr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const Lt=t.get("EXT_texture_filter_anisotropic");if($.type===pl&&t.has("OES_texture_float_linear")===!1||a===!1&&$.type===uc&&t.has("OES_texture_half_float_linear")===!1)return;($.anisotropy>1||i.get($).__currentAnisotropy)&&(n.texParameterf(X,Lt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($.anisotropy,r.getMaxAnisotropy())),i.get($).__currentAnisotropy=$.anisotropy)}}function G(X,$){X.__webglInit===void 0&&(X.__webglInit=!0,$.addEventListener("dispose",D),X.__webglTexture=n.createTexture(),o.memory.textures++)}function lt(X,$,wt){let Lt=3553;$.isDataTexture2DArray&&(Lt=35866),$.isDataTexture3D&&(Lt=32879),G(X,$),e.activeTexture(33984+wt),e.bindTexture(Lt,X.__webglTexture),n.pixelStorei(37440,$.flipY),n.pixelStorei(37441,$.premultiplyAlpha),n.pixelStorei(3317,$.unpackAlignment),n.pixelStorei(37443,0);const $t=M($)&&b($.image)===!1,Kt=P($.image,$t,!1,d),re=b(Kt)||a,Jt=s.convert($.format);let se=s.convert($.type),ft=k($.internalFormat,Jt,se);F(Lt,$,re);let q;const Pt=$.mipmaps;if($.isDepthTexture)ft=6402,a?$.type===pl?ft=36012:$.type===Um?ft=33190:$.type===Ef?ft=35056:ft=33189:$.type===pl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),$.format===cc&&ft===6402&&$.type!==sg&&$.type!==Um&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),$.type=sg,se=s.convert($.type)),$.format===Xf&&ft===6402&&(ft=34041,$.type!==Ef&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),$.type=Ef,se=s.convert($.type))),e.texImage2D(3553,0,ft,Kt.width,Kt.height,0,Jt,se,null);else if($.isDataTexture)if(Pt.length>0&&re){for(let St=0,zt=Pt.length;St<zt;St++)q=Pt[St],e.texImage2D(3553,St,ft,q.width,q.height,0,Jt,se,q.data);$.generateMipmaps=!1,X.__maxMipLevel=Pt.length-1}else e.texImage2D(3553,0,ft,Kt.width,Kt.height,0,Jt,se,Kt.data),X.__maxMipLevel=0;else if($.isCompressedTexture){for(let St=0,zt=Pt.length;St<zt;St++)q=Pt[St],$.format!==xr&&$.format!==xa?Jt!==null?e.compressedTexImage2D(3553,St,ft,q.width,q.height,0,q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):e.texImage2D(3553,St,ft,q.width,q.height,0,Jt,se,q.data);X.__maxMipLevel=Pt.length-1}else if($.isDataTexture2DArray)e.texImage3D(35866,0,ft,Kt.width,Kt.height,Kt.depth,0,Jt,se,Kt.data),X.__maxMipLevel=0;else if($.isDataTexture3D)e.texImage3D(32879,0,ft,Kt.width,Kt.height,Kt.depth,0,Jt,se,Kt.data),X.__maxMipLevel=0;else if(Pt.length>0&&re){for(let St=0,zt=Pt.length;St<zt;St++)q=Pt[St],e.texImage2D(3553,St,ft,Jt,se,q);$.generateMipmaps=!1,X.__maxMipLevel=Pt.length-1}else e.texImage2D(3553,0,ft,Jt,se,Kt),X.__maxMipLevel=0;R($,re)&&O(Lt,$,Kt.width,Kt.height),X.__version=$.version,$.onUpdate&&$.onUpdate($)}function z(X,$,wt){if($.image.length!==6)return;G(X,$),e.activeTexture(33984+wt),e.bindTexture(34067,X.__webglTexture),n.pixelStorei(37440,$.flipY),n.pixelStorei(37441,$.premultiplyAlpha),n.pixelStorei(3317,$.unpackAlignment),n.pixelStorei(37443,0);const Lt=$&&($.isCompressedTexture||$.image[0].isCompressedTexture),$t=$.image[0]&&$.image[0].isDataTexture,Kt=[];for(let St=0;St<6;St++)!Lt&&!$t?Kt[St]=P($.image[St],!1,!0,f):Kt[St]=$t?$.image[St].image:$.image[St];const re=Kt[0],Jt=b(re)||a,se=s.convert($.format),ft=s.convert($.type),q=k($.internalFormat,se,ft);F(34067,$,Jt);let Pt;if(Lt){for(let St=0;St<6;St++){Pt=Kt[St].mipmaps;for(let zt=0;zt<Pt.length;zt++){const Xt=Pt[zt];$.format!==xr&&$.format!==xa?se!==null?e.compressedTexImage2D(34069+St,zt,q,Xt.width,Xt.height,0,Xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):e.texImage2D(34069+St,zt,q,Xt.width,Xt.height,0,se,ft,Xt.data)}}X.__maxMipLevel=Pt.length-1}else{Pt=$.mipmaps;for(let St=0;St<6;St++)if($t){e.texImage2D(34069+St,0,q,Kt[St].width,Kt[St].height,0,se,ft,Kt[St].data);for(let zt=0;zt<Pt.length;zt++){const ue=Pt[zt].image[St].image;e.texImage2D(34069+St,zt+1,q,ue.width,ue.height,0,se,ft,ue.data)}}else{e.texImage2D(34069+St,0,q,se,ft,Kt[St]);for(let zt=0;zt<Pt.length;zt++){const Xt=Pt[zt];e.texImage2D(34069+St,zt+1,q,se,ft,Xt.image[St])}}X.__maxMipLevel=Pt.length}R($,Jt)&&O(34067,$,re.width,re.height),X.__version=$.version,$.onUpdate&&$.onUpdate($)}function mt(X,$,wt,Lt,$t){const Kt=s.convert(wt.format),re=s.convert(wt.type),Jt=k(wt.internalFormat,Kt,re);$t===32879||$t===35866?e.texImage3D($t,0,Jt,$.width,$.height,$.depth,0,Kt,re,null):e.texImage2D($t,0,Jt,$.width,$.height,0,Kt,re,null),e.bindFramebuffer(36160,X),n.framebufferTexture2D(36160,Lt,$t,i.get(wt).__webglTexture,0),e.bindFramebuffer(36160,null)}function _t(X,$,wt){if(n.bindRenderbuffer(36161,X),$.depthBuffer&&!$.stencilBuffer){let Lt=33189;if(wt){const $t=$.depthTexture;$t&&$t.isDepthTexture&&($t.type===pl?Lt=36012:$t.type===Um&&(Lt=33190));const Kt=jt($);n.renderbufferStorageMultisample(36161,Kt,Lt,$.width,$.height)}else n.renderbufferStorage(36161,Lt,$.width,$.height);n.framebufferRenderbuffer(36160,36096,36161,X)}else if($.depthBuffer&&$.stencilBuffer){if(wt){const Lt=jt($);n.renderbufferStorageMultisample(36161,Lt,35056,$.width,$.height)}else n.renderbufferStorage(36161,34041,$.width,$.height);n.framebufferRenderbuffer(36160,33306,36161,X)}else{const Lt=$.isWebGLMultipleRenderTargets===!0?$.texture[0]:$.texture,$t=s.convert(Lt.format),Kt=s.convert(Lt.type),re=k(Lt.internalFormat,$t,Kt);if(wt){const Jt=jt($);n.renderbufferStorageMultisample(36161,Jt,re,$.width,$.height)}else n.renderbufferStorage(36161,re,$.width,$.height)}n.bindRenderbuffer(36161,null)}function nt(X,$){if($&&$.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,X),!($.depthTexture&&$.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get($.depthTexture).__webglTexture||$.depthTexture.image.width!==$.width||$.depthTexture.image.height!==$.height)&&($.depthTexture.image.width=$.width,$.depthTexture.image.height=$.height,$.depthTexture.needsUpdate=!0),Y($.depthTexture,0);const Lt=i.get($.depthTexture).__webglTexture;if($.depthTexture.format===cc)n.framebufferTexture2D(36160,36096,3553,Lt,0);else if($.depthTexture.format===Xf)n.framebufferTexture2D(36160,33306,3553,Lt,0);else throw new Error("Unknown depthTexture format")}function Ot(X){const $=i.get(X),wt=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture){if(wt)throw new Error("target.depthTexture not supported in Cube render targets");nt($.__webglFramebuffer,X)}else if(wt){$.__webglDepthbuffer=[];for(let Lt=0;Lt<6;Lt++)e.bindFramebuffer(36160,$.__webglFramebuffer[Lt]),$.__webglDepthbuffer[Lt]=n.createRenderbuffer(),_t($.__webglDepthbuffer[Lt],X,!1)}else e.bindFramebuffer(36160,$.__webglFramebuffer),$.__webglDepthbuffer=n.createRenderbuffer(),_t($.__webglDepthbuffer,X,!1);e.bindFramebuffer(36160,null)}function At(X){const $=X.texture,wt=i.get(X),Lt=i.get($);X.addEventListener("dispose",I),X.isWebGLMultipleRenderTargets!==!0&&(Lt.__webglTexture=n.createTexture(),Lt.__version=$.version,o.memory.textures++);const $t=X.isWebGLCubeRenderTarget===!0,Kt=X.isWebGLMultipleRenderTargets===!0,re=X.isWebGLMultisampleRenderTarget===!0,Jt=$.isDataTexture3D||$.isDataTexture2DArray,se=b(X)||a;if(a&&$.format===xa&&($.type===pl||$.type===uc)&&($.format=xr,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),$t){wt.__webglFramebuffer=[];for(let ft=0;ft<6;ft++)wt.__webglFramebuffer[ft]=n.createFramebuffer()}else if(wt.__webglFramebuffer=n.createFramebuffer(),Kt)if(r.drawBuffers){const ft=X.texture;for(let q=0,Pt=ft.length;q<Pt;q++){const St=i.get(ft[q]);St.__webglTexture===void 0&&(St.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(re)if(a){wt.__webglMultisampledFramebuffer=n.createFramebuffer(),wt.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,wt.__webglColorRenderbuffer);const ft=s.convert($.format),q=s.convert($.type),Pt=k($.internalFormat,ft,q),St=jt(X);n.renderbufferStorageMultisample(36161,St,Pt,X.width,X.height),e.bindFramebuffer(36160,wt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,wt.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),X.depthBuffer&&(wt.__webglDepthRenderbuffer=n.createRenderbuffer(),_t(wt.__webglDepthRenderbuffer,X,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if($t){e.bindTexture(34067,Lt.__webglTexture),F(34067,$,se);for(let ft=0;ft<6;ft++)mt(wt.__webglFramebuffer[ft],X,$,36064,34069+ft);R($,se)&&O(34067,$,X.width,X.height),e.unbindTexture()}else if(Kt){const ft=X.texture;for(let q=0,Pt=ft.length;q<Pt;q++){const St=ft[q],zt=i.get(St);e.bindTexture(3553,zt.__webglTexture),F(3553,St,se),mt(wt.__webglFramebuffer,X,St,36064+q,3553),R(St,se)&&O(3553,St,X.width,X.height)}e.unbindTexture()}else{let ft=3553;Jt&&(a?ft=$.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),e.bindTexture(ft,Lt.__webglTexture),F(ft,$,se),mt(wt.__webglFramebuffer,X,$,36064,ft),R($,se)&&O(ft,$,X.width,X.height,X.depth),e.unbindTexture()}X.depthBuffer&&Ot(X)}function kt(X){const $=b(X)||a,wt=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let Lt=0,$t=wt.length;Lt<$t;Lt++){const Kt=wt[Lt];if(R(Kt,$)){const re=X.isWebGLCubeRenderTarget?34067:3553,Jt=i.get(Kt).__webglTexture;e.bindTexture(re,Jt),O(re,Kt,X.width,X.height),e.unbindTexture()}}}function Ft(X){if(X.isWebGLMultisampleRenderTarget)if(a){const $=X.width,wt=X.height;let Lt=16384;X.depthBuffer&&(Lt|=256),X.stencilBuffer&&(Lt|=1024);const $t=i.get(X);e.bindFramebuffer(36008,$t.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,$t.__webglFramebuffer),n.blitFramebuffer(0,0,$,wt,0,0,$,wt,Lt,9728),e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,$t.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function jt(X){return a&&X.isWebGLMultisampleRenderTarget?Math.min(m,X.samples):0}function bt(X){const $=o.render.frame;y.get(X)!==$&&(y.set(X,$),X.update())}let Rt=!1,Dt=!1;function Wt(X,$){X&&X.isWebGLRenderTarget&&(Rt===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Rt=!0),X=X.texture),Y(X,$)}function It(X,$){X&&X.isWebGLCubeRenderTarget&&(Dt===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Dt=!0),X=X.texture),it(X,$)}this.allocateTextureUnit=K,this.resetTextureUnits=tt,this.setTexture2D=Y,this.setTexture2DArray=rt,this.setTexture3D=at,this.setTextureCube=it,this.setupRenderTarget=At,this.updateRenderTargetMipmap=kt,this.updateMultisampleRenderTarget=Ft,this.safeSetTexture2D=Wt,this.safeSetTextureCube=It}function b9(n,t,e){const i=e.isWebGL2;function r(s){let o;if(s===bc)return 5121;if(s===DH)return 32819;if(s===OH)return 32820;if(s===NH)return 33635;if(s===kH)return 5120;if(s===RH)return 5122;if(s===sg)return 5123;if(s===IH)return 5124;if(s===Um)return 5125;if(s===pl)return 5126;if(s===uc)return i?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===FH)return 6406;if(s===xa)return 6407;if(s===xr)return 6408;if(s===zH)return 6409;if(s===BH)return 6410;if(s===cc)return 6402;if(s===Xf)return 34041;if(s===UH)return 6403;if(s===HH)return 36244;if(s===jH)return 33319;if(s===WH)return 33320;if(s===GH)return 36248;if(s===$H)return 36249;if(s===DT||s===OT||s===NT||s===FT)if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===DT)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===OT)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===NT)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===FT)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===zT||s===BT||s===VT||s===UT)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===zT)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===BT)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===VT)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===UT)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===ZH)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===HT||s===jT)&&(o=t.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===HT)return o.COMPRESSED_RGB8_ETC2;if(s===jT)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===qH||s===XH||s===YH||s===KH||s===JH||s===QH||s===tj||s===ej||s===nj||s===ij||s===rj||s===sj||s===oj||s===aj||s===uj||s===cj||s===hj||s===fj||s===dj||s===pj||s===mj||s===gj||s===yj||s===vj||s===_j||s===xj||s===wj||s===bj)return o=t.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===lj)return o=t.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===Ef)return i?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}class zk extends Kn{constructor(t=[]){super(),this.cameras=t}}zk.prototype.isArrayCamera=!0;class ff extends Ze{constructor(){super(),this.type="Group"}}ff.prototype.isGroup=!0;const S9={type:"move"};class E_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ff,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ff,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new st,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new st),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ff,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new st,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new st),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,f=this._hand;if(t&&e.session.visibilityState!=="visible-blurred")if(a!==null&&(r=e.getPose(t.targetRaySpace,i),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(S9))),f&&t.hand){o=!0;for(const S of t.hand.values()){const P=e.getJointPose(S,i);if(f.joints[S.jointName]===void 0){const M=new ff;M.matrixAutoUpdate=!1,M.visible=!1,f.joints[S.jointName]=M,f.add(M)}const b=f.joints[S.jointName];P!==null&&(b.matrix.fromArray(P.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.jointRadius=P.radius),b.visible=P!==null}const d=f.joints["index-finger-tip"],m=f.joints["thumb-tip"],y=d.position.distanceTo(m.position),v=.02,w=.005;f.inputState.pinching&&y>v+w?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!f.inputState.pinching&&y<=v-w&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else c!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=s!==null),f!==null&&(f.visible=o!==null),this}}class M9 extends Nl{constructor(t,e){super();const i=this,r=t.state;let s=null,o=1,a=null,c="local-floor",f=null,d=null,m=null,y=null,v=null,w=!1,S=null,P=null,b=null,M=null,R=null,O=null;const k=[],N=new Map,D=new Kn;D.layers.enable(1),D.viewport=new en;const I=new Kn;I.layers.enable(2),I.viewport=new en;const H=[D,I],W=new zk;W.layers.enable(1),W.layers.enable(2);let U=null,tt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let mt=k[z];return mt===void 0&&(mt=new E_,k[z]=mt),mt.getTargetRaySpace()},this.getControllerGrip=function(z){let mt=k[z];return mt===void 0&&(mt=new E_,k[z]=mt),mt.getGripSpace()},this.getHand=function(z){let mt=k[z];return mt===void 0&&(mt=new E_,k[z]=mt),mt.getHandSpace()};function K(z){const mt=N.get(z.inputSource);mt&&mt.dispatchEvent({type:z.type,data:z.inputSource})}function Y(){N.forEach(function(z,mt){z.disconnect(mt)}),N.clear(),U=null,tt=null,r.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),m&&e.deleteFramebuffer(m),S&&e.deleteFramebuffer(S),P&&e.deleteRenderbuffer(P),b&&e.deleteRenderbuffer(b),m=null,S=null,P=null,b=null,v=null,y=null,d=null,s=null,lt.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){o=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){c=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return y!==null?y:v},this.getBinding=function(){return d},this.getFrame=function(){return M},this.getSession=function(){return s},this.setSession=async function(z){if(s=z,s!==null){s.addEventListener("select",K),s.addEventListener("selectstart",K),s.addEventListener("selectend",K),s.addEventListener("squeeze",K),s.addEventListener("squeezestart",K),s.addEventListener("squeezeend",K),s.addEventListener("end",Y),s.addEventListener("inputsourceschange",rt);const mt=e.getContextAttributes();if(mt.xrCompatible!==!0&&await e.makeXRCompatible(),s.renderState.layers===void 0){const _t={antialias:mt.antialias,alpha:mt.alpha,depth:mt.depth,stencil:mt.stencil,framebufferScaleFactor:o};v=new XRWebGLLayer(s,e,_t),s.updateRenderState({baseLayer:v})}else if(e instanceof WebGLRenderingContext){const _t={antialias:!0,alpha:mt.alpha,depth:mt.depth,stencil:mt.stencil,framebufferScaleFactor:o};v=new XRWebGLLayer(s,e,_t),s.updateRenderState({layers:[v]})}else{w=mt.antialias;let _t=null;mt.depth&&(O=256,mt.stencil&&(O|=1024),R=mt.stencil?33306:36096,_t=mt.stencil?35056:33190);const nt={colorFormat:mt.alpha?32856:32849,depthFormat:_t,scaleFactor:o};d=new XRWebGLBinding(s,e),y=d.createProjectionLayer(nt),m=e.createFramebuffer(),s.updateRenderState({layers:[y]}),w&&(S=e.createFramebuffer(),P=e.createRenderbuffer(),e.bindRenderbuffer(36161,P),e.renderbufferStorageMultisample(36161,4,32856,y.textureWidth,y.textureHeight),r.bindFramebuffer(36160,S),e.framebufferRenderbuffer(36160,36064,36161,P),e.bindRenderbuffer(36161,null),_t!==null&&(b=e.createRenderbuffer(),e.bindRenderbuffer(36161,b),e.renderbufferStorageMultisample(36161,4,_t,y.textureWidth,y.textureHeight),e.framebufferRenderbuffer(36160,R,36161,b),e.bindRenderbuffer(36161,null)),r.bindFramebuffer(36160,null))}a=await s.requestReferenceSpace(c),lt.setContext(s),lt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function rt(z){const mt=s.inputSources;for(let _t=0;_t<k.length;_t++)N.set(mt[_t],k[_t]);for(let _t=0;_t<z.removed.length;_t++){const nt=z.removed[_t],Ot=N.get(nt);Ot&&(Ot.dispatchEvent({type:"disconnected",data:nt}),N.delete(nt))}for(let _t=0;_t<z.added.length;_t++){const nt=z.added[_t],Ot=N.get(nt);Ot&&Ot.dispatchEvent({type:"connected",data:nt})}}const at=new st,it=new st;function J(z,mt,_t){at.setFromMatrixPosition(mt.matrixWorld),it.setFromMatrixPosition(_t.matrixWorld);const nt=at.distanceTo(it),Ot=mt.projectionMatrix.elements,At=_t.projectionMatrix.elements,kt=Ot[14]/(Ot[10]-1),Ft=Ot[14]/(Ot[10]+1),jt=(Ot[9]+1)/Ot[5],bt=(Ot[9]-1)/Ot[5],Rt=(Ot[8]-1)/Ot[0],Dt=(At[8]+1)/At[0],Wt=kt*Rt,It=kt*Dt,X=nt/(-Rt+Dt),$=X*-Rt;mt.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX($),z.translateZ(X),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();const wt=kt+X,Lt=Ft+X,$t=Wt-$,Kt=It+(nt-$),re=jt*Ft/Lt*wt,Jt=bt*Ft/Lt*wt;z.projectionMatrix.makePerspective($t,Kt,re,Jt,wt,Lt)}function pt(z,mt){mt===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(mt.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(s===null)return;W.near=I.near=D.near=z.near,W.far=I.far=D.far=z.far,(U!==W.near||tt!==W.far)&&(s.updateRenderState({depthNear:W.near,depthFar:W.far}),U=W.near,tt=W.far);const mt=z.parent,_t=W.cameras;pt(W,mt);for(let Ot=0;Ot<_t.length;Ot++)pt(_t[Ot],mt);W.matrixWorld.decompose(W.position,W.quaternion,W.scale),z.position.copy(W.position),z.quaternion.copy(W.quaternion),z.scale.copy(W.scale),z.matrix.copy(W.matrix),z.matrixWorld.copy(W.matrixWorld);const nt=z.children;for(let Ot=0,At=nt.length;Ot<At;Ot++)nt[Ot].updateMatrixWorld(!0);_t.length===2?J(W,D,I):W.projectionMatrix.copy(D.projectionMatrix)},this.getCamera=function(){return W},this.getFoveation=function(){if(y!==null)return y.fixedFoveation;if(v!==null)return v.fixedFoveation},this.setFoveation=function(z){y!==null&&(y.fixedFoveation=z),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=z)};let F=null;function G(z,mt){if(f=mt.getViewerPose(a),M=mt,f!==null){const nt=f.views;v!==null&&r.bindXRFramebuffer(v.framebuffer);let Ot=!1;nt.length!==W.cameras.length&&(W.cameras.length=0,Ot=!0);for(let At=0;At<nt.length;At++){const kt=nt[At];let Ft=null;if(v!==null)Ft=v.getViewport(kt);else{const bt=d.getViewSubImage(y,kt);r.bindXRFramebuffer(m),bt.depthStencilTexture!==void 0&&e.framebufferTexture2D(36160,R,3553,bt.depthStencilTexture,0),e.framebufferTexture2D(36160,36064,3553,bt.colorTexture,0),Ft=bt.viewport}const jt=H[At];jt.matrix.fromArray(kt.transform.matrix),jt.projectionMatrix.fromArray(kt.projectionMatrix),jt.viewport.set(Ft.x,Ft.y,Ft.width,Ft.height),At===0&&W.matrix.copy(jt.matrix),Ot===!0&&W.cameras.push(jt)}w&&(r.bindXRFramebuffer(S),O!==null&&e.clear(O))}const _t=s.inputSources;for(let nt=0;nt<k.length;nt++){const Ot=k[nt],At=_t[nt];Ot.update(At,mt,a)}if(F&&F(z,mt),w){const nt=y.textureWidth,Ot=y.textureHeight;r.bindFramebuffer(36008,S),r.bindFramebuffer(36009,m),e.invalidateFramebuffer(36008,[R]),e.invalidateFramebuffer(36009,[R]),e.blitFramebuffer(0,0,nt,Ot,0,0,nt,Ot,16384,9728),e.invalidateFramebuffer(36008,[36064]),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),r.bindFramebuffer(36160,S)}M=null}const lt=new Sk;lt.setAnimationLoop(G),this.setAnimationLoop=function(z){F=z},this.dispose=function(){}}}function T9(n){function t(b,M){b.fogColor.value.copy(M.color),M.isFog?(b.fogNear.value=M.near,b.fogFar.value=M.far):M.isFogExp2&&(b.fogDensity.value=M.density)}function e(b,M,R,O,k){M.isMeshBasicMaterial?i(b,M):M.isMeshLambertMaterial?(i(b,M),c(b,M)):M.isMeshToonMaterial?(i(b,M),d(b,M)):M.isMeshPhongMaterial?(i(b,M),f(b,M)):M.isMeshStandardMaterial?(i(b,M),M.isMeshPhysicalMaterial?y(b,M,k):m(b,M)):M.isMeshMatcapMaterial?(i(b,M),v(b,M)):M.isMeshDepthMaterial?(i(b,M),w(b,M)):M.isMeshDistanceMaterial?(i(b,M),S(b,M)):M.isMeshNormalMaterial?(i(b,M),P(b,M)):M.isLineBasicMaterial?(r(b,M),M.isLineDashedMaterial&&s(b,M)):M.isPointsMaterial?o(b,M,R,O):M.isSpriteMaterial?a(b,M):M.isShadowMaterial?(b.color.value.copy(M.color),b.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function i(b,M){b.opacity.value=M.opacity,M.color&&b.diffuse.value.copy(M.color),M.emissive&&b.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(b.map.value=M.map),M.alphaMap&&(b.alphaMap.value=M.alphaMap),M.specularMap&&(b.specularMap.value=M.specularMap),M.alphaTest>0&&(b.alphaTest.value=M.alphaTest);const R=n.get(M).envMap;if(R){b.envMap.value=R,b.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=M.reflectivity,b.ior.value=M.ior,b.refractionRatio.value=M.refractionRatio;const N=n.get(R).__maxMipLevel;N!==void 0&&(b.maxMipLevel.value=N)}M.lightMap&&(b.lightMap.value=M.lightMap,b.lightMapIntensity.value=M.lightMapIntensity),M.aoMap&&(b.aoMap.value=M.aoMap,b.aoMapIntensity.value=M.aoMapIntensity);let O;M.map?O=M.map:M.specularMap?O=M.specularMap:M.displacementMap?O=M.displacementMap:M.normalMap?O=M.normalMap:M.bumpMap?O=M.bumpMap:M.roughnessMap?O=M.roughnessMap:M.metalnessMap?O=M.metalnessMap:M.alphaMap?O=M.alphaMap:M.emissiveMap?O=M.emissiveMap:M.clearcoatMap?O=M.clearcoatMap:M.clearcoatNormalMap?O=M.clearcoatNormalMap:M.clearcoatRoughnessMap?O=M.clearcoatRoughnessMap:M.specularIntensityMap?O=M.specularIntensityMap:M.specularTintMap?O=M.specularTintMap:M.transmissionMap?O=M.transmissionMap:M.thicknessMap&&(O=M.thicknessMap),O!==void 0&&(O.isWebGLRenderTarget&&(O=O.texture),O.matrixAutoUpdate===!0&&O.updateMatrix(),b.uvTransform.value.copy(O.matrix));let k;M.aoMap?k=M.aoMap:M.lightMap&&(k=M.lightMap),k!==void 0&&(k.isWebGLRenderTarget&&(k=k.texture),k.matrixAutoUpdate===!0&&k.updateMatrix(),b.uv2Transform.value.copy(k.matrix))}function r(b,M){b.diffuse.value.copy(M.color),b.opacity.value=M.opacity}function s(b,M){b.dashSize.value=M.dashSize,b.totalSize.value=M.dashSize+M.gapSize,b.scale.value=M.scale}function o(b,M,R,O){b.diffuse.value.copy(M.color),b.opacity.value=M.opacity,b.size.value=M.size*R,b.scale.value=O*.5,M.map&&(b.map.value=M.map),M.alphaMap&&(b.alphaMap.value=M.alphaMap),M.alphaTest>0&&(b.alphaTest.value=M.alphaTest);let k;M.map?k=M.map:M.alphaMap&&(k=M.alphaMap),k!==void 0&&(k.matrixAutoUpdate===!0&&k.updateMatrix(),b.uvTransform.value.copy(k.matrix))}function a(b,M){b.diffuse.value.copy(M.color),b.opacity.value=M.opacity,b.rotation.value=M.rotation,M.map&&(b.map.value=M.map),M.alphaMap&&(b.alphaMap.value=M.alphaMap),M.alphaTest>0&&(b.alphaTest.value=M.alphaTest);let R;M.map?R=M.map:M.alphaMap&&(R=M.alphaMap),R!==void 0&&(R.matrixAutoUpdate===!0&&R.updateMatrix(),b.uvTransform.value.copy(R.matrix))}function c(b,M){M.emissiveMap&&(b.emissiveMap.value=M.emissiveMap)}function f(b,M){b.specular.value.copy(M.specular),b.shininess.value=Math.max(M.shininess,1e-4),M.emissiveMap&&(b.emissiveMap.value=M.emissiveMap),M.bumpMap&&(b.bumpMap.value=M.bumpMap,b.bumpScale.value=M.bumpScale,M.side===jn&&(b.bumpScale.value*=-1)),M.normalMap&&(b.normalMap.value=M.normalMap,b.normalScale.value.copy(M.normalScale),M.side===jn&&b.normalScale.value.negate()),M.displacementMap&&(b.displacementMap.value=M.displacementMap,b.displacementScale.value=M.displacementScale,b.displacementBias.value=M.displacementBias)}function d(b,M){M.gradientMap&&(b.gradientMap.value=M.gradientMap),M.emissiveMap&&(b.emissiveMap.value=M.emissiveMap),M.bumpMap&&(b.bumpMap.value=M.bumpMap,b.bumpScale.value=M.bumpScale,M.side===jn&&(b.bumpScale.value*=-1)),M.normalMap&&(b.normalMap.value=M.normalMap,b.normalScale.value.copy(M.normalScale),M.side===jn&&b.normalScale.value.negate()),M.displacementMap&&(b.displacementMap.value=M.displacementMap,b.displacementScale.value=M.displacementScale,b.displacementBias.value=M.displacementBias)}function m(b,M){b.roughness.value=M.roughness,b.metalness.value=M.metalness,M.roughnessMap&&(b.roughnessMap.value=M.roughnessMap),M.metalnessMap&&(b.metalnessMap.value=M.metalnessMap),M.emissiveMap&&(b.emissiveMap.value=M.emissiveMap),M.bumpMap&&(b.bumpMap.value=M.bumpMap,b.bumpScale.value=M.bumpScale,M.side===jn&&(b.bumpScale.value*=-1)),M.normalMap&&(b.normalMap.value=M.normalMap,b.normalScale.value.copy(M.normalScale),M.side===jn&&b.normalScale.value.negate()),M.displacementMap&&(b.displacementMap.value=M.displacementMap,b.displacementScale.value=M.displacementScale,b.displacementBias.value=M.displacementBias),n.get(M).envMap&&(b.envMapIntensity.value=M.envMapIntensity)}function y(b,M,R){m(b,M),b.ior.value=M.ior,M.sheenTint&&b.sheenTint.value.copy(M.sheenTint),M.clearcoat>0&&(b.clearcoat.value=M.clearcoat,b.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(b.clearcoatMap.value=M.clearcoatMap),M.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap),M.clearcoatNormalMap&&(b.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),b.clearcoatNormalMap.value=M.clearcoatNormalMap,M.side===jn&&b.clearcoatNormalScale.value.negate())),M.transmission>0&&(b.transmission.value=M.transmission,b.transmissionSamplerMap.value=R.texture,b.transmissionSamplerSize.value.set(R.width,R.height),M.transmissionMap&&(b.transmissionMap.value=M.transmissionMap),b.thickness.value=M.thickness,M.thicknessMap&&(b.thicknessMap.value=M.thicknessMap),b.attenuationDistance.value=M.attenuationDistance,b.attenuationTint.value.copy(M.attenuationTint)),b.specularIntensity.value=M.specularIntensity,b.specularTint.value.copy(M.specularTint),M.specularIntensityMap&&(b.specularIntensityMap.value=M.specularIntensityMap),M.specularTintMap&&(b.specularTintMap.value=M.specularTintMap)}function v(b,M){M.matcap&&(b.matcap.value=M.matcap),M.bumpMap&&(b.bumpMap.value=M.bumpMap,b.bumpScale.value=M.bumpScale,M.side===jn&&(b.bumpScale.value*=-1)),M.normalMap&&(b.normalMap.value=M.normalMap,b.normalScale.value.copy(M.normalScale),M.side===jn&&b.normalScale.value.negate()),M.displacementMap&&(b.displacementMap.value=M.displacementMap,b.displacementScale.value=M.displacementScale,b.displacementBias.value=M.displacementBias)}function w(b,M){M.displacementMap&&(b.displacementMap.value=M.displacementMap,b.displacementScale.value=M.displacementScale,b.displacementBias.value=M.displacementBias)}function S(b,M){M.displacementMap&&(b.displacementMap.value=M.displacementMap,b.displacementScale.value=M.displacementScale,b.displacementBias.value=M.displacementBias),b.referencePosition.value.copy(M.referencePosition),b.nearDistance.value=M.nearDistance,b.farDistance.value=M.farDistance}function P(b,M){M.bumpMap&&(b.bumpMap.value=M.bumpMap,b.bumpScale.value=M.bumpScale,M.side===jn&&(b.bumpScale.value*=-1)),M.normalMap&&(b.normalMap.value=M.normalMap,b.normalScale.value.copy(M.normalScale),M.side===jn&&b.normalScale.value.negate()),M.displacementMap&&(b.displacementMap.value=M.displacementMap,b.displacementScale.value=M.displacementScale,b.displacementBias.value=M.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:e}}function E9(){const n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.style.display="block",n}function Qe(n={}){const t=n.canvas!==void 0?n.canvas:E9(),e=n.context!==void 0?n.context:null,i=n.alpha!==void 0?n.alpha:!1,r=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,c=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,f=n.powerPreference!==void 0?n.powerPreference:"default",d=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let m=null,y=null;const v=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=tr,this.physicallyCorrectLights=!1,this.toneMapping=Pl,this.toneMappingExposure=1;const S=this;let P=!1,b=0,M=0,R=null,O=-1,k=null;const N=new en,D=new en;let I=null,H=t.width,W=t.height,U=1,tt=null,K=null;const Y=new en(0,0,H,W),rt=new en(0,0,H,W);let at=!1;const it=[],J=new Vg;let pt=!1,F=!1,G=null;const lt=new ve,z=new st,mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function _t(){return R===null?U:1}let nt=e;function Ot(Z,ht){for(let gt=0;gt<Z.length;gt++){const Ct=Z[gt],Ht=t.getContext(Ct,ht);if(Ht!==null)return Ht}return null}try{const Z={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:c,powerPreference:f,failIfMajorPerformanceCaveat:d};if(t.addEventListener("webglcontextlost",ke,!1),t.addEventListener("webglcontextrestored",Fe,!1),nt===null){const ht=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&ht.shift(),nt=Ot(ht,Z),nt===null)throw Ot(ht)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}nt.getShaderPrecisionFormat===void 0&&(nt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z}let At,kt,Ft,jt,bt,Rt,Dt,Wt,It,X,$,wt,Lt,$t,Kt,re,Jt,se,ft,q,Pt,St,zt;function Xt(){At=new XG(nt),kt=new UG(nt,At,n),At.init(kt),St=new b9(nt,At,kt),Ft=new x9(nt,At,kt),it[0]=1029,jt=new JG,bt=new u9,Rt=new w9(nt,At,Ft,bt,kt,St,jt),Dt=new jG(S),Wt=new qG(S),It=new h6(nt,kt),zt=new BG(nt,At,It,kt),X=new YG(nt,It,jt,zt),$=new n8(nt,X,It,jt),ft=new e8(nt),re=new HG(bt),wt=new l9(S,Dt,Wt,At,kt,zt,re),Lt=new T9(bt),$t=new h9(bt),Kt=new y9(At,kt),se=new zG(S,Dt,Ft,$,a),Jt=new Fk(S,$,kt),q=new VG(nt,At,jt,kt),Pt=new KG(nt,At,jt,kt),jt.programs=wt.programs,S.capabilities=kt,S.extensions=At,S.properties=bt,S.renderLists=$t,S.shadowMap=Jt,S.state=Ft,S.info=jt}Xt();const ue=new M9(S,nt);this.xr=ue,this.getContext=function(){return nt},this.getContextAttributes=function(){return nt.getContextAttributes()},this.forceContextLoss=function(){const Z=At.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){const Z=At.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return U},this.setPixelRatio=function(Z){Z!==void 0&&(U=Z,this.setSize(H,W,!1))},this.getSize=function(Z){return Z.set(H,W)},this.setSize=function(Z,ht,gt){if(ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=Z,W=ht,t.width=Math.floor(Z*U),t.height=Math.floor(ht*U),gt!==!1&&(t.style.width=Z+"px",t.style.height=ht+"px"),this.setViewport(0,0,Z,ht)},this.getDrawingBufferSize=function(Z){return Z.set(H*U,W*U).floor()},this.setDrawingBufferSize=function(Z,ht,gt){H=Z,W=ht,U=gt,t.width=Math.floor(Z*gt),t.height=Math.floor(ht*gt),this.setViewport(0,0,Z,ht)},this.getCurrentViewport=function(Z){return Z.copy(N)},this.getViewport=function(Z){return Z.copy(Y)},this.setViewport=function(Z,ht,gt,Ct){Z.isVector4?Y.set(Z.x,Z.y,Z.z,Z.w):Y.set(Z,ht,gt,Ct),Ft.viewport(N.copy(Y).multiplyScalar(U).floor())},this.getScissor=function(Z){return Z.copy(rt)},this.setScissor=function(Z,ht,gt,Ct){Z.isVector4?rt.set(Z.x,Z.y,Z.z,Z.w):rt.set(Z,ht,gt,Ct),Ft.scissor(D.copy(rt).multiplyScalar(U).floor())},this.getScissorTest=function(){return at},this.setScissorTest=function(Z){Ft.setScissorTest(at=Z)},this.setOpaqueSort=function(Z){tt=Z},this.setTransparentSort=function(Z){K=Z},this.getClearColor=function(Z){return Z.copy(se.getClearColor())},this.setClearColor=function(){se.setClearColor.apply(se,arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha.apply(se,arguments)},this.clear=function(Z,ht,gt){let Ct=0;(Z===void 0||Z)&&(Ct|=16384),(ht===void 0||ht)&&(Ct|=256),(gt===void 0||gt)&&(Ct|=1024),nt.clear(Ct)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ke,!1),t.removeEventListener("webglcontextrestored",Fe,!1),$t.dispose(),Kt.dispose(),bt.dispose(),Dt.dispose(),Wt.dispose(),$.dispose(),zt.dispose(),ue.dispose(),ue.removeEventListener("sessionstart",En),ue.removeEventListener("sessionend",Ln),G&&(G.dispose(),G=null),nr.stop()};function ke(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function Fe(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const Z=jt.autoReset,ht=Jt.enabled,gt=Jt.autoUpdate,Ct=Jt.needsUpdate,Ht=Jt.type;Xt(),jt.autoReset=Z,Jt.enabled=ht,Jt.autoUpdate=gt,Jt.needsUpdate=Ct,Jt.type=Ht}function xn(Z){const ht=Z.target;ht.removeEventListener("dispose",xn),ut(ht)}function ut(Z){Bt(Z),bt.remove(Z)}function Bt(Z){const ht=bt.get(Z).programs;ht!==void 0&&ht.forEach(function(gt){wt.releaseProgram(gt)})}function ee(Z,ht){Z.render(function(gt){S.renderBufferImmediate(gt,ht)})}this.renderBufferImmediate=function(Z,ht){zt.initAttributes();const gt=bt.get(Z);Z.hasPositions&&!gt.position&&(gt.position=nt.createBuffer()),Z.hasNormals&&!gt.normal&&(gt.normal=nt.createBuffer()),Z.hasUvs&&!gt.uv&&(gt.uv=nt.createBuffer()),Z.hasColors&&!gt.color&&(gt.color=nt.createBuffer());const Ct=ht.getAttributes();Z.hasPositions&&(nt.bindBuffer(34962,gt.position),nt.bufferData(34962,Z.positionArray,35048),zt.enableAttribute(Ct.position.location),nt.vertexAttribPointer(Ct.position.location,3,5126,!1,0,0)),Z.hasNormals&&(nt.bindBuffer(34962,gt.normal),nt.bufferData(34962,Z.normalArray,35048),zt.enableAttribute(Ct.normal.location),nt.vertexAttribPointer(Ct.normal.location,3,5126,!1,0,0)),Z.hasUvs&&(nt.bindBuffer(34962,gt.uv),nt.bufferData(34962,Z.uvArray,35048),zt.enableAttribute(Ct.uv.location),nt.vertexAttribPointer(Ct.uv.location,2,5126,!1,0,0)),Z.hasColors&&(nt.bindBuffer(34962,gt.color),nt.bufferData(34962,Z.colorArray,35048),zt.enableAttribute(Ct.color.location),nt.vertexAttribPointer(Ct.color.location,3,5126,!1,0,0)),zt.disableUnusedAttributes(),nt.drawArrays(4,0,Z.count),Z.count=0},this.renderBufferDirect=function(Z,ht,gt,Ct,Ht,Me){ht===null&&(ht=mt);const fe=Ht.isMesh&&Ht.matrixWorld.determinant()<0,le=To(Z,ht,Ct,Ht);Ft.setMaterial(Ct,fe);let we=gt.index;const ze=gt.attributes.position;if(we===null){if(ze===void 0||ze.count===0)return}else if(we.count===0)return;let Re=1;Ct.wireframe===!0&&(we=X.getWireframeAttribute(gt),Re=2),(gt.morphAttributes.position!==void 0||gt.morphAttributes.normal!==void 0)&&ft.update(Ht,gt,Ct,le),zt.setup(Ht,Ct,le,gt,we);let De,ye=q;we!==null&&(De=It.get(we),ye=Pt,ye.setIndex(De));const wr=we!==null?we.count:ze.count,rn=gt.drawRange.start*Re,br=gt.drawRange.count*Re,$n=Me!==null?Me.start*Re:0,je=Me!==null?Me.count*Re:1/0,Sr=Math.max(rn,$n),pn=Math.min(wr,rn+br,$n+je)-1,Ai=Math.max(0,pn-Sr+1);if(Ai!==0){if(Ht.isMesh)Ct.wireframe===!0?(Ft.setLineWidth(Ct.wireframeLinewidth*_t()),ye.setMode(1)):ye.setMode(4);else if(Ht.isLine){let mn=Ct.linewidth;mn===void 0&&(mn=1),Ft.setLineWidth(mn*_t()),Ht.isLineSegments?ye.setMode(1):Ht.isLineLoop?ye.setMode(2):ye.setMode(3)}else Ht.isPoints?ye.setMode(0):Ht.isSprite&&ye.setMode(4);if(Ht.isInstancedMesh)ye.renderInstances(Sr,Ai,Ht.count);else if(gt.isInstancedBufferGeometry){const mn=Math.min(gt.instanceCount,gt._maxInstanceCount);ye.renderInstances(Sr,Ai,mn)}else ye.render(Sr,Ai)}},this.compile=function(Z,ht){y=Kt.get(Z),y.init(),w.push(y),Z.traverseVisible(function(gt){gt.isLight&&gt.layers.test(ht.layers)&&(y.pushLight(gt),gt.castShadow&&y.pushShadow(gt))}),y.setupLights(S.physicallyCorrectLights),Z.traverse(function(gt){const Ct=gt.material;if(Ct)if(Array.isArray(Ct))for(let Ht=0;Ht<Ct.length;Ht++){const Me=Ct[Ht];ci(Me,Z,gt)}else ci(Ct,Z,gt)}),w.pop(),y=null};let Ae=null;function tn(Z){Ae&&Ae(Z)}function En(){nr.stop()}function Ln(){nr.start()}const nr=new Sk;nr.setAnimationLoop(tn),typeof window<"u"&&nr.setContext(window),this.setAnimationLoop=function(Z){Ae=Z,ue.setAnimationLoop(Z),Z===null?nr.stop():nr.start()},ue.addEventListener("sessionstart",En),ue.addEventListener("sessionend",Ln),this.render=function(Z,ht){if(ht!==void 0&&ht.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;Z.autoUpdate===!0&&Z.updateMatrixWorld(),ht.parent===null&&ht.updateMatrixWorld(),ue.enabled===!0&&ue.isPresenting===!0&&(ue.cameraAutoUpdate===!0&&ue.updateCamera(ht),ht=ue.getCamera()),Z.isScene===!0&&Z.onBeforeRender(S,Z,ht,R),y=Kt.get(Z,w.length),y.init(),w.push(y),lt.multiplyMatrices(ht.projectionMatrix,ht.matrixWorldInverse),J.setFromProjectionMatrix(lt),F=this.localClippingEnabled,pt=re.init(this.clippingPlanes,F,ht),m=$t.get(Z,v.length),m.init(),v.push(m),gs(Z,ht,0,S.sortObjects),m.finish(),S.sortObjects===!0&&m.sort(tt,K),pt===!0&&re.beginShadows();const gt=y.state.shadowsArray;if(Jt.render(gt,Z,ht),pt===!0&&re.endShadows(),this.info.autoReset===!0&&this.info.reset(),se.render(m,Z),y.setupLights(S.physicallyCorrectLights),ht.isArrayCamera){const Ct=ht.cameras;for(let Ht=0,Me=Ct.length;Ht<Me;Ht++){const fe=Ct[Ht];ni(m,Z,fe,fe.viewport)}}else ni(m,Z,ht);R!==null&&(Rt.updateMultisampleRenderTarget(R),Rt.updateRenderTargetMipmap(R)),Z.isScene===!0&&Z.onAfterRender(S,Z,ht),Ft.buffers.depth.setTest(!0),Ft.buffers.depth.setMask(!0),Ft.buffers.color.setMask(!0),Ft.setPolygonOffset(!1),zt.resetDefaultState(),O=-1,k=null,w.pop(),w.length>0?y=w[w.length-1]:y=null,v.pop(),v.length>0?m=v[v.length-1]:m=null};function gs(Z,ht,gt,Ct){if(Z.visible===!1)return;if(Z.layers.test(ht.layers)){if(Z.isGroup)gt=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(ht);else if(Z.isLight)y.pushLight(Z),Z.castShadow&&y.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||J.intersectsSprite(Z)){Ct&&z.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(lt);const fe=$.update(Z),le=Z.material;le.visible&&m.push(Z,fe,le,gt,z.z,null)}}else if(Z.isImmediateRenderObject)Ct&&z.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(lt),m.push(Z,null,Z.material,gt,z.z,null);else if((Z.isMesh||Z.isLine||Z.isPoints)&&(Z.isSkinnedMesh&&Z.skeleton.frame!==jt.render.frame&&(Z.skeleton.update(),Z.skeleton.frame=jt.render.frame),!Z.frustumCulled||J.intersectsObject(Z))){Ct&&z.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(lt);const fe=$.update(Z),le=Z.material;if(Array.isArray(le)){const we=fe.groups;for(let ze=0,Re=we.length;ze<Re;ze++){const De=we[ze],ye=le[De.materialIndex];ye&&ye.visible&&m.push(Z,fe,ye,gt,z.z,De)}}else le.visible&&m.push(Z,fe,le,gt,z.z,null)}}const Me=Z.children;for(let fe=0,le=Me.length;fe<le;fe++)gs(Me[fe],ht,gt,Ct)}function ni(Z,ht,gt,Ct){const Ht=Z.opaque,Me=Z.transmissive,fe=Z.transparent;y.setupLightsView(gt),Me.length>0&&ui(Ht,ht,gt),Ct&&Ft.viewport(N.copy(Ct)),Ht.length>0&&Pi(Ht,ht,gt),Me.length>0&&Pi(Me,ht,gt),fe.length>0&&Pi(fe,ht,gt)}function ui(Z,ht,gt){if(G===null){const fe=o===!0&&kt.isWebGL2===!0?yk:js;G=new fe(1024,1024,{generateMipmaps:!0,type:St.convert(uc)!==null?uc:bc,minFilter:Fg,magFilter:Qn,wrapS:vr,wrapT:vr})}const Ct=S.getRenderTarget();S.setRenderTarget(G),S.clear();const Ht=S.toneMapping;S.toneMapping=Pl,Pi(Z,ht,gt),S.toneMapping=Ht,Rt.updateMultisampleRenderTarget(G),Rt.updateRenderTargetMipmap(G),S.setRenderTarget(Ct)}function Pi(Z,ht,gt){const Ct=ht.isScene===!0?ht.overrideMaterial:null;for(let Ht=0,Me=Z.length;Ht<Me;Ht++){const fe=Z[Ht],le=fe.object,we=fe.geometry,ze=Ct===null?fe.material:Ct,Re=fe.group;le.layers.test(gt.layers)&&ir(le,ht,gt,we,ze,Re)}}function ir(Z,ht,gt,Ct,Ht,Me){if(Z.onBeforeRender(S,ht,gt,Ct,Ht,Me),Z.modelViewMatrix.multiplyMatrices(gt.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),Z.isImmediateRenderObject){const fe=To(gt,ht,Ht,Z);Ft.setMaterial(Ht),zt.reset(),ee(Z,fe)}else Ht.transparent===!0&&Ht.side===kl?(Ht.side=jn,Ht.needsUpdate=!0,S.renderBufferDirect(gt,ht,Ct,Ht,Z,Me),Ht.side=qf,Ht.needsUpdate=!0,S.renderBufferDirect(gt,ht,Ct,Ht,Z,Me),Ht.side=kl):S.renderBufferDirect(gt,ht,Ct,Ht,Z,Me);Z.onAfterRender(S,ht,gt,Ct,Ht,Me)}function ci(Z,ht,gt){ht.isScene!==!0&&(ht=mt);const Ct=bt.get(Z),Ht=y.state.lights,Me=y.state.shadowsArray,fe=Ht.state.version,le=wt.getParameters(Z,Ht.state,Me,ht,gt),we=wt.getProgramCacheKey(le);let ze=Ct.programs;Ct.environment=Z.isMeshStandardMaterial?ht.environment:null,Ct.fog=ht.fog,Ct.envMap=(Z.isMeshStandardMaterial?Wt:Dt).get(Z.envMap||Ct.environment),ze===void 0&&(Z.addEventListener("dispose",xn),ze=new Map,Ct.programs=ze);let Re=ze.get(we);if(Re!==void 0){if(Ct.currentProgram===Re&&Ct.lightsStateVersion===fe)return Ci(Z,le),Re}else le.uniforms=wt.getUniforms(Z),Z.onBuild(le,S),Z.onBeforeCompile(le,S),Re=wt.acquireProgram(le,we),ze.set(we,Re),Ct.uniforms=le.uniforms;const De=Ct.uniforms;(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(De.clippingPlanes=re.uniform),Ci(Z,le),Ct.needsLights=Gc(Z),Ct.lightsStateVersion=fe,Ct.needsLights&&(De.ambientLightColor.value=Ht.state.ambient,De.lightProbe.value=Ht.state.probe,De.directionalLights.value=Ht.state.directional,De.directionalLightShadows.value=Ht.state.directionalShadow,De.spotLights.value=Ht.state.spot,De.spotLightShadows.value=Ht.state.spotShadow,De.rectAreaLights.value=Ht.state.rectArea,De.ltc_1.value=Ht.state.rectAreaLTC1,De.ltc_2.value=Ht.state.rectAreaLTC2,De.pointLights.value=Ht.state.point,De.pointLightShadows.value=Ht.state.pointShadow,De.hemisphereLights.value=Ht.state.hemi,De.directionalShadowMap.value=Ht.state.directionalShadowMap,De.directionalShadowMatrix.value=Ht.state.directionalShadowMatrix,De.spotShadowMap.value=Ht.state.spotShadowMap,De.spotShadowMatrix.value=Ht.state.spotShadowMatrix,De.pointShadowMap.value=Ht.state.pointShadowMap,De.pointShadowMatrix.value=Ht.state.pointShadowMatrix);const ye=Re.getUniforms(),wr=ba.seqWithValue(ye.seq,De);return Ct.currentProgram=Re,Ct.uniformsList=wr,Re}function Ci(Z,ht){const gt=bt.get(Z);gt.outputEncoding=ht.outputEncoding,gt.instancing=ht.instancing,gt.skinning=ht.skinning,gt.morphTargets=ht.morphTargets,gt.morphNormals=ht.morphNormals,gt.numClippingPlanes=ht.numClippingPlanes,gt.numIntersection=ht.numClipIntersection,gt.vertexAlphas=ht.vertexAlphas,gt.vertexTangents=ht.vertexTangents}function To(Z,ht,gt,Ct){ht.isScene!==!0&&(ht=mt),Rt.resetTextureUnits();const Ht=ht.fog,Me=gt.isMeshStandardMaterial?ht.environment:null,fe=R===null?S.outputEncoding:R.texture.encoding,le=(gt.isMeshStandardMaterial?Wt:Dt).get(gt.envMap||Me),we=gt.vertexColors===!0&&!!Ct.geometry&&!!Ct.geometry.attributes.color&&Ct.geometry.attributes.color.itemSize===4,ze=!!Ct.geometry&&!!Ct.geometry.attributes.tangent,Re=!!Ct.geometry&&!!Ct.geometry.morphAttributes.position,De=!!Ct.geometry&&!!Ct.geometry.morphAttributes.normal,ye=bt.get(gt),wr=y.state.lights;if(pt===!0&&(F===!0||Z!==k)){const mn=Z===k&&gt.id===O;re.setState(gt,Z,mn)}let rn=!1;gt.version===ye.__version?(ye.needsLights&&ye.lightsStateVersion!==wr.state.version||ye.outputEncoding!==fe||Ct.isInstancedMesh&&ye.instancing===!1||!Ct.isInstancedMesh&&ye.instancing===!0||Ct.isSkinnedMesh&&ye.skinning===!1||!Ct.isSkinnedMesh&&ye.skinning===!0||ye.envMap!==le||gt.fog&&ye.fog!==Ht||ye.numClippingPlanes!==void 0&&(ye.numClippingPlanes!==re.numPlanes||ye.numIntersection!==re.numIntersection)||ye.vertexAlphas!==we||ye.vertexTangents!==ze||ye.morphTargets!==Re||ye.morphNormals!==De)&&(rn=!0):(rn=!0,ye.__version=gt.version);let br=ye.currentProgram;rn===!0&&(br=ci(gt,ht,Ct));let $n=!1,je=!1,Sr=!1;const pn=br.getUniforms(),Ai=ye.uniforms;if(Ft.useProgram(br.program)&&($n=!0,je=!0,Sr=!0),gt.id!==O&&(O=gt.id,je=!0),$n||k!==Z){if(pn.setValue(nt,"projectionMatrix",Z.projectionMatrix),kt.logarithmicDepthBuffer&&pn.setValue(nt,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),k!==Z&&(k=Z,je=!0,Sr=!0),gt.isShaderMaterial||gt.isMeshPhongMaterial||gt.isMeshToonMaterial||gt.isMeshStandardMaterial||gt.envMap){const mn=pn.map.cameraPosition;mn!==void 0&&mn.setValue(nt,z.setFromMatrixPosition(Z.matrixWorld))}(gt.isMeshPhongMaterial||gt.isMeshToonMaterial||gt.isMeshLambertMaterial||gt.isMeshBasicMaterial||gt.isMeshStandardMaterial||gt.isShaderMaterial)&&pn.setValue(nt,"isOrthographic",Z.isOrthographicCamera===!0),(gt.isMeshPhongMaterial||gt.isMeshToonMaterial||gt.isMeshLambertMaterial||gt.isMeshBasicMaterial||gt.isMeshStandardMaterial||gt.isShaderMaterial||gt.isShadowMaterial||Ct.isSkinnedMesh)&&pn.setValue(nt,"viewMatrix",Z.matrixWorldInverse)}if(Ct.isSkinnedMesh){pn.setOptional(nt,Ct,"bindMatrix"),pn.setOptional(nt,Ct,"bindMatrixInverse");const mn=Ct.skeleton;mn&&(kt.floatVertexTextures?(mn.boneTexture===null&&mn.computeBoneTexture(),pn.setValue(nt,"boneTexture",mn.boneTexture,Rt),pn.setValue(nt,"boneTextureSize",mn.boneTextureSize)):pn.setOptional(nt,mn,"boneMatrices"))}return(je||ye.receiveShadow!==Ct.receiveShadow)&&(ye.receiveShadow=Ct.receiveShadow,pn.setValue(nt,"receiveShadow",Ct.receiveShadow)),je&&(pn.setValue(nt,"toneMappingExposure",S.toneMappingExposure),ye.needsLights&&Zs(Ai,Sr),Ht&&gt.fog&&Lt.refreshFogUniforms(Ai,Ht),Lt.refreshMaterialUniforms(Ai,gt,U,W,G),ba.upload(nt,ye.uniformsList,Ai,Rt)),gt.isShaderMaterial&&gt.uniformsNeedUpdate===!0&&(ba.upload(nt,ye.uniformsList,Ai,Rt),gt.uniformsNeedUpdate=!1),gt.isSpriteMaterial&&pn.setValue(nt,"center",Ct.center),pn.setValue(nt,"modelViewMatrix",Ct.modelViewMatrix),pn.setValue(nt,"normalMatrix",Ct.normalMatrix),pn.setValue(nt,"modelMatrix",Ct.matrixWorld),br}function Zs(Z,ht){Z.ambientLightColor.needsUpdate=ht,Z.lightProbe.needsUpdate=ht,Z.directionalLights.needsUpdate=ht,Z.directionalLightShadows.needsUpdate=ht,Z.pointLights.needsUpdate=ht,Z.pointLightShadows.needsUpdate=ht,Z.spotLights.needsUpdate=ht,Z.spotLightShadows.needsUpdate=ht,Z.rectAreaLights.needsUpdate=ht,Z.hemisphereLights.needsUpdate=ht}function Gc(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return R},this.setRenderTarget=function(Z,ht=0,gt=0){R=Z,b=ht,M=gt,Z&&bt.get(Z).__webglFramebuffer===void 0&&Rt.setupRenderTarget(Z);let Ct=null,Ht=!1,Me=!1;if(Z){const le=Z.texture;(le.isDataTexture3D||le.isDataTexture2DArray)&&(Me=!0);const we=bt.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Ct=we[ht],Ht=!0):Z.isWebGLMultisampleRenderTarget?Ct=bt.get(Z).__webglMultisampledFramebuffer:Ct=we,N.copy(Z.viewport),D.copy(Z.scissor),I=Z.scissorTest}else N.copy(Y).multiplyScalar(U).floor(),D.copy(rt).multiplyScalar(U).floor(),I=at;if(Ft.bindFramebuffer(36160,Ct)&&kt.drawBuffers){let le=!1;if(Z)if(Z.isWebGLMultipleRenderTargets){const we=Z.texture;if(it.length!==we.length||it[0]!==36064){for(let ze=0,Re=we.length;ze<Re;ze++)it[ze]=36064+ze;it.length=we.length,le=!0}}else(it.length!==1||it[0]!==36064)&&(it[0]=36064,it.length=1,le=!0);else(it.length!==1||it[0]!==1029)&&(it[0]=1029,it.length=1,le=!0);le&&(kt.isWebGL2?nt.drawBuffers(it):At.get("WEBGL_draw_buffers").drawBuffersWEBGL(it))}if(Ft.viewport(N),Ft.scissor(D),Ft.setScissorTest(I),Ht){const le=bt.get(Z.texture);nt.framebufferTexture2D(36160,36064,34069+ht,le.__webglTexture,gt)}else if(Me){const le=bt.get(Z.texture),we=ht||0;nt.framebufferTextureLayer(36160,36064,le.__webglTexture,gt||0,we)}O=-1},this.readRenderTargetPixels=function(Z,ht,gt,Ct,Ht,Me,fe){if(!(Z&&Z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let le=bt.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&fe!==void 0&&(le=le[fe]),le){Ft.bindFramebuffer(36160,le);try{const we=Z.texture,ze=we.format,Re=we.type;if(ze!==xr&&St.convert(ze)!==nt.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const De=Re===uc&&(At.has("EXT_color_buffer_half_float")||kt.isWebGL2&&At.has("EXT_color_buffer_float"));if(Re!==bc&&St.convert(Re)!==nt.getParameter(35738)&&!(Re===pl&&(kt.isWebGL2||At.has("OES_texture_float")||At.has("WEBGL_color_buffer_float")))&&!De){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}nt.checkFramebufferStatus(36160)===36053?ht>=0&&ht<=Z.width-Ct&&gt>=0&&gt<=Z.height-Ht&&nt.readPixels(ht,gt,Ct,Ht,St.convert(ze),St.convert(Re),Me):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const we=R!==null?bt.get(R).__webglFramebuffer:null;Ft.bindFramebuffer(36160,we)}}},this.copyFramebufferToTexture=function(Z,ht,gt=0){const Ct=Math.pow(2,-gt),Ht=Math.floor(ht.image.width*Ct),Me=Math.floor(ht.image.height*Ct);let fe=St.convert(ht.format);kt.isWebGL2&&(fe===6407&&(fe=32849),fe===6408&&(fe=32856)),Rt.setTexture2D(ht,0),nt.copyTexImage2D(3553,gt,fe,Z.x,Z.y,Ht,Me,0),Ft.unbindTexture()},this.copyTextureToTexture=function(Z,ht,gt,Ct=0){const Ht=ht.image.width,Me=ht.image.height,fe=St.convert(gt.format),le=St.convert(gt.type);Rt.setTexture2D(gt,0),nt.pixelStorei(37440,gt.flipY),nt.pixelStorei(37441,gt.premultiplyAlpha),nt.pixelStorei(3317,gt.unpackAlignment),ht.isDataTexture?nt.texSubImage2D(3553,Ct,Z.x,Z.y,Ht,Me,fe,le,ht.image.data):ht.isCompressedTexture?nt.compressedTexSubImage2D(3553,Ct,Z.x,Z.y,ht.mipmaps[0].width,ht.mipmaps[0].height,fe,ht.mipmaps[0].data):nt.texSubImage2D(3553,Ct,Z.x,Z.y,fe,le,ht.image),Ct===0&&gt.generateMipmaps&&nt.generateMipmap(3553),Ft.unbindTexture()},this.copyTextureToTexture3D=function(Z,ht,gt,Ct,Ht=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Me=Z.max.x-Z.min.x+1,fe=Z.max.y-Z.min.y+1,le=Z.max.z-Z.min.z+1,we=St.convert(Ct.format),ze=St.convert(Ct.type);let Re;if(Ct.isDataTexture3D)Rt.setTexture3D(Ct,0),Re=32879;else if(Ct.isDataTexture2DArray)Rt.setTexture2DArray(Ct,0),Re=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}nt.pixelStorei(37440,Ct.flipY),nt.pixelStorei(37441,Ct.premultiplyAlpha),nt.pixelStorei(3317,Ct.unpackAlignment);const De=nt.getParameter(3314),ye=nt.getParameter(32878),wr=nt.getParameter(3316),rn=nt.getParameter(3315),br=nt.getParameter(32877),$n=gt.isCompressedTexture?gt.mipmaps[0]:gt.image;nt.pixelStorei(3314,$n.width),nt.pixelStorei(32878,$n.height),nt.pixelStorei(3316,Z.min.x),nt.pixelStorei(3315,Z.min.y),nt.pixelStorei(32877,Z.min.z),gt.isDataTexture||gt.isDataTexture3D?nt.texSubImage3D(Re,Ht,ht.x,ht.y,ht.z,Me,fe,le,we,ze,$n.data):gt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),nt.compressedTexSubImage3D(Re,Ht,ht.x,ht.y,ht.z,Me,fe,le,we,$n.data)):nt.texSubImage3D(Re,Ht,ht.x,ht.y,ht.z,Me,fe,le,we,ze,$n),nt.pixelStorei(3314,De),nt.pixelStorei(32878,ye),nt.pixelStorei(3316,wr),nt.pixelStorei(3315,rn),nt.pixelStorei(32877,br),Ht===0&&Ct.generateMipmaps&&nt.generateMipmap(Re),Ft.unbindTexture()},this.initTexture=function(Z){Rt.setTexture2D(Z,0),Ft.unbindTexture()},this.resetState=function(){b=0,M=0,R=null,Ft.reset(),zt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class P9 extends Qe{}P9.prototype.isWebGL1Renderer=!0;class Sw extends Ze{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),e}}Sw.prototype.isScene=!0;class gd{constructor(t,e){this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Yf,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ps()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ps()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ps()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}gd.prototype.isInterleavedBuffer=!0;const Rn=new st;class Jf{constructor(t,e,i,r=!1){this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)Rn.x=this.getX(e),Rn.y=this.getY(e),Rn.z=this.getZ(e),Rn.applyMatrix4(t),this.setXYZ(e,Rn.x,Rn.y,Rn.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Rn.x=this.getX(e),Rn.y=this.getY(e),Rn.z=this.getZ(e),Rn.applyNormalMatrix(t),this.setXYZ(e,Rn.x,Rn.y,Rn.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Rn.x=this.getX(e),Rn.y=this.getY(e),Rn.z=this.getZ(e),Rn.transformDirection(t),this.setXYZ(e,Rn.x,Rn.y,Rn.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new Gn(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Jf(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Jf.prototype.isInterleavedBufferAttribute=!0;class Bk extends Ti{constructor(t){super(),this.type="SpriteMaterial",this.color=new he(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}Bk.prototype.isSpriteMaterial=!0;let Wu;const Gh=new st,Gu=new st,$u=new st,Zu=new Zt,$h=new Zt,Vk=new ve,mm=new st,Zh=new st,gm=new st,SE=new Zt,P_=new Zt,ME=new Zt;class C9 extends Ze{constructor(t){if(super(),this.type="Sprite",Wu===void 0){Wu=new nn;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new gd(e,5);Wu.setIndex([0,1,2,0,2,3]),Wu.setAttribute("position",new Jf(i,3,0,!1)),Wu.setAttribute("uv",new Jf(i,2,3,!1))}this.geometry=Wu,this.material=t!==void 0?t:new Bk,this.center=new Zt(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gu.setFromMatrixScale(this.matrixWorld),Vk.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),$u.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Gu.multiplyScalar(-$u.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;ym(mm.set(-.5,-.5,0),$u,o,Gu,r,s),ym(Zh.set(.5,-.5,0),$u,o,Gu,r,s),ym(gm.set(.5,.5,0),$u,o,Gu,r,s),SE.set(0,0),P_.set(1,0),ME.set(1,1);let a=t.ray.intersectTriangle(mm,Zh,gm,!1,Gh);if(a===null&&(ym(Zh.set(-.5,.5,0),$u,o,Gu,r,s),P_.set(0,1),a=t.ray.intersectTriangle(mm,gm,Zh,!1,Gh),a===null))return;const c=t.ray.origin.distanceTo(Gh);c<t.near||c>t.far||e.push({distance:c,point:Gh.clone(),uv:Wn.getUV(Gh,mm,Zh,gm,SE,P_,ME,new Zt),face:null,object:this})}copy(t){return super.copy(t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}C9.prototype.isSprite=!0;function ym(n,t,e,i,r,s){Zu.subVectors(n,e).addScalar(.5).multiply(i),r!==void 0?($h.x=s*Zu.x-r*Zu.y,$h.y=r*Zu.x+s*Zu.y):$h.copy(Zu),n.copy(t),n.x+=$h.x,n.y+=$h.y,n.applyMatrix4(Vk)}const TE=new st,EE=new en,PE=new en,A9=new st,CE=new ve;class Uk extends Fi{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ve,this.bindMatrixInverse=new ve}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new en,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const i=this.skeleton,r=this.geometry;EE.fromBufferAttribute(r.attributes.skinIndex,t),PE.fromBufferAttribute(r.attributes.skinWeight,t),TE.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const o=PE.getComponent(s);if(o!==0){const a=EE.getComponent(s);CE.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(A9.copy(TE).applyMatrix4(CE),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}Uk.prototype.isSkinnedMesh=!0;class L9 extends Ze{constructor(){super(),this.type="Bone"}}L9.prototype.isBone=!0;class k9 extends li{constructor(t=null,e=1,i=1,r,s,o,a,c,f=Qn,d=Qn,m,y){super(null,o,a,c,f,d,r,s,m,y),this.image={data:t,width:e,height:i},this.magFilter=f,this.minFilter=d,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}k9.prototype.isDataTexture=!0;class jx extends Gn{constructor(t,e,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,i),this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}jx.prototype.isInstancedBufferAttribute=!0;const AE=new ve,LE=new ve,vm=[],qh=new Fi;class R9 extends Fi{constructor(t,e,i){super(t,e),this.instanceMatrix=new jx(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}raycast(t,e){const i=this.matrixWorld,r=this.count;if(qh.geometry=this.geometry,qh.material=this.material,qh.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,AE),LE.multiplyMatrices(i,AE),qh.matrixWorld=LE,qh.raycast(t,vm);for(let o=0,a=vm.length;o<a;o++){const c=vm[o];c.instanceId=s,c.object=this,e.push(c)}vm.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new jx(new Float32Array(this.instanceMatrix.count*3),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}R9.prototype.isInstancedMesh=!0;class Vc extends Ti{constructor(t){super(),this.type="LineBasicMaterial",this.color=new he(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}Vc.prototype.isLineBasicMaterial=!0;const kE=new st,RE=new st,IE=new ve,C_=new Fl,_m=new Fc;class Mw extends Ze{constructor(t=new nn,e=new Vc){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,i=[0];for(let r=1,s=e.count;r<s;r++)kE.fromBufferAttribute(e,r-1),RE.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=kE.distanceTo(RE);t.setAttribute("lineDistance",new ei(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const i=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),_m.copy(i.boundingSphere),_m.applyMatrix4(r),_m.radius+=s,t.ray.intersectsSphere(_m)===!1)return;IE.copy(r).invert(),C_.copy(t.ray).applyMatrix4(IE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,f=new st,d=new st,m=new st,y=new st,v=this.isLineSegments?2:1;if(i.isBufferGeometry){const w=i.index,P=i.attributes.position;if(w!==null){const b=Math.max(0,o.start),M=Math.min(w.count,o.start+o.count);for(let R=b,O=M-1;R<O;R+=v){const k=w.getX(R),N=w.getX(R+1);if(f.fromBufferAttribute(P,k),d.fromBufferAttribute(P,N),C_.distanceSqToSegment(f,d,y,m)>c)continue;y.applyMatrix4(this.matrixWorld);const I=t.ray.origin.distanceTo(y);I<t.near||I>t.far||e.push({distance:I,point:m.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}else{const b=Math.max(0,o.start),M=Math.min(P.count,o.start+o.count);for(let R=b,O=M-1;R<O;R+=v){if(f.fromBufferAttribute(P,R),d.fromBufferAttribute(P,R+1),C_.distanceSqToSegment(f,d,y,m)>c)continue;y.applyMatrix4(this.matrixWorld);const N=t.ray.origin.distanceTo(y);N<t.near||N>t.far||e.push({distance:N,point:m.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Mw.prototype.isLine=!0;const DE=new st,OE=new st;class Tw extends Mw{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,i=[];for(let r=0,s=e.count;r<s;r+=2)DE.fromBufferAttribute(e,r),OE.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+DE.distanceTo(OE);t.setAttribute("lineDistance",new ei(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Tw.prototype.isLineSegments=!0;class Wx extends Mw{constructor(t,e){super(t,e),this.type="LineLoop"}}Wx.prototype.isLineLoop=!0;class Hk extends Ti{constructor(t){super(),this.type="PointsMaterial",this.color=new he(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}Hk.prototype.isPointsMaterial=!0;const NE=new ve,Gx=new Fl,xm=new Fc,wm=new st;class I9 extends Ze{constructor(t=new nn,e=new Hk){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),xm.copy(i.boundingSphere),xm.applyMatrix4(r),xm.radius+=s,t.ray.intersectsSphere(xm)===!1)return;NE.copy(r).invert(),Gx.copy(t.ray).applyMatrix4(NE);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a;if(i.isBufferGeometry){const f=i.index,m=i.attributes.position;if(f!==null){const y=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let w=y,S=v;w<S;w++){const P=f.getX(w);wm.fromBufferAttribute(m,P),FE(wm,P,c,r,t,e,this)}}else{const y=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let w=y,S=v;w<S;w++)wm.fromBufferAttribute(m,w),FE(wm,w,c,r,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}I9.prototype.isPoints=!0;function FE(n,t,e,i,r,s,o){const a=Gx.distanceSqToPoint(n);if(a<e){const c=new st;Gx.closestPointToPoint(n,c),c.applyMatrix4(i);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(a),point:c,index:t,face:null,object:o})}}class D9 extends li{constructor(t,e,i,r,s,o,a,c,f){super(t,e,i,r,s,o,a,c,f),this.format=a!==void 0?a:xa,this.minFilter=o!==void 0?o:jr,this.magFilter=s!==void 0?s:jr,this.generateMipmaps=!1;const d=this;function m(){d.needsUpdate=!0,t.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}D9.prototype.isVideoTexture=!0;class O9 extends li{constructor(t,e,i,r,s,o,a,c,f,d,m,y){super(null,o,a,c,f,d,r,s,m,y),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}O9.prototype.isCompressedTexture=!0;class N9 extends li{constructor(t,e,i,r,s,o,a,c,f){super(t,e,i,r,s,o,a,c,f),this.needsUpdate=!0}}N9.prototype.isCanvasTexture=!0;class F9 extends li{constructor(t,e,i,r,s,o,a,c,f,d){if(d=d!==void 0?d:cc,d!==cc&&d!==Xf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===cc&&(i=sg),i===void 0&&d===Xf&&(i=Ef),super(null,r,s,o,a,c,d,i,f),this.image={width:t,height:e},this.magFilter=a!==void 0?a:Qn,this.minFilter=c!==void 0?c:Qn,this.flipY=!1,this.generateMipmaps=!1}}F9.prototype.isDepthTexture=!0;class Zr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)i=this.getPoint(o/t),s+=i.distanceTo(r),e.push(s),r=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let r=0;const s=i.length;let o;e?o=e:o=t*i[s-1];let a=0,c=s-1,f;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),f=i[r]-o,f<0)a=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,i[r]===o)return r/(s-1);const d=i[r],y=i[r+1]-d,v=(o-d)/y;return(r+v)/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),c=e||(o.isVector2?new Zt:new st);return c.copy(a).sub(o).normalize(),c}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new st,r=[],s=[],o=[],a=new st,c=new ve;for(let v=0;v<=t;v++){const w=v/t;r[v]=this.getTangentAt(w,new st),r[v].normalize()}s[0]=new st,o[0]=new st;let f=Number.MAX_VALUE;const d=Math.abs(r[0].x),m=Math.abs(r[0].y),y=Math.abs(r[0].z);d<=f&&(f=d,i.set(1,0,0)),m<=f&&(f=m,i.set(0,1,0)),y<=f&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=t;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(r[v-1],r[v]),a.length()>Number.EPSILON){a.normalize();const w=Math.acos(Oi(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(c.makeRotationAxis(a,w))}o[v].crossVectors(r[v],s[v])}if(e===!0){let v=Math.acos(Oi(s[0].dot(s[t]),-1,1));v/=t,r[0].dot(a.crossVectors(s[0],s[t]))>0&&(v=-v);for(let w=1;w<=t;w++)s[w].applyMatrix4(c.makeRotationAxis(r[w],v*w)),o[w].crossVectors(r[w],s[w])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Hg extends Zr{constructor(t=0,e=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(t,e){const i=e||new Zt,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+t*s;let c=this.aX+this.xRadius*Math.cos(a),f=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),m=Math.sin(this.aRotation),y=c-this.aX,v=f-this.aY;c=y*d-v*m+this.aX,f=y*m+v*d+this.aY}return i.set(c,f)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Hg.prototype.isEllipseCurve=!0;class jk extends Hg{constructor(t,e,i,r,s,o){super(t,e,i,i,r,s,o),this.type="ArcCurve"}}jk.prototype.isArcCurve=!0;function Ew(){let n=0,t=0,e=0,i=0;function r(s,o,a,c){n=s,t=a,e=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,f){r(o,a,f*(a-s),f*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,f,d,m){let y=(o-s)/f-(a-s)/(f+d)+(a-o)/d,v=(a-o)/d-(c-o)/(d+m)+(c-a)/m;y*=d,v*=d,r(o,a,y,v)},calc:function(s){const o=s*s,a=o*s;return n+t*s+e*o+i*a}}}const bm=new st,A_=new Ew,L_=new Ew,k_=new Ew;class Wk extends Zr{constructor(t=[],e=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=r}getPoint(t,e=new st){const i=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let f,d;this.closed||a>0?f=r[(a-1)%s]:(bm.subVectors(r[0],r[1]).add(r[0]),f=bm);const m=r[a%s],y=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(bm.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=bm),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let w=Math.pow(f.distanceToSquared(m),v),S=Math.pow(m.distanceToSquared(y),v),P=Math.pow(y.distanceToSquared(d),v);S<1e-4&&(S=1),w<1e-4&&(w=S),P<1e-4&&(P=S),A_.initNonuniformCatmullRom(f.x,m.x,y.x,d.x,w,S,P),L_.initNonuniformCatmullRom(f.y,m.y,y.y,d.y,w,S,P),k_.initNonuniformCatmullRom(f.z,m.z,y.z,d.z,w,S,P)}else this.curveType==="catmullrom"&&(A_.initCatmullRom(f.x,m.x,y.x,d.x,this.tension),L_.initCatmullRom(f.y,m.y,y.y,d.y,this.tension),k_.initCatmullRom(f.z,m.z,y.z,d.z,this.tension));return i.set(A_.calc(c),L_.calc(c),k_.calc(c)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(new st().fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}Wk.prototype.isCatmullRomCurve3=!0;function zE(n,t,e,i,r){const s=(i-t)*.5,o=(r-e)*.5,a=n*n,c=n*a;return(2*e-2*i+s+o)*c+(-3*e+3*i-2*s-o)*a+s*n+e}function z9(n,t){const e=1-n;return e*e*t}function B9(n,t){return 2*(1-n)*n*t}function V9(n,t){return n*n*t}function Af(n,t,e,i){return z9(n,t)+B9(n,e)+V9(n,i)}function U9(n,t){const e=1-n;return e*e*e*t}function H9(n,t){const e=1-n;return 3*e*e*n*t}function j9(n,t){return 3*(1-n)*n*n*t}function W9(n,t){return n*n*n*t}function Lf(n,t,e,i,r){return U9(n,t)+H9(n,e)+j9(n,i)+W9(n,r)}class Pw extends Zr{constructor(t=new Zt,e=new Zt,i=new Zt,r=new Zt){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=r}getPoint(t,e=new Zt){const i=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Lf(t,r.x,s.x,o.x,a.x),Lf(t,r.y,s.y,o.y,a.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Pw.prototype.isCubicBezierCurve=!0;class Gk extends Zr{constructor(t=new st,e=new st,i=new st,r=new st){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=r}getPoint(t,e=new st){const i=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Lf(t,r.x,s.x,o.x,a.x),Lf(t,r.y,s.y,o.y,a.y),Lf(t,r.z,s.z,o.z,a.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Gk.prototype.isCubicBezierCurve3=!0;class jg extends Zr{constructor(t=new Zt,e=new Zt){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Zt){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const i=e||new Zt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}jg.prototype.isLineCurve=!0;class G9 extends Zr{constructor(t=new st,e=new st){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new st){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Cw extends Zr{constructor(t=new Zt,e=new Zt,i=new Zt){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new Zt){const i=e,r=this.v0,s=this.v1,o=this.v2;return i.set(Af(t,r.x,s.x,o.x),Af(t,r.y,s.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Cw.prototype.isQuadraticBezierCurve=!0;class $k extends Zr{constructor(t=new st,e=new st,i=new st){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new st){const i=e,r=this.v0,s=this.v1,o=this.v2;return i.set(Af(t,r.x,s.x,o.x),Af(t,r.y,s.y,o.y),Af(t,r.z,s.z,o.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}$k.prototype.isQuadraticBezierCurve3=!0;class Aw extends Zr{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new Zt){const i=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),a=s-o,c=r[o===0?o:o-1],f=r[o],d=r[o>r.length-2?r.length-1:o+1],m=r[o>r.length-3?r.length-1:o+2];return i.set(zE(a,c.x,f.x,d.x,m.x),zE(a,c.y,f.y,d.y,m.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(r.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const r=this.points[e];t.points.push(r.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const r=t.points[e];this.points.push(new Zt().fromArray(r))}return this}}Aw.prototype.isSplineCurve=!0;var Zk=Object.freeze({__proto__:null,ArcCurve:jk,CatmullRomCurve3:Wk,CubicBezierCurve:Pw,CubicBezierCurve3:Gk,EllipseCurve:Hg,LineCurve:jg,LineCurve3:G9,QuadraticBezierCurve:Cw,QuadraticBezierCurve3:$k,SplineCurve:Aw});const $9={triangulate:function(n,t,e=2){const i=t&&t.length,r=i?t[0]*e:n.length;let s=qk(n,0,r,e,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,f,d,m,y,v;if(i&&(s=K9(n,t,s,e)),n.length>80*e){a=f=n[0],c=d=n[1];for(let w=e;w<r;w+=e)m=n[w],y=n[w+1],m<a&&(a=m),y<c&&(c=y),m>f&&(f=m),y>d&&(d=y);v=Math.max(f-a,d-c),v=v!==0?1/v:0}return Qf(s,o,e,a,c,v),o}};function qk(n,t,e,i,r){let s,o;if(r===l7(n,t,e,i)>0)for(s=t;s<e;s+=i)o=BE(s,n[s],n[s+1],o);else for(s=e-i;s>=t;s-=i)o=BE(s,n[s],n[s+1],o);return o&&Wg(o,o.next)&&(ed(o),o=o.next),o}function Pa(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&&(Wg(e,e.next)||Tn(e.prev,e,e.next)===0)){if(ed(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function Qf(n,t,e,i,r,s,o){if(!n)return;!o&&s&&n7(n,i,r,s);let a=n,c,f;for(;n.prev!==n.next;){if(c=n.prev,f=n.next,s?q9(n,i,r,s):Z9(n)){t.push(c.i/e),t.push(n.i/e),t.push(f.i/e),ed(n),n=f.next,a=f.next;continue}if(n=f,n===a){o?o===1?(n=X9(Pa(n),t,e),Qf(n,t,e,i,r,s,2)):o===2&&Y9(n,t,e,i,r,s):Qf(Pa(n),t,e,i,r,s,1);break}}}function Z9(n){const t=n.prev,e=n,i=n.next;if(Tn(t,e,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(sc(t.x,t.y,e.x,e.y,i.x,i.y,r.x,r.y)&&Tn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function q9(n,t,e,i){const r=n.prev,s=n,o=n.next;if(Tn(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,c=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,f=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,d=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,m=$x(a,c,t,e,i),y=$x(f,d,t,e,i);let v=n.prevZ,w=n.nextZ;for(;v&&v.z>=m&&w&&w.z<=y;){if(v!==n.prev&&v!==n.next&&sc(r.x,r.y,s.x,s.y,o.x,o.y,v.x,v.y)&&Tn(v.prev,v,v.next)>=0||(v=v.prevZ,w!==n.prev&&w!==n.next&&sc(r.x,r.y,s.x,s.y,o.x,o.y,w.x,w.y)&&Tn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;v&&v.z>=m;){if(v!==n.prev&&v!==n.next&&sc(r.x,r.y,s.x,s.y,o.x,o.y,v.x,v.y)&&Tn(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;w&&w.z<=y;){if(w!==n.prev&&w!==n.next&&sc(r.x,r.y,s.x,s.y,o.x,o.y,w.x,w.y)&&Tn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function X9(n,t,e){let i=n;do{const r=i.prev,s=i.next.next;!Wg(r,s)&&Xk(r,i,i.next,s)&&td(r,s)&&td(s,r)&&(t.push(r.i/e),t.push(i.i/e),t.push(s.i/e),ed(i),ed(i.next),i=n=s),i=i.next}while(i!==n);return Pa(i)}function Y9(n,t,e,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&s7(o,a)){let c=Yk(o,a);o=Pa(o,o.next),c=Pa(c,c.next),Qf(o,t,e,i,r,s),Qf(c,t,e,i,r,s);return}a=a.next}o=o.next}while(o!==n)}function K9(n,t,e,i){const r=[];let s,o,a,c,f;for(s=0,o=t.length;s<o;s++)a=t[s]*i,c=s<o-1?t[s+1]*i:n.length,f=qk(n,a,c,i,!1),f===f.next&&(f.steiner=!0),r.push(r7(f));for(r.sort(J9),s=0;s<r.length;s++)Q9(r[s],e),e=Pa(e,e.next);return e}function J9(n,t){return n.x-t.x}function Q9(n,t){if(t=t7(n,t),t){const e=Yk(t,n);Pa(t,t.next),Pa(e,e.next)}}function t7(n,t){let e=t;const i=n.x,r=n.y;let s=-1/0,o;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){const y=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(y<=i&&y>s){if(s=y,y===i){if(r===e.y)return e;if(r===e.next.y)return e.next}o=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!o)return null;if(i===s)return o;const a=o,c=o.x,f=o.y;let d=1/0,m;e=o;do i>=e.x&&e.x>=c&&i!==e.x&&sc(r<f?i:s,r,c,f,r<f?s:i,r,e.x,e.y)&&(m=Math.abs(r-e.y)/(i-e.x),td(e,n)&&(m<d||m===d&&(e.x>o.x||e.x===o.x&&e7(o,e)))&&(o=e,d=m)),e=e.next;while(e!==a);return o}function e7(n,t){return Tn(n.prev,n,t.prev)<0&&Tn(t.next,n,n.next)<0}function n7(n,t,e,i){let r=n;do r.z===null&&(r.z=$x(r.x,r.y,t,e,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,i7(r)}function i7(n){let t,e,i,r,s,o,a,c,f=1;do{for(e=n,n=null,s=null,o=0;e;){for(o++,i=e,a=0,t=0;t<f&&(a++,i=i.nextZ,!!i);t++);for(c=f;a>0||c>0&&i;)a!==0&&(c===0||!i||e.z<=i.z)?(r=e,e=e.nextZ,a--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;e=i}s.nextZ=null,f*=2}while(o>1);return n}function $x(n,t,e,i,r){return n=32767*(n-e)*r,t=32767*(t-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function r7(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function sc(n,t,e,i,r,s,o,a){return(r-o)*(t-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(e-o)*(t-a)>=0&&(e-o)*(s-a)-(r-o)*(i-a)>=0}function s7(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!o7(n,t)&&(td(n,t)&&td(t,n)&&a7(n,t)&&(Tn(n.prev,n,t.prev)||Tn(n,t.prev,t))||Wg(n,t)&&Tn(n.prev,n,n.next)>0&&Tn(t.prev,t,t.next)>0)}function Tn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Wg(n,t){return n.x===t.x&&n.y===t.y}function Xk(n,t,e,i){const r=Mm(Tn(n,t,e)),s=Mm(Tn(n,t,i)),o=Mm(Tn(e,i,n)),a=Mm(Tn(e,i,t));return!!(r!==s&&o!==a||r===0&&Sm(n,e,t)||s===0&&Sm(n,i,t)||o===0&&Sm(e,n,i)||a===0&&Sm(e,t,i))}function Sm(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Mm(n){return n>0?1:n<0?-1:0}function o7(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&Xk(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function td(n,t){return Tn(n.prev,n,n.next)<0?Tn(n,t,n.next)>=0&&Tn(n,n.prev,t)>=0:Tn(n,t,n.prev)<0||Tn(n,n.next,t)<0}function a7(n,t){let e=n,i=!1;const r=(n.x+t.x)/2,s=(n.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function Yk(n,t){const e=new Zx(n.i,n.x,n.y),i=new Zx(t.i,t.x,t.y),r=n.next,s=t.prev;return n.next=t,t.prev=n,e.next=r,r.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function BE(n,t,e,i){const r=new Zx(n,t,e);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ed(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Zx(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function l7(n,t,e,i){let r=0;for(let s=t,o=e-i;s<e;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Sa{static area(t){const e=t.length;let i=0;for(let r=e-1,s=0;s<e;r=s++)i+=t[r].x*t[s].y-t[s].x*t[r].y;return i*.5}static isClockWise(t){return Sa.area(t)<0}static triangulateShape(t,e){const i=[],r=[],s=[];VE(t),UE(i,t);let o=t.length;e.forEach(VE);for(let c=0;c<e.length;c++)r.push(o),o+=e[c].length,UE(i,e[c]);const a=$9.triangulate(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function VE(n){const t=n.length;t>2&&n[t-1].equals(n[0])&&n.pop()}function UE(n,t){for(let e=0;e<t.length;e++)n.push(t[e].x),n.push(t[e].y)}class zl extends nn{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,r=[],s=[];for(let a=0,c=t.length;a<c;a++){const f=t[a];o(f)}this.setAttribute("position",new ei(r,3)),this.setAttribute("uv",new ei(s,2)),this.computeVertexNormals();function o(a){const c=[],f=e.curveSegments!==void 0?e.curveSegments:12,d=e.steps!==void 0?e.steps:1;let m=e.depth!==void 0?e.depth:100,y=e.bevelEnabled!==void 0?e.bevelEnabled:!0,v=e.bevelThickness!==void 0?e.bevelThickness:6,w=e.bevelSize!==void 0?e.bevelSize:v-2,S=e.bevelOffset!==void 0?e.bevelOffset:0,P=e.bevelSegments!==void 0?e.bevelSegments:3;const b=e.extrudePath,M=e.UVGenerator!==void 0?e.UVGenerator:u7;e.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),m=e.amount);let R,O=!1,k,N,D,I;b&&(R=b.getSpacedPoints(d),O=!0,y=!1,k=b.computeFrenetFrames(d,!1),N=new st,D=new st,I=new st),y||(P=0,v=0,w=0,S=0);const H=a.extractPoints(f);let W=H.shape;const U=H.holes;if(!Sa.isClockWise(W)){W=W.reverse();for(let bt=0,Rt=U.length;bt<Rt;bt++){const Dt=U[bt];Sa.isClockWise(Dt)&&(U[bt]=Dt.reverse())}}const K=Sa.triangulateShape(W,U),Y=W;for(let bt=0,Rt=U.length;bt<Rt;bt++){const Dt=U[bt];W=W.concat(Dt)}function rt(bt,Rt,Dt){return Rt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Rt.clone().multiplyScalar(Dt).add(bt)}const at=W.length,it=K.length;function J(bt,Rt,Dt){let Wt,It,X;const $=bt.x-Rt.x,wt=bt.y-Rt.y,Lt=Dt.x-bt.x,$t=Dt.y-bt.y,Kt=$*$+wt*wt,re=$*$t-wt*Lt;if(Math.abs(re)>Number.EPSILON){const Jt=Math.sqrt(Kt),se=Math.sqrt(Lt*Lt+$t*$t),ft=Rt.x-wt/Jt,q=Rt.y+$/Jt,Pt=Dt.x-$t/se,St=Dt.y+Lt/se,zt=((Pt-ft)*$t-(St-q)*Lt)/($*$t-wt*Lt);Wt=ft+$*zt-bt.x,It=q+wt*zt-bt.y;const Xt=Wt*Wt+It*It;if(Xt<=2)return new Zt(Wt,It);X=Math.sqrt(Xt/2)}else{let Jt=!1;$>Number.EPSILON?Lt>Number.EPSILON&&(Jt=!0):$<-Number.EPSILON?Lt<-Number.EPSILON&&(Jt=!0):Math.sign(wt)===Math.sign($t)&&(Jt=!0),Jt?(Wt=-wt,It=$,X=Math.sqrt(Kt)):(Wt=$,It=wt,X=Math.sqrt(Kt/2))}return new Zt(Wt/X,It/X)}const pt=[];for(let bt=0,Rt=Y.length,Dt=Rt-1,Wt=bt+1;bt<Rt;bt++,Dt++,Wt++)Dt===Rt&&(Dt=0),Wt===Rt&&(Wt=0),pt[bt]=J(Y[bt],Y[Dt],Y[Wt]);const F=[];let G,lt=pt.concat();for(let bt=0,Rt=U.length;bt<Rt;bt++){const Dt=U[bt];G=[];for(let Wt=0,It=Dt.length,X=It-1,$=Wt+1;Wt<It;Wt++,X++,$++)X===It&&(X=0),$===It&&($=0),G[Wt]=J(Dt[Wt],Dt[X],Dt[$]);F.push(G),lt=lt.concat(G)}for(let bt=0;bt<P;bt++){const Rt=bt/P,Dt=v*Math.cos(Rt*Math.PI/2),Wt=w*Math.sin(Rt*Math.PI/2)+S;for(let It=0,X=Y.length;It<X;It++){const $=rt(Y[It],pt[It],Wt);Ot($.x,$.y,-Dt)}for(let It=0,X=U.length;It<X;It++){const $=U[It];G=F[It];for(let wt=0,Lt=$.length;wt<Lt;wt++){const $t=rt($[wt],G[wt],Wt);Ot($t.x,$t.y,-Dt)}}}const z=w+S;for(let bt=0;bt<at;bt++){const Rt=y?rt(W[bt],lt[bt],z):W[bt];O?(D.copy(k.normals[0]).multiplyScalar(Rt.x),N.copy(k.binormals[0]).multiplyScalar(Rt.y),I.copy(R[0]).add(D).add(N),Ot(I.x,I.y,I.z)):Ot(Rt.x,Rt.y,0)}for(let bt=1;bt<=d;bt++)for(let Rt=0;Rt<at;Rt++){const Dt=y?rt(W[Rt],lt[Rt],z):W[Rt];O?(D.copy(k.normals[bt]).multiplyScalar(Dt.x),N.copy(k.binormals[bt]).multiplyScalar(Dt.y),I.copy(R[bt]).add(D).add(N),Ot(I.x,I.y,I.z)):Ot(Dt.x,Dt.y,m/d*bt)}for(let bt=P-1;bt>=0;bt--){const Rt=bt/P,Dt=v*Math.cos(Rt*Math.PI/2),Wt=w*Math.sin(Rt*Math.PI/2)+S;for(let It=0,X=Y.length;It<X;It++){const $=rt(Y[It],pt[It],Wt);Ot($.x,$.y,m+Dt)}for(let It=0,X=U.length;It<X;It++){const $=U[It];G=F[It];for(let wt=0,Lt=$.length;wt<Lt;wt++){const $t=rt($[wt],G[wt],Wt);O?Ot($t.x,$t.y+R[d-1].y,R[d-1].x+Dt):Ot($t.x,$t.y,m+Dt)}}}mt(),_t();function mt(){const bt=r.length/3;if(y){let Rt=0,Dt=at*Rt;for(let Wt=0;Wt<it;Wt++){const It=K[Wt];At(It[2]+Dt,It[1]+Dt,It[0]+Dt)}Rt=d+P*2,Dt=at*Rt;for(let Wt=0;Wt<it;Wt++){const It=K[Wt];At(It[0]+Dt,It[1]+Dt,It[2]+Dt)}}else{for(let Rt=0;Rt<it;Rt++){const Dt=K[Rt];At(Dt[2],Dt[1],Dt[0])}for(let Rt=0;Rt<it;Rt++){const Dt=K[Rt];At(Dt[0]+at*d,Dt[1]+at*d,Dt[2]+at*d)}}i.addGroup(bt,r.length/3-bt,0)}function _t(){const bt=r.length/3;let Rt=0;nt(Y,Rt),Rt+=Y.length;for(let Dt=0,Wt=U.length;Dt<Wt;Dt++){const It=U[Dt];nt(It,Rt),Rt+=It.length}i.addGroup(bt,r.length/3-bt,1)}function nt(bt,Rt){let Dt=bt.length;for(;--Dt>=0;){const Wt=Dt;let It=Dt-1;It<0&&(It=bt.length-1);for(let X=0,$=d+P*2;X<$;X++){const wt=at*X,Lt=at*(X+1),$t=Rt+Wt+wt,Kt=Rt+It+wt,re=Rt+It+Lt,Jt=Rt+Wt+Lt;kt($t,Kt,re,Jt)}}}function Ot(bt,Rt,Dt){c.push(bt),c.push(Rt),c.push(Dt)}function At(bt,Rt,Dt){Ft(bt),Ft(Rt),Ft(Dt);const Wt=r.length/3,It=M.generateTopUV(i,r,Wt-3,Wt-2,Wt-1);jt(It[0]),jt(It[1]),jt(It[2])}function kt(bt,Rt,Dt,Wt){Ft(bt),Ft(Rt),Ft(Wt),Ft(Rt),Ft(Dt),Ft(Wt);const It=r.length/3,X=M.generateSideWallUV(i,r,It-6,It-3,It-2,It-1);jt(X[0]),jt(X[1]),jt(X[3]),jt(X[1]),jt(X[2]),jt(X[3])}function Ft(bt){r.push(c[bt*3+0]),r.push(c[bt*3+1]),r.push(c[bt*3+2])}function jt(bt){s.push(bt.x),s.push(bt.y)}}}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return c7(e,i,t)}static fromJSON(t,e){const i=[];for(let s=0,o=t.shapes.length;s<o;s++){const a=e[t.shapes[s]];i.push(a)}const r=t.options.extrudePath;return r!==void 0&&(t.options.extrudePath=new Zk[r.type]().fromJSON(r)),new zl(i,t.options)}}const u7={generateTopUV:function(n,t,e,i,r){const s=t[e*3],o=t[e*3+1],a=t[i*3],c=t[i*3+1],f=t[r*3],d=t[r*3+1];return[new Zt(s,o),new Zt(a,c),new Zt(f,d)]},generateSideWallUV:function(n,t,e,i,r,s){const o=t[e*3],a=t[e*3+1],c=t[e*3+2],f=t[i*3],d=t[i*3+1],m=t[i*3+2],y=t[r*3],v=t[r*3+1],w=t[r*3+2],S=t[s*3],P=t[s*3+1],b=t[s*3+2];return Math.abs(a-d)<Math.abs(o-f)?[new Zt(o,1-c),new Zt(f,1-m),new Zt(y,1-w),new Zt(S,1-b)]:[new Zt(a,1-c),new Zt(d,1-m),new Zt(v,1-w),new Zt(P,1-b)]}};function c7(n,t,e){if(e.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class Lw extends nn{constructor(t,e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],r=[],s=[],o=[];let a=0,c=0;if(Array.isArray(t)===!1)f(t);else for(let d=0;d<t.length;d++)f(t[d]),this.addGroup(a,c,d),a+=c,c=0;this.setIndex(i),this.setAttribute("position",new ei(r,3)),this.setAttribute("normal",new ei(s,3)),this.setAttribute("uv",new ei(o,2));function f(d){const m=r.length/3,y=d.extractPoints(e);let v=y.shape;const w=y.holes;Sa.isClockWise(v)===!1&&(v=v.reverse());for(let P=0,b=w.length;P<b;P++){const M=w[P];Sa.isClockWise(M)===!0&&(w[P]=M.reverse())}const S=Sa.triangulateShape(v,w);for(let P=0,b=w.length;P<b;P++){const M=w[P];v=v.concat(M)}for(let P=0,b=v.length;P<b;P++){const M=v[P];r.push(M.x,M.y,0),s.push(0,0,1),o.push(M.x,M.y)}for(let P=0,b=S.length;P<b;P++){const M=S[P],R=M[0]+m,O=M[1]+m,k=M[2]+m;i.push(R,O,k),c+=3}}}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return h7(e,t)}static fromJSON(t,e){const i=[];for(let r=0,s=t.shapes.length;r<s;r++){const o=e[t.shapes[r]];i.push(o)}return new Lw(i,t.curveSegments)}}function h7(n,t){if(t.shapes=[],Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const r=n[e];t.shapes.push(r.uuid)}else t.shapes.push(n.uuid);return t}class f7 extends Ti{constructor(t){super(),this.type="ShadowMaterial",this.color=new he(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}f7.prototype.isShadowMaterial=!0;class Kk extends Ti{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new he(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oc,this.normalScale=new Zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}Kk.prototype.isMeshStandardMaterial=!0;class d7 extends Kk{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Zt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Oi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenTint=new he(0),this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new he(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new he(1,1,1),this.specularTintMap=null,this._clearcoat=0,this._transmission=0,this.setValues(t)}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheenTint.copy(t.sheenTint),this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationTint.copy(t.attenuationTint),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularTint.copy(t.specularTint),this.specularTintMap=t.specularTintMap,this}}d7.prototype.isMeshPhysicalMaterial=!0;class Jk extends Ti{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new he(16777215),this.specular=new he(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oc,this.normalScale=new Zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ig,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}Jk.prototype.isMeshPhongMaterial=!0;class p7 extends Ti{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new he(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oc,this.normalScale=new Zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}p7.prototype.isMeshToonMaterial=!0;class m7 extends Ti{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oc,this.normalScale=new Zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}m7.prototype.isMeshNormalMaterial=!0;class g7 extends Ti{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new he(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new he(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ig,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}g7.prototype.isMeshLambertMaterial=!0;class y7 extends Ti{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new he(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oc,this.normalScale=new Zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}y7.prototype.isMeshMatcapMaterial=!0;class v7 extends Vc{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}v7.prototype.isLineDashedMaterial=!0;const yn={arraySlice:function(n,t,e){return yn.isTypedArray(n)?new n.constructor(n.subarray(t,e!==void 0?e:n.length)):n.slice(t,e)},convertArray:function(n,t,e){return!n||!e&&n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function t(r,s){return n[r]-n[s]}const e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(t),i},sortedArray:function(n,t,e){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=e[s]*t;for(let c=0;c!==t;++c)r[o++]=n[a+c]}return r},flattenJSON:function(n,t,e,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(t.push(s.time),e.push.apply(e,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(t.push(s.time),o.toArray(e,e.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(t.push(s.time),e.push(o)),s=n[r++];while(s!==void 0)},subclip:function(n,t,e,i,r=30){const s=n.clone();s.name=t;const o=[];for(let c=0;c<s.tracks.length;++c){const f=s.tracks[c],d=f.getValueSize(),m=[],y=[];for(let v=0;v<f.times.length;++v){const w=f.times[v]*r;if(!(w<e||w>=i)){m.push(f.times[v]);for(let S=0;S<d;++S)y.push(f.values[v*d+S])}}m.length!==0&&(f.times=yn.convertArray(m,f.times.constructor),f.values=yn.convertArray(y,f.values.constructor),o.push(f))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,t=0,e=n,i=30){i<=0&&(i=30);const r=e.tracks.length,s=t/i;for(let o=0;o<r;++o){const a=e.tracks[o],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(b){return b.name===a.name&&b.ValueTypeName===c});if(f===void 0)continue;let d=0;const m=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);let y=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=v/3);const w=a.times.length-1;let S;if(s<=a.times[0]){const b=d,M=m-d;S=yn.arraySlice(a.values,b,M)}else if(s>=a.times[w]){const b=w*m+d,M=b+m-d;S=yn.arraySlice(a.values,b,M)}else{const b=a.createInterpolant(),M=d,R=m-d;b.evaluate(s),S=yn.arraySlice(b.resultBuffer,M,R)}c==="quaternion"&&new Si().fromArray(S).normalize().conjugate().toArray(S);const P=f.times.length;for(let b=0;b<P;++b){const M=b*v+y;if(c==="quaternion")Si.multiplyQuaternionsFlat(f.values,M,S,0,f.values,M);else{const R=v-y*2;for(let O=0;O<R;++O)f.values[M+O]-=S[O]}}}return n.blendMode=fk,n}};class Ca{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,r=e[i],s=e[i-1];t:{e:{let o;n:{i:if(!(t<r)){for(let a=i+2;;){if(r===void 0){if(t<s)break i;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,s)}if(i===a)break;if(s=r,r=e[++i],t<r)break e}o=e.length;break n}if(!(t>=s)){const a=e[1];t<a&&(i=2,s=a);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(i===c)break;if(r=s,s=e[--i-1],t>=s)break e}o=i,i=0;break n}break t}for(;i<o;){const a=i+o>>>1;t<e[a]?o=a:i=a+1}if(r=e[i],s=e[i-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(r===void 0)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,s,t)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=i[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Ca.prototype.beforeStart_=Ca.prototype.copySampleValue_;Ca.prototype.afterEnd_=Ca.prototype.copySampleValue_;class _7 extends Ca{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ic,endingEnd:ic}}intervalChanged_(t,e,i){const r=this.parameterPositions;let s=t-2,o=t+1,a=r[s],c=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case rc:s=t,a=2*e-i;break;case lg:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=i}if(c===void 0)switch(this.getSettings_().endingEnd){case rc:o=t,c=2*i-e;break;case lg:o=1,c=i+r[1]-r[0];break;default:o=t-1,c=e}const f=(i-e)*.5,d=this.valueSize;this._weightPrev=f/(e-a),this._weightNext=f/(c-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(t,e,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=t*a,f=c-a,d=this._offsetPrev,m=this._offsetNext,y=this._weightPrev,v=this._weightNext,w=(i-e)/(r-e),S=w*w,P=S*w,b=-y*P+2*y*S-y*w,M=(1+y)*P+(-1.5-2*y)*S+(-.5+y)*w+1,R=(-1-v)*P+(1.5+v)*S+.5*w,O=v*P-v*S;for(let k=0;k!==a;++k)s[k]=b*o[d+k]+M*o[f+k]+R*o[c+k]+O*o[m+k];return s}}class Qk extends Ca{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=t*a,f=c-a,d=(i-e)/(r-e),m=1-d;for(let y=0;y!==a;++y)s[y]=o[f+y]*m+o[c+y]*d;return s}}class x7 extends Ca{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class $s{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=yn.convertArray(e,this.TimeBufferType),this.values=yn.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:yn.convertArray(t.times,Array),values:yn.convertArray(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new x7(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Qk(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new _7(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case og:e=this.InterpolantFactoryMethodDiscrete;break;case ag:e=this.InterpolantFactoryMethodLinear;break;case Kv:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return og;case this.InterpolantFactoryMethodLinear:return ag;case this.InterpolantFactoryMethodSmooth:return Kv}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<t;)++s;for(;o!==-1&&i[o]>e;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=yn.arraySlice(i,s,o),this.values=yn.arraySlice(this.values,s*a,o*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),t=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),t=!1;break}o=c}if(r!==void 0&&yn.isTypedArray(r))for(let a=0,c=r.length;a!==c;++a){const f=r[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),t=!1;break}}return t}optimize(){const t=yn.arraySlice(this.times),e=yn.arraySlice(this.values),i=this.getValueSize(),r=this.getInterpolation()===Kv,s=t.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const f=t[a],d=t[a+1];if(f!==d&&(a!==1||f!==t[0]))if(r)c=!0;else{const m=a*i,y=m-i,v=m+i;for(let w=0;w!==i;++w){const S=e[m+w];if(S!==e[y+w]||S!==e[v+w]){c=!0;break}}}if(c){if(a!==o){t[o]=t[a];const m=a*i,y=o*i;for(let v=0;v!==i;++v)e[y+v]=e[m+v]}++o}}if(s>0){t[o]=t[s];for(let a=s*i,c=o*i,f=0;f!==i;++f)e[c+f]=e[a+f];++o}return o!==t.length?(this.times=yn.arraySlice(t,0,o),this.values=yn.arraySlice(e,0,o*i)):(this.times=t,this.values=e),this}clone(){const t=yn.arraySlice(this.times,0),e=yn.arraySlice(this.values,0),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}$s.prototype.TimeBufferType=Float32Array;$s.prototype.ValueBufferType=Float32Array;$s.prototype.DefaultInterpolation=ag;class Uc extends $s{}Uc.prototype.ValueTypeName="bool";Uc.prototype.ValueBufferType=Array;Uc.prototype.DefaultInterpolation=og;Uc.prototype.InterpolantFactoryMethodLinear=void 0;Uc.prototype.InterpolantFactoryMethodSmooth=void 0;class t2 extends $s{}t2.prototype.ValueTypeName="color";class cg extends $s{}cg.prototype.ValueTypeName="number";class w7 extends Ca{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-e)/(r-e);let f=t*a;for(let d=f+a;f!==d;f+=4)Si.slerpFlat(s,0,o,f-a,o,f,c);return s}}class yd extends $s{InterpolantFactoryMethodLinear(t){return new w7(this.times,this.values,this.getValueSize(),t)}}yd.prototype.ValueTypeName="quaternion";yd.prototype.DefaultInterpolation=ag;yd.prototype.InterpolantFactoryMethodSmooth=void 0;class Hc extends $s{}Hc.prototype.ValueTypeName="string";Hc.prototype.ValueBufferType=Array;Hc.prototype.DefaultInterpolation=og;Hc.prototype.InterpolantFactoryMethodLinear=void 0;Hc.prototype.InterpolantFactoryMethodSmooth=void 0;class hg extends $s{}hg.prototype.ValueTypeName="vector";class HE{constructor(t,e=-1,i,r=dw){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=ps(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,r=1/(t.fps||1);for(let o=0,a=i.length;o!==a;++o)e.push(S7(i[o]).scale(r));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=i.length;s!==o;++s)e.push($s.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(t,e,i,r){const s=e.length,o=[];for(let a=0;a<s;a++){let c=[],f=[];c.push((a+s-1)%s,a,(a+1)%s),f.push(0,1,0);const d=yn.getKeyframeOrder(c);c=yn.sortedArray(c,1,d),f=yn.sortedArray(f,1,d),!r&&c[0]===0&&(c.push(s),f.push(f[0])),o.push(new cg(".morphTargetInfluences["+e[a].name+"]",c,f).scale(1/i))}return new this(t,-1,o)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=t.length;a<c;a++){const f=t[a],d=f.name.match(s);if(d&&d.length>1){const m=d[1];let y=r[m];y||(r[m]=y=[]),y.push(f)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,i));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(m,y,v,w,S){if(v.length!==0){const P=[],b=[];yn.flattenJSON(v,P,b,w),P.length!==0&&S.push(new m(y,P,b))}},r=[],s=t.name||"default",o=t.fps||30,a=t.blendMode;let c=t.length||-1;const f=t.hierarchy||[];for(let m=0;m<f.length;m++){const y=f[m].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const v={};let w;for(w=0;w<y.length;w++)if(y[w].morphTargets)for(let S=0;S<y[w].morphTargets.length;S++)v[y[w].morphTargets[S]]=-1;for(const S in v){const P=[],b=[];for(let M=0;M!==y[w].morphTargets.length;++M){const R=y[w];P.push(R.time),b.push(R.morphTarget===S?1:0)}r.push(new cg(".morphTargetInfluence["+S+"]",P,b))}c=v.length*o}else{const v=".bones["+e[m].name+"]";i(hg,v+".position",y,"pos",r),i(yd,v+".quaternion",y,"rot",r),i(hg,v+".scale",y,"scl",r)}}return r.length===0?null:new this(s,c,r,a)}resetDuration(){const t=this.tracks;let e=0;for(let i=0,r=t.length;i!==r;++i){const s=this.tracks[i];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function b7(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cg;case"vector":case"vector2":case"vector3":case"vector4":return hg;case"color":return t2;case"quaternion":return yd;case"bool":case"boolean":return Uc;case"string":return Hc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function S7(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=b7(n.type);if(n.times===void 0){const e=[],i=[];yn.flattenJSON(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}const Mc={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class M7{constructor(t,e,i){const r=this;let s=!1,o=0,a=0,c;const f=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(d){a++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,m){return f.push(d,m),this},this.removeHandler=function(d){const m=f.indexOf(d);return m!==-1&&f.splice(m,2),this},this.getHandler=function(d){for(let m=0,y=f.length;m<y;m+=2){const v=f[m],w=f[m+1];if(v.global&&(v.lastIndex=0),v.test(d))return w}return null}}}const T7=new M7;class ka{constructor(t){this.manager=t!==void 0?t:T7,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(r,s){i.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const us={};class E7 extends ka{constructor(t){super(t)}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Mc.get(t);if(o!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;if(us[t]!==void 0){us[t].push({onLoad:e,onProgress:i,onError:r});return}const a=/^data:(.*?)(;base64)?,(.*)$/,c=t.match(a);let f;if(c){const d=c[1],m=!!c[2];let y=c[3];y=decodeURIComponent(y),m&&(y=atob(y));try{let v;const w=(this.responseType||"").toLowerCase();switch(w){case"arraybuffer":case"blob":const S=new Uint8Array(y.length);for(let b=0;b<y.length;b++)S[b]=y.charCodeAt(b);w==="blob"?v=new Blob([S.buffer],{type:d}):v=S.buffer;break;case"document":v=new DOMParser().parseFromString(y,d);break;case"json":v=JSON.parse(y);break;default:v=y;break}setTimeout(function(){e&&e(v),s.manager.itemEnd(t)},0)}catch(v){setTimeout(function(){r&&r(v),s.manager.itemError(t),s.manager.itemEnd(t)},0)}}else{us[t]=[],us[t].push({onLoad:e,onProgress:i,onError:r}),f=new XMLHttpRequest,f.open("GET",t,!0),f.addEventListener("load",function(d){const m=this.response,y=us[t];if(delete us[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Mc.add(t,m);for(let v=0,w=y.length;v<w;v++){const S=y[v];S.onLoad&&S.onLoad(m)}s.manager.itemEnd(t)}else{for(let v=0,w=y.length;v<w;v++){const S=y[v];S.onError&&S.onError(d)}s.manager.itemError(t),s.manager.itemEnd(t)}},!1),f.addEventListener("progress",function(d){const m=us[t];for(let y=0,v=m.length;y<v;y++){const w=m[y];w.onProgress&&w.onProgress(d)}},!1),f.addEventListener("error",function(d){const m=us[t];delete us[t];for(let y=0,v=m.length;y<v;y++){const w=m[y];w.onError&&w.onError(d)}s.manager.itemError(t),s.manager.itemEnd(t)},!1),f.addEventListener("abort",function(d){const m=us[t];delete us[t];for(let y=0,v=m.length;y<v;y++){const w=m[y];w.onError&&w.onError(d)}s.manager.itemError(t),s.manager.itemEnd(t)},!1),this.responseType!==void 0&&(f.responseType=this.responseType),this.withCredentials!==void 0&&(f.withCredentials=this.withCredentials),f.overrideMimeType&&f.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const d in this.requestHeader)f.setRequestHeader(d,this.requestHeader[d]);f.send(null)}return s.manager.itemStart(t),f}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class e2 extends ka{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Mc.get(t);if(o!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function c(){a.removeEventListener("load",c,!1),a.removeEventListener("error",f,!1),Mc.add(t,this),e&&e(this),s.manager.itemEnd(t)}function f(d){a.removeEventListener("load",c,!1),a.removeEventListener("error",f,!1),r&&r(d),s.manager.itemError(t),s.manager.itemEnd(t)}return a.addEventListener("load",c,!1),a.addEventListener("error",f,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}}class P7 extends ka{constructor(t){super(t)}load(t,e,i,r){const s=new Bg,o=new e2(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function c(f){o.load(t[f],function(d){s.images[f]=d,a++,a===6&&(s.needsUpdate=!0,e&&e(s))},void 0,r)}for(let f=0;f<t.length;++f)c(f);return s}}class C7 extends ka{constructor(t){super(t)}load(t,e,i,r){const s=new li,o=new e2(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a;const c=t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0;s.format=c?xa:xr,s.needsUpdate=!0,e!==void 0&&e(s)},i,r),s}}class A7 extends Zr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new jg(e,t))}getPoint(t){const e=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=e){const s=i[r]-e,o=this.curves[r],a=o.getLength(),c=a===0?0:1-s/a;return o.getPointAt(c)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,r=this.curves.length;i<r;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o&&o.isEllipseCurve?t*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,c=o.getPoints(a);for(let f=0;f<c.length;f++){const d=c[f];i&&i.equals(d)||(e.push(d),i=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const r=this.curves[e];t.curves.push(r.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const r=t.curves[e];this.curves.push(new Zk[r.type]().fromJSON(r))}return this}}class qx extends A7{constructor(t){super(),this.type="Path",this.currentPoint=new Zt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new jg(this.currentPoint.clone(),new Zt(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,r){const s=new Cw(this.currentPoint.clone(),new Zt(t,e),new Zt(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(t,e,i,r,s,o){const a=new Pw(this.currentPoint.clone(),new Zt(t,e),new Zt(i,r),new Zt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new Aw(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,r,s,o){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+a,e+c,i,r,s,o),this}absarc(t,e,i,r,s,o){return this.absellipse(t,e,i,i,r,s,o),this}ellipse(t,e,i,r,s,o,a,c){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(t+f,e+d,i,r,s,o,a,c),this}absellipse(t,e,i,r,s,o,a,c){const f=new Hg(t,e,i,r,s,o,a,c);if(this.curves.length>0){const m=f.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Gg extends qx{constructor(t){super(t),this.uuid=ps(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,r=this.holes.length;i<r;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const r=t.holes[e];this.holes.push(r.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const r=this.holes[e];t.holes.push(r.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const r=t.holes[e];this.holes.push(new qx().fromJSON(r))}return this}}class Ws extends Ze{constructor(t,e=1){super(),this.type="Light",this.color=new he(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}Ws.prototype.isLight=!0;class L7 extends Ws{constructor(t,e,i){super(t,i),this.type="HemisphereLight",this.position.copy(Ze.DefaultUp),this.updateMatrix(),this.groundColor=new he(e)}copy(t){return Ws.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}L7.prototype.isHemisphereLight=!0;const jE=new ve,WE=new st,GE=new st;class kw{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Zt(512,512),this.map=null,this.mapPass=null,this.matrix=new ve,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vg,this._frameExtents=new Zt(1,1),this._viewportCount=1,this._viewports=[new en(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;WE.setFromMatrixPosition(t.matrixWorld),e.position.copy(WE),GE.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(GE),e.updateMatrixWorld(),jE.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jE),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class n2 extends kw{constructor(){super(new Kn(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,i=Kf*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(i!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=i,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}n2.prototype.isSpotLightShadow=!0;class k7 extends Ws{constructor(t,e,i=0,r=Math.PI/3,s=0,o=1){super(t,e),this.type="SpotLight",this.position.copy(Ze.DefaultUp),this.updateMatrix(),this.target=new Ze,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new n2}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}k7.prototype.isSpotLight=!0;const $E=new ve,Xh=new st,R_=new st;class i2 extends kw{constructor(){super(new Kn(90,1,.5,500)),this._frameExtents=new Zt(4,2),this._viewportCount=6,this._viewports=[new en(2,1,1,1),new en(0,1,1,1),new en(3,1,1,1),new en(1,1,1,1),new en(3,0,1,1),new en(1,0,1,1)],this._cubeDirections=[new st(1,0,0),new st(-1,0,0),new st(0,0,1),new st(0,0,-1),new st(0,1,0),new st(0,-1,0)],this._cubeUps=[new st(0,1,0),new st(0,1,0),new st(0,1,0),new st(0,1,0),new st(0,0,1),new st(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,r=this.matrix,s=t.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Xh.setFromMatrixPosition(t.matrixWorld),i.position.copy(Xh),R_.copy(i.position),R_.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(R_),i.updateMatrixWorld(),r.makeTranslation(-Xh.x,-Xh.y,-Xh.z),$E.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix($E)}}i2.prototype.isPointLightShadow=!0;class R7 extends Ws{constructor(t,e,i=0,r=1){super(t,e),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new i2}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}R7.prototype.isPointLight=!0;class r2 extends kw{constructor(){super(new hc(-5,5,5,-5,.5,500))}}r2.prototype.isDirectionalLightShadow=!0;class s2 extends Ws{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(Ze.DefaultUp),this.updateMatrix(),this.target=new Ze,this.shadow=new r2}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}s2.prototype.isDirectionalLight=!0;class o2 extends Ws{constructor(t,e){super(t,e),this.type="AmbientLight"}}o2.prototype.isAmbientLight=!0;class I7 extends Ws{constructor(t,e,i=10,r=10){super(t,e),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}I7.prototype.isRectAreaLight=!0;class a2{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new st)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,r=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*s),e.addScaledVector(o[3],.488603*i),e.addScaledVector(o[4],1.092548*(i*r)),e.addScaledVector(o[5],1.092548*(r*s)),e.addScaledVector(o[6],.315392*(3*s*s-1)),e.addScaledVector(o[7],1.092548*(i*s)),e.addScaledVector(o[8],.546274*(i*i-r*r)),e}getIrradianceAt(t,e){const i=t.x,r=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],2*.511664*r),e.addScaledVector(o[2],2*.511664*s),e.addScaledVector(o[3],2*.511664*i),e.addScaledVector(o[4],2*.429043*i*r),e.addScaledVector(o[5],2*.429043*r*s),e.addScaledVector(o[6],.743125*s*s-.247708),e.addScaledVector(o[7],2*.429043*i*s),e.addScaledVector(o[8],.429043*(i*i-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(t,e+r*3);return this}toArray(t=[],e=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(t,e+r*3);return t}static getBasisAt(t,e){const i=t.x,r=t.y,s=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*s,e[3]=.488603*i,e[4]=1.092548*i*r,e[5]=1.092548*r*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*i*s,e[8]=.546274*(i*i-r*r)}}a2.prototype.isSphericalHarmonics3=!0;class Rw extends Ws{constructor(t=new a2,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}Rw.prototype.isLightProbe=!0;class D7{static decodeText(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}}class O7 extends nn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}O7.prototype.isInstancedBufferGeometry=!0;class N7 extends ka{constructor(t){super(t),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Mc.get(t);if(o!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){Mc.add(t,c),e&&e(c),s.manager.itemEnd(t)}).catch(function(c){r&&r(c),s.manager.itemError(t),s.manager.itemEnd(t)}),s.manager.itemStart(t)}}N7.prototype.isImageBitmapLoader=!0;let Tm;const F7={getContext:function(){return Tm===void 0&&(Tm=new(window.AudioContext||window.webkitAudioContext)),Tm},setContext:function(n){Tm=n}};class z7 extends ka{constructor(t){super(t)}load(t,e,i,r){const s=this,o=new E7(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{const c=a.slice(0);F7.getContext().decodeAudioData(c,function(d){e(d)})}catch(c){r?r(c):console.error(c),s.manager.itemError(t)}},i,r)}}class B7 extends Rw{constructor(t,e,i=1){super(void 0,i);const r=new he().set(t),s=new he().set(e),o=new st(r.r,r.g,r.b),a=new st(s.r,s.g,s.b),c=Math.sqrt(Math.PI),f=c*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(c),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(f)}}B7.prototype.isHemisphereLightProbe=!0;class V7 extends Rw{constructor(t,e=1){super(void 0,e);const i=new he().set(t);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}V7.prototype.isAmbientLightProbe=!0;class U7 extends Ze{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}class H7{constructor(t,e,i){this.binding=t,this.valueSize=i;let r,s,o;switch(e){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,r=this.valueSize,s=t*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=e}else{o+=e;const a=e/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,r=t*e+e,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=e*this._origIndex;this._mixBufferRegion(i,r,c,1-s,e)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*e,1,e);for(let c=e,f=e+e;c!==f;++c)if(i[c]!==i[c+e]){a.setValue(i,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,i=this.valueSize,r=i*this._origIndex;t.getValue(e,r);for(let s=i,o=r;s!==o;++s)e[s]=e[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)t[e+o]=t[i+o]}_slerp(t,e,i,r){Si.slerpFlat(t,e,t,e,t,i,r)}_slerpAdditive(t,e,i,r,s){const o=this._workIndex*s;Si.multiplyQuaternionsFlat(t,o,t,e,t,i),Si.slerpFlat(t,e,t,e,t,o,r)}_lerp(t,e,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const c=e+a;t[c]=t[c]*o+t[i+a]*r}}_lerpAdditive(t,e,i,r,s){for(let o=0;o!==s;++o){const a=e+o;t[a]=t[a]+t[i+o]*r}}}const Iw="\\[\\]\\.:\\/",j7=new RegExp("["+Iw+"]","g"),Dw="[^"+Iw+"]",W7="[^"+Iw.replace("\\.","")+"]",G7=/((?:WC+[\/:])*)/.source.replace("WC",Dw),$7=/(WCOD+)?/.source.replace("WCOD",W7),Z7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Dw),q7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Dw),X7=new RegExp("^"+G7+$7+Z7+q7+"$"),Y7=["material","materials","bones"];class K7{constructor(t,e,i){const r=i||qe.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class qe{constructor(t,e,i){this.path=e,this.parsedPath=i||qe.parseTrackName(e),this.node=qe.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new qe.Composite(t,e,i):new qe(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(j7,"")}static parseTrackName(t){const e=X7.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Y7.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(!e||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===e||a.uuid===e)return a;const c=i(a.children);if(c)return c}return null},r=i(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)t[e++]=i[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,r=e.propertyName;let s=e.propertyIndex;if(t||(t=qe.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let f=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===f){f=d;break}break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}const o=t[r];if(o===void 0){const f=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",t);return}let a=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qe.Composite=K7;qe.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qe.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qe.prototype.GetterByBindingType=[qe.prototype._getValue_direct,qe.prototype._getValue_array,qe.prototype._getValue_arrayElement,qe.prototype._getValue_toArray];qe.prototype.SetterByBindingTypeAndVersioning=[[qe.prototype._setValue_direct,qe.prototype._setValue_direct_setNeedsUpdate,qe.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qe.prototype._setValue_array,qe.prototype._setValue_array_setNeedsUpdate,qe.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qe.prototype._setValue_arrayElement,qe.prototype._setValue_arrayElement_setNeedsUpdate,qe.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qe.prototype._setValue_fromArray,qe.prototype._setValue_fromArray_setNeedsUpdate,qe.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class J7{constructor(t,e,i=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=r;const s=e.tracks,o=s.length,a=new Array(o),c={endingStart:ic,endingEnd:ic};for(let f=0;f!==o;++f){const d=s[f].createInterpolant(null);a[f]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Mj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const r=this._clip.duration,s=t._clip.duration,o=s/r,a=r/s;t.warp(1,o,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,f=a.sampleValues;return c[0]=s,c[1]=s+i,f[0]=t/o,f[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,r){if(!this.enabled){this._updateWeight(t);return}const s=this._startTime;if(s!==null){const c=(t-s)*i;if(c<0||i===0)return;this._startTime=null,e=i*c}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case fk:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(o),f[d].accumulateAdditive(a);break;case dw:default:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(o),f[d].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let r=this.time+t,s=this._loopCount;const o=i===Tj;if(t===0)return s===-1?r:o&&(s&1)===1?e-r:r;if(i===Sj){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else if(r<0)r=0;else{this.time=r;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(s===-1&&(t>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=e||r<0){const a=Math.floor(r/e);r-=e*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(c===1){const f=t<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return e-r}return r}_setEndings(t,e,i){const r=this._interpolantSettings;i?(r.endingStart=rc,r.endingEnd=rc):(t?r.endingStart=this.zeroSlopeAtStart?rc:ic:r.endingStart=lg,e?r.endingEnd=this.zeroSlopeAtEnd?rc:ic:r.endingEnd=lg)}_scheduleFading(t,e,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=e,a[1]=s+t,c[1]=i,this}}class Q7 extends Nl{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,r=t._clip.tracks,s=r.length,o=t._propertyBindings,a=t._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let d=f[c];d===void 0&&(d={},f[c]=d);for(let m=0;m!==s;++m){const y=r[m],v=y.name;let w=d[v];if(w!==void 0)o[m]=w;else{if(w=o[m],w!==void 0){w._cacheIndex===null&&(++w.referenceCount,this._addInactiveBinding(w,c,v));continue}const S=e&&e._propertyBindings[m].binding.parsedPath;w=new H7(qe.create(i,v,S),y.ValueTypeName,y.getValueSize()),++w.referenceCount,this._addInactiveBinding(w,c,v),o[m]=w}a[m].resultBuffer=w.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const i=(t._localRoot||this._root).uuid,r=t._clip.uuid,s=this._actionsByClip[r];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,r,i)}const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const s=e[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const s=e[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){const r=this._actions,s=this._actionsByClip;let o=s[e];if(o===void 0)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=o;else{const a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],r=t._cacheIndex;i._cacheIndex=r,e[r]=i,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,f=c[c.length-1],d=t._byClipCacheIndex;f._byClipCacheIndex=d,c[d]=f,c.pop(),t._byClipCacheIndex=null;const m=a.actionByRoot,y=(t._localRoot||this._root).uuid;delete m[y],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){const s=e[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,r=this._nActiveActions++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,r=--this._nActiveActions,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_addInactiveBinding(t,e,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[e];o===void 0&&(o={},r[e]=o),o[i]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],c=e[e.length-1],f=t._cacheIndex;c._cacheIndex=f,e[f]=c,e.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,r=this._nActiveBindings++,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,r=--this._nActiveBindings,s=e[r];t._cacheIndex=r,e[r]=t,s._cacheIndex=i,e[i]=s}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return i===void 0&&(i=new Qk(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,r=--this._nActiveControlInterpolants,s=e[r];t.__cacheIndex=r,e[r]=t,s.__cacheIndex=i,e[i]=s}clipAction(t,e,i){const r=e||this._root,s=r.uuid;let o=typeof t=="string"?HE.findByName(r,t):t;const a=o!==null?o.uuid:t,c=this._actionsByClip[a];let f=null;if(i===void 0&&(o!==null?i=o.blendMode:i=dw),c!==void 0){const m=c.actionByRoot[s];if(m!==void 0&&m.blendMode===i)return m;f=c.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const d=new J7(this,o,e,i);return this._bindAction(d,f),this._addInactiveAction(d,a,s),d}existingAction(t,e){const i=e||this._root,r=i.uuid,s=typeof t=="string"?HE.findByName(i,t):t,o=s?s.uuid:t,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,r=this.time+=t,s=Math.sign(t),o=this._accuIndex^=1;for(let f=0;f!==i;++f)e[f]._update(r,t,s,o);const a=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)a[f].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const f=o[a];this._deactivateAction(f);const d=f._cacheIndex,m=e[e.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,m._cacheIndex=d,e[d]=m,e.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,c=a[e];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[e];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){const i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}Q7.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class t$ extends gd{constructor(t,e,i=1){super(t,e),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}t$.prototype.isInstancedInterleavedBuffer=!0;class ZE{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Oi(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class e$ extends Ze{constructor(t){super(),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}e$.prototype.isImmediateRenderObject=!0;const fa=new st,Em=new ve,I_=new ve;class n$ extends Tw{constructor(t){const e=l2(t),i=new nn,r=[],s=[],o=new he(0,0,1),a=new he(0,1,0);for(let f=0;f<e.length;f++){const d=e[f];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ei(r,3)),i.setAttribute("color",new ei(s,3));const c=new Vc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,r=i.getAttribute("position");I_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<e.length;s++){const a=e[s];a.parent&&a.parent.isBone&&(Em.multiplyMatrices(I_,a.matrixWorld),fa.setFromMatrixPosition(Em),r.setXYZ(o,fa.x,fa.y,fa.z),Em.multiplyMatrices(I_,a.parent.matrixWorld),fa.setFromMatrixPosition(Em),r.setXYZ(o+1,fa.x,fa.y,fa.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function l2(n){const t=[];n&&n.isBone&&t.push(n);for(let e=0;e<n.children.length;e++)t.push.apply(t,l2(n.children[e]));return t}class u2 extends Tw{constructor(t=10,e=10,i=4473924,r=8947848){i=new he(i),r=new he(r);const s=e/2,o=t/e,a=t/2,c=[],f=[];for(let y=0,v=0,w=-a;y<=e;y++,w+=o){c.push(-a,0,w,a,0,w),c.push(w,0,-a,w,0,a);const S=y===s?i:r;S.toArray(f,v),v+=3,S.toArray(f,v),v+=3,S.toArray(f,v),v+=3,S.toArray(f,v),v+=3}const d=new nn;d.setAttribute("position",new ei(c,3)),d.setAttribute("color",new ei(f,3));const m=new Vc({vertexColors:!0,toneMapped:!1});super(d,m),this.type="GridHelper"}}const i$=new Float32Array(1);new Int32Array(i$.buffer);Zr.create=function(n,t){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Zr.prototype),n.prototype.constructor=n,n.prototype.getPoint=t,n};qx.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};u2.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};n$.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};ka.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),D7.extractUrlBase(n)};ka.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};qr.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};qr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};qr.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};qr.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};qr.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};Fc.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Vg.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};ai.prototype.flattenToArrayOffset=function(n,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,t)};ai.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};ai.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};ai.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};ai.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};ai.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};ve.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};ve.prototype.flattenToArrayOffset=function(n,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,t)};ve.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new st().setFromMatrixColumn(this,3)};ve.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};ve.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};ve.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};ve.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};ve.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};ve.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};ve.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};ve.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};ve.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};ve.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};ve.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};ve.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};ve.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};ve.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};ve.prototype.makeFrustum=function(n,t,e,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,t,i,e,r,s)};ve.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Ds.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};Si.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};Si.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Fl.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Fl.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};Fl.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};Wn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};Wn.prototype.barycoordFromPoint=function(n,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,t)};Wn.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};Wn.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};Wn.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};Wn.barycoordFromPoint=function(n,t,e,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Wn.getBarycoord(n,t,e,i,r)};Wn.normal=function(n,t,e,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Wn.getNormal(n,t,e,i)};Gg.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};Gg.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new zl(this,n)};Gg.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Lw(this,n)};Zt.prototype.fromAttribute=function(n,t,e){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,t,e)};Zt.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};Zt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};st.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};st.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};st.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};st.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};st.prototype.getColumnFromMatrix=function(n,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,n)};st.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};st.prototype.fromAttribute=function(n,t,e){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,t,e)};st.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};st.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};en.prototype.fromAttribute=function(n,t,e){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,t,e)};en.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Ze.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};Ze.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Ze.prototype.translate=function(n,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,n)};Ze.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Ze.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(Ze.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Fi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Fi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Ej},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Uk.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Kn.prototype.setLens=function(n,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(n)};Object.defineProperties(Ws.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(Gn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===ug},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(ug)}}});Gn.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?ug:Yf),this};Gn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Gn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};nn.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};nn.prototype.addAttribute=function(n,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Gn(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(n,t)};nn.prototype.addDrawCall=function(n,t,e){e!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,t)};nn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};nn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};nn.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};nn.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(nn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});gd.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?ug:Yf),this};gd.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};zl.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};zl.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};zl.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Sw.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Ti.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new he}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===lk}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Rl.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});Qe.prototype.clearTarget=function(n,t,e,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(t,e,i)};Qe.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};Qe.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Qe.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Qe.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Qe.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Qe.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Qe.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Qe.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Qe.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Qe.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Qe.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Qe.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Qe.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Qe.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};Qe.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Qe.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Qe.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Qe.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Qe.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Qe.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Qe.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Qe.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Qe.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Qe.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Qe.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?zg:tr}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Fk.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(js.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});U7.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return new z7().load(n,function(i){t.setBuffer(i)}),this};_w.prototype.updateCubeMap=function(n,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,t)};_w.prototype.clear=function(n,t,e,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,t,e,i)};Nc.crossOrigin=void 0;Nc.loadTexture=function(n,t,e,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new C7;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,e,void 0,i);return t&&(s.mapping=t),s};Nc.loadTextureCube=function(n,t,e,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new P7;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,e,void 0,i);return t&&(s.mapping=t),s};Nc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Nc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ok}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ok);var r$=Object.defineProperty,s$=(n,t,e)=>t in n?r$(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,o$=(n,t,e)=>(s$(n,t+"",e),e);class a${constructor(){o$(this,"_listeners")}addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const r=this._listeners[t];if(r!==void 0){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const i=this._listeners[t.type];if(i!==void 0){t.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}var l$=Object.defineProperty,u$=(n,t,e)=>t in n?l$(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,ge=(n,t,e)=>(u$(n,typeof t!="symbol"?t+"":t,e),e);const Pm=new Fl,qE=new Ds,c$=Math.cos(70*(Math.PI/180)),XE=(n,t)=>(n%t+t)%t;class h$ extends a${constructor(t,e){super(),ge(this,"object"),ge(this,"domElement"),ge(this,"enabled",!0),ge(this,"target",new st),ge(this,"minDistance",0),ge(this,"maxDistance",1/0),ge(this,"minZoom",0),ge(this,"maxZoom",1/0),ge(this,"minPolarAngle",0),ge(this,"maxPolarAngle",Math.PI),ge(this,"minAzimuthAngle",-1/0),ge(this,"maxAzimuthAngle",1/0),ge(this,"enableDamping",!1),ge(this,"dampingFactor",.05),ge(this,"enableZoom",!0),ge(this,"zoomSpeed",1),ge(this,"enableRotate",!0),ge(this,"rotateSpeed",1),ge(this,"enablePan",!0),ge(this,"panSpeed",1),ge(this,"screenSpacePanning",!0),ge(this,"keyPanSpeed",7),ge(this,"zoomToCursor",!1),ge(this,"autoRotate",!1),ge(this,"autoRotateSpeed",2),ge(this,"reverseOrbit",!1),ge(this,"reverseHorizontalOrbit",!1),ge(this,"reverseVerticalOrbit",!1),ge(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ge(this,"mouseButtons",{LEFT:Eu.ROTATE,MIDDLE:Eu.DOLLY,RIGHT:Eu.PAN}),ge(this,"touches",{ONE:Pu.ROTATE,TWO:Pu.DOLLY_PAN}),ge(this,"target0"),ge(this,"position0"),ge(this,"zoom0"),ge(this,"_domElementKeyEvents",null),ge(this,"getPolarAngle"),ge(this,"getAzimuthalAngle"),ge(this,"setPolarAngle"),ge(this,"setAzimuthalAngle"),ge(this,"getDistance"),ge(this,"getZoomScale"),ge(this,"listenToKeyEvents"),ge(this,"stopListenToKeyEvents"),ge(this,"saveState"),ge(this,"reset"),ge(this,"update"),ge(this,"connect"),ge(this,"dispose"),ge(this,"dollyIn"),ge(this,"dollyOut"),ge(this,"getScale"),ge(this,"setScale"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=ut=>{let Bt=XE(ut,2*Math.PI),ee=d.phi;ee<0&&(ee+=2*Math.PI),Bt<0&&(Bt+=2*Math.PI);let Ae=Math.abs(Bt-ee);2*Math.PI-Ae<Ae&&(Bt<ee?Bt+=2*Math.PI:ee+=2*Math.PI),m.phi=Bt-ee,i.update()},this.setAzimuthalAngle=ut=>{let Bt=XE(ut,2*Math.PI),ee=d.theta;ee<0&&(ee+=2*Math.PI),Bt<0&&(Bt+=2*Math.PI);let Ae=Math.abs(Bt-ee);2*Math.PI-Ae<Ae&&(Bt<ee?Bt+=2*Math.PI:ee+=2*Math.PI),m.theta=Bt-ee,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ut=>{ut.addEventListener("keydown",Pt),this._domElementKeyEvents=ut},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Pt),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),c=a.NONE},this.update=(()=>{const ut=new st,Bt=new st(0,1,0),ee=new Si().setFromUnitVectors(t.up,Bt),Ae=ee.clone().invert(),tn=new st,En=new Si,Ln=2*Math.PI;return function(){const gs=i.object.position;ee.setFromUnitVectors(t.up,Bt),Ae.copy(ee).invert(),ut.copy(gs).sub(i.target),ut.applyQuaternion(ee),d.setFromVector3(ut),i.autoRotate&&c===a.NONE&&Y(tt()),i.enableDamping?(d.theta+=m.theta*i.dampingFactor,d.phi+=m.phi*i.dampingFactor):(d.theta+=m.theta,d.phi+=m.phi);let ni=i.minAzimuthAngle,ui=i.maxAzimuthAngle;isFinite(ni)&&isFinite(ui)&&(ni<-Math.PI?ni+=Ln:ni>Math.PI&&(ni-=Ln),ui<-Math.PI?ui+=Ln:ui>Math.PI&&(ui-=Ln),ni<=ui?d.theta=Math.max(ni,Math.min(ui,d.theta)):d.theta=d.theta>(ni+ui)/2?Math.max(ni,d.theta):Math.min(ui,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(v,i.dampingFactor):i.target.add(v),i.zoomToCursor&&H||i.object.isOrthographicCamera?d.radius=z(d.radius):d.radius=z(d.radius*y),ut.setFromSpherical(d),ut.applyQuaternion(Ae),gs.copy(i.target).add(ut),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(m.theta*=1-i.dampingFactor,m.phi*=1-i.dampingFactor,v.multiplyScalar(1-i.dampingFactor)):(m.set(0,0,0),v.set(0,0,0));let Pi=!1;if(i.zoomToCursor&&H){let ir=null;if(i.object instanceof Kn&&i.object.isPerspectiveCamera){const ci=ut.length();ir=z(ci*y);const Ci=ci-ir;i.object.position.addScaledVector(D,Ci),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const ci=new st(I.x,I.y,0);ci.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix(),Pi=!0;const Ci=new st(I.x,I.y,0);Ci.unproject(i.object),i.object.position.sub(Ci).add(ci),i.object.updateMatrixWorld(),ir=ut.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;ir!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(ir).add(i.object.position):(Pm.origin.copy(i.object.position),Pm.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Pm.direction))<c$?t.lookAt(i.target):(qE.setFromNormalAndCoplanarPoint(i.object.up,i.target),Pm.intersectPlane(qE,i.target))))}else i.object instanceof hc&&i.object.isOrthographicCamera&&(Pi=y!==1,Pi&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix()));return y=1,H=!1,Pi||tn.distanceToSquared(i.object.position)>f||8*(1-En.dot(i.object.quaternion))>f?(i.dispatchEvent(r),tn.copy(i.object.position),En.copy(i.object.quaternion),Pi=!1,!0):!1}})(),this.connect=ut=>{i.domElement=ut,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Xt),i.domElement.addEventListener("pointerdown",Kt),i.domElement.addEventListener("pointercancel",Jt),i.domElement.addEventListener("wheel",q)},this.dispose=()=>{var ut,Bt,ee,Ae,tn,En;i.domElement&&(i.domElement.style.touchAction="auto"),(ut=i.domElement)==null||ut.removeEventListener("contextmenu",Xt),(Bt=i.domElement)==null||Bt.removeEventListener("pointerdown",Kt),(ee=i.domElement)==null||ee.removeEventListener("pointercancel",Jt),(Ae=i.domElement)==null||Ae.removeEventListener("wheel",q),(tn=i.domElement)==null||tn.ownerDocument.removeEventListener("pointermove",re),(En=i.domElement)==null||En.ownerDocument.removeEventListener("pointerup",Jt),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Pt)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=a.NONE;const f=1e-6,d=new ZE,m=new ZE;let y=1;const v=new st,w=new Zt,S=new Zt,P=new Zt,b=new Zt,M=new Zt,R=new Zt,O=new Zt,k=new Zt,N=new Zt,D=new st,I=new Zt;let H=!1;const W=[],U={};function tt(){return 2*Math.PI/60/60*i.autoRotateSpeed}function K(){return Math.pow(.95,i.zoomSpeed)}function Y(ut){i.reverseOrbit||i.reverseHorizontalOrbit?m.theta+=ut:m.theta-=ut}function rt(ut){i.reverseOrbit||i.reverseVerticalOrbit?m.phi+=ut:m.phi-=ut}const at=(()=>{const ut=new st;return function(ee,Ae){ut.setFromMatrixColumn(Ae,0),ut.multiplyScalar(-ee),v.add(ut)}})(),it=(()=>{const ut=new st;return function(ee,Ae){i.screenSpacePanning===!0?ut.setFromMatrixColumn(Ae,1):(ut.setFromMatrixColumn(Ae,0),ut.crossVectors(i.object.up,ut)),ut.multiplyScalar(ee),v.add(ut)}})(),J=(()=>{const ut=new st;return function(ee,Ae){const tn=i.domElement;if(tn&&i.object instanceof Kn&&i.object.isPerspectiveCamera){const En=i.object.position;ut.copy(En).sub(i.target);let Ln=ut.length();Ln*=Math.tan(i.object.fov/2*Math.PI/180),at(2*ee*Ln/tn.clientHeight,i.object.matrix),it(2*Ae*Ln/tn.clientHeight,i.object.matrix)}else tn&&i.object instanceof hc&&i.object.isOrthographicCamera?(at(ee*(i.object.right-i.object.left)/i.object.zoom/tn.clientWidth,i.object.matrix),it(Ae*(i.object.top-i.object.bottom)/i.object.zoom/tn.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function pt(ut){i.object instanceof Kn&&i.object.isPerspectiveCamera||i.object instanceof hc&&i.object.isOrthographicCamera?y=ut:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function F(ut){pt(y/ut)}function G(ut){pt(y*ut)}function lt(ut){if(!i.zoomToCursor||!i.domElement)return;H=!0;const Bt=i.domElement.getBoundingClientRect(),ee=ut.clientX-Bt.left,Ae=ut.clientY-Bt.top,tn=Bt.width,En=Bt.height;I.x=ee/tn*2-1,I.y=-(Ae/En)*2+1,D.set(I.x,I.y,1).unproject(i.object).sub(i.object.position).normalize()}function z(ut){return Math.max(i.minDistance,Math.min(i.maxDistance,ut))}function mt(ut){w.set(ut.clientX,ut.clientY)}function _t(ut){lt(ut),O.set(ut.clientX,ut.clientY)}function nt(ut){b.set(ut.clientX,ut.clientY)}function Ot(ut){S.set(ut.clientX,ut.clientY),P.subVectors(S,w).multiplyScalar(i.rotateSpeed);const Bt=i.domElement;Bt&&(Y(2*Math.PI*P.x/Bt.clientHeight),rt(2*Math.PI*P.y/Bt.clientHeight)),w.copy(S),i.update()}function At(ut){k.set(ut.clientX,ut.clientY),N.subVectors(k,O),N.y>0?F(K()):N.y<0&&G(K()),O.copy(k),i.update()}function kt(ut){M.set(ut.clientX,ut.clientY),R.subVectors(M,b).multiplyScalar(i.panSpeed),J(R.x,R.y),b.copy(M),i.update()}function Ft(ut){lt(ut),ut.deltaY<0?G(K()):ut.deltaY>0&&F(K()),i.update()}function jt(ut){let Bt=!1;switch(ut.code){case i.keys.UP:J(0,i.keyPanSpeed),Bt=!0;break;case i.keys.BOTTOM:J(0,-i.keyPanSpeed),Bt=!0;break;case i.keys.LEFT:J(i.keyPanSpeed,0),Bt=!0;break;case i.keys.RIGHT:J(-i.keyPanSpeed,0),Bt=!0;break}Bt&&(ut.preventDefault(),i.update())}function bt(){if(W.length==1)w.set(W[0].pageX,W[0].pageY);else{const ut=.5*(W[0].pageX+W[1].pageX),Bt=.5*(W[0].pageY+W[1].pageY);w.set(ut,Bt)}}function Rt(){if(W.length==1)b.set(W[0].pageX,W[0].pageY);else{const ut=.5*(W[0].pageX+W[1].pageX),Bt=.5*(W[0].pageY+W[1].pageY);b.set(ut,Bt)}}function Dt(){const ut=W[0].pageX-W[1].pageX,Bt=W[0].pageY-W[1].pageY,ee=Math.sqrt(ut*ut+Bt*Bt);O.set(0,ee)}function Wt(){i.enableZoom&&Dt(),i.enablePan&&Rt()}function It(){i.enableZoom&&Dt(),i.enableRotate&&bt()}function X(ut){if(W.length==1)S.set(ut.pageX,ut.pageY);else{const ee=xn(ut),Ae=.5*(ut.pageX+ee.x),tn=.5*(ut.pageY+ee.y);S.set(Ae,tn)}P.subVectors(S,w).multiplyScalar(i.rotateSpeed);const Bt=i.domElement;Bt&&(Y(2*Math.PI*P.x/Bt.clientHeight),rt(2*Math.PI*P.y/Bt.clientHeight)),w.copy(S)}function $(ut){if(W.length==1)M.set(ut.pageX,ut.pageY);else{const Bt=xn(ut),ee=.5*(ut.pageX+Bt.x),Ae=.5*(ut.pageY+Bt.y);M.set(ee,Ae)}R.subVectors(M,b).multiplyScalar(i.panSpeed),J(R.x,R.y),b.copy(M)}function wt(ut){const Bt=xn(ut),ee=ut.pageX-Bt.x,Ae=ut.pageY-Bt.y,tn=Math.sqrt(ee*ee+Ae*Ae);k.set(0,tn),N.set(0,Math.pow(k.y/O.y,i.zoomSpeed)),F(N.y),O.copy(k)}function Lt(ut){i.enableZoom&&wt(ut),i.enablePan&&$(ut)}function $t(ut){i.enableZoom&&wt(ut),i.enableRotate&&X(ut)}function Kt(ut){var Bt,ee;i.enabled!==!1&&(W.length===0&&((Bt=i.domElement)==null||Bt.ownerDocument.addEventListener("pointermove",re),(ee=i.domElement)==null||ee.ownerDocument.addEventListener("pointerup",Jt)),ue(ut),ut.pointerType==="touch"?St(ut):se(ut))}function re(ut){i.enabled!==!1&&(ut.pointerType==="touch"?zt(ut):ft(ut))}function Jt(ut){var Bt,ee,Ae;ke(ut),W.length===0&&((Bt=i.domElement)==null||Bt.releasePointerCapture(ut.pointerId),(ee=i.domElement)==null||ee.ownerDocument.removeEventListener("pointermove",re),(Ae=i.domElement)==null||Ae.ownerDocument.removeEventListener("pointerup",Jt)),i.dispatchEvent(o),c=a.NONE}function se(ut){let Bt;switch(ut.button){case 0:Bt=i.mouseButtons.LEFT;break;case 1:Bt=i.mouseButtons.MIDDLE;break;case 2:Bt=i.mouseButtons.RIGHT;break;default:Bt=-1}switch(Bt){case Eu.DOLLY:if(i.enableZoom===!1)return;_t(ut),c=a.DOLLY;break;case Eu.ROTATE:if(ut.ctrlKey||ut.metaKey||ut.shiftKey){if(i.enablePan===!1)return;nt(ut),c=a.PAN}else{if(i.enableRotate===!1)return;mt(ut),c=a.ROTATE}break;case Eu.PAN:if(ut.ctrlKey||ut.metaKey||ut.shiftKey){if(i.enableRotate===!1)return;mt(ut),c=a.ROTATE}else{if(i.enablePan===!1)return;nt(ut),c=a.PAN}break;default:c=a.NONE}c!==a.NONE&&i.dispatchEvent(s)}function ft(ut){if(i.enabled!==!1)switch(c){case a.ROTATE:if(i.enableRotate===!1)return;Ot(ut);break;case a.DOLLY:if(i.enableZoom===!1)return;At(ut);break;case a.PAN:if(i.enablePan===!1)return;kt(ut);break}}function q(ut){i.enabled===!1||i.enableZoom===!1||c!==a.NONE&&c!==a.ROTATE||(ut.preventDefault(),i.dispatchEvent(s),Ft(ut),i.dispatchEvent(o))}function Pt(ut){i.enabled===!1||i.enablePan===!1||jt(ut)}function St(ut){switch(Fe(ut),W.length){case 1:switch(i.touches.ONE){case Pu.ROTATE:if(i.enableRotate===!1)return;bt(),c=a.TOUCH_ROTATE;break;case Pu.PAN:if(i.enablePan===!1)return;Rt(),c=a.TOUCH_PAN;break;default:c=a.NONE}break;case 2:switch(i.touches.TWO){case Pu.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Wt(),c=a.TOUCH_DOLLY_PAN;break;case Pu.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;It(),c=a.TOUCH_DOLLY_ROTATE;break;default:c=a.NONE}break;default:c=a.NONE}c!==a.NONE&&i.dispatchEvent(s)}function zt(ut){switch(Fe(ut),c){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;X(ut),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;$(ut),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Lt(ut),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;$t(ut),i.update();break;default:c=a.NONE}}function Xt(ut){i.enabled!==!1&&ut.preventDefault()}function ue(ut){W.push(ut)}function ke(ut){delete U[ut.pointerId];for(let Bt=0;Bt<W.length;Bt++)if(W[Bt].pointerId==ut.pointerId){W.splice(Bt,1);return}}function Fe(ut){let Bt=U[ut.pointerId];Bt===void 0&&(Bt=new Zt,U[ut.pointerId]=Bt),Bt.set(ut.pageX,ut.pageY)}function xn(ut){const Bt=ut.pointerId===W[0].pointerId?W[1]:W[0];return U[Bt.pointerId]}this.dollyIn=(ut=K())=>{G(ut),i.update()},this.dollyOut=(ut=K())=>{F(ut),i.update()},this.getScale=()=>y,this.setScale=ut=>{pt(ut),i.update()},this.getZoomScale=()=>K(),e!==void 0&&this.connect(e),this.update()}}function f$(n,t,e,i=0,r=0,s="default"){const o=n.current;if(!o)return;for(;o.firstChild;)o.removeChild(o.firstChild);const a=new Sw;a.background=new he(1120295);const c=o.clientWidth||600,f=o.clientHeight||400,d=new Kn(45,c/f,.1,1e4);d.position.set(0,-200,150);const m=new Qe({canvas:o,antialias:!0});m.setSize(c,f),a.add(new o2(16777215,.6));const y=new s2(16777215,.8);y.position.set(100,100,200),a.add(y);const v=O=>new st(O.lon,O.lat,-(O.depth||0)),w=t.map(v),S=e?.map(v)||[];let P=null;if(s==="subduction"){const O=new Gg(w.map(H=>new Zt(H.x,H.y))),k=S.length>0?Math.max(...S.map(H=>-H.z)):50,N=new zl(O,{depth:k,bevelEnabled:!1}),D=new Jk({color:3900150,opacity:.7,transparent:!0,side:kl}),I=new Fi(N,D);I.rotation.x=Qv.degToRad(-90),I.rotation.z=Qv.degToRad(r||0),I.rotation.y=Qv.degToRad(i||0),a.add(I),P=I}else{const O=new Vc({color:2282478}),k=new Wx(new nn().setFromPoints(w),O);if(a.add(k),P=k,S.length>0){const N=new Wx(new nn().setFromPoints(S),O);a.add(N)}}const b=new u2(200,20);a.add(b);const M=new h$(d,m.domElement);if(M.enableDamping=!0,M.target.set(0,0,0),P){const O=new qr().setFromObject(P),k=new st;O.getCenter(k),M.target.copy(k),d.position.set(k.x+200,k.y-200,k.z+150)}window.addEventListener("resize",()=>{const O=o.clientWidth||600,k=o.clientHeight||400;d.aspect=O/k,d.updateProjectionMatrix(),m.setSize(O,k)});function R(){requestAnimationFrame(R),M.update(),m.render(a,d)}R()}function Ow({title:n,children:t,onClose:e,width:i="w-[600px]"}){return B.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:B.jsxs("div",{className:`bg-[var(--card)] text-[var(--text)] rounded-xl shadow-xl p-6 max-h-[90vh] overflow-y-auto transition-colors ${i}`,children:[B.jsxs("div",{className:"flex justify-between items-center mb-4",children:[B.jsx("h2",{className:"text-lg font-bold",children:n}),B.jsx("button",{onClick:e,className:"text-[var(--text)] hover:opacity-70 text-xl font-bold",children:"✕"})]}),B.jsx("div",{children:t})]})})}function d$({onClose:n,onSaved:t,initialData:e}){const[i,r]=Q.useState({name:"",mechanism:"",minMag:"",maxMag:"",coordsUpText:"",coordsDownText:"",gr_beta:"",gr_rate:"",gr_weight:"",dipAngle:"",strikeAngle:""}),[s,o]=Q.useState(!1),[a,c]=Q.useState([]),[f,d]=Q.useState([]),[m,y]=Q.useState(!1),[v,w]=Q.useState([]),S=Q.useRef(null);Q.useEffect(()=>{fetch("https://sha-api-production.up.railway.app/api/v1/mechanism/").then(k=>k.json()).then(k=>w(k)).catch(k=>console.error("Gagal load mechanisms:",k))},[]),Q.useEffect(()=>{e&&r({name:e.name||"",mechanism:e.mechanism||"",minMag:e.min_mag??"",maxMag:e.max_mag??"",coordsUpText:(e.coords_up||[]).map(k=>`${k.lat} ${k.lon} ${k.depth}`).join(`
`),coordsDownText:(e.coords_down||[]).map(k=>`${k.lat} ${k.lon} ${k.depth}`).join(`
`),gr_beta:e.gr_beta??"",gr_rate:e.gr_rate??"",gr_weight:e.gr_weight??"",dipAngle:e.dipAngle??"",strikeAngle:e.strikeAngle??""})},[e]),Q.useEffect(()=>{m&&a.length&&f.length&&f$(S,a,f,i.dipAngle,i.strikeAngle,i.mechanism)},[m,a,f,i.dipAngle,i.strikeAngle,i.mechanism]);function P(k){return(k||"").split(`
`).map(N=>N.trim()).filter(N=>N.length>0).map(N=>{const D=N.split(/[\s,]+/);return{lat:parseFloat(D[0])||0,lon:parseFloat(D[1])||0,depth:parseFloat(D[2])||0}})}function b(k){r({...i,[k.target.name]:k.target.value})}function M(){const k=P(i.coordsUpText),N=P(i.coordsDownText);c(k),d(N),y(!0)}function R({coords:k}){const N=Z0();if(k.length>0){const D=kc.latLngBounds(k.map(I=>[I.lat,I.lon]));N.fitBounds(D,{padding:[30,30]})}return null}async function O(k){k.preventDefault();const N=P(i.coordsUpText),D=P(i.coordsDownText),I={name:i.name,mechanism:i.mechanism,min_mag:i.minMag?parseFloat(i.minMag):void 0,max_mag:i.maxMag?parseFloat(i.maxMag):void 0,coords_up:N,coords_down:D,gr_beta:i.gr_beta?parseFloat(i.gr_beta):void 0,gr_rate:i.gr_rate?parseFloat(i.gr_rate):void 0,gr_weight:i.gr_weight?parseFloat(i.gr_weight):void 0,dipAngle:i.dipAngle?parseFloat(i.dipAngle):void 0,strikeAngle:i.strikeAngle?parseFloat(i.strikeAngle):void 0};try{o(!0);const H=e?`https://sha-api-production.up.railway.app/api/v1/datasource/${e.id}`:"https://sha-api-production.up.railway.app/api/v1/datasource/",U=await fetch(H,{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!U.ok){const K=await U.json();throw new Error(K.detail||"Gagal simpan datasource")}const tt=await U.json();t(tt),n()}catch(H){alert(H.message),console.error("Payload gagal:",I,H)}finally{o(!1)}}return B.jsx(Ow,{title:e?"Edit Sumber Gempa":"Tambah Sumber Gempa",onClose:n,width:"w-[800px]",children:B.jsxs("form",{onSubmit:O,className:"space-y-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium",children:"Source Name"}),B.jsx("input",{type:"text",name:"name",value:i.name,onChange:b,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]",required:!0})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium",children:"Mechanism"}),B.jsxs("select",{name:"mechanism",value:i.mechanism,onChange:b,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]",required:!0,children:[B.jsx("option",{value:"",children:"-- pilih mechanism --"}),v.map(k=>B.jsx("option",{value:k.id,children:k.label},k.id))]})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium",children:"Min Magnitude"}),B.jsx("input",{type:"number",name:"minMag",value:i.minMag,onChange:b,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]"})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium",children:"Max Magnitude"}),B.jsx("input",{type:"number",name:"maxMag",value:i.maxMag,onChange:b,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]"})]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium mb-2",children:"Coordinates Up (Lat, Lon, Depth)"}),B.jsx("textarea",{rows:5,value:i.coordsUpText||"",onChange:k=>r({...i,coordsUpText:k.target.value}),placeholder:`lat lon depth
-6.87 107.61 0
-6.90 107.65 10`,className:"w-full border border-[var(--color-border)] px-2 py-1 rounded-lg font-mono text-sm bg-[var(--bg)] text-[var(--text)]"})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium mb-2",children:"Coordinates Down (Lat, Lon, Depth)"}),B.jsx("textarea",{rows:5,value:i.coordsDownText||"",onChange:k=>r({...i,coordsDownText:k.target.value}),placeholder:`lat lon depth
-6.95 107.70 15
-7.00 107.75 20`,className:"w-full border border-[var(--color-border)] px-2 py-1 rounded-lg font-mono text-sm bg-[var(--bg)] text-[var(--text)]"})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium",children:"Dip Angle"}),B.jsx("input",{type:"number",name:"dipAngle",value:i.dipAngle,onChange:b,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]",placeholder:"Enter dip angle in degrees"})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium",children:"Strike Angle"}),B.jsx("input",{type:"number",name:"strikeAngle",value:i.strikeAngle,onChange:b,className:"w-full border border-[var(--color-border)] px-3 py-2 rounded-lg bg-[var(--bg)] text-[var(--text)]",placeholder:"Enter strike angle in degrees"})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium mb-2",children:"Gutenberg-Richter"}),B.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs",children:"Beta"}),B.jsx("input",{type:"number",step:"0.01",name:"gr_beta",value:i.gr_beta,onChange:b,className:"w-full border border-[var(--color-border)] px-2 py-1 rounded-lg bg-[var(--bg)] text-[var(--text)]"})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs",children:"Rate"}),B.jsx("input",{type:"number",step:"0.01",name:"gr_rate",value:i.gr_rate,onChange:b,className:"w-full border border-[var(--color-border)] px-2 py-1 rounded-lg bg-[var(--bg)] text-[var(--text)]"})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs",children:"Weight"}),B.jsx("input",{type:"number",step:"0.01",name:"gr_weight",value:i.gr_weight,onChange:b,className:"w-full border border-[var(--color-border)] px-2 py-1 rounded-lg bg-[var(--bg)] text-[var(--text)]"})]})]})]}),B.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600",children:"Preview Coordinates"}),m&&B.jsx("div",{className:"mt-4 h-64 border border-[var(--color-border)] rounded-lg overflow-hidden",children:B.jsxs(Vf,{center:[-6.9,107.6],zoom:9,className:"h-full w-full",children:[B.jsx(Uf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),B.jsx(R,{coords:[...a,...f]}),a.length>0&&f.length>0&&B.jsx($A,{positions:[...a.map(k=>[k.lat,k.lon]),...f.slice().reverse().map(k=>[k.lat,k.lon])],color:"purple",fillColor:"purple",fillOpacity:.2}),a.length>0&&B.jsxs(B.Fragment,{children:[B.jsx(Xm,{positions:a.map(k=>[k.lat,k.lon]),color:"blue"}),a.map((k,N)=>B.jsx(ya,{position:[k.lat,k.lon],children:B.jsxs(Ml,{children:["Up ",N+1,": Depth ",k.depth," km"]})},`up-${N}`))]}),f.length>0&&B.jsxs(B.Fragment,{children:[B.jsx(Xm,{positions:f.map(k=>[k.lat,k.lon]),color:"red"}),f.map((k,N)=>B.jsx(ya,{position:[k.lat,k.lon],children:B.jsxs(Ml,{children:["Down ",N+1,": Depth ",k.depth," km"]})},`down-${N}`))]})]})}),B.jsx("div",{className:"preview-container",children:B.jsx("canvas",{ref:S,className:"w-full h-96 rounded-lg shadow-lg"})}),B.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[B.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-[var(--hover)] text-[var(--text)] hover:opacity-80",children:"Batal"}),B.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600",children:s?"Menyimpan...":e?"Update":"Simpan"})]})]})})}function p$({datasources:n,setDatasources:t}){const[e,i]=Q.useState(!1),[r,s]=Q.useState(null),[o,a]=Q.useState(null),c=m=>{t(y=>[...y,m]),i(!1),s(null)},f=m=>{t(y=>y.map(v=>v.id===m.id?m:v)),i(!1),s(null)},d=m=>{confirm("Apakah yakin ingin menghapus datasource ini?")&&t(y=>y.filter(v=>v.id!==m))};return B.jsxs("div",{className:"w-full p-6",children:[B.jsxs("div",{className:"flex justify-between items-center mb-4",children:[B.jsx("h2",{className:"text-lg font-bold",children:"List Sumber Gempa"}),B.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",onClick:()=>{s(null),i(!0)},children:"+ Tambah Sumber Gempa"})]}),n.length===0?B.jsx("p",{className:"text-[var(--text)] opacity-60",children:"Belum ada sumber gempa."}):B.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(m=>B.jsxs("div",{className:"border rounded-xl p-4 shadow-sm bg-[var(--card)] text-[var(--text)] hover:shadow-md transition-colors duration-300",style:{borderColor:"var(--color-border)"},children:[B.jsx("h3",{className:"font-semibold text-lg mb-1",children:m.name}),B.jsxs("p",{className:"text-xs opacity-60 mb-2",children:["ID: ",m.id]}),B.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-200 rounded-full mb-2",children:m.mechanism||"Unknown"}),B.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[B.jsxs("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200 rounded-full",children:["Min Mag: ",m.min_mag??"-"]}),B.jsxs("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200 rounded-full",children:["Max Mag: ",m.max_mag??"-"]})]}),B.jsxs("div",{className:"text-sm mb-3",children:[B.jsx("p",{className:"font-medium",children:"GMPEs:"}),m.gmpe_weights?.length>0?B.jsx("ul",{className:"list-disc list-inside text-xs opacity-80",children:m.gmpe_weights.map((y,v)=>B.jsxs("li",{children:[y.gmpe_name||y.gmpe_id," (",y.weight,")"]},v))}):B.jsx("p",{className:"text-xs opacity-60",children:"Belum ada GMPE"})]}),B.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[B.jsx("button",{className:"flex-1 px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600",onClick:()=>a(m),children:"Lihat Peta"}),B.jsx("button",{className:"flex-1 px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600",onClick:()=>{s(m),i(!0)},children:"Edit"}),B.jsx("button",{className:"flex-1 px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",onClick:()=>d(m.id),children:"Hapus"})]})]},m.id))}),e&&B.jsx(d$,{onClose:()=>{i(!1),s(null)},onSaved:r?f:c,initialData:r}),o&&B.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:B.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl w-[700px] h-[500px] relative",children:[B.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Preview Peta - ",o.name]}),B.jsxs(Vf,{center:[o.coords_up?.[0]?.lat||-6.9,o.coords_up?.[0]?.lon||107.6],zoom:8,className:"h-[400px] w-full",children:[B.jsx(Uf,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),o.coords_up?.length>0&&o.coords_down?.length>0&&B.jsx($A,{positions:[...o.coords_up.map(m=>[m.lat,m.lon]),...o.coords_down.slice().reverse().map(m=>[m.lat,m.lon])],color:"purple",fillColor:"purple",fillOpacity:.2}),o.coords_up?.length>0&&B.jsx(Xm,{positions:o.coords_up.map(m=>[m.lat,m.lon]),color:"blue"}),o.coords_down?.length>0&&B.jsx(Xm,{positions:o.coords_down.map(m=>[m.lat,m.lon]),color:"red"}),o.coords_up?.map((m,y)=>B.jsx(ya,{position:[m.lat,m.lon],children:B.jsxs(Ml,{children:["Up ",y+1,": Depth ",m.depth," km"]})},`up-${y}`)),o.coords_down?.map((m,y)=>B.jsx(ya,{position:[m.lat,m.lon],children:B.jsxs(Ml,{children:["Down ",y+1,": Depth ",m.depth," km"]})},`down-${y}`))]}),B.jsx("button",{className:"absolute top-2 right-2 px-3 py-1 bg-gray-300 rounded hover:bg-gray-400",onClick:()=>a(null),children:"✕"})]})})]})}function m$(){const[n,t]=Q.useState([]),[e,i]=Q.useState(!0),[r,s]=Q.useState(null),[o,a]=Q.useState(null),c=("https://sha-api-production.up.railway.app/api/v1".startsWith("http"),"https://sha-api-production.up.railway.app/api/v1");return Q.useEffect(()=>{async function f(){try{const d=`${c}/gmpe`;console.log("📡 Fetching GMPE dari:",d);const m=await fetch(d,{method:"GET"});if(!m.ok)throw new Error(`Fetch status: ${m.status}`);const y=await m.json();t(Array.isArray(y)?y:y.data||[])}catch(d){console.error("❌ Fetch GMPE error:",d),s(d.message||"Gagal fetch GMPE")}finally{i(!1)}}f()},[c]),e?B.jsx("div",{className:"p-4",children:"⏳ Memuat data GMPE..."}):r?B.jsxs("div",{className:"p-4 text-red-500",children:["❌ ",r]}):n.length===0?B.jsx("div",{className:"p-4 opacity-70",children:"Tidak ada GMPE tersedia"}):B.jsxs("div",{className:"space-y-4 p-6",children:[B.jsx("h2",{className:"text-xl font-bold",children:"Daftar GMPE"}),n.map(f=>{const d=f.coeffs?.length>0?Object.keys(f.coeffs[0]):[],m=o===f.id;return B.jsxs("div",{className:"card-custom rounded-2xl shadow",children:[B.jsxs("button",{onClick:()=>a(m?null:f.id),className:"w-full text-left px-6 py-4 flex justify-between items-center",children:[B.jsx("span",{className:"font-semibold",children:f.name}),B.jsx("span",{className:"text-sm opacity-70",children:m?"▲ Tutup":"▼ Detail"})]}),m&&B.jsxs("div",{className:"p-6 space-y-4 border-t",style:{borderColor:"var(--color-border)"},children:[B.jsxs("p",{className:"text-sm opacity-80",children:["Tahun: ",f.year||"-"," | Region:"," ",f.tectonic_region||"-"]}),B.jsx("p",{className:"text-sm",children:f.description}),d.length>0?B.jsx("div",{className:"overflow-x-auto",children:B.jsxs("table",{className:"w-full border text-sm",style:{borderColor:"var(--color-border)"},children:[B.jsx("thead",{children:B.jsx("tr",{style:{backgroundColor:"var(--hover)"},children:d.map(y=>B.jsx("th",{className:"px-3 py-2 border",style:{borderColor:"var(--color-border)"},children:y},y))})}),B.jsx("tbody",{children:f.coeffs.map((y,v)=>B.jsx("tr",{className:"hover:bg-[var(--hover)]",children:d.map((w,S)=>B.jsx("td",{className:"px-3 py-2 border",style:{borderColor:"var(--color-border)"},children:typeof y[w]=="number"?y[w].toFixed(3):y[w]},S))},v))})]})}):B.jsx("p",{className:"opacity-70",children:"Koefisien GMPE tidak tersedia"})]})]},f.id||f.name)})]})}function g$({isOpen:n,onClose:t,onSave:e}){const[i,r]=Q.useState("");if(Q.useEffect(()=>{n&&r("")},[n]),!n)return null;function s(o){o.preventDefault(),i.trim()&&(e(i.trim()),t())}return B.jsx(Ow,{title:"Save Project",onClose:t,width:"w-96",children:B.jsxs("form",{onSubmit:s,className:"space-y-4",children:[B.jsx("input",{type:"text",value:i,onChange:o=>r(o.target.value),placeholder:"Enter project name",className:"w-full border border-[var(--color-border)] rounded px-3 py-2 bg-[var(--bg)] text-[var(--text)]",autoFocus:!0}),B.jsxs("div",{className:"flex justify-end space-x-2",children:[B.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-[var(--hover)] text-[var(--text)] hover:opacity-80",children:"Cancel"}),B.jsx("button",{type:"submit",disabled:!i.trim(),className:`px-4 py-2 rounded text-white ${i.trim()?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:"Save"})]})]})})}function y$(n,t){const e={};return(n[n.length-1]===""?[...n,""]:n).join((e.padRight?" ":"")+","+(e.padLeft===!1?"":" ")).trim()}const v$=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_$=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,x$={};function YE(n,t){return(x$.jsx?_$:v$).test(n)}const w$=/[ \t\n\f\r]/g;function b$(n){return typeof n=="object"?n.type==="text"?KE(n.value):!1:KE(n)}function KE(n){return n.replace(w$,"")===""}class vd{constructor(t,e,i){this.normal=e,this.property=t,i&&(this.space=i)}}vd.prototype.normal={};vd.prototype.property={};vd.prototype.space=void 0;function c2(n,t){const e={},i={};for(const r of n)Object.assign(e,r.property),Object.assign(i,r.normal);return new vd(e,i,t)}function Xx(n){return n.toLowerCase()}class er{constructor(t,e){this.attribute=e,this.property=t}}er.prototype.attribute="";er.prototype.booleanish=!1;er.prototype.boolean=!1;er.prototype.commaOrSpaceSeparated=!1;er.prototype.commaSeparated=!1;er.prototype.defined=!1;er.prototype.mustUseProperty=!1;er.prototype.number=!1;er.prototype.overloadedBoolean=!1;er.prototype.property="";er.prototype.spaceSeparated=!1;er.prototype.space=void 0;let S$=0;const Le=Bl(),Fn=Bl(),Yx=Bl(),qt=Bl(),ln=Bl(),dc=Bl(),yr=Bl();function Bl(){return 2**++S$}const Kx=Object.freeze(Object.defineProperty({__proto__:null,boolean:Le,booleanish:Fn,commaOrSpaceSeparated:yr,commaSeparated:dc,number:qt,overloadedBoolean:Yx,spaceSeparated:ln},Symbol.toStringTag,{value:"Module"})),D_=Object.keys(Kx);class Nw extends er{constructor(t,e,i,r){let s=-1;if(super(t,e),JE(this,"space",r),typeof i=="number")for(;++s<D_.length;){const o=D_[s];JE(this,D_[s],(i&Kx[o])===Kx[o])}}}Nw.prototype.defined=!0;function JE(n,t,e){e&&(n[t]=e)}function jc(n){const t={},e={};for(const[i,r]of Object.entries(n.properties)){const s=new Nw(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),t[i]=s,e[Xx(i)]=i,e[Xx(s.attribute)]=i}return new vd(t,e,n.space)}const h2=jc({properties:{ariaActiveDescendant:null,ariaAtomic:Fn,ariaAutoComplete:null,ariaBusy:Fn,ariaChecked:Fn,ariaColCount:qt,ariaColIndex:qt,ariaColSpan:qt,ariaControls:ln,ariaCurrent:null,ariaDescribedBy:ln,ariaDetails:null,ariaDisabled:Fn,ariaDropEffect:ln,ariaErrorMessage:null,ariaExpanded:Fn,ariaFlowTo:ln,ariaGrabbed:Fn,ariaHasPopup:null,ariaHidden:Fn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ln,ariaLevel:qt,ariaLive:null,ariaModal:Fn,ariaMultiLine:Fn,ariaMultiSelectable:Fn,ariaOrientation:null,ariaOwns:ln,ariaPlaceholder:null,ariaPosInSet:qt,ariaPressed:Fn,ariaReadOnly:Fn,ariaRelevant:null,ariaRequired:Fn,ariaRoleDescription:ln,ariaRowCount:qt,ariaRowIndex:qt,ariaRowSpan:qt,ariaSelected:Fn,ariaSetSize:qt,ariaSort:null,ariaValueMax:qt,ariaValueMin:qt,ariaValueNow:qt,ariaValueText:null,role:null},transform(n,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function f2(n,t){return t in n?n[t]:t}function d2(n,t){return f2(n,t.toLowerCase())}const M$=jc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:dc,acceptCharset:ln,accessKey:ln,action:null,allow:null,allowFullScreen:Le,allowPaymentRequest:Le,allowUserMedia:Le,alt:null,as:null,async:Le,autoCapitalize:null,autoComplete:ln,autoFocus:Le,autoPlay:Le,blocking:ln,capture:null,charSet:null,checked:Le,cite:null,className:ln,cols:qt,colSpan:null,content:null,contentEditable:Fn,controls:Le,controlsList:ln,coords:qt|dc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Le,defer:Le,dir:null,dirName:null,disabled:Le,download:Yx,draggable:Fn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Le,formTarget:null,headers:ln,height:qt,hidden:Yx,high:qt,href:null,hrefLang:null,htmlFor:ln,httpEquiv:ln,id:null,imageSizes:null,imageSrcSet:null,inert:Le,inputMode:null,integrity:null,is:null,isMap:Le,itemId:null,itemProp:ln,itemRef:ln,itemScope:Le,itemType:ln,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Le,low:qt,manifest:null,max:null,maxLength:qt,media:null,method:null,min:null,minLength:qt,multiple:Le,muted:Le,name:null,nonce:null,noModule:Le,noValidate:Le,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Le,optimum:qt,pattern:null,ping:ln,placeholder:null,playsInline:Le,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Le,referrerPolicy:null,rel:ln,required:Le,reversed:Le,rows:qt,rowSpan:qt,sandbox:ln,scope:null,scoped:Le,seamless:Le,selected:Le,shadowRootClonable:Le,shadowRootDelegatesFocus:Le,shadowRootMode:null,shape:null,size:qt,sizes:null,slot:null,span:qt,spellCheck:Fn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:qt,step:null,style:null,tabIndex:qt,target:null,title:null,translate:null,type:null,typeMustMatch:Le,useMap:null,value:Fn,width:qt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ln,axis:null,background:null,bgColor:null,border:qt,borderColor:null,bottomMargin:qt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Le,declare:Le,event:null,face:null,frame:null,frameBorder:null,hSpace:qt,leftMargin:qt,link:null,longDesc:null,lowSrc:null,marginHeight:qt,marginWidth:qt,noResize:Le,noHref:Le,noShade:Le,noWrap:Le,object:null,profile:null,prompt:null,rev:null,rightMargin:qt,rules:null,scheme:null,scrolling:Fn,standby:null,summary:null,text:null,topMargin:qt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:qt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Le,disableRemotePlayback:Le,prefix:null,property:null,results:qt,security:null,unselectable:null},space:"html",transform:d2}),T$=jc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:yr,accentHeight:qt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:qt,amplitude:qt,arabicForm:null,ascent:qt,attributeName:null,attributeType:null,azimuth:qt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:qt,by:null,calcMode:null,capHeight:qt,className:ln,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:qt,diffuseConstant:qt,direction:null,display:null,dur:null,divisor:qt,dominantBaseline:null,download:Le,dx:null,dy:null,edgeMode:null,editable:null,elevation:qt,enableBackground:null,end:null,event:null,exponent:qt,externalResourcesRequired:null,fill:null,fillOpacity:qt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:dc,g2:dc,glyphName:dc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:qt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:qt,horizOriginX:qt,horizOriginY:qt,id:null,ideographic:qt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:qt,k:qt,k1:qt,k2:qt,k3:qt,k4:qt,kernelMatrix:yr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:qt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:qt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:qt,overlineThickness:qt,paintOrder:null,panose1:null,path:null,pathLength:qt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ln,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:qt,pointsAtY:qt,pointsAtZ:qt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:yr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:yr,rev:yr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:yr,requiredFeatures:yr,requiredFonts:yr,requiredFormats:yr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:qt,specularExponent:qt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:qt,strikethroughThickness:qt,string:null,stroke:null,strokeDashArray:yr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:qt,strokeOpacity:qt,strokeWidth:null,style:null,surfaceScale:qt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:yr,tabIndex:qt,tableValues:null,target:null,targetX:qt,targetY:qt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:yr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:qt,underlineThickness:qt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:qt,values:null,vAlphabetic:qt,vMathematical:qt,vectorEffect:null,vHanging:qt,vIdeographic:qt,version:null,vertAdvY:qt,vertOriginX:qt,vertOriginY:qt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:qt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:f2}),p2=jc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,t){return"xlink:"+t.slice(5).toLowerCase()}}),m2=jc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:d2}),g2=jc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,t){return"xml:"+t.slice(3).toLowerCase()}}),E$={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},P$=/[A-Z]/g,QE=/-[a-z]/g,C$=/^data[-\w.:]+$/i;function A$(n,t){const e=Xx(t);let i=t,r=er;if(e in n.normal)return n.property[n.normal[e]];if(e.length>4&&e.slice(0,4)==="data"&&C$.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(QE,k$);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!QE.test(s)){let o=s.replace(P$,L$);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}r=Nw}return new r(i,t)}function L$(n){return"-"+n.toLowerCase()}function k$(n){return n.charAt(1).toUpperCase()}const R$=c2([h2,M$,p2,m2,g2],"html"),Fw=c2([h2,T$,p2,m2,g2],"svg");function I$(n){return n.join(" ").trim()}var qu={},O_,tP;function D$(){if(tP)return O_;tP=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,e=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,f="/",d="*",m="",y="comment",v="declaration";O_=function(S,P){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];P=P||{};var b=1,M=1;function R(K){var Y=K.match(t);Y&&(b+=Y.length);var rt=K.lastIndexOf(c);M=~rt?K.length-rt:M+K.length}function O(){var K={line:b,column:M};return function(Y){return Y.position=new k(K),I(),Y}}function k(K){this.start=K,this.end={line:b,column:M},this.source=P.source}k.prototype.content=S;function N(K){var Y=new Error(P.source+":"+b+":"+M+": "+K);if(Y.reason=K,Y.filename=P.source,Y.line=b,Y.column=M,Y.source=S,!P.silent)throw Y}function D(K){var Y=K.exec(S);if(Y){var rt=Y[0];return R(rt),S=S.slice(rt.length),Y}}function I(){D(e)}function H(K){var Y;for(K=K||[];Y=W();)Y!==!1&&K.push(Y);return K}function W(){var K=O();if(!(f!=S.charAt(0)||d!=S.charAt(1))){for(var Y=2;m!=S.charAt(Y)&&(d!=S.charAt(Y)||f!=S.charAt(Y+1));)++Y;if(Y+=2,m===S.charAt(Y-1))return N("End of comment missing");var rt=S.slice(2,Y-2);return M+=2,R(rt),S=S.slice(Y),M+=2,K({type:y,comment:rt})}}function U(){var K=O(),Y=D(i);if(Y){if(W(),!D(r))return N("property missing ':'");var rt=D(s),at=K({type:v,property:w(Y[0].replace(n,m)),value:rt?w(rt[0].replace(n,m)):m});return D(o),at}}function tt(){var K=[];H(K);for(var Y;Y=U();)Y!==!1&&(K.push(Y),H(K));return K}return I(),tt()};function w(S){return S?S.replace(a,m):m}return O_}var eP;function O$(){if(eP)return qu;eP=1;var n=qu&&qu.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qu,"__esModule",{value:!0}),qu.default=e;var t=n(D$());function e(i,r){var s=null;if(!i||typeof i!="string")return s;var o=(0,t.default)(i),a=typeof r=="function";return o.forEach(function(c){if(c.type==="declaration"){var f=c.property,d=c.value;a?r(f,d,c):d&&(s=s||{},s[f]=d)}}),s}return qu}var Yh={},nP;function N$(){if(nP)return Yh;nP=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,e=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,s=function(f){return!f||e.test(f)||n.test(f)},o=function(f,d){return d.toUpperCase()},a=function(f,d){return"".concat(d,"-")},c=function(f,d){return d===void 0&&(d={}),s(f)?f:(f=f.toLowerCase(),d.reactCompat?f=f.replace(r,a):f=f.replace(i,a),f.replace(t,o))};return Yh.camelCase=c,Yh}var Kh,iP;function F$(){if(iP)return Kh;iP=1;var n=Kh&&Kh.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},t=n(O$()),e=N$();function i(r,s){var o={};return!r||typeof r!="string"||(0,t.default)(r,function(a,c){a&&c&&(o[(0,e.camelCase)(a,s)]=c)}),o}return i.default=i,Kh=i,Kh}var z$=F$();const B$=Tc(z$),y2=v2("end"),zw=v2("start");function v2(n){return t;function t(e){const i=e&&e.position&&e.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function V$(n){const t=zw(n),e=y2(n);if(t&&e)return{start:t,end:e}}function kf(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?rP(n.position):"start"in n||"end"in n?rP(n):"line"in n||"column"in n?Jx(n):""}function Jx(n){return sP(n&&n.line)+":"+sP(n&&n.column)}function rP(n){return Jx(n&&n.start)+"-"+Jx(n&&n.end)}function sP(n){return n&&typeof n=="number"?n:1}class Ei extends Error{constructor(t,e,i){super(),typeof e=="string"&&(i=e,e=void 0);let r="",s={},o=!1;if(e&&("line"in e&&"column"in e?s={place:e}:"start"in e&&"end"in e?s={place:e}:"type"in e?s={ancestors:[e],place:e.position}:s={...e}),typeof t=="string"?r=t:!s.cause&&t&&(o=!0,r=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?s.ruleId=i:(s.source=i.slice(0,c),s.ruleId=i.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=kf(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ei.prototype.file="";Ei.prototype.name="";Ei.prototype.reason="";Ei.prototype.message="";Ei.prototype.stack="";Ei.prototype.column=void 0;Ei.prototype.line=void 0;Ei.prototype.ancestors=void 0;Ei.prototype.cause=void 0;Ei.prototype.fatal=void 0;Ei.prototype.place=void 0;Ei.prototype.ruleId=void 0;Ei.prototype.source=void 0;const Bw={}.hasOwnProperty,U$=new Map,H$=/[A-Z]/g,j$=new Set(["table","tbody","thead","tfoot","tr"]),W$=new Set(["td","th"]),_2="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function G$(n,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const e=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=Q$(e,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=J$(e,t.jsx,t.jsxs)}const r={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:e,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Fw:R$,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=x2(r,n,void 0);return s&&typeof s!="string"?s:r.create(n,r.Fragment,{children:s||void 0},void 0)}function x2(n,t,e){if(t.type==="element")return $$(n,t,e);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Z$(n,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return X$(n,t,e);if(t.type==="mdxjsEsm")return q$(n,t);if(t.type==="root")return Y$(n,t,e);if(t.type==="text")return K$(n,t)}function $$(n,t,e){const i=n.schema;let r=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=Fw,n.schema=r),n.ancestors.push(t);const s=b2(n,t.tagName,!1),o=tZ(n,t);let a=Uw(n,t);return j$.has(t.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!b$(c):!0})),w2(n,o,s,t),Vw(o,a),n.ancestors.pop(),n.schema=i,n.create(t,s,o,e)}function Z$(n,t){if(t.data&&t.data.estree&&n.evaluater){const i=t.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}nd(n,t.position)}function q$(n,t){if(t.data&&t.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(t.data.estree);nd(n,t.position)}function X$(n,t,e){const i=n.schema;let r=i;t.name==="svg"&&i.space==="html"&&(r=Fw,n.schema=r),n.ancestors.push(t);const s=t.name===null?n.Fragment:b2(n,t.name,!0),o=eZ(n,t),a=Uw(n,t);return w2(n,o,s,t),Vw(o,a),n.ancestors.pop(),n.schema=i,n.create(t,s,o,e)}function Y$(n,t,e){const i={};return Vw(i,Uw(n,t)),n.create(t,n.Fragment,i,e)}function K$(n,t){return t.value}function w2(n,t,e,i){typeof e!="string"&&e!==n.Fragment&&n.passNode&&(t.node=i)}function Vw(n,t){if(t.length>0){const e=t.length>1?t:t[0];e&&(n.children=e)}}function J$(n,t,e){return i;function i(r,s,o,a){const f=Array.isArray(o.children)?e:t;return a?f(s,o,a):f(s,o)}}function Q$(n,t){return e;function e(i,r,s,o){const a=Array.isArray(s.children),c=zw(i);return t(r,s,o,a,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function tZ(n,t){const e={};let i,r;for(r in t.properties)if(r!=="children"&&Bw.call(t.properties,r)){const s=nZ(n,r,t.properties[r]);if(s){const[o,a]=s;n.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&W$.has(t.tagName)?i=a:e[o]=a}}if(i){const s=e.style||(e.style={});s[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return e}function eZ(n,t){const e={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const s=i.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(e,n.evaluater.evaluateExpression(a.argument))}else nd(n,t.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const a=i.value.data.estree.body[0];a.type,s=n.evaluater.evaluateExpression(a.expression)}else nd(n,t.position);else s=i.value===null?!0:i.value;e[r]=s}return e}function Uw(n,t){const e=[];let i=-1;const r=n.passKeys?new Map:U$;for(;++i<t.children.length;){const s=t.children[i];let o;if(n.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const f=r.get(c)||0;o=c+"-"+f,r.set(c,f+1)}}const a=x2(n,s,o);a!==void 0&&e.push(a)}return e}function nZ(n,t,e){const i=A$(n.schema,t);if(!(e==null||typeof e=="number"&&Number.isNaN(e))){if(Array.isArray(e)&&(e=i.commaSeparated?y$(e):I$(e)),i.property==="style"){let r=typeof e=="object"?e:iZ(n,String(e));return n.stylePropertyNameCase==="css"&&(r=rZ(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?E$[i.property]||i.property:i.attribute,e]}}function iZ(n,t){try{return B$(t,{reactCompat:!0})}catch(e){if(n.ignoreInvalidStyle)return{};const i=e,r=new Ei("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=_2+"#cannot-parse-style-attribute",r}}function b2(n,t,e){let i;if(!e)i={type:"Literal",value:t};else if(t.includes(".")){const r=t.split(".");let s=-1,o;for(;++s<r.length;){const a=YE(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}i=o}else i=YE(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const r=i.value;return Bw.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);nd(n)}function nd(n,t){const e=new Ei("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw e.file=n.filePath||void 0,e.url=_2+"#cannot-handle-mdx-estrees-without-createevaluater",e}function rZ(n){const t={};let e;for(e in n)Bw.call(n,e)&&(t[sZ(e)]=n[e]);return t}function sZ(n){let t=n.replace(H$,oZ);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function oZ(n){return"-"+n.toLowerCase()}const N_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},aZ={};function lZ(n,t){const e=aZ,i=typeof e.includeImageAlt=="boolean"?e.includeImageAlt:!0,r=typeof e.includeHtml=="boolean"?e.includeHtml:!0;return S2(n,i,r)}function S2(n,t,e){if(uZ(n)){if("value"in n)return n.type==="html"&&!e?"":n.value;if(t&&"alt"in n&&n.alt)return n.alt;if("children"in n)return oP(n.children,t,e)}return Array.isArray(n)?oP(n,t,e):""}function oP(n,t,e){const i=[];let r=-1;for(;++r<n.length;)i[r]=S2(n[r],t,e);return i.join("")}function uZ(n){return!!(n&&typeof n=="object")}const aP=document.createElement("i");function Hw(n){const t="&"+n+";";aP.innerHTML=t;const e=aP.textContent;return e.charCodeAt(e.length-1)===59&&n!=="semi"||e===t?!1:e}function Gs(n,t,e,i){const r=n.length;let s=0,o;if(t<0?t=-t>r?0:r+t:t=t>r?r:t,e=e>0?e:0,i.length<1e4)o=Array.from(i),o.unshift(t,e),n.splice(...o);else for(e&&n.splice(t,e);s<i.length;)o=i.slice(s,s+1e4),o.unshift(t,0),n.splice(...o),s+=1e4,t+=1e4}function Vr(n,t){return n.length>0?(Gs(n,n.length,0,t),n):t}const lP={}.hasOwnProperty;function cZ(n){const t={};let e=-1;for(;++e<n.length;)hZ(t,n[e]);return t}function hZ(n,t){let e;for(e in t){const r=(lP.call(n,e)?n[e]:void 0)||(n[e]={}),s=t[e];let o;if(s)for(o in s){lP.call(r,o)||(r[o]=[]);const a=s[o];fZ(r[o],Array.isArray(a)?a:a?[a]:[])}}}function fZ(n,t){let e=-1;const i=[];for(;++e<t.length;)(t[e].add==="after"?n:i).push(t[e]);Gs(n,0,0,i)}function M2(n,t){const e=Number.parseInt(n,t);return e<9||e===11||e>13&&e<32||e>126&&e<160||e>55295&&e<57344||e>64975&&e<65008||(e&65535)===65535||(e&65535)===65534||e>1114111?"�":String.fromCodePoint(e)}function pc(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ns=Ra(/[A-Za-z]/),_r=Ra(/[\dA-Za-z]/),dZ=Ra(/[#-'*+\--9=?A-Z^-~]/);function Qx(n){return n!==null&&(n<32||n===127)}const t0=Ra(/\d/),pZ=Ra(/[\dA-Fa-f]/),mZ=Ra(/[!-/:-@[-`{-~]/);function Se(n){return n!==null&&n<-2}function Qi(n){return n!==null&&(n<0||n===32)}function We(n){return n===-2||n===-1||n===32}const gZ=Ra(new RegExp("\\p{P}|\\p{S}","u")),yZ=Ra(/\s/);function Ra(n){return t;function t(e){return e!==null&&e>-1&&n.test(String.fromCharCode(e))}}function Wc(n){const t=[];let e=-1,i=0,r=0;for(;++e<n.length;){const s=n.charCodeAt(e);let o="";if(s===37&&_r(n.charCodeAt(e+1))&&_r(n.charCodeAt(e+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=n.charCodeAt(e+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),r=1):o="�"}else o=String.fromCharCode(s);o&&(t.push(n.slice(i,e),encodeURIComponent(o)),i=e+r+1,o=""),r&&(e+=r,r=0)}return t.join("")+n.slice(i)}function cn(n,t,e,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return We(c)?(n.enter(e),a(c)):t(c)}function a(c){return We(c)&&s++<r?(n.consume(c),a):(n.exit(e),t(c))}}const vZ={tokenize:_Z};function _Z(n){const t=n.attempt(this.parser.constructs.contentInitial,i,r);let e;return t;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),cn(n,t,"linePrefix")}function r(a){return n.enter("paragraph"),s(a)}function s(a){const c=n.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=c),e=c,o(a)}function o(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return Se(a)?(n.consume(a),n.exit("chunkText"),s):(n.consume(a),o)}}const xZ={tokenize:wZ},uP={tokenize:bZ};function wZ(n){const t=this,e=[];let i=0,r,s,o;return a;function a(R){if(i<e.length){const O=e[i];return t.containerState=O[1],n.attempt(O[0].continuation,c,f)(R)}return f(R)}function c(R){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&M();const O=t.events.length;let k=O,N;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){N=t.events[k][1].end;break}b(i);let D=O;for(;D<t.events.length;)t.events[D][1].end={...N},D++;return Gs(t.events,k+1,0,t.events.slice(O)),t.events.length=D,f(R)}return a(R)}function f(R){if(i===e.length){if(!r)return y(R);if(r.currentConstruct&&r.currentConstruct.concrete)return w(R);t.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},n.check(uP,d,m)(R)}function d(R){return r&&M(),b(i),y(R)}function m(R){return t.parser.lazy[t.now().line]=i!==e.length,o=t.now().offset,w(R)}function y(R){return t.containerState={},n.attempt(uP,v,w)(R)}function v(R){return i++,e.push([t.currentConstruct,t.containerState]),y(R)}function w(R){if(R===null){r&&M(),b(0),n.consume(R);return}return r=r||t.parser.flow(t.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),S(R)}function S(R){if(R===null){P(n.exit("chunkFlow"),!0),b(0),n.consume(R);return}return Se(R)?(n.consume(R),P(n.exit("chunkFlow")),i=0,t.interrupt=void 0,a):(n.consume(R),S)}function P(R,O){const k=t.sliceStream(R);if(O&&k.push(null),R.previous=s,s&&(s.next=R),s=R,r.defineSkip(R.start),r.write(k),t.parser.lazy[R.start.line]){let N=r.events.length;for(;N--;)if(r.events[N][1].start.offset<o&&(!r.events[N][1].end||r.events[N][1].end.offset>o))return;const D=t.events.length;let I=D,H,W;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(H){W=t.events[I][1].end;break}H=!0}for(b(i),N=D;N<t.events.length;)t.events[N][1].end={...W},N++;Gs(t.events,I+1,0,t.events.slice(D)),t.events.length=N}}function b(R){let O=e.length;for(;O-- >R;){const k=e[O];t.containerState=k[1],k[0].exit.call(t,n)}e.length=R}function M(){r.write([null]),s=void 0,r=void 0,t.containerState._closeFlow=void 0}}function bZ(n,t,e){return cn(n,n.attempt(this.parser.constructs.document,t,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function cP(n){if(n===null||Qi(n)||yZ(n))return 1;if(gZ(n))return 2}function jw(n,t,e){const i=[];let r=-1;for(;++r<n.length;){const s=n[r].resolveAll;s&&!i.includes(s)&&(t=s(t,e),i.push(s))}return t}const e0={name:"attention",resolveAll:SZ,tokenize:MZ};function SZ(n,t){let e=-1,i,r,s,o,a,c,f,d;for(;++e<n.length;)if(n[e][0]==="enter"&&n[e][1].type==="attentionSequence"&&n[e][1]._close){for(i=e;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&t.sliceSerialize(n[i][1]).charCodeAt(0)===t.sliceSerialize(n[e][1]).charCodeAt(0)){if((n[i][1]._close||n[e][1]._open)&&(n[e][1].end.offset-n[e][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[e][1].end.offset-n[e][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[e][1].end.offset-n[e][1].start.offset>1?2:1;const m={...n[i][1].end},y={...n[e][1].start};hP(m,-c),hP(y,c),o={type:c>1?"strongSequence":"emphasisSequence",start:m,end:{...n[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...n[e][1].start},end:y},s={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[e][1].start}},r={type:c>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},n[i][1].end={...o.start},n[e][1].start={...a.end},f=[],n[i][1].end.offset-n[i][1].start.offset&&(f=Vr(f,[["enter",n[i][1],t],["exit",n[i][1],t]])),f=Vr(f,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",s,t]]),f=Vr(f,jw(t.parser.constructs.insideSpan.null,n.slice(i+1,e),t)),f=Vr(f,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",r,t]]),n[e][1].end.offset-n[e][1].start.offset?(d=2,f=Vr(f,[["enter",n[e][1],t],["exit",n[e][1],t]])):d=0,Gs(n,i-1,e-i+3,f),e=i+f.length-d-2;break}}for(e=-1;++e<n.length;)n[e][1].type==="attentionSequence"&&(n[e][1].type="data");return n}function MZ(n,t){const e=this.parser.constructs.attentionMarkers.null,i=this.previous,r=cP(i);let s;return o;function o(c){return s=c,n.enter("attentionSequence"),a(c)}function a(c){if(c===s)return n.consume(c),a;const f=n.exit("attentionSequence"),d=cP(c),m=!d||d===2&&r||e.includes(c),y=!r||r===2&&d||e.includes(i);return f._open=!!(s===42?m:m&&(r||!y)),f._close=!!(s===42?y:y&&(d||!m)),t(c)}}function hP(n,t){n.column+=t,n.offset+=t,n._bufferIndex+=t}const TZ={name:"autolink",tokenize:EZ};function EZ(n,t,e){let i=0;return r;function r(v){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(v),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(v){return Ns(v)?(n.consume(v),o):v===64?e(v):f(v)}function o(v){return v===43||v===45||v===46||_r(v)?(i=1,a(v)):f(v)}function a(v){return v===58?(n.consume(v),i=0,c):(v===43||v===45||v===46||_r(v))&&i++<32?(n.consume(v),a):(i=0,f(v))}function c(v){return v===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(v),n.exit("autolinkMarker"),n.exit("autolink"),t):v===null||v===32||v===60||Qx(v)?e(v):(n.consume(v),c)}function f(v){return v===64?(n.consume(v),d):dZ(v)?(n.consume(v),f):e(v)}function d(v){return _r(v)?m(v):e(v)}function m(v){return v===46?(n.consume(v),i=0,d):v===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(v),n.exit("autolinkMarker"),n.exit("autolink"),t):y(v)}function y(v){if((v===45||_r(v))&&i++<63){const w=v===45?y:m;return n.consume(v),w}return e(v)}}const $g={partial:!0,tokenize:PZ};function PZ(n,t,e){return i;function i(s){return We(s)?cn(n,r,"linePrefix")(s):r(s)}function r(s){return s===null||Se(s)?t(s):e(s)}}const T2={continuation:{tokenize:AZ},exit:LZ,name:"blockQuote",tokenize:CZ};function CZ(n,t,e){const i=this;return r;function r(o){if(o===62){const a=i.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),s}return e(o)}function s(o){return We(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),t):(n.exit("blockQuotePrefix"),t(o))}}function AZ(n,t,e){const i=this;return r;function r(o){return We(o)?cn(n,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return n.attempt(T2,t,e)(o)}}function LZ(n){n.exit("blockQuote")}const E2={name:"characterEscape",tokenize:kZ};function kZ(n,t,e){return i;function i(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),r}function r(s){return mZ(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),t):e(s)}}const P2={name:"characterReference",tokenize:RZ};function RZ(n,t,e){const i=this;let r=0,s,o;return a;function a(m){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(m),n.exit("characterReferenceMarker"),c}function c(m){return m===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(m),n.exit("characterReferenceMarkerNumeric"),f):(n.enter("characterReferenceValue"),s=31,o=_r,d(m))}function f(m){return m===88||m===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(m),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,o=pZ,d):(n.enter("characterReferenceValue"),s=7,o=t0,d(m))}function d(m){if(m===59&&r){const y=n.exit("characterReferenceValue");return o===_r&&!Hw(i.sliceSerialize(y))?e(m):(n.enter("characterReferenceMarker"),n.consume(m),n.exit("characterReferenceMarker"),n.exit("characterReference"),t)}return o(m)&&r++<s?(n.consume(m),d):e(m)}}const fP={partial:!0,tokenize:DZ},dP={concrete:!0,name:"codeFenced",tokenize:IZ};function IZ(n,t,e){const i=this,r={partial:!0,tokenize:k};let s=0,o=0,a;return c;function c(N){return f(N)}function f(N){const D=i.events[i.events.length-1];return s=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,a=N,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),d(N)}function d(N){return N===a?(o++,n.consume(N),d):o<3?e(N):(n.exit("codeFencedFenceSequence"),We(N)?cn(n,m,"whitespace")(N):m(N))}function m(N){return N===null||Se(N)?(n.exit("codeFencedFence"),i.interrupt?t(N):n.check(fP,S,O)(N)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),y(N))}function y(N){return N===null||Se(N)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),m(N)):We(N)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),cn(n,v,"whitespace")(N)):N===96&&N===a?e(N):(n.consume(N),y)}function v(N){return N===null||Se(N)?m(N):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),w(N))}function w(N){return N===null||Se(N)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),m(N)):N===96&&N===a?e(N):(n.consume(N),w)}function S(N){return n.attempt(r,O,P)(N)}function P(N){return n.enter("lineEnding"),n.consume(N),n.exit("lineEnding"),b}function b(N){return s>0&&We(N)?cn(n,M,"linePrefix",s+1)(N):M(N)}function M(N){return N===null||Se(N)?n.check(fP,S,O)(N):(n.enter("codeFlowValue"),R(N))}function R(N){return N===null||Se(N)?(n.exit("codeFlowValue"),M(N)):(n.consume(N),R)}function O(N){return n.exit("codeFenced"),t(N)}function k(N,D,I){let H=0;return W;function W(rt){return N.enter("lineEnding"),N.consume(rt),N.exit("lineEnding"),U}function U(rt){return N.enter("codeFencedFence"),We(rt)?cn(N,tt,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(rt):tt(rt)}function tt(rt){return rt===a?(N.enter("codeFencedFenceSequence"),K(rt)):I(rt)}function K(rt){return rt===a?(H++,N.consume(rt),K):H>=o?(N.exit("codeFencedFenceSequence"),We(rt)?cn(N,Y,"whitespace")(rt):Y(rt)):I(rt)}function Y(rt){return rt===null||Se(rt)?(N.exit("codeFencedFence"),D(rt)):I(rt)}}}function DZ(n,t,e){const i=this;return r;function r(o){return o===null?e(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?e(o):t(o)}}const F_={name:"codeIndented",tokenize:NZ},OZ={partial:!0,tokenize:FZ};function NZ(n,t,e){const i=this;return r;function r(f){return n.enter("codeIndented"),cn(n,s,"linePrefix",5)(f)}function s(f){const d=i.events[i.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(f):e(f)}function o(f){return f===null?c(f):Se(f)?n.attempt(OZ,o,c)(f):(n.enter("codeFlowValue"),a(f))}function a(f){return f===null||Se(f)?(n.exit("codeFlowValue"),o(f)):(n.consume(f),a)}function c(f){return n.exit("codeIndented"),t(f)}}function FZ(n,t,e){const i=this;return r;function r(o){return i.parser.lazy[i.now().line]?e(o):Se(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),r):cn(n,s,"linePrefix",5)(o)}function s(o){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Se(o)?r(o):e(o)}}const zZ={name:"codeText",previous:VZ,resolve:BZ,tokenize:UZ};function BZ(n){let t=n.length-4,e=3,i,r;if((n[e][1].type==="lineEnding"||n[e][1].type==="space")&&(n[t][1].type==="lineEnding"||n[t][1].type==="space")){for(i=e;++i<t;)if(n[i][1].type==="codeTextData"){n[e][1].type="codeTextPadding",n[t][1].type="codeTextPadding",e+=2,t-=2;break}}for(i=e-1,t++;++i<=t;)r===void 0?i!==t&&n[i][1].type!=="lineEnding"&&(r=i):(i===t||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),t-=i-r-2,i=r+2),r=void 0);return n}function VZ(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function UZ(n,t,e){let i=0,r,s;return o;function o(m){return n.enter("codeText"),n.enter("codeTextSequence"),a(m)}function a(m){return m===96?(n.consume(m),i++,a):(n.exit("codeTextSequence"),c(m))}function c(m){return m===null?e(m):m===32?(n.enter("space"),n.consume(m),n.exit("space"),c):m===96?(s=n.enter("codeTextSequence"),r=0,d(m)):Se(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),c):(n.enter("codeTextData"),f(m))}function f(m){return m===null||m===32||m===96||Se(m)?(n.exit("codeTextData"),c(m)):(n.consume(m),f)}function d(m){return m===96?(n.consume(m),r++,d):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),t(m)):(s.type="codeTextData",f(m))}}class HZ{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,e){const i=e??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,e,i){const r=e||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&Jh(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Jh(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Jh(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const e=this.left.splice(t,Number.POSITIVE_INFINITY);Jh(this.right,e.reverse())}else{const e=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Jh(this.left,e.reverse())}}}function Jh(n,t){let e=0;if(t.length<1e4)n.push(...t);else for(;e<t.length;)n.push(...t.slice(e,e+1e4)),e+=1e4}function C2(n){const t={};let e=-1,i,r,s,o,a,c,f;const d=new HZ(n);for(;++e<d.length;){for(;e in t;)e=t[e];if(i=d.get(e),e&&i[1].type==="chunkFlow"&&d.get(e-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,jZ(d,e)),e=t[e],f=!0);else if(i[1]._container){for(s=e,r=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(d.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(i[1].end={...d.get(r)[1].start},a=d.slice(r,e),a.unshift(i),d.splice(r,e-r+1,a))}}return Gs(n,0,Number.POSITIVE_INFINITY,d.slice(0)),!f}function jZ(n,t){const e=n.get(t)[1],i=n.get(t)[2];let r=t-1;const s=[];let o=e._tokenizer;o||(o=i.parser[e.contentType](e.start),e._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,c=[],f={};let d,m,y=-1,v=e,w=0,S=0;const P=[S];for(;v;){for(;n.get(++r)[1]!==v;);s.push(r),v._tokenizer||(d=i.sliceStream(v),v.next||d.push(null),m&&o.defineSkip(v.start),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=v,v=v.next}for(v=e;++y<a.length;)a[y][0]==="exit"&&a[y-1][0]==="enter"&&a[y][1].type===a[y-1][1].type&&a[y][1].start.line!==a[y][1].end.line&&(S=y+1,P.push(S),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(o.events=[],v?(v._tokenizer=void 0,v.previous=void 0):P.pop(),y=P.length;y--;){const b=a.slice(P[y],P[y+1]),M=s.pop();c.push([M,M+b.length-1]),n.splice(M,2,b)}for(c.reverse(),y=-1;++y<c.length;)f[w+c[y][0]]=w+c[y][1],w+=c[y][1]-c[y][0]-1;return f}const WZ={resolve:$Z,tokenize:ZZ},GZ={partial:!0,tokenize:qZ};function $Z(n){return C2(n),n}function ZZ(n,t){let e;return i;function i(a){return n.enter("content"),e=n.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?s(a):Se(a)?n.check(GZ,o,s)(a):(n.consume(a),r)}function s(a){return n.exit("chunkContent"),n.exit("content"),t(a)}function o(a){return n.consume(a),n.exit("chunkContent"),e.next=n.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,r}}function qZ(n,t,e){const i=this;return r;function r(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),cn(n,s,"linePrefix")}function s(o){if(o===null||Se(o))return e(o);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):n.interrupt(i.parser.constructs.flow,e,t)(o)}}function A2(n,t,e,i,r,s,o,a,c){const f=c||Number.POSITIVE_INFINITY;let d=0;return m;function m(b){return b===60?(n.enter(i),n.enter(r),n.enter(s),n.consume(b),n.exit(s),y):b===null||b===32||b===41||Qx(b)?e(b):(n.enter(i),n.enter(o),n.enter(a),n.enter("chunkString",{contentType:"string"}),S(b))}function y(b){return b===62?(n.enter(s),n.consume(b),n.exit(s),n.exit(r),n.exit(i),t):(n.enter(a),n.enter("chunkString",{contentType:"string"}),v(b))}function v(b){return b===62?(n.exit("chunkString"),n.exit(a),y(b)):b===null||b===60||Se(b)?e(b):(n.consume(b),b===92?w:v)}function w(b){return b===60||b===62||b===92?(n.consume(b),v):v(b)}function S(b){return!d&&(b===null||b===41||Qi(b))?(n.exit("chunkString"),n.exit(a),n.exit(o),n.exit(i),t(b)):d<f&&b===40?(n.consume(b),d++,S):b===41?(n.consume(b),d--,S):b===null||b===32||b===40||Qx(b)?e(b):(n.consume(b),b===92?P:S)}function P(b){return b===40||b===41||b===92?(n.consume(b),S):S(b)}}function L2(n,t,e,i,r,s){const o=this;let a=0,c;return f;function f(v){return n.enter(i),n.enter(r),n.consume(v),n.exit(r),n.enter(s),d}function d(v){return a>999||v===null||v===91||v===93&&!c||v===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?e(v):v===93?(n.exit(s),n.enter(r),n.consume(v),n.exit(r),n.exit(i),t):Se(v)?(n.enter("lineEnding"),n.consume(v),n.exit("lineEnding"),d):(n.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===null||v===91||v===93||Se(v)||a++>999?(n.exit("chunkString"),d(v)):(n.consume(v),c||(c=!We(v)),v===92?y:m)}function y(v){return v===91||v===92||v===93?(n.consume(v),a++,m):m(v)}}function k2(n,t,e,i,r,s){let o;return a;function a(y){return y===34||y===39||y===40?(n.enter(i),n.enter(r),n.consume(y),n.exit(r),o=y===40?41:y,c):e(y)}function c(y){return y===o?(n.enter(r),n.consume(y),n.exit(r),n.exit(i),t):(n.enter(s),f(y))}function f(y){return y===o?(n.exit(s),c(o)):y===null?e(y):Se(y)?(n.enter("lineEnding"),n.consume(y),n.exit("lineEnding"),cn(n,f,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===o||y===null||Se(y)?(n.exit("chunkString"),f(y)):(n.consume(y),y===92?m:d)}function m(y){return y===o||y===92?(n.consume(y),d):d(y)}}function Rf(n,t){let e;return i;function i(r){return Se(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),e=!0,i):We(r)?cn(n,i,e?"linePrefix":"lineSuffix")(r):t(r)}}const XZ={name:"definition",tokenize:KZ},YZ={partial:!0,tokenize:JZ};function KZ(n,t,e){const i=this;let r;return s;function s(v){return n.enter("definition"),o(v)}function o(v){return L2.call(i,n,a,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function a(v){return r=pc(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),v===58?(n.enter("definitionMarker"),n.consume(v),n.exit("definitionMarker"),c):e(v)}function c(v){return Qi(v)?Rf(n,f)(v):f(v)}function f(v){return A2(n,d,e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function d(v){return n.attempt(YZ,m,m)(v)}function m(v){return We(v)?cn(n,y,"whitespace")(v):y(v)}function y(v){return v===null||Se(v)?(n.exit("definition"),i.parser.defined.push(r),t(v)):e(v)}}function JZ(n,t,e){return i;function i(a){return Qi(a)?Rf(n,r)(a):e(a)}function r(a){return k2(n,s,e,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return We(a)?cn(n,o,"whitespace")(a):o(a)}function o(a){return a===null||Se(a)?t(a):e(a)}}const QZ={name:"hardBreakEscape",tokenize:tq};function tq(n,t,e){return i;function i(s){return n.enter("hardBreakEscape"),n.consume(s),r}function r(s){return Se(s)?(n.exit("hardBreakEscape"),t(s)):e(s)}}const eq={name:"headingAtx",resolve:nq,tokenize:iq};function nq(n,t){let e=n.length-2,i=3,r,s;return n[i][1].type==="whitespace"&&(i+=2),e-2>i&&n[e][1].type==="whitespace"&&(e-=2),n[e][1].type==="atxHeadingSequence"&&(i===e-1||e-4>i&&n[e-2][1].type==="whitespace")&&(e-=i+1===e?2:4),e>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[e][1].end},s={type:"chunkText",start:n[i][1].start,end:n[e][1].end,contentType:"text"},Gs(n,i,e-i+1,[["enter",r,t],["enter",s,t],["exit",s,t],["exit",r,t]])),n}function iq(n,t,e){let i=0;return r;function r(d){return n.enter("atxHeading"),s(d)}function s(d){return n.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&i++<6?(n.consume(d),o):d===null||Qi(d)?(n.exit("atxHeadingSequence"),a(d)):e(d)}function a(d){return d===35?(n.enter("atxHeadingSequence"),c(d)):d===null||Se(d)?(n.exit("atxHeading"),t(d)):We(d)?cn(n,a,"whitespace")(d):(n.enter("atxHeadingText"),f(d))}function c(d){return d===35?(n.consume(d),c):(n.exit("atxHeadingSequence"),a(d))}function f(d){return d===null||d===35||Qi(d)?(n.exit("atxHeadingText"),a(d)):(n.consume(d),f)}}const rq=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],pP=["pre","script","style","textarea"],sq={concrete:!0,name:"htmlFlow",resolveTo:lq,tokenize:uq},oq={partial:!0,tokenize:hq},aq={partial:!0,tokenize:cq};function lq(n){let t=n.length;for(;t--&&!(n[t][0]==="enter"&&n[t][1].type==="htmlFlow"););return t>1&&n[t-2][1].type==="linePrefix"&&(n[t][1].start=n[t-2][1].start,n[t+1][1].start=n[t-2][1].start,n.splice(t-2,2)),n}function uq(n,t,e){const i=this;let r,s,o,a,c;return f;function f(z){return d(z)}function d(z){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(z),m}function m(z){return z===33?(n.consume(z),y):z===47?(n.consume(z),s=!0,S):z===63?(n.consume(z),r=3,i.interrupt?t:F):Ns(z)?(n.consume(z),o=String.fromCharCode(z),P):e(z)}function y(z){return z===45?(n.consume(z),r=2,v):z===91?(n.consume(z),r=5,a=0,w):Ns(z)?(n.consume(z),r=4,i.interrupt?t:F):e(z)}function v(z){return z===45?(n.consume(z),i.interrupt?t:F):e(z)}function w(z){const mt="CDATA[";return z===mt.charCodeAt(a++)?(n.consume(z),a===mt.length?i.interrupt?t:tt:w):e(z)}function S(z){return Ns(z)?(n.consume(z),o=String.fromCharCode(z),P):e(z)}function P(z){if(z===null||z===47||z===62||Qi(z)){const mt=z===47,_t=o.toLowerCase();return!mt&&!s&&pP.includes(_t)?(r=1,i.interrupt?t(z):tt(z)):rq.includes(o.toLowerCase())?(r=6,mt?(n.consume(z),b):i.interrupt?t(z):tt(z)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?e(z):s?M(z):R(z))}return z===45||_r(z)?(n.consume(z),o+=String.fromCharCode(z),P):e(z)}function b(z){return z===62?(n.consume(z),i.interrupt?t:tt):e(z)}function M(z){return We(z)?(n.consume(z),M):W(z)}function R(z){return z===47?(n.consume(z),W):z===58||z===95||Ns(z)?(n.consume(z),O):We(z)?(n.consume(z),R):W(z)}function O(z){return z===45||z===46||z===58||z===95||_r(z)?(n.consume(z),O):k(z)}function k(z){return z===61?(n.consume(z),N):We(z)?(n.consume(z),k):R(z)}function N(z){return z===null||z===60||z===61||z===62||z===96?e(z):z===34||z===39?(n.consume(z),c=z,D):We(z)?(n.consume(z),N):I(z)}function D(z){return z===c?(n.consume(z),c=null,H):z===null||Se(z)?e(z):(n.consume(z),D)}function I(z){return z===null||z===34||z===39||z===47||z===60||z===61||z===62||z===96||Qi(z)?k(z):(n.consume(z),I)}function H(z){return z===47||z===62||We(z)?R(z):e(z)}function W(z){return z===62?(n.consume(z),U):e(z)}function U(z){return z===null||Se(z)?tt(z):We(z)?(n.consume(z),U):e(z)}function tt(z){return z===45&&r===2?(n.consume(z),at):z===60&&r===1?(n.consume(z),it):z===62&&r===4?(n.consume(z),G):z===63&&r===3?(n.consume(z),F):z===93&&r===5?(n.consume(z),pt):Se(z)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(oq,lt,K)(z)):z===null||Se(z)?(n.exit("htmlFlowData"),K(z)):(n.consume(z),tt)}function K(z){return n.check(aq,Y,lt)(z)}function Y(z){return n.enter("lineEnding"),n.consume(z),n.exit("lineEnding"),rt}function rt(z){return z===null||Se(z)?K(z):(n.enter("htmlFlowData"),tt(z))}function at(z){return z===45?(n.consume(z),F):tt(z)}function it(z){return z===47?(n.consume(z),o="",J):tt(z)}function J(z){if(z===62){const mt=o.toLowerCase();return pP.includes(mt)?(n.consume(z),G):tt(z)}return Ns(z)&&o.length<8?(n.consume(z),o+=String.fromCharCode(z),J):tt(z)}function pt(z){return z===93?(n.consume(z),F):tt(z)}function F(z){return z===62?(n.consume(z),G):z===45&&r===2?(n.consume(z),F):tt(z)}function G(z){return z===null||Se(z)?(n.exit("htmlFlowData"),lt(z)):(n.consume(z),G)}function lt(z){return n.exit("htmlFlow"),t(z)}}function cq(n,t,e){const i=this;return r;function r(o){return Se(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s):e(o)}function s(o){return i.parser.lazy[i.now().line]?e(o):t(o)}}function hq(n,t,e){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt($g,t,e)}}const fq={name:"htmlText",tokenize:dq};function dq(n,t,e){const i=this;let r,s,o;return a;function a(F){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(F),c}function c(F){return F===33?(n.consume(F),f):F===47?(n.consume(F),k):F===63?(n.consume(F),R):Ns(F)?(n.consume(F),I):e(F)}function f(F){return F===45?(n.consume(F),d):F===91?(n.consume(F),s=0,w):Ns(F)?(n.consume(F),M):e(F)}function d(F){return F===45?(n.consume(F),v):e(F)}function m(F){return F===null?e(F):F===45?(n.consume(F),y):Se(F)?(o=m,it(F)):(n.consume(F),m)}function y(F){return F===45?(n.consume(F),v):m(F)}function v(F){return F===62?at(F):F===45?y(F):m(F)}function w(F){const G="CDATA[";return F===G.charCodeAt(s++)?(n.consume(F),s===G.length?S:w):e(F)}function S(F){return F===null?e(F):F===93?(n.consume(F),P):Se(F)?(o=S,it(F)):(n.consume(F),S)}function P(F){return F===93?(n.consume(F),b):S(F)}function b(F){return F===62?at(F):F===93?(n.consume(F),b):S(F)}function M(F){return F===null||F===62?at(F):Se(F)?(o=M,it(F)):(n.consume(F),M)}function R(F){return F===null?e(F):F===63?(n.consume(F),O):Se(F)?(o=R,it(F)):(n.consume(F),R)}function O(F){return F===62?at(F):R(F)}function k(F){return Ns(F)?(n.consume(F),N):e(F)}function N(F){return F===45||_r(F)?(n.consume(F),N):D(F)}function D(F){return Se(F)?(o=D,it(F)):We(F)?(n.consume(F),D):at(F)}function I(F){return F===45||_r(F)?(n.consume(F),I):F===47||F===62||Qi(F)?H(F):e(F)}function H(F){return F===47?(n.consume(F),at):F===58||F===95||Ns(F)?(n.consume(F),W):Se(F)?(o=H,it(F)):We(F)?(n.consume(F),H):at(F)}function W(F){return F===45||F===46||F===58||F===95||_r(F)?(n.consume(F),W):U(F)}function U(F){return F===61?(n.consume(F),tt):Se(F)?(o=U,it(F)):We(F)?(n.consume(F),U):H(F)}function tt(F){return F===null||F===60||F===61||F===62||F===96?e(F):F===34||F===39?(n.consume(F),r=F,K):Se(F)?(o=tt,it(F)):We(F)?(n.consume(F),tt):(n.consume(F),Y)}function K(F){return F===r?(n.consume(F),r=void 0,rt):F===null?e(F):Se(F)?(o=K,it(F)):(n.consume(F),K)}function Y(F){return F===null||F===34||F===39||F===60||F===61||F===96?e(F):F===47||F===62||Qi(F)?H(F):(n.consume(F),Y)}function rt(F){return F===47||F===62||Qi(F)?H(F):e(F)}function at(F){return F===62?(n.consume(F),n.exit("htmlTextData"),n.exit("htmlText"),t):e(F)}function it(F){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(F),n.exit("lineEnding"),J}function J(F){return We(F)?cn(n,pt,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):pt(F)}function pt(F){return n.enter("htmlTextData"),o(F)}}const Ww={name:"labelEnd",resolveAll:yq,resolveTo:vq,tokenize:_q},pq={tokenize:xq},mq={tokenize:wq},gq={tokenize:bq};function yq(n){let t=-1;const e=[];for(;++t<n.length;){const i=n[t][1];if(e.push(n[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",t+=r}}return n.length!==e.length&&Gs(n,0,n.length,e),n}function vq(n,t){let e=n.length,i=0,r,s,o,a;for(;e--;)if(r=n[e][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[e][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(n[e][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=e,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(o=e);const c={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},f={type:"label",start:{...n[s][1].start},end:{...n[o][1].end}},d={type:"labelText",start:{...n[s+i+2][1].end},end:{...n[o-2][1].start}};return a=[["enter",c,t],["enter",f,t]],a=Vr(a,n.slice(s+1,s+i+3)),a=Vr(a,[["enter",d,t]]),a=Vr(a,jw(t.parser.constructs.insideSpan.null,n.slice(s+i+4,o-3),t)),a=Vr(a,[["exit",d,t],n[o-2],n[o-1],["exit",f,t]]),a=Vr(a,n.slice(o+1)),a=Vr(a,[["exit",c,t]]),Gs(n,s,n.length,a),n}function _q(n,t,e){const i=this;let r=i.events.length,s,o;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return a;function a(y){return s?s._inactive?m(y):(o=i.parser.defined.includes(pc(i.sliceSerialize({start:s.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(y),n.exit("labelMarker"),n.exit("labelEnd"),c):e(y)}function c(y){return y===40?n.attempt(pq,d,o?d:m)(y):y===91?n.attempt(mq,d,o?f:m)(y):o?d(y):m(y)}function f(y){return n.attempt(gq,d,m)(y)}function d(y){return t(y)}function m(y){return s._balanced=!0,e(y)}}function xq(n,t,e){return i;function i(m){return n.enter("resource"),n.enter("resourceMarker"),n.consume(m),n.exit("resourceMarker"),r}function r(m){return Qi(m)?Rf(n,s)(m):s(m)}function s(m){return m===41?d(m):A2(n,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return Qi(m)?Rf(n,c)(m):d(m)}function a(m){return e(m)}function c(m){return m===34||m===39||m===40?k2(n,f,e,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):d(m)}function f(m){return Qi(m)?Rf(n,d)(m):d(m)}function d(m){return m===41?(n.enter("resourceMarker"),n.consume(m),n.exit("resourceMarker"),n.exit("resource"),t):e(m)}}function wq(n,t,e){const i=this;return r;function r(a){return L2.call(i,n,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return i.parser.defined.includes(pc(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(a):e(a)}function o(a){return e(a)}}function bq(n,t,e){return i;function i(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),r}function r(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),t):e(s)}}const Sq={name:"labelStartImage",resolveAll:Ww.resolveAll,tokenize:Mq};function Mq(n,t,e){const i=this;return r;function r(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),s}function s(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),o):e(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?e(a):t(a)}}const Tq={name:"labelStartLink",resolveAll:Ww.resolveAll,tokenize:Eq};function Eq(n,t,e){const i=this;return r;function r(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?e(o):t(o)}}const z_={name:"lineEnding",tokenize:Pq};function Pq(n,t){return e;function e(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),cn(n,t,"linePrefix")}}const Hm={name:"thematicBreak",tokenize:Cq};function Cq(n,t,e){let i=0,r;return s;function s(f){return n.enter("thematicBreak"),o(f)}function o(f){return r=f,a(f)}function a(f){return f===r?(n.enter("thematicBreakSequence"),c(f)):i>=3&&(f===null||Se(f))?(n.exit("thematicBreak"),t(f)):e(f)}function c(f){return f===r?(n.consume(f),i++,c):(n.exit("thematicBreakSequence"),We(f)?cn(n,a,"whitespace")(f):a(f))}}const qi={continuation:{tokenize:Rq},exit:Dq,name:"list",tokenize:kq},Aq={partial:!0,tokenize:Oq},Lq={partial:!0,tokenize:Iq};function kq(n,t,e){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return a;function a(v){const w=i.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!i.containerState.marker||v===i.containerState.marker:t0(v)){if(i.containerState.type||(i.containerState.type=w,n.enter(w,{_container:!0})),w==="listUnordered")return n.enter("listItemPrefix"),v===42||v===45?n.check(Hm,e,f)(v):f(v);if(!i.interrupt||v===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(v)}return e(v)}function c(v){return t0(v)&&++o<10?(n.consume(v),c):(!i.interrupt||o<2)&&(i.containerState.marker?v===i.containerState.marker:v===41||v===46)?(n.exit("listItemValue"),f(v)):e(v)}function f(v){return n.enter("listItemMarker"),n.consume(v),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||v,n.check($g,i.interrupt?e:d,n.attempt(Aq,y,m))}function d(v){return i.containerState.initialBlankLine=!0,s++,y(v)}function m(v){return We(v)?(n.enter("listItemPrefixWhitespace"),n.consume(v),n.exit("listItemPrefixWhitespace"),y):e(v)}function y(v){return i.containerState.size=s+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,t(v)}}function Rq(n,t,e){const i=this;return i.containerState._closeFlow=void 0,n.check($g,r,s);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,cn(n,t,"listItemIndent",i.containerState.size+1)(a)}function s(a){return i.containerState.furtherBlankLines||!We(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(Lq,t,o)(a))}function o(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,cn(n,n.attempt(qi,t,e),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Iq(n,t,e){const i=this;return cn(n,r,"listItemIndent",i.containerState.size+1);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?t(s):e(s)}}function Dq(n){n.exit(this.containerState.type)}function Oq(n,t,e){const i=this;return cn(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const o=i.events[i.events.length-1];return!We(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):e(s)}}const mP={name:"setextUnderline",resolveTo:Nq,tokenize:Fq};function Nq(n,t){let e=n.length,i,r,s;for(;e--;)if(n[e][0]==="enter"){if(n[e][1].type==="content"){i=e;break}n[e][1].type==="paragraph"&&(r=e)}else n[e][1].type==="content"&&n.splice(e,1),!s&&n[e][1].type==="definition"&&(s=e);const o={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",s?(n.splice(r,0,["enter",o,t]),n.splice(s+1,0,["exit",n[i][1],t]),n[i][1].end={...n[s][1].end}):n[i][1]=o,n.push(["exit",o,t]),n}function Fq(n,t,e){const i=this;let r;return s;function s(f){let d=i.events.length,m;for(;d--;)if(i.events[d][1].type!=="lineEnding"&&i.events[d][1].type!=="linePrefix"&&i.events[d][1].type!=="content"){m=i.events[d][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||m)?(n.enter("setextHeadingLine"),r=f,o(f)):e(f)}function o(f){return n.enter("setextHeadingLineSequence"),a(f)}function a(f){return f===r?(n.consume(f),a):(n.exit("setextHeadingLineSequence"),We(f)?cn(n,c,"lineSuffix")(f):c(f))}function c(f){return f===null||Se(f)?(n.exit("setextHeadingLine"),t(f)):e(f)}}const zq={tokenize:Bq};function Bq(n){const t=this,e=n.attempt($g,i,n.attempt(this.parser.constructs.flowInitial,r,cn(n,n.attempt(this.parser.constructs.flow,r,n.attempt(WZ,r)),"linePrefix")));return e;function i(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),t.currentConstruct=void 0,e}function r(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),t.currentConstruct=void 0,e}}const Vq={resolveAll:I2()},Uq=R2("string"),Hq=R2("text");function R2(n){return{resolveAll:I2(n==="text"?jq:void 0),tokenize:t};function t(e){const i=this,r=this.parser.constructs[n],s=e.attempt(r,o,a);return o;function o(d){return f(d)?s(d):a(d)}function a(d){if(d===null){e.consume(d);return}return e.enter("data"),e.consume(d),c}function c(d){return f(d)?(e.exit("data"),s(d)):(e.consume(d),c)}function f(d){if(d===null)return!0;const m=r[d];let y=-1;if(m)for(;++y<m.length;){const v=m[y];if(!v.previous||v.previous.call(i,i.previous))return!0}return!1}}}function I2(n){return t;function t(e,i){let r=-1,s;for(;++r<=e.length;)s===void 0?e[r]&&e[r][1].type==="data"&&(s=r,r++):(!e[r]||e[r][1].type!=="data")&&(r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),r=s+2),s=void 0);return n?n(e,i):e}}function jq(n,t){let e=0;for(;++e<=n.length;)if((e===n.length||n[e][1].type==="lineEnding")&&n[e-1][1].type==="data"){const i=n[e-1][1],r=t.sliceStream(i);let s=r.length,o=-1,a=0,c;for(;s--;){const f=r[s];if(typeof f=="string"){for(o=f.length;f.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(f===-2)c=!0,a++;else if(f!==-1){s++;break}}if(t._contentTypeTextTrailing&&e===n.length&&(a=0),a){const f={type:e===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...f.start},i.start.offset===i.end.offset?Object.assign(i,f):(n.splice(e,0,["enter",f,t],["exit",f,t]),e+=2)}e++}return n}const Wq={42:qi,43:qi,45:qi,48:qi,49:qi,50:qi,51:qi,52:qi,53:qi,54:qi,55:qi,56:qi,57:qi,62:T2},Gq={91:XZ},$q={[-2]:F_,[-1]:F_,32:F_},Zq={35:eq,42:Hm,45:[mP,Hm],60:sq,61:mP,95:Hm,96:dP,126:dP},qq={38:P2,92:E2},Xq={[-5]:z_,[-4]:z_,[-3]:z_,33:Sq,38:P2,42:e0,60:[TZ,fq],91:Tq,92:[QZ,E2],93:Ww,95:e0,96:zZ},Yq={null:[e0,Vq]},Kq={null:[42,95]},Jq={null:[]},Qq=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Kq,contentInitial:Gq,disable:Jq,document:Wq,flow:Zq,flowInitial:$q,insideSpan:Yq,string:qq,text:Xq},Symbol.toStringTag,{value:"Module"}));function tX(n,t,e){let i={_bufferIndex:-1,_index:0,line:e&&e.line||1,column:e&&e.column||1,offset:e&&e.offset||0};const r={},s=[];let o=[],a=[];const c={attempt:D(k),check:D(N),consume:M,enter:R,exit:O,interrupt:D(N,{interrupt:!0})},f={code:null,containerState:{},defineSkip:S,events:[],now:w,parser:n,previous:null,sliceSerialize:y,sliceStream:v,write:m};let d=t.tokenize.call(f,c);return t.resolveAll&&s.push(t),f;function m(U){return o=Vr(o,U),P(),o[o.length-1]!==null?[]:(I(t,0),f.events=jw(s,f.events,f),f.events)}function y(U,tt){return nX(v(U),tt)}function v(U){return eX(o,U)}function w(){const{_bufferIndex:U,_index:tt,line:K,column:Y,offset:rt}=i;return{_bufferIndex:U,_index:tt,line:K,column:Y,offset:rt}}function S(U){r[U.line]=U.column,W()}function P(){let U;for(;i._index<o.length;){const tt=o[i._index];if(typeof tt=="string")for(U=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===U&&i._bufferIndex<tt.length;)b(tt.charCodeAt(i._bufferIndex));else b(tt)}}function b(U){d=d(U)}function M(U){Se(U)?(i.line++,i.column=1,i.offset+=U===-3?2:1,W()):U!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),f.previous=U}function R(U,tt){const K=tt||{};return K.type=U,K.start=w(),f.events.push(["enter",K,f]),a.push(K),K}function O(U){const tt=a.pop();return tt.end=w(),f.events.push(["exit",tt,f]),tt}function k(U,tt){I(U,tt.from)}function N(U,tt){tt.restore()}function D(U,tt){return K;function K(Y,rt,at){let it,J,pt,F;return Array.isArray(Y)?lt(Y):"tokenize"in Y?lt([Y]):G(Y);function G(nt){return Ot;function Ot(At){const kt=At!==null&&nt[At],Ft=At!==null&&nt.null,jt=[...Array.isArray(kt)?kt:kt?[kt]:[],...Array.isArray(Ft)?Ft:Ft?[Ft]:[]];return lt(jt)(At)}}function lt(nt){return it=nt,J=0,nt.length===0?at:z(nt[J])}function z(nt){return Ot;function Ot(At){return F=H(),pt=nt,nt.partial||(f.currentConstruct=nt),nt.name&&f.parser.constructs.disable.null.includes(nt.name)?_t():nt.tokenize.call(tt?Object.assign(Object.create(f),tt):f,c,mt,_t)(At)}}function mt(nt){return U(pt,F),rt}function _t(nt){return F.restore(),++J<it.length?z(it[J]):at}}}function I(U,tt){U.resolveAll&&!s.includes(U)&&s.push(U),U.resolve&&Gs(f.events,tt,f.events.length-tt,U.resolve(f.events.slice(tt),f)),U.resolveTo&&(f.events=U.resolveTo(f.events,f))}function H(){const U=w(),tt=f.previous,K=f.currentConstruct,Y=f.events.length,rt=Array.from(a);return{from:Y,restore:at};function at(){i=U,f.previous=tt,f.currentConstruct=K,f.events.length=Y,a=rt,W()}}function W(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function eX(n,t){const e=t.start._index,i=t.start._bufferIndex,r=t.end._index,s=t.end._bufferIndex;let o;if(e===r)o=[n[e].slice(i,s)];else{if(o=n.slice(e,r),i>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(i):o.shift()}s>0&&o.push(n[r].slice(0,s))}return o}function nX(n,t){let e=-1;const i=[];let r;for(;++e<n.length;){const s=n[e];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&r)continue;o=" ";break}default:o=String.fromCharCode(s)}r=s===-2,i.push(o)}return i.join("")}function iX(n){const i={constructs:cZ([Qq,...(n||{}).extensions||[]]),content:r(vZ),defined:[],document:r(xZ),flow:r(zq),lazy:{},string:r(Uq),text:r(Hq)};return i;function r(s){return o;function o(a){return tX(i,s,a)}}}function rX(n){for(;!C2(n););return n}const gP=/[\0\t\n\r]/g;function sX(){let n=1,t="",e=!0,i;return r;function r(s,o,a){const c=[];let f,d,m,y,v;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),m=0,t="",e&&(s.charCodeAt(0)===65279&&m++,e=void 0);m<s.length;){if(gP.lastIndex=m,f=gP.exec(s),y=f&&f.index!==void 0?f.index:s.length,v=s.charCodeAt(y),!f){t=s.slice(m);break}if(v===10&&m===y&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),m<y&&(c.push(s.slice(m,y)),n+=y-m),v){case 0:{c.push(65533),n++;break}case 9:{for(d=Math.ceil(n/4)*4,c.push(-2);n++<d;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}m=y+1}return a&&(i&&c.push(-5),t&&c.push(t),c.push(null)),c}}const oX=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function aX(n){return n.replace(oX,lX)}function lX(n,t,e){if(t)return t;if(e.charCodeAt(0)===35){const r=e.charCodeAt(1),s=r===120||r===88;return M2(e.slice(s?2:1),s?16:10)}return Hw(e)||n}const D2={}.hasOwnProperty;function uX(n,t,e){return typeof t!="string"&&(e=t,t=void 0),cX(e)(rX(iX(e).document().write(sX()(n,t,!0))))}function cX(n){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(wt),autolinkProtocol:H,autolinkEmail:H,atxHeading:s(Wt),blockQuote:s(Ft),characterEscape:H,characterReference:H,codeFenced:s(jt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(jt,o),codeText:s(bt,o),codeTextData:H,data:H,codeFlowValue:H,definition:s(Rt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Dt),hardBreakEscape:s(It),hardBreakTrailing:s(It),htmlFlow:s(X,o),htmlFlowData:H,htmlText:s(X,o),htmlTextData:H,image:s($),label:o,link:s(wt),listItem:s($t),listItemValue:y,listOrdered:s(Lt,m),listUnordered:s(Lt),paragraph:s(Kt),reference:z,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Wt),strong:s(re),thematicBreak:s(se)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:kt,autolinkProtocol:At,blockQuote:c(),characterEscapeValue:W,characterReferenceMarkerHexadecimal:_t,characterReferenceMarkerNumeric:_t,characterReferenceValue:nt,characterReference:Ot,codeFenced:c(P),codeFencedFence:S,codeFencedFenceInfo:v,codeFencedFenceMeta:w,codeFlowValue:W,codeIndented:c(b),codeText:c(rt),codeTextData:W,data:W,definition:c(),definitionDestinationString:O,definitionLabelString:M,definitionTitleString:R,emphasis:c(),hardBreakEscape:c(tt),hardBreakTrailing:c(tt),htmlFlow:c(K),htmlFlowData:W,htmlText:c(Y),htmlTextData:W,image:c(it),label:pt,labelText:J,lineEnding:U,link:c(at),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:mt,resourceDestinationString:F,resourceTitleString:G,resource:lt,setextHeading:c(I),setextHeadingLineSequence:D,setextHeadingText:N,strong:c(),thematicBreak:c()}};O2(t,(n||{}).mdastExtensions||[]);const e={};return i;function i(ft){let q={type:"root",children:[]};const Pt={stack:[q],tokenStack:[],config:t,enter:a,exit:f,buffer:o,resume:d,data:e},St=[];let zt=-1;for(;++zt<ft.length;)if(ft[zt][1].type==="listOrdered"||ft[zt][1].type==="listUnordered")if(ft[zt][0]==="enter")St.push(zt);else{const Xt=St.pop();zt=r(ft,Xt,zt)}for(zt=-1;++zt<ft.length;){const Xt=t[ft[zt][0]];D2.call(Xt,ft[zt][1].type)&&Xt[ft[zt][1].type].call(Object.assign({sliceSerialize:ft[zt][2].sliceSerialize},Pt),ft[zt][1])}if(Pt.tokenStack.length>0){const Xt=Pt.tokenStack[Pt.tokenStack.length-1];(Xt[1]||yP).call(Pt,void 0,Xt[0])}for(q.position={start:da(ft.length>0?ft[0][1].start:{line:1,column:1,offset:0}),end:da(ft.length>0?ft[ft.length-2][1].end:{line:1,column:1,offset:0})},zt=-1;++zt<t.transforms.length;)q=t.transforms[zt](q)||q;return q}function r(ft,q,Pt){let St=q-1,zt=-1,Xt=!1,ue,ke,Fe,xn;for(;++St<=Pt;){const ut=ft[St];switch(ut[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ut[0]==="enter"?zt++:zt--,xn=void 0;break}case"lineEndingBlank":{ut[0]==="enter"&&(ue&&!xn&&!zt&&!Fe&&(Fe=St),xn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:xn=void 0}if(!zt&&ut[0]==="enter"&&ut[1].type==="listItemPrefix"||zt===-1&&ut[0]==="exit"&&(ut[1].type==="listUnordered"||ut[1].type==="listOrdered")){if(ue){let Bt=St;for(ke=void 0;Bt--;){const ee=ft[Bt];if(ee[1].type==="lineEnding"||ee[1].type==="lineEndingBlank"){if(ee[0]==="exit")continue;ke&&(ft[ke][1].type="lineEndingBlank",Xt=!0),ee[1].type="lineEnding",ke=Bt}else if(!(ee[1].type==="linePrefix"||ee[1].type==="blockQuotePrefix"||ee[1].type==="blockQuotePrefixWhitespace"||ee[1].type==="blockQuoteMarker"||ee[1].type==="listItemIndent"))break}Fe&&(!ke||Fe<ke)&&(ue._spread=!0),ue.end=Object.assign({},ke?ft[ke][1].start:ut[1].end),ft.splice(ke||St,0,["exit",ue,ut[2]]),St++,Pt++}if(ut[1].type==="listItemPrefix"){const Bt={type:"listItem",_spread:!1,start:Object.assign({},ut[1].start),end:void 0};ue=Bt,ft.splice(St,0,["enter",Bt,ut[2]]),St++,Pt++,Fe=void 0,xn=!0}}}return ft[q][1]._spread=Xt,Pt}function s(ft,q){return Pt;function Pt(St){a.call(this,ft(St),St),q&&q.call(this,St)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ft,q,Pt){this.stack[this.stack.length-1].children.push(ft),this.stack.push(ft),this.tokenStack.push([q,Pt||void 0]),ft.position={start:da(q.start),end:void 0}}function c(ft){return q;function q(Pt){ft&&ft.call(this,Pt),f.call(this,Pt)}}function f(ft,q){const Pt=this.stack.pop(),St=this.tokenStack.pop();if(St)St[0].type!==ft.type&&(q?q.call(this,ft,St[0]):(St[1]||yP).call(this,ft,St[0]));else throw new Error("Cannot close `"+ft.type+"` ("+kf({start:ft.start,end:ft.end})+"): it’s not open");Pt.position.end=da(ft.end)}function d(){return lZ(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function y(ft){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(ft),10),this.data.expectingFirstListItemValue=void 0}}function v(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.lang=ft}function w(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.meta=ft}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function P(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.value=ft.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.value=ft.replace(/(\r?\n|\r)$/g,"")}function M(ft){const q=this.resume(),Pt=this.stack[this.stack.length-1];Pt.label=q,Pt.identifier=pc(this.sliceSerialize(ft)).toLowerCase()}function R(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.title=ft}function O(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.url=ft}function k(ft){const q=this.stack[this.stack.length-1];if(!q.depth){const Pt=this.sliceSerialize(ft).length;q.depth=Pt}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function D(ft){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(ft).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function H(ft){const Pt=this.stack[this.stack.length-1].children;let St=Pt[Pt.length-1];(!St||St.type!=="text")&&(St=Jt(),St.position={start:da(ft.start),end:void 0},Pt.push(St)),this.stack.push(St)}function W(ft){const q=this.stack.pop();q.value+=this.sliceSerialize(ft),q.position.end=da(ft.end)}function U(ft){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Pt=q.children[q.children.length-1];Pt.position.end=da(ft.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(q.type)&&(H.call(this,ft),W.call(this,ft))}function tt(){this.data.atHardBreak=!0}function K(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.value=ft}function Y(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.value=ft}function rt(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.value=ft}function at(){const ft=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";ft.type+="Reference",ft.referenceType=q,delete ft.url,delete ft.title}else delete ft.identifier,delete ft.label;this.data.referenceType=void 0}function it(){const ft=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";ft.type+="Reference",ft.referenceType=q,delete ft.url,delete ft.title}else delete ft.identifier,delete ft.label;this.data.referenceType=void 0}function J(ft){const q=this.sliceSerialize(ft),Pt=this.stack[this.stack.length-2];Pt.label=aX(q),Pt.identifier=pc(q).toLowerCase()}function pt(){const ft=this.stack[this.stack.length-1],q=this.resume(),Pt=this.stack[this.stack.length-1];if(this.data.inReference=!0,Pt.type==="link"){const St=ft.children;Pt.children=St}else Pt.alt=q}function F(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.url=ft}function G(){const ft=this.resume(),q=this.stack[this.stack.length-1];q.title=ft}function lt(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function mt(ft){const q=this.resume(),Pt=this.stack[this.stack.length-1];Pt.label=q,Pt.identifier=pc(this.sliceSerialize(ft)).toLowerCase(),this.data.referenceType="full"}function _t(ft){this.data.characterReferenceType=ft.type}function nt(ft){const q=this.sliceSerialize(ft),Pt=this.data.characterReferenceType;let St;Pt?(St=M2(q,Pt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):St=Hw(q);const zt=this.stack[this.stack.length-1];zt.value+=St}function Ot(ft){const q=this.stack.pop();q.position.end=da(ft.end)}function At(ft){W.call(this,ft);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(ft)}function kt(ft){W.call(this,ft);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(ft)}function Ft(){return{type:"blockquote",children:[]}}function jt(){return{type:"code",lang:null,meta:null,value:""}}function bt(){return{type:"inlineCode",value:""}}function Rt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Dt(){return{type:"emphasis",children:[]}}function Wt(){return{type:"heading",depth:0,children:[]}}function It(){return{type:"break"}}function X(){return{type:"html",value:""}}function $(){return{type:"image",title:null,url:"",alt:null}}function wt(){return{type:"link",title:null,url:"",children:[]}}function Lt(ft){return{type:"list",ordered:ft.type==="listOrdered",start:null,spread:ft._spread,children:[]}}function $t(ft){return{type:"listItem",spread:ft._spread,checked:null,children:[]}}function Kt(){return{type:"paragraph",children:[]}}function re(){return{type:"strong",children:[]}}function Jt(){return{type:"text",value:""}}function se(){return{type:"thematicBreak"}}}function da(n){return{line:n.line,column:n.column,offset:n.offset}}function O2(n,t){let e=-1;for(;++e<t.length;){const i=t[e];Array.isArray(i)?O2(n,i):hX(n,i)}}function hX(n,t){let e;for(e in t)if(D2.call(t,e))switch(e){case"canContainEols":{const i=t[e];i&&n[e].push(...i);break}case"transforms":{const i=t[e];i&&n[e].push(...i);break}case"enter":case"exit":{const i=t[e];i&&Object.assign(n[e],i);break}}}function yP(n,t){throw n?new Error("Cannot close `"+n.type+"` ("+kf({start:n.start,end:n.end})+"): a different token (`"+t.type+"`, "+kf({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+kf({start:t.start,end:t.end})+") is still open")}function fX(n){const t=this;t.parser=e;function e(i){return uX(i,{...t.data("settings"),...n,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function dX(n,t){const e={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(t),!0)};return n.patch(t,e),n.applyData(t,e)}function pX(n,t){const e={type:"element",tagName:"br",properties:{},children:[]};return n.patch(t,e),[n.applyData(t,e),{type:"text",value:`
`}]}function mX(n,t){const e=t.value?t.value+`
`:"",i={};t.lang&&(i.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:e}]};return t.meta&&(r.data={meta:t.meta}),n.patch(t,r),r=n.applyData(t,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(t,r),r}function gX(n,t){const e={type:"element",tagName:"del",properties:{},children:n.all(t)};return n.patch(t,e),n.applyData(t,e)}function yX(n,t){const e={type:"element",tagName:"em",properties:{},children:n.all(t)};return n.patch(t,e),n.applyData(t,e)}function vX(n,t){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),r=Wc(i.toLowerCase()),s=n.footnoteOrder.indexOf(i);let o,a=n.footnoteCounts.get(i);a===void 0?(a=0,n.footnoteOrder.push(i),o=n.footnoteOrder.length):o=s+1,a+=1,n.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+e+"fn-"+r,id:e+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};n.patch(t,c);const f={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(t,f),n.applyData(t,f)}function _X(n,t){const e={type:"element",tagName:"h"+t.depth,properties:{},children:n.all(t)};return n.patch(t,e),n.applyData(t,e)}function xX(n,t){if(n.options.allowDangerousHtml){const e={type:"raw",value:t.value};return n.patch(t,e),n.applyData(t,e)}}function N2(n,t){const e=t.referenceType;let i="]";if(e==="collapsed"?i+="[]":e==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const r=n.all(t),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=i:r.push({type:"text",value:i}),r}function wX(n,t){const e=String(t.identifier).toUpperCase(),i=n.definitionById.get(e);if(!i)return N2(n,t);const r={src:Wc(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return n.patch(t,s),n.applyData(t,s)}function bX(n,t){const e={src:Wc(t.url)};t.alt!==null&&t.alt!==void 0&&(e.alt=t.alt),t.title!==null&&t.title!==void 0&&(e.title=t.title);const i={type:"element",tagName:"img",properties:e,children:[]};return n.patch(t,i),n.applyData(t,i)}function SX(n,t){const e={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};n.patch(t,e);const i={type:"element",tagName:"code",properties:{},children:[e]};return n.patch(t,i),n.applyData(t,i)}function MX(n,t){const e=String(t.identifier).toUpperCase(),i=n.definitionById.get(e);if(!i)return N2(n,t);const r={href:Wc(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:n.all(t)};return n.patch(t,s),n.applyData(t,s)}function TX(n,t){const e={href:Wc(t.url)};t.title!==null&&t.title!==void 0&&(e.title=t.title);const i={type:"element",tagName:"a",properties:e,children:n.all(t)};return n.patch(t,i),n.applyData(t,i)}function EX(n,t,e){const i=n.all(t),r=e?PX(e):F2(t),s={},o=[];if(typeof t.checked=="boolean"){const d=i[0];let m;d&&d.type==="element"&&d.tagName==="p"?m=d:(m={type:"element",tagName:"p",properties:{},children:[]},i.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const d=i[a];(r||a!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!r?o.push(...d.children):o.push(d)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:s,children:o};return n.patch(t,f),n.applyData(t,f)}function PX(n){let t=!1;if(n.type==="list"){t=n.spread||!1;const e=n.children;let i=-1;for(;!t&&++i<e.length;)t=F2(e[i])}return t}function F2(n){const t=n.spread;return t??n.children.length>1}function CX(n,t){const e={},i=n.all(t);let r=-1;for(typeof t.start=="number"&&t.start!==1&&(e.start=t.start);++r<i.length;){const o=i[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){e.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:e,children:n.wrap(i,!0)};return n.patch(t,s),n.applyData(t,s)}function AX(n,t){const e={type:"element",tagName:"p",properties:{},children:n.all(t)};return n.patch(t,e),n.applyData(t,e)}function LX(n,t){const e={type:"root",children:n.wrap(n.all(t))};return n.patch(t,e),n.applyData(t,e)}function kX(n,t){const e={type:"element",tagName:"strong",properties:{},children:n.all(t)};return n.patch(t,e),n.applyData(t,e)}function RX(n,t){const e=n.all(t),i=e.shift(),r=[];if(i){const o={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(t.children[0],o),r.push(o)}if(e.length>0){const o={type:"element",tagName:"tbody",properties:{},children:n.wrap(e,!0)},a=zw(t.children[1]),c=y2(t.children[t.children.length-1]);a&&c&&(o.position={start:a,end:c}),r.push(o)}const s={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(t,s),n.applyData(t,s)}function IX(n,t,e){const i=e?e.children:void 0,s=(i?i.indexOf(t):1)===0?"th":"td",o=e&&e.type==="table"?e.align:void 0,a=o?o.length:t.children.length;let c=-1;const f=[];for(;++c<a;){const m=t.children[c],y={},v=o?o[c]:void 0;v&&(y.align=v);let w={type:"element",tagName:s,properties:y,children:[]};m&&(w.children=n.all(m),n.patch(m,w),w=n.applyData(m,w)),f.push(w)}const d={type:"element",tagName:"tr",properties:{},children:n.wrap(f,!0)};return n.patch(t,d),n.applyData(t,d)}function DX(n,t){const e={type:"element",tagName:"td",properties:{},children:n.all(t)};return n.patch(t,e),n.applyData(t,e)}const vP=9,_P=32;function OX(n){const t=String(n),e=/\r?\n|\r/g;let i=e.exec(t),r=0;const s=[];for(;i;)s.push(xP(t.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=e.exec(t);return s.push(xP(t.slice(r),r>0,!1)),s.join("")}function xP(n,t,e){let i=0,r=n.length;if(t){let s=n.codePointAt(i);for(;s===vP||s===_P;)i++,s=n.codePointAt(i)}if(e){let s=n.codePointAt(r-1);for(;s===vP||s===_P;)r--,s=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function NX(n,t){const e={type:"text",value:OX(String(t.value))};return n.patch(t,e),n.applyData(t,e)}function FX(n,t){const e={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(t,e),n.applyData(t,e)}const zX={blockquote:dX,break:pX,code:mX,delete:gX,emphasis:yX,footnoteReference:vX,heading:_X,html:xX,imageReference:wX,image:bX,inlineCode:SX,linkReference:MX,link:TX,listItem:EX,list:CX,paragraph:AX,root:LX,strong:kX,table:RX,tableCell:DX,tableRow:IX,text:NX,thematicBreak:FX,toml:Cm,yaml:Cm,definition:Cm,footnoteDefinition:Cm};function Cm(){}const z2=-1,Zg=0,If=1,fg=2,Gw=3,$w=4,Zw=5,qw=6,B2=7,V2=8,wP=typeof self=="object"?self:globalThis,BX=(n,t)=>{const e=(r,s)=>(n.set(s,r),r),i=r=>{if(n.has(r))return n.get(r);const[s,o]=t[r];switch(s){case Zg:case z2:return e(o,r);case If:{const a=e([],r);for(const c of o)a.push(i(c));return a}case fg:{const a=e({},r);for(const[c,f]of o)a[i(c)]=i(f);return a}case Gw:return e(new Date(o),r);case $w:{const{source:a,flags:c}=o;return e(new RegExp(a,c),r)}case Zw:{const a=e(new Map,r);for(const[c,f]of o)a.set(i(c),i(f));return a}case qw:{const a=e(new Set,r);for(const c of o)a.add(i(c));return a}case B2:{const{name:a,message:c}=o;return e(new wP[a](c),r)}case V2:return e(BigInt(o),r);case"BigInt":return e(Object(BigInt(o)),r);case"ArrayBuffer":return e(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return e(new DataView(a),o)}}return e(new wP[s](o),r)};return i},bP=n=>BX(new Map,n)(0),Xu="",{toString:VX}={},{keys:UX}=Object,Qh=n=>{const t=typeof n;if(t!=="object"||!n)return[Zg,t];const e=VX.call(n).slice(8,-1);switch(e){case"Array":return[If,Xu];case"Object":return[fg,Xu];case"Date":return[Gw,Xu];case"RegExp":return[$w,Xu];case"Map":return[Zw,Xu];case"Set":return[qw,Xu];case"DataView":return[If,e]}return e.includes("Array")?[If,e]:e.includes("Error")?[B2,e]:[fg,e]},Am=([n,t])=>n===Zg&&(t==="function"||t==="symbol"),HX=(n,t,e,i)=>{const r=(o,a)=>{const c=i.push(o)-1;return e.set(a,c),c},s=o=>{if(e.has(o))return e.get(o);let[a,c]=Qh(o);switch(a){case Zg:{let d=o;switch(c){case"bigint":a=V2,d=o.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return r([z2],o)}return r([a,d],o)}case If:{if(c){let y=o;return c==="DataView"?y=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(y=new Uint8Array(o)),r([c,[...y]],o)}const d=[],m=r([a,d],o);for(const y of o)d.push(s(y));return m}case fg:{if(c)switch(c){case"BigInt":return r([c,o.toString()],o);case"Boolean":case"Number":case"String":return r([c,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const d=[],m=r([a,d],o);for(const y of UX(o))(n||!Am(Qh(o[y])))&&d.push([s(y),s(o[y])]);return m}case Gw:return r([a,o.toISOString()],o);case $w:{const{source:d,flags:m}=o;return r([a,{source:d,flags:m}],o)}case Zw:{const d=[],m=r([a,d],o);for(const[y,v]of o)(n||!(Am(Qh(y))||Am(Qh(v))))&&d.push([s(y),s(v)]);return m}case qw:{const d=[],m=r([a,d],o);for(const y of o)(n||!Am(Qh(y)))&&d.push(s(y));return m}}const{message:f}=o;return r([a,{name:c,message:f}],o)};return s},SP=(n,{json:t,lossy:e}={})=>{const i=[];return HX(!(t||e),!!t,new Map,i)(n),i},dg=typeof structuredClone=="function"?(n,t)=>t&&("json"in t||"lossy"in t)?bP(SP(n,t)):structuredClone(n):(n,t)=>bP(SP(n,t));function jX(n,t){const e=[{type:"text",value:"↩"}];return t>1&&e.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),e}function WX(n,t){return"Back to reference "+(n+1)+(t>1?"-"+t:"")}function GX(n){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",e=n.options.footnoteBackContent||jX,i=n.options.footnoteBackLabel||WX,r=n.options.footnoteLabel||"Footnotes",s=n.options.footnoteLabelTagName||"h2",o=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<n.footnoteOrder.length;){const f=n.footnoteById.get(n.footnoteOrder[c]);if(!f)continue;const d=n.all(f),m=String(f.identifier).toUpperCase(),y=Wc(m.toLowerCase());let v=0;const w=[],S=n.footnoteCounts.get(m);for(;S!==void 0&&++v<=S;){w.length>0&&w.push({type:"text",value:" "});let M=typeof e=="string"?e:e(c,v);typeof M=="string"&&(M={type:"text",value:M}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+y+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,v),className:["data-footnote-backref"]},children:Array.isArray(M)?M:[M]})}const P=d[d.length-1];if(P&&P.type==="element"&&P.tagName==="p"){const M=P.children[P.children.length-1];M&&M.type==="text"?M.value+=" ":P.children.push({type:"text",value:" "}),P.children.push(...w)}else d.push(...w);const b={type:"element",tagName:"li",properties:{id:t+"fn-"+y},children:n.wrap(d,!0)};n.patch(f,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...dg(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const U2=(function(n){if(n==null)return XX;if(typeof n=="function")return qg(n);if(typeof n=="object")return Array.isArray(n)?$X(n):ZX(n);if(typeof n=="string")return qX(n);throw new Error("Expected function, string, or object as test")});function $X(n){const t=[];let e=-1;for(;++e<n.length;)t[e]=U2(n[e]);return qg(i);function i(...r){let s=-1;for(;++s<t.length;)if(t[s].apply(this,r))return!0;return!1}}function ZX(n){const t=n;return qg(e);function e(i){const r=i;let s;for(s in n)if(r[s]!==t[s])return!1;return!0}}function qX(n){return qg(t);function t(e){return e&&e.type===n}}function qg(n){return t;function t(e,i,r){return!!(YX(e)&&n.call(this,e,typeof i=="number"?i:void 0,r||void 0))}}function XX(){return!0}function YX(n){return n!==null&&typeof n=="object"&&"type"in n}const H2=[],KX=!0,MP=!1,JX="skip";function QX(n,t,e,i){let r;typeof t=="function"&&typeof e!="function"?(i=e,e=t):r=t;const s=U2(r),o=i?-1:1;a(n,void 0,[])();function a(c,f,d){const m=c&&typeof c=="object"?c:{};if(typeof m.type=="string"){const v=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(c.type+(v?"<"+v+">":""))+")"})}return y;function y(){let v=H2,w,S,P;if((!t||s(c,f,d[d.length-1]||void 0))&&(v=tY(e(c,d)),v[0]===MP))return v;if("children"in c&&c.children){const b=c;if(b.children&&v[0]!==JX)for(S=(i?b.children.length:-1)+o,P=d.concat(b);S>-1&&S<b.children.length;){const M=b.children[S];if(w=a(M,S,P)(),w[0]===MP)return w;S=typeof w[1]=="number"?w[1]:S+o}}return v}}}function tY(n){return Array.isArray(n)?n:typeof n=="number"?[KX,n]:n==null?H2:[n]}function j2(n,t,e,i){let r,s,o;typeof t=="function"&&typeof e!="function"?(s=void 0,o=t,r=e):(s=t,o=e,r=i),QX(n,s,a,r);function a(c,f){const d=f[f.length-1],m=d?d.children.indexOf(c):void 0;return o(c,m,d)}}const n0={}.hasOwnProperty,eY={};function nY(n,t){const e=t||eY,i=new Map,r=new Map,s=new Map,o={...zX,...e.handlers},a={all:f,applyData:rY,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:e,patch:iY,wrap:oY};return j2(n,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const m=d.type==="definition"?i:r,y=String(d.identifier).toUpperCase();m.has(y)||m.set(y,d)}}),a;function c(d,m){const y=d.type,v=a.handlers[y];if(n0.call(a.handlers,y)&&v)return v(a,d,m);if(a.options.passThrough&&a.options.passThrough.includes(y)){if("children"in d){const{children:S,...P}=d,b=dg(P);return b.children=a.all(d),b}return dg(d)}return(a.options.unknownHandler||sY)(a,d,m)}function f(d){const m=[];if("children"in d){const y=d.children;let v=-1;for(;++v<y.length;){const w=a.one(y[v],d);if(w){if(v&&y[v-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=TP(w.value)),!Array.isArray(w)&&w.type==="element")){const S=w.children[0];S&&S.type==="text"&&(S.value=TP(S.value))}Array.isArray(w)?m.push(...w):m.push(w)}}}return m}}function iY(n,t){n.position&&(t.position=V$(n))}function rY(n,t){let e=t;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,s=n.data.hProperties;if(typeof i=="string")if(e.type==="element")e.tagName=i;else{const o="children"in e?e.children:[e];e={type:"element",tagName:i,properties:{},children:o}}e.type==="element"&&s&&Object.assign(e.properties,dg(s)),"children"in e&&e.children&&r!==null&&r!==void 0&&(e.children=r)}return e}function sY(n,t){const e=t.data||{},i="value"in t&&!(n0.call(e,"hProperties")||n0.call(e,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:n.all(t)};return n.patch(t,i),n.applyData(t,i)}function oY(n,t){const e=[];let i=-1;for(t&&e.push({type:"text",value:`
`});++i<n.length;)i&&e.push({type:"text",value:`
`}),e.push(n[i]);return t&&n.length>0&&e.push({type:"text",value:`
`}),e}function TP(n){let t=0,e=n.charCodeAt(t);for(;e===9||e===32;)t++,e=n.charCodeAt(t);return n.slice(t)}function EP(n,t){const e=nY(n,t),i=e.one(n,void 0),r=GX(e),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function aY(n,t){return n&&"run"in n?async function(e,i){const r=EP(e,{file:i,...t});await n.run(r,i)}:function(e,i){return EP(e,{file:i,...n||t})}}function PP(n){if(n)throw n}var B_,CP;function lY(){if(CP)return B_;CP=1;var n=Object.prototype.hasOwnProperty,t=Object.prototype.toString,e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},s=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var d=n.call(f,"constructor"),m=f.constructor&&f.constructor.prototype&&n.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!d&&!m)return!1;var y;for(y in f);return typeof y>"u"||n.call(f,y)},o=function(f,d){e&&d.name==="__proto__"?e(f,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):f[d.name]=d.newValue},a=function(f,d){if(d==="__proto__")if(n.call(f,d)){if(i)return i(f,d).value}else return;return f[d]};return B_=function c(){var f,d,m,y,v,w,S=arguments[0],P=1,b=arguments.length,M=!1;for(typeof S=="boolean"&&(M=S,S=arguments[1]||{},P=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});P<b;++P)if(f=arguments[P],f!=null)for(d in f)m=a(S,d),y=a(f,d),S!==y&&(M&&y&&(s(y)||(v=r(y)))?(v?(v=!1,w=m&&r(m)?m:[]):w=m&&s(m)?m:{},o(S,{name:d,newValue:c(M,w,y)})):typeof y<"u"&&o(S,{name:d,newValue:y}));return S},B_}var uY=lY();const V_=Tc(uY);function i0(n){if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function cY(){const n=[],t={run:e,use:i};return t;function e(...r){let s=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...r);function a(c,...f){const d=n[++s];let m=-1;if(c){o(c);return}for(;++m<r.length;)(f[m]===null||f[m]===void 0)&&(f[m]=r[m]);r=f,d?hY(d,a)(...f):o(null,...f)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),t}}function hY(n,t){let e;return i;function i(...o){const a=n.length>o.length;let c;a&&o.push(r);try{c=n.apply(this,o)}catch(f){const d=f;if(a&&e)throw d;return r(d)}a||(c&&c.then&&typeof c.then=="function"?c.then(s,r):c instanceof Error?r(c):s(c))}function r(o,...a){e||(e=!0,t(o,...a))}function s(o){r(null,o)}}const Is={basename:fY,dirname:dY,extname:pY,join:mY,sep:"/"};function fY(n,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');_d(n);let e=0,i=-1,r=n.length,s;if(t===void 0||t.length===0||t.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(s){e=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":n.slice(e,i)}if(t===n)return"";let o=-1,a=t.length-1;for(;r--;)if(n.codePointAt(r)===47){if(s){e=r+1;break}}else o<0&&(s=!0,o=r+1),a>-1&&(n.codePointAt(r)===t.codePointAt(a--)?a<0&&(i=r):(a=-1,i=o));return e===i?i=o:i<0&&(i=n.length),n.slice(e,i)}function dY(n){if(_d(n),n.length===0)return".";let t=-1,e=n.length,i;for(;--e;)if(n.codePointAt(e)===47){if(i){t=e;break}}else i||(i=!0);return t<0?n.codePointAt(0)===47?"/":".":t===1&&n.codePointAt(0)===47?"//":n.slice(0,t)}function pY(n){_d(n);let t=n.length,e=-1,i=0,r=-1,s=0,o;for(;t--;){const a=n.codePointAt(t);if(a===47){if(o){i=t+1;break}continue}e<0&&(o=!0,e=t+1),a===46?r<0?r=t:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||e<0||s===0||s===1&&r===e-1&&r===i+1?"":n.slice(r,e)}function mY(...n){let t=-1,e;for(;++t<n.length;)_d(n[t]),n[t]&&(e=e===void 0?n[t]:e+"/"+n[t]);return e===void 0?".":gY(e)}function gY(n){_d(n);const t=n.codePointAt(0)===47;let e=yY(n,!t);return e.length===0&&!t&&(e="."),e.length>0&&n.codePointAt(n.length-1)===47&&(e+="/"),t?"/"+e:e}function yY(n,t){let e="",i=0,r=-1,s=0,o=-1,a,c;for(;++o<=n.length;){if(o<n.length)a=n.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(e.length<2||i!==2||e.codePointAt(e.length-1)!==46||e.codePointAt(e.length-2)!==46){if(e.length>2){if(c=e.lastIndexOf("/"),c!==e.length-1){c<0?(e="",i=0):(e=e.slice(0,c),i=e.length-1-e.lastIndexOf("/")),r=o,s=0;continue}}else if(e.length>0){e="",i=0,r=o,s=0;continue}}t&&(e=e.length>0?e+"/..":"..",i=2)}else e.length>0?e+="/"+n.slice(r+1,o):e=n.slice(r+1,o),i=o-r-1;r=o,s=0}else a===46&&s>-1?s++:s=-1}return e}function _d(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const vY={cwd:_Y};function _Y(){return"/"}function r0(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function xY(n){if(typeof n=="string")n=new URL(n);else if(!r0(n)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(n.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return wY(n)}function wY(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=n.pathname;let e=-1;for(;++e<t.length;)if(t.codePointAt(e)===37&&t.codePointAt(e+1)===50){const i=t.codePointAt(e+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(t)}const U_=["history","path","basename","stem","extname","dirname"];class W2{constructor(t){let e;t?r0(t)?e={path:t}:typeof t=="string"||bY(t)?e={value:t}:e=t:e={},this.cwd="cwd"in e?"":vY.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<U_.length;){const s=U_[i];s in e&&e[s]!==void 0&&e[s]!==null&&(this[s]=s==="history"?[...e[s]]:e[s])}let r;for(r in e)U_.includes(r)||(this[r]=e[r])}get basename(){return typeof this.path=="string"?Is.basename(this.path):void 0}set basename(t){j_(t,"basename"),H_(t,"basename"),this.path=Is.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Is.dirname(this.path):void 0}set dirname(t){AP(this.basename,"dirname"),this.path=Is.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Is.extname(this.path):void 0}set extname(t){if(H_(t,"extname"),AP(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Is.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){r0(t)&&(t=xY(t)),j_(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Is.basename(this.path,this.extname):void 0}set stem(t){j_(t,"stem"),H_(t,"stem"),this.path=Is.join(this.dirname||"",t+(this.extname||""))}fail(t,e,i){const r=this.message(t,e,i);throw r.fatal=!0,r}info(t,e,i){const r=this.message(t,e,i);return r.fatal=void 0,r}message(t,e,i){const r=new Ei(t,e,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function H_(n,t){if(n&&n.includes(Is.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Is.sep+"`")}function j_(n,t){if(!n)throw new Error("`"+t+"` cannot be empty")}function AP(n,t){if(!n)throw new Error("Setting `"+t+"` requires `path` to be set too")}function bY(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const SY=(function(n){const i=this.constructor.prototype,r=i[n],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s}),MY={}.hasOwnProperty;class Xw extends SY{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=cY()}copy(){const t=new Xw;let e=-1;for(;++e<this.attachers.length;){const i=this.attachers[e];t.use(...i)}return t.data(V_(!0,{},this.namespace)),t}data(t,e){return typeof t=="string"?arguments.length===2?($_("data",this.frozen),this.namespace[t]=e,this):MY.call(this.namespace,t)&&this.namespace[t]||void 0:t?($_("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[e,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=e.call(t,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const e=Lm(t),i=this.parser||this.Parser;return W_("parse",i),i(String(e),e)}process(t,e){const i=this;return this.freeze(),W_("process",this.parser||this.Parser),G_("process",this.compiler||this.Compiler),e?r(void 0,e):new Promise(r);function r(s,o){const a=Lm(t),c=i.parse(a);i.run(c,a,function(d,m,y){if(d||!m||!y)return f(d);const v=m,w=i.stringify(v,y);PY(w)?y.value=w:y.result=w,f(d,y)});function f(d,m){d||!m?o(d):s?s(m):e(void 0,m)}}}processSync(t){let e=!1,i;return this.freeze(),W_("processSync",this.parser||this.Parser),G_("processSync",this.compiler||this.Compiler),this.process(t,r),kP("processSync","process",e),i;function r(s,o){e=!0,PP(s),i=o}}run(t,e,i){LP(t),this.freeze();const r=this.transformers;return!i&&typeof e=="function"&&(i=e,e=void 0),i?s(void 0,i):new Promise(s);function s(o,a){const c=Lm(e);r.run(t,c,f);function f(d,m,y){const v=m||t;d?a(d):o?o(v):i(void 0,v,y)}}}runSync(t,e){let i=!1,r;return this.run(t,e,s),kP("runSync","run",i),r;function s(o,a){PP(o),r=a,i=!0}}stringify(t,e){this.freeze();const i=Lm(e),r=this.compiler||this.Compiler;return G_("stringify",r),LP(t),r(t,i)}use(t,...e){const i=this.attachers,r=this.namespace;if($_("use",this.frozen),t!=null)if(typeof t=="function")c(t,e);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(f){if(typeof f=="function")c(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[d,...m]=f;c(d,m)}else o(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function o(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(f.plugins),f.settings&&(r.settings=V_(!0,r.settings,f.settings))}function a(f){let d=-1;if(f!=null)if(Array.isArray(f))for(;++d<f.length;){const m=f[d];s(m)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function c(f,d){let m=-1,y=-1;for(;++m<i.length;)if(i[m][0]===f){y=m;break}if(y===-1)i.push([f,...d]);else if(d.length>0){let[v,...w]=d;const S=i[y][1];i0(S)&&i0(v)&&(v=V_(!0,S,v)),i[y]=[f,v,...w]}}}}const TY=new Xw().freeze();function W_(n,t){if(typeof t!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function G_(n,t){if(typeof t!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function $_(n,t){if(t)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function LP(n){if(!i0(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function kP(n,t,e){if(!e)throw new Error("`"+n+"` finished async. Use `"+t+"` instead")}function Lm(n){return EY(n)?n:new W2(n)}function EY(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function PY(n){return typeof n=="string"||CY(n)}function CY(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const AY="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",RP=[],IP={allowDangerousHtml:!0},LY=/^(https?|ircs?|mailto|xmpp)$/i,kY=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function RY(n){const t=IY(n),e=DY(n);return OY(t.runSync(t.parse(e),e),n)}function IY(n){const t=n.rehypePlugins||RP,e=n.remarkPlugins||RP,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...IP}:IP;return TY().use(fX).use(e).use(aY,i).use(t)}function DY(n){const t=n.children||"",e=new W2;return typeof t=="string"&&(e.value=t),e}function OY(n,t){const e=t.allowedElements,i=t.allowElement,r=t.components,s=t.disallowedElements,o=t.skipHtml,a=t.unwrapDisallowed,c=t.urlTransform||NY;for(const d of kY)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+AY+d.id,void 0);return t.className&&(n={type:"element",tagName:"div",properties:{className:t.className},children:n.type==="root"?n.children:[n]}),j2(n,f),G$(n,{Fragment:B.Fragment,components:r,ignoreInvalidStyle:!0,jsx:B.jsx,jsxs:B.jsxs,passKeys:!0,passNode:!0});function f(d,m,y){if(d.type==="raw"&&y&&typeof m=="number")return o?y.children.splice(m,1):y.children[m]={type:"text",value:d.value},m;if(d.type==="element"){let v;for(v in N_)if(Object.hasOwn(N_,v)&&Object.hasOwn(d.properties,v)){const w=d.properties[v],S=N_[v];(S===null||S.includes(d.tagName))&&(d.properties[v]=c(String(w||""),v,d))}}if(d.type==="element"){let v=e?!e.includes(d.tagName):s?s.includes(d.tagName):!1;if(!v&&i&&typeof m=="number"&&(v=!i(d,m,y)),v&&y&&typeof m=="number")return a&&d.children?y.children.splice(m,1,...d.children):y.children.splice(m,1),m}}}function NY(n){const t=n.indexOf(":"),e=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return t===-1||r!==-1&&t>r||e!==-1&&t>e||i!==-1&&t>i||LY.test(n.slice(0,t))?n:""}function FY({isOpen:n,onClose:t}){const[e,i]=Q.useState("");return Q.useEffect(()=>{n&&fetch("/src/assets/help.md").then(r=>r.text()).then(r=>i(r)).catch(r=>{console.error("Gagal load help.md:",r),i(`# Error
Gagal memuat panduan.`)})},[n]),n?B.jsx(Ow,{title:"Help & Documentation",onClose:t,width:"w-[600px]",children:B.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:B.jsx(RY,{children:e})})}):null}var G2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},DP=vn.createContext&&vn.createContext(G2),zY=["attr","size","title"];function BY(n,t){if(n==null)return{};var e=VY(n,t),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function VY(n,t){if(n==null)return{};var e={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(t.indexOf(i)>=0)continue;e[i]=n[i]}return e}function pg(){return pg=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},pg.apply(this,arguments)}function OP(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function mg(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(e),!0).forEach(function(i){UY(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):OP(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function UY(n,t,e){return t=HY(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function HY(n){var t=jY(n,"string");return typeof t=="symbol"?t:t+""}function jY(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function $2(n){return n&&n.map((t,e)=>vn.createElement(t.tag,mg({key:e},t.attr),$2(t.child)))}function WY(n){return t=>vn.createElement(GY,pg({attr:mg({},n.attr)},t),$2(n.child))}function GY(n){var t=e=>{var{attr:i,size:r,title:s}=n,o=BY(n,zY),a=r||e.size||"1em",c;return e.className&&(c=e.className),n.className&&(c=(c?c+" ":"")+n.className),vn.createElement("svg",pg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,o,{className:c,style:mg(mg({color:n.color||e.color},e.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&vn.createElement("title",null,s),n.children)};return DP!==void 0?vn.createElement(DP.Consumer,null,e=>t(e)):t(G2)}function $Y(n){return WY({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(n)}function Z2({show:n,onClose:t,onLogin:e,apiUrl:i,theme:r="light"}){const[s,o]=Q.useState(""),[a,c]=Q.useState(""),[f,d]=Q.useState(!1),[m,y]=Q.useState("");if(!n)return null;const v=async()=>{d(!0),y("");try{await Ye.post(`${i}/auth/login`,`username=${s}&password=${a}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0});const S=await Ye.get(`${i}/auth/me`,{withCredentials:!0});if(S.data.email){const P={username:S.data.email,avatar:S.data.avatar||""};e(P)}}catch(S){console.error(S),y("Login gagal, periksa username/password")}finally{d(!1)}},w=()=>{window.location.href=`${i}/auth/google?redirect=${encodeURIComponent(window.location.href)}`};return B.jsxs(B.Fragment,{children:[B.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),B.jsxs("div",{className:"fixed z-50 top-1/2 left-1/2 w-full max-w-md p-6 bg-[var(--card)] text-[var(--text)] rounded-lg shadow-lg transform -translate-x-1/2 -translate-y-1/2",children:[B.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Login"}),B.jsx("input",{className:"w-full mb-2 p-2 border rounded",placeholder:"Username",value:s,onChange:S=>o(S.target.value),disabled:f}),B.jsx("input",{type:"password",className:"w-full mb-4 p-2 border rounded",placeholder:"Password",value:a,onChange:S=>c(S.target.value),disabled:f}),m&&B.jsx("p",{className:"text-red-500 text-sm mb-2 text-center",children:m}),B.jsxs("div",{className:"flex flex-col space-y-2",children:[B.jsx("button",{onClick:v,className:"w-full px-4 py-2 bg-blue-500 text-white rounded flex justify-center items-center",disabled:f,children:f?"Logging in...":"Login"}),B.jsxs("button",{onClick:w,className:`flex items-center justify-center w-full border rounded px-3 py-2 transition-colors ${r==="dark"?"bg-gray-800 text-white hover:bg-gray-700":"bg-white text-black hover:bg-gray-100"}`,disabled:f,children:[B.jsx($Y,{className:"w-5 h-5 mr-2"}),"Login with Google"]}),B.jsx("button",{onClick:t,className:"w-full px-4 py-2 border rounded",disabled:f,children:"Cancel"})]})]})]})}const ZY="https://sha-api-production.up.railway.app/api/v1",q2=Ye.create({baseURL:ZY,headers:{"Content-Type":"application/json"}});q2.interceptors.request.use(n=>{const t=localStorage.getItem("psha-token");return t&&(n.headers.Authorization=`Bearer ${t}`),n});async function qY(n){return(await q2.post("/projects",n)).data}function XY(n){return qY(n)}const tf=window.RUNTIME_CONFIG?.API_URL||"https://sha-api-production.up.railway.app/api/v1";function YY({activeTab:n,setActiveTab:t}){const[e,i]=Q.useState(null),[r,s]=Q.useState(null),[o,a]=Q.useState(null),[c,f]=Q.useState({}),[d,m]=Q.useState([]),[y,v]=Q.useState([]),[w,S]=Q.useState([]),[P,b]=Q.useState([]),[M,R]=Q.useState(!1),[O,k]=Q.useState(!1),[N,D]=Q.useState(!1),[I,H]=Q.useState(null),[W,U]=Q.useState(null);Q.useEffect(()=>{const Y=localStorage.getItem("access_token");Y&&Ye.get(`${tf}/auth/me`,{withCredentials:!0}).then(rt=>{rt.data.email&&U({username:rt.data.email,avatar:rt.data.avatar||"",token:Y})}).catch(()=>console.log("User not logged in yet"))},[]),Q.useEffect(()=>{new URLSearchParams(window.location.search).get("login")==="success"&&Ye.get(`${tf}/auth/me`,{withCredentials:!0}).then(rt=>{if(rt.data.email){const at={username:rt.data.email,avatar:rt.data.avatar||"",token:localStorage.getItem("access_token")||""};U(at),localStorage.setItem("username",at.username),localStorage.setItem("avatar",at.avatar||""),a({type:"success",message:"Login successful!"}),setTimeout(()=>a(null),3e3);const it=window.location.origin+window.location.pathname;window.history.replaceState({},document.title,it)}}).catch(console.error)},[]),Q.useEffect(()=>{(async()=>{try{const rt=await fetch(`${tf}/datasource/`);if(!rt.ok)throw new Error(`Fetch datasource status: ${rt.status}`);const at=await rt.json();m(Array.isArray(at)?at:at.data||[])}catch(rt){console.error("Gagal fetch datasources:",rt),m([])}})()},[]),Q.useEffect(()=>{n==="gmpe"&&y.length===0&&(async()=>{try{const rt=await fetch(`${tf}/gmpe/`);if(!rt.ok)throw new Error(`Fetch gmpe status: ${rt.status}`);const at=await rt.json();v(Array.isArray(at)?at:at.data||[])}catch(rt){console.error("Gagal fetch gmpe:",rt),v([])}})()},[n]);const tt=({result:Y,siteData:rt,selectedSources:at,selectedGmpes:it,error:J})=>{J?(s(J),a({type:"error",message:J})):(i(Y),s(null),a({type:"success",message:"Analysis completed successfully!"})),setTimeout(()=>a(null),4e3)},K=Y=>{if(!W){a({type:"error",message:"Login dulu sebelum menyimpan project!"}),setTimeout(()=>a(null),3e3);return}XY({name:Y,site:c,datasources:d,selectedSources:w,selectedGmpes:P},W.token).then(()=>{a({type:"success",message:`Project "${Y}" saved!`}),setTimeout(()=>a(null),3e3)}).catch(()=>{a({type:"error",message:"Gagal menyimpan project"}),setTimeout(()=>a(null),3e3)})};return B.jsxs(B.Fragment,{children:[B.jsx(tH,{toast:o}),n==="analysis"&&B.jsxs(B.Fragment,{children:[B.jsx(NB,{siteData:c,setSiteData:f,datasources:d,gmpeList:y,selectedSources:w,setSelectedSources:S,selectedGmpes:P,setSelectedGmpes:b,onRunResult:tt}),e&&B.jsx(Q5,{result:e,error:r})]}),n==="datasource"&&B.jsx(p$,{datasources:d,setDatasources:m}),n==="gmpe"&&B.jsx(m$,{gmpeList:y}),B.jsx(g$,{isOpen:M,onClose:()=>R(!1),onSave:K}),B.jsx(FY,{isOpen:O,onClose:()=>k(!1)}),N&&B.jsx(Z2,{apiUrl:tf,onClose:()=>D(!1),onLogin:Y=>{U(Y),localStorage.setItem("access_token",Y.token||""),localStorage.setItem("username",Y.username),localStorage.setItem("avatar",Y.avatar||""),D(!1)}})]})}function KY({isOpen:n,setIsOpen:t,activeTab:e,setActiveTab:i,setCurrentProject:r,apiUrl:s="https://sha-api-production.up.railway.app/api/v1"}){const[o,a]=Q.useState(""),[c,f]=Q.useState([]),[d,m]=Q.useState(null),[y,v]=Q.useState({visible:!1,x:0,y:0,project:null}),w=[{key:"analysis",label:"PSHA"},{key:"datasource",label:"Datasource"},{key:"gmpe",label:"Attenuation"}];Q.useEffect(()=>{if(n)a("animate-slide-in");else if(o==="animate-slide-in"){a("animate-slide-out");const O=setTimeout(()=>a(""),300);return()=>clearTimeout(O)}},[n]),Q.useEffect(()=>{const O=localStorage.getItem("access_token"),k=localStorage.getItem("username");O&&k&&m({username:k,token:O})},[]),Q.useEffect(()=>{if(!d?.token){f([]);return}(async()=>{try{const k=await Ye.get(`${s}/projects`,{headers:{Authorization:`Bearer ${d.token}`}});f(k.data)}catch(k){console.error("Gagal fetch project:",k),f([])}})()},[d,s]);const S=O=>{i("analysis"),r(O),t(!1)},P=async O=>{if(d?.token&&confirm(`Delete project "${O.name}"?`))try{await Ye.delete(`${s}/projects/${O.id}`,{headers:{Authorization:`Bearer ${d.token}`}}),f(c.filter(k=>k.id!==O.id)),r(k=>k?.id===O.id?null:k)}catch(k){console.error("Gagal hapus project:",k),alert("Gagal hapus project")}},b=(O,k)=>{O.preventDefault(),v({visible:!0,x:O.pageX,y:O.pageY,project:k})},M=()=>v({visible:!1,x:0,y:0,project:null}),R=()=>c.length>0?c.map(O=>B.jsx("button",{onClick:()=>S(O),onContextMenu:k=>b(k,O),className:"text-left px-2 py-1 rounded hover:bg-[var(--hover)] w-full",children:O.name},O.id)):B.jsx("p",{className:"text-sm text-gray-400",children:"No projects found"});return B.jsxs(B.Fragment,{children:[B.jsxs("aside",{className:"hidden md:flex flex-col w-64 h-screen fixed top-14 left-0 bg-[var(--card)] text-[var(--text)] shadow pt-2",children:[B.jsx("nav",{className:"flex flex-col space-y-2 p-4",children:w.map(O=>B.jsx("button",{className:`text-left px-3 py-2 rounded-lg transition ${e===O.key?"bg-blue-600 text-white":"hover:bg-[var(--hover)]"}`,onClick:()=>i(O.key),children:O.label},O.key))}),d&&B.jsxs(B.Fragment,{children:[B.jsx("hr",{className:"my-2 border-gray-500"}),B.jsxs("div",{className:"p-2",children:[B.jsxs("p",{className:"font-semibold mb-1",children:["Projects (",d.username,"):"]}),R()]})]})]}),(n||o==="animate-slide-out")&&B.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",onClick:M,children:[B.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>t(!1)}),B.jsxs("aside",{className:`relative z-50 w-64 bg-[var(--card)] text-[var(--text)] p-6 h-full pt-16 shadow-lg ${o}`,children:[B.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-200",children:"✕"}),B.jsx("nav",{className:"flex flex-col space-y-2 mt-8",children:w.map(O=>B.jsx("button",{className:`text-left px-3 py-2 rounded-lg transition ${e===O.key?"bg-blue-600 text-white":"hover:bg-[var(--hover)]"}`,onClick:()=>{i(O.key),t(!1)},children:O.label},O.key))}),d&&B.jsxs(B.Fragment,{children:[B.jsx("hr",{className:"my-2 border-gray-500"}),B.jsxs("div",{className:"p-2",children:[B.jsxs("p",{className:"font-semibold mb-1",children:["Projects (",d.username,"):"]}),R()]})]})]})]}),y.visible&&B.jsx("div",{style:{top:y.y,left:y.x},className:"fixed bg-[var(--card)] border rounded shadow p-2 z-50",onMouseLeave:M,children:B.jsx("button",{className:"px-2 py-1 hover:bg-red-500 hover:text-white rounded w-full text-left",onClick:()=>{P(y.project),M()},children:"Delete"})})]})}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X2=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=Q.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...a},c)=>Q.createElement("svg",{ref:c,...QY,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:X2("lucide",r),...a},[...o.map(([f,d])=>Q.createElement(f,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=(n,t)=>{const e=Q.forwardRef(({className:i,...r},s)=>Q.createElement(tK,{ref:s,iconNode:t,className:X2(`lucide-${JY(n)}`,i),...r}));return e.displayName=`${n}`,e};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=Xg("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=Xg("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=Xg("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=Xg("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function sK({user:n,onClose:t,onUpdate:e}){const[i,r]=Q.useState(n.username),[s,o]=Q.useState(n.avatar),a=()=>{const c={...n,username:i,avatar:s};localStorage.setItem("username",i),localStorage.setItem("avatar",s),e(c),t()};return B.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:B.jsxs("div",{className:"bg-[var(--card)] p-6 rounded-lg shadow-md w-80",children:[B.jsx("h2",{className:"text-lg font-bold mb-4",children:"Profile"}),B.jsxs("div",{className:"flex flex-col items-center mb-4",children:[B.jsx("img",{src:s,alt:"avatar",className:"w-16 h-16 rounded-full mb-2"}),B.jsx("input",{className:"w-full mb-2 p-2 border rounded",placeholder:"Avatar URL",value:s,onChange:c=>o(c.target.value)})]}),B.jsx("input",{className:"w-full mb-4 p-2 border rounded",placeholder:"Username",value:i,onChange:c=>r(c.target.value)}),B.jsxs("div",{className:"flex justify-end space-x-2",children:[B.jsx("button",{onClick:t,className:"px-4 py-2 border rounded",children:"Cancel"}),B.jsx("button",{onClick:a,className:"px-4 py-2 bg-green-500 text-white rounded",children:"Save"})]})]})})}function oK({onNewProject:n,onHelp:t,theme:e,toggleTheme:i,onMenuToggle:r,apiUrl:s,user:o,onUserUpdate:a,onLogout:c}){const[f,d]=Q.useState(!1),[m,y]=Q.useState(!1),[v,w]=Q.useState(!1),S=(P,b,M)=>B.jsx("button",{onClick:b,className:`px-3 py-1 rounded hover:opacity-80 transition ${M}`,children:P});return B.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 h-14 bg-[var(--card)] text-[var(--text)] shadow",children:[B.jsxs("div",{className:"px-4 py-3 flex justify-between items-center",children:[B.jsxs("div",{className:"flex items-center space-x-4",children:[B.jsx("button",{onClick:r,className:"md:hidden p-2 rounded-lg hover:bg-[var(--hover)]",children:B.jsx(nK,{size:24})}),B.jsx("span",{className:"text-xl font-bold",children:"SHA-Web"})]}),B.jsxs("div",{className:"flex items-center space-x-4",children:[o?B.jsxs(B.Fragment,{children:[S("New Project",n,"bg-green-500 text-white"),B.jsxs("div",{className:"relative",children:[B.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>w(!v),children:[o.avatar?B.jsx("img",{src:o.avatar,className:"w-8 h-8 rounded-full"}):B.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-500 flex items-center justify-center text-white",children:o.username?.[0]?.toUpperCase()||"U"}),B.jsx("span",{children:o.username||""})]}),v&&B.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-[var(--card)] shadow-lg rounded-lg border border-gray-600 z-50",children:[B.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-600",onClick:()=>{y(!0),w(!1)},children:"Profile"}),B.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-600",onClick:()=>w(!1),children:"Settings"}),B.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-600",onClick:()=>{c&&c(),w(!1)},children:"Logout"})]})]})]}):S("Login",()=>d(!0),"hover:text-blue-400"),B.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-[var(--hover)] transition",title:"Help",children:B.jsx(eK,{size:20})}),B.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-[var(--hover)] transition",title:"Toggle theme",children:e==="dark"?B.jsx(rK,{size:20}):B.jsx(iK,{size:20})})]})]}),f&&B.jsx(Z2,{apiUrl:s,theme:e,show:f,onClose:()=>d(!1),onLogin:P=>{localStorage.setItem("access_token",P.token||""),localStorage.setItem("username",P.username),localStorage.setItem("avatar",P.avatar||""),a&&a(P),d(!1)}}),m&&o&&B.jsx(sK,{user:o,onClose:()=>y(!1),onUpdate:P=>{a&&a(P)}})]})}const aK=window.RUNTIME_CONFIG?.API_URL||"https://sha-api-production.up.railway.app/api/v1";function lK({children:n,activeTab:t,setActiveTab:e}){const[i,r]=Q.useState(!1),[s,o]=Q.useState(localStorage.getItem("theme")||"light"),[a,c]=Q.useState(null),[f,d]=Q.useState(null);Q.useEffect(()=>{const v=new URLSearchParams(window.location.search),w=v.get("token"),S=v.get("username"),P=v.get("avatar");if(w&&S){const b={username:S,token:w,avatar:P};localStorage.setItem("access_token",w),localStorage.setItem("username",S),localStorage.setItem("avatar",P||""),d(b),window.history.replaceState({},document.title,window.location.pathname)}else{const b=localStorage.getItem("access_token"),M=localStorage.getItem("username"),R=localStorage.getItem("avatar");b&&M&&d({username:M,token:b,avatar:R})}},[]),Q.useEffect(()=>{document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s)},[s]);const m=()=>o(v=>v==="dark"?"light":"dark"),y=()=>{d(null),localStorage.removeItem("access_token"),localStorage.removeItem("username"),localStorage.removeItem("avatar")};return B.jsxs("div",{className:"h-screen flex",children:[B.jsx(KY,{activeTab:t,setActiveTab:e,isOpen:i,setIsOpen:r,setCurrentProject:c}),B.jsxs("div",{className:"flex-1 flex flex-col",children:[B.jsx(oK,{activeTab:t,setActiveTab:e,onNewProject:()=>console.log("New project"),onMenuToggle:()=>r(v=>!v),theme:s,toggleTheme:m,user:f,apiUrl:aK,onUserUpdate:d,onLogout:y,onHelp:()=>console.log("Help clicked"),currentProject:a}),B.jsx("main",{className:"flex-1 overflow-y-auto p-6 pt-14 md:ml-64 transition-colors duration-300",children:n})]})]})}function uK(){const[n,t]=vn.useState("analysis");return B.jsx(lK,{activeTab:n,setActiveTab:t,children:B.jsx(YY,{activeTab:n,setActiveTab:t})})}BR.createRoot(document.getElementById("root")).render(B.jsx(vn.StrictMode,{children:B.jsx(uK,{})}));
